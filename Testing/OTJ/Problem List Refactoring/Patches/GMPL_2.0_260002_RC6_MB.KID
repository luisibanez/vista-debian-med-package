KIDS Distribution saved on Sep 02, 2013@14:25:48
PROBLEM LIST REFACTORING
**KIDS**:GMPL*2.0*260002*RC6^ACKQ*3.0*260002^IBD*3.0*260002^OR*3.0*260002^PX*1.0*260002^PXRM*2.0*260002^ROR*1.5*260002^XU*8.0*260002^

**INSTALL NAME**
GMPL*2.0*260002*RC6
"BLD",9037,0)
GMPL*2.0*260002*RC6^PROBLEM LIST^0^3130902^y
"BLD",9037,1,0)
^^10^10^3130729^^^^
"BLD",9037,1,1,0)
PROBLEM LIST REFACTORING
"BLD",9037,1,2,0)
 
"BLD",9037,1,3,0)
Install time: less than a minute
"BLD",9037,1,4,0)
Journal size: 900 kB
"BLD",9037,1,5,0)
 
"BLD",9037,1,6,0)
WARNING
"BLD",9037,1,7,0)
If attempting to install while a user is currently utilizing the   
"BLD",9037,1,8,0)
system on Cache, a <PROTECT> error may be shown.
"BLD",9037,1,9,0)
We reccomend that CPRS and the Problem List menus be
"BLD",9037,1,10,0)
put out of order during the installation.
"BLD",9037,4,0)
^9.64PA^^
"BLD",9037,6.3)
26
"BLD",9037,"KRN",0)
^9.67PA^779.2^20
"BLD",9037,"KRN",.4,0)
.4
"BLD",9037,"KRN",.401,0)
.401
"BLD",9037,"KRN",.402,0)
.402
"BLD",9037,"KRN",.403,0)
.403
"BLD",9037,"KRN",.5,0)
.5
"BLD",9037,"KRN",.84,0)
.84
"BLD",9037,"KRN",.84,"NM",0)
^9.68A^531^531
"BLD",9037,"KRN",.84,"NM",1,0)
1250000.001^^0
"BLD",9037,"KRN",.84,"NM",2,0)
1250000.002^^0
"BLD",9037,"KRN",.84,"NM",3,0)
1250000.003^^0
"BLD",9037,"KRN",.84,"NM",4,0)
1250000.004^^0
"BLD",9037,"KRN",.84,"NM",5,0)
1250000.005^^0
"BLD",9037,"KRN",.84,"NM",6,0)
1250000.006^^0
"BLD",9037,"KRN",.84,"NM",7,0)
1250000.007^^0
"BLD",9037,"KRN",.84,"NM",8,0)
1250000.008^^0
"BLD",9037,"KRN",.84,"NM",9,0)
1250000.009^^0
"BLD",9037,"KRN",.84,"NM",10,0)
1250000.01^^0
"BLD",9037,"KRN",.84,"NM",11,0)
1250000.011^^0
"BLD",9037,"KRN",.84,"NM",12,0)
1250000.012^^0
"BLD",9037,"KRN",.84,"NM",13,0)
1250000.013^^0
"BLD",9037,"KRN",.84,"NM",14,0)
1250000.014^^0
"BLD",9037,"KRN",.84,"NM",15,0)
1250000.015^^0
"BLD",9037,"KRN",.84,"NM",16,0)
1250000.016^^0
"BLD",9037,"KRN",.84,"NM",17,0)
1250000.017^^0
"BLD",9037,"KRN",.84,"NM",18,0)
1250000.018^^0
"BLD",9037,"KRN",.84,"NM",19,0)
1250000.019^^0
"BLD",9037,"KRN",.84,"NM",20,0)
1250000.02^^0
"BLD",9037,"KRN",.84,"NM",21,0)
1250000.021^^0
"BLD",9037,"KRN",.84,"NM",22,0)
1250000.022^^0
"BLD",9037,"KRN",.84,"NM",23,0)
1250000.023^^0
"BLD",9037,"KRN",.84,"NM",24,0)
1250000.024^^0
"BLD",9037,"KRN",.84,"NM",25,0)
1250000.025^^0
"BLD",9037,"KRN",.84,"NM",26,0)
1250000.026^^0
"BLD",9037,"KRN",.84,"NM",27,0)
1250000.027^^0
"BLD",9037,"KRN",.84,"NM",28,0)
1250000.028^^0
"BLD",9037,"KRN",.84,"NM",29,0)
1250000.029^^0
"BLD",9037,"KRN",.84,"NM",30,0)
1250000.03^^0
"BLD",9037,"KRN",.84,"NM",31,0)
1250000.031^^0
"BLD",9037,"KRN",.84,"NM",32,0)
1250000.032^^0
"BLD",9037,"KRN",.84,"NM",33,0)
1250000.033^^0
"BLD",9037,"KRN",.84,"NM",34,0)
1250000.034^^0
"BLD",9037,"KRN",.84,"NM",35,0)
1250000.035^^0
"BLD",9037,"KRN",.84,"NM",36,0)
1250000.036^^0
"BLD",9037,"KRN",.84,"NM",37,0)
1250000.037^^0
"BLD",9037,"KRN",.84,"NM",38,0)
1250000.038^^0
"BLD",9037,"KRN",.84,"NM",39,0)
1250000.039^^0
"BLD",9037,"KRN",.84,"NM",40,0)
1250000.04^^0
"BLD",9037,"KRN",.84,"NM",41,0)
1250000.041^^0
"BLD",9037,"KRN",.84,"NM",42,0)
1250000.042^^0
"BLD",9037,"KRN",.84,"NM",43,0)
1250000.043^^0
"BLD",9037,"KRN",.84,"NM",44,0)
1250000.044^^0
"BLD",9037,"KRN",.84,"NM",45,0)
1250000.045^^0
"BLD",9037,"KRN",.84,"NM",46,0)
1250000.046^^0
"BLD",9037,"KRN",.84,"NM",47,0)
1250000.047^^0
"BLD",9037,"KRN",.84,"NM",48,0)
1250000.048^^0
"BLD",9037,"KRN",.84,"NM",49,0)
1250000.049^^0
"BLD",9037,"KRN",.84,"NM",50,0)
1250000.05^^0
"BLD",9037,"KRN",.84,"NM",51,0)
1250000.051^^0
"BLD",9037,"KRN",.84,"NM",52,0)
1250000.052^^0
"BLD",9037,"KRN",.84,"NM",53,0)
1250000.053^^0
"BLD",9037,"KRN",.84,"NM",54,0)
1250000.054^^0
"BLD",9037,"KRN",.84,"NM",55,0)
1250000.055^^0
"BLD",9037,"KRN",.84,"NM",56,0)
1250000.056^^0
"BLD",9037,"KRN",.84,"NM",57,0)
1250000.057^^0
"BLD",9037,"KRN",.84,"NM",58,0)
1250000.058^^0
"BLD",9037,"KRN",.84,"NM",59,0)
1250000.059^^0
"BLD",9037,"KRN",.84,"NM",60,0)
1250000.06^^0
"BLD",9037,"KRN",.84,"NM",61,0)
1250000.061^^0
"BLD",9037,"KRN",.84,"NM",62,0)
1250000.062^^0
"BLD",9037,"KRN",.84,"NM",63,0)
1250000.063^^0
"BLD",9037,"KRN",.84,"NM",64,0)
1250000.064^^0
"BLD",9037,"KRN",.84,"NM",65,0)
1250000.065^^0
"BLD",9037,"KRN",.84,"NM",66,0)
1250000.066^^0
"BLD",9037,"KRN",.84,"NM",67,0)
1250000.067^^0
"BLD",9037,"KRN",.84,"NM",68,0)
1250000.068^^0
"BLD",9037,"KRN",.84,"NM",69,0)
1250000.069^^0
"BLD",9037,"KRN",.84,"NM",70,0)
1250000.07^^0
"BLD",9037,"KRN",.84,"NM",71,0)
1250000.071^^0
"BLD",9037,"KRN",.84,"NM",72,0)
1250000.072^^0
"BLD",9037,"KRN",.84,"NM",73,0)
1250000.073^^0
"BLD",9037,"KRN",.84,"NM",74,0)
1250000.074^^0
"BLD",9037,"KRN",.84,"NM",75,0)
1250000.075^^0
"BLD",9037,"KRN",.84,"NM",76,0)
1250000.076^^0
"BLD",9037,"KRN",.84,"NM",77,0)
1250000.077^^0
"BLD",9037,"KRN",.84,"NM",78,0)
1250000.078^^0
"BLD",9037,"KRN",.84,"NM",79,0)
1250000.079^^0
"BLD",9037,"KRN",.84,"NM",80,0)
1250000.08^^0
"BLD",9037,"KRN",.84,"NM",81,0)
1250000.081^^0
"BLD",9037,"KRN",.84,"NM",82,0)
1250000.082^^0
"BLD",9037,"KRN",.84,"NM",83,0)
1250000.083^^0
"BLD",9037,"KRN",.84,"NM",84,0)
1250000.084^^0
"BLD",9037,"KRN",.84,"NM",85,0)
1250000.085^^0
"BLD",9037,"KRN",.84,"NM",86,0)
1250000.086^^0
"BLD",9037,"KRN",.84,"NM",87,0)
1250000.087^^0
"BLD",9037,"KRN",.84,"NM",88,0)
1250000.088^^0
"BLD",9037,"KRN",.84,"NM",89,0)
1250000.089^^0
"BLD",9037,"KRN",.84,"NM",90,0)
1250000.09^^0
"BLD",9037,"KRN",.84,"NM",91,0)
1250000.091^^0
"BLD",9037,"KRN",.84,"NM",92,0)
1250000.092^^0
"BLD",9037,"KRN",.84,"NM",93,0)
1250000.093^^0
"BLD",9037,"KRN",.84,"NM",94,0)
1250000.094^^0
"BLD",9037,"KRN",.84,"NM",95,0)
1250000.095^^0
"BLD",9037,"KRN",.84,"NM",96,0)
1250000.096^^0
"BLD",9037,"KRN",.84,"NM",97,0)
1250000.097^^0
"BLD",9037,"KRN",.84,"NM",98,0)
1250000.098^^0
"BLD",9037,"KRN",.84,"NM",99,0)
1250000.099^^0
"BLD",9037,"KRN",.84,"NM",100,0)
1250000.1^^0
"BLD",9037,"KRN",.84,"NM",101,0)
1250000.101^^0
"BLD",9037,"KRN",.84,"NM",102,0)
1250000.102^^0
"BLD",9037,"KRN",.84,"NM",103,0)
1250000.103^^0
"BLD",9037,"KRN",.84,"NM",104,0)
1250000.104^^0
"BLD",9037,"KRN",.84,"NM",105,0)
1250000.105^^0
"BLD",9037,"KRN",.84,"NM",106,0)
1250000.106^^0
"BLD",9037,"KRN",.84,"NM",107,0)
1250000.107^^0
"BLD",9037,"KRN",.84,"NM",108,0)
1250000.108^^0
"BLD",9037,"KRN",.84,"NM",109,0)
1250000.109^^0
"BLD",9037,"KRN",.84,"NM",110,0)
1250000.11^^0
"BLD",9037,"KRN",.84,"NM",111,0)
1250000.111^^0
"BLD",9037,"KRN",.84,"NM",112,0)
1250000.112^^0
"BLD",9037,"KRN",.84,"NM",113,0)
1250000.113^^0
"BLD",9037,"KRN",.84,"NM",114,0)
1250000.114^^0
"BLD",9037,"KRN",.84,"NM",115,0)
1250000.115^^0
"BLD",9037,"KRN",.84,"NM",116,0)
1250000.116^^0
"BLD",9037,"KRN",.84,"NM",117,0)
1250000.117^^0
"BLD",9037,"KRN",.84,"NM",118,0)
1250000.118^^0
"BLD",9037,"KRN",.84,"NM",119,0)
1250000.119^^0
"BLD",9037,"KRN",.84,"NM",120,0)
1250000.12^^0
"BLD",9037,"KRN",.84,"NM",121,0)
1250000.121^^0
"BLD",9037,"KRN",.84,"NM",122,0)
1250000.122^^0
"BLD",9037,"KRN",.84,"NM",123,0)
1250000.123^^0
"BLD",9037,"KRN",.84,"NM",124,0)
1250000.124^^0
"BLD",9037,"KRN",.84,"NM",125,0)
1250000.125^^0
"BLD",9037,"KRN",.84,"NM",126,0)
1250000.126^^0
"BLD",9037,"KRN",.84,"NM",127,0)
1250000.127^^0
"BLD",9037,"KRN",.84,"NM",128,0)
1250000.128^^0
"BLD",9037,"KRN",.84,"NM",129,0)
1250000.129^^0
"BLD",9037,"KRN",.84,"NM",130,0)
1250000.13^^0
"BLD",9037,"KRN",.84,"NM",131,0)
1250000.131^^0
"BLD",9037,"KRN",.84,"NM",132,0)
1250000.132^^0
"BLD",9037,"KRN",.84,"NM",133,0)
1250000.133^^0
"BLD",9037,"KRN",.84,"NM",134,0)
1250000.134^^0
"BLD",9037,"KRN",.84,"NM",135,0)
1250000.135^^0
"BLD",9037,"KRN",.84,"NM",136,0)
1250000.136^^0
"BLD",9037,"KRN",.84,"NM",137,0)
1250000.137^^0
"BLD",9037,"KRN",.84,"NM",138,0)
1250000.138^^0
"BLD",9037,"KRN",.84,"NM",139,0)
1250000.139^^0
"BLD",9037,"KRN",.84,"NM",140,0)
1250000.14^^0
"BLD",9037,"KRN",.84,"NM",141,0)
1250000.141^^0
"BLD",9037,"KRN",.84,"NM",142,0)
1250000.142^^0
"BLD",9037,"KRN",.84,"NM",143,0)
1250000.143^^0
"BLD",9037,"KRN",.84,"NM",144,0)
1250000.144^^0
"BLD",9037,"KRN",.84,"NM",145,0)
1250000.145^^0
"BLD",9037,"KRN",.84,"NM",146,0)
1250000.147^^0
"BLD",9037,"KRN",.84,"NM",147,0)
1250000.148^^0
"BLD",9037,"KRN",.84,"NM",148,0)
1250000.149^^0
"BLD",9037,"KRN",.84,"NM",149,0)
1250000.15^^0
"BLD",9037,"KRN",.84,"NM",150,0)
1250000.151^^0
"BLD",9037,"KRN",.84,"NM",151,0)
1250000.152^^0
"BLD",9037,"KRN",.84,"NM",152,0)
1250000.153^^0
"BLD",9037,"KRN",.84,"NM",153,0)
1250000.154^^0
"BLD",9037,"KRN",.84,"NM",154,0)
1250000.155^^0
"BLD",9037,"KRN",.84,"NM",155,0)
1250000.156^^0
"BLD",9037,"KRN",.84,"NM",156,0)
1250000.157^^0
"BLD",9037,"KRN",.84,"NM",157,0)
1250000.158^^0
"BLD",9037,"KRN",.84,"NM",158,0)
1250000.159^^0
"BLD",9037,"KRN",.84,"NM",159,0)
1250000.16^^0
"BLD",9037,"KRN",.84,"NM",160,0)
1250000.161^^0
"BLD",9037,"KRN",.84,"NM",161,0)
1250000.162^^0
"BLD",9037,"KRN",.84,"NM",162,0)
1250000.163^^0
"BLD",9037,"KRN",.84,"NM",163,0)
1250000.164^^0
"BLD",9037,"KRN",.84,"NM",164,0)
1250000.165^^0
"BLD",9037,"KRN",.84,"NM",165,0)
1250000.167^^0
"BLD",9037,"KRN",.84,"NM",166,0)
1250000.168^^0
"BLD",9037,"KRN",.84,"NM",167,0)
1250000.169^^0
"BLD",9037,"KRN",.84,"NM",168,0)
1250000.17^^0
"BLD",9037,"KRN",.84,"NM",169,0)
1250000.171^^0
"BLD",9037,"KRN",.84,"NM",170,0)
1250000.172^^0
"BLD",9037,"KRN",.84,"NM",171,0)
1250000.173^^0
"BLD",9037,"KRN",.84,"NM",172,0)
1250000.174^^0
"BLD",9037,"KRN",.84,"NM",173,0)
1250000.175^^0
"BLD",9037,"KRN",.84,"NM",174,0)
1250000.176^^0
"BLD",9037,"KRN",.84,"NM",175,0)
1250000.177^^0
"BLD",9037,"KRN",.84,"NM",176,0)
1250000.178^^0
"BLD",9037,"KRN",.84,"NM",177,0)
1250000.179^^0
"BLD",9037,"KRN",.84,"NM",178,0)
1250000.18^^0
"BLD",9037,"KRN",.84,"NM",179,0)
1250000.181^^0
"BLD",9037,"KRN",.84,"NM",180,0)
1250000.182^^0
"BLD",9037,"KRN",.84,"NM",181,0)
1250000.183^^0
"BLD",9037,"KRN",.84,"NM",182,0)
1250000.184^^0
"BLD",9037,"KRN",.84,"NM",183,0)
1250000.185^^0
"BLD",9037,"KRN",.84,"NM",184,0)
1250000.186^^0
"BLD",9037,"KRN",.84,"NM",185,0)
1250000.187^^0
"BLD",9037,"KRN",.84,"NM",186,0)
1250000.188^^0
"BLD",9037,"KRN",.84,"NM",187,0)
1250000.189^^0
"BLD",9037,"KRN",.84,"NM",188,0)
1250000.19^^0
"BLD",9037,"KRN",.84,"NM",189,0)
1250000.191^^0
"BLD",9037,"KRN",.84,"NM",190,0)
1250000.192^^0
"BLD",9037,"KRN",.84,"NM",191,0)
1250000.193^^0
"BLD",9037,"KRN",.84,"NM",192,0)
1250000.194^^0
"BLD",9037,"KRN",.84,"NM",193,0)
1250000.195^^0
"BLD",9037,"KRN",.84,"NM",194,0)
1250000.196^^0
"BLD",9037,"KRN",.84,"NM",195,0)
1250000.197^^0
"BLD",9037,"KRN",.84,"NM",196,0)
1250000.198^^0
"BLD",9037,"KRN",.84,"NM",197,0)
1250000.199^^0
"BLD",9037,"KRN",.84,"NM",198,0)
1250000.2^^0
"BLD",9037,"KRN",.84,"NM",199,0)
1250000.201^^0
"BLD",9037,"KRN",.84,"NM",200,0)
1250000.202^^0
"BLD",9037,"KRN",.84,"NM",201,0)
1250000.203^^0
"BLD",9037,"KRN",.84,"NM",202,0)
1250000.204^^0
"BLD",9037,"KRN",.84,"NM",203,0)
1250000.205^^0
"BLD",9037,"KRN",.84,"NM",204,0)
1250000.206^^0
"BLD",9037,"KRN",.84,"NM",205,0)
1250000.207^^0
"BLD",9037,"KRN",.84,"NM",206,0)
1250000.208^^0
"BLD",9037,"KRN",.84,"NM",207,0)
1250000.209^^0
"BLD",9037,"KRN",.84,"NM",208,0)
1250000.21^^0
"BLD",9037,"KRN",.84,"NM",209,0)
1250000.211^^0
"BLD",9037,"KRN",.84,"NM",210,0)
1250000.212^^0
"BLD",9037,"KRN",.84,"NM",211,0)
1250000.213^^0
"BLD",9037,"KRN",.84,"NM",212,0)
1250000.214^^0
"BLD",9037,"KRN",.84,"NM",213,0)
1250000.215^^0
"BLD",9037,"KRN",.84,"NM",214,0)
1250000.216^^0
"BLD",9037,"KRN",.84,"NM",215,0)
1250000.217^^0
"BLD",9037,"KRN",.84,"NM",216,0)
1250000.218^^0
"BLD",9037,"KRN",.84,"NM",217,0)
1250000.219^^0
"BLD",9037,"KRN",.84,"NM",218,0)
1250000.22^^0
"BLD",9037,"KRN",.84,"NM",219,0)
1250000.221^^0
"BLD",9037,"KRN",.84,"NM",220,0)
1250000.222^^0
"BLD",9037,"KRN",.84,"NM",221,0)
1250000.223^^0
"BLD",9037,"KRN",.84,"NM",222,0)
1250000.224^^0
"BLD",9037,"KRN",.84,"NM",223,0)
1250000.225^^0
"BLD",9037,"KRN",.84,"NM",224,0)
1250000.226^^0
"BLD",9037,"KRN",.84,"NM",225,0)
1250000.227^^0
"BLD",9037,"KRN",.84,"NM",226,0)
1250000.228^^0
"BLD",9037,"KRN",.84,"NM",227,0)
1250000.229^^0
"BLD",9037,"KRN",.84,"NM",228,0)
1250000.23^^0
"BLD",9037,"KRN",.84,"NM",229,0)
1250000.231^^0
"BLD",9037,"KRN",.84,"NM",230,0)
1250000.232^^0
"BLD",9037,"KRN",.84,"NM",231,0)
1250000.233^^0
"BLD",9037,"KRN",.84,"NM",232,0)
1250000.234^^0
"BLD",9037,"KRN",.84,"NM",233,0)
1250000.235^^0
"BLD",9037,"KRN",.84,"NM",234,0)
1250000.236^^0
"BLD",9037,"KRN",.84,"NM",235,0)
1250000.237^^0
"BLD",9037,"KRN",.84,"NM",236,0)
1250000.238^^0
"BLD",9037,"KRN",.84,"NM",237,0)
1250000.239^^0
"BLD",9037,"KRN",.84,"NM",238,0)
1250000.24^^0
"BLD",9037,"KRN",.84,"NM",239,0)
1250000.241^^0
"BLD",9037,"KRN",.84,"NM",240,0)
1250000.242^^0
"BLD",9037,"KRN",.84,"NM",241,0)
1250000.243^^0
"BLD",9037,"KRN",.84,"NM",242,0)
1250000.244^^0
"BLD",9037,"KRN",.84,"NM",243,0)
1250000.245^^0
"BLD",9037,"KRN",.84,"NM",244,0)
1250000.246^^0
"BLD",9037,"KRN",.84,"NM",245,0)
1250000.247^^0
"BLD",9037,"KRN",.84,"NM",246,0)
1250000.248^^0
"BLD",9037,"KRN",.84,"NM",247,0)
1250000.249^^0
"BLD",9037,"KRN",.84,"NM",248,0)
1250000.25^^0
"BLD",9037,"KRN",.84,"NM",249,0)
1250000.251^^0
"BLD",9037,"KRN",.84,"NM",250,0)
1250000.252^^0
"BLD",9037,"KRN",.84,"NM",251,0)
1250000.253^^0
"BLD",9037,"KRN",.84,"NM",252,0)
1250000.254^^0
"BLD",9037,"KRN",.84,"NM",253,0)
1250000.255^^0
"BLD",9037,"KRN",.84,"NM",254,0)
1250000.256^^0
"BLD",9037,"KRN",.84,"NM",255,0)
1250000.257^^0
"BLD",9037,"KRN",.84,"NM",256,0)
1250000.258^^0
"BLD",9037,"KRN",.84,"NM",257,0)
1250000.259^^0
"BLD",9037,"KRN",.84,"NM",258,0)
1250000.26^^0
"BLD",9037,"KRN",.84,"NM",259,0)
1250000.261^^0
"BLD",9037,"KRN",.84,"NM",260,0)
1250000.262^^0
"BLD",9037,"KRN",.84,"NM",261,0)
1250000.263^^0
"BLD",9037,"KRN",.84,"NM",262,0)
1250000.264^^0
"BLD",9037,"KRN",.84,"NM",263,0)
1250000.265^^0
"BLD",9037,"KRN",.84,"NM",264,0)
1250000.266^^0
"BLD",9037,"KRN",.84,"NM",265,0)
1250000.267^^0
"BLD",9037,"KRN",.84,"NM",266,0)
1250000.268^^0
"BLD",9037,"KRN",.84,"NM",267,0)
1250000.269^^0
"BLD",9037,"KRN",.84,"NM",268,0)
1250000.27^^0
"BLD",9037,"KRN",.84,"NM",269,0)
1250000.271^^0
"BLD",9037,"KRN",.84,"NM",270,0)
1250000.272^^0
"BLD",9037,"KRN",.84,"NM",271,0)
1250000.273^^0
"BLD",9037,"KRN",.84,"NM",272,0)
1250000.274^^0
"BLD",9037,"KRN",.84,"NM",273,0)
1250000.275^^0
"BLD",9037,"KRN",.84,"NM",274,0)
1250000.276^^0
"BLD",9037,"KRN",.84,"NM",275,0)
1250000.277^^0
"BLD",9037,"KRN",.84,"NM",276,0)
1250000.278^^0
"BLD",9037,"KRN",.84,"NM",277,0)
1250000.279^^0
"BLD",9037,"KRN",.84,"NM",278,0)
1250000.28^^0
"BLD",9037,"KRN",.84,"NM",279,0)
1250000.281^^0
"BLD",9037,"KRN",.84,"NM",280,0)
1250000.282^^0
"BLD",9037,"KRN",.84,"NM",281,0)
1250000.283^^0
"BLD",9037,"KRN",.84,"NM",282,0)
1250000.284^^0
"BLD",9037,"KRN",.84,"NM",283,0)
1250000.285^^0
"BLD",9037,"KRN",.84,"NM",284,0)
1250000.286^^0
"BLD",9037,"KRN",.84,"NM",285,0)
1250000.288^^0
"BLD",9037,"KRN",.84,"NM",286,0)
1250000.29^^0
"BLD",9037,"KRN",.84,"NM",287,0)
1250000.292^^0
"BLD",9037,"KRN",.84,"NM",288,0)
1250000.294^^0
"BLD",9037,"KRN",.84,"NM",289,0)
1250000.295^^0
"BLD",9037,"KRN",.84,"NM",290,0)
1250000.296^^0
"BLD",9037,"KRN",.84,"NM",291,0)
1250000.297^^0
"BLD",9037,"KRN",.84,"NM",292,0)
1250000.298^^0
"BLD",9037,"KRN",.84,"NM",293,0)
1250000.299^^0
"BLD",9037,"KRN",.84,"NM",294,0)
1250000.301^^0
"BLD",9037,"KRN",.84,"NM",295,0)
1250000.302^^0
"BLD",9037,"KRN",.84,"NM",296,0)
1250000.303^^0
"BLD",9037,"KRN",.84,"NM",297,0)
1250000.304^^0
"BLD",9037,"KRN",.84,"NM",298,0)
1250000.305^^0
"BLD",9037,"KRN",.84,"NM",299,0)
1250000.306^^0
"BLD",9037,"KRN",.84,"NM",300,0)
1250000.307^^0
"BLD",9037,"KRN",.84,"NM",301,0)
1250000.308^^0
"BLD",9037,"KRN",.84,"NM",302,0)
1250000.309^^0
"BLD",9037,"KRN",.84,"NM",303,0)
1250000.31^^0
"BLD",9037,"KRN",.84,"NM",304,0)
1250000.311^^0
"BLD",9037,"KRN",.84,"NM",305,0)
1250000.312^^0
"BLD",9037,"KRN",.84,"NM",306,0)
1250000.313^^0
"BLD",9037,"KRN",.84,"NM",307,0)
1250000.314^^0
"BLD",9037,"KRN",.84,"NM",308,0)
1250000.315^^0
"BLD",9037,"KRN",.84,"NM",309,0)
1250000.316^^0
"BLD",9037,"KRN",.84,"NM",310,0)
1250000.317^^0
"BLD",9037,"KRN",.84,"NM",311,0)
1250000.318^^0
"BLD",9037,"KRN",.84,"NM",312,0)
1250000.319^^0
"BLD",9037,"KRN",.84,"NM",313,0)
1250000.32^^0
"BLD",9037,"KRN",.84,"NM",314,0)
1250000.321^^0
"BLD",9037,"KRN",.84,"NM",315,0)
1250000.322^^0
"BLD",9037,"KRN",.84,"NM",316,0)
1250000.323^^0
"BLD",9037,"KRN",.84,"NM",317,0)
1250000.324^^0
"BLD",9037,"KRN",.84,"NM",318,0)
1250000.325^^0
"BLD",9037,"KRN",.84,"NM",319,0)
1250000.326^^0
"BLD",9037,"KRN",.84,"NM",320,0)
1250000.327^^0
"BLD",9037,"KRN",.84,"NM",321,0)
1250000.328^^0
"BLD",9037,"KRN",.84,"NM",322,0)
1250000.329^^0
"BLD",9037,"KRN",.84,"NM",323,0)
1250000.33^^0
"BLD",9037,"KRN",.84,"NM",324,0)
1250000.331^^0
"BLD",9037,"KRN",.84,"NM",325,0)
1250000.332^^0
"BLD",9037,"KRN",.84,"NM",326,0)
1250000.333^^0
"BLD",9037,"KRN",.84,"NM",327,0)
1250000.334^^0
"BLD",9037,"KRN",.84,"NM",328,0)
1250000.335^^0
"BLD",9037,"KRN",.84,"NM",329,0)
1250000.336^^0
"BLD",9037,"KRN",.84,"NM",330,0)
1250000.337^^0
"BLD",9037,"KRN",.84,"NM",331,0)
1250000.338^^0
"BLD",9037,"KRN",.84,"NM",332,0)
1250000.339^^0
"BLD",9037,"KRN",.84,"NM",333,0)
1250000.34^^0
"BLD",9037,"KRN",.84,"NM",334,0)
1250000.341^^0
"BLD",9037,"KRN",.84,"NM",335,0)
1250000.342^^0
"BLD",9037,"KRN",.84,"NM",336,0)
1250000.343^^0
"BLD",9037,"KRN",.84,"NM",337,0)
1250000.344^^0
"BLD",9037,"KRN",.84,"NM",338,0)
1250000.345^^0
"BLD",9037,"KRN",.84,"NM",339,0)
1250000.346^^0
"BLD",9037,"KRN",.84,"NM",340,0)
1250000.351^^0
"BLD",9037,"KRN",.84,"NM",341,0)
1250000.352^^0
"BLD",9037,"KRN",.84,"NM",342,0)
1250000.353^^0
"BLD",9037,"KRN",.84,"NM",343,0)
1250000.354^^0
"BLD",9037,"KRN",.84,"NM",344,0)
1250000.355^^0
"BLD",9037,"KRN",.84,"NM",345,0)
1250000.356^^0
"BLD",9037,"KRN",.84,"NM",346,0)
1250000.357^^0
"BLD",9037,"KRN",.84,"NM",347,0)
1250000.358^^0
"BLD",9037,"KRN",.84,"NM",348,0)
1250000.359^^0
"BLD",9037,"KRN",.84,"NM",349,0)
1250000.36^^0
"BLD",9037,"KRN",.84,"NM",350,0)
1250000.361^^0
"BLD",9037,"KRN",.84,"NM",351,0)
1250000.362^^0
"BLD",9037,"KRN",.84,"NM",352,0)
1250000.363^^0
"BLD",9037,"KRN",.84,"NM",353,0)
1250000.364^^0
"BLD",9037,"KRN",.84,"NM",354,0)
1250000.365^^0
"BLD",9037,"KRN",.84,"NM",355,0)
1250000.366^^0
"BLD",9037,"KRN",.84,"NM",356,0)
1250000.367^^0
"BLD",9037,"KRN",.84,"NM",357,0)
1250000.368^^0
"BLD",9037,"KRN",.84,"NM",358,0)
1250000.369^^0
"BLD",9037,"KRN",.84,"NM",359,0)
1250000.37^^0
"BLD",9037,"KRN",.84,"NM",360,0)
1250000.371^^0
"BLD",9037,"KRN",.84,"NM",361,0)
1250000.372^^0
"BLD",9037,"KRN",.84,"NM",362,0)
1250000.373^^0
"BLD",9037,"KRN",.84,"NM",363,0)
1250000.374^^0
"BLD",9037,"KRN",.84,"NM",364,0)
1250000.375^^0
"BLD",9037,"KRN",.84,"NM",365,0)
1250000.376^^0
"BLD",9037,"KRN",.84,"NM",366,0)
1250000.377^^0
"BLD",9037,"KRN",.84,"NM",367,0)
1250000.378^^0
"BLD",9037,"KRN",.84,"NM",368,0)
1250000.379^^0
"BLD",9037,"KRN",.84,"NM",369,0)
1250000.38^^0
"BLD",9037,"KRN",.84,"NM",370,0)
1250000.381^^0
"BLD",9037,"KRN",.84,"NM",371,0)
1250000.382^^0
"BLD",9037,"KRN",.84,"NM",372,0)
1250000.383^^0
"BLD",9037,"KRN",.84,"NM",373,0)
1250000.387^^0
"BLD",9037,"KRN",.84,"NM",374,0)
1250000.388^^0
"BLD",9037,"KRN",.84,"NM",375,0)
1250000.389^^0
"BLD",9037,"KRN",.84,"NM",376,0)
1250000.39^^0
"BLD",9037,"KRN",.84,"NM",377,0)
1250000.391^^0
"BLD",9037,"KRN",.84,"NM",378,0)
1250000.392^^0
"BLD",9037,"KRN",.84,"NM",379,0)
1250000.393^^0
"BLD",9037,"KRN",.84,"NM",380,0)
1250000.394^^0
"BLD",9037,"KRN",.84,"NM",381,0)
1250000.395^^0
"BLD",9037,"KRN",.84,"NM",382,0)
1250000.396^^0
"BLD",9037,"KRN",.84,"NM",383,0)
1250000.397^^0
"BLD",9037,"KRN",.84,"NM",384,0)
1250000.398^^0
"BLD",9037,"KRN",.84,"NM",385,0)
1250000.399^^0
"BLD",9037,"KRN",.84,"NM",386,0)
1250000.4^^0
"BLD",9037,"KRN",.84,"NM",387,0)
1250000.401^^0
"BLD",9037,"KRN",.84,"NM",388,0)
1250000.402^^0
"BLD",9037,"KRN",.84,"NM",389,0)
1250000.403^^0
"BLD",9037,"KRN",.84,"NM",390,0)
1250000.404^^0
"BLD",9037,"KRN",.84,"NM",391,0)
1250000.405^^0
"BLD",9037,"KRN",.84,"NM",392,0)
1250000.406^^0
"BLD",9037,"KRN",.84,"NM",393,0)
1250000.407^^0
"BLD",9037,"KRN",.84,"NM",394,0)
1250000.408^^0
"BLD",9037,"KRN",.84,"NM",395,0)
1250000.409^^0
"BLD",9037,"KRN",.84,"NM",396,0)
1250000.41^^0
"BLD",9037,"KRN",.84,"NM",397,0)
1250000.411^^0
"BLD",9037,"KRN",.84,"NM",398,0)
1250000.412^^0
"BLD",9037,"KRN",.84,"NM",399,0)
1250000.413^^0
"BLD",9037,"KRN",.84,"NM",400,0)
1250000.414^^0
"BLD",9037,"KRN",.84,"NM",401,0)
1250000.415^^0
"BLD",9037,"KRN",.84,"NM",402,0)
1250000.417^^0
"BLD",9037,"KRN",.84,"NM",403,0)
1250000.418^^0
"BLD",9037,"KRN",.84,"NM",404,0)
1250000.419^^0
"BLD",9037,"KRN",.84,"NM",405,0)
1250000.42^^0
"BLD",9037,"KRN",.84,"NM",406,0)
1250000.421^^0
"BLD",9037,"KRN",.84,"NM",407,0)
1250000.422^^0
"BLD",9037,"KRN",.84,"NM",408,0)
1250000.423^^0
"BLD",9037,"KRN",.84,"NM",409,0)
1250000.424^^0
"BLD",9037,"KRN",.84,"NM",410,0)
1250000.425^^0
"BLD",9037,"KRN",.84,"NM",411,0)
1250000.426^^0
"BLD",9037,"KRN",.84,"NM",412,0)
1250000.427^^0
"BLD",9037,"KRN",.84,"NM",413,0)
1250000.428^^0
"BLD",9037,"KRN",.84,"NM",414,0)
1250000.429^^0
"BLD",9037,"KRN",.84,"NM",415,0)
1250000.43^^0
"BLD",9037,"KRN",.84,"NM",416,0)
1250000.431^^0
"BLD",9037,"KRN",.84,"NM",417,0)
1250000.432^^0
"BLD",9037,"KRN",.84,"NM",418,0)
1250000.433^^0
"BLD",9037,"KRN",.84,"NM",419,0)
1250000.434^^0
"BLD",9037,"KRN",.84,"NM",420,0)
1250000.435^^0
"BLD",9037,"KRN",.84,"NM",421,0)
1250000.436^^0
"BLD",9037,"KRN",.84,"NM",422,0)
1250000.437^^0
"BLD",9037,"KRN",.84,"NM",423,0)
1250000.438^^0
"BLD",9037,"KRN",.84,"NM",424,0)
1250000.439^^0
"BLD",9037,"KRN",.84,"NM",425,0)
1250000.44^^0
"BLD",9037,"KRN",.84,"NM",426,0)
1250000.441^^0
"BLD",9037,"KRN",.84,"NM",427,0)
1250000.442^^0
"BLD",9037,"KRN",.84,"NM",428,0)
1250000.443^^0
"BLD",9037,"KRN",.84,"NM",429,0)
1250000.444^^0
"BLD",9037,"KRN",.84,"NM",430,0)
1250000.445^^0
"BLD",9037,"KRN",.84,"NM",431,0)
1250000.446^^0
"BLD",9037,"KRN",.84,"NM",432,0)
1250000.447^^0
"BLD",9037,"KRN",.84,"NM",433,0)
1250000.448^^0
"BLD",9037,"KRN",.84,"NM",434,0)
1250000.449^^0
"BLD",9037,"KRN",.84,"NM",435,0)
1250000.45^^0
"BLD",9037,"KRN",.84,"NM",436,0)
1250000.451^^0
"BLD",9037,"KRN",.84,"NM",437,0)
1250000.452^^0
"BLD",9037,"KRN",.84,"NM",438,0)
1250000.453^^0
"BLD",9037,"KRN",.84,"NM",439,0)
1250000.454^^0
"BLD",9037,"KRN",.84,"NM",440,0)
1250000.455^^0
"BLD",9037,"KRN",.84,"NM",441,0)
1250000.456^^0
"BLD",9037,"KRN",.84,"NM",442,0)
1250000.457^^0
"BLD",9037,"KRN",.84,"NM",443,0)
1250000.458^^0
"BLD",9037,"KRN",.84,"NM",444,0)
1250000.459^^0
"BLD",9037,"KRN",.84,"NM",445,0)
1250000.46^^0
"BLD",9037,"KRN",.84,"NM",446,0)
1250000.461^^0
"BLD",9037,"KRN",.84,"NM",447,0)
1250000.462^^0
"BLD",9037,"KRN",.84,"NM",448,0)
1250000.463^^0
"BLD",9037,"KRN",.84,"NM",449,0)
1250000.464^^0
"BLD",9037,"KRN",.84,"NM",450,0)
1250000.467^^0
"BLD",9037,"KRN",.84,"NM",451,0)
1250000.468^^0
"BLD",9037,"KRN",.84,"NM",452,0)
1250000.469^^0
"BLD",9037,"KRN",.84,"NM",453,0)
1250000.47^^0
"BLD",9037,"KRN",.84,"NM",454,0)
1250000.471^^0
"BLD",9037,"KRN",.84,"NM",455,0)
1250000.472^^0
"BLD",9037,"KRN",.84,"NM",456,0)
1250000.473^^0
"BLD",9037,"KRN",.84,"NM",457,0)
1250000.474^^0
"BLD",9037,"KRN",.84,"NM",458,0)
1250000.475^^0
"BLD",9037,"KRN",.84,"NM",459,0)
1250000.476^^0
"BLD",9037,"KRN",.84,"NM",460,0)
1250000.477^^0
"BLD",9037,"KRN",.84,"NM",461,0)
1250000.478^^0
"BLD",9037,"KRN",.84,"NM",462,0)
1250000.479^^0
"BLD",9037,"KRN",.84,"NM",463,0)
1250000.482^^0
"BLD",9037,"KRN",.84,"NM",464,0)
1250000.483^^0
"BLD",9037,"KRN",.84,"NM",465,0)
1250000.484^^0
"BLD",9037,"KRN",.84,"NM",466,0)
1250000.485^^0
"BLD",9037,"KRN",.84,"NM",467,0)
1250000.486^^0
"BLD",9037,"KRN",.84,"NM",468,0)
1250000.487^^0
"BLD",9037,"KRN",.84,"NM",469,0)
1250000.488^^0
"BLD",9037,"KRN",.84,"NM",470,0)
1250000.489^^0
"BLD",9037,"KRN",.84,"NM",471,0)
1250000.49^^0
"BLD",9037,"KRN",.84,"NM",472,0)
1250000.491^^0
"BLD",9037,"KRN",.84,"NM",473,0)
1250000.492^^0
"BLD",9037,"KRN",.84,"NM",474,0)
1250000.493^^0
"BLD",9037,"KRN",.84,"NM",475,0)
1250000.494^^0
"BLD",9037,"KRN",.84,"NM",476,0)
1250000.495^^0
"BLD",9037,"KRN",.84,"NM",477,0)
1250000.496^^0
"BLD",9037,"KRN",.84,"NM",478,0)
1250000.497^^0
"BLD",9037,"KRN",.84,"NM",479,0)
1250000.498^^0
"BLD",9037,"KRN",.84,"NM",480,0)
1250000.499^^0
"BLD",9037,"KRN",.84,"NM",481,0)
1250000.5^^0
"BLD",9037,"KRN",.84,"NM",482,0)
1250000.501^^0
"BLD",9037,"KRN",.84,"NM",483,0)
1250000.502^^0
"BLD",9037,"KRN",.84,"NM",484,0)
1250000.503^^0
"BLD",9037,"KRN",.84,"NM",485,0)
1250000.504^^0
"BLD",9037,"KRN",.84,"NM",486,0)
1250000.505^^0
"BLD",9037,"KRN",.84,"NM",487,0)
1250000.506^^0
"BLD",9037,"KRN",.84,"NM",488,0)
1250000.507^^0
"BLD",9037,"KRN",.84,"NM",489,0)
1250000.508^^0
"BLD",9037,"KRN",.84,"NM",490,0)
1250000.509^^0
"BLD",9037,"KRN",.84,"NM",491,0)
1250000.51^^0
"BLD",9037,"KRN",.84,"NM",492,0)
1250000.511^^0
"BLD",9037,"KRN",.84,"NM",493,0)
1250000.512^^0
"BLD",9037,"KRN",.84,"NM",494,0)
1250000.601^^0
"BLD",9037,"KRN",.84,"NM",495,0)
1250000.602^^0
"BLD",9037,"KRN",.84,"NM",496,0)
1250000.603^^0
"BLD",9037,"KRN",.84,"NM",497,0)
1250000.604^^0
"BLD",9037,"KRN",.84,"NM",498,0)
1250000.605^^0
"BLD",9037,"KRN",.84,"NM",499,0)
1250000.606^^0
"BLD",9037,"KRN",.84,"NM",500,0)
1250000.607^^0
"BLD",9037,"KRN",.84,"NM",501,0)
1250000.608^^0
"BLD",9037,"KRN",.84,"NM",502,0)
1250000.609^^0
"BLD",9037,"KRN",.84,"NM",503,0)
1250000.61^^0
"BLD",9037,"KRN",.84,"NM",504,0)
1250000.611^^0
"BLD",9037,"KRN",.84,"NM",505,0)
1250000.612^^0
"BLD",9037,"KRN",.84,"NM",506,0)
1250000.613^^0
"BLD",9037,"KRN",.84,"NM",507,0)
1250000.614^^0
"BLD",9037,"KRN",.84,"NM",508,0)
1250000.615^^0
"BLD",9037,"KRN",.84,"NM",509,0)
1250000.616^^0
"BLD",9037,"KRN",.84,"NM",510,0)
1250000.617^^0
"BLD",9037,"KRN",.84,"NM",511,0)
1250000.618^^0
"BLD",9037,"KRN",.84,"NM",512,0)
1250000.94^^0
"BLD",9037,"KRN",.84,"NM",513,0)
1250000.95^^0
"BLD",9037,"KRN",.84,"NM",514,0)
1250000.619^^0
"BLD",9037,"KRN",.84,"NM",515,0)
1250000.62^^0
"BLD",9037,"KRN",.84,"NM",516,0)
1250000.621^^0
"BLD",9037,"KRN",.84,"NM",517,0)
1250000.622^^0
"BLD",9037,"KRN",.84,"NM",518,0)
1250000.623^^0
"BLD",9037,"KRN",.84,"NM",519,0)
1250000.624^^0
"BLD",9037,"KRN",.84,"NM",520,0)
1250000.625^^0
"BLD",9037,"KRN",.84,"NM",521,0)
1250000.626^^0
"BLD",9037,"KRN",.84,"NM",522,0)
1250000.627^^0
"BLD",9037,"KRN",.84,"NM",523,0)
1250000.628^^0
"BLD",9037,"KRN",.84,"NM",524,0)
1250000.629^^0
"BLD",9037,"KRN",.84,"NM",525,0)
1250000.63^^0
"BLD",9037,"KRN",.84,"NM",526,0)
1250000.631^^0
"BLD",9037,"KRN",.84,"NM",527,0)
1250000.632^^0
"BLD",9037,"KRN",.84,"NM",528,0)
1250000.633^^0
"BLD",9037,"KRN",.84,"NM",529,0)
1250000.634^^0
"BLD",9037,"KRN",.84,"NM",530,0)
1250000.635^^0
"BLD",9037,"KRN",.84,"NM",531,0)
1250000.636^^0
"BLD",9037,"KRN",.84,"NM","B",1250000.001,1)

"BLD",9037,"KRN",.84,"NM","B",1250000.002,2)

"BLD",9037,"KRN",.84,"NM","B",1250000.003,3)

"BLD",9037,"KRN",.84,"NM","B",1250000.004,4)

"BLD",9037,"KRN",.84,"NM","B",1250000.005,5)

"BLD",9037,"KRN",.84,"NM","B",1250000.006,6)

"BLD",9037,"KRN",.84,"NM","B",1250000.007,7)

"BLD",9037,"KRN",.84,"NM","B",1250000.008,8)

"BLD",9037,"KRN",.84,"NM","B",1250000.009,9)

"BLD",9037,"KRN",.84,"NM","B",1250000.01,10)

"BLD",9037,"KRN",.84,"NM","B",1250000.011,11)

"BLD",9037,"KRN",.84,"NM","B",1250000.012,12)

"BLD",9037,"KRN",.84,"NM","B",1250000.013,13)

"BLD",9037,"KRN",.84,"NM","B",1250000.014,14)

"BLD",9037,"KRN",.84,"NM","B",1250000.015,15)

"BLD",9037,"KRN",.84,"NM","B",1250000.016,16)

"BLD",9037,"KRN",.84,"NM","B",1250000.017,17)

"BLD",9037,"KRN",.84,"NM","B",1250000.018,18)

"BLD",9037,"KRN",.84,"NM","B",1250000.019,19)

"BLD",9037,"KRN",.84,"NM","B",1250000.02,20)

"BLD",9037,"KRN",.84,"NM","B",1250000.021,21)

"BLD",9037,"KRN",.84,"NM","B",1250000.022,22)

"BLD",9037,"KRN",.84,"NM","B",1250000.023,23)

"BLD",9037,"KRN",.84,"NM","B",1250000.024,24)

"BLD",9037,"KRN",.84,"NM","B",1250000.025,25)

"BLD",9037,"KRN",.84,"NM","B",1250000.026,26)

"BLD",9037,"KRN",.84,"NM","B",1250000.027,27)

"BLD",9037,"KRN",.84,"NM","B",1250000.028,28)

"BLD",9037,"KRN",.84,"NM","B",1250000.029,29)

"BLD",9037,"KRN",.84,"NM","B",1250000.03,30)

"BLD",9037,"KRN",.84,"NM","B",1250000.031,31)

"BLD",9037,"KRN",.84,"NM","B",1250000.032,32)

"BLD",9037,"KRN",.84,"NM","B",1250000.033,33)

"BLD",9037,"KRN",.84,"NM","B",1250000.034,34)

"BLD",9037,"KRN",.84,"NM","B",1250000.035,35)

"BLD",9037,"KRN",.84,"NM","B",1250000.036,36)

"BLD",9037,"KRN",.84,"NM","B",1250000.037,37)

"BLD",9037,"KRN",.84,"NM","B",1250000.038,38)

"BLD",9037,"KRN",.84,"NM","B",1250000.039,39)

"BLD",9037,"KRN",.84,"NM","B",1250000.04,40)

"BLD",9037,"KRN",.84,"NM","B",1250000.041,41)

"BLD",9037,"KRN",.84,"NM","B",1250000.042,42)

"BLD",9037,"KRN",.84,"NM","B",1250000.043,43)

"BLD",9037,"KRN",.84,"NM","B",1250000.044,44)

"BLD",9037,"KRN",.84,"NM","B",1250000.045,45)

"BLD",9037,"KRN",.84,"NM","B",1250000.046,46)

"BLD",9037,"KRN",.84,"NM","B",1250000.047,47)

"BLD",9037,"KRN",.84,"NM","B",1250000.048,48)

"BLD",9037,"KRN",.84,"NM","B",1250000.049,49)

"BLD",9037,"KRN",.84,"NM","B",1250000.05,50)

"BLD",9037,"KRN",.84,"NM","B",1250000.051,51)

"BLD",9037,"KRN",.84,"NM","B",1250000.052,52)

"BLD",9037,"KRN",.84,"NM","B",1250000.053,53)

"BLD",9037,"KRN",.84,"NM","B",1250000.054,54)

"BLD",9037,"KRN",.84,"NM","B",1250000.055,55)

"BLD",9037,"KRN",.84,"NM","B",1250000.056,56)

"BLD",9037,"KRN",.84,"NM","B",1250000.057,57)

"BLD",9037,"KRN",.84,"NM","B",1250000.058,58)

"BLD",9037,"KRN",.84,"NM","B",1250000.059,59)

"BLD",9037,"KRN",.84,"NM","B",1250000.06,60)

"BLD",9037,"KRN",.84,"NM","B",1250000.061,61)

"BLD",9037,"KRN",.84,"NM","B",1250000.062,62)

"BLD",9037,"KRN",.84,"NM","B",1250000.063,63)

"BLD",9037,"KRN",.84,"NM","B",1250000.064,64)

"BLD",9037,"KRN",.84,"NM","B",1250000.065,65)

"BLD",9037,"KRN",.84,"NM","B",1250000.066,66)

"BLD",9037,"KRN",.84,"NM","B",1250000.067,67)

"BLD",9037,"KRN",.84,"NM","B",1250000.068,68)

"BLD",9037,"KRN",.84,"NM","B",1250000.069,69)

"BLD",9037,"KRN",.84,"NM","B",1250000.07,70)

"BLD",9037,"KRN",.84,"NM","B",1250000.071,71)

"BLD",9037,"KRN",.84,"NM","B",1250000.072,72)

"BLD",9037,"KRN",.84,"NM","B",1250000.073,73)

"BLD",9037,"KRN",.84,"NM","B",1250000.074,74)

"BLD",9037,"KRN",.84,"NM","B",1250000.075,75)

"BLD",9037,"KRN",.84,"NM","B",1250000.076,76)

"BLD",9037,"KRN",.84,"NM","B",1250000.077,77)

"BLD",9037,"KRN",.84,"NM","B",1250000.078,78)

"BLD",9037,"KRN",.84,"NM","B",1250000.079,79)

"BLD",9037,"KRN",.84,"NM","B",1250000.08,80)

"BLD",9037,"KRN",.84,"NM","B",1250000.081,81)

"BLD",9037,"KRN",.84,"NM","B",1250000.082,82)

"BLD",9037,"KRN",.84,"NM","B",1250000.083,83)

"BLD",9037,"KRN",.84,"NM","B",1250000.084,84)

"BLD",9037,"KRN",.84,"NM","B",1250000.085,85)

"BLD",9037,"KRN",.84,"NM","B",1250000.086,86)

"BLD",9037,"KRN",.84,"NM","B",1250000.087,87)

"BLD",9037,"KRN",.84,"NM","B",1250000.088,88)

"BLD",9037,"KRN",.84,"NM","B",1250000.089,89)

"BLD",9037,"KRN",.84,"NM","B",1250000.09,90)

"BLD",9037,"KRN",.84,"NM","B",1250000.091,91)

"BLD",9037,"KRN",.84,"NM","B",1250000.092,92)

"BLD",9037,"KRN",.84,"NM","B",1250000.093,93)

"BLD",9037,"KRN",.84,"NM","B",1250000.094,94)

"BLD",9037,"KRN",.84,"NM","B",1250000.095,95)

"BLD",9037,"KRN",.84,"NM","B",1250000.096,96)

"BLD",9037,"KRN",.84,"NM","B",1250000.097,97)

"BLD",9037,"KRN",.84,"NM","B",1250000.098,98)

"BLD",9037,"KRN",.84,"NM","B",1250000.099,99)

"BLD",9037,"KRN",.84,"NM","B",1250000.1,100)

"BLD",9037,"KRN",.84,"NM","B",1250000.101,101)

"BLD",9037,"KRN",.84,"NM","B",1250000.102,102)

"BLD",9037,"KRN",.84,"NM","B",1250000.103,103)

"BLD",9037,"KRN",.84,"NM","B",1250000.104,104)

"BLD",9037,"KRN",.84,"NM","B",1250000.105,105)

"BLD",9037,"KRN",.84,"NM","B",1250000.106,106)

"BLD",9037,"KRN",.84,"NM","B",1250000.107,107)

"BLD",9037,"KRN",.84,"NM","B",1250000.108,108)

"BLD",9037,"KRN",.84,"NM","B",1250000.109,109)

"BLD",9037,"KRN",.84,"NM","B",1250000.11,110)

"BLD",9037,"KRN",.84,"NM","B",1250000.111,111)

"BLD",9037,"KRN",.84,"NM","B",1250000.112,112)

"BLD",9037,"KRN",.84,"NM","B",1250000.113,113)

"BLD",9037,"KRN",.84,"NM","B",1250000.114,114)

"BLD",9037,"KRN",.84,"NM","B",1250000.115,115)

"BLD",9037,"KRN",.84,"NM","B",1250000.116,116)

"BLD",9037,"KRN",.84,"NM","B",1250000.117,117)

"BLD",9037,"KRN",.84,"NM","B",1250000.118,118)

"BLD",9037,"KRN",.84,"NM","B",1250000.119,119)

"BLD",9037,"KRN",.84,"NM","B",1250000.12,120)

"BLD",9037,"KRN",.84,"NM","B",1250000.121,121)

"BLD",9037,"KRN",.84,"NM","B",1250000.122,122)

"BLD",9037,"KRN",.84,"NM","B",1250000.123,123)

"BLD",9037,"KRN",.84,"NM","B",1250000.124,124)

"BLD",9037,"KRN",.84,"NM","B",1250000.125,125)

"BLD",9037,"KRN",.84,"NM","B",1250000.126,126)

"BLD",9037,"KRN",.84,"NM","B",1250000.127,127)

"BLD",9037,"KRN",.84,"NM","B",1250000.128,128)

"BLD",9037,"KRN",.84,"NM","B",1250000.129,129)

"BLD",9037,"KRN",.84,"NM","B",1250000.13,130)

"BLD",9037,"KRN",.84,"NM","B",1250000.131,131)

"BLD",9037,"KRN",.84,"NM","B",1250000.132,132)

"BLD",9037,"KRN",.84,"NM","B",1250000.133,133)

"BLD",9037,"KRN",.84,"NM","B",1250000.134,134)

"BLD",9037,"KRN",.84,"NM","B",1250000.135,135)

"BLD",9037,"KRN",.84,"NM","B",1250000.136,136)

"BLD",9037,"KRN",.84,"NM","B",1250000.137,137)

"BLD",9037,"KRN",.84,"NM","B",1250000.138,138)

"BLD",9037,"KRN",.84,"NM","B",1250000.139,139)

"BLD",9037,"KRN",.84,"NM","B",1250000.14,140)

"BLD",9037,"KRN",.84,"NM","B",1250000.141,141)

"BLD",9037,"KRN",.84,"NM","B",1250000.142,142)

"BLD",9037,"KRN",.84,"NM","B",1250000.143,143)

"BLD",9037,"KRN",.84,"NM","B",1250000.144,144)

"BLD",9037,"KRN",.84,"NM","B",1250000.145,145)

"BLD",9037,"KRN",.84,"NM","B",1250000.147,146)

"BLD",9037,"KRN",.84,"NM","B",1250000.148,147)

"BLD",9037,"KRN",.84,"NM","B",1250000.149,148)

"BLD",9037,"KRN",.84,"NM","B",1250000.15,149)

"BLD",9037,"KRN",.84,"NM","B",1250000.151,150)

"BLD",9037,"KRN",.84,"NM","B",1250000.152,151)

"BLD",9037,"KRN",.84,"NM","B",1250000.153,152)

"BLD",9037,"KRN",.84,"NM","B",1250000.154,153)

"BLD",9037,"KRN",.84,"NM","B",1250000.155,154)

"BLD",9037,"KRN",.84,"NM","B",1250000.156,155)

"BLD",9037,"KRN",.84,"NM","B",1250000.157,156)

"BLD",9037,"KRN",.84,"NM","B",1250000.158,157)

"BLD",9037,"KRN",.84,"NM","B",1250000.159,158)

"BLD",9037,"KRN",.84,"NM","B",1250000.16,159)

"BLD",9037,"KRN",.84,"NM","B",1250000.161,160)

"BLD",9037,"KRN",.84,"NM","B",1250000.162,161)

"BLD",9037,"KRN",.84,"NM","B",1250000.163,162)

"BLD",9037,"KRN",.84,"NM","B",1250000.164,163)

"BLD",9037,"KRN",.84,"NM","B",1250000.165,164)

"BLD",9037,"KRN",.84,"NM","B",1250000.167,165)

"BLD",9037,"KRN",.84,"NM","B",1250000.168,166)

"BLD",9037,"KRN",.84,"NM","B",1250000.169,167)

"BLD",9037,"KRN",.84,"NM","B",1250000.17,168)

"BLD",9037,"KRN",.84,"NM","B",1250000.171,169)

"BLD",9037,"KRN",.84,"NM","B",1250000.172,170)

"BLD",9037,"KRN",.84,"NM","B",1250000.173,171)

"BLD",9037,"KRN",.84,"NM","B",1250000.174,172)

"BLD",9037,"KRN",.84,"NM","B",1250000.175,173)

"BLD",9037,"KRN",.84,"NM","B",1250000.176,174)

"BLD",9037,"KRN",.84,"NM","B",1250000.177,175)

"BLD",9037,"KRN",.84,"NM","B",1250000.178,176)

"BLD",9037,"KRN",.84,"NM","B",1250000.179,177)

"BLD",9037,"KRN",.84,"NM","B",1250000.18,178)

"BLD",9037,"KRN",.84,"NM","B",1250000.181,179)

"BLD",9037,"KRN",.84,"NM","B",1250000.182,180)

"BLD",9037,"KRN",.84,"NM","B",1250000.183,181)

"BLD",9037,"KRN",.84,"NM","B",1250000.184,182)

"BLD",9037,"KRN",.84,"NM","B",1250000.185,183)

"BLD",9037,"KRN",.84,"NM","B",1250000.186,184)

"BLD",9037,"KRN",.84,"NM","B",1250000.187,185)

"BLD",9037,"KRN",.84,"NM","B",1250000.188,186)

"BLD",9037,"KRN",.84,"NM","B",1250000.189,187)

"BLD",9037,"KRN",.84,"NM","B",1250000.19,188)

"BLD",9037,"KRN",.84,"NM","B",1250000.191,189)

"BLD",9037,"KRN",.84,"NM","B",1250000.192,190)

"BLD",9037,"KRN",.84,"NM","B",1250000.193,191)

"BLD",9037,"KRN",.84,"NM","B",1250000.194,192)

"BLD",9037,"KRN",.84,"NM","B",1250000.195,193)

"BLD",9037,"KRN",.84,"NM","B",1250000.196,194)

"BLD",9037,"KRN",.84,"NM","B",1250000.197,195)

"BLD",9037,"KRN",.84,"NM","B",1250000.198,196)

"BLD",9037,"KRN",.84,"NM","B",1250000.199,197)

"BLD",9037,"KRN",.84,"NM","B",1250000.2,198)

"BLD",9037,"KRN",.84,"NM","B",1250000.201,199)

"BLD",9037,"KRN",.84,"NM","B",1250000.202,200)

"BLD",9037,"KRN",.84,"NM","B",1250000.203,201)

"BLD",9037,"KRN",.84,"NM","B",1250000.204,202)

"BLD",9037,"KRN",.84,"NM","B",1250000.205,203)

"BLD",9037,"KRN",.84,"NM","B",1250000.206,204)

"BLD",9037,"KRN",.84,"NM","B",1250000.207,205)

"BLD",9037,"KRN",.84,"NM","B",1250000.208,206)

"BLD",9037,"KRN",.84,"NM","B",1250000.209,207)

"BLD",9037,"KRN",.84,"NM","B",1250000.21,208)

"BLD",9037,"KRN",.84,"NM","B",1250000.211,209)

"BLD",9037,"KRN",.84,"NM","B",1250000.212,210)

"BLD",9037,"KRN",.84,"NM","B",1250000.213,211)

"BLD",9037,"KRN",.84,"NM","B",1250000.214,212)

"BLD",9037,"KRN",.84,"NM","B",1250000.215,213)

"BLD",9037,"KRN",.84,"NM","B",1250000.216,214)

"BLD",9037,"KRN",.84,"NM","B",1250000.217,215)

"BLD",9037,"KRN",.84,"NM","B",1250000.218,216)

"BLD",9037,"KRN",.84,"NM","B",1250000.219,217)

"BLD",9037,"KRN",.84,"NM","B",1250000.22,218)

"BLD",9037,"KRN",.84,"NM","B",1250000.221,219)

"BLD",9037,"KRN",.84,"NM","B",1250000.222,220)

"BLD",9037,"KRN",.84,"NM","B",1250000.223,221)

"BLD",9037,"KRN",.84,"NM","B",1250000.224,222)

"BLD",9037,"KRN",.84,"NM","B",1250000.225,223)

"BLD",9037,"KRN",.84,"NM","B",1250000.226,224)

"BLD",9037,"KRN",.84,"NM","B",1250000.227,225)

"BLD",9037,"KRN",.84,"NM","B",1250000.228,226)

"BLD",9037,"KRN",.84,"NM","B",1250000.229,227)

"BLD",9037,"KRN",.84,"NM","B",1250000.23,228)

"BLD",9037,"KRN",.84,"NM","B",1250000.231,229)

"BLD",9037,"KRN",.84,"NM","B",1250000.232,230)

"BLD",9037,"KRN",.84,"NM","B",1250000.233,231)

"BLD",9037,"KRN",.84,"NM","B",1250000.234,232)

"BLD",9037,"KRN",.84,"NM","B",1250000.235,233)

"BLD",9037,"KRN",.84,"NM","B",1250000.236,234)

"BLD",9037,"KRN",.84,"NM","B",1250000.237,235)

"BLD",9037,"KRN",.84,"NM","B",1250000.238,236)

"BLD",9037,"KRN",.84,"NM","B",1250000.239,237)

"BLD",9037,"KRN",.84,"NM","B",1250000.24,238)

"BLD",9037,"KRN",.84,"NM","B",1250000.241,239)

"BLD",9037,"KRN",.84,"NM","B",1250000.242,240)

"BLD",9037,"KRN",.84,"NM","B",1250000.243,241)

"BLD",9037,"KRN",.84,"NM","B",1250000.244,242)

"BLD",9037,"KRN",.84,"NM","B",1250000.245,243)

"BLD",9037,"KRN",.84,"NM","B",1250000.246,244)

"BLD",9037,"KRN",.84,"NM","B",1250000.247,245)

"BLD",9037,"KRN",.84,"NM","B",1250000.248,246)

"BLD",9037,"KRN",.84,"NM","B",1250000.249,247)

"BLD",9037,"KRN",.84,"NM","B",1250000.25,248)

"BLD",9037,"KRN",.84,"NM","B",1250000.251,249)

"BLD",9037,"KRN",.84,"NM","B",1250000.252,250)

"BLD",9037,"KRN",.84,"NM","B",1250000.253,251)

"BLD",9037,"KRN",.84,"NM","B",1250000.254,252)

"BLD",9037,"KRN",.84,"NM","B",1250000.255,253)

"BLD",9037,"KRN",.84,"NM","B",1250000.256,254)

"BLD",9037,"KRN",.84,"NM","B",1250000.257,255)

"BLD",9037,"KRN",.84,"NM","B",1250000.258,256)

"BLD",9037,"KRN",.84,"NM","B",1250000.259,257)

"BLD",9037,"KRN",.84,"NM","B",1250000.26,258)

"BLD",9037,"KRN",.84,"NM","B",1250000.261,259)

"BLD",9037,"KRN",.84,"NM","B",1250000.262,260)

"BLD",9037,"KRN",.84,"NM","B",1250000.263,261)

"BLD",9037,"KRN",.84,"NM","B",1250000.264,262)

"BLD",9037,"KRN",.84,"NM","B",1250000.265,263)

"BLD",9037,"KRN",.84,"NM","B",1250000.266,264)

"BLD",9037,"KRN",.84,"NM","B",1250000.267,265)

"BLD",9037,"KRN",.84,"NM","B",1250000.268,266)

"BLD",9037,"KRN",.84,"NM","B",1250000.269,267)

"BLD",9037,"KRN",.84,"NM","B",1250000.27,268)

"BLD",9037,"KRN",.84,"NM","B",1250000.271,269)

"BLD",9037,"KRN",.84,"NM","B",1250000.272,270)

"BLD",9037,"KRN",.84,"NM","B",1250000.273,271)

"BLD",9037,"KRN",.84,"NM","B",1250000.274,272)

"BLD",9037,"KRN",.84,"NM","B",1250000.275,273)

"BLD",9037,"KRN",.84,"NM","B",1250000.276,274)

"BLD",9037,"KRN",.84,"NM","B",1250000.277,275)

"BLD",9037,"KRN",.84,"NM","B",1250000.278,276)

"BLD",9037,"KRN",.84,"NM","B",1250000.279,277)

"BLD",9037,"KRN",.84,"NM","B",1250000.28,278)

"BLD",9037,"KRN",.84,"NM","B",1250000.281,279)

"BLD",9037,"KRN",.84,"NM","B",1250000.282,280)

"BLD",9037,"KRN",.84,"NM","B",1250000.283,281)

"BLD",9037,"KRN",.84,"NM","B",1250000.284,282)

"BLD",9037,"KRN",.84,"NM","B",1250000.285,283)

"BLD",9037,"KRN",.84,"NM","B",1250000.286,284)

"BLD",9037,"KRN",.84,"NM","B",1250000.288,285)

"BLD",9037,"KRN",.84,"NM","B",1250000.29,286)

"BLD",9037,"KRN",.84,"NM","B",1250000.292,287)

"BLD",9037,"KRN",.84,"NM","B",1250000.294,288)

"BLD",9037,"KRN",.84,"NM","B",1250000.295,289)

"BLD",9037,"KRN",.84,"NM","B",1250000.296,290)

"BLD",9037,"KRN",.84,"NM","B",1250000.297,291)

"BLD",9037,"KRN",.84,"NM","B",1250000.298,292)

"BLD",9037,"KRN",.84,"NM","B",1250000.299,293)

"BLD",9037,"KRN",.84,"NM","B",1250000.301,294)

"BLD",9037,"KRN",.84,"NM","B",1250000.302,295)

"BLD",9037,"KRN",.84,"NM","B",1250000.303,296)

"BLD",9037,"KRN",.84,"NM","B",1250000.304,297)

"BLD",9037,"KRN",.84,"NM","B",1250000.305,298)

"BLD",9037,"KRN",.84,"NM","B",1250000.306,299)

"BLD",9037,"KRN",.84,"NM","B",1250000.307,300)

"BLD",9037,"KRN",.84,"NM","B",1250000.308,301)

"BLD",9037,"KRN",.84,"NM","B",1250000.309,302)

"BLD",9037,"KRN",.84,"NM","B",1250000.31,303)

"BLD",9037,"KRN",.84,"NM","B",1250000.311,304)

"BLD",9037,"KRN",.84,"NM","B",1250000.312,305)

"BLD",9037,"KRN",.84,"NM","B",1250000.313,306)

"BLD",9037,"KRN",.84,"NM","B",1250000.314,307)

"BLD",9037,"KRN",.84,"NM","B",1250000.315,308)

"BLD",9037,"KRN",.84,"NM","B",1250000.316,309)

"BLD",9037,"KRN",.84,"NM","B",1250000.317,310)

"BLD",9037,"KRN",.84,"NM","B",1250000.318,311)

"BLD",9037,"KRN",.84,"NM","B",1250000.319,312)

"BLD",9037,"KRN",.84,"NM","B",1250000.32,313)

"BLD",9037,"KRN",.84,"NM","B",1250000.321,314)

"BLD",9037,"KRN",.84,"NM","B",1250000.322,315)

"BLD",9037,"KRN",.84,"NM","B",1250000.323,316)

"BLD",9037,"KRN",.84,"NM","B",1250000.324,317)

"BLD",9037,"KRN",.84,"NM","B",1250000.325,318)

"BLD",9037,"KRN",.84,"NM","B",1250000.326,319)

"BLD",9037,"KRN",.84,"NM","B",1250000.327,320)

"BLD",9037,"KRN",.84,"NM","B",1250000.328,321)

"BLD",9037,"KRN",.84,"NM","B",1250000.329,322)

"BLD",9037,"KRN",.84,"NM","B",1250000.33,323)

"BLD",9037,"KRN",.84,"NM","B",1250000.331,324)

"BLD",9037,"KRN",.84,"NM","B",1250000.332,325)

"BLD",9037,"KRN",.84,"NM","B",1250000.333,326)

"BLD",9037,"KRN",.84,"NM","B",1250000.334,327)

"BLD",9037,"KRN",.84,"NM","B",1250000.335,328)

"BLD",9037,"KRN",.84,"NM","B",1250000.336,329)

"BLD",9037,"KRN",.84,"NM","B",1250000.337,330)

"BLD",9037,"KRN",.84,"NM","B",1250000.338,331)

"BLD",9037,"KRN",.84,"NM","B",1250000.339,332)

"BLD",9037,"KRN",.84,"NM","B",1250000.34,333)

"BLD",9037,"KRN",.84,"NM","B",1250000.341,334)

"BLD",9037,"KRN",.84,"NM","B",1250000.342,335)

"BLD",9037,"KRN",.84,"NM","B",1250000.343,336)

"BLD",9037,"KRN",.84,"NM","B",1250000.344,337)

"BLD",9037,"KRN",.84,"NM","B",1250000.345,338)

"BLD",9037,"KRN",.84,"NM","B",1250000.346,339)

"BLD",9037,"KRN",.84,"NM","B",1250000.351,340)

"BLD",9037,"KRN",.84,"NM","B",1250000.352,341)

"BLD",9037,"KRN",.84,"NM","B",1250000.353,342)

"BLD",9037,"KRN",.84,"NM","B",1250000.354,343)

"BLD",9037,"KRN",.84,"NM","B",1250000.355,344)

"BLD",9037,"KRN",.84,"NM","B",1250000.356,345)

"BLD",9037,"KRN",.84,"NM","B",1250000.357,346)

"BLD",9037,"KRN",.84,"NM","B",1250000.358,347)

"BLD",9037,"KRN",.84,"NM","B",1250000.359,348)

"BLD",9037,"KRN",.84,"NM","B",1250000.36,349)

"BLD",9037,"KRN",.84,"NM","B",1250000.361,350)

"BLD",9037,"KRN",.84,"NM","B",1250000.362,351)

"BLD",9037,"KRN",.84,"NM","B",1250000.363,352)

"BLD",9037,"KRN",.84,"NM","B",1250000.364,353)

"BLD",9037,"KRN",.84,"NM","B",1250000.365,354)

"BLD",9037,"KRN",.84,"NM","B",1250000.366,355)

"BLD",9037,"KRN",.84,"NM","B",1250000.367,356)

"BLD",9037,"KRN",.84,"NM","B",1250000.368,357)

"BLD",9037,"KRN",.84,"NM","B",1250000.369,358)

"BLD",9037,"KRN",.84,"NM","B",1250000.37,359)

"BLD",9037,"KRN",.84,"NM","B",1250000.371,360)

"BLD",9037,"KRN",.84,"NM","B",1250000.372,361)

"BLD",9037,"KRN",.84,"NM","B",1250000.373,362)

"BLD",9037,"KRN",.84,"NM","B",1250000.374,363)

"BLD",9037,"KRN",.84,"NM","B",1250000.375,364)

"BLD",9037,"KRN",.84,"NM","B",1250000.376,365)

"BLD",9037,"KRN",.84,"NM","B",1250000.377,366)

"BLD",9037,"KRN",.84,"NM","B",1250000.378,367)

"BLD",9037,"KRN",.84,"NM","B",1250000.379,368)

"BLD",9037,"KRN",.84,"NM","B",1250000.38,369)

"BLD",9037,"KRN",.84,"NM","B",1250000.381,370)

"BLD",9037,"KRN",.84,"NM","B",1250000.382,371)

"BLD",9037,"KRN",.84,"NM","B",1250000.383,372)

"BLD",9037,"KRN",.84,"NM","B",1250000.387,373)

"BLD",9037,"KRN",.84,"NM","B",1250000.388,374)

"BLD",9037,"KRN",.84,"NM","B",1250000.389,375)

"BLD",9037,"KRN",.84,"NM","B",1250000.39,376)

"BLD",9037,"KRN",.84,"NM","B",1250000.391,377)

"BLD",9037,"KRN",.84,"NM","B",1250000.392,378)

"BLD",9037,"KRN",.84,"NM","B",1250000.393,379)

"BLD",9037,"KRN",.84,"NM","B",1250000.394,380)

"BLD",9037,"KRN",.84,"NM","B",1250000.395,381)

"BLD",9037,"KRN",.84,"NM","B",1250000.396,382)

"BLD",9037,"KRN",.84,"NM","B",1250000.397,383)

"BLD",9037,"KRN",.84,"NM","B",1250000.398,384)

"BLD",9037,"KRN",.84,"NM","B",1250000.399,385)

"BLD",9037,"KRN",.84,"NM","B",1250000.4,386)

"BLD",9037,"KRN",.84,"NM","B",1250000.401,387)

"BLD",9037,"KRN",.84,"NM","B",1250000.402,388)

"BLD",9037,"KRN",.84,"NM","B",1250000.403,389)

"BLD",9037,"KRN",.84,"NM","B",1250000.404,390)

"BLD",9037,"KRN",.84,"NM","B",1250000.405,391)

"BLD",9037,"KRN",.84,"NM","B",1250000.406,392)

"BLD",9037,"KRN",.84,"NM","B",1250000.407,393)

"BLD",9037,"KRN",.84,"NM","B",1250000.408,394)

"BLD",9037,"KRN",.84,"NM","B",1250000.409,395)

"BLD",9037,"KRN",.84,"NM","B",1250000.41,396)

"BLD",9037,"KRN",.84,"NM","B",1250000.411,397)

"BLD",9037,"KRN",.84,"NM","B",1250000.412,398)

"BLD",9037,"KRN",.84,"NM","B",1250000.413,399)

"BLD",9037,"KRN",.84,"NM","B",1250000.414,400)

"BLD",9037,"KRN",.84,"NM","B",1250000.415,401)

"BLD",9037,"KRN",.84,"NM","B",1250000.417,402)

"BLD",9037,"KRN",.84,"NM","B",1250000.418,403)

"BLD",9037,"KRN",.84,"NM","B",1250000.419,404)

"BLD",9037,"KRN",.84,"NM","B",1250000.42,405)

"BLD",9037,"KRN",.84,"NM","B",1250000.421,406)

"BLD",9037,"KRN",.84,"NM","B",1250000.422,407)

"BLD",9037,"KRN",.84,"NM","B",1250000.423,408)

"BLD",9037,"KRN",.84,"NM","B",1250000.424,409)

"BLD",9037,"KRN",.84,"NM","B",1250000.425,410)

"BLD",9037,"KRN",.84,"NM","B",1250000.426,411)

"BLD",9037,"KRN",.84,"NM","B",1250000.427,412)

"BLD",9037,"KRN",.84,"NM","B",1250000.428,413)

"BLD",9037,"KRN",.84,"NM","B",1250000.429,414)

"BLD",9037,"KRN",.84,"NM","B",1250000.43,415)

"BLD",9037,"KRN",.84,"NM","B",1250000.431,416)

"BLD",9037,"KRN",.84,"NM","B",1250000.432,417)

"BLD",9037,"KRN",.84,"NM","B",1250000.433,418)

"BLD",9037,"KRN",.84,"NM","B",1250000.434,419)

"BLD",9037,"KRN",.84,"NM","B",1250000.435,420)

"BLD",9037,"KRN",.84,"NM","B",1250000.436,421)

"BLD",9037,"KRN",.84,"NM","B",1250000.437,422)

"BLD",9037,"KRN",.84,"NM","B",1250000.438,423)

"BLD",9037,"KRN",.84,"NM","B",1250000.439,424)

"BLD",9037,"KRN",.84,"NM","B",1250000.44,425)

"BLD",9037,"KRN",.84,"NM","B",1250000.441,426)

"BLD",9037,"KRN",.84,"NM","B",1250000.442,427)

"BLD",9037,"KRN",.84,"NM","B",1250000.443,428)

"BLD",9037,"KRN",.84,"NM","B",1250000.444,429)

"BLD",9037,"KRN",.84,"NM","B",1250000.445,430)

"BLD",9037,"KRN",.84,"NM","B",1250000.446,431)

"BLD",9037,"KRN",.84,"NM","B",1250000.447,432)

"BLD",9037,"KRN",.84,"NM","B",1250000.448,433)

"BLD",9037,"KRN",.84,"NM","B",1250000.449,434)

"BLD",9037,"KRN",.84,"NM","B",1250000.45,435)

"BLD",9037,"KRN",.84,"NM","B",1250000.451,436)

"BLD",9037,"KRN",.84,"NM","B",1250000.452,437)

"BLD",9037,"KRN",.84,"NM","B",1250000.453,438)

"BLD",9037,"KRN",.84,"NM","B",1250000.454,439)

"BLD",9037,"KRN",.84,"NM","B",1250000.455,440)

"BLD",9037,"KRN",.84,"NM","B",1250000.456,441)

"BLD",9037,"KRN",.84,"NM","B",1250000.457,442)

"BLD",9037,"KRN",.84,"NM","B",1250000.458,443)

"BLD",9037,"KRN",.84,"NM","B",1250000.459,444)

"BLD",9037,"KRN",.84,"NM","B",1250000.46,445)

"BLD",9037,"KRN",.84,"NM","B",1250000.461,446)

"BLD",9037,"KRN",.84,"NM","B",1250000.462,447)

"BLD",9037,"KRN",.84,"NM","B",1250000.463,448)

"BLD",9037,"KRN",.84,"NM","B",1250000.464,449)

"BLD",9037,"KRN",.84,"NM","B",1250000.467,450)

"BLD",9037,"KRN",.84,"NM","B",1250000.468,451)

"BLD",9037,"KRN",.84,"NM","B",1250000.469,452)

"BLD",9037,"KRN",.84,"NM","B",1250000.47,453)

"BLD",9037,"KRN",.84,"NM","B",1250000.471,454)

"BLD",9037,"KRN",.84,"NM","B",1250000.472,455)

"BLD",9037,"KRN",.84,"NM","B",1250000.473,456)

"BLD",9037,"KRN",.84,"NM","B",1250000.474,457)

"BLD",9037,"KRN",.84,"NM","B",1250000.475,458)

"BLD",9037,"KRN",.84,"NM","B",1250000.476,459)

"BLD",9037,"KRN",.84,"NM","B",1250000.477,460)

"BLD",9037,"KRN",.84,"NM","B",1250000.478,461)

"BLD",9037,"KRN",.84,"NM","B",1250000.479,462)

"BLD",9037,"KRN",.84,"NM","B",1250000.482,463)

"BLD",9037,"KRN",.84,"NM","B",1250000.483,464)

"BLD",9037,"KRN",.84,"NM","B",1250000.484,465)

"BLD",9037,"KRN",.84,"NM","B",1250000.485,466)

"BLD",9037,"KRN",.84,"NM","B",1250000.486,467)

"BLD",9037,"KRN",.84,"NM","B",1250000.487,468)

"BLD",9037,"KRN",.84,"NM","B",1250000.488,469)

"BLD",9037,"KRN",.84,"NM","B",1250000.489,470)

"BLD",9037,"KRN",.84,"NM","B",1250000.49,471)

"BLD",9037,"KRN",.84,"NM","B",1250000.491,472)

"BLD",9037,"KRN",.84,"NM","B",1250000.492,473)

"BLD",9037,"KRN",.84,"NM","B",1250000.493,474)

"BLD",9037,"KRN",.84,"NM","B",1250000.494,475)

"BLD",9037,"KRN",.84,"NM","B",1250000.495,476)

"BLD",9037,"KRN",.84,"NM","B",1250000.496,477)

"BLD",9037,"KRN",.84,"NM","B",1250000.497,478)

"BLD",9037,"KRN",.84,"NM","B",1250000.498,479)

"BLD",9037,"KRN",.84,"NM","B",1250000.499,480)

"BLD",9037,"KRN",.84,"NM","B",1250000.5,481)

"BLD",9037,"KRN",.84,"NM","B",1250000.501,482)

"BLD",9037,"KRN",.84,"NM","B",1250000.502,483)

"BLD",9037,"KRN",.84,"NM","B",1250000.503,484)

"BLD",9037,"KRN",.84,"NM","B",1250000.504,485)

"BLD",9037,"KRN",.84,"NM","B",1250000.505,486)

"BLD",9037,"KRN",.84,"NM","B",1250000.506,487)

"BLD",9037,"KRN",.84,"NM","B",1250000.507,488)

"BLD",9037,"KRN",.84,"NM","B",1250000.508,489)

"BLD",9037,"KRN",.84,"NM","B",1250000.509,490)

"BLD",9037,"KRN",.84,"NM","B",1250000.51,491)

"BLD",9037,"KRN",.84,"NM","B",1250000.511,492)

"BLD",9037,"KRN",.84,"NM","B",1250000.512,493)

"BLD",9037,"KRN",.84,"NM","B",1250000.601,494)

"BLD",9037,"KRN",.84,"NM","B",1250000.602,495)

"BLD",9037,"KRN",.84,"NM","B",1250000.603,496)

"BLD",9037,"KRN",.84,"NM","B",1250000.604,497)

"BLD",9037,"KRN",.84,"NM","B",1250000.605,498)

"BLD",9037,"KRN",.84,"NM","B",1250000.606,499)

"BLD",9037,"KRN",.84,"NM","B",1250000.607,500)

"BLD",9037,"KRN",.84,"NM","B",1250000.608,501)

"BLD",9037,"KRN",.84,"NM","B",1250000.609,502)

"BLD",9037,"KRN",.84,"NM","B",1250000.61,503)

"BLD",9037,"KRN",.84,"NM","B",1250000.611,504)

"BLD",9037,"KRN",.84,"NM","B",1250000.612,505)

"BLD",9037,"KRN",.84,"NM","B",1250000.613,506)

"BLD",9037,"KRN",.84,"NM","B",1250000.614,507)

"BLD",9037,"KRN",.84,"NM","B",1250000.615,508)

"BLD",9037,"KRN",.84,"NM","B",1250000.616,509)

"BLD",9037,"KRN",.84,"NM","B",1250000.617,510)

"BLD",9037,"KRN",.84,"NM","B",1250000.618,511)

"BLD",9037,"KRN",.84,"NM","B",1250000.619,514)

"BLD",9037,"KRN",.84,"NM","B",1250000.62,515)

"BLD",9037,"KRN",.84,"NM","B",1250000.621,516)

"BLD",9037,"KRN",.84,"NM","B",1250000.622,517)

"BLD",9037,"KRN",.84,"NM","B",1250000.623,518)

"BLD",9037,"KRN",.84,"NM","B",1250000.624,519)

"BLD",9037,"KRN",.84,"NM","B",1250000.625,520)

"BLD",9037,"KRN",.84,"NM","B",1250000.626,521)

"BLD",9037,"KRN",.84,"NM","B",1250000.627,522)

"BLD",9037,"KRN",.84,"NM","B",1250000.628,523)

"BLD",9037,"KRN",.84,"NM","B",1250000.629,524)

"BLD",9037,"KRN",.84,"NM","B",1250000.63,525)

"BLD",9037,"KRN",.84,"NM","B",1250000.631,526)

"BLD",9037,"KRN",.84,"NM","B",1250000.632,527)

"BLD",9037,"KRN",.84,"NM","B",1250000.633,528)

"BLD",9037,"KRN",.84,"NM","B",1250000.634,529)

"BLD",9037,"KRN",.84,"NM","B",1250000.635,530)

"BLD",9037,"KRN",.84,"NM","B",1250000.636,531)

"BLD",9037,"KRN",.84,"NM","B",1250000.94,512)

"BLD",9037,"KRN",.84,"NM","B",1250000.95,513)

"BLD",9037,"KRN",3.6,0)
3.6
"BLD",9037,"KRN",3.8,0)
3.8
"BLD",9037,"KRN",9.2,0)
9.2
"BLD",9037,"KRN",9.8,0)
9.8
"BLD",9037,"KRN",9.8,"NM",0)
^9.68A^65^62
"BLD",9037,"KRN",9.8,"NM",1,0)
GMPL^^0^B25448276
"BLD",9037,"KRN",9.8,"NM",2,0)
GMPL1^^0^B22477370
"BLD",9037,"KRN",9.8,"NM",3,0)
GMPL31P^^0^B20468181
"BLD",9037,"KRN",9.8,"NM",4,0)
GMPLAPI1^^0^B50216559
"BLD",9037,"KRN",9.8,"NM",5,0)
GMPLAPI2^^0^B112894889
"BLD",9037,"KRN",9.8,"NM",6,0)
GMPLAPI3^^0^B7833394
"BLD",9037,"KRN",9.8,"NM",7,0)
GMPLAPI4^^0^B62948499
"BLD",9037,"KRN",9.8,"NM",8,0)
GMPLAPI5^^0^B20946924
"BLD",9037,"KRN",9.8,"NM",9,0)
GMPLAPI6^^0^B15886997
"BLD",9037,"KRN",9.8,"NM",10,0)
GMPLAPI7^^0^B850874
"BLD",9037,"KRN",9.8,"NM",11,0)
GMPLAPIE^^0^B7559970
"BLD",9037,"KRN",9.8,"NM",12,0)
GMPLBLCK^^0^B29699623
"BLD",9037,"KRN",9.8,"NM",13,0)
GMPLBLD^^0^B31098960
"BLD",9037,"KRN",9.8,"NM",14,0)
GMPLBLD1^^0^B27314622
"BLD",9037,"KRN",9.8,"NM",15,0)
GMPLBLD2^^0^B40773474
"BLD",9037,"KRN",9.8,"NM",16,0)
GMPLBLD3^^0^B19546906
"BLD",9037,"KRN",9.8,"NM",17,0)
GMPLBLDC^^0^B28612202
"BLD",9037,"KRN",9.8,"NM",18,0)
GMPLBLDF^^0^B10799450
"BLD",9037,"KRN",9.8,"NM",19,0)
GMPLCHK^^0^B34267670
"BLD",9037,"KRN",9.8,"NM",20,0)
GMPLCODE^^0^B6088580
"BLD",9037,"KRN",9.8,"NM",21,0)
GMPLDAL^^0^B70495216
"BLD",9037,"KRN",9.8,"NM",22,0)
GMPLDAL1^^0^B65987851
"BLD",9037,"KRN",9.8,"NM",23,0)
GMPLDAL2^^0^B6670259
"BLD",9037,"KRN",9.8,"NM",24,0)
GMPLDAL3^^0^B12151970
"BLD",9037,"KRN",9.8,"NM",25,0)
GMPLDAL4^^0^B4721208
"BLD",9037,"KRN",9.8,"NM",26,0)
GMPLDALF^^0^B2783278
"BLD",9037,"KRN",9.8,"NM",27,0)
GMPLDIS1^^0^B7162999
"BLD",9037,"KRN",9.8,"NM",28,0)
GMPLDISP^^0^B46347734
"BLD",9037,"KRN",9.8,"NM",29,0)
GMPLDUP2^^0^B11747246
"BLD",9037,"KRN",9.8,"NM",30,0)
GMPLE9^^0^B4417729
"BLD",9037,"KRN",9.8,"NM",31,0)
GMPLEDIT^^0^B29020084
"BLD",9037,"KRN",9.8,"NM",32,0)
GMPLEDT1^^0^B32309398
"BLD",9037,"KRN",9.8,"NM",33,0)
GMPLEDT2^^0^B23723597
"BLD",9037,"KRN",9.8,"NM",34,0)
GMPLEDT3^^0^B19132653
"BLD",9037,"KRN",9.8,"NM",35,0)
GMPLEDT4^^0^B13662429
"BLD",9037,"KRN",9.8,"NM",36,0)
GMPLEDT5^^0^B9900642
"BLD",9037,"KRN",9.8,"NM",37,0)
GMPLENFM^^0^B9439306
"BLD",9037,"KRN",9.8,"NM",38,0)
GMPLEXT^^0^B25012371
"BLD",9037,"KRN",9.8,"NM",39,0)
GMPLEXT1^^0^B5116305
"BLD",9037,"KRN",9.8,"NM",40,0)
GMPLHIST^^0^B27245378
"BLD",9037,"KRN",9.8,"NM",41,0)
GMPLHS^^0^B10593584
"BLD",9037,"KRN",9.8,"NM",42,0)
GMPLHSPL^^0^B4867282
"BLD",9037,"KRN",9.8,"NM",43,0)
GMPLMENU^^0^B17048988
"BLD",9037,"KRN",9.8,"NM",44,0)
GMPLMGR^^0^B20220608
"BLD",9037,"KRN",9.8,"NM",45,0)
GMPLMGR1^^0^B21525748
"BLD",9037,"KRN",9.8,"NM",46,0)
GMPLMGR2^^0^B21104761
"BLD",9037,"KRN",9.8,"NM",49,0)
GMPLP37I^^0^B5760390
"BLD",9037,"KRN",9.8,"NM",50,0)
GMPLPREF^^0^B17221861
"BLD",9037,"KRN",9.8,"NM",51,0)
GMPLPRF0^^0^B2517718
"BLD",9037,"KRN",9.8,"NM",52,0)
GMPLPRF1^^0^B20344987
"BLD",9037,"KRN",9.8,"NM",53,0)
GMPLPRNT^^0^B29401188
"BLD",9037,"KRN",9.8,"NM",54,0)
GMPLPXRM^^0^B10158240
"BLD",9037,"KRN",9.8,"NM",55,0)
GMPLRPTR^^0^B8264324
"BLD",9037,"KRN",9.8,"NM",56,0)
GMPLRPTS^^0^B10402447
"BLD",9037,"KRN",9.8,"NM",57,0)
GMPLSAVE^^0^B575127
"BLD",9037,"KRN",9.8,"NM",58,0)
GMPLSITE^^0^B3497994
"BLD",9037,"KRN",9.8,"NM",59,0)
GMPLUTL^^0^B39075337
"BLD",9037,"KRN",9.8,"NM",60,0)
GMPLUTL1^^0^B22558845
"BLD",9037,"KRN",9.8,"NM",61,0)
GMPLUTL2^^0^B36316249
"BLD",9037,"KRN",9.8,"NM",62,0)
GMPLUTL3^^0^B4689690
"BLD",9037,"KRN",9.8,"NM",64,0)
GMPLX^^0^B26440267
"BLD",9037,"KRN",9.8,"NM",65,0)
GMPLX1^^0^B37261372
"BLD",9037,"KRN",9.8,"NM","B","GMPL",1)

"BLD",9037,"KRN",9.8,"NM","B","GMPL1",2)

"BLD",9037,"KRN",9.8,"NM","B","GMPL31P",3)

"BLD",9037,"KRN",9.8,"NM","B","GMPLAPI1",4)

"BLD",9037,"KRN",9.8,"NM","B","GMPLAPI2",5)

"BLD",9037,"KRN",9.8,"NM","B","GMPLAPI3",6)

"BLD",9037,"KRN",9.8,"NM","B","GMPLAPI4",7)

"BLD",9037,"KRN",9.8,"NM","B","GMPLAPI5",8)

"BLD",9037,"KRN",9.8,"NM","B","GMPLAPI6",9)

"BLD",9037,"KRN",9.8,"NM","B","GMPLAPI7",10)

"BLD",9037,"KRN",9.8,"NM","B","GMPLAPIE",11)

"BLD",9037,"KRN",9.8,"NM","B","GMPLBLCK",12)

"BLD",9037,"KRN",9.8,"NM","B","GMPLBLD",13)

"BLD",9037,"KRN",9.8,"NM","B","GMPLBLD1",14)

"BLD",9037,"KRN",9.8,"NM","B","GMPLBLD2",15)

"BLD",9037,"KRN",9.8,"NM","B","GMPLBLD3",16)

"BLD",9037,"KRN",9.8,"NM","B","GMPLBLDC",17)

"BLD",9037,"KRN",9.8,"NM","B","GMPLBLDF",18)

"BLD",9037,"KRN",9.8,"NM","B","GMPLCHK",19)

"BLD",9037,"KRN",9.8,"NM","B","GMPLCODE",20)

"BLD",9037,"KRN",9.8,"NM","B","GMPLDAL",21)

"BLD",9037,"KRN",9.8,"NM","B","GMPLDAL1",22)

"BLD",9037,"KRN",9.8,"NM","B","GMPLDAL2",23)

"BLD",9037,"KRN",9.8,"NM","B","GMPLDAL3",24)

"BLD",9037,"KRN",9.8,"NM","B","GMPLDAL4",25)

"BLD",9037,"KRN",9.8,"NM","B","GMPLDALF",26)

"BLD",9037,"KRN",9.8,"NM","B","GMPLDIS1",27)

"BLD",9037,"KRN",9.8,"NM","B","GMPLDISP",28)

"BLD",9037,"KRN",9.8,"NM","B","GMPLDUP2",29)

"BLD",9037,"KRN",9.8,"NM","B","GMPLE9",30)

"BLD",9037,"KRN",9.8,"NM","B","GMPLEDIT",31)

"BLD",9037,"KRN",9.8,"NM","B","GMPLEDT1",32)

"BLD",9037,"KRN",9.8,"NM","B","GMPLEDT2",33)

"BLD",9037,"KRN",9.8,"NM","B","GMPLEDT3",34)

"BLD",9037,"KRN",9.8,"NM","B","GMPLEDT4",35)

"BLD",9037,"KRN",9.8,"NM","B","GMPLEDT5",36)

"BLD",9037,"KRN",9.8,"NM","B","GMPLENFM",37)

"BLD",9037,"KRN",9.8,"NM","B","GMPLEXT",38)

"BLD",9037,"KRN",9.8,"NM","B","GMPLEXT1",39)

"BLD",9037,"KRN",9.8,"NM","B","GMPLHIST",40)

"BLD",9037,"KRN",9.8,"NM","B","GMPLHS",41)

"BLD",9037,"KRN",9.8,"NM","B","GMPLHSPL",42)

"BLD",9037,"KRN",9.8,"NM","B","GMPLMENU",43)

"BLD",9037,"KRN",9.8,"NM","B","GMPLMGR",44)

"BLD",9037,"KRN",9.8,"NM","B","GMPLMGR1",45)

"BLD",9037,"KRN",9.8,"NM","B","GMPLMGR2",46)

"BLD",9037,"KRN",9.8,"NM","B","GMPLP37I",49)

"BLD",9037,"KRN",9.8,"NM","B","GMPLPREF",50)

"BLD",9037,"KRN",9.8,"NM","B","GMPLPRF0",51)

"BLD",9037,"KRN",9.8,"NM","B","GMPLPRF1",52)

"BLD",9037,"KRN",9.8,"NM","B","GMPLPRNT",53)

"BLD",9037,"KRN",9.8,"NM","B","GMPLPXRM",54)

"BLD",9037,"KRN",9.8,"NM","B","GMPLRPTR",55)

"BLD",9037,"KRN",9.8,"NM","B","GMPLRPTS",56)

"BLD",9037,"KRN",9.8,"NM","B","GMPLSAVE",57)

"BLD",9037,"KRN",9.8,"NM","B","GMPLSITE",58)

"BLD",9037,"KRN",9.8,"NM","B","GMPLUTL",59)

"BLD",9037,"KRN",9.8,"NM","B","GMPLUTL1",60)

"BLD",9037,"KRN",9.8,"NM","B","GMPLUTL2",61)

"BLD",9037,"KRN",9.8,"NM","B","GMPLUTL3",62)

"BLD",9037,"KRN",9.8,"NM","B","GMPLX",64)

"BLD",9037,"KRN",9.8,"NM","B","GMPLX1",65)

"BLD",9037,"KRN",19,0)
19
"BLD",9037,"KRN",19.1,0)
19.1
"BLD",9037,"KRN",101,0)
101
"BLD",9037,"KRN",409.61,0)
409.61
"BLD",9037,"KRN",771,0)
771
"BLD",9037,"KRN",779.2,0)
779.2
"BLD",9037,"KRN",870,0)
870
"BLD",9037,"KRN",8989.51,0)
8989.51
"BLD",9037,"KRN",8989.52,0)
8989.52
"BLD",9037,"KRN",8994,0)
8994
"BLD",9037,"KRN","B",.4,.4)

"BLD",9037,"KRN","B",.401,.401)

"BLD",9037,"KRN","B",.402,.402)

"BLD",9037,"KRN","B",.403,.403)

"BLD",9037,"KRN","B",.5,.5)

"BLD",9037,"KRN","B",.84,.84)

"BLD",9037,"KRN","B",3.6,3.6)

"BLD",9037,"KRN","B",3.8,3.8)

"BLD",9037,"KRN","B",9.2,9.2)

"BLD",9037,"KRN","B",9.8,9.8)

"BLD",9037,"KRN","B",19,19)

"BLD",9037,"KRN","B",19.1,19.1)

"BLD",9037,"KRN","B",101,101)

"BLD",9037,"KRN","B",409.61,409.61)

"BLD",9037,"KRN","B",771,771)

"BLD",9037,"KRN","B",779.2,779.2)

"BLD",9037,"KRN","B",870,870)

"BLD",9037,"KRN","B",8989.51,8989.51)

"BLD",9037,"KRN","B",8989.52,8989.52)

"BLD",9037,"KRN","B",8994,8994)

"BLD",9037,"QDEF")
^^^^^^^^YES^^YES
"BLD",9037,"QUES",0)
^9.62^^
"BLD",9037,"REQB",0)
^9.611^^
"KRN",.84,1250000.001,-1)
0^1
"KRN",.84,1250000.001,0)
1250000.001^2
"KRN",.84,1250000.001,2,0)
^^1^1^3121009^
"KRN",.84,1250000.001,2,1,0)
>>>  Please enter another problem, or press <return> to exit.
"KRN",.84,1250000.002,-1)
0^2
"KRN",.84,1250000.002,0)
1250000.002^2
"KRN",.84,1250000.002,2,0)
^^1^1^3121009^
"KRN",.84,1250000.002,2,1,0)
Currently displayed problems are already inactive!"
"KRN",.84,1250000.003,-1)
0^3
"KRN",.84,1250000.003,0)
1250000.003^2
"KRN",.84,1250000.003,2,0)
^^1^1^3121009^
"KRN",.84,1250000.003,2,1,0)
inactivate
"KRN",.84,1250000.004,-1)
0^4
"KRN",.84,1250000.004,0)
1250000.004^2
"KRN",.84,1250000.004,2,0)
^^1^1^3121009^
"KRN",.84,1250000.004,2,1,0)
add comment(s) to
"KRN",.84,1250000.005,-1)
0^5
"KRN",.84,1250000.005,0)
1250000.005^2
"KRN",.84,1250000.005,2,0)
^^1^1^3121009^
"KRN",.84,1250000.005,2,1,0)
has been removed from this patient's problem list!"
"KRN",.84,1250000.006,-1)
0^6
"KRN",.84,1250000.006,0)
1250000.006^2
"KRN",.84,1250000.006,2,0)
^^1^1^3121009^
"KRN",.84,1250000.006,2,1,0)
remove from the list
"KRN",.84,1250000.007,-1)
0^7
"KRN",.84,1250000.007,0)
1250000.007^2
"KRN",.84,1250000.007,2,0)
^^1^1^3121009^
"KRN",.84,1250000.007,2,1,0)
Select the problem(s) you wish to verify as correct.
"KRN",.84,1250000.008,-1)
0^8
"KRN",.84,1250000.008,0)
1250000.008^2
"KRN",.84,1250000.008,2,0)
^^1^1^3121009^
"KRN",.84,1250000.008,2,1,0)
mark as verified
"KRN",.84,1250000.009,-1)
0^9
"KRN",.84,1250000.009,0)
1250000.009^2
"KRN",.84,1250000.009,2,0)
^^1^1^3121009^
"KRN",.84,1250000.009,2,1,0)
PROBLEM: 
"KRN",.84,1250000.01,-1)
0^10
"KRN",.84,1250000.01,0)
1250000.01^2
"KRN",.84,1250000.01,2,0)
^^1^1^3121009^
"KRN",.84,1250000.01,2,1,0)
< Nothing Saved !! >
"KRN",.84,1250000.011,-1)
0^11
"KRN",.84,1250000.011,0)
1250000.011^2
"KRN",.84,1250000.011,2,0)
^.844^1^1^3130311^^
"KRN",.84,1250000.011,2,1,0)
Saving ...
"KRN",.84,1250000.012,-1)
0^12
"KRN",.84,1250000.012,0)
1250000.012^2
"KRN",.84,1250000.012,2,0)
^^1^1^3121009^
"KRN",.84,1250000.012,2,1,0)
COMMENT (<60 char): 
"KRN",.84,1250000.013,-1)
0^13
"KRN",.84,1250000.013,0)
1250000.013^2
"KRN",.84,1250000.013,2,0)
^^1^1^3121009^
"KRN",.84,1250000.013,2,1,0)
... inactivated!
"KRN",.84,1250000.014,-1)
0^14
"KRN",.84,1250000.014,0)
1250000.014^2
"KRN",.84,1250000.014,2,0)
^^1^1^3121009^
"KRN",.84,1250000.014,2,1,0)
is inactive. Edit the problem before adding comments.
"KRN",.84,1250000.015,-1)
0^15
"KRN",.84,1250000.015,0)
1250000.015^2
"KRN",.84,1250000.015,2,0)
^^1^1^3121009^
"KRN",.84,1250000.015,2,1,0)
REASON FOR REMOVAL: 
"KRN",.84,1250000.016,-1)
0^16
"KRN",.84,1250000.016,0)
1250000.016^2
"KRN",.84,1250000.016,2,0)
^^1^1^3121009^
"KRN",.84,1250000.016,2,1,0)
...... removed!
"KRN",.84,1250000.017,-1)
0^17
"KRN",.84,1250000.017,0)
1250000.017^2
"KRN",.84,1250000.017,2,0)
^.844^1^1^3130312^^
"KRN",.84,1250000.017,2,1,0)
... verified.
"KRN",.84,1250000.018,-1)
0^18
"KRN",.84,1250000.018,0)
1250000.018^2
"KRN",.84,1250000.018,2,0)
^.844^5^5^3121010^^
"KRN",.84,1250000.018,2,1,0)
<< If you PROCEED WITH THIS NON SPECIFIC TERM, an ICD CODE OF 799.9 >>
"KRN",.84,1250000.018,2,2,0)
<< OTHER UNKNOWN AND UNSPECIFIED CAUSE OF MORBIDITY OR MORTALITY    >>
"KRN",.84,1250000.018,2,3,0)
<< will be assigned. Adding more specificity to your diagnosis may  >>
"KRN",.84,1250000.018,2,4,0)
<< allow a more accurate ICD code.                                  >>
"KRN",.84,1250000.018,2,5,0)
Continue (YES/NO) 
"KRN",.84,1250000.019,-1)
0^19
"KRN",.84,1250000.019,0)
1250000.019^2
"KRN",.84,1250000.019,2,0)
^^1^1^3121010^
"KRN",.84,1250000.019,2,1,0)
NO
"KRN",.84,1250000.02,-1)
0^20
"KRN",.84,1250000.02,0)
1250000.02^2
"KRN",.84,1250000.02,2,0)
^^5^5^3121010^
"KRN",.84,1250000.02,2,1,0)
The following Problem Selection Lists contain one or more problems that
"KRN",.84,1250000.02,2,2,0)
have inactive ICD-9 codes attached to them. Any current users or clinics using
"KRN",.84,1250000.02,2,3,0)
these Selection Lists, will not be able to add the problems with inactive 
"KRN",.84,1250000.02,2,4,0)
codes, until the list and the inactive codes are updated. The list may not be
"KRN",.84,1250000.02,2,5,0)
assigned to any additional users or clinics until updated.
"KRN",.84,1250000.021,-1)
0^21
"KRN",.84,1250000.021,0)
1250000.021^2
"KRN",.84,1250000.021,2,0)
^^4^4^3121010^
"KRN",.84,1250000.021,2,1,0)
The following Problem Selection List categories contain problems with ICD9 
"KRN",.84,1250000.021,2,2,0)
codes that have a future inactivation date. These Categories should be updated
"KRN",.84,1250000.021,2,3,0)
as soon as possible after the inactivation date to reduce the interruption of
"KRN",.84,1250000.021,2,4,0)
use of the selection list(s) by users or clinics.
"KRN",.84,1250000.022,-1)
0^22
"KRN",.84,1250000.022,0)
1250000.022^2
"KRN",.84,1250000.022,2,0)
^^1^1^3121010^
"KRN",.84,1250000.022,2,1,0)
 Category name: 
"KRN",.84,1250000.023,-1)
0^23
"KRN",.84,1250000.023,0)
1250000.023^2
"KRN",.84,1250000.023,2,0)
^^1^1^3121010^
"KRN",.84,1250000.023,2,1,0)
    Problems with ICD9 codes due to be inactivated:
"KRN",.84,1250000.024,-1)
0^24
"KRN",.84,1250000.024,0)
1250000.024^2
"KRN",.84,1250000.024,2,0)
^^1^1^3121010^
"KRN",.84,1250000.024,2,1,0)
       Problem text: 
"KRN",.84,1250000.025,-1)
0^25
"KRN",.84,1250000.025,0)
1250000.025^2
"KRN",.84,1250000.025,2,0)
^^1^1^3121010^
"KRN",.84,1250000.025,2,1,0)
       Display text: 
"KRN",.84,1250000.026,-1)
0^26
"KRN",.84,1250000.026,0)
1250000.026^2
"KRN",.84,1250000.026,2,0)
^^1^1^3121010^
"KRN",.84,1250000.026,2,1,0)
               Code: 
"KRN",.84,1250000.027,-1)
0^27
"KRN",.84,1250000.027,0)
1250000.027^2
"KRN",.84,1250000.027,2,0)
^^1^1^3121010^
"KRN",.84,1250000.027,2,1,0)
      Inactive date: 
"KRN",.84,1250000.028,-1)
0^28
"KRN",.84,1250000.028,0)
1250000.028^2
"KRN",.84,1250000.028,2,0)
^^1^1^3121010^
"KRN",.84,1250000.028,2,1,0)
    This Category is part of the following Problem Selection Lists:
"KRN",.84,1250000.029,-1)
0^29
"KRN",.84,1250000.029,0)
1250000.029^2
"KRN",.84,1250000.029,2,0)
^^1^1^3121010^
"KRN",.84,1250000.029,2,1,0)
No Problems Selectin List corrections/review required
"KRN",.84,1250000.03,-1)
0^30
"KRN",.84,1250000.03,0)
1250000.03^2
"KRN",.84,1250000.03,2,0)
^.844^1^1^3121010^^
"KRN",.84,1250000.03,2,1,0)
Problem Selection List Code Set Version review
"KRN",.84,1250000.031,-1)
0^31
"KRN",.84,1250000.031,0)
1250000.031^2
"KRN",.84,1250000.031,2,0)
^^1^1^3121010^
"KRN",.84,1250000.031,2,1,0)
Review of GMPL SEL LISTS for CSV
"KRN",.84,1250000.032,-1)
0^32
"KRN",.84,1250000.032,0)
1250000.032^2
"KRN",.84,1250000.032,2,0)
^^1^1^3121010^
"KRN",.84,1250000.032,2,1,0)
Unable to task report
"KRN",.84,1250000.033,-1)
0^33
"KRN",.84,1250000.033,0)
1250000.033^2
"KRN",.84,1250000.033,2,0)
^^1^1^3121010^
"KRN",.84,1250000.033,2,1,0)
    Problems with ICD9 codes due to be inactivated:
"KRN",.84,1250000.034,-1)
0^34
"KRN",.84,1250000.034,0)
1250000.034^2
"KRN",.84,1250000.034,2,0)
^^1^1^3121010^
"KRN",.84,1250000.034,2,1,0)
Code Set Version review of Problem Selection Lists
"KRN",.84,1250000.035,-1)
0^35
"KRN",.84,1250000.035,0)
1250000.035^2
"KRN",.84,1250000.035,2,0)
^^1^1^3121010^
"KRN",.84,1250000.035,2,1,0)
Page: 
"KRN",.84,1250000.036,-1)
0^36
"KRN",.84,1250000.036,0)
1250000.036^2
"KRN",.84,1250000.036,2,0)
^^1^1^3121010^
"KRN",.84,1250000.036,2,1,0)
 categories
"KRN",.84,1250000.037,-1)
0^37
"KRN",.84,1250000.037,0)
1250000.037^2
"KRN",.84,1250000.037,2,0)
^^1^1^3121010^
"KRN",.84,1250000.037,2,1,0)
 category
"KRN",.84,1250000.038,-1)
0^38
"KRN",.84,1250000.038,0)
1250000.038^2
"KRN",.84,1250000.038,2,0)
^^1^1^3121010^
"KRN",.84,1250000.038,2,1,0)
Last Modified: 
"KRN",.84,1250000.039,-1)
0^39
"KRN",.84,1250000.039,0)
1250000.039^2
"KRN",.84,1250000.039,2,0)
^^1^1^3121010^
"KRN",.84,1250000.039,2,1,0)
This list is currently being edited by another user!
"KRN",.84,1250000.04,-1)
0^40
"KRN",.84,1250000.04,0)
1250000.04^2
"KRN",.84,1250000.04,2,0)
^^1^1^3121010^
"KRN",.84,1250000.04,2,1,0)
Searching for the list ...
"KRN",.84,1250000.041,-1)
0^41
"KRN",.84,1250000.041,0)
1250000.041^2
"KRN",.84,1250000.041,2,0)
^^1^1^3121010^
"KRN",.84,1250000.041,2,1,0)
No items available.
"KRN",.84,1250000.042,-1)
0^42
"KRN",.84,1250000.042,0)
1250000.042^2
"KRN",.84,1250000.042,2,0)
^^1^1^3121010^
"KRN",.84,1250000.042,2,1,0)
<no header>
"KRN",.84,1250000.043,-1)
0^43
"KRN",.84,1250000.043,0)
1250000.043^2
"KRN",.84,1250000.043,2,0)
^^1^1^3121010^
"KRN",.84,1250000.043,2,1,0)
    <INACTIVE CODE>
"KRN",.84,1250000.044,-1)
0^44
"KRN",.84,1250000.044,0)
1250000.044^3
"KRN",.84,1250000.044,2,0)
^^10^10^3121010^
"KRN",.84,1250000.044,2,1,0)
    
"KRN",.84,1250000.044,2,2,0)
    You may take a variety of actions to update this selection list.
"KRN",.84,1250000.044,2,3,0)
    New categories may be added to this list, or an existing one
"KRN",.84,1250000.044,2,4,0)
    removed; Edit Category will allow you to change the contents of
"KRN",.84,1250000.044,2,5,0)
    a category, or create a new one that may be added to this list.
"KRN",.84,1250000.044,2,6,0)
    You may also change how each category appears in this list,
"KRN",.84,1250000.044,2,7,0)
    view each category's sequence number to facilitate resequencing,
"KRN",.84,1250000.044,2,8,0)
    assign this list to a clinic or users(s), or edit a different list.
"KRN",.84,1250000.044,2,9,0)
 
"KRN",.84,1250000.044,2,10,0)
Press <return> to continue ...
"KRN",.84,1250000.045,-1)
0^45
"KRN",.84,1250000.045,0)
1250000.045^2
"KRN",.84,1250000.045,2,0)
^.844^1^1^3121108^^
"KRN",.84,1250000.045,2,1,0)
>>>  This category is already part of this list!
"KRN",.84,1250000.046,-1)
0^46
"KRN",.84,1250000.046,0)
1250000.046^2
"KRN",.84,1250000.046,2,0)
^.844^3^3^3121108^^
"KRN",.84,1250000.046,2,1,0)
 
"KRN",.84,1250000.046,2,2,0)
This category contains one or more problems with inactive ICD-9 codes. 
"KRN",.84,1250000.046,2,3,0)
These codes must be updated before adding the category to a selection list.
"KRN",.84,1250000.047,-1)
0^47
"KRN",.84,1250000.047,0)
1250000.047^2
"KRN",.84,1250000.047,2,0)
^^1^1^3121010^
"KRN",.84,1250000.047,2,1,0)
Category is not part of this list!
"KRN",.84,1250000.048,-1)
0^48
"KRN",.84,1250000.048,0)
1250000.048^2^y
"KRN",.84,1250000.048,2,0)
^.844^1^1^3130307^^^^
"KRN",.84,1250000.048,2,1,0)
Are you sure you want to remove '|1|'? 
"KRN",.84,1250000.049,-1)
0^49
"KRN",.84,1250000.049,0)
1250000.049^3
"KRN",.84,1250000.049,2,0)
^^1^1^3121010^
"KRN",.84,1250000.049,2,1,0)
Enter YES to delete this category from the current list; enter NO to exit.
"KRN",.84,1250000.05,-1)
0^50
"KRN",.84,1250000.05,0)
1250000.05^2^y
"KRN",.84,1250000.05,2,0)
^^1^1^3121010^
"KRN",.84,1250000.05,2,1,0)
Select |1|(s)
"KRN",.84,1250000.051,-1)
0^51
"KRN",.84,1250000.051,0)
1250000.051^2
"KRN",.84,1250000.051,2,0)
^^1^1^3121010^
"KRN",.84,1250000.051,2,1,0)
Category
"KRN",.84,1250000.052,-1)
0^52
"KRN",.84,1250000.052,0)
1250000.052^2
"KRN",.84,1250000.052,2,0)
^^1^1^3121010^
"KRN",.84,1250000.052,2,1,0)
Problem
"KRN",.84,1250000.053,-1)
0^53
"KRN",.84,1250000.053,0)
1250000.053^2^y
"KRN",.84,1250000.053,2,0)
^^1^1^3121010^
"KRN",.84,1250000.053,2,1,0)
Enter the |1| you wish to select, as a range or list of numbers
"KRN",.84,1250000.054,-1)
0^54
"KRN",.84,1250000.054,0)
1250000.054^2
"KRN",.84,1250000.054,2,0)
^^1^1^3121010^
"KRN",.84,1250000.054,2,1,0)
categories
"KRN",.84,1250000.055,-1)
0^55
"KRN",.84,1250000.055,0)
1250000.055^2
"KRN",.84,1250000.055,2,0)
^^1^1^3121010^
"KRN",.84,1250000.055,2,1,0)
problems
"KRN",.84,1250000.056,-1)
0^56
"KRN",.84,1250000.056,0)
1250000.056^2
"KRN",.84,1250000.056,2,0)
^^1^1^3121010^
"KRN",.84,1250000.056,2,1,0)
category
"KRN",.84,1250000.057,-1)
0^57
"KRN",.84,1250000.057,0)
1250000.057^2
"KRN",.84,1250000.057,2,0)
^^1^1^3121010^
"KRN",.84,1250000.057,2,1,0)
problem
"KRN",.84,1250000.058,-1)
0^58
"KRN",.84,1250000.058,0)
1250000.058^2^y
"KRN",.84,1250000.058,2,0)
^^1^1^3121010^
"KRN",.84,1250000.058,2,1,0)
Select |1|
"KRN",.84,1250000.059,-1)
0^59
"KRN",.84,1250000.059,0)
1250000.059^2^y
"KRN",.84,1250000.059,2,0)
^^1^1^3121010^
"KRN",.84,1250000.059,2,1,0)
Enter the |1| you wish to select, by number
"KRN",.84,1250000.06,-1)
0^60
"KRN",.84,1250000.06,0)
1250000.06^3^y
"KRN",.84,1250000.06,2,0)
^.844^2^2^3121010^^
"KRN",.84,1250000.06,2,1,0)
Enter a number indicating the sequence of this item in the |1|;
"KRN",.84,1250000.06,2,2,0)
up to 2 decimal places may be used, to order these items.
"KRN",.84,1250000.061,-1)
0^61
"KRN",.84,1250000.061,0)
1250000.061^2
"KRN",.84,1250000.061,2,0)
^^1^1^3121010^
"KRN",.84,1250000.061,2,1,0)
SEQUENCE: 
"KRN",.84,1250000.062,-1)
0^62
"KRN",.84,1250000.062,0)
1250000.062^2
"KRN",.84,1250000.062,2,0)
^.844^3^3^3121010^^
"KRN",.84,1250000.062,2,1,0)
Sequence number already in use! Please enter another number.
"KRN",.84,1250000.062,2,2,0)
Use the 'Change View' option to display the current sequence numbers.
"KRN",.84,1250000.062,2,3,0)
 
"KRN",.84,1250000.063,-1)
0^63
"KRN",.84,1250000.063,0)
1250000.063^2
"KRN",.84,1250000.063,2,0)
^^1^1^3121010^
"KRN",.84,1250000.063,2,1,0)
HEADER: 
"KRN",.84,1250000.064,-1)
0^64
"KRN",.84,1250000.064,0)
1250000.064^3
"KRN",.84,1250000.064,2,0)
^.844^1^1^3121010^^
"KRN",.84,1250000.064,2,1,0)
Enter the text you wish displayed as a header for this category of problems
"KRN",.84,1250000.065,-1)
0^65
"KRN",.84,1250000.065,0)
1250000.065^3
"KRN",.84,1250000.065,2,0)
^^1^1^3121010^
"KRN",.84,1250000.065,2,1,0)
enter '@' if no header text is desired.
"KRN",.84,1250000.066,-1)
0^66
"KRN",.84,1250000.066,0)
1250000.066^2
"KRN",.84,1250000.066,2,0)
^^1^1^3121010^
"KRN",.84,1250000.066,2,1,0)
DISPLAY TEXT: 
"KRN",.84,1250000.067,-1)
0^67
"KRN",.84,1250000.067,0)
1250000.067^3
"KRN",.84,1250000.067,2,0)
^^1^1^3121010^
"KRN",.84,1250000.067,2,1,0)
Enter the text you wish presented here for this problem.
"KRN",.84,1250000.068,-1)
0^68
"KRN",.84,1250000.068,0)
1250000.068^2
"KRN",.84,1250000.068,2,0)
^^1^1^3121010^
"KRN",.84,1250000.068,2,1,0)
ICD CODE: 
"KRN",.84,1250000.069,-1)
0^69
"KRN",.84,1250000.069,0)
1250000.069^3
"KRN",.84,1250000.069,2,0)
^^1^1^3121010^
"KRN",.84,1250000.069,2,1,0)
Enter the code you wish displayed with this problem.
"KRN",.84,1250000.07,-1)
0^70
"KRN",.84,1250000.07,0)
1250000.07^2
"KRN",.84,1250000.07,2,0)
^^1^1^3121010^
"KRN",.84,1250000.07,2,1,0)
SHOW PROBLEMS AUTOMATICALLY? 
"KRN",.84,1250000.071,-1)
0^71
"KRN",.84,1250000.071,0)
1250000.071^3
"KRN",.84,1250000.071,2,0)
^^3^3^3121010^
"KRN",.84,1250000.071,2,1,0)
Enter YES if you wish the problems contained in this category to be
"KRN",.84,1250000.071,2,2,0)
automatically displayed upon entry to this list; NO will display only the
"KRN",.84,1250000.071,2,3,0)
category header until the user selects it to view.
"KRN",.84,1250000.072,-1)
0^72
"KRN",.84,1250000.072,0)
1250000.072^2
"KRN",.84,1250000.072,2,0)
^^1^1^3121010^
"KRN",.84,1250000.072,2,1,0)
list
"KRN",.84,1250000.073,-1)
0^73
"KRN",.84,1250000.073,0)
1250000.073^2
"KRN",.84,1250000.073,2,0)
^.844^2^2^3121108^^^
"KRN",.84,1250000.073,2,1,0)
This category is currently being edited by another user!
"KRN",.84,1250000.073,2,2,0)
 
"KRN",.84,1250000.074,-1)
0^74
"KRN",.84,1250000.074,0)
1250000.074^2
"KRN",.84,1250000.074,2,0)
^^1^1^3121010^
"KRN",.84,1250000.074,2,1,0)
Select CATEGORY NAME: 
"KRN",.84,1250000.075,-1)
0^75
"KRN",.84,1250000.075,0)
1250000.075^2
"KRN",.84,1250000.075,2,0)
^.844^1^1^3121106^^
"KRN",.84,1250000.075,2,1,0)
    Answer with PROBLEM SELECTION CATEGORY NAME
"KRN",.84,1250000.076,-1)
0^76
"KRN",.84,1250000.076,0)
1250000.076^3^y
"KRN",.84,1250000.076,2,0)
^.844^4^4^3121010^^
"KRN",.84,1250000.076,2,1,0)
|TAB|You may enter a new PROBLEM SELECTION CATEGORY, if you wish
"KRN",.84,1250000.076,2,2,0)
|TAB|NAME MUST BE 3-30 CHARACTERS, NOT NUMERIC OR STARTING WITH
"KRN",.84,1250000.076,2,3,0)
|TAB|PUNCTUATION
"KRN",.84,1250000.076,2,4,0)
 
"KRN",.84,1250000.077,-1)
0^77
"KRN",.84,1250000.077,0)
1250000.077^3^y
"KRN",.84,1250000.077,2,0)
^.844^3^3^3121010^^
"KRN",.84,1250000.077,2,1,0)
|TAB|You may enter a new PROBLEM SELECTION CATEGORY, if you wish
"KRN",.84,1250000.077,2,2,0)
|TAB|This is the name given to this problem group to identify and describe it.
"KRN",.84,1250000.077,2,3,0)
 
"KRN",.84,1250000.078,-1)
0^78
"KRN",.84,1250000.078,0)
1250000.078^2
"KRN",.84,1250000.078,2,0)
^.844^1^1^3121108^^
"KRN",.84,1250000.078,2,1,0)
This list is currently being edited by another user!
"KRN",.84,1250000.079,-1)
0^79
"KRN",.84,1250000.079,0)
1250000.079^2
"KRN",.84,1250000.079,2,0)
^.844^1^1^3121106^^^
"KRN",.84,1250000.079,2,1,0)
Select LIST NAME: 
"KRN",.84,1250000.08,-1)
0^80
"KRN",.84,1250000.08,0)
1250000.08^2
"KRN",.84,1250000.08,2,0)
^.844^1^1^3121106^^^^
"KRN",.84,1250000.08,2,1,0)
    Answer with PROBLEM SELECTION LIST NAME, or CLINIC
"KRN",.84,1250000.081,-1)
0^81
"KRN",.84,1250000.081,0)
1250000.081^3^y
"KRN",.84,1250000.081,2,0)
^.844^4^4^3121106^^
"KRN",.84,1250000.081,2,1,0)
|TAB|You may enter a new PROBLEM SELECTION LIST, if you wish
"KRN",.84,1250000.081,2,2,0)
|TAB|NAME MUST BE 3-30 CHARACTERS, NOT NUMERIC OR STARTING WITH
"KRN",.84,1250000.081,2,3,0)
|TAB|PUNCTUATION
"KRN",.84,1250000.081,2,4,0)
 
"KRN",.84,1250000.082,-1)
0^82
"KRN",.84,1250000.082,0)
1250000.082^3^y
"KRN",.84,1250000.082,2,0)
^^5^5^3121010^
"KRN",.84,1250000.082,2,1,0)
|TAB|You may enter a new PROBLEM SELECTION LIST, if you wish
"KRN",.84,1250000.082,2,2,0)
|TAB|This is a free text name for the list; it should contain the name of
"KRN",.84,1250000.082,2,3,0)
|TAB|the clinic or user who will be the primary user(s) of this list, as this
"KRN",.84,1250000.082,2,4,0)
|TAB|name will be used as an ID and a title.
"KRN",.84,1250000.082,2,5,0)
 
"KRN",.84,1250000.083,-1)
0^83
"KRN",.84,1250000.083,0)
1250000.083^2
"KRN",.84,1250000.083,2,0)
^^1^1^3121010^
"KRN",.84,1250000.083,2,1,0)
Press <RETURN> to see more, '^' to exit this list, OR
"KRN",.84,1250000.084,-1)
0^84
"KRN",.84,1250000.084,0)
1250000.084^2^y
"KRN",.84,1250000.084,2,0)
^.844^1^1^3121106^^
"KRN",.84,1250000.084,2,1,0)
CHOOSE 1-|1|: 
"KRN",.84,1250000.085,-1)
0^85
"KRN",.84,1250000.085,0)
1250000.085^2
"KRN",.84,1250000.085,2,0)
^.844^1^1^3121106^^^^
"KRN",.84,1250000.085,2,1,0)
   Choose from:
"KRN",.84,1250000.086,-1)
0^86
"KRN",.84,1250000.086,0)
1250000.086^2^y
"KRN",.84,1250000.086,2,0)
^^1^1^3121010^
"KRN",.84,1250000.086,2,1,0)
|TAB|'^' TO STOP
"KRN",.84,1250000.087,-1)
0^87
"KRN",.84,1250000.087,0)
1250000.087^3^y
"KRN",.84,1250000.087,2,0)
^.844^1^1^3121106^^
"KRN",.84,1250000.087,2,1,0)
 Answer with |1| |2|
"KRN",.84,1250000.088,-1)
0^88
"KRN",.84,1250000.088,0)
1250000.088^2^y
"KRN",.84,1250000.088,2,0)
^^1^1^3121010^
"KRN",.84,1250000.088,2,1,0)
 Do you want the entire |1|-Entry |2| List
"KRN",.84,1250000.089,-1)
0^89
"KRN",.84,1250000.089,0)
1250000.089^2^y
"KRN",.84,1250000.089,2,0)
^.844^1^1^3121108^^
"KRN",.84,1250000.089,2,1,0)
Are you adding '|1|' as a new |2|
"KRN",.84,1250000.09,-1)
0^90
"KRN",.84,1250000.09,0)
1250000.09^2^y
"KRN",.84,1250000.09,2,0)
^.844^1^1^3130307^^
"KRN",.84,1250000.09,2,1,0)
Save the changes to this |1|? 
"KRN",.84,1250000.091,-1)
0^91
"KRN",.84,1250000.091,0)
1250000.091^3^y
"KRN",.84,1250000.091,2,0)
^^2^2^3121010^
"KRN",.84,1250000.091,2,1,0)
Enter YES to save the changes that have been made to this |1|
"KRN",.84,1250000.091,2,2,0)
before exiting it; NO will leave this |1| unchanged.
"KRN",.84,1250000.092,-1)
0^92
"KRN",.84,1250000.092,0)
1250000.092^2
"KRN",.84,1250000.092,2,0)
^^2^2^3121010^
"KRN",.84,1250000.092,2,1,0)
This Group contains problems with inactive ICD9 codes associated with them.
"KRN",.84,1250000.092,2,2,0)
The codes must be edited and corrected before the group can be saved.
"KRN",.84,1250000.093,-1)
0^93
"KRN",.84,1250000.093,0)
1250000.093^2
"KRN",.84,1250000.093,2,0)
^^2^2^3121010^
"KRN",.84,1250000.093,2,1,0)
This Selection List contains problems with inactive ICD9 codes associated with
"KRN",.84,1250000.093,2,2,0)
them. The codes must be edited and corrected before the list can be saved.
"KRN",.84,1250000.094,-1)
0^94
"KRN",.84,1250000.094,0)
1250000.094^2
"KRN",.84,1250000.094,2,0)
^^2^2^3121010^
"KRN",.84,1250000.094,2,1,0)
 
"KRN",.84,1250000.094,2,2,0)
Saving ...
"KRN",.84,1250000.095,-1)
0^95
"KRN",.84,1250000.095,0)
1250000.095^2
"KRN",.84,1250000.095,2,0)
^.844^1^1^3121030^^
"KRN",.84,1250000.095,2,1,0)
 done.
"KRN",.84,1250000.096,-1)
0^96
"KRN",.84,1250000.096,0)
1250000.096^2
"KRN",.84,1250000.096,2,0)
^^3^3^3121010^
"KRN",.84,1250000.096,2,1,0)
 
"KRN",.84,1250000.096,2,2,0)
>>> This category belongs to at least one problem selection list!
"KRN",.84,1250000.096,2,3,0)
     CANNOT DELETE
"KRN",.84,1250000.097,-1)
0^97
"KRN",.84,1250000.097,0)
1250000.097^2^y
"KRN",.84,1250000.097,2,0)
^^1^1^3121010^
"KRN",.84,1250000.097,2,1,0)
Are you sure you want to delete the entire '|1|' category? 
"KRN",.84,1250000.098,-1)
0^98
"KRN",.84,1250000.098,0)
1250000.098^3
"KRN",.84,1250000.098,2,0)
^^1^1^3121010^
"KRN",.84,1250000.098,2,1,0)
Enter YES to completely remove this category and all its items.
"KRN",.84,1250000.099,-1)
0^99
"KRN",.84,1250000.099,0)
1250000.099^2
"KRN",.84,1250000.099,2,0)
^.844^1^1^3130312^^
"KRN",.84,1250000.099,2,1,0)
Deleting category items ....
"KRN",.84,1250000.1,-1)
0^100
"KRN",.84,1250000.1,0)
1250000.1^2
"KRN",.84,1250000.1,2,0)
^.844^1^1^3130311^^
"KRN",.84,1250000.1,2,1,0)
... <done>
"KRN",.84,1250000.101,-1)
0^101
"KRN",.84,1250000.101,0)
1250000.101^2
"KRN",.84,1250000.101,2,0)
^^5^5^3121010^
"KRN",.84,1250000.101,2,1,0)
This Selection List contains problems with inactive ICD9 codes associated with
"KRN",.84,1250000.101,2,2,0)
them. The codes must be edited and corrected before the list can be assigned to
"KRN",.84,1250000.101,2,3,0)
users.
"KRN",.84,1250000.101,2,4,0)
 
"KRN",.84,1250000.101,2,5,0)
 
"KRN",.84,1250000.102,-1)
0^102
"KRN",.84,1250000.102,0)
1250000.102^2
"KRN",.84,1250000.102,2,0)
^.844^6^6^3121108^^
"KRN",.84,1250000.102,2,1,0)
This Selection List contains problems with inactive ICD9 codes associated with
"KRN",.84,1250000.102,2,2,0)
them. The codes must be edited and corrected before the list can be assigned
"KRN",.84,1250000.102,2,3,0)
to users or clinics.
"KRN",.84,1250000.102,2,4,0)
 
"KRN",.84,1250000.102,2,5,0)
If you have edited the list during this session to correct inactive codes, 
"KRN",.84,1250000.102,2,6,0)
save the list prior to attempting to assign it.
"KRN",.84,1250000.103,-1)
0^103
"KRN",.84,1250000.103,0)
1250000.103^2
"KRN",.84,1250000.103,2,0)
^.844^4^4^3121108^^
"KRN",.84,1250000.103,2,1,0)
 
"KRN",.84,1250000.103,2,2,0)
You may assign this list to a clinic as its default selection list,
"KRN",.84,1250000.103,2,3,0)
as well as to individual users as a preferred selection list.
"KRN",.84,1250000.103,2,4,0)
 
"KRN",.84,1250000.104,-1)
0^104
"KRN",.84,1250000.104,0)
1250000.104^2
"KRN",.84,1250000.104,2,0)
^.844^1^1^3121108^^
"KRN",.84,1250000.104,2,1,0)
CLINIC: 
"KRN",.84,1250000.105,-1)
0^105
"KRN",.84,1250000.105,0)
1250000.105^3^y
"KRN",.84,1250000.105,2,0)
^.844^3^3^3121011^^
"KRN",.84,1250000.105,2,1,0)
|TAB|Enter the clinic to be assigned with this list.
"KRN",.84,1250000.105,2,2,0)
|TAB|Only hospital locations that are clinics are allowed.
"KRN",.84,1250000.105,2,3,0)
    Answer with HOSPITAL LOCATION NAME, or ABBREVIATION, or TEAM
"KRN",.84,1250000.106,-1)
0^106
"KRN",.84,1250000.106,0)
1250000.106^3^y
"KRN",.84,1250000.106,2,0)
^^6^6^3121011^
"KRN",.84,1250000.106,2,1,0)
|TAB|This is the clinic to be associated with this list. This should be the
"KRN",.84,1250000.106,2,2,0)
primary clinic in which this list will be used to populate patient
"KRN",.84,1250000.106,2,3,0)
|TAB|problem lists; when adding new problems for a patient from this clinic,
"KRN",.84,1250000.106,2,4,0)
|TAB|this list will automatically be presented to select problems from.
"KRN",.84,1250000.106,2,5,0)
 
"KRN",.84,1250000.106,2,6,0)
 
"KRN",.84,1250000.107,-1)
0^107
"KRN",.84,1250000.107,0)
1250000.107^2
"KRN",.84,1250000.107,2,0)
^^1^1^3121011^
"KRN",.84,1250000.107,2,1,0)
Select USER: 
"KRN",.84,1250000.108,-1)
0^108
"KRN",.84,1250000.108,0)
1250000.108^2
"KRN",.84,1250000.108,2,0)
^^1^1^3121011^
"KRN",.84,1250000.108,2,1,0)
ANOTHER ONE: 
"KRN",.84,1250000.109,-1)
0^109
"KRN",.84,1250000.109,0)
1250000.109^2
"KRN",.84,1250000.109,2,0)
^^3^3^3121011^
"KRN",.84,1250000.109,2,1,0)
 
"KRN",.84,1250000.109,2,2,0)
No users selected.
"KRN",.84,1250000.109,2,3,0)
 
"KRN",.84,1250000.11,-1)
0^110
"KRN",.84,1250000.11,0)
1250000.11^2
"KRN",.84,1250000.11,2,0)
^^1^1^3121011^
"KRN",.84,1250000.11,2,1,0)
Are you ready? 
"KRN",.84,1250000.111,-1)
0^111
"KRN",.84,1250000.111,0)
1250000.111^3^y
"KRN",.84,1250000.111,2,0)
^^2^2^3121011^
"KRN",.84,1250000.111,2,1,0)
Enter YES to assign the |1| list to the
"KRN",.84,1250000.111,2,2,0)
|2| user(s) selected; enter NO to exit.
"KRN",.84,1250000.112,-1)
0^112
"KRN",.84,1250000.112,0)
1250000.112^3^y
"KRN",.84,1250000.112,2,0)
^^2^2^3121011^
"KRN",.84,1250000.112,2,1,0)
Enter YES to remove the |1| list from the
"KRN",.84,1250000.112,2,2,0)
|2| users(s) selected; enter NO to exit.
"KRN",.84,1250000.113,-1)
0^113
"KRN",.84,1250000.113,0)
1250000.113^2^y
"KRN",.84,1250000.113,2,0)
^^1^1^3121011^
"KRN",.84,1250000.113,2,1,0)
Assigning |1| list ...
"KRN",.84,1250000.114,-1)
0^114
"KRN",.84,1250000.114,0)
1250000.114^2^y
"KRN",.84,1250000.114,2,0)
^^1^1^3121011^
"KRN",.84,1250000.114,2,1,0)
Removing |1| list ...
"KRN",.84,1250000.115,-1)
0^115
"KRN",.84,1250000.115,0)
1250000.115^2
"KRN",.84,1250000.115,2,0)
^.844^1^1^3130311^^
"KRN",.84,1250000.115,2,1,0)
DONE.
"KRN",.84,1250000.116,-1)
0^116
"KRN",.84,1250000.116,0)
1250000.116^3
"KRN",.84,1250000.116,2,0)
^^5^5^3121011^
"KRN",.84,1250000.116,2,1,0)
 
"KRN",.84,1250000.116,2,2,0)
Enter the name of the user you wish this list to be assigned to;
"KRN",.84,1250000.116,2,3,0)
enter '??' to see users currently assigned to this list, or '???' to see
"KRN",.84,1250000.116,2,4,0)
all users on this system.
"KRN",.84,1250000.116,2,5,0)
 
"KRN",.84,1250000.117,-1)
0^117
"KRN",.84,1250000.117,0)
1250000.117^3
"KRN",.84,1250000.117,2,0)
^^5^5^3121011^
"KRN",.84,1250000.117,2,1,0)
 
"KRN",.84,1250000.117,2,2,0)
Enter the name of the user you wish this list to be removed from;
"KRN",.84,1250000.117,2,3,0)
enter '??' to see users currently assigned to this list, or '???' to see
"KRN",.84,1250000.117,2,4,0)
all users on this system.
"KRN",.84,1250000.117,2,5,0)
 
"KRN",.84,1250000.118,-1)
0^118
"KRN",.84,1250000.118,0)
1250000.118^2^y
"KRN",.84,1250000.118,2,0)
^^4^4^3121011^
"KRN",.84,1250000.118,2,1,0)
 
"KRN",.84,1250000.118,2,2,0)
Users currently assigned |1| list:
"KRN",.84,1250000.118,2,3,0)
 
"KRN",.84,1250000.118,2,4,0)
 
"KRN",.84,1250000.119,-1)
0^119
"KRN",.84,1250000.119,0)
1250000.119^2
"KRN",.84,1250000.119,2,0)
^^2^2^3121011^
"KRN",.84,1250000.119,2,1,0)
 
"KRN",.84,1250000.119,2,2,0)
Checking the New Person file for use of this list ...
"KRN",.84,1250000.12,-1)
0^120
"KRN",.84,1250000.12,0)
1250000.12^2^y
"KRN",.84,1250000.12,2,0)
^^4^4^3121011^
"KRN",.84,1250000.12,2,1,0)
 
"KRN",.84,1250000.12,2,2,0)
|1| user(s) are currently assigned this list!
"KRN",.84,1250000.12,2,3,0)
CANNOT DELETE
"KRN",.84,1250000.12,2,4,0)
 
"KRN",.84,1250000.121,-1)
0^121
"KRN",.84,1250000.121,0)
1250000.121^2
"KRN",.84,1250000.121,2,0)
^^1^1^3121011^
"KRN",.84,1250000.121,2,1,0)
0 users found.
"KRN",.84,1250000.122,-1)
0^122
"KRN",.84,1250000.122,0)
1250000.122^2
"KRN",.84,1250000.122,2,0)
^^1^1^3121011^
"KRN",.84,1250000.122,2,1,0)
Are you sure you want to delete this list
"KRN",.84,1250000.123,-1)
0^123
"KRN",.84,1250000.123,0)
1250000.123^3
"KRN",.84,1250000.123,2,0)
^^2^2^3121011^
"KRN",.84,1250000.123,2,1,0)
Enter YES if you wish to completely remove this list; press <return>
"KRN",.84,1250000.123,2,2,0)
to leave this list unchanged and exit this option.
"KRN",.84,1250000.124,-1)
0^124
"KRN",.84,1250000.124,0)
1250000.124^2^y
"KRN",.84,1250000.124,2,0)
^^2^2^3121011^
"KRN",.84,1250000.124,2,1,0)
 
"KRN",.84,1250000.124,2,2,0)
Deleting |1| selection list ...
"KRN",.84,1250000.125,-1)
0^125
"KRN",.84,1250000.125,0)
1250000.125^2
"KRN",.84,1250000.125,2,0)
^.844^2^2^3130327^^
"KRN",.84,1250000.125,2,1,0)
 
"KRN",.84,1250000.125,2,2,0)
No items available.  Returning to Problem List ...
"KRN",.84,1250000.126,-1)
0^126
"KRN",.84,1250000.126,0)
1250000.126^2
"KRN",.84,1250000.126,2,0)
^.844^1^1^3121108^^
"KRN",.84,1250000.126,2,1,0)
Searching for the problems ...
"KRN",.84,1250000.127,-1)
0^127
"KRN",.84,1250000.127,0)
1250000.127^2
"KRN",.84,1250000.127,2,0)
^^1^1^3121011^
"KRN",.84,1250000.127,2,1,0)
No items available.
"KRN",.84,1250000.128,-1)
0^128
"KRN",.84,1250000.128,0)
1250000.128^2
"KRN",.84,1250000.128,2,0)
^^1^1^3121011^
"KRN",.84,1250000.128,2,1,0)
    <INACTIVE CODE>
"KRN",.84,1250000.129,-1)
0^129
"KRN",.84,1250000.129,0)
1250000.129^3^y
"KRN",.84,1250000.129,2,0)
^^9^9^3121011^
"KRN",.84,1250000.129,2,1,0)
|TAB|You may take a variety of actions from this prompt. To update
"KRN",.84,1250000.129,2,2,0)
|TAB|this category you may add new problems or remove an existing
"KRN",.84,1250000.129,2,3,0)
|TAB|one; you may also change the text or code displayed, or the order
"KRN",.84,1250000.129,2,4,0)
|TAB|in which each problem is displayed. Select View w/wo Seq Numbers
"KRN",.84,1250000.129,2,5,0)
|TAB|to toggle seeing the sequence number in addition to the display
"KRN",.84,1250000.129,2,6,0)
|TAB|number per problem. If necessary, the current category may be
"KRN",.84,1250000.129,2,7,0)
|TAB|deleted; you may change to a different category to continue editing.
"KRN",.84,1250000.129,2,8,0)
 
"KRN",.84,1250000.129,2,9,0)
Press <return> to continue ...
"KRN",.84,1250000.13,-1)
0^130
"KRN",.84,1250000.13,0)
1250000.13^2
"KRN",.84,1250000.13,2,0)
^^1^1^3121011^
"KRN",.84,1250000.13,2,1,0)
PROBLEM: 
"KRN",.84,1250000.131,-1)
0^131
"KRN",.84,1250000.131,0)
1250000.131^2
"KRN",.84,1250000.131,2,0)
^^2^2^3121011^
"KRN",.84,1250000.131,2,1,0)
 
"KRN",.84,1250000.131,2,2,0)
Problem does not exist in this category!
"KRN",.84,1250000.132,-1)
0^132
"KRN",.84,1250000.132,0)
1250000.132^2^y
"KRN",.84,1250000.132,2,0)
^.844^1^1^3121019^^
"KRN",.84,1250000.132,2,1,0)
|TAB|< Nothing removed! >
"KRN",.84,1250000.133,-1)
0^133
"KRN",.84,1250000.133,0)
1250000.133^2^y
"KRN",.84,1250000.133,2,0)
^^1^1^3121011^
"KRN",.84,1250000.133,2,1,0)
Problem #|1| does not exist in this category!
"KRN",.84,1250000.134,-1)
0^134
"KRN",.84,1250000.134,0)
1250000.134^2^y
"KRN",.84,1250000.134,2,0)
^.844^2^2^3121011^^
"KRN",.84,1250000.134,2,1,0)
 
"KRN",.84,1250000.134,2,2,0)
>>>  Problem #|1|
"KRN",.84,1250000.135,-1)
0^135
"KRN",.84,1250000.135,0)
1250000.135^2
"KRN",.84,1250000.135,2,0)
^^3^3^3121011^
"KRN",.84,1250000.135,2,1,0)
 
"KRN",.84,1250000.135,2,2,0)
>>>  The IB Encounter Form utility is not available.
"KRN",.84,1250000.135,2,3,0)
 
"KRN",.84,1250000.136,-1)
0^136
"KRN",.84,1250000.136,0)
1250000.136^2
"KRN",.84,1250000.136,2,0)
^^3^3^3121011^
"KRN",.84,1250000.136,2,1,0)
 
"KRN",.84,1250000.136,2,2,0)
No problems found. Please select another form.
"KRN",.84,1250000.136,2,3,0)
 
"KRN",.84,1250000.137,-1)
0^137
"KRN",.84,1250000.137,0)
1250000.137^3
"KRN",.84,1250000.137,2,0)
^^2^2^3121011^
"KRN",.84,1250000.137,2,1,0)
Enter the name you wish to give this list; use meaningful
"KRN",.84,1250000.137,2,2,0)
text, as it will be used as a title when presenting the list.
"KRN",.84,1250000.138,-1)
0^138
"KRN",.84,1250000.138,0)
1250000.138^2
"KRN",.84,1250000.138,2,0)
^^2^2^3121011^
"KRN",.84,1250000.138,2,1,0)
 
"KRN",.84,1250000.138,2,2,0)
>>>  Please create a new selection list in which to store these problems:
"KRN",.84,1250000.139,-1)
0^139
"KRN",.84,1250000.139,0)
1250000.139^2
"KRN",.84,1250000.139,2,0)
^^2^2^3121011^
"KRN",.84,1250000.139,2,1,0)
There is already a list by this name!
"KRN",.84,1250000.139,2,2,0)
 
"KRN",.84,1250000.14,-1)
0^140
"KRN",.84,1250000.14,0)
1250000.14^1
"KRN",.84,1250000.14,2,0)
^^2^2^3121011^
"KRN",.84,1250000.14,2,1,0)
 
"KRN",.84,1250000.14,2,2,0)
ERROR -- Cannot create new list!
"KRN",.84,1250000.141,-1)
0^141
"KRN",.84,1250000.141,0)
1250000.141^2^y
"KRN",.84,1250000.141,2,0)
^.844^2^2^3130312^^^^
"KRN",.84,1250000.141,2,1,0)
 
"KRN",.84,1250000.141,2,2,0)
Copying problems from |1| form into |2| list 
"KRN",.84,1250000.142,-1)
0^142
"KRN",.84,1250000.142,0)
1250000.142^3^y
"KRN",.84,1250000.142,2,0)
^^9^9^3121011^
"KRN",.84,1250000.142,2,1,0)
|TAB|You may take a variety of actions from this prompt. To update
"KRN",.84,1250000.142,2,2,0)
|TAB|the ICD Code assigned to a problem, you may choose to search
"KRN",.84,1250000.142,2,3,0)
|TAB|either the ICD Diagnosis file or the Clinical Lexicon for a
"KRN",.84,1250000.142,2,4,0)
|TAB|match; the code of the entry you select will be assigned to the
"KRN",.84,1250000.142,2,5,0)
|TAB|current problem in the list. If you need more information on a
"KRN",.84,1250000.142,2,6,0)
|TAB|problem, select Detailed Disply. To see a listing of
"KRN",.84,1250000.142,2,7,0)
|TAB|actions that facilitate navigating the list, enter '??'.
"KRN",.84,1250000.142,2,8,0)
 
"KRN",.84,1250000.142,2,9,0)
Press <return> to continue ...
"KRN",.84,1250000.143,-1)
0^143
"KRN",.84,1250000.143,0)
1250000.143^2^y
"KRN",.84,1250000.143,2,0)
^^2^2^3121011^
"KRN",.84,1250000.143,2,1,0)
Problem #|1|: |2|
"KRN",.84,1250000.143,2,2,0)
Enter ICD CODE or DESCRIPTION: 
"KRN",.84,1250000.144,-1)
0^144
"KRN",.84,1250000.144,0)
1250000.144^3
"KRN",.84,1250000.144,2,0)
^^1^1^3121011^
"KRN",.84,1250000.144,2,1,0)
Enter a new code number or a brief free text description on which to search
"KRN",.84,1250000.145,-1)
0^145
"KRN",.84,1250000.145,0)
1250000.145^2
"KRN",.84,1250000.145,2,0)
^^1^1^3121011^
"KRN",.84,1250000.145,2,1,0)
LIST NAME: 
"KRN",.84,1250000.147,-1)
0^146
"KRN",.84,1250000.147,0)
1250000.147^2
"KRN",.84,1250000.147,2,0)
^^1^1^3121016^
"KRN",.84,1250000.147,2,1,0)
(S)ave this data, (E)dit it, or (Q)uit w/o saving? 
"KRN",.84,1250000.148,-1)
0^147
"KRN",.84,1250000.148,0)
1250000.148^3^y
"KRN",.84,1250000.148,2,0)
^^6^6^3121016^
"KRN",.84,1250000.148,2,1,0)
 
"KRN",.84,1250000.148,2,2,0)
|TAB|Select SAVE to save this problem as listed and
"KRN",.84,1250000.148,2,3,0)
|TAB|continue; enter E to change any of these values,
"KRN",.84,1250000.148,2,4,0)
|TAB|or Q to exit to the problem list without saving.
"KRN",.84,1250000.148,2,5,0)
 
"KRN",.84,1250000.148,2,6,0)
Press <return> to redisplay the problem values ...
"KRN",.84,1250000.149,-1)
0^148
"KRN",.84,1250000.149,0)
1250000.149^2^y
"KRN",.84,1250000.149,2,0)
^^1^1^3121016^
"KRN",.84,1250000.149,2,1,0)
<|1| Comment appended>
"KRN",.84,1250000.15,-1)
0^149
"KRN",.84,1250000.15,0)
1250000.15^2^y
"KRN",.84,1250000.15,2,0)
^^1^1^3121016^
"KRN",.84,1250000.15,2,1,0)
<|1| Comments appended>
"KRN",.84,1250000.151,-1)
0^150
"KRN",.84,1250000.151,0)
1250000.151^2^y
"KRN",.84,1250000.151,2,0)
^^1^1^3121016^
"KRN",.84,1250000.151,2,1,0)
  Problem: |1|
"KRN",.84,1250000.152,-1)
0^151
"KRN",.84,1250000.152,0)
1250000.152^2^y
"KRN",.84,1250000.152,2,0)
^.844^1^1^3121019^^
"KRN",.84,1250000.152,2,1,0)
    Onset: |1|
"KRN",.84,1250000.153,-1)
0^152
"KRN",.84,1250000.153,0)
1250000.153^2^y
"KRN",.84,1250000.153,2,0)
^^1^1^3121016^
"KRN",.84,1250000.153,2,1,0)
SC Condition: |1|
"KRN",.84,1250000.154,-1)
0^153
"KRN",.84,1250000.154,0)
1250000.154^2^y
"KRN",.84,1250000.154,2,0)
^^1^1^3121016^
"KRN",.84,1250000.154,2,1,0)
   Status: |1|
"KRN",.84,1250000.155,-1)
0^154
"KRN",.84,1250000.155,0)
1250000.155^2^y
"KRN",.84,1250000.155,2,0)
^.844^1^1^3121025^^
"KRN",.84,1250000.155,2,1,0)
, Resolved |1|
"KRN",.84,1250000.156,-1)
0^155
"KRN",.84,1250000.156,0)
1250000.156^2^y
"KRN",.84,1250000.156,2,0)
^.844^1^1^3130311^^
"KRN",.84,1250000.156,2,1,0)
Exposure: |1|
"KRN",.84,1250000.157,-1)
0^156
"KRN",.84,1250000.157,0)
1250000.157^2^y
"KRN",.84,1250000.157,2,0)
^^1^1^3121016^
"KRN",.84,1250000.157,2,1,0)
<none>
"KRN",.84,1250000.158,-1)
0^157
"KRN",.84,1250000.158,0)
1250000.158^2^y
"KRN",.84,1250000.158,2,0)
^^1^1^3121016^
"KRN",.84,1250000.158,2,1,0)
  Service: |1|
"KRN",.84,1250000.159,-1)
0^158
"KRN",.84,1250000.159,0)
1250000.159^2^y
"KRN",.84,1250000.159,2,0)
^^1^1^3121016^
"KRN",.84,1250000.159,2,1,0)
   Clinic: |1|
"KRN",.84,1250000.16,-1)
0^159
"KRN",.84,1250000.16,0)
1250000.16^2^y
"KRN",.84,1250000.16,2,0)
^^1^1^3121016^
"KRN",.84,1250000.16,2,1,0)
 Recorded: |1| by |2|
"KRN",.84,1250000.161,-1)
0^160
"KRN",.84,1250000.161,0)
1250000.161^2^y
"KRN",.84,1250000.161,2,0)
^^1^1^3121016^
"KRN",.84,1250000.161,2,1,0)
ICD Code: |1|
"KRN",.84,1250000.162,-1)
0^161
"KRN",.84,1250000.162,0)
1250000.162^2
"KRN",.84,1250000.162,2,0)
^.844^3^3^3121019^^
"KRN",.84,1250000.162,2,1,0)
 
"KRN",.84,1250000.162,2,2,0)
There are no more problems that have been selected to view!
"KRN",.84,1250000.162,2,3,0)
 
"KRN",.84,1250000.163,-1)
0^162
"KRN",.84,1250000.163,0)
1250000.163^2^y
"KRN",.84,1250000.163,2,0)
^.844^3^3^3130311^^
"KRN",.84,1250000.163,2,1,0)
 
"KRN",.84,1250000.163,2,2,0)
Retrieving current data for problem #|1| ...
"KRN",.84,1250000.163,2,3,0)
 
"KRN",.84,1250000.164,-1)
0^163
"KRN",.84,1250000.164,0)
1250000.164^2
"KRN",.84,1250000.164,2,0)
^^1^1^3121016^
"KRN",.84,1250000.164,2,1,0)
date unknown
"KRN",.84,1250000.165,-1)
0^164
"KRN",.84,1250000.165,0)
1250000.165^2^y
"KRN",.84,1250000.165,2,0)
^.844^1^1^3121030^^
"KRN",.84,1250000.165,2,1,0)
 Provider: |1|
"KRN",.84,1250000.167,-1)
0^165
"KRN",.84,1250000.167,0)
1250000.167^2^y
"KRN",.84,1250000.167,2,0)
^^1^1^3121016^
"KRN",.84,1250000.167,2,1,0)
  Entered: |1|, by |2|
"KRN",.84,1250000.168,-1)
0^166
"KRN",.84,1250000.168,0)
1250000.168^2
"KRN",.84,1250000.168,2,0)
^^1^1^3121016^
"KRN",.84,1250000.168,2,1,0)
  <unconfirmed>
"KRN",.84,1250000.169,-1)
0^167
"KRN",.84,1250000.169,0)
1250000.169^2^y
"KRN",.84,1250000.169,2,0)
^^1^1^3121016^
"KRN",.84,1250000.169,2,1,0)
Comments:
"KRN",.84,1250000.17,-1)
0^168
"KRN",.84,1250000.17,0)
1250000.17^2
"KRN",.84,1250000.17,2,0)
^.844^1^1^3121023^^
"KRN",.84,1250000.17,2,1,0)
   <None>
"KRN",.84,1250000.171,-1)
0^169
"KRN",.84,1250000.171,0)
1250000.171^2
"KRN",.84,1250000.171,2,0)
^.844^1^1^3121023^^
"KRN",.84,1250000.171,2,1,0)
History:
"KRN",.84,1250000.172,-1)
0^170
"KRN",.84,1250000.172,0)
1250000.172^2
"KRN",.84,1250000.172,2,0)
^^1^1^3121016^
"KRN",.84,1250000.172,2,1,0)
   <No changes>
"KRN",.84,1250000.173,-1)
0^171
"KRN",.84,1250000.173,0)
1250000.173^2
"KRN",.84,1250000.173,2,0)
^.844^1^1^3121023^^
"KRN",.84,1250000.173,2,1,0)
 removed by 
"KRN",.84,1250000.174,-1)
0^172
"KRN",.84,1250000.174,0)
1250000.174^2
"KRN",.84,1250000.174,2,0)
^^1^1^3121016^
"KRN",.84,1250000.174,2,1,0)
 changed by 
"KRN",.84,1250000.175,-1)
0^173
"KRN",.84,1250000.175,0)
1250000.175^2^y
"KRN",.84,1250000.175,2,0)
^.844^1^1^3121023^^
"KRN",.84,1250000.175,2,1,0)
|1|: NOTE |2|:
"KRN",.84,1250000.176,-1)
0^174
"KRN",.84,1250000.176,0)
1250000.176^2^y
"KRN",.84,1250000.176,2,0)
^.844^1^1^3130318^^^
"KRN",.84,1250000.176,2,1,0)
|1|: PROBLEM removed by |2|
"KRN",.84,1250000.177,-1)
0^175
"KRN",.84,1250000.177,0)
1250000.177^2^y
"KRN",.84,1250000.177,2,0)
^^1^1^3121023^
"KRN",.84,1250000.177,2,1,0)
|1|: PROBLEM verified by |2|
"KRN",.84,1250000.178,-1)
0^176
"KRN",.84,1250000.178,0)
1250000.178^2^y
"KRN",.84,1250000.178,2,0)
^^1^1^3121023^
"KRN",.84,1250000.178,2,1,0)
|1|: PROBLEM placed back on list by |2|
"KRN",.84,1250000.179,-1)
0^177
"KRN",.84,1250000.179,0)
1250000.179^2^y
"KRN",.84,1250000.179,2,0)
^^1^1^3121023^
"KRN",.84,1250000.179,2,1,0)
|1|: |2| changed by |3|
"KRN",.84,1250000.18,-1)
0^178
"KRN",.84,1250000.18,0)
1250000.18^2
"KRN",.84,1250000.18,2,0)
^^1^1^3121023^
"KRN",.84,1250000.18,2,1,0)
from 
"KRN",.84,1250000.181,-1)
0^179
"KRN",.84,1250000.181,0)
1250000.181^2
"KRN",.84,1250000.181,2,0)
^^1^1^3121023^
"KRN",.84,1250000.181,2,1,0)
 to 
"KRN",.84,1250000.182,-1)
0^180
"KRN",.84,1250000.182,0)
1250000.182^2
"KRN",.84,1250000.182,2,0)
^^1^1^3121023^
"KRN",.84,1250000.182,2,1,0)
ACTIVE
"KRN",.84,1250000.183,-1)
0^181
"KRN",.84,1250000.183,0)
1250000.183^2
"KRN",.84,1250000.183,2,0)
^^1^1^3121023^
"KRN",.84,1250000.183,2,1,0)
INACTIVE
"KRN",.84,1250000.184,-1)
0^182
"KRN",.84,1250000.184,0)
1250000.184^2
"KRN",.84,1250000.184,2,0)
^^1^1^3121023^
"KRN",.84,1250000.184,2,1,0)
UNKNOWN
"KRN",.84,1250000.185,-1)
0^183
"KRN",.84,1250000.185,0)
1250000.185^2
"KRN",.84,1250000.185,2,0)
^^1^1^3121023^
"KRN",.84,1250000.185,2,1,0)
ACUTE
"KRN",.84,1250000.186,-1)
0^184
"KRN",.84,1250000.186,0)
1250000.186^2
"KRN",.84,1250000.186,2,0)
^^1^1^3121023^
"KRN",.84,1250000.186,2,1,0)
CHRONIC
"KRN",.84,1250000.187,-1)
0^185
"KRN",.84,1250000.187,0)
1250000.187^2
"KRN",.84,1250000.187,2,0)
^^1^1^3121023^
"KRN",.84,1250000.187,2,1,0)
UNSPECIFIED
"KRN",.84,1250000.188,-1)
0^186
"KRN",.84,1250000.188,0)
1250000.188^2
"KRN",.84,1250000.188,2,0)
^^1^1^3121023^
"KRN",.84,1250000.188,2,1,0)
YES
"KRN",.84,1250000.189,-1)
0^187
"KRN",.84,1250000.189,0)
1250000.189^2
"KRN",.84,1250000.189,2,0)
^^1^1^3121023^
"KRN",.84,1250000.189,2,1,0)
NO
"KRN",.84,1250000.19,-1)
0^188
"KRN",.84,1250000.19,0)
1250000.19^2^y
"KRN",.84,1250000.19,2,0)
^^1^1^3121023^
"KRN",.84,1250000.19,2,1,0)
Last Updated: |1|
"KRN",.84,1250000.191,-1)
0^189
"KRN",.84,1250000.191,0)
1250000.191^3^y
"KRN",.84,1250000.191,2,0)
^.844^7^7^3121023^^
"KRN",.84,1250000.191,2,1,0)
|TAB|You may view detailed information here on this problem;
"KRN",.84,1250000.191,2,2,0)
|TAB|more data may be available by entering 'Next Screen'.
"KRN",.84,1250000.191,2,3,0)
|TAB|If you have selected multiple problems to view, you may
"KRN",.84,1250000.191,2,4,0)
|TAB|enter 'Continue to Next Selected Problem'; to return to
"KRN",.84,1250000.191,2,5,0)
|TAB|the patient's problem list, enter 'Quit to Problem List'.
"KRN",.84,1250000.191,2,6,0)
 
"KRN",.84,1250000.191,2,7,0)
Press <return> to continue ... 
"KRN",.84,1250000.192,-1)
0^190
"KRN",.84,1250000.192,0)
1250000.192^2
"KRN",.84,1250000.192,2,0)
^^1^1^3121023^
"KRN",.84,1250000.192,2,1,0)
Continue to Next Selected Problem
"KRN",.84,1250000.193,-1)
0^191
"KRN",.84,1250000.193,0)
1250000.193^2
"KRN",.84,1250000.193,2,0)
^^1^1^3121023^
"KRN",.84,1250000.193,2,1,0)
Quit to Problem List
"KRN",.84,1250000.194,-1)
0^192
"KRN",.84,1250000.194,0)
1250000.194^1
"KRN",.84,1250000.194,2,0)
^^3^3^3121023^
"KRN",.84,1250000.194,2,1,0)
 
"KRN",.84,1250000.194,2,2,0)
ERROR -- Cannot continue ... Returning to Problem List.
"KRN",.84,1250000.194,2,3,0)
 
"KRN",.84,1250000.195,-1)
0^193
"KRN",.84,1250000.195,0)
1250000.195^2
"KRN",.84,1250000.195,2,0)
^.844^2^2^3121023^^^
"KRN",.84,1250000.195,2,1,0)
 
"KRN",.84,1250000.195,2,2,0)
Retrieving current data for problem 
"KRN",.84,1250000.196,-1)
0^194
"KRN",.84,1250000.196,0)
1250000.196^2^y
"KRN",.84,1250000.196,2,0)
^^1^1^3121022^
"KRN",.84,1250000.196,2,1,0)
1  Problem:  |1|
"KRN",.84,1250000.197,-1)
0^195
"KRN",.84,1250000.197,0)
1250000.197^2
"KRN",.84,1250000.197,2,0)
^.844^1^1^3121105^^
"KRN",.84,1250000.197,2,1,0)
2  Onset:    
"KRN",.84,1250000.198,-1)
0^196
"KRN",.84,1250000.198,0)
1250000.198^2
"KRN",.84,1250000.198,2,0)
^.844^1^1^3121105^^
"KRN",.84,1250000.198,2,1,0)
unknown
"KRN",.84,1250000.199,-1)
0^197
"KRN",.84,1250000.199,0)
1250000.199^2^y
"KRN",.84,1250000.199,2,0)
^.844^1^1^3121105^^
"KRN",.84,1250000.199,2,1,0)
3  Status:   |1|
"KRN",.84,1250000.2,-1)
0^198
"KRN",.84,1250000.2,0)
1250000.2^2^y
"KRN",.84,1250000.2,2,0)
^^1^1^3121022^
"KRN",.84,1250000.2,2,1,0)
4  Provider: |1|
"KRN",.84,1250000.201,-1)
0^199
"KRN",.84,1250000.201,0)
1250000.201^2^y
"KRN",.84,1250000.201,2,0)
^^1^1^3121022^
"KRN",.84,1250000.201,2,1,0)
5  Service:  |1|
"KRN",.84,1250000.202,-1)
0^200
"KRN",.84,1250000.202,0)
1250000.202^2^y
"KRN",.84,1250000.202,2,0)
^^1^1^3121022^
"KRN",.84,1250000.202,2,1,0)
5  Clinic:   |1|
"KRN",.84,1250000.203,-1)
0^201
"KRN",.84,1250000.203,0)
1250000.203^2^y
"KRN",.84,1250000.203,2,0)
^^1^1^3121022^
"KRN",.84,1250000.203,2,1,0)
6  ICD Code: |1|
"KRN",.84,1250000.204,-1)
0^202
"KRN",.84,1250000.204,0)
1250000.204^2
"KRN",.84,1250000.204,2,0)
^^1^1^3121022^
"KRN",.84,1250000.204,2,1,0)
<Deleted>
"KRN",.84,1250000.205,-1)
0^203
"KRN",.84,1250000.205,0)
1250000.205^3^y
"KRN",.84,1250000.205,2,0)
^.844^9^9^3121023^^
"KRN",.84,1250000.205,2,1,0)
 
"KRN",.84,1250000.205,2,2,0)
|TAB|You may change one or more of the above listed values describing
"KRN",.84,1250000.205,2,3,0)
|TAB|this problem by entering its display number (1-|1|) at the prompt;
"KRN",.84,1250000.205,2,4,0)
|TAB|you may enter a new value, or '@' to delete an existing value.
"KRN",.84,1250000.205,2,5,0)
 
"KRN",.84,1250000.205,2,6,0)
|TAB|Enter RM to remove this problem from the patient's list completely,
"KRN",.84,1250000.205,2,7,0)
|TAB|SC to save your changes, or Q to simply return to the problem list.
"KRN",.84,1250000.205,2,8,0)
 
"KRN",.84,1250000.205,2,9,0)
Press <return> to continue ... 
"KRN",.84,1250000.206,-1)
0^204
"KRN",.84,1250000.206,0)
1250000.206^2
"KRN",.84,1250000.206,2,0)
^.844^2^2^3121023^^
"KRN",.84,1250000.206,2,1,0)
 
"KRN",.84,1250000.206,2,2,0)
>>>  THIS PROBLEM HAS CHANGED!!
"KRN",.84,1250000.207,-1)
0^205
"KRN",.84,1250000.207,0)
1250000.207^2
"KRN",.84,1250000.207,2,0)
^^1^1^3121022^
"KRN",.84,1250000.207,2,1,0)
Do you want to save these changes
"KRN",.84,1250000.208,-1)
0^206
"KRN",.84,1250000.208,0)
1250000.208^3^y
"KRN",.84,1250000.208,2,0)
^^3^3^3121022^
"KRN",.84,1250000.208,2,1,0)
|TAB|Enter YES or <return> to save the current values listed above
"KRN",.84,1250000.208,2,2,0)
|TAB|describing this problem; enter NO to exit without saving.
"KRN",.84,1250000.208,2,3,0)
 
"KRN",.84,1250000.209,-1)
0^207
"KRN",.84,1250000.209,0)
1250000.209^2
"KRN",.84,1250000.209,2,0)
^.844^1^1^3121105^^
"KRN",.84,1250000.209,2,1,0)
DATE OF ONSET: 
"KRN",.84,1250000.21,-1)
0^208
"KRN",.84,1250000.21,0)
1250000.21^2
"KRN",.84,1250000.21,2,0)
^.844^1^1^3121105^^
"KRN",.84,1250000.21,2,1,0)
Enter the date this problem was first observed, as precisely as known.
"KRN",.84,1250000.211,-1)
0^209
"KRN",.84,1250000.211,0)
1250000.211^1
"KRN",.84,1250000.211,2,0)
^.844^2^2^3121023^^^
"KRN",.84,1250000.211,2,1,0)
 
"KRN",.84,1250000.211,2,2,0)
Date of Onset cannot be later that the date the problem was entered!
"KRN",.84,1250000.212,-1)
0^210
"KRN",.84,1250000.212,0)
1250000.212^1
"KRN",.84,1250000.212,2,0)
^^2^2^3121022^
"KRN",.84,1250000.212,2,1,0)
 
"KRN",.84,1250000.212,2,2,0)
Date of Onset cannot be later that the date of death!
"KRN",.84,1250000.213,-1)
0^211
"KRN",.84,1250000.213,0)
1250000.213^2
"KRN",.84,1250000.213,2,0)
^^1^1^3121022^
"KRN",.84,1250000.213,2,1,0)
DATE RECORDED: 
"KRN",.84,1250000.214,-1)
0^212
"KRN",.84,1250000.214,0)
1250000.214^3
"KRN",.84,1250000.214,2,0)
^^1^1^3121022^
"KRN",.84,1250000.214,2,1,0)
Enter the date this problem was first recorded, as precisely as known.
"KRN",.84,1250000.215,-1)
0^213
"KRN",.84,1250000.215,0)
1250000.215^1
"KRN",.84,1250000.215,2,0)
^^2^2^3121022^
"KRN",.84,1250000.215,2,1,0)
 
"KRN",.84,1250000.215,2,2,0)
Date Recorded cannot be later that the problem was enetered!
"KRN",.84,1250000.216,-1)
0^214
"KRN",.84,1250000.216,0)
1250000.216^2^y
"KRN",.84,1250000.216,2,0)
^.844^2^2^3121023^^
"KRN",.84,1250000.216,2,1,0)
 
"KRN",.84,1250000.216,2,2,0)
>>>  Currently known service-connection data for |1|:
"KRN",.84,1250000.217,-1)
0^215
"KRN",.84,1250000.217,0)
1250000.217^2
"KRN",.84,1250000.217,2,0)
^^1^1^3121022^
"KRN",.84,1250000.217,2,1,0)
Patient has no service-connected condition !! 
"KRN",.84,1250000.218,-1)
0^216
"KRN",.84,1250000.218,0)
1250000.218^2
"KRN",.84,1250000.218,2,0)
^^1^1^3121022^
"KRN",.84,1250000.218,2,1,0)
Is this problem related to a service-connected condition? 
"KRN",.84,1250000.219,-1)
0^217
"KRN",.84,1250000.219,0)
1250000.219^3
"KRN",.84,1250000.219,2,0)
^^2^2^3121022^
"KRN",.84,1250000.219,2,1,0)
If this problem is due to a service-connected condition, enter YES;
"KRN",.84,1250000.219,2,2,0)
press <return> and leave blank if this is unknown.
"KRN",.84,1250000.22,-1)
0^218
"KRN",.84,1250000.22,0)
1250000.22^2
"KRN",.84,1250000.22,2,0)
^^1^1^3121022^
"KRN",.84,1250000.22,2,1,0)
SERVICE: 
"KRN",.84,1250000.221,-1)
0^219
"KRN",.84,1250000.221,0)
1250000.221^2
"KRN",.84,1250000.221,2,0)
^^1^1^3121022^
"KRN",.84,1250000.221,2,1,0)
CLINIC: 
"KRN",.84,1250000.222,-1)
0^220
"KRN",.84,1250000.222,0)
1250000.222^2
"KRN",.84,1250000.222,2,0)
^.844^1^1^3121023^^
"KRN",.84,1250000.222,2,1,0)
Enter the clinic to be associated with this problem.
"KRN",.84,1250000.223,-1)
0^221
"KRN",.84,1250000.223,0)
1250000.223^3
"KRN",.84,1250000.223,2,0)
^^1^1^3121022^
"KRN",.84,1250000.223,2,1,0)
Enter the clinical service to be associated with this problem.
"KRN",.84,1250000.224,-1)
0^222
"KRN",.84,1250000.224,0)
1250000.224^1^y
"KRN",.84,1250000.224,2,0)
^.844^2^2^3121023^^^
"KRN",.84,1250000.224,2,1,0)
|TAB|Only clinics are allowed!
"KRN",.84,1250000.224,2,2,0)
 
"KRN",.84,1250000.225,-1)
0^223
"KRN",.84,1250000.225,0)
1250000.225^1^y
"KRN",.84,1250000.225,2,0)
^^2^2^3121022^
"KRN",.84,1250000.225,2,1,0)
|TAB|Only clinical services are allowed!
"KRN",.84,1250000.225,2,2,0)
 
"KRN",.84,1250000.226,-1)
0^224
"KRN",.84,1250000.226,0)
1250000.226^2
"KRN",.84,1250000.226,2,0)
^^1^1^3121022^
"KRN",.84,1250000.226,2,1,0)
RECORDING PROVIDER: 
"KRN",.84,1250000.227,-1)
0^225
"KRN",.84,1250000.227,0)
1250000.227^3
"KRN",.84,1250000.227,2,0)
^^1^1^3121022^
"KRN",.84,1250000.227,2,1,0)
Enter the name of the provider responsible for the recording of this data.
"KRN",.84,1250000.228,-1)
0^226
"KRN",.84,1250000.228,0)
1250000.228^2
"KRN",.84,1250000.228,2,0)
^^1^1^3121022^
"KRN",.84,1250000.228,2,1,0)
PROVIDER: 
"KRN",.84,1250000.229,-1)
0^227
"KRN",.84,1250000.229,0)
1250000.229^3
"KRN",.84,1250000.229,2,0)
^^1^1^3121022^
"KRN",.84,1250000.229,2,1,0)
Enter the name of the local provider treating this problem.
"KRN",.84,1250000.23,-1)
0^228
"KRN",.84,1250000.23,0)
1250000.23^2
"KRN",.84,1250000.23,2,0)
^^1^1^3121022^
"KRN",.84,1250000.23,2,1,0)
ICD CODE: 
"KRN",.84,1250000.231,-1)
0^229
"KRN",.84,1250000.231,0)
1250000.231^3
"KRN",.84,1250000.231,2,0)
^^1^1^3121022^
"KRN",.84,1250000.231,2,1,0)
Enter the ICD code to be associated with this problem
"KRN",.84,1250000.232,-1)
0^230
"KRN",.84,1250000.232,0)
1250000.232^1
"KRN",.84,1250000.232,2,0)
^^3^3^3121022^
"KRN",.84,1250000.232,2,1,0)
 
"KRN",.84,1250000.232,2,2,0)
ICD Code may not be deleted!
"KRN",.84,1250000.232,2,3,0)
 
"KRN",.84,1250000.233,-1)
0^231
"KRN",.84,1250000.233,0)
1250000.233^1
"KRN",.84,1250000.233,2,0)
^^3^3^3121022^
"KRN",.84,1250000.233,2,1,0)
 
"KRN",.84,1250000.233,2,2,0)
This problem has an inactive ICD code. Please edit the problem before using.
"KRN",.84,1250000.233,2,3,0)
 
"KRN",.84,1250000.234,-1)
0^232
"KRN",.84,1250000.234,0)
1250000.234^2
"KRN",.84,1250000.234,2,0)
^^1^1^3121022^
"KRN",.84,1250000.234,2,1,0)
COMMENT (<60 char): 
"KRN",.84,1250000.235,-1)
0^233
"KRN",.84,1250000.235,0)
1250000.235^2
"KRN",.84,1250000.235,2,0)
^^1^1^3121022^
"KRN",.84,1250000.235,2,1,0)
ANOTHER COMMENT: 
"KRN",.84,1250000.236,-1)
0^234
"KRN",.84,1250000.236,0)
1250000.236^2
"KRN",.84,1250000.236,2,0)
^^4^4^3121022^
"KRN",.84,1250000.236,2,1,0)
 
"KRN",.84,1250000.236,2,2,0)
CAUTION:  This problem will be completely removed
"KRN",.84,1250000.236,2,3,0)
          from this patient's list!!
"KRN",.84,1250000.236,2,4,0)
 
"KRN",.84,1250000.237,-1)
0^235
"KRN",.84,1250000.237,0)
1250000.237^2^y
"KRN",.84,1250000.237,2,0)
^^4^4^3121022^
"KRN",.84,1250000.237,2,1,0)
 
"KRN",.84,1250000.237,2,2,0)
CAUTION:  These |1| problems will be completely removed
"KRN",.84,1250000.237,2,3,0)
          from this patient's list!!
"KRN",.84,1250000.237,2,4,0)
 
"KRN",.84,1250000.238,-1)
0^236
"KRN",.84,1250000.238,0)
1250000.238^2
"KRN",.84,1250000.238,2,0)
^^1^1^3121022^
"KRN",.84,1250000.238,2,1,0)
Are you sure? 
"KRN",.84,1250000.239,-1)
0^237
"KRN",.84,1250000.239,0)
1250000.239^3
"KRN",.84,1250000.239,2,0)
^^3^3^3121022^
"KRN",.84,1250000.239,2,1,0)
Enter YES to delete this problem from the current patient's list.
"KRN",.84,1250000.239,2,2,0)
DO NOT use this option to remove problems from your currently
"KRN",.84,1250000.239,2,3,0)
displayed view of the Problem List!!
"KRN",.84,1250000.24,-1)
0^238
"KRN",.84,1250000.24,0)
1250000.24^3
"KRN",.84,1250000.24,2,0)
^^3^3^3121022^
"KRN",.84,1250000.24,2,1,0)
Enter YES to delete these problems from the current patient's list.
"KRN",.84,1250000.24,2,2,0)
DO NOT use this option to remove problems from your currently
"KRN",.84,1250000.24,2,3,0)
displayed view of the Problem List!!
"KRN",.84,1250000.241,-1)
0^239
"KRN",.84,1250000.241,0)
1250000.241^2
"KRN",.84,1250000.241,2,0)
^^5^5^3121022^
"KRN",.84,1250000.241,2,1,0)
...... removed!
"KRN",.84,1250000.241,2,2,0)
 
"KRN",.84,1250000.241,2,3,0)
 
"KRN",.84,1250000.241,2,4,0)
Returning to Problem List.
"KRN",.84,1250000.241,2,5,0)
 
"KRN",.84,1250000.242,-1)
0^240
"KRN",.84,1250000.242,0)
1250000.242^2
"KRN",.84,1250000.242,2,0)
^^3^3^3121022^
"KRN",.84,1250000.242,2,1,0)
 
"KRN",.84,1250000.242,2,2,0)
This problem does not require verification.
"KRN",.84,1250000.242,2,3,0)
 
"KRN",.84,1250000.243,-1)
0^241
"KRN",.84,1250000.243,0)
1250000.243^2
"KRN",.84,1250000.243,2,0)
^^1^1^3121022^
"KRN",.84,1250000.243,2,1,0)
... verified!
"KRN",.84,1250000.244,-1)
0^242
"KRN",.84,1250000.244,0)
1250000.244^2
"KRN",.84,1250000.244,2,0)
^^1^1^3121022^
"KRN",.84,1250000.244,2,1,0)
Choose from: 
"KRN",.84,1250000.245,-1)
0^243
"KRN",.84,1250000.245,0)
1250000.245^2
"KRN",.84,1250000.245,2,0)
^^1^1^3121022^
"KRN",.84,1250000.245,2,1,0)
      ... more, or ^ to stop: 
"KRN",.84,1250000.246,-1)
0^244
"KRN",.84,1250000.246,0)
1250000.246^1
"KRN",.84,1250000.246,2,0)
^^1^1^3121022^
"KRN",.84,1250000.246,2,1,0)
  INVALID DATE
"KRN",.84,1250000.247,-1)
0^245
"KRN",.84,1250000.247,0)
1250000.247^1
"KRN",.84,1250000.247,2,0)
^^3^3^3121022^
"KRN",.84,1250000.247,2,1,0)
 
"KRN",.84,1250000.247,2,2,0)
Date cannot be in the future!
"KRN",.84,1250000.247,2,3,0)
 
"KRN",.84,1250000.248,-1)
0^246
"KRN",.84,1250000.248,0)
1250000.248^3
"KRN",.84,1250000.248,2,0)
^^7^7^3121022^
"KRN",.84,1250000.248,2,1,0)
 
"KRN",.84,1250000.248,2,2,0)
Examples of valid dates:
"KRN",.84,1250000.248,2,3,0)
   Jan 20 1957 or 20 Jan 57 or 1/20/57 or 012057
"KRN",.84,1250000.248,2,4,0)
   T   (for TODAY,   T-1 (for YESTERDAY),  T-3W (for 3 WEEKS AGO), etc.
"KRN",.84,1250000.248,2,5,0)
You may omit the precise day, such as Jan 1957, or
"KRN",.84,1250000.248,2,6,0)
If the year is omitted, a date in the PAST will be assumed.
"KRN",.84,1250000.248,2,7,0)
 
"KRN",.84,1250000.249,-1)
0^247
"KRN",.84,1250000.249,0)
1250000.249^2
"KRN",.84,1250000.249,2,0)
^^1^1^3121022^
"KRN",.84,1250000.249,2,1,0)
Is this problem related to AGENT ORANGE EXPOSURE?
"KRN",.84,1250000.25,-1)
0^248
"KRN",.84,1250000.25,0)
1250000.25^2
"KRN",.84,1250000.25,2,0)
^^1^1^3121022^
"KRN",.84,1250000.25,2,1,0)
Is this problem related to RADIATION EXPOSURE?
"KRN",.84,1250000.251,-1)
0^249
"KRN",.84,1250000.251,0)
1250000.251^2
"KRN",.84,1250000.251,2,0)
^^1^1^3121022^
"KRN",.84,1250000.251,2,1,0)
Is this problem related to ENVIRONMENTAL CONTAMINANTS EXPOSURE?
"KRN",.84,1250000.252,-1)
0^250
"KRN",.84,1250000.252,0)
1250000.252^2
"KRN",.84,1250000.252,2,0)
^^1^1^3121022^
"KRN",.84,1250000.252,2,1,0)
Is this problem related to HEAD AND/OR NECK CANCER?
"KRN",.84,1250000.253,-1)
0^251
"KRN",.84,1250000.253,0)
1250000.253^2
"KRN",.84,1250000.253,2,0)
^^1^1^3121022^
"KRN",.84,1250000.253,2,1,0)
Is this problem related to MILITARY SEXUAL TRAUMA?
"KRN",.84,1250000.254,-1)
0^252
"KRN",.84,1250000.254,0)
1250000.254^2
"KRN",.84,1250000.254,2,0)
^^1^1^3121022^
"KRN",.84,1250000.254,2,1,0)
Is this problem related to COMBAT VETERAN EXPOSURE?
"KRN",.84,1250000.255,-1)
0^253
"KRN",.84,1250000.255,0)
1250000.255^2
"KRN",.84,1250000.255,2,0)
^^1^1^3121022^
"KRN",.84,1250000.255,2,1,0)
Is this problem related to SHIPBOARD HAZARD AND DEFENSE EXPOSURE?
"KRN",.84,1250000.256,-1)
0^254
"KRN",.84,1250000.256,0)
1250000.256^3
"KRN",.84,1250000.256,2,0)
^^2^2^3121022^
"KRN",.84,1250000.256,2,1,0)
Enter YES if this problem is related in some way to the patient's
"KRN",.84,1250000.256,2,2,0)
exposure to Agent Orange.
"KRN",.84,1250000.257,-1)
0^255
"KRN",.84,1250000.257,0)
1250000.257^3
"KRN",.84,1250000.257,2,0)
^^2^2^3121022^
"KRN",.84,1250000.257,2,1,0)
Enter YES if this problem is related in some way to the patient's
"KRN",.84,1250000.257,2,2,0)
exposure to Radiation.
"KRN",.84,1250000.258,-1)
0^256
"KRN",.84,1250000.258,0)
1250000.258^3
"KRN",.84,1250000.258,2,0)
^^2^2^3121022^
"KRN",.84,1250000.258,2,1,0)
Enter YES if this problem is related in some way to the patient's
"KRN",.84,1250000.258,2,2,0)
exposure to Environmental Contaminants.
"KRN",.84,1250000.259,-1)
0^257
"KRN",.84,1250000.259,0)
1250000.259^3
"KRN",.84,1250000.259,2,0)
^^2^2^3121022^
"KRN",.84,1250000.259,2,1,0)
Enter YES if this problem is related in some way to the patient's
"KRN",.84,1250000.259,2,2,0)
diagnosed Head and/or Neck Cancer.
"KRN",.84,1250000.26,-1)
0^258
"KRN",.84,1250000.26,0)
1250000.26^3
"KRN",.84,1250000.26,2,0)
^^2^2^3121022^
"KRN",.84,1250000.26,2,1,0)
Enter YES if this problem is related in some way to the patient's
"KRN",.84,1250000.26,2,2,0)
reported Military Sexual Trauma.
"KRN",.84,1250000.261,-1)
0^259
"KRN",.84,1250000.261,0)
1250000.261^3
"KRN",.84,1250000.261,2,0)
^^2^2^3121022^
"KRN",.84,1250000.261,2,1,0)
Enter YES if this problem is related in some way to the patient's
"KRN",.84,1250000.261,2,2,0)
exposure to Combat Veteran.
"KRN",.84,1250000.262,-1)
0^260
"KRN",.84,1250000.262,0)
1250000.262^3
"KRN",.84,1250000.262,2,0)
^^2^2^3121022^
"KRN",.84,1250000.262,2,1,0)
Enter YES if this problem is related in some way to the patient's
"KRN",.84,1250000.262,2,2,0)
exposure to Shipboard Hazard and Defense.
"KRN",.84,1250000.263,-1)
0^261
"KRN",.84,1250000.263,0)
1250000.263^2
"KRN",.84,1250000.263,2,0)
^^1^1^3121022^
"KRN",.84,1250000.263,2,1,0)
Enter the number of the item(s) you wish to change
"KRN",.84,1250000.264,-1)
0^262
"KRN",.84,1250000.264,0)
1250000.264^2
"KRN",.84,1250000.264,2,0)
^^1^1^3121022^
"KRN",.84,1250000.264,2,1,0)
  ^-jumping not allowed now!
"KRN",.84,1250000.265,-1)
0^263
"KRN",.84,1250000.265,0)
1250000.265^2^y
"KRN",.84,1250000.265,2,0)
^^1^1^3121022^
"KRN",.84,1250000.265,2,1,0)
Select 1-|1|:
"KRN",.84,1250000.266,-1)
0^264
"KRN",.84,1250000.266,0)
1250000.266^3
"KRN",.84,1250000.266,2,0)
^^1^1^3121022^
"KRN",.84,1250000.266,2,1,0)
Select the field you wish to jump to, by number
"KRN",.84,1250000.267,-1)
0^265
"KRN",.84,1250000.267,0)
1250000.267^2^y
"KRN",.84,1250000.267,2,0)
^.844^1^1^3121023^^
"KRN",.84,1250000.267,2,1,0)
PROBLEM: |1|//
"KRN",.84,1250000.268,-1)
0^266
"KRN",.84,1250000.268,0)
1250000.268^3^y
"KRN",.84,1250000.268,2,0)
^^2^2^3121022^
"KRN",.84,1250000.268,2,1,0)
|TAB|Enter a description of this problem, up to 80 characters.
"KRN",.84,1250000.268,2,2,0)
 
"KRN",.84,1250000.269,-1)
0^267
"KRN",.84,1250000.269,0)
1250000.269^2^y
"KRN",.84,1250000.269,2,0)
^^5^5^3121022^
"KRN",.84,1250000.269,2,1,0)
 
"KRN",.84,1250000.269,2,2,0)
|TAB|This problem has not yet been saved.
"KRN",.84,1250000.269,2,3,0)
|TAB|Enter <Q>uit and it will not be added to the list.
"KRN",.84,1250000.269,2,4,0)
 
"KRN",.84,1250000.269,2,5,0)
 
"KRN",.84,1250000.27,-1)
0^268
"KRN",.84,1250000.27,0)
1250000.27^2
"KRN",.84,1250000.27,2,0)
^^1^1^3121022^
"KRN",.84,1250000.27,2,1,0)
Press RETURN to redisplay the problem text
"KRN",.84,1250000.271,-1)
0^269
"KRN",.84,1250000.271,0)
1250000.271^2
"KRN",.84,1250000.271,2,0)
^^1^1^3121022^
"KRN",.84,1250000.271,2,1,0)
PROBLEM: 
"KRN",.84,1250000.272,-1)
0^270
"KRN",.84,1250000.272,0)
1250000.272^2^y
"KRN",.84,1250000.272,2,0)
^.844^1^1^3121022^^
"KRN",.84,1250000.272,2,1,0)
NOTE |1|: 
"KRN",.84,1250000.273,-1)
0^271
"KRN",.84,1250000.273,0)
1250000.273^3
"KRN",.84,1250000.273,2,0)
^.844^2^2^3121025^^
"KRN",.84,1250000.273,2,1,0)
Enter any text you wish appended to this problem, up to 60 characters
"KRN",.84,1250000.273,2,2,0)
in length.  You may append as many comments to a problem as you wish.
"KRN",.84,1250000.274,-1)
0^272
"KRN",.84,1250000.274,0)
1250000.274^2
"KRN",.84,1250000.274,2,0)
^^1^1^3121022^
"KRN",.84,1250000.274,2,1,0)
   Are you sure you want to delete this comment? 
"KRN",.84,1250000.275,-1)
0^273
"KRN",.84,1250000.275,0)
1250000.275^3
"KRN",.84,1250000.275,2,0)
^^1^1^3121022^
"KRN",.84,1250000.275,2,1,0)
   Enter YES to completely remove this comment from this patient's problem.
"KRN",.84,1250000.276,-1)
0^274
"KRN",.84,1250000.276,0)
1250000.276^1
"KRN",.84,1250000.276,2,0)
^^3^3^3121022^
"KRN",.84,1250000.276,2,1,0)
 
"KRN",.84,1250000.276,2,2,0)
Text may not exceed 60 characters!
"KRN",.84,1250000.276,2,3,0)
 
"KRN",.84,1250000.277,-1)
0^275
"KRN",.84,1250000.277,0)
1250000.277^2
"KRN",.84,1250000.277,2,0)
^^1^1^3121022^
"KRN",.84,1250000.277,2,1,0)
DATE RESOLVED: 
"KRN",.84,1250000.278,-1)
0^276
"KRN",.84,1250000.278,0)
1250000.278^3
"KRN",.84,1250000.278,2,0)
^^1^1^3121022^
"KRN",.84,1250000.278,2,1,0)
Enter the date this problem became resolved or inactive, as precisely as known.
"KRN",.84,1250000.279,-1)
0^277
"KRN",.84,1250000.279,0)
1250000.279^1
"KRN",.84,1250000.279,2,0)
^^2^2^3121022^
"KRN",.84,1250000.279,2,1,0)
 
"KRN",.84,1250000.279,2,2,0)
Date Resolved cannot be prior to the Date of Onset!
"KRN",.84,1250000.28,-1)
0^278
"KRN",.84,1250000.28,0)
1250000.28^2
"KRN",.84,1250000.28,2,0)
^^1^1^3121022^
"KRN",.84,1250000.28,2,1,0)
  (A)cute or (C)hronic? 
"KRN",.84,1250000.281,-1)
0^279
"KRN",.84,1250000.281,0)
1250000.281^3
"KRN",.84,1250000.281,2,0)
^.844^3^3^3121025^^
"KRN",.84,1250000.281,2,1,0)
  You may further refine the status of this problem by designating it
"KRN",.84,1250000.281,2,2,0)
  as ACUTE or CHRONIC; problems marked as ACUTE will be flagged on the
"KRN",.84,1250000.281,2,3,0)
  list display with a '*'.
"KRN",.84,1250000.282,-1)
0^280
"KRN",.84,1250000.282,0)
1250000.282^2
"KRN",.84,1250000.282,2,0)
^^1^1^3121022^
"KRN",.84,1250000.282,2,1,0)
     Choose from:
"KRN",.84,1250000.283,-1)
0^281
"KRN",.84,1250000.283,0)
1250000.283^2
"KRN",.84,1250000.283,2,0)
^^1^1^3121022^
"KRN",.84,1250000.283,2,1,0)
   SURE YOU WANT TO DELETE
"KRN",.84,1250000.284,-1)
0^282
"KRN",.84,1250000.284,0)
1250000.284^3
"KRN",.84,1250000.284,2,0)
^^1^1^3121022^
"KRN",.84,1250000.284,2,1,0)
    Answer with 'Yes' or 'No'
"KRN",.84,1250000.285,-1)
0^283
"KRN",.84,1250000.285,0)
1250000.285
"KRN",.84,1250000.286,-1)
0^284
"KRN",.84,1250000.286,0)
1250000.286^3
"KRN",.84,1250000.286,2,0)
^^1^1^3121022^
"KRN",.84,1250000.286,2,1,0)
     Enter YES to flag transcribed entries for clinician verification.
"KRN",.84,1250000.288,-1)
0^285
"KRN",.84,1250000.288,0)
1250000.288^3
"KRN",.84,1250000.288,2,0)
^.844^2^2^3121025^^
"KRN",.84,1250000.288,2,1,0)
     Enter YES to be prompted to print a new copy before exiting the patient's
"KRN",.84,1250000.288,2,2,0)
     list, if it has been updated.
"KRN",.84,1250000.29,-1)
0^286
"KRN",.84,1250000.29,0)
1250000.29^3
"KRN",.84,1250000.29,2,0)
^^3^3^3121022^
"KRN",.84,1250000.29,2,1,0)
     Enter YES to allow the user to search the Clinical Lexicon when adding to
"KRN",.84,1250000.29,2,2,0)
     or editing a problem list; NO will bypass the search, capturing ONLY the
"KRN",.84,1250000.29,2,3,0)
     free text.
"KRN",.84,1250000.292,-1)
0^287
"KRN",.84,1250000.292,0)
1250000.292^3
"KRN",.84,1250000.292,2,0)
^^2^2^3121022^
"KRN",.84,1250000.292,2,1,0)
     Enter the order in which the problems should be displayed for your site,
"KRN",.84,1250000.292,2,2,0)
     according to the date each problem was recorded.
"KRN",.84,1250000.294,-1)
0^288
"KRN",.84,1250000.294,0)
1250000.294^3
"KRN",.84,1250000.294,2,0)
^^2^2^3121022^
"KRN",.84,1250000.294,2,1,0)
     Enter '1' or 'YES' and non-interactive duplicate problems will be
"KRN",.84,1250000.294,2,2,0)
     screened.
"KRN",.84,1250000.295,-1)
0^289
"KRN",.84,1250000.295,0)
1250000.295^3^y
"KRN",.84,1250000.295,2,0)
^.844^4^4^3121022^^
"KRN",.84,1250000.295,2,1,0)
|TAB||TAB|This is a toggle which determines whether the PL application will
"KRN",.84,1250000.295,2,2,0)
|TAB||TAB|flag entries made by a non-clinical user, and allow for subsequent
"KRN",.84,1250000.295,2,3,0)
|TAB||TAB|confirmation of the entry by a clinician.
"KRN",.84,1250000.295,2,4,0)
 
"KRN",.84,1250000.296,-1)
0^290
"KRN",.84,1250000.296,0)
1250000.296^3^y
"KRN",.84,1250000.296,2,0)
^^5^5^3121022^
"KRN",.84,1250000.296,2,1,0)
|TAB||TAB|This is a toggle which determines whether the PL application will
"KRN",.84,1250000.296,2,2,0)
|TAB||TAB|prompt the user to print a new chartable copy of the patient's list
"KRN",.84,1250000.296,2,3,0)
|TAB||TAB|when exiting the application or changing patients, if the current
"KRN",.84,1250000.296,2,4,0)
|TAB||TAB|patient's list has been modified.
"KRN",.84,1250000.296,2,5,0)
 
"KRN",.84,1250000.297,-1)
0^291
"KRN",.84,1250000.297,0)
1250000.297^3^y
"KRN",.84,1250000.297,2,0)
^^13^13^3121022^
"KRN",.84,1250000.297,2,1,0)
|TAB||TAB|This is a toggle which determines whether the PL application will
"KRN",.84,1250000.297,2,2,0)
|TAB||TAB|allow the user to search the Clinical Lexicon when adding or editing
"KRN",.84,1250000.297,2,3,0)
|TAB||TAB|a problem; if a term is selected from the CL Utility, the standardized
"KRN",.84,1250000.297,2,4,0)
|TAB||TAB|text will be displayed on the problem list, otherwise the text entered
"KRN",.84,1250000.297,2,5,0)
|TAB||TAB|by the user to search on will be displayed.  Problems which are taken
"KRN",.84,1250000.297,2,6,0)
|TAB||TAB|from the CLU may already be coded to ICD9, and this code is returned
"KRN",.84,1250000.297,2,7,0)
|TAB||TAB|to the PL application if available.  Duplicate problems can be screened
"KRN",.84,1250000.297,2,8,0)
|TAB||TAB|out, and searches by problem performed when this link to the CLU exists.
"KRN",.84,1250000.297,2,9,0)
|TAB||TAB|If this flag is set to NO, the user will be prompted for his/her free
"KRN",.84,1250000.297,2,10,0)
|TAB||TAB|text description of the problem only, when adding or editing a problem.
"KRN",.84,1250000.297,2,11,0)
|TAB||TAB|No search will be performed at that time on the CLU, and no link made
"KRN",.84,1250000.297,2,12,0)
|TAB||TAB|from the problem to an entry in the CLU.
"KRN",.84,1250000.297,2,13,0)
 
"KRN",.84,1250000.298,-1)
0^292
"KRN",.84,1250000.298,0)
1250000.298^3^y
"KRN",.84,1250000.298,2,0)
^^7^7^3121022^
"KRN",.84,1250000.298,2,1,0)
|TAB||TAB|This flag allows each site to control how the problem list is displayed,
"KRN",.84,1250000.298,2,2,0)
|TAB||TAB|whether chronologically or reverse-chronologically by date recorded.
"KRN",.84,1250000.298,2,3,0)
|TAB||TAB|This ordering will be the same both onscreen and on the printed copy.
"KRN",.84,1250000.298,2,4,0)
|TAB||TAB|When new problems are added to a patient's list, they will be added as the
"KRN",.84,1250000.298,2,5,0)
|TAB||TAB|most recent problems, i.e. at the top of the list if reverse-chronological
"KRN",.84,1250000.298,2,6,0)
|TAB||TAB|or at the bottom if chronological.
"KRN",.84,1250000.298,2,7,0)
 
"KRN",.84,1250000.299,-1)
0^293
"KRN",.84,1250000.299,0)
1250000.299^3^y
"KRN",.84,1250000.299,2,0)
^^4^4^3121022^
"KRN",.84,1250000.299,2,1,0)
|TAB||TAB|If YES is entered in this field duplicate problems (those having the same
"KRN",.84,1250000.299,2,2,0)
|TAB||TAB|ICD9 code) will NOT be added to the problem list.  The primary purpose of
"KRN",.84,1250000.299,2,3,0)
|TAB||TAB|this field in to screen entries added via the scannable encounter form.
"KRN",.84,1250000.299,2,4,0)
 
"KRN",.84,1250000.301,-1)
0^294
"KRN",.84,1250000.301,0)
1250000.301^2
"KRN",.84,1250000.301,2,0)
^^1^1^3121022^
"KRN",.84,1250000.301,2,1,0)
Select PROBLEM: 
"KRN",.84,1250000.302,-1)
0^295
"KRN",.84,1250000.302,0)
1250000.302^2
"KRN",.84,1250000.302,2,0)
^.844^2^2^3121025^^
"KRN",.84,1250000.302,2,1,0)
No data available.
"KRN",.84,1250000.302,2,2,0)
 
"KRN",.84,1250000.303,-1)
0^296
"KRN",.84,1250000.303,0)
1250000.303^2^y
"KRN",.84,1250000.303,2,0)
^.844^1^1^3130311^^^^
"KRN",.84,1250000.303,2,1,0)
|1| Active Problems
"KRN",.84,1250000.304,-1)
0^297
"KRN",.84,1250000.304,0)
1250000.304^2^y
"KRN",.84,1250000.304,2,0)
^.844^1^1^3121026^^^
"KRN",.84,1250000.304,2,1,0)
|1| Inactive Problems
"KRN",.84,1250000.305,-1)
0^298
"KRN",.84,1250000.305,0)
1250000.305^2
"KRN",.84,1250000.305,2,0)
^.844^1^1^3121025^^^
"KRN",.84,1250000.305,2,1,0)
PROBLEM
"KRN",.84,1250000.306,-1)
0^299
"KRN",.84,1250000.306,0)
1250000.306^2
"KRN",.84,1250000.306,2,0)
^^1^1^3121022^
"KRN",.84,1250000.306,2,1,0)
LAST MOD
"KRN",.84,1250000.307,-1)
0^300
"KRN",.84,1250000.307,0)
1250000.307^2
"KRN",.84,1250000.307,2,0)
^^1^1^3121022^
"KRN",.84,1250000.307,2,1,0)
SERVICE/PROVIDER
"KRN",.84,1250000.308,-1)
0^301
"KRN",.84,1250000.308,0)
1250000.308^2^y
"KRN",.84,1250000.308,2,0)
^^1^1^3121022^
"KRN",.84,1250000.308,2,1,0)
|1| problem(s) added
"KRN",.84,1250000.309,-1)
0^302
"KRN",.84,1250000.309,0)
1250000.309^3^y
"KRN",.84,1250000.309,2,0)
^.844^7^7^3121025^^
"KRN",.84,1250000.309,2,1,0)
 
"KRN",.84,1250000.309,2,2,0)
|TAB|You may select one or more of the above listed items by entering
"KRN",.84,1250000.309,2,3,0)
|TAB|its display number (1-|1|) at the prompt; if the text if followed
"KRN",.84,1250000.309,2,4,0)
|TAB|by '...', all problems under that heading will be displayed for
"KRN",.84,1250000.309,2,5,0)
|TAB|selection.  Enter AD to select a problem not listed above.
"KRN",.84,1250000.309,2,6,0)
|TAB|If you enter a list or range of numbers to add several problems,
"KRN",.84,1250000.309,2,7,0)
you will be presented with each to complete, one at a time.
"KRN",.84,1250000.31,-1)
0^303
"KRN",.84,1250000.31,0)
1250000.31^3^y
"KRN",.84,1250000.31,2,0)
^.844^1^1^3121025^^
"KRN",.84,1250000.31,2,1,0)
|TAB|Enter + to see more items, as in the problem list.
"KRN",.84,1250000.311,-1)
0^304
"KRN",.84,1250000.311,0)
1250000.311^3
"KRN",.84,1250000.311,2,0)
^.844^2^2^3121025^^
"KRN",.84,1250000.311,2,1,0)
 
"KRN",.84,1250000.311,2,2,0)
Press <return> to continue ...
"KRN",.84,1250000.312,-1)
0^305
"KRN",.84,1250000.312,0)
1250000.312^2
"KRN",.84,1250000.312,2,0)
^^1^1^3121022^
"KRN",.84,1250000.312,2,1,0)
Enter the number of the item(s) you wish to select
"KRN",.84,1250000.313,-1)
0^306
"KRN",.84,1250000.313,0)
1250000.313^2^y
"KRN",.84,1250000.313,2,0)
^^3^3^3121022^
"KRN",.84,1250000.313,2,1,0)
 
"KRN",.84,1250000.313,2,2,0)
 
"KRN",.84,1250000.313,2,3,0)
>>>  Adding problem #|1| '|2|' ...
"KRN",.84,1250000.314,-1)
0^307
"KRN",.84,1250000.314,0)
1250000.314^2
"KRN",.84,1250000.314,2,0)
^^3^3^3121022^
"KRN",.84,1250000.314,2,1,0)
 
"KRN",.84,1250000.314,2,2,0)
 
"KRN",.84,1250000.314,2,3,0)
>>> Adding a problem not on the menu ...
"KRN",.84,1250000.315,-1)
0^308
"KRN",.84,1250000.315,0)
1250000.315^2
"KRN",.84,1250000.315,2,0)
^^1^1^3121025^
"KRN",.84,1250000.315,2,1,0)
Service/Provider
"KRN",.84,1250000.316,-1)
0^309
"KRN",.84,1250000.316,0)
1250000.316^2
"KRN",.84,1250000.316,2,0)
^^1^1^3121025^
"KRN",.84,1250000.316,2,1,0)
    No data available meeting criteria.
"KRN",.84,1250000.317,-1)
0^310
"KRN",.84,1250000.317,0)
1250000.317^2
"KRN",.84,1250000.317,2,0)
^^1^1^3121025^
"KRN",.84,1250000.317,2,1,0)
< DELETED >
"KRN",.84,1250000.318,-1)
0^311
"KRN",.84,1250000.318,0)
1250000.318^2^y
"KRN",.84,1250000.318,2,0)
^.844^1^1^3121026^^^
"KRN",.84,1250000.318,2,1,0)
, Onset |1|
"KRN",.84,1250000.319,-1)
0^312
"KRN",.84,1250000.319,0)
1250000.319^2^y
"KRN",.84,1250000.319,2,0)
^.844^1^1^3121026^^
"KRN",.84,1250000.319,2,1,0)
|1| problems
"KRN",.84,1250000.32,-1)
0^313
"KRN",.84,1250000.32,0)
1250000.32^2
"KRN",.84,1250000.32,2,0)
^^1^1^3121025^
"KRN",.84,1250000.32,2,1,0)
ALL
"KRN",.84,1250000.321,-1)
0^314
"KRN",.84,1250000.321,0)
1250000.321^2
"KRN",.84,1250000.321,2,0)
^^1^1^3121025^
"KRN",.84,1250000.321,2,1,0)
 SERVICE
"KRN",.84,1250000.322,-1)
0^315
"KRN",.84,1250000.322,0)
1250000.322^2
"KRN",.84,1250000.322,2,0)
^^1^1^3121025^
"KRN",.84,1250000.322,2,1,0)
 CLINIC
"KRN",.84,1250000.323,-1)
0^316
"KRN",.84,1250000.323,0)
1250000.323^2
"KRN",.84,1250000.323,2,0)
^.844^1^1^3121026^^
"KRN",.84,1250000.323,2,1,0)
 PROBLEMS
"KRN",.84,1250000.324,-1)
0^317
"KRN",.84,1250000.324,0)
1250000.324^2^y
"KRN",.84,1250000.324,2,0)
^.844^1^1^3121026^^
"KRN",.84,1250000.324,2,1,0)
 BY |1|
"KRN",.84,1250000.325,-1)
0^318
"KRN",.84,1250000.325,0)
1250000.325^3^y
"KRN",.84,1250000.325,2,0)
^^10^10^3121025^
"KRN",.84,1250000.325,2,1,0)
 
"KRN",.84,1250000.325,2,2,0)
|TAB|To update the problem list first select from Add, Remove, Edit,
"KRN",.84,1250000.325,2,3,0)
|TAB|Inactivate, or Comment, then enter the problem number(s).
"KRN",.84,1250000.325,2,4,0)
|TAB|If you need more information on a problem, select Detailed
"KRN",.84,1250000.325,2,5,0)
|TAB|Display; to change whether all or only selected problems for this
"KRN",.84,1250000.325,2,6,0)
|TAB|patient are listed, choose Select View.  Enter ?? to see more
"KRN",.84,1250000.325,2,7,0)
|TAB|actions for facilitating navigation of the list.
"KRN",.84,1250000.325,2,8,0)
|TAB|Problem statuses: *-Acute I-Inactive #-Inactive ICD Code
"KRN",.84,1250000.325,2,9,0)
 
"KRN",.84,1250000.325,2,10,0)
Press <return> to continue ... 
"KRN",.84,1250000.326,-1)
0^319
"KRN",.84,1250000.326,0)
1250000.326^3^y
"KRN",.84,1250000.326,2,0)
^^10^10^3121025^
"KRN",.84,1250000.326,2,1,0)
 
"KRN",.84,1250000.326,2,2,0)
|TAB|To update the problem list first select from Add, Remove, Edit,
"KRN",.84,1250000.326,2,3,0)
|TAB|Verify, Inactivate, or Comment, then enter the problem number(s)
"KRN",.84,1250000.326,2,4,0)
|TAB|If you need more information on a problem, select Detailed
"KRN",.84,1250000.326,2,5,0)
|TAB|Display; to change whether all or only selected problems for this
"KRN",.84,1250000.326,2,6,0)
|TAB|patient are listed, choose Select View.  Enter ?? to see more
"KRN",.84,1250000.326,2,7,0)
|TAB|actions for facilitating navigation of the list.
"KRN",.84,1250000.326,2,8,0)
|TAB|Problem statuses: *-Acute I-Inactive #-Inactive ICD Code $-Unverified
"KRN",.84,1250000.326,2,9,0)
 
"KRN",.84,1250000.326,2,10,0)
Press <return> to continue ... 
"KRN",.84,1250000.327,-1)
0^320
"KRN",.84,1250000.327,0)
1250000.327^2
"KRN",.84,1250000.327,2,0)
^.844^1^1^3121026^^
"KRN",.84,1250000.327,2,1,0)
Listing already includes inactive problems!
"KRN",.84,1250000.328,-1)
0^321
"KRN",.84,1250000.328,0)
1250000.328^2
"KRN",.84,1250000.328,2,0)
^.844^1^1^3121026^^
"KRN",.84,1250000.328,2,1,0)
Patient has no inactive problems to include.
"KRN",.84,1250000.329,-1)
0^322
"KRN",.84,1250000.329,0)
1250000.329^2
"KRN",.84,1250000.329,2,0)
^.844^1^1^3121026^^^^
"KRN",.84,1250000.329,2,1,0)
Enter the service(s) from which you wish to view problems:
"KRN",.84,1250000.33,-1)
0^323
"KRN",.84,1250000.33,0)
1250000.33^2
"KRN",.84,1250000.33,2,0)
^^1^1^3121025^
"KRN",.84,1250000.33,2,1,0)
Select SERVICE: 
"KRN",.84,1250000.331,-1)
0^324
"KRN",.84,1250000.331,0)
1250000.331^2
"KRN",.84,1250000.331,2,0)
^.844^1^1^3121026^^^
"KRN",.84,1250000.331,2,1,0)
Enter the clinic(s) from which you wish to view problems:
"KRN",.84,1250000.332,-1)
0^325
"KRN",.84,1250000.332,0)
1250000.332^2
"KRN",.84,1250000.332,2,0)
^.844^1^1^3121026^^^
"KRN",.84,1250000.332,2,1,0)
Select CLINIC: 
"KRN",.84,1250000.333,-1)
0^326
"KRN",.84,1250000.333,0)
1250000.333^2^y
"KRN",.84,1250000.333,2,0)
^.844^4^4^3121026^^^
"KRN",.84,1250000.333,2,1,0)
 
"KRN",.84,1250000.333,2,2,0)
|TAB|Enter the service(s), one at a time, from which you wish to view
"KRN",.84,1250000.333,2,3,0)
|TAB|problems; press <return> when you have finished.
"KRN",.84,1250000.333,2,4,0)
 
"KRN",.84,1250000.334,-1)
0^327
"KRN",.84,1250000.334,0)
1250000.334^2^y
"KRN",.84,1250000.334,2,0)
^.844^4^4^3121026^^
"KRN",.84,1250000.334,2,1,0)
 
"KRN",.84,1250000.334,2,2,0)
|TAB|Enter the clinic(s), one at a time, from which you wish to view
"KRN",.84,1250000.334,2,3,0)
|TAB|problems; press <return> when you have finished.
"KRN",.84,1250000.334,2,4,0)
 
"KRN",.84,1250000.335,-1)
0^328
"KRN",.84,1250000.335,0)
1250000.335^2
"KRN",.84,1250000.335,2,0)
^^1^1^3121026^
"KRN",.84,1250000.335,2,1,0)
ANOTHER ONE: 
"KRN",.84,1250000.336,-1)
0^329
"KRN",.84,1250000.336,0)
1250000.336^2
"KRN",.84,1250000.336,2,0)
^^2^2^3121026^
"KRN",.84,1250000.336,2,1,0)
 
"KRN",.84,1250000.336,2,2,0)
Enter the name of the provider whose problems you wish to view:
"KRN",.84,1250000.337,-1)
0^330
"KRN",.84,1250000.337,0)
1250000.337^2
"KRN",.84,1250000.337,2,0)
^^1^1^3121026^
"KRN",.84,1250000.337,2,1,0)
Select PROVIDER: 
"KRN",.84,1250000.338,-1)
0^331
"KRN",.84,1250000.338,0)
1250000.338^3^y
"KRN",.84,1250000.338,2,0)
^^4^4^3121026^
"KRN",.84,1250000.338,2,1,0)
 
"KRN",.84,1250000.338,2,2,0)
|TAB|If you wish to see only those problems of the current patient that
"KRN",.84,1250000.338,2,3,0)
|TAB|are associated with a specific provider, enter his/her name here.
"KRN",.84,1250000.338,2,4,0)
 
"KRN",.84,1250000.339,-1)
0^332
"KRN",.84,1250000.339,0)
1250000.339^2
"KRN",.84,1250000.339,2,0)
^^1^1^3121026^
"KRN",.84,1250000.339,2,1,0)
Searching for the patient's problem list ...
"KRN",.84,1250000.34,-1)
0^333
"KRN",.84,1250000.34,0)
1250000.34^3^y
"KRN",.84,1250000.34,2,0)
^^10^10^3121026^
"KRN",.84,1250000.34,2,1,0)
 
"KRN",.84,1250000.34,2,2,0)
|TAB|You may take a variety of actions from this prompt.  To update
"KRN",.84,1250000.34,2,3,0)
|TAB|the problem list select from Add, Remove, Edit, Inactivate,
"KRN",.84,1250000.34,2,4,0)
|TAB|and Enter Comment; you will then be prompted for the problem
"KRN",.84,1250000.34,2,5,0)
|TAB|number.  To see all of this patient's problems, both active and
"KRN",.84,1250000.34,2,6,0)
|TAB|inactive, select Show All Problems; select Print to print the
"KRN",.84,1250000.34,2,7,0)
|TAB|same complete list in a chartable format.  To see a listing of
"KRN",.84,1250000.34,2,8,0)
|TAB|actions that facilitate navigating the list, enter '??'.
"KRN",.84,1250000.34,2,9,0)
 
"KRN",.84,1250000.34,2,10,0)
Press <return> to continue ... 
"KRN",.84,1250000.341,-1)
0^334
"KRN",.84,1250000.341,0)
1250000.341^2
"KRN",.84,1250000.341,2,0)
^^1^1^3121026^
"KRN",.84,1250000.341,2,1,0)
Print a new problem list? 
"KRN",.84,1250000.342,-1)
0^335
"KRN",.84,1250000.342,0)
1250000.342^3
"KRN",.84,1250000.342,2,0)
^^2^2^3121026^
"KRN",.84,1250000.342,2,1,0)
Press <return> to generate a new complete problem list for this patient;
"KRN",.84,1250000.342,2,2,0)
enter NO to continue without printing.
"KRN",.84,1250000.343,-1)
0^336
"KRN",.84,1250000.343,0)
1250000.343^2
"KRN",.84,1250000.343,2,0)
^^1^1^3121026^
"KRN",.84,1250000.343,2,1,0)
>>>  THIS PATIENT'S PROBLEM LIST HAS CHANGED!
"KRN",.84,1250000.344,-1)
0^337
"KRN",.84,1250000.344,0)
1250000.344^2
"KRN",.84,1250000.344,2,0)
^.844^1^1^3130311^^^^
"KRN",.84,1250000.344,2,1,0)
CURRENT VIEW: Inpatient, 
"KRN",.84,1250000.345,-1)
0^338
"KRN",.84,1250000.345,0)
1250000.345^2
"KRN",.84,1250000.345,2,0)
^.844^1^1^3130311^^^
"KRN",.84,1250000.345,2,1,0)
CURRENT VIEW: Outpatient, 
"KRN",.84,1250000.346,-1)
0^339
"KRN",.84,1250000.346,0)
1250000.346
"KRN",.84,1250000.351,-1)
0^340
"KRN",.84,1250000.351,0)
1250000.351^3
"KRN",.84,1250000.351,2,0)
^^3^3^3121026^
"KRN",.84,1250000.351,2,1,0)
You may change your view of this patient's problem list by selecting one or
"KRN",.84,1250000.351,2,2,0)
more of the following attributes to alter:
"KRN",.84,1250000.351,2,3,0)
 
"KRN",.84,1250000.352,-1)
0^341
"KRN",.84,1250000.352,0)
1250000.352^2
"KRN",.84,1250000.352,2,0)
^^1^1^3121026^
"KRN",.84,1250000.352,2,1,0)
Agent Orange
"KRN",.84,1250000.353,-1)
0^342
"KRN",.84,1250000.353,0)
1250000.353^2
"KRN",.84,1250000.353,2,0)
^^1^1^3121026^
"KRN",.84,1250000.353,2,1,0)
Radiation
"KRN",.84,1250000.354,-1)
0^343
"KRN",.84,1250000.354,0)
1250000.354^2
"KRN",.84,1250000.354,2,0)
^^1^1^3121026^
"KRN",.84,1250000.354,2,1,0)
Contaminants
"KRN",.84,1250000.355,-1)
0^344
"KRN",.84,1250000.355,0)
1250000.355^2
"KRN",.84,1250000.355,2,0)
^^1^1^3121026^
"KRN",.84,1250000.355,2,1,0)
Head/Neck Cancer
"KRN",.84,1250000.356,-1)
0^345
"KRN",.84,1250000.356,0)
1250000.356^2
"KRN",.84,1250000.356,2,0)
^^1^1^3121026^
"KRN",.84,1250000.356,2,1,0)
Mil Sexual Trauma
"KRN",.84,1250000.357,-1)
0^346
"KRN",.84,1250000.357,0)
1250000.357^2
"KRN",.84,1250000.357,2,0)
^.844^3^3^3121026^^
"KRN",.84,1250000.357,2,1,0)
 
"KRN",.84,1250000.357,2,2,0)
Preferred View saved.
"KRN",.84,1250000.357,2,3,0)
 
"KRN",.84,1250000.358,-1)
0^347
"KRN",.84,1250000.358,0)
1250000.358^2
"KRN",.84,1250000.358,2,0)
^.844^1^1^3121026^^
"KRN",.84,1250000.358,2,1,0)
Retrieving the list of clinical services ...
"KRN",.84,1250000.359,-1)
0^348
"KRN",.84,1250000.359,0)
1250000.359^2
"KRN",.84,1250000.359,2,0)
^^1^1^3121026^
"KRN",.84,1250000.359,2,1,0)
    No clinical services available to select from.
"KRN",.84,1250000.36,-1)
0^349
"KRN",.84,1250000.36,0)
1250000.36^2
"KRN",.84,1250000.36,2,0)
^.844^1^1^3121026^^
"KRN",.84,1250000.36,2,1,0)
Retrieving the list of clinics ...
"KRN",.84,1250000.361,-1)
0^350
"KRN",.84,1250000.361,0)
1250000.361^2
"KRN",.84,1250000.361,2,0)
^^1^1^3121026^
"KRN",.84,1250000.361,2,1,0)
    No clinics available to select from.
"KRN",.84,1250000.362,-1)
0^351
"KRN",.84,1250000.362,0)
1250000.362^3^y
"KRN",.84,1250000.362,2,0)
^^10^10^3121026^
"KRN",.84,1250000.362,2,1,0)
 
"KRN",.84,1250000.362,2,2,0)
|TAB|To create or change your preferred view, choose either Add or
"KRN",.84,1250000.362,2,3,0)
|TAB|Remove; those services you add will be flagged above with a 'Y'.
"KRN",.84,1250000.362,2,4,0)
|TAB|Within the Problem List application, ONLY those problems associated
"KRN",.84,1250000.362,2,5,0)
|TAB|with your selected services will initially be displayed, however
"KRN",.84,1250000.362,2,6,0)
|TAB|the entire list is always available using its Select View option.
"KRN",.84,1250000.362,2,7,0)
|TAB|If you wish to create a view according to clinics instead, or not
"KRN",.84,1250000.362,2,8,0)
|TAB|to have a view at all, choose Select New View or Delete respectively.
"KRN",.84,1250000.362,2,9,0)
 
"KRN",.84,1250000.362,2,10,0)
Press <return> to continue ... 
"KRN",.84,1250000.363,-1)
0^352
"KRN",.84,1250000.363,0)
1250000.363^3^y
"KRN",.84,1250000.363,2,0)
^^10^10^3121026^
"KRN",.84,1250000.363,2,1,0)
 
"KRN",.84,1250000.363,2,2,0)
|TAB|To create or change your preferred view, choose either Add or
"KRN",.84,1250000.363,2,3,0)
|TAB|Remove; those clinics you add will be flagged above with a 'Y'.
"KRN",.84,1250000.363,2,4,0)
|TAB|Within the Problem List application, ONLY those problems associated
"KRN",.84,1250000.363,2,5,0)
|TAB|with your selected clinics will initially be displayed, however
"KRN",.84,1250000.363,2,6,0)
|TAB|the entire list is always available using its Select View option.
"KRN",.84,1250000.363,2,7,0)
|TAB|If you wish to create a view according to services instead, or not
"KRN",.84,1250000.363,2,8,0)
|TAB|to have a view at all, choose Select New View or Delete respectively.
"KRN",.84,1250000.363,2,9,0)
 
"KRN",.84,1250000.363,2,10,0)
Press <return> to continue ... 
"KRN",.84,1250000.364,-1)
0^353
"KRN",.84,1250000.364,0)
1250000.364^2
"KRN",.84,1250000.364,2,0)
^.844^1^1^3121026^^
"KRN",.84,1250000.364,2,1,0)
>>>  YOUR PREFERRED VIEW HAS CHANGED!!
"KRN",.84,1250000.365,-1)
0^354
"KRN",.84,1250000.365,0)
1250000.365^2
"KRN",.84,1250000.365,2,0)
^^1^1^3121026^
"KRN",.84,1250000.365,2,1,0)
Do you want to save these changes
"KRN",.84,1250000.366,-1)
0^355
"KRN",.84,1250000.366,0)
1250000.366^3
"KRN",.84,1250000.366,2,0)
^^3^3^3121026^
"KRN",.84,1250000.366,2,1,0)
Enter YES to have only problems from the services indicated above
"KRN",.84,1250000.366,2,2,0)
listed, when initially displaying a patient's problem list;
"KRN",.84,1250000.366,2,3,0)
enter NO to retain your previous view.
"KRN",.84,1250000.367,-1)
0^356
"KRN",.84,1250000.367,0)
1250000.367^3
"KRN",.84,1250000.367,2,0)
^^3^3^3121026^
"KRN",.84,1250000.367,2,1,0)
Enter YES to have only problems from the clinics indicated above
"KRN",.84,1250000.367,2,2,0)
listed, when initially displaying a patient's problem list;
"KRN",.84,1250000.367,2,3,0)
enter NO to retain your previous view.
"KRN",.84,1250000.368,-1)
0^357
"KRN",.84,1250000.368,0)
1250000.368^3
"KRN",.84,1250000.368,2,0)
^^1^1^3121026^
"KRN",.84,1250000.368,2,1,0)
+ More Services   ?? More actions
"KRN",.84,1250000.369,-1)
0^358
"KRN",.84,1250000.369,0)
1250000.369^3
"KRN",.84,1250000.369,2,0)
^^1^1^3121026^
"KRN",.84,1250000.369,2,1,0)
+ More Clinics   ?? More actions
"KRN",.84,1250000.37,-1)
0^359
"KRN",.84,1250000.37,0)
1250000.37^2
"KRN",.84,1250000.37,2,0)
^.844^1^1^3121026^^
"KRN",.84,1250000.37,2,1,0)
CURRENT VIEW:  
"KRN",.84,1250000.371,-1)
0^360
"KRN",.84,1250000.371,0)
1250000.371^2^y
"KRN",.84,1250000.371,2,0)
^.844^3^3^3121026^^^
"KRN",.84,1250000.371,2,1,0)
 
"KRN",.84,1250000.371,2,2,0)
CURRENT VIEW:  Inpatient, |1| services included
"KRN",.84,1250000.371,2,3,0)
 
"KRN",.84,1250000.372,-1)
0^361
"KRN",.84,1250000.372,0)
1250000.372^2^y
"KRN",.84,1250000.372,2,0)
^^3^3^3121026^
"KRN",.84,1250000.372,2,1,0)
 
"KRN",.84,1250000.372,2,2,0)
CURRENT VIEW:  Outpatient, |1| clinics included
"KRN",.84,1250000.372,2,3,0)
 
"KRN",.84,1250000.373,-1)
0^362
"KRN",.84,1250000.373,0)
1250000.373^2
"KRN",.84,1250000.373,2,0)
^^4^4^3121026^
"KRN",.84,1250000.373,2,1,0)
 
"KRN",.84,1250000.373,2,2,0)
CURRENT VIEW:  None defined
"KRN",.84,1250000.373,2,3,0)
              (Default is outpatient, all clinics included)
"KRN",.84,1250000.373,2,4,0)
 
"KRN",.84,1250000.374,-1)
0^363
"KRN",.84,1250000.374,0)
1250000.374^2
"KRN",.84,1250000.374,2,0)
^^1^1^3121026^
"KRN",.84,1250000.374,2,1,0)
Do you want to change your preferred view? 
"KRN",.84,1250000.375,-1)
0^364
"KRN",.84,1250000.375,0)
1250000.375^3
"KRN",.84,1250000.375,2,0)
^^4^4^3121026^
"KRN",.84,1250000.375,2,1,0)
Enter YES if you want to change your preferred view of patient
"KRN",.84,1250000.375,2,2,0)
problem lists; NO will exit this option, leaving your view unchanged.
"KRN",.84,1250000.375,2,3,0)
Your preferred view will determine what information you see about
"KRN",.84,1250000.375,2,4,0)
each problem, and whether you see a complete or partial list.
"KRN",.84,1250000.376,-1)
0^365
"KRN",.84,1250000.376,0)
1250000.376^2
"KRN",.84,1250000.376,2,0)
^^1^1^3121026^
"KRN",.84,1250000.376,2,1,0)
Select VIEW: 
"KRN",.84,1250000.377,-1)
0^366
"KRN",.84,1250000.377,0)
1250000.377^3
"KRN",.84,1250000.377,2,0)
^^5^5^3121026^
"KRN",.84,1250000.377,2,1,0)
Choose from: Outpatient
"KRN",.84,1250000.377,2,2,0)
             Inpatient
"KRN",.84,1250000.377,2,3,0)
An OUTPATIENT view will display information regarding the clinic that
"KRN",.84,1250000.377,2,4,0)
is following each problem; an INPATIENT view will display service and
"KRN",.84,1250000.377,2,5,0)
responsible provider information.
"KRN",.84,1250000.378,-1)
0^367
"KRN",.84,1250000.378,0)
1250000.378^2
"KRN",.84,1250000.378,2,0)
^^1^1^3121026^
"KRN",.84,1250000.378,2,1,0)
Include (A)ll problems or only those from (S)elected services? 
"KRN",.84,1250000.379,-1)
0^368
"KRN",.84,1250000.379,0)
1250000.379^2
"KRN",.84,1250000.379,2,0)
^^1^1^3121026^
"KRN",.84,1250000.379,2,1,0)
Include (A)ll problems or only those from (S)elected clinics? 
"KRN",.84,1250000.38,-1)
0^369
"KRN",.84,1250000.38,0)
1250000.38^3
"KRN",.84,1250000.38,2,0)
^^5^5^3121026^
"KRN",.84,1250000.38,2,1,0)
Enter A to display all active problems for the selected patient, or S to
"KRN",.84,1250000.38,2,2,0)
see a partial list.  You may select specific inpatient services, and only
"KRN",.84,1250000.38,2,3,0)
those problems associated with them will be shown at first; the remainder
"KRN",.84,1250000.38,2,4,0)
of the patient's problems are always available to display through the
"KRN",.84,1250000.38,2,5,0)
"Select View" action.
"KRN",.84,1250000.381,-1)
0^370
"KRN",.84,1250000.381,0)
1250000.381^3
"KRN",.84,1250000.381,2,0)
^^5^5^3121026^
"KRN",.84,1250000.381,2,1,0)
Enter A to display all active problems for the selected patient, or S to
"KRN",.84,1250000.381,2,2,0)
see a partial list.  You may select specific outpatient clinics, and only
"KRN",.84,1250000.381,2,3,0)
those problems associated with them will be shown at first; the remainder
"KRN",.84,1250000.381,2,4,0)
of the patient's problems are always available to display through the
"KRN",.84,1250000.381,2,5,0)
"Select View" action.
"KRN",.84,1250000.382,-1)
0^371
"KRN",.84,1250000.382,0)
1250000.382^1^y
"KRN",.84,1250000.382,2,0)
^.844^4^4^3121026^^^
"KRN",.84,1250000.382,2,1,0)
 
"KRN",.84,1250000.382,2,2,0)
You may not have more than 60 services included in your view!
"KRN",.84,1250000.382,2,3,0)
Your view currently includes |1| services.
"KRN",.84,1250000.382,2,4,0)
Please select again, choosing no more than |2| services.
"KRN",.84,1250000.383,-1)
0^372
"KRN",.84,1250000.383,0)
1250000.383^1^y
"KRN",.84,1250000.383,2,0)
^^4^4^3121026^
"KRN",.84,1250000.383,2,1,0)
 
"KRN",.84,1250000.383,2,2,0)
You may not have more than 60 clinics included in your view!
"KRN",.84,1250000.383,2,3,0)
Your view currently includes |1| clinics.
"KRN",.84,1250000.383,2,4,0)
Please select again, choosing no more than |2| clinics.
"KRN",.84,1250000.387,-1)
0^373
"KRN",.84,1250000.387,0)
1250000.387^2^y
"KRN",.84,1250000.387,2,0)
^.844^1^1^3121026^^
"KRN",.84,1250000.387,2,1,0)
Adding |1| service(s) ...
"KRN",.84,1250000.388,-1)
0^374
"KRN",.84,1250000.388,0)
1250000.388^2^y
"KRN",.84,1250000.388,2,0)
^^1^1^3121026^
"KRN",.84,1250000.388,2,1,0)
Adding |1| clinics(s) ...
"KRN",.84,1250000.389,-1)
0^375
"KRN",.84,1250000.389,0)
1250000.389^2^y
"KRN",.84,1250000.389,2,0)
^.844^1^1^3121030^^^^
"KRN",.84,1250000.389,2,1,0)
Removing |1| service(s) ...
"KRN",.84,1250000.39,-1)
0^376
"KRN",.84,1250000.39,0)
1250000.39^2^y
"KRN",.84,1250000.39,2,0)
^^1^1^3121026^
"KRN",.84,1250000.39,2,1,0)
Removing |2| clinics(s) ...
"KRN",.84,1250000.391,-1)
0^377
"KRN",.84,1250000.391,0)
1250000.391^2^y
"KRN",.84,1250000.391,2,0)
^^1^1^3121026^
"KRN",.84,1250000.391,2,1,0)
Include all sub-services/sections of |1|
"KRN",.84,1250000.392,-1)
0^378
"KRN",.84,1250000.392,0)
1250000.392^3
"KRN",.84,1250000.392,2,0)
^^3^3^3121026^
"KRN",.84,1250000.392,2,1,0)
This service is a 'parent' to other services/sections,
"KRN",.84,1250000.392,2,2,0)
listed indented above; enter YES to include all of these
"KRN",.84,1250000.392,2,3,0)
as well in this action, or enter NO to exclude them.
"KRN",.84,1250000.393,-1)
0^379
"KRN",.84,1250000.393,0)
1250000.393^2
"KRN",.84,1250000.393,2,0)
^^1^1^3121026^
"KRN",.84,1250000.393,2,1,0)
Select Service
"KRN",.84,1250000.394,-1)
0^380
"KRN",.84,1250000.394,0)
1250000.394^2
"KRN",.84,1250000.394,2,0)
^^1^1^3121026^
"KRN",.84,1250000.394,2,1,0)
Select Clinic
"KRN",.84,1250000.395,-1)
0^381
"KRN",.84,1250000.395,0)
1250000.395^3
"KRN",.84,1250000.395,2,0)
^^1^1^3121026^
"KRN",.84,1250000.395,2,1,0)
Enter the display number of the service(s) you wish to select
"KRN",.84,1250000.396,-1)
0^382
"KRN",.84,1250000.396,0)
1250000.396^3
"KRN",.84,1250000.396,2,0)
^^1^1^3121026^
"KRN",.84,1250000.396,2,1,0)
Enter the display number of the clinic(s) you wish to select
"KRN",.84,1250000.397,-1)
0^383
"KRN",.84,1250000.397,0)
1250000.397^2
"KRN",.84,1250000.397,2,0)
^^1^1^3121026^
"KRN",.84,1250000.397,2,1,0)
Are you sure this is ok
"KRN",.84,1250000.398,-1)
0^384
"KRN",.84,1250000.398,0)
1250000.398^3
"KRN",.84,1250000.398,2,0)
^^3^3^3121026^
"KRN",.84,1250000.398,2,1,0)
You may have only one preferred view at a time.
"KRN",.84,1250000.398,2,2,0)
Enter YES to change how your preferred view is defined,
"KRN",.84,1250000.398,2,3,0)
or press <return> to keep the view you currently have.
"KRN",.84,1250000.399,-1)
0^385
"KRN",.84,1250000.399,0)
1250000.399^3^y
"KRN",.84,1250000.399,2,0)
^.844^4^4^3121030^^
"KRN",.84,1250000.399,2,1,0)
 
"KRN",.84,1250000.399,2,2,0)
>>>  This action will clear your current view of problems by service
"KRN",.84,1250000.399,2,3,0)
|TAB|and present a list of clinics to replace it with.
"KRN",.84,1250000.399,2,4,0)
 
"KRN",.84,1250000.4,-1)
0^386
"KRN",.84,1250000.4,0)
1250000.4^3^y
"KRN",.84,1250000.4,2,0)
^^4^4^3121026^
"KRN",.84,1250000.4,2,1,0)
 
"KRN",.84,1250000.4,2,2,0)
">>>  This action will clear your current view of problems by clinic
"KRN",.84,1250000.4,2,3,0)
|TAB|and present a list of services to replace it with.
"KRN",.84,1250000.4,2,4,0)
 
"KRN",.84,1250000.401,-1)
0^387
"KRN",.84,1250000.401,0)
1250000.401^2
"KRN",.84,1250000.401,2,0)
^^1^1^3121026^
"KRN",.84,1250000.401,2,1,0)
Are you sure you want to delete your preferred view
"KRN",.84,1250000.402,-1)
0^388
"KRN",.84,1250000.402,0)
1250000.402^3
"KRN",.84,1250000.402,2,0)
^^3^3^3121026^
"KRN",.84,1250000.402,2,1,0)
Enter YES to remove your preferred view; the default view of Outpatient,
"KRN",.84,1250000.402,2,2,0)
including all active problems, will be used to display problem information.
"KRN",.84,1250000.402,2,3,0)
Enter NO to continue editing your current view.
"KRN",.84,1250000.403,-1)
0^389
"KRN",.84,1250000.403,0)
1250000.403^3
"KRN",.84,1250000.403,2,0)
^.844^1^1^3121030^^
"KRN",.84,1250000.403,2,1,0)
Deleting preferred view of services ...
"KRN",.84,1250000.404,-1)
0^390
"KRN",.84,1250000.404,0)
1250000.404^2
"KRN",.84,1250000.404,2,0)
^^1^1^3121026^
"KRN",.84,1250000.404,2,1,0)
Deleting preferred view of clinics ...
"KRN",.84,1250000.405,-1)
0^391
"KRN",.84,1250000.405,0)
1250000.405^3^y
"KRN",.84,1250000.405,2,0)
^^9^9^3121023^
"KRN",.84,1250000.405,2,1,0)
 
"KRN",.84,1250000.405,2,2,0)
|TAB|You may change one or more of the above listed values describing
"KRN",.84,1250000.405,2,3,0)
|TAB|this problem by entering its display number (1-"_|1|) at the prompt;
"KRN",.84,1250000.405,2,4,0)
|TAB|you may then enter a new value, or '@' to delete an existing value.
"KRN",.84,1250000.405,2,5,0)
|TAB|Enter RM to remove this problem from the patient's list completely,
"KRN",.84,1250000.405,2,6,0)
|TAB|SC to save your changes, or Q to simply return to the problem list.
"KRN",.84,1250000.405,2,7,0)
|TAB|Enter '+' to see more information, as in the problem list.
"KRN",.84,1250000.405,2,8,0)
 
"KRN",.84,1250000.405,2,9,0)
Press <return> to continue ... 
"KRN",.84,1250000.406,-1)
0^392
"KRN",.84,1250000.406,0)
1250000.406^2^y
"KRN",.84,1250000.406,2,0)
^.844^1^1^3121029^^
"KRN",.84,1250000.406,2,1,0)
|1| Problems
"KRN",.84,1250000.407,-1)
0^393
"KRN",.84,1250000.407,0)
1250000.407^2
"KRN",.84,1250000.407,2,0)
^^1^1^3121029^
"KRN",.84,1250000.407,2,1,0)
Print (C)urrently displayed problems only, or include (A)ll problems? 
"KRN",.84,1250000.408,-1)
0^394
"KRN",.84,1250000.408,0)
1250000.408^3
"KRN",.84,1250000.408,2,0)
^^4^4^3121029^
"KRN",.84,1250000.408,2,1,0)
Enter C to print a copy of your currently displayed view
"KRN",.84,1250000.408,2,2,0)
of this patient's list; to print a complete list of all
"KRN",.84,1250000.408,2,3,0)
active and inactive problems, which may be included in
"KRN",.84,1250000.408,2,4,0)
the patient's chart, select A.
"KRN",.84,1250000.409,-1)
0^395
"KRN",.84,1250000.409,0)
1250000.409^2
"KRN",.84,1250000.409,2,0)
^.844^1^1^3121030^^
"KRN",.84,1250000.409,2,1,0)
No problems found.
"KRN",.84,1250000.41,-1)
0^396
"KRN",.84,1250000.41,0)
1250000.41^2
"KRN",.84,1250000.41,2,0)
^^1^1^3121029^
"KRN",.84,1250000.41,2,1,0)
One moment, please ...
"KRN",.84,1250000.411,-1)
0^397
"KRN",.84,1250000.411,0)
1250000.411^2
"KRN",.84,1250000.411,2,0)
^^1^1^3121029^
"KRN",.84,1250000.411,2,1,0)
** NOT for Medical Record **
"KRN",.84,1250000.412,-1)
0^398
"KRN",.84,1250000.412,0)
1250000.412^2
"KRN",.84,1250000.412,2,0)
^^1^1^3121029^
"KRN",.84,1250000.412,2,1,0)
Medical Record
"KRN",.84,1250000.413,-1)
0^399
"KRN",.84,1250000.413,0)
1250000.413^2
"KRN",.84,1250000.413,2,0)
^.844^1^1^3121030^^
"KRN",.84,1250000.413,2,1,0)
|  PARTIAL PROBLEM LIST
"KRN",.84,1250000.414,-1)
0^400
"KRN",.84,1250000.414,0)
1250000.414^2
"KRN",.84,1250000.414,2,0)
^^1^1^3121029^
"KRN",.84,1250000.414,2,1,0)
|  PROBLEM LIST
"KRN",.84,1250000.415,-1)
0^401
"KRN",.84,1250000.415,0)
1250000.415^2
"KRN",.84,1250000.415,2,0)
^.844^3^3^3130314^^^^
"KRN",.84,1250000.415,2,1,0)
 
"KRN",.84,1250000.415,2,2,0)
       Date                                                    Date of   Date
"KRN",.84,1250000.415,2,3,0)
     Recorded  Problems                                         Onset  Resolved
"KRN",.84,1250000.417,-1)
0^402
"KRN",.84,1250000.417,0)
1250000.417^2^y
"KRN",.84,1250000.417,2,0)
^.844^1^1^3121030^^
"KRN",.84,1250000.417,2,1,0)
Pt Loc: |1|
"KRN",.84,1250000.418,-1)
0^403
"KRN",.84,1250000.418,0)
1250000.418^2
"KRN",.84,1250000.418,2,0)
^^1^1^3121029^
"KRN",.84,1250000.418,2,1,0)
OUTPATIENT
"KRN",.84,1250000.419,-1)
0^404
"KRN",.84,1250000.419,0)
1250000.419^2
"KRN",.84,1250000.419,2,0)
^^1^1^3121029^
"KRN",.84,1250000.419,2,1,0)
$ = Requires verification by provider
"KRN",.84,1250000.42,-1)
0^405
"KRN",.84,1250000.42,0)
1250000.42^2^y
"KRN",.84,1250000.42,2,0)
^.844^1^1^3121030^^
"KRN",.84,1250000.42,2,1,0)
Printed:|1|
"KRN",.84,1250000.421,-1)
0^406
"KRN",.84,1250000.421,0)
1250000.421^2
"KRN",.84,1250000.421,2,0)
^^1^1^3121029^
"KRN",.84,1250000.421,2,1,0)
Building indexes PROBLEM LIST
"KRN",.84,1250000.422,-1)
0^407
"KRN",.84,1250000.422,0)
1250000.422^2^y
"KRN",.84,1250000.422,2,0)
^^1^1^3121029^
"KRN",.84,1250000.422,2,1,0)
There are |1| entries to process.
"KRN",.84,1250000.423,-1)
0^408
"KRN",.84,1250000.423,0)
1250000.423^1^y
"KRN",.84,1250000.423,2,0)
^^1^1^3121029^
"KRN",.84,1250000.423,2,1,0)
Bad ien: |1|, cannot continue.
"KRN",.84,1250000.424,-1)
0^409
"KRN",.84,1250000.424,0)
1250000.424^2^y
"KRN",.84,1250000.424,2,0)
^^1^1^3121029^
"KRN",.84,1250000.424,2,1,0)
Processing entry |1|
"KRN",.84,1250000.425,-1)
0^410
"KRN",.84,1250000.425,0)
1250000.425^1^y
"KRN",.84,1250000.425,2,0)
^^1^1^3121029^
"KRN",.84,1250000.425,2,1,0)
|1| missing problem
"KRN",.84,1250000.426,-1)
0^411
"KRN",.84,1250000.426,0)
1250000.426^1^y
"KRN",.84,1250000.426,2,0)
^^1^1^3121029^
"KRN",.84,1250000.426,2,1,0)
|1| invalid ICD9
"KRN",.84,1250000.427,-1)
0^412
"KRN",.84,1250000.427,0)
1250000.427^1^y
"KRN",.84,1250000.427,2,0)
^^1^1^3121029^
"KRN",.84,1250000.427,2,1,0)
|1| missing DFN
"KRN",.84,1250000.428,-1)
0^413
"KRN",.84,1250000.428,0)
1250000.428^1^y
"KRN",.84,1250000.428,2,0)
^^1^1^3121029^
"KRN",.84,1250000.428,2,1,0)
|1| missing date last modified
"KRN",.84,1250000.429,-1)
0^414
"KRN",.84,1250000.429,0)
1250000.429^1^y
"KRN",.84,1250000.429,2,0)
^^1^1^3121029^
"KRN",.84,1250000.429,2,1,0)
|1| missing status
"KRN",.84,1250000.43,-1)
0^415
"KRN",.84,1250000.43,0)
1250000.43^2^y
"KRN",.84,1250000.43,2,0)
^^1^1^3121029^
"KRN",.84,1250000.43,2,1,0)
|1| PROBLEM LIST results indexed.
"KRN",.84,1250000.431,-1)
0^416
"KRN",.84,1250000.431,0)
1250000.431^1
"KRN",.84,1250000.431,2,0)
^^1^1^3121029^
"KRN",.84,1250000.431,2,1,0)
No 'removed' problems found for this patient.
"KRN",.84,1250000.432,-1)
0^417
"KRN",.84,1250000.432,0)
1250000.432^2^y
"KRN",.84,1250000.432,2,0)
^.844^1^1^3121030^^
"KRN",.84,1250000.432,2,1,0)
REMOVED PROBLEMS FOR |1| (|2|):
"KRN",.84,1250000.433,-1)
0^418
"KRN",.84,1250000.433,0)
1250000.433^2
"KRN",.84,1250000.433,2,0)
^.844^1^1^3121030^^
"KRN",.84,1250000.433,2,1,0)
    Problem
"KRN",.84,1250000.434,-1)
0^419
"KRN",.84,1250000.434,0)
1250000.434^2
"KRN",.84,1250000.434,2,0)
^^1^1^3121029^
"KRN",.84,1250000.434,2,1,0)
Removed  By Whom
"KRN",.84,1250000.435,-1)
0^420
"KRN",.84,1250000.435,0)
1250000.435^2
"KRN",.84,1250000.435,2,0)
^^1^1^3121029^
"KRN",.84,1250000.435,2,1,0)
Press <return> to continue or ^ to exit ...
"KRN",.84,1250000.436,-1)
0^421
"KRN",.84,1250000.436,0)
1250000.436^2
"KRN",.84,1250000.436,2,0)
^^1^1^3121029^
"KRN",.84,1250000.436,2,1,0)
Replacing problem(s) on patient's list ...
"KRN",.84,1250000.437,-1)
0^422
"KRN",.84,1250000.437,0)
1250000.437^2^y
"KRN",.84,1250000.437,2,0)
^.844^3^3^3121030^^^
"KRN",.84,1250000.437,2,1,0)
 
"KRN",.84,1250000.437,2,2,0)
|1|
"KRN",.84,1250000.437,2,3,0)
has an inactive ICD9 code and will not be replaced.
"KRN",.84,1250000.438,-1)
0^423
"KRN",.84,1250000.438,0)
1250000.438^2
"KRN",.84,1250000.438,2,0)
^^1^1^3121029^
"KRN",.84,1250000.438,2,1,0)
Select the problem(s) you wish to replace on this patient's list: 
"KRN",.84,1250000.439,-1)
0^424
"KRN",.84,1250000.439,0)
1250000.439^3
"KRN",.84,1250000.439,2,0)
^^2^2^3121029^
"KRN",.84,1250000.439,2,1,0)
Enter the problems you wish to add back on this patient's problem list,
"KRN",.84,1250000.439,2,2,0)
as a range or list of numbers.
"KRN",.84,1250000.44,-1)
0^425
"KRN",.84,1250000.44,0)
1250000.44^2
"KRN",.84,1250000.44,2,0)
^^1^1^3121029^
"KRN",.84,1250000.44,2,1,0)
Are you sure you want to do this
"KRN",.84,1250000.441,-1)
0^426
"KRN",.84,1250000.441,0)
1250000.441^3
"KRN",.84,1250000.441,2,0)
^^2^2^3121029^
"KRN",.84,1250000.441,2,1,0)
Enter YES if you are ready to have the selected problems put back on this
"KRN",.84,1250000.441,2,2,0)
patient's problem list; press <return> to exit without further action.
"KRN",.84,1250000.442,-1)
0^427
"KRN",.84,1250000.442,0)
1250000.442^1
"KRN",.84,1250000.442,2,0)
^^1^1^3121029^
"KRN",.84,1250000.442,2,1,0)
No patient data available.
"KRN",.84,1250000.443,-1)
0^428
"KRN",.84,1250000.443,0)
1250000.443^2
"KRN",.84,1250000.443,2,0)
^^1^1^3121029^
"KRN",.84,1250000.443,2,1,0)
PROBLEM LIST PATIENT LISTING
"KRN",.84,1250000.444,-1)
0^429
"KRN",.84,1250000.444,0)
1250000.444^2^y
"KRN",.84,1250000.444,2,0)
^^1^1^3121029^
"KRN",.84,1250000.444,2,1,0)
PATIENTS WITH '|1|'
"KRN",.84,1250000.445,-1)
0^430
"KRN",.84,1250000.445,0)
1250000.445^2^y
"KRN",.84,1250000.445,2,0)
^^1^1^3121029^
"KRN",.84,1250000.445,2,1,0)
Total of |1| patients found.
"KRN",.84,1250000.446,-1)
0^431
"KRN",.84,1250000.446,0)
1250000.446^2^y
"KRN",.84,1250000.446,2,0)
^^1^1^3121029^
"KRN",.84,1250000.446,2,1,0)
PAGE |1|
"KRN",.84,1250000.447,-1)
0^432
"KRN",.84,1250000.447,0)
1250000.447^2
"KRN",.84,1250000.447,2,0)
^^1^1^3121029^
"KRN",.84,1250000.447,2,1,0)
Patient Name
"KRN",.84,1250000.448,-1)
0^433
"KRN",.84,1250000.448,0)
1250000.448^2
"KRN",.84,1250000.448,2,0)
^^1^1^3121029^
"KRN",.84,1250000.448,2,1,0)
# Active/Inactive
"KRN",.84,1250000.449,-1)
0^434
"KRN",.84,1250000.449,0)
1250000.449^2
"KRN",.84,1250000.449,2,0)
^^1^1^3121029^
"KRN",.84,1250000.449,2,1,0)
Status
"KRN",.84,1250000.45,-1)
0^435
"KRN",.84,1250000.45,0)
1250000.45^2
"KRN",.84,1250000.45,2,0)
^.844^1^1^3121108^^
"KRN",.84,1250000.45,2,1,0)
Select STATUS: 
"KRN",.84,1250000.451,-1)
0^436
"KRN",.84,1250000.451,0)
1250000.451^3
"KRN",.84,1250000.451,2,0)
^^4^4^3121029^
"KRN",.84,1250000.451,2,1,0)
To list only those patients with this problem in a specific status, select:
"KRN",.84,1250000.451,2,2,0)
          ACTIVE
"KRN",.84,1250000.451,2,3,0)
          INACTIVE
"KRN",.84,1250000.451,2,4,0)
          BOTH ACTIVE & INACTIVE
"KRN",.84,1250000.452,-1)
0^437
"KRN",.84,1250000.452,0)
1250000.452^1
"KRN",.84,1250000.452,2,0)
^^1^1^3121029^
"KRN",.84,1250000.452,2,1,0)
Missing problem narrative
"KRN",.84,1250000.453,-1)
0^438
"KRN",.84,1250000.453,0)
1250000.453^1
"KRN",.84,1250000.453,2,0)
^^1^1^3121029^
"KRN",.84,1250000.453,2,1,0)
Invalid patient
"KRN",.84,1250000.454,-1)
0^439
"KRN",.84,1250000.454,0)
1250000.454^1
"KRN",.84,1250000.454,2,0)
^^1^1^3121029^
"KRN",.84,1250000.454,2,1,0)
Invalid provider
"KRN",.84,1250000.455,-1)
0^440
"KRN",.84,1250000.455,0)
1250000.455^1
"KRN",.84,1250000.455,2,0)
^^1^1^3121029^
"KRN",.84,1250000.455,2,1,0)
Invalid problem
"KRN",.84,1250000.456,-1)
0^441
"KRN",.84,1250000.456,0)
1250000.456^1
"KRN",.84,1250000.456,2,0)
^^1^1^3121029^
"KRN",.84,1250000.456,2,1,0)
Patient does not match for this problem
"KRN",.84,1250000.457,-1)
0^442
"KRN",.84,1250000.457,0)
1250000.457^1
"KRN",.84,1250000.457,2,0)
^^1^1^3121029^
"KRN",.84,1250000.457,2,1,0)
Date Recorded is not editable
"KRN",.84,1250000.458,-1)
0^443
"KRN",.84,1250000.458,0)
1250000.458^1
"KRN",.84,1250000.458,2,0)
^^1^1^3121029^
"KRN",.84,1250000.458,2,1,0)
Cannot delete problem status
"KRN",.84,1250000.459,-1)
0^444
"KRN",.84,1250000.459,0)
1250000.459^1
"KRN",.84,1250000.459,2,0)
^^1^1^3121029^
"KRN",.84,1250000.459,2,1,0)
Date Resolved cannot be prior to Date of Onset
"KRN",.84,1250000.46,-1)
0^445
"KRN",.84,1250000.46,0)
1250000.46^1
"KRN",.84,1250000.46,2,0)
^^1^1^3121029^
"KRN",.84,1250000.46,2,1,0)
Date Recorded cannot be prior to Date of Onset
"KRN",.84,1250000.461,-1)
0^446
"KRN",.84,1250000.461,0)
1250000.461^1
"KRN",.84,1250000.461,2,0)
^^1^1^3121029^
"KRN",.84,1250000.461,2,1,0)
Invalid ICD Diagnosis
"KRN",.84,1250000.462,-1)
0^447
"KRN",.84,1250000.462,0)
1250000.462^1
"KRN",.84,1250000.462,2,0)
^^1^1^3121029^
"KRN",.84,1250000.462,2,1,0)
Invalid Lexicon term
"KRN",.84,1250000.463,-1)
0^448
"KRN",.84,1250000.463,0)
1250000.463^1
"KRN",.84,1250000.463,2,0)
^^1^1^3121029^
"KRN",.84,1250000.463,2,1,0)
Duplicate problem
"KRN",.84,1250000.464,-1)
0^449
"KRN",.84,1250000.464,0)
1250000.464^1
"KRN",.84,1250000.464,2,0)
^^1^1^3121029^
"KRN",.84,1250000.464,2,1,0)
Invalid hospital location
"KRN",.84,1250000.467,-1)
0^450
"KRN",.84,1250000.467,0)
1250000.467^1
"KRN",.84,1250000.467,2,0)
^^1^1^3121029^
"KRN",.84,1250000.467,2,1,0)
Invalid problem status
"KRN",.84,1250000.468,-1)
0^451
"KRN",.84,1250000.468,0)
1250000.468^1
"KRN",.84,1250000.468,2,0)
^^1^1^3121029^
"KRN",.84,1250000.468,2,1,0)
Invalid Date of Onset
"KRN",.84,1250000.469,-1)
0^452
"KRN",.84,1250000.469,0)
1250000.469^1
"KRN",.84,1250000.469,2,0)
^^1^1^3121029^
"KRN",.84,1250000.469,2,1,0)
Invalid Date Resolved
"KRN",.84,1250000.47,-1)
0^453
"KRN",.84,1250000.47,0)
1250000.47^1
"KRN",.84,1250000.47,2,0)
^^1^1^3121029^
"KRN",.84,1250000.47,2,1,0)
Active problems cannot have a Date Resolved
"KRN",.84,1250000.471,-1)
0^454
"KRN",.84,1250000.471,0)
1250000.471^1
"KRN",.84,1250000.471,2,0)
^^1^1^3121029^
"KRN",.84,1250000.471,2,1,0)
Invalid SC flag
"KRN",.84,1250000.472,-1)
0^455
"KRN",.84,1250000.472,0)
1250000.472^1
"KRN",.84,1250000.472,2,0)
^^1^1^3121029^
"KRN",.84,1250000.472,2,1,0)
Invalid Date Recorded
"KRN",.84,1250000.473,-1)
0^456
"KRN",.84,1250000.473,0)
1250000.473^1
"KRN",.84,1250000.473,2,0)
^^1^1^3121029^
"KRN",.84,1250000.473,2,1,0)
Invalid AO flag
"KRN",.84,1250000.474,-1)
0^457
"KRN",.84,1250000.474,0)
1250000.474^1
"KRN",.84,1250000.474,2,0)
^^1^1^3121029^
"KRN",.84,1250000.474,2,1,0)
Invalid IR flag
"KRN",.84,1250000.475,-1)
0^458
"KRN",.84,1250000.475,0)
1250000.475^1
"KRN",.84,1250000.475,2,0)
^^1^1^3121029^
"KRN",.84,1250000.475,2,1,0)
Invalid EC flag
"KRN",.84,1250000.476,-1)
0^459
"KRN",.84,1250000.476,0)
1250000.476^1
"KRN",.84,1250000.476,2,0)
^^1^1^3121029^
"KRN",.84,1250000.476,2,1,0)
Invalid HNC flag
"KRN",.84,1250000.477,-1)
0^460
"KRN",.84,1250000.477,0)
1250000.477^1
"KRN",.84,1250000.477,2,0)
^^1^1^3121029^
"KRN",.84,1250000.477,2,1,0)
Invalid MST flag
"KRN",.84,1250000.478,-1)
0^461
"KRN",.84,1250000.478,0)
1250000.478^1
"KRN",.84,1250000.478,2,0)
^^1^1^3121029^
"KRN",.84,1250000.478,2,1,0)
Invalid CV flag
"KRN",.84,1250000.479,-1)
0^462
"KRN",.84,1250000.479,0)
1250000.479^1
"KRN",.84,1250000.479,2,0)
^^1^1^3121029^
"KRN",.84,1250000.479,2,1,0)
Invalid SHD flag
"KRN",.84,1250000.482,-1)
0^463
"KRN",.84,1250000.482,0)
1250000.482^2
"KRN",.84,1250000.482,2,0)
^^1^1^3121029^
"KRN",.84,1250000.482,2,1,0)
Select PROBLEM: 
"KRN",.84,1250000.483,-1)
0^464
"KRN",.84,1250000.483,0)
1250000.483^2
"KRN",.84,1250000.483,2,0)
^^1^1^3121029^
"KRN",.84,1250000.483,2,1,0)
Select Problem(s)
"KRN",.84,1250000.484,-1)
0^465
"KRN",.84,1250000.484,0)
1250000.484^3^y
"KRN",.84,1250000.484,2,0)
^.844^1^1^3121029^^
"KRN",.84,1250000.484,2,1,0)
Enter the problems you wish to |1|, as a range or list of numbers 
"KRN",.84,1250000.485,-1)
0^466
"KRN",.84,1250000.485,0)
1250000.485^3
"KRN",.84,1250000.485,2,0)
^^1^1^3121029^
"KRN",.84,1250000.485,2,1,0)
Enter the problems you wish to act on, as a range or list of numbers
"KRN",.84,1250000.486,-1)
0^467
"KRN",.84,1250000.486,0)
1250000.486^2
"KRN",.84,1250000.486,2,0)
^^1^1^3121029^
"KRN",.84,1250000.486,2,1,0)
Select Problem
"KRN",.84,1250000.487,-1)
0^468
"KRN",.84,1250000.487,0)
1250000.487^3^y
"KRN",.84,1250000.487,2,0)
^^1^1^3121029^
"KRN",.84,1250000.487,2,1,0)
Enter the number of the problem you wish to |1|
"KRN",.84,1250000.488,-1)
0^469
"KRN",.84,1250000.488,0)
1250000.488^3^y
"KRN",.84,1250000.488,2,0)
^^1^1^3121029^
"KRN",.84,1250000.488,2,1,0)
Enter the number of the problem you wish to act on
"KRN",.84,1250000.489,-1)
0^470
"KRN",.84,1250000.489,0)
1250000.489^2
"KRN",.84,1250000.489,2,0)
^^1^1^3121029^
"KRN",.84,1250000.489,2,1,0)
Are you sure you want to continue? 
"KRN",.84,1250000.49,-1)
0^471
"KRN",.84,1250000.49,0)
1250000.49^3
"KRN",.84,1250000.49,2,0)
^^2^2^3121029^
"KRN",.84,1250000.49,2,1,0)
Enter YES if you want to duplicate this problem on this patient's list;
"KRN",.84,1250000.49,2,2,0)
press <return> to re-enter the problem name.
"KRN",.84,1250000.491,-1)
0^472
"KRN",.84,1250000.491,0)
1250000.491^2^y
"KRN",.84,1250000.491,2,0)
^.844^4^4^3130313^^^
"KRN",.84,1250000.491,2,1,0)
 
"KRN",.84,1250000.491,2,2,0)
>>>  |1|
"KRN",.84,1250000.491,2,3,0)
     is already an INACTIVE problem on this patient's list!
"KRN",.84,1250000.491,2,4,0)
 
"KRN",.84,1250000.492,-1)
0^473
"KRN",.84,1250000.492,0)
1250000.492^2^y
"KRN",.84,1250000.492,2,0)
^.844^4^4^3130313^^
"KRN",.84,1250000.492,2,1,0)
 
"KRN",.84,1250000.492,2,2,0)
>>>  |1|
"KRN",.84,1250000.492,2,3,0)
     is already an ACTIVE problem on this patient's list!
"KRN",.84,1250000.492,2,4,0)
 
"KRN",.84,1250000.493,-1)
0^474
"KRN",.84,1250000.493,0)
1250000.493^2
"KRN",.84,1250000.493,2,0)
^^1^1^3121029^
"KRN",.84,1250000.493,2,1,0)
Resolved: 
"KRN",.84,1250000.494,-1)
0^475
"KRN",.84,1250000.494,0)
1250000.494^2
"KRN",.84,1250000.494,2,0)
^^1^1^3121029^
"KRN",.84,1250000.494,2,1,0)
unspecified
"KRN",.84,1250000.495,-1)
0^476
"KRN",.84,1250000.495,0)
1250000.495^3
"KRN",.84,1250000.495,2,0)
^^1^1^3121029^
"KRN",.84,1250000.495,2,1,0)
Enter YES to remove this value or NO to leave it unchanged.
"KRN",.84,1250000.496,-1)
0^477
"KRN",.84,1250000.496,0)
1250000.496^2
"KRN",.84,1250000.496,2,0)
^^1^1^3121029^
"KRN",.84,1250000.496,2,1,0)
Are you sure you want to remove this value? 
"KRN",.84,1250000.497,-1)
0^478
"KRN",.84,1250000.497,0)
1250000.497^2
"KRN",.84,1250000.497,2,0)
^^1^1^3121029^
"KRN",.84,1250000.497,2,1,0)
+ Next Screen  - Prev Screen  ?? More actions
"KRN",.84,1250000.498,-1)
0^479
"KRN",.84,1250000.498,0)
1250000.498^1
"KRN",.84,1250000.498,2,0)
^^1^1^3121029^
"KRN",.84,1250000.498,2,1,0)
ERROR -- Please check your Patient Files #2 and #9000001 for inconsistencies.
"KRN",.84,1250000.499,-1)
0^480
"KRN",.84,1250000.499,0)
1250000.499^3
"KRN",.84,1250000.499,2,0)
^^2^2^3121029^
"KRN",.84,1250000.499,2,1,0)
   Enter YES to continue and add new problem(s) for this patient:
"KRN",.84,1250000.499,2,2,0)
   press <return> to select another action.
"KRN",.84,1250000.5,-1)
0^481
"KRN",.84,1250000.5,0)
1250000.5^2^y
"KRN",.84,1250000.5,2,0)
^^1^1^3121029^
"KRN",.84,1250000.5,2,1,0)
DATE OF DEATH: |1|
"KRN",.84,1250000.501,-1)
0^482
"KRN",.84,1250000.501,0)
1250000.501^3
"KRN",.84,1250000.501,2,0)
^^1^1^3121029^
"KRN",.84,1250000.501,2,1,0)
Enter the name of the provider responsible for this data.
"KRN",.84,1250000.502,-1)
0^483
"KRN",.84,1250000.502,0)
1250000.502^2
"KRN",.84,1250000.502,2,0)
^^1^1^3121029^
"KRN",.84,1250000.502,2,1,0)
Clinic: 
"KRN",.84,1250000.503,-1)
0^484
"KRN",.84,1250000.503,0)
1250000.503^3
"KRN",.84,1250000.503,2,0)
^^1^1^3121029^
"KRN",.84,1250000.503,2,1,0)
Enter the clinic to be associated with these problems, if available
"KRN",.84,1250000.504,-1)
0^485
"KRN",.84,1250000.504,0)
1250000.504^1
"KRN",.84,1250000.504,2,0)
^.844^1^1^3121108^^^
"KRN",.84,1250000.504,2,1,0)
Only clinics are allowed!
"KRN",.84,1250000.505,-1)
0^486
"KRN",.84,1250000.505,0)
1250000.505^2
"KRN",.84,1250000.505,2,0)
^^1^1^3121029^
"KRN",.84,1250000.505,2,1,0)
Select Specialty Subset: 
"KRN",.84,1250000.506,-1)
0^487
"KRN",.84,1250000.506,0)
1250000.506^3^y
"KRN",.84,1250000.506,2,0)
^.844^7^7^3121030^^^^
"KRN",.84,1250000.506,2,1,0)
Because many discipline-specific terms are synonyms to other terms,
"KRN",.84,1250000.506,2,2,0)
they are not accessible unless you specify the appropriate subset of the
"KRN",.84,1250000.506,2,3,0)
Clinical Lexicon to select from.  Choose from:  Nursing
"KRN",.84,1250000.506,2,4,0)
                                                Immunologic
"KRN",.84,1250000.506,2,5,0)
                                                Dental
"KRN",.84,1250000.506,2,6,0)
                                                Social Work
"KRN",.84,1250000.506,2,7,0)
                                                General Problem
"KRN",.84,1250000.507,-1)
0^488
"KRN",.84,1250000.507,0)
1250000.507^2^y
"KRN",.84,1250000.507,2,0)
^.844^1^1^3121030^^^
"KRN",.84,1250000.507,2,1,0)
|1| of |2|
"KRN",.84,1250000.508,-1)
0^489
"KRN",.84,1250000.508,0)
1250000.508^2
"KRN",.84,1250000.508,2,0)
^.844^1^1^3121106^^^^
"KRN",.84,1250000.508,2,1,0)
Provider: 
"KRN",.84,1250000.509,-1)
0^490
"KRN",.84,1250000.509,0)
1250000.509^2^y
"KRN",.84,1250000.509,2,0)
^.844^1^1^3121106^^^^
"KRN",.84,1250000.509,2,1,0)
Page: |1|
"KRN",.84,1250000.51,-1)
0^491
"KRN",.84,1250000.51,0)
1250000.51^1
"KRN",.84,1250000.51,2,0)
^.844^1^1^3121106^^^
"KRN",.84,1250000.51,2,1,0)
This problem is currently being edited by another user!
"KRN",.84,1250000.511,-1)
0^492
"KRN",.84,1250000.511,0)
1250000.511^2
"KRN",.84,1250000.511,2,0)
^.844^1^1^3121108^^^^
"KRN",.84,1250000.511,2,1,0)
PROBLEM SELECTION LIST
"KRN",.84,1250000.512,-1)
0^493
"KRN",.84,1250000.512,0)
1250000.512^2
"KRN",.84,1250000.512,2,0)
^.844^1^1^3121108^^^
"KRN",.84,1250000.512,2,1,0)
PROBLEM SELECTION CATEGORY
"KRN",.84,1250000.601,-1)
0^494
"KRN",.84,1250000.601,0)
1250000.601^1
"KRN",.84,1250000.601,2,0)
^^1^1^3121026^
"KRN",.84,1250000.601,2,1,0)
Invalid parameter value - 
"KRN",.84,1250000.602,-1)
0^495
"KRN",.84,1250000.602,0)
1250000.602^1
"KRN",.84,1250000.602,2,0)
^.844^1^1^3121031^^
"KRN",.84,1250000.602,2,1,0)
Record in use. Try again in a few moments.
"KRN",.84,1250000.603,-1)
0^496
"KRN",.84,1250000.603,0)
1250000.603^1
"KRN",.84,1250000.603,2,0)
^^1^1^3121031^
"KRN",.84,1250000.603,2,1,0)
Problem not found
"KRN",.84,1250000.604,-1)
0^497
"KRN",.84,1250000.604,0)
1250000.604^1
"KRN",.84,1250000.604,2,0)
^^1^1^3121031^
"KRN",.84,1250000.604,2,1,0)
Problem already deleted
"KRN",.84,1250000.605,-1)
0^498
"KRN",.84,1250000.605,0)
1250000.605^1
"KRN",.84,1250000.605,2,0)
^^1^1^3121031^
"KRN",.84,1250000.605,2,1,0)
Provider not found
"KRN",.84,1250000.606,-1)
0^499
"KRN",.84,1250000.606,0)
1250000.606^1
"KRN",.84,1250000.606,2,0)
^^1^1^3121031^
"KRN",.84,1250000.606,2,1,0)
Facility not found
"KRN",.84,1250000.607,-1)
0^500
"KRN",.84,1250000.607,0)
1250000.607^1
"KRN",.84,1250000.607,2,0)
^^1^1^3121031^
"KRN",.84,1250000.607,2,1,0)
Problem Already Verified
"KRN",.84,1250000.608,-1)
0^501
"KRN",.84,1250000.608,0)
1250000.608^1
"KRN",.84,1250000.608,2,0)
^^1^1^3121031^
"KRN",.84,1250000.608,2,1,0)
List already exists
"KRN",.84,1250000.609,-1)
0^502
"KRN",.84,1250000.609,0)
1250000.609^1
"KRN",.84,1250000.609,2,0)
^^1^1^3121031^
"KRN",.84,1250000.609,2,1,0)
Problem selection list not found
"KRN",.84,1250000.61,-1)
0^503
"KRN",.84,1250000.61,0)
1250000.61^1
"KRN",.84,1250000.61,2,0)
^^1^1^3121031^
"KRN",.84,1250000.61,2,1,0)
This Selection List contains problems with inactive ICD9 codes associated with them.
"KRN",.84,1250000.611,-1)
0^504
"KRN",.84,1250000.611,0)
1250000.611^1
"KRN",.84,1250000.611,2,0)
^^1^1^3121031^
"KRN",.84,1250000.611,2,1,0)
List could not be deleted,
"KRN",.84,1250000.612,-1)
0^505
"KRN",.84,1250000.612,0)
1250000.612^1
"KRN",.84,1250000.612,2,0)
^^1^1^3121031^
"KRN",.84,1250000.612,2,1,0)
Clinic not found
"KRN",.84,1250000.613,-1)
0^506
"KRN",.84,1250000.613,0)
1250000.613^1
"KRN",.84,1250000.613,2,0)
^^1^1^3121031^
"KRN",.84,1250000.613,2,1,0)
Category already exists
"KRN",.84,1250000.614,-1)
0^507
"KRN",.84,1250000.614,0)
1250000.614^1
"KRN",.84,1250000.614,2,0)
^^1^1^3121031^
"KRN",.84,1250000.614,2,1,0)
Problem is already inactive!
"KRN",.84,1250000.615,-1)
0^508
"KRN",.84,1250000.615,0)
1250000.615^1
"KRN",.84,1250000.615,2,0)
^^1^1^3121031^
"KRN",.84,1250000.615,2,1,0)
Inactive ICD9 code. Edit the problem before adding comments.
"KRN",.84,1250000.616,-1)
0^509
"KRN",.84,1250000.616,0)
1250000.616^1
"KRN",.84,1250000.616,2,0)
^^1^1^3121031^
"KRN",.84,1250000.616,2,1,0)
Category not found
"KRN",.84,1250000.617,-1)
0^510
"KRN",.84,1250000.617,0)
1250000.617^1
"KRN",.84,1250000.617,2,0)
^^1^1^3121031^
"KRN",.84,1250000.617,2,1,0)
Category in use. Could not delete.
"KRN",.84,1250000.618,-1)
0^511
"KRN",.84,1250000.618,0)
1250000.618^1
"KRN",.84,1250000.618,2,0)
^^1^1^3121031^
"KRN",.84,1250000.618,2,1,0)
Invalid record
"KRN",.84,1250000.619,-1)
0^514
"KRN",.84,1250000.619,0)
1250000.619^2^y
"KRN",.84,1250000.619,2,0)
^^1^1^3130311^
"KRN",.84,1250000.619,2,1,0)
|1| active problems
"KRN",.84,1250000.62,-1)
0^515
"KRN",.84,1250000.62,0)
1250000.62^2^y
"KRN",.84,1250000.62,2,0)
^.844^1^1^3130321^^
"KRN",.84,1250000.62,2,1,0)
|1| inactive problems
"KRN",.84,1250000.621,-1)
0^516
"KRN",.84,1250000.621,0)
1250000.621^2^y
"KRN",.84,1250000.621,2,0)
^^1^1^3130311^
"KRN",.84,1250000.621,2,1,0)
|1| problems
"KRN",.84,1250000.622,-1)
0^517
"KRN",.84,1250000.622,0)
1250000.622^2^y
"KRN",.84,1250000.622,2,0)
^.844^1^1^3130311^^^
"KRN",.84,1250000.622,2,1,0)
  Exposure:  |1|
"KRN",.84,1250000.623,-1)
0^518
"KRN",.84,1250000.623,0)
1250000.623^2^y
"KRN",.84,1250000.623,2,0)
^.844^1^1^3130311^^
"KRN",.84,1250000.623,2,1,0)
Retrieving list of |1| problems ...
"KRN",.84,1250000.624,-1)
0^519
"KRN",.84,1250000.624,0)
1250000.624^2^y
"KRN",.84,1250000.624,2,0)
^.844^1^1^3130313^^
"KRN",.84,1250000.624,2,1,0)
    Exposure: |1|
"KRN",.84,1250000.625,-1)
0^520
"KRN",.84,1250000.625,0)
1250000.625^2
"KRN",.84,1250000.625,2,0)
^.844^1^1^3130313^^
"KRN",.84,1250000.625,2,1,0)
none
"KRN",.84,1250000.626,-1)
0^521
"KRN",.84,1250000.626,0)
1250000.626^2^y
"KRN",.84,1250000.626,2,0)
^.844^1^1^3130313^^
"KRN",.84,1250000.626,2,1,0)
 Recorded: |1|
"KRN",.84,1250000.627,-1)
0^522
"KRN",.84,1250000.627,0)
1250000.627^2^y
"KRN",.84,1250000.627,2,0)
^.844^1^1^3130313^^
"KRN",.84,1250000.627,2,1,0)
, by |1|
"KRN",.84,1250000.628,-1)
0^523
"KRN",.84,1250000.628,0)
1250000.628^2^y
"KRN",.84,1250000.628,2,0)
^.844^1^1^3130313^^
"KRN",.84,1250000.628,2,1,0)
 ICD Code: |1|
"KRN",.84,1250000.629,-1)
0^524
"KRN",.84,1250000.629,0)
1250000.629^1
"KRN",.84,1250000.629,2,0)
^^1^1^3130313^
"KRN",.84,1250000.629,2,1,0)
does not require verification.
"KRN",.84,1250000.63,-1)
0^525
"KRN",.84,1250000.63,0)
1250000.63^1
"KRN",.84,1250000.63,2,0)
^^1^1^3130313^
"KRN",.84,1250000.63,2,1,0)
has an inactive ICD9 code. Edit the problem before verification.
"KRN",.84,1250000.631,-1)
0^526
"KRN",.84,1250000.631,0)
1250000.631^1
"KRN",.84,1250000.631,2,0)
^^1^1^3130321^
"KRN",.84,1250000.631,2,1,0)
Lexicon term not found
"KRN",.84,1250000.632,-1)
0^527
"KRN",.84,1250000.632,0)
1250000.632^1
"KRN",.84,1250000.632,2,0)
^^1^1^3130321^
"KRN",.84,1250000.632,2,1,0)
Patient not found
"KRN",.84,1250000.633,-1)
0^528
"KRN",.84,1250000.633,0)
1250000.633^1
"KRN",.84,1250000.633,2,0)
^^1^1^3130321^
"KRN",.84,1250000.633,2,1,0)
ICD9 code not found
"KRN",.84,1250000.634,-1)
0^529
"KRN",.84,1250000.634,0)
1250000.634^1
"KRN",.84,1250000.634,2,0)
^^1^1^3130326^
"KRN",.84,1250000.634,2,1,0)
Note not found
"KRN",.84,1250000.635,-1)
0^530
"KRN",.84,1250000.635,0)
1250000.635^1
"KRN",.84,1250000.635,2,0)
^^1^1^3130326^
"KRN",.84,1250000.635,2,1,0)
Item not found
"KRN",.84,1250000.636,-1)
0^531
"KRN",.84,1250000.636,0)
1250000.636^1
"KRN",.84,1250000.636,2,0)
^^1^1^3130327^
"KRN",.84,1250000.636,2,1,0)
Service not found
"KRN",.84,1250000.94,-1)
0^512
"KRN",.84,1250000.94,0)
1250000.94^2
"KRN",.84,1250000.94,2,0)
^^1^1^3121023^
"KRN",.84,1250000.94,2,1,0)
Saving ...
"KRN",.84,1250000.95,-1)
0^513
"KRN",.84,1250000.95,0)
1250000.95^2
"KRN",.84,1250000.95,2,0)
^^1^1^3121023^
"KRN",.84,1250000.95,2,1,0)
 done.
"MBREQ")
0
"ORD",9,.84)
.84;9;;;EDEOUT^DIFROMSO(.84,DA,"",XPDA);FPRE^DIFROMSI(.84,"",XPDA);EPRE^DIFROMSI(.84,DA,"",XPDA,"",OLDA);;EPOST^DIFROMSI(.84,DA,"",XPDA);DEL^DIFROMSK(.84,"",%)
"ORD",9,.84,0)
DIALOG
"PKG",135,-1)
1^1
"PKG",135,0)
PROBLEM LIST^GMPL^Automated Patient Problem List
"PKG",135,22,0)
^9.49I^1^1
"PKG",135,22,1,0)
2.0^3051119^2960924
"PKG",135,22,1,"PAH",1,0)
260002^3130902
"PKG",135,22,1,"PAH",1,1,0)
^^10^10^3130902
"PKG",135,22,1,"PAH",1,1,1,0)
PROBLEM LIST REFACTORING
"PKG",135,22,1,"PAH",1,1,2,0)
 
"PKG",135,22,1,"PAH",1,1,3,0)
Install time: less than a minute
"PKG",135,22,1,"PAH",1,1,4,0)
Journal size: 900 kB
"PKG",135,22,1,"PAH",1,1,5,0)
 
"PKG",135,22,1,"PAH",1,1,6,0)
WARNING
"PKG",135,22,1,"PAH",1,1,7,0)
If attempting to install while a user is currently utilizing the   
"PKG",135,22,1,"PAH",1,1,8,0)
system on Cache, a <PROTECT> error may be shown.
"PKG",135,22,1,"PAH",1,1,9,0)
We reccomend that CPRS and the Problem List menus be
"PKG",135,22,1,"PAH",1,1,10,0)
put out of order during the installation.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
62
"RTN","GMPL")
0^1^B25448276
"RTN","GMPL",1,0)
GMPL ; SLC/MKB/AJB -- Problem List Driver ;3/13/13
"RTN","GMPL",2,0)
 ;;2.0;Problem List;**3,11,28,260002**;Aug 25, 1994;Build 26
"RTN","GMPL",3,0)
EN ; -- main entry point for GMPL PROBLEM LIST
"RTN","GMPL",4,0)
 S GMPLUSER=1
"RTN","GMPL",5,0)
 D EN^VALM("GMPL PROBLEM LIST")
"RTN","GMPL",6,0)
 Q
"RTN","GMPL",7,0)
 ;
"RTN","GMPL",8,0)
DE ; -- main entry point for GMPL DATA ENTRY
"RTN","GMPL",9,0)
 K GMPLUSER
"RTN","GMPL",10,0)
 D EN^VALM("GMPL DATA ENTRY")
"RTN","GMPL",11,0)
 Q
"RTN","GMPL",12,0)
 ;
"RTN","GMPL",13,0)
ADD ; -- add a new problem
"RTN","GMPL",14,0)
 N GMPCLIN
"RTN","GMPL",15,0)
 S VALMBCK="",GMPCLIN=""
"RTN","GMPL",16,0)
 K GMPREBLD
"RTN","GMPL",17,0)
 I +$P(GMPDFN,U,4),'$$CKDEAD^GMPLX1($P(GMPDFN,U,4)) G ADDQ
"RTN","GMPL",18,0)
 S:$E(GMPLVIEW("VIEW"))'="S" GMPCLIN=$$CLINIC^GMPLX1("") G:GMPCLIN="^" ADDQ
"RTN","GMPL",19,0)
 S GMPLSLST=$$USERLST^GMPLEXT(GMPCLIN)
"RTN","GMPL",20,0)
 I GMPLSLST D  G ADD1
"RTN","GMPL",21,0)
 . S $P(GMPLSLST,U,2)=$$LSTTEXT^GMPLEXT(GMPLSLST)
"RTN","GMPL",22,0)
 . D EN^VALM("GMPL LIST MENU")
"RTN","GMPL",23,0)
 W @IOF
"RTN","GMPL",24,0)
 D FULL^VALM1
"RTN","GMPL",25,0)
 F  D ADD^GMPL1 Q:$D(GMPQUIT)  S:$D(GMPSAVED) GMPREBLD=1 K DUOUT,DTOUT,GMPSAVED D EN^DDIOL($$EZBLD^DIALOG(1250000.001),"","!!!")
"RTN","GMPL",26,0)
 S VALMBCK="R"
"RTN","GMPL",27,0)
ADD1 I $D(GMPREBLD) D
"RTN","GMPL",28,0)
 . S VALMBCK="R",GMPRINT=1
"RTN","GMPL",29,0)
 . S VALMBG=$S(GMPARAM("REV"):1,VALMCNT<10:1,1:VALMCNT-9)
"RTN","GMPL",30,0)
 . D BUILD^GMPLMGR(.GMPLIST),HDR^GMPLMGR
"RTN","GMPL",31,0)
ADDQ D KILL^GMPLX S VALMSG=$$MSG^GMPLX S:'VALMCC VALMBCK="R"
"RTN","GMPL",32,0)
 Q
"RTN","GMPL",33,0)
 ;
"RTN","GMPL",34,0)
STATUS ; -- inactivate a problem
"RTN","GMPL",35,0)
 N GMPERR,GMPIFN,GMPLNO,GMPLNUM,GMPLSEL,GMPI,GMPQUIT,GMPSAVED,MSG
"RTN","GMPL",36,0)
 S VALMBCK="" G:+$G(GMPCOUNT)'>0 STQ
"RTN","GMPL",37,0)
 S MSG(1)=$C(7)
"RTN","GMPL",38,0)
 S MSG(2)=$$EZBLD^DIALOG(1250000.002)
"RTN","GMPL",39,0)
 S MSG(2,"F")="!!"
"RTN","GMPL",40,0)
 S MSG(3,"F")="!"
"RTN","GMPL",41,0)
 I GMPLVIEW("ACT")="I" D EN^DDIOL(.MSG) G STQ
"RTN","GMPL",42,0)
 S GMPLSEL=$$SEL^GMPLX($$EZBLD^DIALOG(1250000.003)) G:GMPLSEL="^" STQ
"RTN","GMPL",43,0)
 S GMPLNO=$L(GMPLSEL,",")
"RTN","GMPL",44,0)
 S GMPSAVED=0
"RTN","GMPL",45,0)
 F GMPI=1:1:GMPLNO S GMPLNUM=$P(GMPLSEL,",",GMPI) I GMPLNUM D  Q:$D(GMPQUIT)
"RTN","GMPL",46,0)
 . S GMPIFN=$P($G(^TMP("GMPLIDX",$J,+GMPLNUM)),U,2) Q:GMPIFN'>0
"RTN","GMPL",47,0)
 . I '$$STATUS^GMPL1(GMPIFN,$G(GMPROV),GMPVAMC,.GMPSAVED,"GMPERR") D EN^DDIOL($$FIRSTERR^GMPLAPIE("GMPERR"),"","!!") H 2 Q
"RTN","GMPL",48,0)
 S VALMBCK="R",GMPRINT=1
"RTN","GMPL",49,0)
 D BUILD^GMPLMGR(.GMPLIST),HDR^GMPLMGR
"RTN","GMPL",50,0)
STQ ; cleanup
"RTN","GMPL",51,0)
 D KILL^GMPLX
"RTN","GMPL",52,0)
 S VALMSG=$$MSG^GMPLX
"RTN","GMPL",53,0)
 S:'VALMCC VALMBCK="R"
"RTN","GMPL",54,0)
 Q
"RTN","GMPL",55,0)
 ;
"RTN","GMPL",56,0)
NOTES ; -- annotate a problem
"RTN","GMPL",57,0)
 N GMPLNUM,GMPERR,GMPIFN
"RTN","GMPL",58,0)
 S VALMBCK=""
"RTN","GMPL",59,0)
 G:+$G(GMPCOUNT)'>0 NTQ
"RTN","GMPL",60,0)
 S GMPLNUM=$$SEL1^GMPLX($$EZBLD^DIALOG(1250000.004))
"RTN","GMPL",61,0)
 G:GMPLNUM="^" NTQ
"RTN","GMPL",62,0)
 S GMPIFN=$P($G(^TMP("GMPLIDX",$J,+GMPLNUM)),U,2) G:GMPIFN'>0 NTQ
"RTN","GMPL",63,0)
 I '$$NEWNOTE^GMPL1(.GMPERR,GMPIFN,$G(GMPROV)) D EN^DDIOL($$ERRTXT^GMPLAPIE(.GMPERR),"","!!") H 2 G NTQ
"RTN","GMPL",64,0)
 S VALMBCK="R",GMPRINT=1
"RTN","GMPL",65,0)
 D BUILD^GMPLMGR(.GMPLIST)
"RTN","GMPL",66,0)
NTQ ; cleanup
"RTN","GMPL",67,0)
 D KILL^GMPLX
"RTN","GMPL",68,0)
 S VALMSG=$$MSG^GMPLX
"RTN","GMPL",69,0)
 S:'VALMCC VALMBCK="R"
"RTN","GMPL",70,0)
 Q
"RTN","GMPL",71,0)
 ;
"RTN","GMPL",72,0)
EDIT ; -- edit allowable fields of a problem
"RTN","GMPL",73,0)
 N GMPIFN,GMPLNUM,GMPSAVED,DELETED,MSG,%
"RTN","GMPL",74,0)
 S VALMBCK="" G:+$G(GMPCOUNT)'>0 EDQ
"RTN","GMPL",75,0)
 S GMPLNUM=$$SEL1^GMPLX("edit") G:GMPLNUM="^" EDQ
"RTN","GMPL",76,0)
 S GMPIFN=$P($G(^TMP("GMPLIDX",$J,+GMPLNUM)),U,2) G:GMPIFN'>0 EDQ
"RTN","GMPL",77,0)
 ; Code Set Versioning (CSV)
"RTN","GMPL",78,0)
 ; I '$$CODESTS^GMPLX(GMPIFN,DT) W !!,$$PROBTEXT^GMPLX(GMPIFN),!,"has an inactive ICD code.",! H 3 G EDQ
"RTN","GMPL",79,0)
 S %=$$DELETED^GMPLAPI2(.DELETED,GMPIFN)
"RTN","GMPL",80,0)
 I DELETED D  H 2 G EDQ
"RTN","GMPL",81,0)
 . S MSG(1)=$$PROBTEXT^GMPLX(GMPIFN)
"RTN","GMPL",82,0)
 . S MSG(1,"F")="!!"
"RTN","GMPL",83,0)
 . S MSG(2)=$$EZBLD^DIALOG(1250000.005)
"RTN","GMPL",84,0)
 . S MSG(2,"F")="!"
"RTN","GMPL",85,0)
 . S MSG(3,"F")="!"
"RTN","GMPL",86,0)
 . D EN^DDIOL(.MSG)
"RTN","GMPL",87,0)
 I '$$LOCK^GMPLDAL(GMPIFN,0) D  H 2 G EDQ
"RTN","GMPL",88,0)
 . S MSG(1)=$C(7)
"RTN","GMPL",89,0)
 . S MSG(1,"F")="?0"
"RTN","GMPL",90,0)
 . S MSG(2)=$$LOCKED^GMPLX
"RTN","GMPL",91,0)
 . S MSG(2,"F")="!!"
"RTN","GMPL",92,0)
 . S MSG(3,"F")="!"
"RTN","GMPL",93,0)
 . D EN^DDIOL(.MSG)
"RTN","GMPL",94,0)
 D EN^VALM("GMPL EDIT PROBLEM")
"RTN","GMPL",95,0)
 I $D(GMPSAVED) D BUILD^GMPLMGR(.GMPLIST),HDR^GMPLMGR S GMPRINT=1
"RTN","GMPL",96,0)
 S VALMBCK="R"
"RTN","GMPL",97,0)
 D UNLOCK^GMPLDAL(GMPIFN,0)
"RTN","GMPL",98,0)
EDQ D KILL^GMPLX S VALMSG=$$MSG^GMPLX S:'VALMCC VALMBCK="R"
"RTN","GMPL",99,0)
 Q
"RTN","GMPL",100,0)
 ;
"RTN","GMPL",101,0)
DELETE ; -- delete a problem
"RTN","GMPL",102,0)
 N GMPLSEL,GMPLNO,GMPLNUM,GMPI,GMPQUIT,GMPIFN,GMPERR,GMPSAVED
"RTN","GMPL",103,0)
 S VALMBCK="" G:+$G(GMPCOUNT)'>0 DELQ
"RTN","GMPL",104,0)
 S GMPLSEL=$$SEL^GMPLX($$EZBLD^DIALOG(1250000.006))
"RTN","GMPL",105,0)
 G:GMPLSEL="^" DELQ
"RTN","GMPL",106,0)
 S GMPLNO=$L(GMPLSEL,",")
"RTN","GMPL",107,0)
 G:'$$SUREDEL^GMPLEDT2(GMPLNO-1) DELQ
"RTN","GMPL",108,0)
 S GMPSAVED=0
"RTN","GMPL",109,0)
 F GMPI=1:1:GMPLNO S GMPLNUM=$P(GMPLSEL,",",GMPI) I GMPLNUM D  Q:$D(GMPQUIT)
"RTN","GMPL",110,0)
 . S GMPIFN=$P($G(^TMP("GMPLIDX",$J,+GMPLNUM)),U,2) Q:GMPIFN'>0
"RTN","GMPL",111,0)
 . I '$$DELETE^GMPL1(.GMPERR,GMPIFN,$G(GMPROV),.GMPSAVED) D EN^DDIOL($$ERRTXT^GMPLAPIE(.GMPERR),"","!!")
"RTN","GMPL",112,0)
 I GMPSAVED D
"RTN","GMPL",113,0)
 . S VALMBCK="R",GMPRINT=1 D BUILD^GMPLMGR(.GMPLIST),HDR^GMPLMGR
"RTN","GMPL",114,0)
DELQ ; cleanup
"RTN","GMPL",115,0)
 D KILL^GMPLX
"RTN","GMPL",116,0)
 S VALMSG=$$MSG^GMPLX
"RTN","GMPL",117,0)
 S:'VALMCC VALMBCK="R"
"RTN","GMPL",118,0)
 Q
"RTN","GMPL",119,0)
 ;
"RTN","GMPL",120,0)
VERIFY ; -- verify a problem
"RTN","GMPL",121,0)
 S VALMBCK="" Q:+$G(GMPCOUNT)'>0
"RTN","GMPL",122,0)
 D EN^DDIOL($$EZBLD^DIALOG(1250000.007),"","!!")
"RTN","GMPL",123,0)
 S GMPLSEL=$$SEL^GMPLX($$EZBLD^DIALOG(1250000.008))
"RTN","GMPL",124,0)
 G:GMPLSEL="^" VERQ
"RTN","GMPL",125,0)
 S GMPLNO=$L(GMPLSEL,",")
"RTN","GMPL",126,0)
 F GMPI=1:1:GMPLNO S GMPLNUM=$P(GMPLSEL,",",GMPI) I GMPLNUM D
"RTN","GMPL",127,0)
 . S GMPIFN=$P($G(^TMP("GMPLIDX",$J,GMPLNUM)),U,2)
"RTN","GMPL",128,0)
 . D:GMPIFN VERIFY^GMPL1
"RTN","GMPL",129,0)
 I +$G(GMPSAVED) D BUILD^GMPLMGR(.GMPLIST) S VALMBCK="R"
"RTN","GMPL",130,0)
VERQ ; cleanup
"RTN","GMPL",131,0)
 D KILL^GMPLX
"RTN","GMPL",132,0)
 S VALMSG=$$MSG^GMPLX
"RTN","GMPL",133,0)
 S:'VALMCC VALMBCK="R"
"RTN","GMPL",134,0)
 Q
"RTN","GMPL",135,0)
 ;
"RTN","GMPL",136,0)
EXPAND ; -- detailed display of a problem
"RTN","GMPL",137,0)
 S VALMBCK="" Q:+$G(GMPCOUNT)'>0
"RTN","GMPL",138,0)
 S GMPLSEL=$$SEL^GMPLX("view")
"RTN","GMPL",139,0)
 G:GMPLSEL="^" EXPQ
"RTN","GMPL",140,0)
 S GMPLNO=$L(GMPLSEL,",")-1,GMPI=0
"RTN","GMPL",141,0)
 D EN^VALM("GMPL DETAILED DISPLAY")
"RTN","GMPL",142,0)
 S VALMBCK="R"
"RTN","GMPL",143,0)
EXPQ D KILL^GMPLX S VALMSG=$$MSG^GMPLX S:'VALMCC VALMBCK="R"
"RTN","GMPL",144,0)
 Q
"RTN","GMPL1")
0^2^B22477370
"RTN","GMPL1",1,0)
GMPL1 ; SLC/MKB/AJB -- Problem List actions ; 5/17/13
"RTN","GMPL1",2,0)
 ;;2.0;Problem List;**3,20,28,260002**;Aug 25, 1994;Build 26
"RTN","GMPL1",3,0)
 ; 10 MAR 2000 - MA - Added to the routine another user prompt
"RTN","GMPL1",4,0)
 ; to backup and refine Lexicon search if ICD code 799.9
"RTN","GMPL1",5,0)
ADD ;add new entry to list - Requires GMPDFN
"RTN","GMPL1",6,0)
 N GMPROB,GMPTERM,GMPICD,Y,DUP,GMPIFN,GMPFLD,%
"RTN","GMPL1",7,0)
 W !
"RTN","GMPL1",8,0)
 S GMPROB=$$TEXT^GMPLEDT4("") I GMPROB="^" S GMPQUIT=1 Q
"RTN","GMPL1",9,0)
 I 'GMPARAM("CLU")!('$D(GMPLUSER)&('$$KCHK^XUSRB("GMPL ICD CODE"))) S GMPTERM="",GMPICD="799.9" G ADD1
"RTN","GMPL1",10,0)
 F  D  Q:$D(GMPQUIT)!(+$G(Y))
"RTN","GMPL1",11,0)
 . D SEARCH^GMPLX(.GMPROB,.Y,$$EZBLD^DIALOG(1250000.009),"1")
"RTN","GMPL1",12,0)
 . I +Y'>0 S GMPQUIT=1 Q
"RTN","GMPL1",13,0)
 . S %=$$DUPL^GMPLAPI2(.DUP,+GMPDFN,+Y,GMPROB)
"RTN","GMPL1",14,0)
 . I DUP,'$$DUPLOK^GMPLX(DUP) S (Y,GMPROB)=""
"RTN","GMPL1",15,0)
 . I +Y=1 D ICDMSG
"RTN","GMPL1",16,0)
 Q:$D(GMPQUIT)
"RTN","GMPL1",17,0)
 S GMPTERM=$S(+$G(Y)>1:Y,1:""),GMPICD=$G(Y(1))
"RTN","GMPL1",18,0)
 S:'$L(GMPICD) GMPICD="799.9"
"RTN","GMPL1",19,0)
ADD1 ; set up default values
"RTN","GMPL1",20,0)
 ; -- May enter here with GMPROB=text,GMPICD=code,GMPTERM=#^term
"RTN","GMPL1",21,0)
 ; added for Code Set Versioning (CSV)
"RTN","GMPL1",22,0)
 N OK,GMPI,GMPFLD,GMPELIG
"RTN","GMPL1",23,0)
 D ELIG(.GMPELIG)
"RTN","GMPL1",24,0)
 I '$$DEFAULT^GMPLAPI4(.GMPFLD,GMPROB,GMPICD,GMPTERM,$G(GMPROV),$G(GMPCLIN),.GMPELIG) D  H 3 Q
"RTN","GMPL1",25,0)
 . W !,GMPROB,!,$$ERRTXT^GMPLAPIE(.GMPFLD)
"RTN","GMPL1",26,0)
 K GMPLJUMP
"RTN","GMPL1",27,0)
ADD2 ; prompt for values
"RTN","GMPL1",28,0)
 D FLDS^GMPLEDT3 ; set GMPFLD("FLD") of editable fields
"RTN","GMPL1",29,0)
 F GMPI=2:1:7 D @(GMPFLD("FLD",GMPI)_"^GMPLEDT1") Q:$D(GMPQUIT)  K GMPLJUMP ; cannot ^-jump here
"RTN","GMPL1",30,0)
 Q:$D(GMPQUIT)
"RTN","GMPL1",31,0)
ADD3 ; Ok to save?
"RTN","GMPL1",32,0)
 S OK=$$ACCEPT^GMPLDIS1(.GMPFLD),GMPLJUMP=0 ; ok to save values?
"RTN","GMPL1",33,0)
 I OK="^" D  S GMPQUIT=1 H 1 Q
"RTN","GMPL1",34,0)
 . D EN^DDIOL($$EZBLD^DIALOG(1250000.01),"","!!?10")
"RTN","GMPL1",35,0)
 . D EN^DDIOL("","","!")
"RTN","GMPL1",36,0)
 I OK D  Q  ; ck DA for error?
"RTN","GMPL1",37,0)
 . N I
"RTN","GMPL1",38,0)
 . D EN^DDIOL($$EZBLD^DIALOG(1250000.011),"","!!")
"RTN","GMPL1",39,0)
 . I '$$NEW^GMPLAPI2(.GMPIFN,+GMPDFN,+GMPROV,.GMPFLD,.GMPLUSER) W $$ERRTXT^GMPLAPIE(.GMPIFN) G ADD4
"RTN","GMPL1",40,0)
 . S I=$S(GMPLIST(0)'>0:1,GMPARAM("REV"):$O(GMPLIST(0))-.01,1:GMPLIST(0)+1)
"RTN","GMPL1",41,0)
 . S GMPLIST(I)=GMPIFN,GMPLIST("B",GMPIFN)=I,GMPLIST(0)=$G(GMPLIST(0))+1
"RTN","GMPL1",42,0)
 . S GMPSAVED=1
"RTN","GMPL1",43,0)
 . W " done."
"RTN","GMPL1",44,0)
ADD4 ; Not ok -- edit values, ask again
"RTN","GMPL1",45,0)
 F GMPI=1:1:GMPFLD("FLD",0) D @(GMPFLD("FLD",GMPI)_"^GMPLEDT1") Q:$D(GMPQUIT)!($D(GMPSAVED))  I $G(GMPLJUMP) S GMPI=GMPLJUMP-1 S GMPLJUMP=0 ; reset GMPI to desired fld
"RTN","GMPL1",46,0)
 Q:$D(DTOUT)  K GMPQUIT,DUOUT G ADD3
"RTN","GMPL1",47,0)
 Q
"RTN","GMPL1",48,0)
 ;
"RTN","GMPL1",49,0)
 ; *********************************************************************
"RTN","GMPL1",50,0)
 ; *  GMPIFN expected for the following calls:
"RTN","GMPL1",51,0)
 ;
"RTN","GMPL1",52,0)
STATUS(GMPIFN,GMPROV,GMPVAMC,GMPSAVED,ERT) ; -- inactivate problem
"RTN","GMPL1",53,0)
 N PROBTEXT,GMPFLD,PROMPT,DEFAULT,DELETED,ACTIVE,ONSET,RETURN,%
"RTN","GMPL1",54,0)
 S PROBTEXT=$$PROBTEXT^GMPLX(GMPIFN)
"RTN","GMPL1",55,0)
 S %=$$ACTIVE^GMPLAPI2(.ACTIVE,GMPIFN)
"RTN","GMPL1",56,0)
 I 'ACTIVE D ERR^GMPLAPIE(ERT,"PRBINACT"," ("_PROBTEXT_")") Q 0
"RTN","GMPL1",57,0)
 S %=$$DELETED^GMPLAPI2(.DELETED,GMPIFN)
"RTN","GMPL1",58,0)
 I DELETED D ERR^GMPLAPIE(ERT,"PRBDLTD"," ("_PROBTEXT_")") Q 0
"RTN","GMPL1",59,0)
 I '$$LOCK^GMPLDAL(GMPIFN,0,$G(ERT)) Q 0
"RTN","GMPL1",60,0)
 S %=$$ONSET^GMPLAPI2(.ONSET,GMPIFN)
"RTN","GMPL1",61,0)
 S GMPFLD(.13)=ONSET
"RTN","GMPL1",62,0)
 D EN^DDIOL(PROBTEXT,"","!!")
"RTN","GMPL1",63,0)
 D RESOLVED^GMPLEDT4 G:$D(GMPQUIT) STQ
"RTN","GMPL1",64,0)
 S PROMPT=$$EZBLD^DIALOG(1250000.012),DEFAULT=""
"RTN","GMPL1",65,0)
 D EDNOTE^GMPLEDT4 G:$D(GMPQUIT) STQ
"RTN","GMPL1",66,0)
 D EN^DDIOL("","","!")
"RTN","GMPL1",67,0)
 S %=$$INACTV^GMPLAPI2(.RETURN,GMPIFN,+$G(GMPROV),Y,$P($G(GMPFLD(1.07)),U))
"RTN","GMPL1",68,0)
 D EN^DDIOL($$EZBLD^DIALOG(1250000.013),"","")
"RTN","GMPL1",69,0)
 D EN^DDIOL("","","!")
"RTN","GMPL1",70,0)
 H 1
"RTN","GMPL1",71,0)
 S GMPSAVED=1
"RTN","GMPL1",72,0)
STQ D UNLOCK^GMPLDAL(GMPIFN,0)
"RTN","GMPL1",73,0)
 Q:$D(GMPQUIT) 0
"RTN","GMPL1",74,0)
 Q 1
"RTN","GMPL1",75,0)
 ;
"RTN","GMPL1",76,0)
NEWNOTE(RETURN,GMPIFN,GMPROV) ; -- add a new comment
"RTN","GMPL1",77,0)
 N GMPFLD,NOTES,GMPQUIT,ICDACTV,%
"RTN","GMPL1",78,0)
 W !!,$$PROBTEXT^GMPLX(GMPIFN)
"RTN","GMPL1",79,0)
 S %=$$CODESTS^GMPLAPI2(.ICDACTV,GMPIFN,DT)
"RTN","GMPL1",80,0)
 I 'ICDACTV D  H 2 Q 0
"RTN","GMPL1",81,0)
 . D EN^DDIOL($$EZBLD^DIALOG(1250000.014),"","!")
"RTN","GMPL1",82,0)
 . D EN^DDIOL("","","!")
"RTN","GMPL1",83,0)
 D NOTE^GMPLEDT1
"RTN","GMPL1",84,0)
 Q:$D(GMPQUIT)!($D(GMPFLD(10,"NEW"))'>9) 0
"RTN","GMPL1",85,0)
 M NOTES=GMPFLD(10,"NEW")
"RTN","GMPL1",86,0)
 Q $$NEWNOTE^GMPLAPI3(.RETURN,GMPIFN,+GMPROV,.NOTES)
"RTN","GMPL1",87,0)
 ;
"RTN","GMPL1",88,0)
DELETE(RETURN,GMPIFN,GMPROV,GMPSAVED) ; -- delete a problem
"RTN","GMPL1",89,0)
 N PROMPT,DEFAULT,X,Y,SAVED,DELETED,%
"RTN","GMPL1",90,0)
 W !!,$$PROBTEXT^GMPLX(GMPIFN)
"RTN","GMPL1",91,0)
 S %=$$DELETED^GMPLAPI2(.DELETED,GMPIFN)
"RTN","GMPL1",92,0)
 I DELETED D ERRX^GMPLAPIE(.RETURN,"PRBDLTD") H 2 Q 0
"RTN","GMPL1",93,0)
 S PROMPT=$$EZBLD^DIALOG(1250000.015),DEFAULT=""
"RTN","GMPL1",94,0)
 D EDNOTE^GMPLEDT4 Q:$D(GMPQUIT) 0 D EN^DDIOL("","","!")
"RTN","GMPL1",95,0)
 S SAVED=$$DELETE^GMPLAPI2(.RETURN,GMPIFN,+GMPROV,Y)
"RTN","GMPL1",96,0)
 D:SAVED EN^DDIOL($$EZBLD^DIALOG(1250000.016),"","?0")
"RTN","GMPL1",97,0)
 D EN^DDIOL("","","!") H 1
"RTN","GMPL1",98,0)
 S:SAVED GMPSAVED=1
"RTN","GMPL1",99,0)
 Q SAVED
"RTN","GMPL1",100,0)
 ;
"RTN","GMPL1",101,0)
VERIFY ; -- verify a transcribed problem, if parameter on
"RTN","GMPL1",102,0)
 N GMPERR
"RTN","GMPL1",103,0)
 D EN^DDIOL($$PROBTEXT^GMPLX(GMPIFN),"","!!")
"RTN","GMPL1",104,0)
 S GMPSAVED=$$VERIFY^GMPLAPI2(.GMPERR,GMPIFN)
"RTN","GMPL1",105,0)
 D:GMPSAVED EN^DDIOL($$EZBLD^DIALOG(1250000.017))
"RTN","GMPL1",106,0)
 I 'GMPSAVED D  H 2
"RTN","GMPL1",107,0)
 . I $P($G(GMPERR(0)),U)="INACTICD" D EN^DDIOL($$EZBLD^DIALOG(1250000.630)) Q
"RTN","GMPL1",108,0)
 . I $P($G(GMPERR(0)),U)="PRBVRFD" D EN^DDIOL($$EZBLD^DIALOG(1250000.629)) Q
"RTN","GMPL1",109,0)
 . D EN^DDIOL($$ERRTXT^GMPLAPIE(.GMPERR))
"RTN","GMPL1",110,0)
 D EN^DDIOL("",,"!")
"RTN","GMPL1",111,0)
 Q
"RTN","GMPL1",112,0)
ICDMSG ; If Lexicon returns ICD code 799.9
"RTN","GMPL1",113,0)
 N DIR,DTOUT,DUOUT
"RTN","GMPL1",114,0)
 S DIR(0)="YAO"
"RTN","GMPL1",115,0)
 D BLD^DIALOG(1250000.018,,,"DIR(""A"")")
"RTN","GMPL1",116,0)
 S DIR("B")=$$EZBLD^DIALOG(1250000.019)
"RTN","GMPL1",117,0)
 S DIR("T")=DTIME
"RTN","GMPL1",118,0)
 D ^DIR
"RTN","GMPL1",119,0)
 I $D(DTOUT)!$D(DUOUT) S Y=0
"RTN","GMPL1",120,0)
 I +Y=0 S GMPROB=""
"RTN","GMPL1",121,0)
 Q
"RTN","GMPL1",122,0)
 ;
"RTN","GMPL1",123,0)
ELIG(RETURN) ; Returns array of eligibility status
"RTN","GMPL1",124,0)
 S:GMPSC RETURN("SC")=""
"RTN","GMPL1",125,0)
 S:GMPAGTOR RETURN("AO")=""
"RTN","GMPL1",126,0)
 S:GMPION RETURN("IR")=""
"RTN","GMPL1",127,0)
 S:GMPGULF RETURN("EC")=""
"RTN","GMPL1",128,0)
 Q
"RTN","GMPL31P")
0^3^B20468181
"RTN","GMPL31P",1,0)
GMPL31P ;SLC/JEH -- Post Install Routine ;5/15/13
"RTN","GMPL31P",2,0)
 ;;2.0;Problem List;**31,260002**;Aug 25, 1994;Build 26
"RTN","GMPL31P",3,0)
 ;
"RTN","GMPL31P",4,0)
 ; This routine can be removed after installing patch 
"RTN","GMPL31P",5,0)
 ; GMPL*2*31 or kept and used as IRM tool
"RTN","GMPL31P",6,0)
 Q
"RTN","GMPL31P",7,0)
EN ;ENTRY POINT
"RTN","GMPL31P",8,0)
 ;
"RTN","GMPL31P",9,0)
 N IEN,TOTALWK,ADJUSTED
"RTN","GMPL31P",10,0)
 S IEN=0
"RTN","GMPL31P",11,0)
 S TOTALWK=0
"RTN","GMPL31P",12,0)
 S ADJUSTED=0
"RTN","GMPL31P",13,0)
 W !,"THE FOLLOWING PROBLEM LIST ENTRIES CONTAINED BAD ICD9 POINTERS"
"RTN","GMPL31P",14,0)
 W !,"AND HAVE BEEN MODIFIED WITH A CORRECTED POINTER",!
"RTN","GMPL31P",15,0)
 W !,"PROBLEM IEN     BAD POINTER        CORRECTED POINTER"
"RTN","GMPL31P",16,0)
 W !,"___________     ___________         _______________"
"RTN","GMPL31P",17,0)
 F  S IEN=$O(^AUPNPROB(IEN)) Q:IEN=""  D
"RTN","GMPL31P",18,0)
 .I $P($G(^AUPNPROB(IEN,0)),"^")["-1" D
"RTN","GMPL31P",19,0)
 ..W !,IEN,?16,$P(^AUPNPROB(IEN,0),"^")
"RTN","GMPL31P",20,0)
 ..S $P(^AUPNPROB(IEN,0),"^",1)=$P($$NOS^GMPLEXT,"^",1)
"RTN","GMPL31P",21,0)
 ..W ?36,$P(^AUPNPROB(IEN,0),"^",1)
"RTN","GMPL31P",22,0)
 ..S ADJUSTED=ADJUSTED+1
"RTN","GMPL31P",23,0)
 ..Q
"RTN","GMPL31P",24,0)
 .I $P($G(^AUPNPROB(IEN,0)),"^")["~" D
"RTN","GMPL31P",25,0)
 ..W !,IEN,?16,$P(^AUPNPROB(IEN,0),"^")
"RTN","GMPL31P",26,0)
 ..S $P(^AUPNPROB(IEN,0),"^",1)=+$P(^AUPNPROB(IEN,0),"^",1)
"RTN","GMPL31P",27,0)
 ..W ?36,$P(^AUPNPROB(IEN,0),"^",1)
"RTN","GMPL31P",28,0)
 ..S ADJUSTED=ADJUSTED+1
"RTN","GMPL31P",29,0)
 .S TOTALWK=TOTALWK+1
"RTN","GMPL31P",30,0)
 W !!,"TOTAL ITEMS WORKED = "_TOTALWK
"RTN","GMPL31P",31,0)
 W !,"TOTAL ITEMS ADJUSTED = "_ADJUSTED
"RTN","GMPL31P",32,0)
 W !!
"RTN","GMPL31P",33,0)
 D AUDTCLN
"RTN","GMPL31P",34,0)
 Q
"RTN","GMPL31P",35,0)
 ;
"RTN","GMPL31P",36,0)
AUDTCLN ;
"RTN","GMPL31P",37,0)
 N IEN,TOTALWK,ADJUSTED,HIT
"RTN","GMPL31P",38,0)
 S IEN=0
"RTN","GMPL31P",39,0)
 S TOTALWK=0
"RTN","GMPL31P",40,0)
 S ADJUSTED=0
"RTN","GMPL31P",41,0)
 W !,"THE FOLLOWING PROBLEM LIST AUDIT ENTRIES CONTAINED BAD ICD9 POINTERS"
"RTN","GMPL31P",42,0)
 W !,"AND HAVE BEEN MODIFIED WITH A CORRECTED POINTER",!
"RTN","GMPL31P",43,0)
 W !,"PROBLEM IEN     BAD POINTER        CORRECTED POINTER"
"RTN","GMPL31P",44,0)
 W !,"___________     ___________         _______________"
"RTN","GMPL31P",45,0)
 F  S IEN=$O(^GMPL(125.8,IEN)) Q:IEN=""  D
"RTN","GMPL31P",46,0)
 .I $P($G(^GMPL(125.8,IEN,0)),"^",2)'=.01 Q
"RTN","GMPL31P",47,0)
 .S HIT=0
"RTN","GMPL31P",48,0)
 .; look at the 5th piece
"RTN","GMPL31P",49,0)
 .I $P($G(^GMPL(125.8,IEN,0)),"^",5)["-1" D
"RTN","GMPL31P",50,0)
 ..W !,IEN,?16,$P(^GMPL(125.8,IEN,0),"^",5)
"RTN","GMPL31P",51,0)
 ..S $P(^GMPL(125.8,IEN,0),"^",5)=$P($$NOS^GMPLEXT,"^",1)
"RTN","GMPL31P",52,0)
 ..W ?36,$P(^GMPL(125.8,IEN,0),"^",5)
"RTN","GMPL31P",53,0)
 ..S:HIT=0 ADJUSTED=ADJUSTED+1,HIT=1
"RTN","GMPL31P",54,0)
 ..;
"RTN","GMPL31P",55,0)
 .I $P($G(^GMPL(125.8,IEN,0)),"^",5)["~" D
"RTN","GMPL31P",56,0)
 ..W !,IEN,?16,$P(^GMPL(125.8,IEN,0),"^",5)
"RTN","GMPL31P",57,0)
 ..S $P(^GMPL(125.8,IEN,0),"^",5)=+$P(^GMPL(125.8,IEN,0),"^",5)
"RTN","GMPL31P",58,0)
 ..W ?36,$P(^GMPL(125.8,IEN,0),"^",5)
"RTN","GMPL31P",59,0)
 ..S:HIT=0 ADJUSTED=ADJUSTED+1,HIT=1
"RTN","GMPL31P",60,0)
 ..;
"RTN","GMPL31P",61,0)
 .; look at the 6th piece
"RTN","GMPL31P",62,0)
 .I $P($G(^GMPL(125.8,IEN,0)),"^",6)["-1" D
"RTN","GMPL31P",63,0)
 ..W !,IEN,?16,$P(^GMPL(125.8,IEN,0),"^",6)
"RTN","GMPL31P",64,0)
 ..S $P(^GMPL(125.8,IEN,0),"^",6)=$P($$NOS^GMPLEXT,"^",1)
"RTN","GMPL31P",65,0)
 ..W ?36,$P(^GMPL(125.8,IEN,0),"^",6)
"RTN","GMPL31P",66,0)
 ..S:HIT=0 ADJUSTED=ADJUSTED+1,HIT=1
"RTN","GMPL31P",67,0)
 ..;
"RTN","GMPL31P",68,0)
 .I $P($G(^GMPL(125.8,IEN,0)),"^",6)["~" D
"RTN","GMPL31P",69,0)
 ..W !,IEN,?16,$P(^GMPL(125.8,IEN,0),"^",6)
"RTN","GMPL31P",70,0)
 ..S $P(^GMPL(125.8,IEN,0),"^",6)=+$P(^GMPL(125.8,IEN,0),"^",6)
"RTN","GMPL31P",71,0)
 ..W ?36,$P(^GMPL(125.8,IEN,0),"^",6)
"RTN","GMPL31P",72,0)
 ..S:HIT=0 ADJUSTED=ADJUSTED+1,HIT=1
"RTN","GMPL31P",73,0)
 .S TOTALWK=TOTALWK+1
"RTN","GMPL31P",74,0)
 W !!,"TOTAL AUDIT ITEMS WORKED = "_TOTALWK
"RTN","GMPL31P",75,0)
 W !,"TOTAL AUDIT ITEMS ADJUSTED = "_ADJUSTED
"RTN","GMPL31P",76,0)
 W !,"AN ITEM IEN MAY APPEAR UP TO 2 TIMES ONE FOR EACH BAD PIECE"
"RTN","GMPL31P",77,0)
 W !,"AS THE FIFTH AND SIXTH PIECES ARE CHECKED"
"RTN","GMPL31P",78,0)
 Q
"RTN","GMPL31P",79,0)
 ;
"RTN","GMPL31P",80,0)
 ;
"RTN","GMPL31P",81,0)
FIND ;
"RTN","GMPL31P",82,0)
 ;find and display bad ICD9 pointers in Problem List ONLY
"RTN","GMPL31P",83,0)
 N IEN,TOTALWK,ADJUSTED
"RTN","GMPL31P",84,0)
 S IEN=0
"RTN","GMPL31P",85,0)
 S TOTALWK=0
"RTN","GMPL31P",86,0)
 S ADJUSTED=0
"RTN","GMPL31P",87,0)
 F  S IEN=$O(^AUPNPROB(IEN)) Q:IEN=""  D
"RTN","GMPL31P",88,0)
 .S TOTALWK=TOTALWK+1
"RTN","GMPL31P",89,0)
 .I $P($G(^AUPNPROB(IEN,0)),"^")["-1" W !,IEN,?10,$P(^AUPNPROB(IEN,0),"^") S ADJUSTED=ADJUSTED+1 Q
"RTN","GMPL31P",90,0)
 .I $P($G(^AUPNPROB(IEN,0)),"^")["~" W !,IEN,?10,$P(^AUPNPROB(IEN,0),"^")  S ADJUSTED=ADJUSTED+1
"RTN","GMPL31P",91,0)
 W !,"TOTAL ITEMS LOOKED AT = "_TOTALWK
"RTN","GMPL31P",92,0)
 W !,"TOTAL BAD POINTERS FOUND = "_ADJUSTED
"RTN","GMPL31P",93,0)
 Q
"RTN","GMPL31P",94,0)
 ;
"RTN","GMPL31P",95,0)
FDAUDIT ;
"RTN","GMPL31P",96,0)
 ;finnd and display bad ICD9 pointer in the Audit file
"RTN","GMPL31P",97,0)
 N IEN,TOTALWK,ADJUSTED
"RTN","GMPL31P",98,0)
 S IEN=0
"RTN","GMPL31P",99,0)
 S TOTALWK=0
"RTN","GMPL31P",100,0)
 S ADJUSTED=0
"RTN","GMPL31P",101,0)
 F  S IEN=$O(^GMPL(125.8,IEN)) Q:IEN=""  D
"RTN","GMPL31P",102,0)
 .S TOTALWK=TOTALWK+1
"RTN","GMPL31P",103,0)
 .I $P($G(^GMPL(125.8,IEN,0)),"^")["-1" W !,IEN,?10,$P(^GMPL(125.8,IEN,0),"^") S ADJUSTED=ADJUSTED+1 Q
"RTN","GMPL31P",104,0)
 .I $P($G(^GMPL(125.8,IEN,0)),"^")["~" W !,IEN,?10,$P(^GMPL(125.8,IEN,0),"^")  S ADJUSTED=ADJUSTED+1
"RTN","GMPL31P",105,0)
 .I $P($G(^GMPL(125.8,IEN,0)),"^",5)["-1" W !,IEN,?10,$P(^GMPL(125.8,IEN,0),"^",5) S ADJUSTED=ADJUSTED+1 Q
"RTN","GMPL31P",106,0)
 .I $P($G(^GMPL(125.8,IEN,0)),"^",5)["~" W !,IEN,?10,$P(^GMPL(125.8,IEN,0),"^",5)  S ADJUSTED=ADJUSTED+1
"RTN","GMPL31P",107,0)
 .I $P($G(^GMPL(125.8,IEN,0)),"^",6)["-1" W !,IEN,?10,$P(^GMPL(125.8,IEN,0),"^",6) S ADJUSTED=ADJUSTED+1 Q
"RTN","GMPL31P",108,0)
 .I $P($G(^GMPL(125.8,IEN,0)),"^",6)["~" W !,IEN,?10,$P(^GMPL(125.8,IEN,0),"^",6)  S ADJUSTED=ADJUSTED+1
"RTN","GMPL31P",109,0)
 W !,"TOTAL ITEMS LOOKED AT = "_TOTALWK
"RTN","GMPL31P",110,0)
 W !,"TOTAL BAD POINTERS FOUND = "_ADJUSTED
"RTN","GMPL31P",111,0)
 Q
"RTN","GMPLAPI1")
0^4^B50216559
"RTN","GMPLAPI1",1,0)
GMPLAPI1 ;RGI/VSL -- Build Problem Selection Lists ; 8/29/13
"RTN","GMPLAPI1",2,0)
 ;;2.0;Problem List;**260002**;Aug 25, 1994;Build 26
"RTN","GMPLAPI1",3,0)
NEWLST(RETURN,GMPLLST,GMPLLOC) ; Add new Problem Selection List
"RTN","GMPLAPI1",4,0)
 ;Input:
"RTN","GMPLAPI1",5,0)
 ;  .RETURN [Required,Numeric] Set to the new problem selection list IEN if the call succeeds, 0 otherwise
"RTN","GMPLAPI1",6,0)
 ;                             Set to Error description if the call fails
"RTN","GMPLAPI1",7,0)
 ;   GMPLLST [Required,String] The problem selection list name. List name must be 3-30 characters,
"RTN","GMPLAPI1",8,0)
 ;                             not numeric or starting with punctuation
"RTN","GMPLAPI1",9,0)
 ;   GMPLLOC [Optional,Numeric] IEN of location which will be assigned to the new problem selection list
"RTN","GMPLAPI1",10,0)
 ;Output:
"RTN","GMPLAPI1",11,0)
 ;  1=Success,0=Failure  
"RTN","GMPLAPI1",12,0)
 N LOCERR,%,NEWLST
"RTN","GMPLAPI1",13,0)
 S RETURN=0
"RTN","GMPLAPI1",14,0)
 I '$$LSTNAME^GMPLCHK(.RETURN,.GMPLLST,"GMPLLST") Q 0
"RTN","GMPLAPI1",15,0)
 I '$$SCIEN^GMPLCHK(.RETURN,.GMPLLOC,"GMPLLOC",1) Q 0
"RTN","GMPLAPI1",16,0)
 I $$FINDLST^GMPLDAL1(GMPLLST)>0 D ERRX^GMPLAPIE(.RETURN,"LISTXST") Q 0
"RTN","GMPLAPI1",17,0)
 S NEWLST=$$NEWLST^GMPLDAL1(GMPLLST)
"RTN","GMPLAPI1",18,0)
 I +NEWLST'>0 D ERRX^GMPLAPIE(.RETURN,"INVPARAM","GMPLLST") Q 0
"RTN","GMPLAPI1",19,0)
 I $G(GMPLLOC)'="" S %=$$ADDLOC^GMPLAPI5(.RETURN,+NEWLST,+GMPLLOC)
"RTN","GMPLAPI1",20,0)
 S RETURN=+NEWLST
"RTN","GMPLAPI1",21,0)
 Q 1
"RTN","GMPLAPI1",22,0)
 ;
"RTN","GMPLAPI1",23,0)
DELLST(RETURN,GMPLLST) ; Delete Problem Selection List
"RTN","GMPLAPI1",24,0)
 ;Input:
"RTN","GMPLAPI1",25,0)
 ;  .RETURN [Required,Boolean] Set to 1 if the operation succeeds
"RTN","GMPLAPI1",26,0)
 ;                             Set to Error description if the call fails
"RTN","GMPLAPI1",27,0)
 ;   GMPLLST [Required,Numeric] Problem selection list IEN (pointer to file 125)
"RTN","GMPLAPI1",28,0)
 ;Output:
"RTN","GMPLAPI1",29,0)
 ;  1=Success,0=Failure
"RTN","GMPLAPI1",30,0)
 S RETURN=0
"RTN","GMPLAPI1",31,0)
 I '$$LSTUSED(.RETURN,.GMPLLST) Q 0
"RTN","GMPLAPI1",32,0)
 I RETURN>0 D  Q 0
"RTN","GMPLAPI1",33,0)
 . D ERRX^GMPLAPIE(.RETURN,"LISTUSED",RETURN_" user(s) are currently assigned this list!")
"RTN","GMPLAPI1",34,0)
 . S RETURN=0
"RTN","GMPLAPI1",35,0)
 I '$$LOCKLST(.RETURN,GMPLLST) Q 0
"RTN","GMPLAPI1",36,0)
 S RETURN=$$DELLST^GMPLDAL1(GMPLLST)
"RTN","GMPLAPI1",37,0)
 D UNLKLST(GMPLLST)
"RTN","GMPLAPI1",38,0)
 Q 1
"RTN","GMPLAPI1",39,0)
 ;
"RTN","GMPLAPI1",40,0)
LSTUSED(RETURN,GMPLLST) ; Return number of users assigned to this list
"RTN","GMPLAPI1",41,0)
 ;Input:
"RTN","GMPLAPI1",42,0)
 ;  .RETURN [Required,Numeric] Set to the number of users this list is assigned to.
"RTN","GMPLAPI1",43,0)
 ;                             Set to Error description if the call fails
"RTN","GMPLAPI1",44,0)
 ;   GMPLLST [Required,Numeric] Problem selection list IEN (pointer to file 125)
"RTN","GMPLAPI1",45,0)
 ;Output:
"RTN","GMPLAPI1",46,0)
 ;  1=Success,0=Failure
"RTN","GMPLAPI1",47,0)
 S RETURN=0
"RTN","GMPLAPI1",48,0)
 I '$$LSTIEN^GMPLCHK(.RETURN,.GMPLLST) Q 0
"RTN","GMPLAPI1",49,0)
 S RETURN=$$LSTUSED^GMPLEXT1(GMPLLST)
"RTN","GMPLAPI1",50,0)
 Q 1
"RTN","GMPLAPI1",51,0)
 ;
"RTN","GMPLAPI1",52,0)
NEWCAT(RETURN,GMPLGRP,DUPLIC) ; Add new Category
"RTN","GMPLAPI1",53,0)
 ;Input:
"RTN","GMPLAPI1",54,0)
 ;  .RETURN [Required,Numeric] Set to the new problem category IEN if the call succeeds, 0 otherwise
"RTN","GMPLAPI1",55,0)
 ;                             Set to Error description if the call fails
"RTN","GMPLAPI1",56,0)
 ;   GMPLGRP [Required,String] The problem category name.
"RTN","GMPLAPI1",57,0)
 ;                             Category name must be 3-30 characters, not numeric or starting with punctuation
"RTN","GMPLAPI1",58,0)
 ;   DUPLIC [Optional,Boolean] Allow duplicate category names or not. Default: duplicate names are not allowed.
"RTN","GMPLAPI1",59,0)
 ;Output:
"RTN","GMPLAPI1",60,0)
 ;  1=Success,0=Failure
"RTN","GMPLAPI1",61,0)
 K RETURN S RETURN=0
"RTN","GMPLAPI1",62,0)
 I '$$LSTNAME^GMPLCHK(.RETURN,.GMPLGRP,"GMPLGRP") Q 0
"RTN","GMPLAPI1",63,0)
 I '$$BOOL^GMPLCHK(.RETURN,.DUPLIC,"DUPLIC") Q 0
"RTN","GMPLAPI1",64,0)
 N EXCAT,NEWCAT,RET S EXCAT=0,RET=0
"RTN","GMPLAPI1",65,0)
 I '$G(DUPLIC) S EXCAT=$$FINDCATM^GMPLDAL1(GMPLGRP)
"RTN","GMPLAPI1",66,0)
 I EXCAT>0 D ERRX^GMPLAPIE(.RETURN,"CTGEXIST") Q 0
"RTN","GMPLAPI1",67,0)
 S NEWCAT=$$NEWCAT^GMPLDAL1(GMPLGRP,$G(DUPLIC))
"RTN","GMPLAPI1",68,0)
 I +NEWCAT'>0 D ERRX^GMPLAPIE(.RETURN,"INVPARAM","GMPLGRP") Q 0
"RTN","GMPLAPI1",69,0)
 S RETURN=NEWCAT
"RTN","GMPLAPI1",70,0)
 Q 1
"RTN","GMPLAPI1",71,0)
 ;
"RTN","GMPLAPI1",72,0)
CATUSED(RETURN,GMPLGRP) ; Verify if category is used by a list
"RTN","GMPLAPI1",73,0)
 ;Input:
"RTN","GMPLAPI1",74,0)
 ;  .RETURN [Required,Boolean] Set to 1 if problem category is used by at least one list
"RTN","GMPLAPI1",75,0)
 ;                             Set to Error description if the call fails
"RTN","GMPLAPI1",76,0)
 ;   GMPLGRP [Required,Numeric] Problem category IEN (pointer to file 125.11)
"RTN","GMPLAPI1",77,0)
 ;Output:
"RTN","GMPLAPI1",78,0)
 ;  1=Success,0=Failure
"RTN","GMPLAPI1",79,0)
 S RETURN=0
"RTN","GMPLAPI1",80,0)
 I '$$CTGIEN^GMPLCHK(.RETURN,.GMPLGRP) Q 0
"RTN","GMPLAPI1",81,0)
 S RETURN=$S($$CATUSED^GMPLDAL1(GMPLGRP):1,1:0)
"RTN","GMPLAPI1",82,0)
 Q 1
"RTN","GMPLAPI1",83,0)
 ;
"RTN","GMPLAPI1",84,0)
DELCAT(RETURN,GMPLGRP) ; Delete category
"RTN","GMPLAPI1",85,0)
 ;Input:
"RTN","GMPLAPI1",86,0)
 ;  .RETURN [Required,Boolean] Set to 1 if the operation succeeds
"RTN","GMPLAPI1",87,0)
 ;                             Set to Error description if the call fails
"RTN","GMPLAPI1",88,0)
 ;   GMPLGRP [Required,Numeric] Problem category IEN (pointer to file 125.11)
"RTN","GMPLAPI1",89,0)
 ;Output:
"RTN","GMPLAPI1",90,0)
 ;  1=Success,0=Failure
"RTN","GMPLAPI1",91,0)
 S RETURN=0
"RTN","GMPLAPI1",92,0)
 I '$$CATUSED(.RETURN,GMPLGRP) Q 0
"RTN","GMPLAPI1",93,0)
 I RETURN D  Q 0
"RTN","GMPLAPI1",94,0)
 . D ERRX^GMPLAPIE(.RETURN,"CATUSED")
"RTN","GMPLAPI1",95,0)
 . S RETURN=0
"RTN","GMPLAPI1",96,0)
 S RETURN=$$DELCAT^GMPLDAL1(GMPLGRP)
"RTN","GMPLAPI1",97,0)
 Q 1
"RTN","GMPLAPI1",98,0)
 ;
"RTN","GMPLAPI1",99,0)
LOCKLST(RETURN,GMPLLST) ; Lock specified list
"RTN","GMPLAPI1",100,0)
 ;Input:
"RTN","GMPLAPI1",101,0)
 ;  .RETURN [Required,Boolean] Set to 1 if the operation succeeds
"RTN","GMPLAPI1",102,0)
 ;                             Set to Error description if the call fails
"RTN","GMPLAPI1",103,0)
 ;   GMPLLST [Required,Numeric] Problem selection list IEN (pointer to file 125)
"RTN","GMPLAPI1",104,0)
 ;Output:
"RTN","GMPLAPI1",105,0)
 ;  1=Success,0=Failure
"RTN","GMPLAPI1",106,0)
 S RETURN=0
"RTN","GMPLAPI1",107,0)
 I '$$LSTIEN^GMPLCHK(.RETURN,.GMPLLST) Q 0
"RTN","GMPLAPI1",108,0)
 D LOCKLST^GMPLDAL1(.RETURN,GMPLLST)
"RTN","GMPLAPI1",109,0)
 Q RETURN
"RTN","GMPLAPI1",110,0)
 ;
"RTN","GMPLAPI1",111,0)
UNLKLST(GMPLLST) ; Unlock specified list
"RTN","GMPLAPI1",112,0)
 ;Input:
"RTN","GMPLAPI1",113,0)
 ;   GMPLLST [Required,Numeric] Problem selection list IEN (pointer to file 125)
"RTN","GMPLAPI1",114,0)
 I '+$G(GMPLLST) Q
"RTN","GMPLAPI1",115,0)
 D UNLCKLST^GMPLDAL1(+GMPLLST)
"RTN","GMPLAPI1",116,0)
 Q
"RTN","GMPLAPI1",117,0)
 ;
"RTN","GMPLAPI1",118,0)
LOCKCAT(RETURN,GMPLGRP) ; Lock specified category
"RTN","GMPLAPI1",119,0)
 ;Input:
"RTN","GMPLAPI1",120,0)
 ;  .RETURN [Required,Boolean] Set to 1 if the operation succeeds
"RTN","GMPLAPI1",121,0)
 ;                             Set to Error description if the call fails
"RTN","GMPLAPI1",122,0)
 ;   GMPLGRP [Required,Numeric] Problem category IEN (pointer to file 125.11)
"RTN","GMPLAPI1",123,0)
 ;Output:
"RTN","GMPLAPI1",124,0)
 ;  1=Success,0=Failure
"RTN","GMPLAPI1",125,0)
 S RETURN=0
"RTN","GMPLAPI1",126,0)
 I '$$CTGIEN^GMPLCHK(.RETURN,.GMPLGRP) Q 0
"RTN","GMPLAPI1",127,0)
 D LOCKCAT^GMPLDAL1(.RETURN,GMPLGRP)
"RTN","GMPLAPI1",128,0)
 Q RETURN
"RTN","GMPLAPI1",129,0)
 ;
"RTN","GMPLAPI1",130,0)
UNLKCAT(GMPLGRP) ; Unlock specified category
"RTN","GMPLAPI1",131,0)
 ;Input:
"RTN","GMPLAPI1",132,0)
 ;   GMPLGRP [Required,Numeric] Problem category IEN (pointer to file 125.11)
"RTN","GMPLAPI1",133,0)
 I '+$G(GMPLGRP) Q
"RTN","GMPLAPI1",134,0)
 D UNLCKCAT^GMPLDAL1(GMPLGRP)
"RTN","GMPLAPI1",135,0)
 Q
"RTN","GMPLAPI1",136,0)
 ;
"RTN","GMPLAPI1",137,0)
GETLIST(RETURN,GMPLLST,CODLEN,MINIM) ; Return Problem Selection list details
"RTN","GMPLAPI1",138,0)
 ;Input:
"RTN","GMPLAPI1",139,0)
 ;  .RETURN [Required,Array] Array passed by reference that will receive the data
"RTN","GMPLAPI1",140,0)
 ;                           Set to Error description if the call fails
"RTN","GMPLAPI1",141,0)
 ;      RETURN("LST","CLINIC")=clinic_IEN^clinic_name
"RTN","GMPLAPI1",142,0)
 ;      RETURN("LST","NAME") = name
"RTN","GMPLAPI1",143,0)
 ;      RETURN("LST","MODIFIED")= date last modified in internal^external format, if the list is new this parameter will be valued: ^<new list>
"RTN","GMPLAPI1",144,0)
 ;      RETURN(0) - number of categories
"RTN","GMPLAPI1",145,0)
 ;      RETURN(selection_list_IEN)=sequence#^category_IEN^subheader^show_problems_flag
"RTN","GMPLAPI1",146,0)
 ;      RETURN("GRP", category_IEN)=selection_list_IEN
"RTN","GMPLAPI1",147,0)
 ;      RETURN("SEQ",sequence#)=selection_list_IEN
"RTN","GMPLAPI1",148,0)
 ;      RETURN("GRP", category_IEN,#)=problem_name^ICD9_code^inactive_flag (1 for inactive code, 0 for active)
"RTN","GMPLAPI1",149,0)
 ;   GMPLLST [Required,Numeric] Problem selection list IEN (pointer to file 125)
"RTN","GMPLAPI1",150,0)
 ;   CODLEN [Optional,Numeric] A number that specifies the maxim length of the returned problem text
"RTN","GMPLAPI1",151,0)
 ;   MINIM [Optional,Boolean] When set to 1 will return minimal information (problem selection list name,
"RTN","GMPLAPI1",152,0)
 ;                            date last modified and clinic), otherwise returns full info. Default: 0
"RTN","GMPLAPI1",153,0)
 ;Output:
"RTN","GMPLAPI1",154,0)
 ;  1=Success,0=Failure
"RTN","GMPLAPI1",155,0)
 S RETURN=0
"RTN","GMPLAPI1",156,0)
 I '$$LSTIEN^GMPLCHK(.RETURN,.GMPLLST) Q 0
"RTN","GMPLAPI1",157,0)
 I '$$NUM^GMPLCHK(.RETURN,.CODLEN,"CODLEN",1,0,1) Q 0
"RTN","GMPLAPI1",158,0)
 I '$$BOOL^GMPLCHK(.RETURN,.MINIM,"MINIM") Q 0
"RTN","GMPLAPI1",159,0)
 N GRP,LISTIFN,LIST,%
"RTN","GMPLAPI1",160,0)
 ;S LISTIFN=$$FINDLST^GMPLDAL1(GMPLLST)
"RTN","GMPLAPI1",161,0)
 S %=$$GETLIST^GMPLDAL1(.RETURN,GMPLLST,$G(CODLEN),$G(MINIM))
"RTN","GMPLAPI1",162,0)
 S $P(RETURN("LST","MODIFIED"),U,2)=$S(+RETURN("LST","MODIFIED"):$$FMTE^XLFDT(RETURN("LST","MODIFIED")),1:"<new list>")
"RTN","GMPLAPI1",163,0)
 S $P(RETURN("LST","CLINIC"),U,2)=$$CLINNAME^GMPLEXT(RETURN("LST","CLINIC"))
"RTN","GMPLAPI1",164,0)
 Q:$G(MINIM)>0 1
"RTN","GMPLAPI1",165,0)
 S GRP=0
"RTN","GMPLAPI1",166,0)
 F  S GRP=$O(RETURN("GRP",GRP)) Q:GRP'>0  D
"RTN","GMPLAPI1",167,0)
 . S %=$$GETCATD^GMPLAPI5(.RETURN,+GRP,$G(CODLEN))
"RTN","GMPLAPI1",168,0)
 S RETURN=1
"RTN","GMPLAPI1",169,0)
 Q 1
"RTN","GMPLAPI1",170,0)
 ;
"RTN","GMPLAPI1",171,0)
GETCAT(RETURN,GMPLGRP) ; Return category details
"RTN","GMPLAPI1",172,0)
 ;Input:
"RTN","GMPLAPI1",173,0)
 ;  .RETURN [Required,Array] Array passed by reference that will receive the data
"RTN","GMPLAPI1",174,0)
 ;                           Set to Error description if the call fails
"RTN","GMPLAPI1",175,0)
 ;      RETURN(problem_IEN)=sequence#^lexicon_term_IEN(757.01)^display_text^ICD9_code
"RTN","GMPLAPI1",176,0)
 ;      RETURN(problem_IEN, "CODE")=ICD9_code^inactive_flag
"RTN","GMPLAPI1",177,0)
 ;      RETURN("CAT","MODIFIED")=date last modified in internal^external format
"RTN","GMPLAPI1",178,0)
 ;      RETURN("CAT","NAME")=category name
"RTN","GMPLAPI1",179,0)
 ;      RETURN("SEQ",sequence#)=problem_IEN
"RTN","GMPLAPI1",180,0)
 ;      RETURN("PROB",lexicon_term_IEN(757.01))=problem_IEN
"RTN","GMPLAPI1",181,0)
 ;   GMPLGRP [Required,Numeric] Problem category IEN (pointer to file 125.11)
"RTN","GMPLAPI1",182,0)
 ;Output:
"RTN","GMPLAPI1",183,0)
 ;  1=Success,0=Failure
"RTN","GMPLAPI1",184,0)
 S RETURN=0
"RTN","GMPLAPI1",185,0)
 I '$$CTGIEN^GMPLCHK(.RETURN,.GMPLGRP) Q 0
"RTN","GMPLAPI1",186,0)
 N MODIF,SEQ,IFN,PROB,CNT,CODE,CAT,FLAG,%
"RTN","GMPLAPI1",187,0)
 S %=$$GETCAT^GMPLDAL1(.RETURN,GMPLGRP)
"RTN","GMPLAPI1",188,0)
 S SEQ=0
"RTN","GMPLAPI1",189,0)
 S MODIF=RETURN("CAT","MODIFIED")
"RTN","GMPLAPI1",190,0)
 S $P(RETURN("CAT","MODIFIED"),U,2)=$S(+MODIF:$$FMTE^XLFDT(MODIF),1:"<new category>")
"RTN","GMPLAPI1",191,0)
 F  S SEQ=$O(RETURN("SEQ",SEQ)) Q:SEQ'>0  D
"RTN","GMPLAPI1",192,0)
 . S IFN=$G(RETURN("SEQ",SEQ))
"RTN","GMPLAPI1",193,0)
 . S CODE=$G(RETURN(IFN,"CODE"))
"RTN","GMPLAPI1",194,0)
 . I $L(CODE) D
"RTN","GMPLAPI1",195,0)
 .. I $$STATCHK^ICDAPIU(CODE,DT) S FLAG=0  ; OK - code is active
"RTN","GMPLAPI1",196,0)
 .. E  S FLAG=1
"RTN","GMPLAPI1",197,0)
 .. S RETURN(IFN,"CODE")=CODE_"^"_FLAG
"RTN","GMPLAPI1",198,0)
 S RETURN=1
"RTN","GMPLAPI1",199,0)
 Q 1
"RTN","GMPLAPI1",200,0)
 ;
"RTN","GMPLAPI1",201,0)
SAVLST(RETURN,GMPLLST,SOURCE) ; Save changes to existing list
"RTN","GMPLAPI1",202,0)
 ;Input:
"RTN","GMPLAPI1",203,0)
 ;  .RETURN [Required,Boolean] Set to 1 if operation succeeds
"RTN","GMPLAPI1",204,0)
 ;                             Set to Error description if the call fails
"RTN","GMPLAPI1",205,0)
 ;   GMPLLST [Required,Numeric] Problem selection list IEN (pointer to file 125)
"RTN","GMPLAPI1",206,0)
 ;   SOURCE [Required,Array] A collection of problem categories that will be assigned to the selection list.
"RTN","GMPLAPI1",207,0)
 ;      SOURCE(n)=sequence#^category_IEN^subheader^show_problems_flag
"RTN","GMPLAPI1",208,0)
 ;          'n' can have one of the following values:
"RTN","GMPLAPI1",209,0)
 ;            - problem selection list contents IEN (from file 125.1) - in this case the corresponding entry will be updated or, will be removed if SOURCE(n)="@"
"RTN","GMPLAPI1",210,0)
 ;            - a sequence number followed by 'N' (e.g. 1N,2N etc.) - in this case a new problem entry will be added to this category
"RTN","GMPLAPI1",211,0)
 ;Output:
"RTN","GMPLAPI1",212,0)
 ;  1=Success,0=Failure
"RTN","GMPLAPI1",213,0)
 S RETURN=0
"RTN","GMPLAPI1",214,0)
 I '$$LSTIEN^GMPLCHK(.RETURN,.GMPLLST) Q 0
"RTN","GMPLAPI1",215,0)
 I $D(SOURCE)<10 D ERRX^GMPLAPIE(.RETURN,"INVPARAM","SOURCE") Q 0
"RTN","GMPLAPI1",216,0)
 N TMPLST,DA,DT,INV,%
"RTN","GMPLAPI1",217,0)
 S DA=0,INV=1 ; check SOURCE param
"RTN","GMPLAPI1",218,0)
 F  S DA=$O(SOURCE(DA)) Q:+DA'>0  D 
"RTN","GMPLAPI1",219,0)
 . Q:INV=0
"RTN","GMPLAPI1",220,0)
 . I DA'?.N.1"N" S INV=0 Q
"RTN","GMPLAPI1",221,0)
 . I $L($G(SOURCE(DA)))'>0 S INV=0 Q
"RTN","GMPLAPI1",222,0)
 . I +DA=DA D  Q  ; new link
"RTN","GMPLAPI1",223,0)
 . . I $L($$GETLSTGR^GMPLDAL1(DA))'>0 S INV=0 Q
"RTN","GMPLAPI1",224,0)
 . I "@"[$G(SOURCE(DA)) Q
"RTN","GMPLAPI1",225,0)
 . S TMPLST=$P(SOURCE(DA),"^",2) I $L(TMPLST)'>0 S INV=0 Q
"RTN","GMPLAPI1",226,0)
 . I $L($P(SOURCE(DA),"^",3))'>0 S INV=0 Q
"RTN","GMPLAPI1",227,0)
 . S INV=$$FINDCAT^GMPLDAL1(TMPLST)
"RTN","GMPLAPI1",228,0)
 I INV=0 D ERRX^GMPLAPIE(.RETURN,"INVPARAM","SOURCE") Q 0
"RTN","GMPLAPI1",229,0)
 S %=$$SAVLST^GMPLDAL1(.RETURN,GMPLLST,.SOURCE)
"RTN","GMPLAPI1",230,0)
 S RETURN=1
"RTN","GMPLAPI1",231,0)
 Q 1
"RTN","GMPLAPI1",232,0)
 ;
"RTN","GMPLAPI1",233,0)
SAVGRP(RETURN,GMPLGRP,SOURCE) ; Save changes to existing group
"RTN","GMPLAPI1",234,0)
 ;Input:
"RTN","GMPLAPI1",235,0)
 ;  .RETURN [Required,Boolean] Set to 1 if operation succeeds
"RTN","GMPLAPI1",236,0)
 ;                             Set to Error description if the call fails
"RTN","GMPLAPI1",237,0)
 ;   GMPLGRP [Required,Numeric] The category IEN (pointer to file 125.11)
"RTN","GMPLAPI1",238,0)
 ;   SOURCE [Required,Array] A collection of problems that will be assigned to the problem category
"RTN","GMPLAPI1",239,0)
 ;      SOURCE(n)=sequence^ lexicon_term_IEN ^display_text^ICD9_code
"RTN","GMPLAPI1",240,0)
 ;          'n' can have one of the following values:
"RTN","GMPLAPI1",241,0)
 ;            - problem_IEN (from file 125.12) - in this case the corresponding entry will be updated or, will be removed if SOURCE(n)="@"
"RTN","GMPLAPI1",242,0)
 ;            - a sequence number followed by 'N' (e.g. 1N,2N etc.) - in this case a new problem entry will be added to this category
"RTN","GMPLAPI1",243,0)
 ;Output:
"RTN","GMPLAPI1",244,0)
 ;  1=Success,0=Failure
"RTN","GMPLAPI1",245,0)
 N IDX,SRCERR,SEQ,TERM,CODE,%
"RTN","GMPLAPI1",246,0)
 K RETURN
"RTN","GMPLAPI1",247,0)
 S RETURN=0
"RTN","GMPLAPI1",248,0)
 I '$$CTGIEN^GMPLCHK(.RETURN,.GMPLGRP) Q 0
"RTN","GMPLAPI1",249,0)
 I $D(SOURCE)<10 D ERRX^GMPLAPIE(.RETURN,"INVPARAM","SOURCE") Q 0
"RTN","GMPLAPI1",250,0)
 S IDX=0,SRCERR=0
"RTN","GMPLAPI1",251,0)
 F  S IDX=$O(SOURCE(IDX)) Q:+IDX'>0!SRCERR  D
"RTN","GMPLAPI1",252,0)
 . I IDX'?.N.1"N" D  Q
"RTN","GMPLAPI1",253,0)
 . . S SRCERR=1
"RTN","GMPLAPI1",254,0)
 . . D ERRX^GMPLAPIE(.RETURN,"INVPARAM","SOURCE")
"RTN","GMPLAPI1",255,0)
 . I "@"[SOURCE(IDX) Q
"RTN","GMPLAPI1",256,0)
 . I +IDX=IDX,'$$CTGITM^GMPLCHK(.RETURN,IDX) S SRCERR=1 Q
"RTN","GMPLAPI1",257,0)
 . S SEQ=$P(SOURCE(IDX),U)
"RTN","GMPLAPI1",258,0)
 . S TERM=$P(SOURCE(IDX),U,2)
"RTN","GMPLAPI1",259,0)
 . S CODE=$P(SOURCE(IDX),U,4)
"RTN","GMPLAPI1",260,0)
 . I '$$NUM^GMPLCHK(.RETURN,SEQ,"SEQ, SOURCE("_IDX_")",1,2) S SRCERR=1 Q
"RTN","GMPLAPI1",261,0)
 . I '$$TERMIEN^GMPLCHK(.RETURN,TERM,"TERM, SOURCE("_IDX_")") S SRCERR=1 Q
"RTN","GMPLAPI1",262,0)
 . I CODE'="",'$$ICDCODE^GMPLCHK(.RETURN,+$$CODEN^ICDCODE(CODE),"CODE, SOURCE("_IDX_")",1) S SRCERR=1 Q
"RTN","GMPLAPI1",263,0)
 I SRCERR Q 0
"RTN","GMPLAPI1",264,0)
 S %=$$SAVGRP^GMPLDAL1(.RETURN,GMPLGRP,.SOURCE)
"RTN","GMPLAPI1",265,0)
 S RETURN=1
"RTN","GMPLAPI1",266,0)
 Q 1
"RTN","GMPLAPI1",267,0)
 ;
"RTN","GMPLAPI2")
0^5^B112894889
"RTN","GMPLAPI2",1,0)
GMPLAPI2 ; RGI/CBR Problem List API - NEW,DELETE,VERIFY,VIEW DETAILED INFO,ADD NOTE ;8/29/13
"RTN","GMPLAPI2",2,0)
 ;;2.0;Problem List;**260002**;Aug 25,1994;Build 26
"RTN","GMPLAPI2",3,0)
NEW(RETURN,GMPDFN,GMPROV,GMPFLD,GMPLUSER) ; Save Collected Values in new Problem Entry
"RTN","GMPLAPI2",4,0)
 ;Input:
"RTN","GMPLAPI2",5,0)
 ;  .RETURN [Required,Numeric] Set to the new problem IFN, 0 otherwise.
"RTN","GMPLAPI2",6,0)
 ;                             Set to Error description if the call fails
"RTN","GMPLAPI2",7,0)
 ;   GMPDFN [Required,Numeric] Patient IEN (pointer to file 2)
"RTN","GMPLAPI2",8,0)
 ;   GMPROV [Required,Numeric] Provider IEN (pointer to file 200)
"RTN","GMPLAPI2",9,0)
 ;  .GMPFLD [Required,Array] Array passed by reference that holds the new data.
"RTN","GMPLAPI2",10,0)
 ;                           It should be in the internal format (GMPFLD(field#)=value)
"RTN","GMPLAPI2",11,0)
 ;   GMPLUSER [Optional,Boolean] User is a provider (Problem List User) or a clerk (transcriptionist).
"RTN","GMPLAPI2",12,0)
 ;                               If GMPLUSER is 0, then new problems entered will be flagged as transcribed.
"RTN","GMPLAPI2",13,0)
 ;Output:
"RTN","GMPLAPI2",14,0)
 ;  1=Success,0=Failure
"RTN","GMPLAPI2",15,0)
 S RETURN=0
"RTN","GMPLAPI2",16,0)
 I '$$PATIEN^GMPLCHK(.RETURN,.GMPDFN) Q 0
"RTN","GMPLAPI2",17,0)
 I '$$PROVIEN^GMPLCHK(.RETURN,.GMPROV) Q 0
"RTN","GMPLAPI2",18,0)
 I '$$BOOL^GMPLCHK(.RETURN,.GMPLUSER,"GMPLUSER") Q 0
"RTN","GMPLAPI2",19,0)
 I '$$VLDFLD(.RETURN,.GMPFLD) Q 0
"RTN","GMPLAPI2",20,0)
  ;Defaults
"RTN","GMPLAPI2",21,0)
 N GMPIFN,GMPLNOW,NOTES,%,ICD,NIEN,NARR,I,ERR
"RTN","GMPLAPI2",22,0)
 S GMPLNOW=$$NOW^XLFDT
"RTN","GMPLAPI2",23,0)
 S GMPFLD(.08)=GMPLNOW_U_$$EXTDT^GMPLX(GMPLNOW)
"RTN","GMPLAPI2",24,0)
 S:$G(GMPFLD(.12))="" GMPFLD(.12)="A^ACTIVE"
"RTN","GMPLAPI2",25,0)
 S GMPFLD(1.02)=$S('$$VERIFY^GMPLSITE:"P",+$G(GMPLUSER):"P",1:"T")
"RTN","GMPLAPI2",26,0)
 S GMPFLD(1.03)=DUZ
"RTN","GMPLAPI2",27,0)
 ;Save
"RTN","GMPLAPI2",28,0)
 S GMPIFN=$$CREATE^GMPLDAL(GMPDFN,$$GMPVAMC,.GMPFLD,"RETURN")
"RTN","GMPLAPI2",29,0)
 Q:GMPIFN'>0 0
"RTN","GMPLAPI2",30,0)
 I $D(GMPFLD(10,"NEW"))>9 D 
"RTN","GMPLAPI2",31,0)
 . M NOTES=GMPFLD(10,"NEW")
"RTN","GMPLAPI2",32,0)
 . S %=$$NEWNOTE^GMPLAPI3(.RETURN,GMPIFN,GMPROV,.NOTES)
"RTN","GMPLAPI2",33,0)
 S RETURN=GMPIFN
"RTN","GMPLAPI2",34,0)
 Q 1
"RTN","GMPLAPI2",35,0)
 ;
"RTN","GMPLAPI2",36,0)
UPDATE(RETURN,GMPIFN,GMPFLD,GMPLUSER,GMPROV) ; Save Changes made to Existing Problem
"RTN","GMPLAPI2",37,0)
 ;Input:
"RTN","GMPLAPI2",38,0)
 ;  .RETURN [Required,Boolean] Set to 1 if the save succeeded, 0 otherwise.
"RTN","GMPLAPI2",39,0)
 ;                             Set to Error description if the call fails
"RTN","GMPLAPI2",40,0)
 ;   GMPIFN [Required,Numeric] Problem IEN (pointer to file 9000011)
"RTN","GMPLAPI2",41,0)
 ;  .GMPFLD [Required,Array] Array of modified values. See NEW^GMPLAPI2 for format.
"RTN","GMPLAPI2",42,0)
 ;   GMPLUSER [Optional,Boolean] User is a provider (Problem List User) or a clerk (transcriptionist).
"RTN","GMPLAPI2",43,0)
 ;                               If GMPLUSER is 0, then new problems entered will be flagged as transcribed.
"RTN","GMPLAPI2",44,0)
 ;   GMPROV [Required,Numeric] Provider IEN 
"RTN","GMPLAPI2",45,0)
 ;Output:
"RTN","GMPLAPI2",46,0)
 ;  1=Success,0=Failure
"RTN","GMPLAPI2",47,0)
 N I,TEXT,OLDTEXT,NOTES,GMPSAVED,%,GMPORIG
"RTN","GMPLAPI2",48,0)
 S RETURN=-1
"RTN","GMPLAPI2",49,0)
 I '$$PRBIEN^GMPLCHK(.RETURN,.GMPIFN) Q 0
"RTN","GMPLAPI2",50,0)
 I '$$PROVIEN^GMPLCHK(.RETURN,.GMPROV) Q 0
"RTN","GMPLAPI2",51,0)
 I '$$BOOL^GMPLCHK(.RETURN,.GMPLUSER,"GMPLUSER") Q 0
"RTN","GMPLAPI2",52,0)
 I '$$VLDFLD(.RETURN,.GMPFLD) Q 0
"RTN","GMPLAPI2",53,0)
 I '$$DETAIL(.GMPORIG,GMPIFN,GMPROV) Q 0
"RTN","GMPLAPI2",54,0)
 S:'GMPORIG(1.01) GMPORIG(1.01)="1^Unresolved"
"RTN","GMPLAPI2",55,0)
 S GMPSAVED=$$UPDATE^GMPLDAL(GMPIFN,.GMPORIG,.GMPFLD,GMPLUSER,GMPROV,"RETURN")
"RTN","GMPLAPI2",56,0)
 ; Save Changes to Notes
"RTN","GMPLAPI2",57,0)
 F I=0:0 S I=$O(GMPORIG(10,I)) Q:I'>0  D
"RTN","GMPLAPI2",58,0)
 . Q:GMPORIG(10,I)=$G(GMPFLD(10,I))
"RTN","GMPLAPI2",59,0)
 . S %=$$UPDNOTE^GMPLAPI3(.RETURN,GMPIFN,$G(GMPFLD(10,I)),GMPROV)
"RTN","GMPLAPI2",60,0)
 I $D(GMPFLD(10,"NEW"))>9 D 
"RTN","GMPLAPI2",61,0)
 . M NOTES=GMPFLD(10,"NEW")
"RTN","GMPLAPI2",62,0)
 . S %=$$NEWNOTE^GMPLAPI3(.RETURN,GMPIFN,GMPROV,.NOTES)
"RTN","GMPLAPI2",63,0)
 ; Quit Saving Changes
"RTN","GMPLAPI2",64,0)
 D:GMPSAVED DTMOD^GMPLDAL(GMPIFN)
"RTN","GMPLAPI2",65,0)
 S:GMPSAVED RETURN=GMPIFN
"RTN","GMPLAPI2",66,0)
 Q GMPSAVED
"RTN","GMPLAPI2",67,0)
 ;
"RTN","GMPLAPI2",68,0)
DELETE(RETURN,GMPIFN,GMPROV,REASON) ; DELETE A PROBLEM
"RTN","GMPLAPI2",69,0)
 ;Input:
"RTN","GMPLAPI2",70,0)
 ;  .RETURN [Required,Boolean] Set to 0 if the delete failed, 1 otherwise.
"RTN","GMPLAPI2",71,0)
 ;                             Set to Error description if the call fails
"RTN","GMPLAPI2",72,0)
 ;   GMPIFN [Required,Numeric] Problem IEN (pointer to file 9000011)
"RTN","GMPLAPI2",73,0)
 ;   GMPROV [Required,Numeric] Provider IEN (pointer to file 200)
"RTN","GMPLAPI2",74,0)
 ;   REASON [Optional,String] Comment describing the reason for deleting this problem.
"RTN","GMPLAPI2",75,0)
 ;Output:
"RTN","GMPLAPI2",76,0)
 ;  1=Success,0=Failure
"RTN","GMPLAPI2",77,0)
 N DELETED,%,VALID
"RTN","GMPLAPI2",78,0)
 S RETURN=0
"RTN","GMPLAPI2",79,0)
 I '$$PRBIEN^GMPLCHK(.RETURN,.GMPIFN) Q 0
"RTN","GMPLAPI2",80,0)
 S %=$$DELETED(.DELETED,GMPIFN)
"RTN","GMPLAPI2",81,0)
 I DELETED D ERRX^GMPLAPIE(.RETURN,"PRBDLTD") Q 0 ; Already deleted
"RTN","GMPLAPI2",82,0)
 I '$$PROVIEN^GMPLCHK(.RETURN,$P($G(GMPROV),U)) Q 0
"RTN","GMPLAPI2",83,0)
 I $G(REASON)'="" S %=$$NEWNOTE^GMPLAPI3(.RETURN,GMPIFN,+GMPROV,$G(REASON))
"RTN","GMPLAPI2",84,0)
 S RETURN=$$DELETE^GMPLDAL(GMPIFN,GMPROV,"RETURN")
"RTN","GMPLAPI2",85,0)
 Q RETURN
"RTN","GMPLAPI2",86,0)
 ;
"RTN","GMPLAPI2",87,0)
DETAIL(RETURN,GMPIFN,GMPROV) ; Get detailed problem info
"RTN","GMPLAPI2",88,0)
 ;Input:
"RTN","GMPLAPI2",89,0)
 ;  .RETURN [Required,Array]   Array passed by reference that will receive the data. 
"RTN","GMPLAPI2",90,0)
 ;                             The output format is RETURN(field#)=internal_format^external_format
"RTN","GMPLAPI2",91,0)
 ;                             Set to Error description if the call fails
"RTN","GMPLAPI2",92,0)
 ;   GMPIFN [Required,Numeric] Problem IEN (pointer to file 9000011)
"RTN","GMPLAPI2",93,0)
 ;   GMPROV [Optional,Numeric] Provider IEN (pointer to file 200). The comments returned will be filtered by this provider.
"RTN","GMPLAPI2",94,0)
 ;Output:
"RTN","GMPLAPI2",95,0)
 ;  1=Success,0=Failure
"RTN","GMPLAPI2",96,0)
 N DIC,DIQ,DR,I,CNT,EXT,FOUND,NOTES
"RTN","GMPLAPI2",97,0)
 S RETURN=0
"RTN","GMPLAPI2",98,0)
 I '$$PRBIEN^GMPLCHK(.RETURN,.GMPIFN) Q 0
"RTN","GMPLAPI2",99,0)
 I '$$PROVIEN^GMPLCHK(.RETURN,.GMPROV,,1) Q 0
"RTN","GMPLAPI2",100,0)
 S FOUND=$$DETAIL^GMPLDALF(GMPIFN,.RETURN,"")
"RTN","GMPLAPI2",101,0)
 Q:'FOUND 0
"RTN","GMPLAPI2",102,0)
 F I=.03,.08,.13,1.07,1.09 S $P(RETURN(I),U,2)=$$EXTDT^GMPLX($P(RETURN(I),U))
"RTN","GMPLAPI2",103,0)
 S RETURN(1.11)=+$P(RETURN(1.11),U)_U_$S($P(RETURN(1.11),U):"AGENT ORANGE",1:"")
"RTN","GMPLAPI2",104,0)
 S RETURN(1.12)=+$P(RETURN(1.12),U)_U_$S($P(RETURN(1.12),U):"RADIATION",1:"")
"RTN","GMPLAPI2",105,0)
 S RETURN(1.13)=+$P(RETURN(1.13),U)_U_$S($P(RETURN(1.13),U):"ENV CONTAMINANTS",1:"")
"RTN","GMPLAPI2",106,0)
 S RETURN(1.15)=+$P(RETURN(1.15),U)_U_$S($P(RETURN(1.15),U):"HEAD/NECK CANCER",1:"")
"RTN","GMPLAPI2",107,0)
 S RETURN(1.16)=+$P(RETURN(1.16),U)_U_$S($P(RETURN(1.16),U):"MIL SEXUAL TRAUMA",1:"")
"RTN","GMPLAPI2",108,0)
 S RETURN(1.17)=+$P(RETURN(1.17),U)_U_$S($P(RETURN(1.17),U):"COMBAT VET",1:"")
"RTN","GMPLAPI2",109,0)
 S RETURN(1.18)=+$P(RETURN(1.18),U)_U_$S($P(RETURN(1.18),U):"SHAD",1:"")
"RTN","GMPLAPI2",110,0)
 ;COMMENTS
"RTN","GMPLAPI2",111,0)
 D NOTES^GMPLDAL3(.NOTES,GMPIFN,3,,$$GMPVAMC,.GMPROV)
"RTN","GMPLAPI2",112,0)
 S (RETURN(10),RETURN(10,0))=NOTES
"RTN","GMPLAPI2",113,0)
 I NOTES>0 M RETURN(10)=NOTES
"RTN","GMPLAPI2",114,0)
 Q 1
"RTN","GMPLAPI2",115,0)
 ;
"RTN","GMPLAPI2",116,0)
DETAILX(RETURN,GMPIFN,GMPMULTI) ; Returns Formatted Detailed Data for Problem
"RTN","GMPLAPI2",117,0)
 ;Input:
"RTN","GMPLAPI2",118,0)
 ;  .RETURN [Required,Array]   Array passed by reference that will receive the data. 
"RTN","GMPLAPI2",119,0)
 ;                             Set to Error description if the call fails
"RTN","GMPLAPI2",120,0)
 ;        RETURN("DIAGNOSIS") [String] ICD Code
"RTN","GMPLAPI2",121,0)
 ;        RETURN("PATIENT") [String] Patient Name
"RTN","GMPLAPI2",122,0)
 ;        RETURN("MODIFIED") [DateTime] Date Last Modified
"RTN","GMPLAPI2",123,0)
 ;        RETURN("NARRATIVE") [String] Provider Narrative
"RTN","GMPLAPI2",124,0)
 ;        RETURN("ENTERED") [String] Date Entered ^ Entered by
"RTN","GMPLAPI2",125,0)
 ;        RETURN("STATUS") [String] Status
"RTN","GMPLAPI2",126,0)
 ;        RETURN("PRIORITY") [String] Priority Acute/Chronic
"RTN","GMPLAPI2",127,0)
 ;        RETURN("ONSET") [DateTime] Date of Onset
"RTN","GMPLAPI2",128,0)
 ;        RETURN("PROVIDER") [String] Responsible Provider
"RTN","GMPLAPI2",129,0)
 ;        RETURN("RECORDED") [String] Date Recorded ^ Recorded by
"RTN","GMPLAPI2",130,0)
 ;        RETURN("CLINIC") [String] Hospital Location
"RTN","GMPLAPI2",131,0)
 ;        RETURN("SC") [String] Service Connected (SC/NSC/"")
"RTN","GMPLAPI2",132,0)
 ;        RETURN("EXPOSURE") [Numeric] Number of exposure factors returned
"RTN","GMPLAPI2",133,0)
 ;        RETURN("EXPOSURE",#) [String] One of the following options: "AGENT ORANGE", "RADIATION", "ENV CONTAMINANTS",
"RTN","GMPLAPI2",134,0)
 ;                                      "HEAD AND/OR NECK CANCER", "MILITARY SEXUAL TRAUMA", "COMBAT VET", "SHAD"
"RTN","GMPLAPI2",135,0)
 ;        RETURN("COMMENT") [Numeric] Number of comments
"RTN","GMPLAPI2",136,0)
 ;        RETURN("COMMENT",#) [String] date_note_added^author_name^note_narrative
"RTN","GMPLAPI2",137,0)
 ;   GMPIFN [Required,Numeric] Problem IEN (pointer to file 9000011)
"RTN","GMPLAPI2",138,0)
 ;   GMPMULTI [Optional,Boolean] Multidivisional.If it is set to 1 all comments will be returned.
"RTN","GMPLAPI2",139,0)
 ;                               If it is set to 0 only comments originating from the current users's institution (defined by DUZ(2)) will be returned.
"RTN","GMPLAPI2",140,0)
 ;                               Default: 1 - all comments will be returned
"RTN","GMPLAPI2",141,0)
 ;Output:
"RTN","GMPLAPI2",142,0)
 ;  1=Success,0=Failure
"RTN","GMPLAPI2",143,0)
 N GMPFLD,GMPLP,X,I,CNT,NOTES
"RTN","GMPLAPI2",144,0)
 S RETURN=0
"RTN","GMPLAPI2",145,0)
 I '$$PRBIEN^GMPLCHK(.RETURN,.GMPIFN) Q 0
"RTN","GMPLAPI2",146,0)
 I '$$BOOL^GMPLCHK(.RETURN,.GMPMULTI,"GMPMULTI") Q 0
"RTN","GMPLAPI2",147,0)
 S GMPFLD=""
"RTN","GMPLAPI2",148,0)
 S GMPMULTI=+$G(GMPMULTI,1)
"RTN","GMPLAPI2",149,0)
 Q:'$$DETAIL(.GMPFLD,GMPIFN) 0
"RTN","GMPLAPI2",150,0)
 S RETURN("DIAGNOSIS")=$P(GMPFLD(.01),U,2)
"RTN","GMPLAPI2",151,0)
 S RETURN("PATIENT")=$P(GMPFLD(.02),U,2)
"RTN","GMPLAPI2",152,0)
 S RETURN("MODIFIED")=$P(GMPFLD(.03),U,2)
"RTN","GMPLAPI2",153,0)
 S RETURN("NARRATIVE")=$$PROBTEXT^GMPLX(GMPIFN)
"RTN","GMPLAPI2",154,0)
 S RETURN("ENTERED")=$P(GMPFLD(.08),U,2)_U_$P(GMPFLD(1.03),U,2)
"RTN","GMPLAPI2",155,0)
 S RETURN("STATUS")=$P(GMPFLD(.12),U,2)
"RTN","GMPLAPI2",156,0)
 S X=$S($P(GMPFLD(.12),U)'="A":"",1:$P(GMPFLD(1.14),U))
"RTN","GMPLAPI2",157,0)
 S RETURN("PRIORITY")=$S(X="A":"ACUTE",X="C":"CHRONIC",1:"")
"RTN","GMPLAPI2",158,0)
 S RETURN("ONSET")=$P(GMPFLD(.13),U,2)
"RTN","GMPLAPI2",159,0)
 S RETURN("CONDITION")=$P(GMPFLD(1.02),U,2)
"RTN","GMPLAPI2",160,0)
 S RETURN("PROVIDER")=$P(GMPFLD(1.05),U,2)
"RTN","GMPLAPI2",161,0)
 S RETURN("SERVICE")=$P(GMPFLD(1.06),U,2)
"RTN","GMPLAPI2",162,0)
 S RETURN("RESOLVED")=$P(GMPFLD(1.07),U,2)
"RTN","GMPLAPI2",163,0)
 S RETURN("RECORDED")=$P(GMPFLD(1.09),U,2)_U_$P(GMPFLD(1.04),U,2)
"RTN","GMPLAPI2",164,0)
 S RETURN("CLINIC")=$P(GMPFLD(1.08),U,2)
"RTN","GMPLAPI2",165,0)
 S RETURN("SC")=$S($P(GMPFLD(1.10),U)'="":$P(GMPFLD(1.10),U,2),1:"UNKNOWN")
"RTN","GMPLAPI2",166,0)
 S RETURN("EXPOSURE")=0
"RTN","GMPLAPI2",167,0)
 F I=1.11,1.12,1.13,1.15,1.16,1.17,1.18 I GMPFLD(I) D
"RTN","GMPLAPI2",168,0)
 . S X=RETURN("EXPOSURE")+1
"RTN","GMPLAPI2",169,0)
 . S RETURN("EXPOSURE",X)=$P(GMPFLD(I),U,2)
"RTN","GMPLAPI2",170,0)
 . S RETURN("EXPOSURE")=X
"RTN","GMPLAPI2",171,0)
 ;NOTES
"RTN","GMPLAPI2",172,0)
 D NOTES^GMPLDAL3(.NOTES,GMPIFN,2,0,$S(GMPMULTI:"",1:$$GMPVAMC))
"RTN","GMPLAPI2",173,0)
 S RETURN("COMMENT")=NOTES
"RTN","GMPLAPI2",174,0)
 I NOTES>0 M RETURN("COMMENT")=NOTES
"RTN","GMPLAPI2",175,0)
 ;HISTORY
"RTN","GMPLAPI2",176,0)
 N HIST
"RTN","GMPLAPI2",177,0)
 D GETHIST^GMPLDAL2(.HIST,GMPIFN)
"RTN","GMPLAPI2",178,0)
 S CNT=0
"RTN","GMPLAPI2",179,0)
 I $D(HIST) D
"RTN","GMPLAPI2",180,0)
 . M RETURN("HISTORY")=HIST
"RTN","GMPLAPI2",181,0)
 . S CNT=$O(HIST(""),-1)
"RTN","GMPLAPI2",182,0)
 S RETURN("HISTORY")=CNT
"RTN","GMPLAPI2",183,0)
 Q 1
"RTN","GMPLAPI2",184,0)
 ;
"RTN","GMPLAPI2",185,0)
VERIFY(RETURN,GMPIFN) ; Verify a transcribed problem
"RTN","GMPLAPI2",186,0)
 ;Input:
"RTN","GMPLAPI2",187,0)
 ;  .RETURN [Required,Boolean] Set to 1 if the save succeeded, 0 otherwise.
"RTN","GMPLAPI2",188,0)
 ;                             Set to Error description if the call fails
"RTN","GMPLAPI2",189,0)
 ;   GMPIFN [Required,Numeric] Problem IEN (pointer to file 9000011)
"RTN","GMPLAPI2",190,0)
 ;Output:
"RTN","GMPLAPI2",191,0)
 ;  1=Success,0=Failure
"RTN","GMPLAPI2",192,0)
 N INACTV
"RTN","GMPLAPI2",193,0)
 S RETURN=0
"RTN","GMPLAPI2",194,0)
 I '$$PRBIEN^GMPLCHK(.RETURN,.GMPIFN) Q 0
"RTN","GMPLAPI2",195,0)
 I '$$CODESTS(.INACTV,GMPIFN,DT) D ERRX^GMPLAPIE(.RETURN,"ICDINACT") Q 0
"RTN","GMPLAPI2",196,0)
 I $$VERIFIED^GMPLDAL(GMPIFN) D ERRX^GMPLAPIE(.RETURN,"PRBVRFD") Q 0 ; BAIL OUT - ALREADY VERIFIED
"RTN","GMPLAPI2",197,0)
 Q:'$$LOCK^GMPLDAL(GMPIFN,0,"RETURN") 0
"RTN","GMPLAPI2",198,0)
 D MKPERM^GMPLDAL(GMPIFN)
"RTN","GMPLAPI2",199,0)
 D UNLOCK^GMPLDAL(GMPIFN,0)
"RTN","GMPLAPI2",200,0)
 S RETURN=1
"RTN","GMPLAPI2",201,0)
 Q 1
"RTN","GMPLAPI2",202,0)
 ;
"RTN","GMPLAPI2",203,0)
DUPL(RETURN,GMPDFN,TERM,TEXT,GMPBOTH) ; Check's for Duplicate Entries
"RTN","GMPLAPI2",204,0)
 ;Input:
"RTN","GMPLAPI2",205,0)
 ;  .RETURN [Required,Numeric] If duplicate problem is found this will be set to its IEN, 0 otherwise
"RTN","GMPLAPI2",206,0)
 ;                             Set to Error description if the call fails
"RTN","GMPLAPI2",207,0)
 ;   GMPDFN [Required,Numeric] Patient IEN (pointer to file 2)
"RTN","GMPLAPI2",208,0)
 ;   TERM [Required,Numeric] Problem id. Pointer to the EXPRESSIONS file # 757.01
"RTN","GMPLAPI2",209,0)
 ;   TEXT [Optional,String] Provider narrative to look for.
"RTN","GMPLAPI2",210,0)
 ;   GMPBOTH [Optional,Boolean] 1 = Both Lexicon term (TERM) and provider narrative (TEXT) should match in order to flag a duplicate.
"RTN","GMPLAPI2",211,0)
 ;                              Default: 0 = Either TERM or TEXT will flag a duplicate entry.
"RTN","GMPLAPI2",212,0)
 ;Output:
"RTN","GMPLAPI2",213,0)
 ;  1=Success,0=Failure
"RTN","GMPLAPI2",214,0)
 N IFN,DUPTERM,DUPTEXT,PLIST,TOTAL,I,DET,%,TMPL
"RTN","GMPLAPI2",215,0)
 S RETURN=0,TEXT=$$UP^XLFSTR($G(TEXT))
"RTN","GMPLAPI2",216,0)
 I '$$PATIEN^GMPLCHK(.RETURN,.GMPDFN) Q 0
"RTN","GMPLAPI2",217,0)
 I '$$TERMIEN^GMPLCHK(.RETURN,.TERM) Q 0
"RTN","GMPLAPI2",218,0)
 I '$$BOOL^GMPLCHK(.RETURN,.GMPBOTH,"GMPBOTH") Q 0
"RTN","GMPLAPI2",219,0)
 S GMPBOTH=+$G(GMPBOTH)
"RTN","GMPLAPI2",220,0)
 D GETPLIST^GMPLDAL(.PLIST,.TOTAL,GMPDFN,"AI")
"RTN","GMPLAPI2",221,0)
 Q:PLIST(0)=0 1
"RTN","GMPLAPI2",222,0)
 F I=1:1:PLIST(0) S TMPL(PLIST(I))=""
"RTN","GMPLAPI2",223,0)
 S IFN=0
"RTN","GMPLAPI2",224,0)
 F  S IFN=$O(TMPL(IFN)) D  Q:(IFN="")!(RETURN>0)
"RTN","GMPLAPI2",225,0)
 . S (DUPTERM,DUPTEXT)=0
"RTN","GMPLAPI2",226,0)
 . S %=$$DETAIL(.DET,IFN)
"RTN","GMPLAPI2",227,0)
 . I TERM>1 S:+DET(1.01)=TERM DUPTERM=1
"RTN","GMPLAPI2",228,0)
 . S:TEXT=$$UP^XLFSTR($$NARR^GMPLEXT(+DET(.05))) DUPTEXT=1
"RTN","GMPLAPI2",229,0)
 . I GMPBOTH,DUPTERM&DUPTEXT S RETURN=IFN Q
"RTN","GMPLAPI2",230,0)
 . I 'GMPBOTH,DUPTERM!DUPTEXT S RETURN=IFN Q
"RTN","GMPLAPI2",231,0)
 Q 1
"RTN","GMPLAPI2",232,0)
 ;
"RTN","GMPLAPI2",233,0)
CODESTS(RETURN,GMPIFN,ADATE) ;check status of code associated with a problem
"RTN","GMPLAPI2",234,0)
 ;Input:
"RTN","GMPLAPI2",235,0)
 ;  .RETURN [Required,Boolean] Set to 1 if the code is active on the date passed in ADATE, 0 otherwise.
"RTN","GMPLAPI2",236,0)
 ;                             Set to Error description if the call fails
"RTN","GMPLAPI2",237,0)
 ;   GMPIFN [Required,Numeric] Problem IEN (pointer to file 9000011)
"RTN","GMPLAPI2",238,0)
 ;   ADATE  [Optional,DateTime] The date on which to check the status of ICD9 code. Default is current date.
"RTN","GMPLAPI2",239,0)
 ;Output:
"RTN","GMPLAPI2",240,0)
 ;  1=Success,0=Failure
"RTN","GMPLAPI2",241,0)
 S RETURN=0
"RTN","GMPLAPI2",242,0)
 I '$$PRBIEN^GMPLCHK(.RETURN,.GMPIFN) Q 0
"RTN","GMPLAPI2",243,0)
 I '$$DTIME^GMPLCHK(.RETURN,.ADATE,1) Q 0
"RTN","GMPLAPI2",244,0)
 I $G(ADATE)="" S ADATE=$$NOW^XLFDT
"RTN","GMPLAPI2",245,0)
 S GMPIFN=$$DIAG^GMPLDAL(GMPIFN)
"RTN","GMPLAPI2",246,0)
 S RETURN=+($$STATCHK^ICDAPIU($$CODEC^ICDCODE(+(GMPIFN)),ADATE))
"RTN","GMPLAPI2",247,0)
 Q RETURN
"RTN","GMPLAPI2",248,0)
 ;
"RTN","GMPLAPI2",249,0)
DELETED(RETURN,GMPIFN) ; RETURN=1 if problem is deleted
"RTN","GMPLAPI2",250,0)
 ;Input:
"RTN","GMPLAPI2",251,0)
 ;  .RETURN [Required,Boolean] Set to 1 if the problem is deleted, 0 otherwise.
"RTN","GMPLAPI2",252,0)
 ;                             Set to Error description if the call fails
"RTN","GMPLAPI2",253,0)
 ;   GMPIFN [Required,Numeric] Problem IEN (pointer to file 9000011)
"RTN","GMPLAPI2",254,0)
 ;Output:
"RTN","GMPLAPI2",255,0)
 ;  1=Success,0=Failure
"RTN","GMPLAPI2",256,0)
 S RETURN=0
"RTN","GMPLAPI2",257,0)
 I '$$PRBIEN^GMPLCHK(.RETURN,.GMPIFN) Q 0
"RTN","GMPLAPI2",258,0)
 S RETURN=$$DELETED^GMPLDAL(GMPIFN)
"RTN","GMPLAPI2",259,0)
 Q 1
"RTN","GMPLAPI2",260,0)
 ;
"RTN","GMPLAPI2",261,0)
VERIFIED(RETURN,GMPIFN) ; RETURN=1 if problem is not transcribed
"RTN","GMPLAPI2",262,0)
 ;Input:
"RTN","GMPLAPI2",263,0)
 ;  .RETURN [Required,Boolean] Set to 1 if the problem is verified, 0 otherwise.
"RTN","GMPLAPI2",264,0)
 ;                             Set to Error description if the call fails
"RTN","GMPLAPI2",265,0)
 ;   GMPIFN [Required,Numeric] Problem IEN (pointer to file 9000011)
"RTN","GMPLAPI2",266,0)
 ;Output:
"RTN","GMPLAPI2",267,0)
 ;  1=Success,0=Failure
"RTN","GMPLAPI2",268,0)
 S RETURN=0
"RTN","GMPLAPI2",269,0)
 I '$$PRBIEN^GMPLCHK(.RETURN,.GMPIFN) Q 0
"RTN","GMPLAPI2",270,0)
 S RETURN=$$VERIFIED^GMPLDAL(GMPIFN)
"RTN","GMPLAPI2",271,0)
 Q 1
"RTN","GMPLAPI2",272,0)
 ;
"RTN","GMPLAPI2",273,0)
ACTIVE(RETURN,GMPIFN) ; RETURN=1 if problem is ACTIVE
"RTN","GMPLAPI2",274,0)
 ;Input:
"RTN","GMPLAPI2",275,0)
 ;  .RETURN [Required,Boolean] Set to 1 if the problem is active, 0 otherwise
"RTN","GMPLAPI2",276,0)
 ;                             Set to Error description if the call fails
"RTN","GMPLAPI2",277,0)
 ;   GMPIFN [Required,Numeric] Problem IEN (pointer to file 9000011)
"RTN","GMPLAPI2",278,0)
 ;Output:
"RTN","GMPLAPI2",279,0)
 ;  1=Success,0=Failure
"RTN","GMPLAPI2",280,0)
 S RETURN=0
"RTN","GMPLAPI2",281,0)
 I '$$PRBIEN^GMPLCHK(.RETURN,.GMPIFN) Q 0
"RTN","GMPLAPI2",282,0)
 S RETURN=$$ACTIVE^GMPLDAL(GMPIFN)
"RTN","GMPLAPI2",283,0)
 Q 1
"RTN","GMPLAPI2",284,0)
 ;
"RTN","GMPLAPI2",285,0)
ONSET(RETURN,GMPIFN) ; Returns the date of onset
"RTN","GMPLAPI2",286,0)
 ;Input:
"RTN","GMPLAPI2",287,0)
 ;  .RETURN [Required,DateTime] Set to the onset date.
"RTN","GMPLAPI2",288,0)
 ;                              Set to Error description if the call fails
"RTN","GMPLAPI2",289,0)
 ;   GMPIFN [Required,Numeric] Problem IEN (pointer to file 9000011)
"RTN","GMPLAPI2",290,0)
 ;Output:
"RTN","GMPLAPI2",291,0)
 ;  1=Success,0=Failure
"RTN","GMPLAPI2",292,0)
 S RETURN=0
"RTN","GMPLAPI2",293,0)
 I '$$PRBIEN^GMPLCHK(.RETURN,.GMPIFN) Q 0
"RTN","GMPLAPI2",294,0)
 S RETURN=$$ONSET^GMPLDAL(GMPIFN)
"RTN","GMPLAPI2",295,0)
 Q 1
"RTN","GMPLAPI2",296,0)
 ;
"RTN","GMPLAPI2",297,0)
INACTV(RETURN,GMPIFN,GMPROV,NOTE,RESOLVED) ; Inactivate problem
"RTN","GMPLAPI2",298,0)
 ;Input:
"RTN","GMPLAPI2",299,0)
 ;  .RETURN [Required,Boolean] Set to 0 if the inactivation failed, 1 otherwise.
"RTN","GMPLAPI2",300,0)
 ;                             Set to Error description if the call fails
"RTN","GMPLAPI2",301,0)
 ;   GMPIFN [Required,Numeric] Problem IEN (pointer to file 9000011)
"RTN","GMPLAPI2",302,0)
 ;   GMPROV [Required,Numeric] Provider IEN (pointer to file 200)
"RTN","GMPLAPI2",303,0)
 ;   NOTE [Optional,String] Comment describing the reason for inactivating this problem.
"RTN","GMPLAPI2",304,0)
 ;   RESOLVED [Optional,DateTime] Resolved date.
"RTN","GMPLAPI2",305,0)
 ;Output:
"RTN","GMPLAPI2",306,0)
 ;  1=Success,0=Failure
"RTN","GMPLAPI2",307,0)
 N DA,DR,DIE,DELETED,ACTIVE,%,CHNGE
"RTN","GMPLAPI2",308,0)
 S RETURN=0
"RTN","GMPLAPI2",309,0)
 I '$$PRBIEN^GMPLCHK(.RETURN,.GMPIFN) Q 0
"RTN","GMPLAPI2",310,0)
 I '$$PROVIEN^GMPLCHK(.RETURN,.GMPROV) Q 0
"RTN","GMPLAPI2",311,0)
 I '$$DTIME^GMPLCHK(.RETURN,.RESOLVED,1) Q 0
"RTN","GMPLAPI2",312,0)
 S %=$$ACTIVE(.ACTIVE,GMPIFN)
"RTN","GMPLAPI2",313,0)
 I 'ACTIVE D ERRX^GMPLAPIE(.RETURN,"PRBINACT"," ("_$$PROBTEXT^GMPLX(GMPIFN)_")") Q 0
"RTN","GMPLAPI2",314,0)
 S %=$$DELETED(.DELETED,GMPIFN)
"RTN","GMPLAPI2",315,0)
 I DELETED D ERRX^GMPLAPIE(.RETURN,"PRBDLTD"," ("_$$PROBTEXT^GMPLX(GMPIFN)_")") Q 0
"RTN","GMPLAPI2",316,0)
 S:$G(NOTE)'="" %=$$NEWNOTE^GMPLAPI3(.RETURN,GMPIFN,GMPROV,NOTE)
"RTN","GMPLAPI2",317,0)
 D INACTV^GMPLDAL(GMPIFN,$P($G(RESOLVED),U),.GMPROV)
"RTN","GMPLAPI2",318,0)
 S RETURN=1
"RTN","GMPLAPI2",319,0)
 Q RETURN
"RTN","GMPLAPI2",320,0)
 ;
"RTN","GMPLAPI2",321,0)
GMPVAMC() ;
"RTN","GMPLAPI2",322,0)
 Q +$G(DUZ(2))
"RTN","GMPLAPI2",323,0)
GLBINST() ;^AUPNPROB is installed?
"RTN","GMPLAPI2",324,0)
 Q $$AUPNEXST^GMPLDAL()
"RTN","GMPLAPI2",325,0)
 ;
"RTN","GMPLAPI2",326,0)
VLDFLD(RETURN,GMPFLD) ;Internal entry to validate and set defaults to GMPFLD
"RTN","GMPLAPI2",327,0)
 N GMPIFN,NOTES,%,ICD,NIEN,NARR,I,ERR
"RTN","GMPLAPI2",328,0)
 ;Validate GMPFLD
"RTN","GMPLAPI2",329,0)
 ;ICD9
"RTN","GMPLAPI2",330,0)
 I $D(GMPFLD)<10 D ERRX^GMPLAPIE(.RETURN,"INVPARAM","GMPFLD") Q 0
"RTN","GMPLAPI2",331,0)
 S ICD=$P($G(GMPFLD(.01)),U)
"RTN","GMPLAPI2",332,0)
 I ICD=-1 S GMPFLD(.01)=$$NOS^GMPLEXT ;chk for error from ICD
"RTN","GMPLAPI2",333,0)
 I '$$ICDCODE^GMPLCHK(.RETURN,ICD,"GMPFLD(.01)",1) Q 0
"RTN","GMPLAPI2",334,0)
 I ICD="" S GMPFLD(.01)=$$NOS^GMPLEXT
"RTN","GMPLAPI2",335,0)
 ;Lexicon text
"RTN","GMPLAPI2",336,0)
 I '$$TERMIEN^GMPLCHK(.RETURN,$P($G(GMPFLD(1.01)),U),"GMPFLD(1.01)",1) Q 0
"RTN","GMPLAPI2",337,0)
 I '$G(GMPFLD(1.01)) S GMPFLD(1.01)="1^Unresolved"
"RTN","GMPLAPI2",338,0)
 ;Provider narrative
"RTN","GMPLAPI2",339,0)
 S NIEN=$P($G(GMPFLD(.05)),U),NARR=$P($G(GMPFLD(.05)),U,2)
"RTN","GMPLAPI2",340,0)
 I NIEN="",NARR="" D ERRX^GMPLAPIE(.RETURN,"INVPARAM","GMPFLD(.05)") Q 0
"RTN","GMPLAPI2",341,0)
 I NIEN'="",'$$NARREXST^GMPLEXT(NIEN) D ERRX^GMPLAPIE(.RETURN,"INVPARAM","GMPFLD(.05)") Q 0
"RTN","GMPLAPI2",342,0)
 I NIEN="" S GMPFLD(.05)=$$PROVNARR^GMPLEXT(NARR,+GMPFLD(1.01))
"RTN","GMPLAPI2",343,0)
 ;Status
"RTN","GMPLAPI2",344,0)
 I '$$CODESET^GMPLCHK(.RETURN,$P($G(GMPFLD(1.02)),U),"GMPFLD(1.02)","TPH",1,0) Q 0
"RTN","GMPLAPI2",345,0)
 I '$$CODESET^GMPLCHK(.RETURN,$P($G(GMPFLD(.12)),U),"GMPFLD(.12)","AI",1,0) Q 0
"RTN","GMPLAPI2",346,0)
 I '$$SVCIEN^GMPLCHK(.RETURN,$P($G(GMPFLD(1.06)),U),"GMPFLD(1.06)",1) Q 0
"RTN","GMPLAPI2",347,0)
 I '$$SCIEN^GMPLCHK(.RETURN,$P($G(GMPFLD(1.08)),U),"GMPFLD(1.08)",1) Q 0
"RTN","GMPLAPI2",348,0)
 S ERR=0
"RTN","GMPLAPI2",349,0)
 F I=.13,1.07,1.09 I '$$DTIME^GMPLCHK(.RETURN,$P($G(GMPFLD(I)),U),1) S ERR=1 Q
"RTN","GMPLAPI2",350,0)
 I ERR Q 0
"RTN","GMPLAPI2",351,0)
 F I=1.04,1.05 I '$$PROVIEN^GMPLCHK(.RETURN,$P($G(GMPFLD(I)),U),"GMPFLD("_I_")",1) S ERR=1 Q
"RTN","GMPLAPI2",352,0)
 I ERR Q 0
"RTN","GMPLAPI2",353,0)
 F I=1.1:.01:1.13 I '$$BOOL^GMPLCHK(.RETURN,$P($G(GMPFLD(I)),U),"GMPFLD("_I_")") S ERR=1 Q
"RTN","GMPLAPI2",354,0)
 I ERR Q 0
"RTN","GMPLAPI2",355,0)
 F I=1.15:.01:1.18 I '$$BOOL^GMPLCHK(.RETURN,$P($G(GMPFLD(I)),U),"GMPFLD("_I_")") S ERR=1 Q
"RTN","GMPLAPI2",356,0)
 I ERR Q 0
"RTN","GMPLAPI2",357,0)
 I $P($G(GMPFLD(1.14)),U)="0" D
"RTN","GMPLAPI2",358,0)
 . I '$D(GMPFLD(1.18)) S GMPFLD(1.18)=GMPFLD(1.14)
"RTN","GMPLAPI2",359,0)
 . S GMPFLD(1.14)=""
"RTN","GMPLAPI2",360,0)
 I '$$CODESET^GMPLCHK(.RETURN,$P($G(GMPFLD(1.14)),U),"GMPFLD(1.14)","AC",1,0) Q 0
"RTN","GMPLAPI2",361,0)
 Q 1
"RTN","GMPLAPI3")
0^6^B7833394
"RTN","GMPLAPI3",1,0)
GMPLAPI3 ; RGI/CBR -- Problem List API - NEW,UPDATE NOTES ; 5/15/13
"RTN","GMPLAPI3",2,0)
 ;;2.0;Problem List;**260002**;Aug 24, 1994;Build 26
"RTN","GMPLAPI3",3,0)
NEWNOTE(RETURN,GMPIFN,GMPROV,NOTES) ; Creates New Note Entries for Problem
"RTN","GMPLAPI3",4,0)
 ;Input:
"RTN","GMPLAPI3",5,0)
 ;  .RETURN [Required,Boolean] Set to 1 if the call succeeded.
"RTN","GMPLAPI3",6,0)
 ;                             Set to Error description if the call fails
"RTN","GMPLAPI3",7,0)
 ;   GMPIFN [Required,Numeric] Problem IEN (pointer to file 9000011)
"RTN","GMPLAPI3",8,0)
 ;   GMPROV [Required,Numeric] Provider IEN (pointer to file 200)
"RTN","GMPLAPI3",9,0)
 ;  .NOTES [Required,Array] Array passed by reference that holds comment lines.
"RTN","GMPLAPI3",10,0)
 ;                          It should be in the following format: NOTES(#)=comment
"RTN","GMPLAPI3",11,0)
 ;Output:
"RTN","GMPLAPI3",12,0)
 ;  1=Success,0=Failure
"RTN","GMPLAPI3",13,0)
 N HDR,LAST,TOTAL,I,FAC,NIFN,DELETED,ICDACTV,GMPVAMC,NOTEOK,%
"RTN","GMPLAPI3",14,0)
 S RETURN=0
"RTN","GMPLAPI3",15,0)
 I '$$PRBIEN^GMPLCHK(.RETURN,.GMPIFN) Q 0
"RTN","GMPLAPI3",16,0)
 I '$$PROVIEN^GMPLCHK(.RETURN,.GMPROV) Q 0
"RTN","GMPLAPI3",17,0)
 I '$D(NOTES) D ERRX^GMPLAPIE(.RETURN,"INVPARAM","NOTES") Q 0
"RTN","GMPLAPI3",18,0)
 I $D(NOTES)=1 S NOTES(1)=NOTES
"RTN","GMPLAPI3",19,0)
 S NOTEOK=0
"RTN","GMPLAPI3",20,0)
 F I=0:0 S I=$O(NOTES(I)) Q:I'>0  D
"RTN","GMPLAPI3",21,0)
 . S NOTEOK=1
"RTN","GMPLAPI3",22,0)
 I 'NOTEOK D ERRX^GMPLAPIE(.RETURN,"INVPARAM","NOTES") Q 0
"RTN","GMPLAPI3",23,0)
 S GMPVAMC=$$GMPVAMC^GMPLAPI2
"RTN","GMPLAPI3",24,0)
 S %=$$DELETED^GMPLAPI2(.DELETED,GMPIFN)
"RTN","GMPLAPI3",25,0)
 I DELETED D ERRX^GMPLAPIE(.RETURN,"PRBDLTD"," ("_$$PROBTEXT^GMPLX(GMPIFN)_")") Q 0
"RTN","GMPLAPI3",26,0)
 ; Code Set Versioning (CSV)
"RTN","GMPLAPI3",27,0)
 S %=$$CODESTS^GMPLAPI2(.ICDACTV,GMPIFN,DT)
"RTN","GMPLAPI3",28,0)
 I 'ICDACTV D ERRX^GMPLAPIE(.RETURN,"ICDINACT"," ("_$$PROBTEXT^GMPLX(GMPIFN)_")") Q 0
"RTN","GMPLAPI3",29,0)
 I '$$LOCK^GMPLDAL(GMPIFN,11,"RETURN") Q 0
"RTN","GMPLAPI3",30,0)
 D NEWNOTE^GMPLDAL3(GMPIFN,GMPVAMC,GMPROV,.NOTES)
"RTN","GMPLAPI3",31,0)
 D UNLOCK^GMPLDAL(GMPIFN,11)
"RTN","GMPLAPI3",32,0)
 S RETURN=1
"RTN","GMPLAPI3",33,0)
 Q RETURN
"RTN","GMPLAPI3",34,0)
 ;
"RTN","GMPLAPI3",35,0)
UPDNOTE(RETURN,GMPIFN,NEWNOTE,GMPROV) ; Replace existing note
"RTN","GMPLAPI3",36,0)
 ;Input:
"RTN","GMPLAPI3",37,0)
 ;  .RETURN [Required,Boolean] Set to 1 if the call succeeded.
"RTN","GMPLAPI3",38,0)
 ;                             Set to Error description if the call fails
"RTN","GMPLAPI3",39,0)
 ;   GMPIFN [Required,Numeric] Problem IEN (pointer to file 9000011)
"RTN","GMPLAPI3",40,0)
 ;   NEWNOTE [Required,String] New comment formatted as: note_IEN^facility_IEN^Text
"RTN","GMPLAPI3",41,0)
 ;                             If Text is empty the comment will be deleted.
"RTN","GMPLAPI3",42,0)
 ;   GMPROV [Required,Numeric] Provider IEN (pointer to file 200)
"RTN","GMPLAPI3",43,0)
 ;Output:
"RTN","GMPLAPI3",44,0)
 ;  1=Success,0=Failure
"RTN","GMPLAPI3",45,0)
 N NIFN,FAC,TEXT,OLDTEXT
"RTN","GMPLAPI3",46,0)
 S RETURN=0
"RTN","GMPLAPI3",47,0)
 I '$$PRBIEN^GMPLCHK(.RETURN,.GMPIFN) Q 0
"RTN","GMPLAPI3",48,0)
 I '$$PROVIEN^GMPLCHK(.RETURN,.GMPROV) Q 0
"RTN","GMPLAPI3",49,0)
 I $G(NEWNOTE)="" D ERRX^GMPLAPIE(.RETURN,"INVPARAM","NEWNOTE") Q 0
"RTN","GMPLAPI3",50,0)
 S NIFN=$P(NEWNOTE,U)
"RTN","GMPLAPI3",51,0)
 I '$$NUM^GMPLCHK(.RETURN,NIFN,"NEWNOTE",0,0,1) Q 0
"RTN","GMPLAPI3",52,0)
 S FAC=$P(NEWNOTE,U,2)
"RTN","GMPLAPI3",53,0)
 I '$$NUM^GMPLCHK(.RETURN,FAC,"NEWNOTE",0,0,1) Q 0
"RTN","GMPLAPI3",54,0)
 S TEXT=$P(NEWNOTE,U,3)
"RTN","GMPLAPI3",55,0)
 S OLDTEXT=$$NOTE^GMPLDAL(GMPIFN,FAC,NIFN)
"RTN","GMPLAPI3",56,0)
 I OLDTEXT="" D ERRX^GMPLAPIE(.RETURN,"NOTENFND") Q 0
"RTN","GMPLAPI3",57,0)
 I TEXT=OLDTEXT S RETURN=1 Q 1
"RTN","GMPLAPI3",58,0)
 D:TEXT'="" UPDNOTE^GMPLDAL(GMPIFN,FAC,NIFN,TEXT,GMPROV)
"RTN","GMPLAPI3",59,0)
 D:TEXT="" DELNOTE^GMPLDAL(GMPIFN,FAC,NIFN,GMPROV)
"RTN","GMPLAPI3",60,0)
 S RETURN=1
"RTN","GMPLAPI3",61,0)
 Q 1
"RTN","GMPLAPI3",62,0)
 ;
"RTN","GMPLAPI3",63,0)
NOTES(RETURN,GMPIFN,GMPACT,GMPFMT) ; Return comments for a problem - MULTI-DIVISIONAL
"RTN","GMPLAPI3",64,0)
 ;Input:
"RTN","GMPLAPI3",65,0)
 ;  .RETURN [Required,Array] Array passed by reference that will receive the data.
"RTN","GMPLAPI3",66,0)
 ;                           Set to Error description if the call fails
"RTN","GMPLAPI3",67,0)
 ;                           The output format depends on the value of GMPFMT
"RTN","GMPLAPI3",68,0)
 ;   GMPIFN [Required,Numeric] Problem IEN (pointer to file 9000011)
"RTN","GMPLAPI3",69,0)
 ;   GMPACT [Optional,Boolean] Active. If set to 1 only active comments will be returned. Default: 1
"RTN","GMPLAPI3",70,0)
 ;   GMPFMT [Optional,Numeric] Format. Controls the output format. Default: 1. The following values are allowed:
"RTN","GMPLAPI3",71,0)
 ;      1 -- RETURN(#)=note_narrative
"RTN","GMPLAPI3",72,0)
 ;      2 -- RETURN(#)=date_note_added^author^note_narrative (external format)
"RTN","GMPLAPI3",73,0)
 ;      3 -- RETURN(#)=note_nmbr^facility^note_narrative^status^date_note_added^author  (internal format)
"RTN","GMPLAPI3",74,0)
 ;      4 -- RETURN(facility,note_nmbr)=note_nmbr^^note_narrative^status^date_note_added^author  (internal format)
"RTN","GMPLAPI3",75,0)
 ;Output:
"RTN","GMPLAPI3",76,0)
 ;  1=Success,0=Failure
"RTN","GMPLAPI3",77,0)
 K RETURN
"RTN","GMPLAPI3",78,0)
 S RETURN=0
"RTN","GMPLAPI3",79,0)
 I '$$PRBIEN^GMPLCHK(.RETURN,.GMPIFN) Q 0
"RTN","GMPLAPI3",80,0)
 I '$$BOOL^GMPLCHK(.RETURN,.GMPACT,"GMPACT") Q 0
"RTN","GMPLAPI3",81,0)
 I '$$NUM^GMPLCHK(.RETURN,.GMPFMT,"GMPFMT",1,0,1,4) Q 0
"RTN","GMPLAPI3",82,0)
 D NOTES^GMPLDAL3(.RETURN,GMPIFN,$G(GMPFMT,1),$G(GMPACT))
"RTN","GMPLAPI3",83,0)
 Q 1
"RTN","GMPLAPI3",84,0)
 ;
"RTN","GMPLAPI3",85,0)
FULLNTE(RETURN,GMPIFN) ;Get active comments for a note
"RTN","GMPLAPI3",86,0)
 K RETURN
"RTN","GMPLAPI3",87,0)
 D NOTES^GMPLDAL3(.RETURN,GMPIFN,4,1)
"RTN","GMPLAPI3",88,0)
 Q 1
"RTN","GMPLAPI4")
0^7^B62948499
"RTN","GMPLAPI4",1,0)
GMPLAPI4 ; RGI/CBR -- Problem List API - LIST ;3/27/13
"RTN","GMPLAPI4",2,0)
 ;;2.0;Problem List;**260002**;Aug 25, 1994;Build 26
"RTN","GMPLAPI4",3,0)
LIST(RETURN,GMPDFN,GMPSTAT,GMPROV,GMPVIEW,GMPREV,GMPIDX) ;returns a filtered list of patient problems
"RTN","GMPLAPI4",4,0)
 ;Input:
"RTN","GMPLAPI4",5,0)
 ;  .RETURN [Required,Array] Array passed by reference that will receive the data.
"RTN","GMPLAPI4",6,0)
 ;                           Set to Error description if the call fails
"RTN","GMPLAPI4",7,0)
 ;       RETURN(0)=number of problems returned
"RTN","GMPLAPI4",8,0)
 ;       RETURN(#)=problem_IEN^status^problem^ICD9^onset^last_modified^sc^exposures^condition^
"RTN","GMPLAPI4",9,0)
 ;                 location^loc_type^provider^service^priority^has_comments^
"RTN","GMPLAPI4",10,0)
 ;                 date_recorded^sc_condition^icd_inactive
"RTN","GMPLAPI4",11,0)
 ;   GMPDFN [Required,Numeric] Patient IEN (pointer to file 2)
"RTN","GMPLAPI4",12,0)
 ;   GMPSTAT [Optional,String] Status of problems to be returned. Can be any combination of (A)ctive, (I)nactive and (R)emoved.
"RTN","GMPLAPI4",13,0)
 ;                             Default: A = returns active problems only
"RTN","GMPLAPI4",14,0)
 ;   GMPROV [Optional,Numeric] Provider IEN (pointer to file 200). If present, the problems returned will be filtered by this provider.
"RTN","GMPLAPI4",15,0)
 ;                             Default - return all problems
"RTN","GMPLAPI4",16,0)
 ;   GMPVIEW [Optional,String] Filter by service location or clinic. Format "S/facility_ien/facility_ien/." or "C/clinic_ien/clinic_ien/.".
"RTN","GMPLAPI4",17,0)
 ;                             If facility IEN's are not passed, returns inpatient problems when GMPVIEW="S" or outpatient ones when it is set to "C".
"RTN","GMPLAPI4",18,0)
 ;                             Default - returns all problems.
"RTN","GMPLAPI4",19,0)
 ;   GMPREV [Optional,Boolean] Reversed order. The problems will be sorted in reversed order of recorded date.
"RTN","GMPLAPI4",20,0)
 ;   GMPIDX [Optional,Boolean] Create "B" index. If set to 1 will append a "B" index to the output array.
"RTN","GMPLAPI4",21,0)
 ;                             RETURN("B",ien#)=#. Default - 0
"RTN","GMPLAPI4",22,0)
 ;Output:
"RTN","GMPLAPI4",23,0)
 ;  1=Success,0=Failure
"RTN","GMPLAPI4",24,0)
 N PLIST,RVAL
"RTN","GMPLAPI4",25,0)
 K RETURN
"RTN","GMPLAPI4",26,0)
 I '$$GETPLIST(.PLIST,.GMPDFN,.GMPSTAT,.GMPREV,.GMPROV,.GMPVIEW,.GMPIDX) Q 0
"RTN","GMPLAPI4",27,0)
 M RETURN=PLIST
"RTN","GMPLAPI4",28,0)
 S RVAL=$$BUILDLST(.RETURN,.PLIST)
"RTN","GMPLAPI4",29,0)
 S RETURN=$G(PLIST)
"RTN","GMPLAPI4",30,0)
 Q RVAL
"RTN","GMPLAPI4",31,0)
 ;
"RTN","GMPLAPI4",32,0)
GETPLIST(RETURN,GMPDFN,GMPSTAT,GMPREV,GMPROV,GMPVIEW,GMPIDX) ; lists problem ien's
"RTN","GMPLAPI4",33,0)
 ;Input:
"RTN","GMPLAPI4",34,0)
 ;  .RETURN [Required,Array] Array passed by reference that will receive the data.
"RTN","GMPLAPI4",35,0)
 ;                           Set to Error description if the call fails
"RTN","GMPLAPI4",36,0)
 ;      RETURN=Total number of patient's problems that would be returned if GMPROV and GMPVIEW were not specified.
"RTN","GMPLAPI4",37,0)
 ;             Depends on GMPSTAT value:if GMPSTAT="A", RETURN will be set to the number of patient's active problems,
"RTN","GMPLAPI4",38,0)
 ;             if GMPSTAT="I" will be set to the number of patient's inactive problems, etc.
"RTN","GMPLAPI4",39,0)
 ;      RETURN(0)=number of problems returned
"RTN","GMPLAPI4",40,0)
 ;      RETURN(#)=IEN #
"RTN","GMPLAPI4",41,0)
 ;   GMPDFN [Required,Numeric] Patient IEN (pointer to file 2)
"RTN","GMPLAPI4",42,0)
 ;   GMPSTAT [Optional,String] Status of problems to be returned. Can be any combination of (A)ctive, (I)nactive and (R)emoved.
"RTN","GMPLAPI4",43,0)
 ;                             Default: "AI" - returns both active and inactive problems (but not removed ones).
"RTN","GMPLAPI4",44,0)
 ;   GMPREV [Optional,Boolean] Reversed order. The problems will be sorted in reversed order of recorded date.
"RTN","GMPLAPI4",45,0)
 ;   GMPROV [Optional,Numeric] Responsible provider IEN (pointer to file 200). If passed, the problems returned will be filtered by this provider.
"RTN","GMPLAPI4",46,0)
 ;                             Default: "" - return all problems
"RTN","GMPLAPI4",47,0)
 ;   GMPVIEW [Optional,String] Filter by service location (inpatient problems) or clinic (outpatient problems).
"RTN","GMPLAPI4",48,0)
 ;                             Format: "S/facility_ien/facility_ien/./" or "C/clinic_ien/clinic_ien/./".
"RTN","GMPLAPI4",49,0)
 ;                             Note: the string should end in a forward slash. Default: "" - returns all problems.
"RTN","GMPLAPI4",50,0)
 ;   GMPIDX [Optional,Boolean] Create "B" index. If set to 1 will append a "B" index to the output array.
"RTN","GMPLAPI4",51,0)
 ;                             RETURN("B",problem_ien)=#. Default - 0
"RTN","GMPLAPI4",52,0)
 ;Output:
"RTN","GMPLAPI4",53,0)
 ;  1=Success,0=Failure
"RTN","GMPLAPI4",54,0)
 N TOTAL
"RTN","GMPLAPI4",55,0)
 S RETURN=0
"RTN","GMPLAPI4",56,0)
 I '$$PATIEN^GMPLCHK(.RETURN,.GMPDFN) Q 0
"RTN","GMPLAPI4",57,0)
 I '$$CODESET^GMPLCHK(.RETURN,.GMPSTAT,"GMPSTAT","AIR",1,1) Q 0
"RTN","GMPLAPI4",58,0)
 I '$$BOOL^GMPLCHK(.RETURN,.GMPREV,"GMPREV") Q 0
"RTN","GMPLAPI4",59,0)
 I '$$PROVIEN^GMPLCHK(.RETURN,.GMPROV,,1) Q 0
"RTN","GMPLAPI4",60,0)
 I '$$BOOL^GMPLCHK(.RETURN,.GMPIDX,"GMPIDX") Q 0
"RTN","GMPLAPI4",61,0)
 S GMPVIEW=$G(GMPVIEW)
"RTN","GMPLAPI4",62,0)
 I GMPVIEW'="",$E(GMPVIEW,1,2)'="C/",$E(GMPVIEW,1,2)'="S/" D  Q 0
"RTN","GMPLAPI4",63,0)
 . D ERRX^GMPLAPIE(.RETURN,"INVPARAM","GMPVIEW")
"RTN","GMPLAPI4",64,0)
 S GMPSTAT=$G(GMPSTAT)
"RTN","GMPLAPI4",65,0)
 S GMPREV=+$G(GMPREV)
"RTN","GMPLAPI4",66,0)
 S GMPROV=+$G(GMPROV)
"RTN","GMPLAPI4",67,0)
 S GMPIDX=+$G(GMPIDX)
"RTN","GMPLAPI4",68,0)
 D GETPLIST^GMPLDAL(.RETURN,.TOTAL,GMPDFN,GMPSTAT,GMPREV,GMPROV,GMPVIEW,GMPIDX)
"RTN","GMPLAPI4",69,0)
 S RETURN=TOTAL
"RTN","GMPLAPI4",70,0)
 Q 1
"RTN","GMPLAPI4",71,0)
 ;
"RTN","GMPLAPI4",72,0)
BUILDLST(RETURN,GMPLIST) ; Same as LIST but returns only problems passed in GMPLIST
"RTN","GMPLAPI4",73,0)
 ;Input:
"RTN","GMPLAPI4",74,0)
 ;  .RETURN [Required,Array] Array passed by reference that will receive the data.
"RTN","GMPLAPI4",75,0)
 ;                           Set to Error description if the call fails
"RTN","GMPLAPI4",76,0)
 ;       RETURN(0)=number of problems returned
"RTN","GMPLAPI4",77,0)
 ;       RETURN(#)=problem_IEN^status^problem^ICD9^onset^last_modified^sc^exposures^condition^
"RTN","GMPLAPI4",78,0)
 ;                 location^loc_type^provider^service^priority^has_comments^
"RTN","GMPLAPI4",79,0)
 ;                 date_recorded^sc_condition^icd_inactive
"RTN","GMPLAPI4",80,0)
 ;  .GMPLIST [Required,Array] List of problem IENs in the following format:
"RTN","GMPLAPI4",81,0)
 ;       GMPLIST(0)=number of records
"RTN","GMPLAPI4",82,0)
 ;       GMPLIST(1)=problem_IEN 1
"RTN","GMPLAPI4",83,0)
 ;       .
"RTN","GMPLAPI4",84,0)
 ;       GMPLIST(n)=problem_IEN n
"RTN","GMPLAPI4",85,0)
 ;Output:
"RTN","GMPLAPI4",86,0)
 ;  1=Success,0=Failure
"RTN","GMPLAPI4",87,0)
 N I,GMPL,IFN,INACT,ST,ICD,ONSET,LASTMOD,SC,SP,LOC,LT,PROV,SERV,CNT
"RTN","GMPLAPI4",88,0)
 N PRIO,HASCMT,DTREC,AO,IR,ENV,HNC,MST,CV,SHD,SCCOND,TOTAL,X,ORICD186
"RTN","GMPLAPI4",89,0)
 S RETURN=0
"RTN","GMPLAPI4",90,0)
 I $D(GMPLIST)<10 D ERRX^GMPLAPIE(.RETURN,"INVPARAM","GMPLIST") Q 0
"RTN","GMPLAPI4",91,0)
 I '$$NUM^GMPLCHK(.RETURN,$G(GMPLIST(0)),"GMPLIST",0,0,1) Q 0
"RTN","GMPLAPI4",92,0)
 S ORICD186=$$PATCH^XPDUTL("ICD*18.0*6")
"RTN","GMPLAPI4",93,0)
 S I=0,CNT=0
"RTN","GMPLAPI4",94,0)
 F  S I=$O(GMPLIST(I)) Q:I'>0  D
"RTN","GMPLAPI4",95,0)
 . S INACT=""
"RTN","GMPLAPI4",96,0)
 . S IFN=+$G(GMPLIST(I))
"RTN","GMPLAPI4",97,0)
 . Q:'$$DETAIL^GMPLDAL(IFN,.GMPL)
"RTN","GMPLAPI4",98,0)
 . S CNT=CNT+1
"RTN","GMPLAPI4",99,0)
 . S ST=GMPL(.12)
"RTN","GMPLAPI4",100,0)
 . I +$G(ORICD186) D
"RTN","GMPLAPI4",101,0)
 . . S ICD=$$CODEC^ICDCODE(+GMPL(.01))
"RTN","GMPLAPI4",102,0)
 . . I '+$$STATCHK^ICDAPIU(ICD,DT) S INACT="#"
"RTN","GMPLAPI4",103,0)
 . E  D
"RTN","GMPLAPI4",104,0)
 . . S ICD=$$ICDCODE^GMPLEXT(GMPL(.01))
"RTN","GMPLAPI4",105,0)
 . S ONSET=GMPL(.13)
"RTN","GMPLAPI4",106,0)
 . S LASTMOD=GMPL(.03)
"RTN","GMPLAPI4",107,0)
 . S SC=$S(+GMPL(1.10):"SC",GMPL(1.10)=0:"NSC",1:"")
"RTN","GMPLAPI4",108,0)
 . S SP=""
"RTN","GMPLAPI4",109,0)
 . F X=1.11,1.12,1.13 S:GMPL(X) SP=SP_$S(X=1.11:"A",X=1.12:"I",1:"P")
"RTN","GMPLAPI4",110,0)
 . S LOC=GMPL(1.08)
"RTN","GMPLAPI4",111,0)
 . S LT=""
"RTN","GMPLAPI4",112,0)
 . I LOC'="" S LT=$$LOCTYPE^GMPLEXT(LOC),LOC=LOC_";"_$$CLINNAME^GMPLEXT(LOC)
"RTN","GMPLAPI4",113,0)
 . S PROV=GMPL(1.05) ; responsible provider
"RTN","GMPLAPI4",114,0)
 . I PROV'="" S PROV=PROV_";"_$$PROVNAME^GMPLEXT(PROV)
"RTN","GMPLAPI4",115,0)
 . S SERV=GMPL(1.06)
"RTN","GMPLAPI4",116,0)
 . I SERV=0 S SERV="" ; not sure how it gets set to 0, but need consistency in GUI
"RTN","GMPLAPI4",117,0)
 . I SERV'="" S SERV=SERV_";"_$$SVCNAME^GMPLEXT(SERV)
"RTN","GMPLAPI4",118,0)
 . S PRIO=GMPL(1.14)
"RTN","GMPLAPI4",119,0)
 . S HASCMT=$$HASNOTE^GMPLDAL3(IFN)
"RTN","GMPLAPI4",120,0)
 . S DTREC=GMPL(1.09)
"RTN","GMPLAPI4",121,0)
 . S AO=$S(+GMPL(1.11):"/AO",1:"")
"RTN","GMPLAPI4",122,0)
 . S IR=$S(+GMPL(1.12):"/IR",1:"")
"RTN","GMPLAPI4",123,0)
 . S ENV=$S(+GMPL(1.13):"/EC",1:"")
"RTN","GMPLAPI4",124,0)
 . S HNC=$S(+GMPL(1.15):"/HNC",1:"")
"RTN","GMPLAPI4",125,0)
 . S MST=$S(+GMPL(1.16):"/MST",1:"")
"RTN","GMPLAPI4",126,0)
 . S CV=$S(+GMPL(1.17):"/CV",1:"")
"RTN","GMPLAPI4",127,0)
 . S SHD=$S(+GMPL(1.18):"/SHD",1:"")
"RTN","GMPLAPI4",128,0)
 . S SCCOND=SC_AO_IR_ENV_HNC_MST_CV_SHD
"RTN","GMPLAPI4",129,0)
 . S RETURN(CNT)=IFN_U_ST_U_$$PROBTEXT^GMPLX(IFN)_U_ICD_U_ONSET
"RTN","GMPLAPI4",130,0)
 . S RETURN(CNT)=RETURN(CNT)_U_LASTMOD_U_SC_U_SP_U_GMPL(1.02)
"RTN","GMPLAPI4",131,0)
 . S RETURN(CNT)=RETURN(CNT)_U_LOC_U_LT_U_PROV_U_SERV_U_PRIO_U_HASCMT_U_DTREC_U_SCCOND_U_INACT
"RTN","GMPLAPI4",132,0)
 S RETURN(0)=CNT
"RTN","GMPLAPI4",133,0)
 S RETURN=1
"RTN","GMPLAPI4",134,0)
 Q 1
"RTN","GMPLAPI4",135,0)
 ;
"RTN","GMPLAPI4",136,0)
FLDNAME(RETURN) ;
"RTN","GMPLAPI4",137,0)
 N FIELDS,NAMES,I
"RTN","GMPLAPI4",138,0)
 K RETURN
"RTN","GMPLAPI4",139,0)
 S FIELDS=".01^.05^.12^.13^1.01^1.05^1.07^1.08^1.09^1.10^1.11^1.12^1.13^1.15^1.16^1.17^1.18"
"RTN","GMPLAPI4",140,0)
 S NAMES="DIAGNOSIS^NARRATIVE^STATUS^ONSET^LEXICON^PROVIDER^RESOLVED^LOCATION^RECORDED^SC^AO^IR^EC^HNC^MST^CV^SHD"
"RTN","GMPLAPI4",141,0)
 F I=1:1:$L(FIELDS,"^") S RETURN($P(FIELDS,"^",I))=$P(NAMES,"^",I)
"RTN","GMPLAPI4",142,0)
 Q 1
"RTN","GMPLAPI4",143,0)
 ;
"RTN","GMPLAPI4",144,0)
LASTMOD(RETURN,GMPIFN) ; last modified date for a problem
"RTN","GMPLAPI4",145,0)
 ;Input:
"RTN","GMPLAPI4",146,0)
 ;  .RETURN [Required,DateTime] Set to last modified date
"RTN","GMPLAPI4",147,0)
 ;                              Set to Error description if the call fails
"RTN","GMPLAPI4",148,0)
 ;   GMPIFN [Required,Numeric] Problem IEN (pointer to file 9000011)
"RTN","GMPLAPI4",149,0)
 ;Output:
"RTN","GMPLAPI4",150,0)
 ;  1=Success,0=Failure
"RTN","GMPLAPI4",151,0)
 S RETURN=0
"RTN","GMPLAPI4",152,0)
 I '$$PRBIEN^GMPLCHK(.RETURN,.GMPIFN) Q 0
"RTN","GMPLAPI4",153,0)
 S RETURN=$$LASTMOD^GMPLDAL3(GMPIFN)
"RTN","GMPLAPI4",154,0)
 Q 1
"RTN","GMPLAPI4",155,0)
 ;
"RTN","GMPLAPI4",156,0)
DEFAULT(RETURN,GMPROB,GMPICD,GMPTERM,GMPROV,GMPCLIN,GMPELIG) ;Return default values for new problems
"RTN","GMPLAPI4",157,0)
 ;Input:
"RTN","GMPLAPI4",158,0)
 ;  .RETURN [Required,Array] An array passed by reference that will be initialized with the default values. 
"RTN","GMPLAPI4",159,0)
 ;                           It has the same structure as GMPFLD array described in NEW^GMPLAPI2
"RTN","GMPLAPI4",160,0)
 ;                           Set to Error description if the call fails
"RTN","GMPLAPI4",161,0)
 ;   GMPROB [Required,String] Provider narrative
"RTN","GMPLAPI4",162,0)
 ;   GMPICD [Required,String] The ICD9 code associated to this problem
"RTN","GMPLAPI4",163,0)
 ;   GMPTERM [Required,Numeric] Lexicon term IEN (pointer to file 757.01)
"RTN","GMPLAPI4",164,0)
 ;   GMPROV [Optional,Numeric] Provider IEN (pointer to file 200)
"RTN","GMPLAPI4",165,0)
 ;   GMPCLIN [Optional, Numeric] Clinic IEN (pointer to file 44)
"RTN","GMPLAPI4",166,0)
 ;   GMPELIG [Optional,Array] An array of eligibilities for the environmental exposures. If any of the following nodes are defined it will set the corresponding entry to 1:
"RTN","GMPLAPI4",167,0)
 ;      GMPELIG("SC")=service connected
"RTN","GMPLAPI4",168,0)
 ;      GMPELIG("AO")=agent orange
"RTN","GMPLAPI4",169,0)
 ;      GMPELIG("IR")=ionizing radiation
"RTN","GMPLAPI4",170,0)
 ;      GMPELIG("EC")=environment contaminants
"RTN","GMPLAPI4",171,0)
 ;Output:
"RTN","GMPLAPI4",172,0)
 ;  1=Success,0=Failure
"RTN","GMPLAPI4",173,0)
 I '+$$STATCHK^ICDAPIU(GMPICD,DT) D ERRX^GMPLAPIE(.RETURN,"INACTICD") Q 0
"RTN","GMPLAPI4",174,0)
 S RETURN(.01)=$$ICD9KEY^GMPLEXT(GMPICD)_U_GMPICD
"RTN","GMPLAPI4",175,0)
 S:'RETURN(.01) RETURN(.01)=$$NOS^GMPLEXT ; cannot resolve code
"RTN","GMPLAPI4",176,0)
 S RETURN(.05)=U_GMPROB
"RTN","GMPLAPI4",177,0)
 S RETURN(.08)=DT_U_$$EXTDT^GMPLX(DT)
"RTN","GMPLAPI4",178,0)
 S RETURN(.12)="A^ACTIVE"
"RTN","GMPLAPI4",179,0)
 S RETURN(.13)=""
"RTN","GMPLAPI4",180,0)
 S RETURN(1.01)=GMPTERM
"RTN","GMPLAPI4",181,0)
 S RETURN(1.02)=$S('$$VERIFY^GMPLSITE:"P",$$CLINUSER^GMPLEXT:"P",1:"T")
"RTN","GMPLAPI4",182,0)
 S RETURN(1.03)=DUZ
"RTN","GMPLAPI4",183,0)
 S RETURN(1.04)=$G(GMPROV)
"RTN","GMPLAPI4",184,0)
 S RETURN(1.05)=$G(GMPROV)
"RTN","GMPLAPI4",185,0)
 S RETURN(1.06)=$$SERVICE^GMPLEXT(+$G(GMPROV))
"RTN","GMPLAPI4",186,0)
 S RETURN(1.07)=""
"RTN","GMPLAPI4",187,0)
 S RETURN(1.08)=$G(GMPCLIN)
"RTN","GMPLAPI4",188,0)
 S RETURN(1.09)=DT_U_$$EXTDT^GMPLX(DT)
"RTN","GMPLAPI4",189,0)
 S RETURN(1.14)=""
"RTN","GMPLAPI4",190,0)
 S RETURN(1.10)=$S('$D(GMPELIG("SC")):"0^NO",1:"")
"RTN","GMPLAPI4",191,0)
 S RETURN(1.11)=$S('$D(GMPELIG("AO")):"0^NO",1:"")
"RTN","GMPLAPI4",192,0)
 S RETURN(1.12)=$S('$D(GMPELIG("IR")):"0^NO",1:"")
"RTN","GMPLAPI4",193,0)
 S RETURN(1.13)=$S('$D(GMPELIG("EC")):"0^NO",1:"")
"RTN","GMPLAPI4",194,0)
 S RETURN(10,0)=0
"RTN","GMPLAPI4",195,0)
 Q 1
"RTN","GMPLAPI4",196,0)
 ;
"RTN","GMPLAPI4",197,0)
UNDELETE(RETURN,GMPIFN) ; Undeletes problem
"RTN","GMPLAPI4",198,0)
 ;Input:
"RTN","GMPLAPI4",199,0)
 ;  .RETURN [Required,Boolean] Set 1 if the call succeeded
"RTN","GMPLAPI4",200,0)
 ;                             Set to Error description if the call fails
"RTN","GMPLAPI4",201,0)
 ;   GMPIFN [Required,Numeric] Problem IEN (pointer to file 9000011)
"RTN","GMPLAPI4",202,0)
 ;Output:
"RTN","GMPLAPI4",203,0)
 ;  1=Success,0=Failure
"RTN","GMPLAPI4",204,0)
 N DELETED,%
"RTN","GMPLAPI4",205,0)
 S RETURN=0
"RTN","GMPLAPI4",206,0)
 I '$$PRBIEN^GMPLCHK(.RETURN,.GMPIFN) Q 0
"RTN","GMPLAPI4",207,0)
 I '$$DELETED^GMPLAPI2(.DELETED,.GMPIFN) Q 0
"RTN","GMPLAPI4",208,0)
 I 'DELETED D ERRX^GMPLAPIE(.RETURN,"INVREC") Q 0
"RTN","GMPLAPI4",209,0)
 D CHGCOND^GMPLDAL(GMPIFN,"H","P")
"RTN","GMPLAPI4",210,0)
 S RETURN=1
"RTN","GMPLAPI4",211,0)
 Q 1
"RTN","GMPLAPI4",212,0)
 ;
"RTN","GMPLAPI4",213,0)
DIAG(RETURN,GMPIFN) ; Returns ICD diagnosis: pointer_to_icd_file^icd
"RTN","GMPLAPI4",214,0)
 ;Input:
"RTN","GMPLAPI4",215,0)
 ;  .RETURN [Required,String]  Set to ICD code in the following format: pointer_to_icd_file^icd_code
"RTN","GMPLAPI4",216,0)
 ;                             Set to Error description if the call fails
"RTN","GMPLAPI4",217,0)
 ;   GMPIFN [Required,Numeric] Problem IEN (pointer to file 9000011)
"RTN","GMPLAPI4",218,0)
 ;Output:
"RTN","GMPLAPI4",219,0)
 ;  1=Success,0=Failure
"RTN","GMPLAPI4",220,0)
 N ICD,DET,%
"RTN","GMPLAPI4",221,0)
 S RETURN=""
"RTN","GMPLAPI4",222,0)
 I '$$PRBIEN^GMPLCHK(.RETURN,.GMPIFN) Q 0
"RTN","GMPLAPI4",223,0)
 ;Q:'+$G(GMPIFN) 0
"RTN","GMPLAPI4",224,0)
 S %=$$DETAIL^GMPLAPI2(.DET,GMPIFN)
"RTN","GMPLAPI4",225,0)
 S ICD=$P(DET(.01),U)
"RTN","GMPLAPI4",226,0)
 S RETURN=ICD_U_$$ICDCODE^GMPLEXT(ICD)
"RTN","GMPLAPI4",227,0)
 Q 1
"RTN","GMPLAPI4",228,0)
 ;
"RTN","GMPLAPI4",229,0)
PROBNARR(RETURN,GMPIFN) ; Returns Provider Narrative
"RTN","GMPLAPI4",230,0)
 ;Input:
"RTN","GMPLAPI4",231,0)
 ;  .RETURN [Required,String] Set to provider_narrative_ien^problem_narrative
"RTN","GMPLAPI4",232,0)
 ;                            Set to Error description if the call fails
"RTN","GMPLAPI4",233,0)
 ;   GMPIFN [Required,Numeric] Problem IEN (pointer to file 9000011)
"RTN","GMPLAPI4",234,0)
 ;Output:
"RTN","GMPLAPI4",235,0)
 ;  1=Success,0=Failure
"RTN","GMPLAPI4",236,0)
 N PRB,DET,%
"RTN","GMPLAPI4",237,0)
 S RETURN=""
"RTN","GMPLAPI4",238,0)
 I '$$PRBIEN^GMPLCHK(.RETURN,.GMPIFN) Q 0
"RTN","GMPLAPI4",239,0)
 S %=$$DETAIL^GMPLAPI2(.DET,GMPIFN)
"RTN","GMPLAPI4",240,0)
 S PRB=+DET(.05)
"RTN","GMPLAPI4",241,0)
 S RETURN=PRB_U_$$NARR^GMPLEXT(PRB)
"RTN","GMPLAPI4",242,0)
 Q 1
"RTN","GMPLAPI4",243,0)
 ;
"RTN","GMPLAPI4",244,0)
PRBCNT(RETURN) ;Return number of entries in PROBLEM LIST.
"RTN","GMPLAPI4",245,0)
 S RETURN=$$PRBCNT^GMPLDAL3()
"RTN","GMPLAPI4",246,0)
 Q 1
"RTN","GMPLAPI4",247,0)
 ;
"RTN","GMPLAPI4",248,0)
VALID(RETURN,GMPIFN) ;RETURN=1 if problem IEN is valid
"RTN","GMPLAPI4",249,0)
 ;Input:
"RTN","GMPLAPI4",250,0)
 ;  .RETURN [Required,Boolean] Set to 1 if PROBLEM file contains GMPIFN
"RTN","GMPLAPI4",251,0)
 ;                             Set to Error description if the call fails
"RTN","GMPLAPI4",252,0)
 ;   GMPIFN [Required,Numeric] Problem IEN (pointer to file 9000011)
"RTN","GMPLAPI4",253,0)
 ;Output:
"RTN","GMPLAPI4",254,0)
 ;  1=Success,0=Failure
"RTN","GMPLAPI4",255,0)
 S RETURN=0
"RTN","GMPLAPI4",256,0)
 I '$$PRBIEN^GMPLCHK(.RETURN,.GMPIFN) Q 0
"RTN","GMPLAPI4",257,0)
 S RETURN=$$EXISTS^GMPLDAL(GMPIFN)
"RTN","GMPLAPI4",258,0)
 Q 1
"RTN","GMPLAPI4",259,0)
 ;
"RTN","GMPLAPI4",260,0)
PATIENT(RETURN,GMPIFN) ; Returns patient IEN given problem IEN
"RTN","GMPLAPI4",261,0)
 ;Input:
"RTN","GMPLAPI4",262,0)
 ;  .RETURN [Required,Numeric] Set to patient IEN (pointer to file 2)
"RTN","GMPLAPI4",263,0)
 ;                             Set to Error description if the call fails
"RTN","GMPLAPI4",264,0)
 ;   GMPIFN [Required,Numeric] Problem IEN (pointer to file 9000011)
"RTN","GMPLAPI4",265,0)
 ;Output:
"RTN","GMPLAPI4",266,0)
 ;  1=Success,0=Failure
"RTN","GMPLAPI4",267,0)
 N VALID,%,DET
"RTN","GMPLAPI4",268,0)
 S RETURN=0
"RTN","GMPLAPI4",269,0)
 I '$$PRBIEN^GMPLCHK(.RETURN,.GMPIFN) Q 0
"RTN","GMPLAPI4",270,0)
 S %=$$DETAIL^GMPLAPI2(.DET,GMPIFN)
"RTN","GMPLAPI4",271,0)
 S RETURN=+DET(.02)
"RTN","GMPLAPI4",272,0)
 Q 1
"RTN","GMPLAPI4",273,0)
 ;
"RTN","GMPLAPI4",274,0)
REPLACE(RETURN,GMPIFN,NEWDIAG) ; Replace ICD diagnosis code
"RTN","GMPLAPI4",275,0)
 ;Input:
"RTN","GMPLAPI4",276,0)
 ;  .RETURN [Required,Boolean] Set 1 if the call succeeded
"RTN","GMPLAPI4",277,0)
 ;                             Set to Error description if the call fails
"RTN","GMPLAPI4",278,0)
 ;   GMPIFN [Required,Numeric] Problem IEN (pointer to file 9000011)
"RTN","GMPLAPI4",279,0)
 ;   NEWDIAG [Required,Numeric] ICD9 code IEN (pointer to file 80)
"RTN","GMPLAPI4",280,0)
 ;Output:
"RTN","GMPLAPI4",281,0)
 ;  1=Success,0=Failure
"RTN","GMPLAPI4",282,0)
 N OLDDIAG,%
"RTN","GMPLAPI4",283,0)
 S RETURN=0
"RTN","GMPLAPI4",284,0)
 I '$$PRBIEN^GMPLCHK(.RETURN,.GMPIFN) Q 0
"RTN","GMPLAPI4",285,0)
 I '$$ICDCODE^GMPLCHK(.RETURN,.NEWDIAG,"NEWDIAG") Q 0
"RTN","GMPLAPI4",286,0)
 S %=$$DIAG(.OLDDIAG,GMPIFN)
"RTN","GMPLAPI4",287,0)
 S OLDDIAG=$P(OLDDIAG,U)
"RTN","GMPLAPI4",288,0)
 S NEWDIAG=$P(NEWDIAG,U)
"RTN","GMPLAPI4",289,0)
 Q:OLDDIAG=NEWDIAG 0
"RTN","GMPLAPI4",290,0)
 D REPLACE^GMPLDAL(GMPIFN,OLDDIAG,NEWDIAG)
"RTN","GMPLAPI4",291,0)
 S RETURN=1
"RTN","GMPLAPI4",292,0)
 Q 1
"RTN","GMPLAPI4",293,0)
 ;
"RTN","GMPLAPI4",294,0)
HASPRBS(RETURN,GMPDFN,GMPSTAT) ; Returns 1 if patient DFN has problems with status GMPSTAT
"RTN","GMPLAPI4",295,0)
 ;Input:
"RTN","GMPLAPI4",296,0)
 ;  .RETURN [Required,Boolean] Set to 1 if patient file contains problems with status GMPSTAT
"RTN","GMPLAPI4",297,0)
 ;                             Set to Error description if the call fails
"RTN","GMPLAPI4",298,0)
 ;   GMPDFN [Required,Numeric] Patient IEN (pointer to file 2)
"RTN","GMPLAPI4",299,0)
 ;   GMPSTAT [Optional,String] Problem status: Any combination of (A)ctive and (I)nactive.
"RTN","GMPLAPI4",300,0)
 ;                             Default: AI = both active and inactive.
"RTN","GMPLAPI4",301,0)
 ;Output:
"RTN","GMPLAPI4",302,0)
 ;  1=Success,0=Failure
"RTN","GMPLAPI4",303,0)
 S GMPSTAT=$G(GMPSTAT,"AI")
"RTN","GMPLAPI4",304,0)
 S RETURN=0
"RTN","GMPLAPI4",305,0)
 I '$$PATIEN^GMPLCHK(.RETURN,.GMPDFN) Q 0
"RTN","GMPLAPI4",306,0)
 I '$$CODESET^GMPLCHK(.RETURN,.GMPSTAT,"GMPSTAT","AI",0,1) Q 0
"RTN","GMPLAPI4",307,0)
 S RETURN=$$HASPRBS^GMPLDAL3(GMPDFN,GMPSTAT)
"RTN","GMPLAPI4",308,0)
 Q 1
"RTN","GMPLAPI4",309,0)
MODIFIED(RETURN,GMPDFN) ; Return the Date the Patients Problem List was Last Modified
"RTN","GMPLAPI4",310,0)
 S RETURN=$$MODIFIED^GMPLDAL3(GMPDFN)
"RTN","GMPLAPI4",311,0)
 Q 1
"RTN","GMPLAPI5")
0^8^B20946924
"RTN","GMPLAPI5",1,0)
GMPLAPI5 ; Build Problem Selection Lists ; 5/15/13
"RTN","GMPLAPI5",2,0)
 ;;2.0;Problem List;**260002**;Aug 25, 1994;Build 26
"RTN","GMPLAPI5",3,0)
ADDLOC(RETURN,GMPLLST,GMPLLOC) ; Add location to list
"RTN","GMPLAPI5",4,0)
 ;Input:
"RTN","GMPLAPI5",5,0)
 ;  .RETURN [Required,Boolean] Set to 1 if operation succeeds
"RTN","GMPLAPI5",6,0)
 ;                             Set to Error description if the call fails
"RTN","GMPLAPI5",7,0)
 ;   GMPLLST [Required,Numeric] Problem selection list IEN (pointer to file 125)
"RTN","GMPLAPI5",8,0)
 ;   GMPLLOC [Required,Numeric] Clinic location IEN (pointer to file 44)
"RTN","GMPLAPI5",9,0)
 ;Output:
"RTN","GMPLAPI5",10,0)
 ;  1=Success,0=Failure
"RTN","GMPLAPI5",11,0)
 S RETURN=0
"RTN","GMPLAPI5",12,0)
 I '$$LSTIEN^GMPLCHK(.RETURN,.GMPLLST) Q 0
"RTN","GMPLAPI5",13,0)
 I '$$SCIEN^GMPLCHK(.RETURN,.GMPLLOC,"GMPLLOC") Q 0
"RTN","GMPLAPI5",14,0)
 Q:'$$LOCKLST^GMPLAPI1(.RETURN,GMPLLST) 0
"RTN","GMPLAPI5",15,0)
 D ADDLOC^GMPLDAL1(.RETURN,GMPLLST,GMPLLOC)
"RTN","GMPLAPI5",16,0)
 D UNLKLST^GMPLAPI1(GMPLLST)
"RTN","GMPLAPI5",17,0)
 Q 1
"RTN","GMPLAPI5",18,0)
 ;
"RTN","GMPLAPI5",19,0)
GETCATD(RETURN,GMPLGRP,CODLEN) ; Return Category details
"RTN","GMPLAPI5",20,0)
 ;Input:
"RTN","GMPLAPI5",21,0)
 ;  .RETURN [Required,Array] Array passed by reference that will receive the data
"RTN","GMPLAPI5",22,0)
 ;                           Set to Error description if the call fails
"RTN","GMPLAPI5",23,0)
 ;      RETURN("GRP",category_IEN,#)=problem_name^ICD9_code^inactive_flag^lexicon_term_IEN(757.01)
"RTN","GMPLAPI5",24,0)
 ;   GMPLGRP [Required,Numeric] Problem category IEN
"RTN","GMPLAPI5",25,0)
 ;   CODLEN [Optional,Numeric] A number that specifies the maximum length of the returned problem text
"RTN","GMPLAPI5",26,0)
 ;Output:
"RTN","GMPLAPI5",27,0)
 ;  1=Success,0=Failure
"RTN","GMPLAPI5",28,0)
 N %
"RTN","GMPLAPI5",29,0)
 S RETURN=0
"RTN","GMPLAPI5",30,0)
 I '$$CTGIEN^GMPLCHK(.RETURN,.GMPLGRP) Q 0
"RTN","GMPLAPI5",31,0)
 I '$$NUM^GMPLCHK(.RETURN,.CODLEN,"CODLEN",1,0,1) Q 0
"RTN","GMPLAPI5",32,0)
 N PSEQ,ITEM,GROUP,FLAG
"RTN","GMPLAPI5",33,0)
 S PSEQ=0,GROUP=+GMPLGRP
"RTN","GMPLAPI5",34,0)
 S %=$$GETCATD^GMPLDAL1(.RETURN,GMPLGRP,$G(CODLEN))
"RTN","GMPLAPI5",35,0)
 F  S PSEQ=$O(RETURN("GRP",+GROUP,PSEQ)) Q:PSEQ'>0  D
"RTN","GMPLAPI5",36,0)
 . S ITEM=$G(RETURN("GRP",+GROUP,PSEQ))
"RTN","GMPLAPI5",37,0)
 . S FLAG=""
"RTN","GMPLAPI5",38,0)
 . I $L($P(ITEM,U,2)) D
"RTN","GMPLAPI5",39,0)
 .. I $$STATCHK^ICDAPIU($P(ITEM,U,2),DT) S FLAG=0  ; code is active
"RTN","GMPLAPI5",40,0)
 .. E  S FLAG=1
"RTN","GMPLAPI5",41,0)
 . S RETURN("GRP",GROUP,PSEQ)=$P(ITEM,U,1,2)_"^"_FLAG_"^"_$P(ITEM,U,3)
"RTN","GMPLAPI5",42,0)
 S RETURN=1
"RTN","GMPLAPI5",43,0)
 Q 1
"RTN","GMPLAPI5",44,0)
 ;
"RTN","GMPLAPI5",45,0)
GETLSTS(RETURN,SEARCH,START,NUMBER) ; Get lists
"RTN","GMPLAPI5",46,0)
 ;Input:
"RTN","GMPLAPI5",47,0)
 ;  .RETURN [Required,Array] Array passed by reference that will receive the data
"RTN","GMPLAPI5",48,0)
 ;                           Set to Error description if the call fails
"RTN","GMPLAPI5",49,0)
 ;      RETURN(0)=number_of_entries_found^maximum_requested^any_more?
"RTN","GMPLAPI5",50,0)
 ;      RETURN(#,"ID")=problem selection list IEN
"RTN","GMPLAPI5",51,0)
 ;      RETURN(#,"NAME")=problem selection list name
"RTN","GMPLAPI5",52,0)
 ;   SEARCH [Optional,String] Partial match restriction.
"RTN","GMPLAPI5",53,0)
 ;  .START [Optional,String] Index from which to begin the list. Similar to .FROM parameter to LIST^DIC.
"RTN","GMPLAPI5",54,0)
 ;   NUMBER [Optional,Numeric] Number of entries to return.
"RTN","GMPLAPI5",55,0)
 ;Output:
"RTN","GMPLAPI5",56,0)
 ;  1=Success,0=Failure
"RTN","GMPLAPI5",57,0)
 N RET,DL,IN
"RTN","GMPLAPI5",58,0)
 S RETURN=0
"RTN","GMPLAPI5",59,0)
 I '$$NUM^GMPLCHK(.RETURN,.NUMBER,"NUMBER",1,0,1) Q 0
"RTN","GMPLAPI5",60,0)
 S START=$G(START)
"RTN","GMPLAPI5",61,0)
 S SEARCH=$G(SEARCH)
"RTN","GMPLAPI5",62,0)
 S NUMBER=$G(NUMBER)
"RTN","GMPLAPI5",63,0)
 D GETLSTS^GMPLDAL1(.RET,SEARCH,.START,NUMBER)
"RTN","GMPLAPI5",64,0)
 S RETURN(0)=RET("DILIST",0)
"RTN","GMPLAPI5",65,0)
 S DL="DILIST"
"RTN","GMPLAPI5",66,0)
 F IN=1:1:$P(RETURN(0),U,1) D
"RTN","GMPLAPI5",67,0)
 . I $D(RET(DL,1,IN))>0 D
"RTN","GMPLAPI5",68,0)
 . . S RETURN(IN,"ID")=RET(DL,2,IN)
"RTN","GMPLAPI5",69,0)
 . . S RETURN(IN,"NAME")=RET(DL,1,IN)
"RTN","GMPLAPI5",70,0)
 . E  D
"RTN","GMPLAPI5",71,0)
 . . S RETURN(IN,"ID")=RET(DL,2,IN)
"RTN","GMPLAPI5",72,0)
 . . S RETURN(IN,"NAME")=RET(DL,"ID",IN,".01")
"RTN","GMPLAPI5",73,0)
 . . S:$D(RET(DL,"ID",IN,".03")) RETURN(IN,"CLINIC")=RET(DL,"ID",IN,".03")
"RTN","GMPLAPI5",74,0)
 . . S:$D(RETURN(IN,"CLINIC")) RETURN(IN,"NAME")=RETURN(IN,"CLINIC")_$C(9)_RETURN(IN,"NAME")
"RTN","GMPLAPI5",75,0)
 S RETURN=1
"RTN","GMPLAPI5",76,0)
 Q 1
"RTN","GMPLAPI5",77,0)
 ;
"RTN","GMPLAPI5",78,0)
GETCATS(RETURN,SEARCH,START,NUMBER) ; Get categories
"RTN","GMPLAPI5",79,0)
 ;Input:
"RTN","GMPLAPI5",80,0)
 ;  .RETURN [Required,Array] Array passed by reference that will receive the data
"RTN","GMPLAPI5",81,0)
 ;                           Set to Error description if the call fails
"RTN","GMPLAPI5",82,0)
 ;      RETURN(0)=number_of_entries_found^maximum_requested^any_more?
"RTN","GMPLAPI5",83,0)
 ;      RETURN(#,"ID")=problem category IEN
"RTN","GMPLAPI5",84,0)
 ;      RETURN(#,"NAME")=problem category name
"RTN","GMPLAPI5",85,0)
 ;   SEARCH [Optional,String] Partial match restriction.
"RTN","GMPLAPI5",86,0)
 ;  .START [Optional,String] Index from which to begin the list. Similar to .FROM parameter to LIST^DIC.
"RTN","GMPLAPI5",87,0)
 ;   NUMBER [Optional,Numeric] Number of entries to return.
"RTN","GMPLAPI5",88,0)
 ;Output:
"RTN","GMPLAPI5",89,0)
 ;  1=Success,0=Failure
"RTN","GMPLAPI5",90,0)
 N RET,DL,IN
"RTN","GMPLAPI5",91,0)
 S RETURN=0
"RTN","GMPLAPI5",92,0)
 I '$$NUM^GMPLCHK(.RETURN,.NUMBER,"NUMBER",1,0,1) Q 0
"RTN","GMPLAPI5",93,0)
 S SEARCH=$G(SEARCH)
"RTN","GMPLAPI5",94,0)
 S NUMBER=$G(NUMBER)
"RTN","GMPLAPI5",95,0)
 D GETCATS^GMPLDAL1(.RET,SEARCH,.START,NUMBER)
"RTN","GMPLAPI5",96,0)
 S RETURN(0)=RET("DILIST",0)
"RTN","GMPLAPI5",97,0)
 S DL="DILIST"
"RTN","GMPLAPI5",98,0)
 F IN=1:1:$P(RETURN(0),U,1) D
"RTN","GMPLAPI5",99,0)
 . Q:$D(RET(DL,1,IN))'>0
"RTN","GMPLAPI5",100,0)
 . S RETURN(IN,"ID")=RET(DL,2,IN)
"RTN","GMPLAPI5",101,0)
 . S RETURN(IN,"NAME")=RET(DL,1,IN)
"RTN","GMPLAPI5",102,0)
 S RETURN=1
"RTN","GMPLAPI5",103,0)
 Q 1
"RTN","GMPLAPI5",104,0)
 ;
"RTN","GMPLAPI5",105,0)
GETUSRS(RETURN,SEARCH,START,NUMBER) ; Array of users
"RTN","GMPLAPI5",106,0)
 ; RETURN - Passed by reference, array of users
"RTN","GMPLAPI5",107,0)
 ;  RETURN(0) = Number of users
"RTN","GMPLAPI5",108,0)
 ;  RETURN(I,"ID") = user IFN
"RTN","GMPLAPI5",109,0)
 ;  RETURN(I,"NAME") = user name
"RTN","GMPLAPI5",110,0)
 ;  RETURN(I,"INITIAL") = user initial name
"RTN","GMPLAPI5",111,0)
 ;  RETURN(I,"EMAIL") = email
"RTN","GMPLAPI5",112,0)
 ;  RETURN(I,"WRITE") = type of user
"RTN","GMPLAPI5",113,0)
 ; SEARCH - string to search
"RTN","GMPLAPI5",114,0)
 ; START - start of search
"RTN","GMPLAPI5",115,0)
 ; NUMBER - max number of records
"RTN","GMPLAPI5",116,0)
 N RET
"RTN","GMPLAPI5",117,0)
 S:'$D(SEARCH) SEARCH=""
"RTN","GMPLAPI5",118,0)
 S:'$G(NUMBER) NUMBER=""
"RTN","GMPLAPI5",119,0)
 D GETUSRS^GMPLEXT1(.RET,SEARCH,.START,NUMBER)
"RTN","GMPLAPI5",120,0)
 D BUILDUSR(.RETURN,.RET)
"RTN","GMPLAPI5",121,0)
 Q 1
"RTN","GMPLAPI5",122,0)
 ;
"RTN","GMPLAPI5",123,0)
BUILDUSR(RETURN,RET) ;
"RTN","GMPLAPI5",124,0)
 N DL,IN
"RTN","GMPLAPI5",125,0)
 S DL="DILIST"
"RTN","GMPLAPI5",126,0)
 Q:'$D(RET(DL,0))
"RTN","GMPLAPI5",127,0)
 S RETURN(0)=RET(DL,0)
"RTN","GMPLAPI5",128,0)
 F IN=1:1:$P(RETURN(0),U,1) D
"RTN","GMPLAPI5",129,0)
 . S RETURN(IN,"ID")=RET(DL,2,IN)
"RTN","GMPLAPI5",130,0)
 . S RETURN(IN,"NAME")=RET(DL,"ID",IN,".01")
"RTN","GMPLAPI5",131,0)
 . S:$D(RET(DL,"ID",IN,"1")) RETURN(IN,"INITIAL")=RET(DL,"ID",IN,"1")
"RTN","GMPLAPI5",132,0)
 . S:$D(RET(DL,"ID",IN,".151")) RETURN(IN,"EMAIL")=RET(DL,"ID",IN,".151")
"RTN","GMPLAPI5",133,0)
 . S:$D(RET(DL,"ID","WRITE",IN,"8")) RETURN(IN,"WRITE")=RET(DL,"ID","WRITE",IN,"8")
"RTN","GMPLAPI5",134,0)
 Q
"RTN","GMPLAPI5",135,0)
 ;
"RTN","GMPLAPI5",136,0)
GETASUSR(RETURN,GMPLLST)  ; Array of users assigned to specified list
"RTN","GMPLAPI5",137,0)
 ;Input:
"RTN","GMPLAPI5",138,0)
 ;  .RETURN [Required,Array] Array passed by reference that will receive the data
"RTN","GMPLAPI5",139,0)
 ;                           Set to Error description if the call fails
"RTN","GMPLAPI5",140,0)
 ;      RETURN(0)=number of currently assigned users
"RTN","GMPLAPI5",141,0)
 ;      RETURN(#,"ID")=user IEN (pointer to file 200)
"RTN","GMPLAPI5",142,0)
 ;      RETURN(#,"NAME")=user name
"RTN","GMPLAPI5",143,0)
 ;   GMPLLST [Required,Numeric] The problem selection list IEN.
"RTN","GMPLAPI5",144,0)
 ;Output:
"RTN","GMPLAPI5",145,0)
 ;  1=Success,0=Failure
"RTN","GMPLAPI5",146,0)
 N RET
"RTN","GMPLAPI5",147,0)
 S RETURN=0
"RTN","GMPLAPI5",148,0)
 I '$$LSTIEN^GMPLCHK(.RETURN,.GMPLLST) Q 0
"RTN","GMPLAPI5",149,0)
 D GETASSUS^GMPLEXT1(.RET,GMPLLST)
"RTN","GMPLAPI5",150,0)
 D BUILDUSR(.RETURN,.RET)
"RTN","GMPLAPI5",151,0)
 I $D(RETURN(0)) S RETURN(0)=+RETURN(0)
"RTN","GMPLAPI5",152,0)
 S RETURN=1
"RTN","GMPLAPI5",153,0)
 Q 1
"RTN","GMPLAPI5",154,0)
 ;
"RTN","GMPLAPI5",155,0)
GETCLIN(RETURN,SEARCH,START,NUMBER) ; Array of clinical locations
"RTN","GMPLAPI5",156,0)
 ; RETURN - Passed by reference, array of locations
"RTN","GMPLAPI5",157,0)
 ;  RETURN(0) = Number of locations
"RTN","GMPLAPI5",158,0)
 ;  RETURN(I,"ID") = location IFN
"RTN","GMPLAPI5",159,0)
 ;  RETURN(I,"NAME") = location name
"RTN","GMPLAPI5",160,0)
 ; SEARCH - string to search
"RTN","GMPLAPI5",161,0)
 ; START - start of search
"RTN","GMPLAPI5",162,0)
 ; NUMBER - max number of records
"RTN","GMPLAPI5",163,0)
 S:$D(SEARCH)=0 SEARCH=""
"RTN","GMPLAPI5",164,0)
 S:'$G(NUMBER) NUMBER=""
"RTN","GMPLAPI5",165,0)
 N RET,DL,IN
"RTN","GMPLAPI5",166,0)
 S RETURN=0
"RTN","GMPLAPI5",167,0)
 D GETCLIN^GMPLEXT1(.RET,SEARCH,.START,NUMBER)
"RTN","GMPLAPI5",168,0)
 S RETURN(0)=RET("DILIST",0)
"RTN","GMPLAPI5",169,0)
 S DL="DILIST"
"RTN","GMPLAPI5",170,0)
 F IN=1:1:$P(RETURN(0),U,1) D
"RTN","GMPLAPI5",171,0)
 . Q:$D(RET(DL,1,IN))'>0
"RTN","GMPLAPI5",172,0)
 . S RETURN(IN)=""
"RTN","GMPLAPI5",173,0)
 . S RETURN(IN,"ID")=RET(DL,2,IN)
"RTN","GMPLAPI5",174,0)
 . S RETURN(IN,"NAME")=RET(DL,1,IN)
"RTN","GMPLAPI5",175,0)
 S RETURN=1
"RTN","GMPLAPI5",176,0)
 Q 1
"RTN","GMPLAPI5",177,0)
 ;
"RTN","GMPLAPI6")
0^9^B15886997
"RTN","GMPLAPI6",1,0)
GMPLAPI6 ; Problem Selection Lists ; 5/15/13
"RTN","GMPLAPI6",2,0)
 ;;2.0;Problem List;**260002**;Aug 25, 1994;Build 26
"RTN","GMPLAPI6",3,0)
GETULST(RETURN,USER) ; Get user assigned problem selection list
"RTN","GMPLAPI6",4,0)
 ;Input:
"RTN","GMPLAPI6",5,0)
 ;  .RETURN [Required,String] Passed by reference, will receive the data.
"RTN","GMPLAPI6",6,0)
 ;                            Set to Error description if the call fails
"RTN","GMPLAPI6",7,0)
 ;      Format: problem_selection_list_IEN^problem_selection_list_name
"RTN","GMPLAPI6",8,0)
 ;   USER [Required,Numeric] User IEN (pointer to file 200).
"RTN","GMPLAPI6",9,0)
 ;Output:
"RTN","GMPLAPI6",10,0)
 ;  1=Success,0=Failure
"RTN","GMPLAPI6",11,0)
 S RETURN=0
"RTN","GMPLAPI6",12,0)
 I '$$PROVIEN^GMPLCHK(.RETURN,.USER,"USER") Q 0
"RTN","GMPLAPI6",13,0)
 S RETURN=$$GETULST^GMPLEXT1(USER)
"RTN","GMPLAPI6",14,0)
 Q 1
"RTN","GMPLAPI6",15,0)
 ;
"RTN","GMPLAPI6",16,0)
GETCLST(RETURN,GMPCLIN) ; Get first list assigned to the clinic
"RTN","GMPLAPI6",17,0)
 ;Input:
"RTN","GMPLAPI6",18,0)
 ;  .RETURN [Required,String] Passed by reference, will receive the data.
"RTN","GMPLAPI6",19,0)
 ;                            Set to Error description if the call fails
"RTN","GMPLAPI6",20,0)
 ;      Format: problem_selection_list_IEN^problem_selection_list_name
"RTN","GMPLAPI6",21,0)
 ;   GMPCLIN [Required,Numeric] Clinic IEN (pointer to file 44).
"RTN","GMPLAPI6",22,0)
 ;Output:
"RTN","GMPLAPI6",23,0)
 ;  1=Success,0=Failure
"RTN","GMPLAPI6",24,0)
 S RETURN=0
"RTN","GMPLAPI6",25,0)
 I '$$SCIEN^GMPLCHK(.RETURN,.GMPCLIN,"GMPCLIN") Q 0
"RTN","GMPLAPI6",26,0)
 S RETURN=$$GETCLST^GMPLDAL1(GMPCLIN)
"RTN","GMPLAPI6",27,0)
 Q 1
"RTN","GMPLAPI6",28,0)
 ;
"RTN","GMPLAPI6",29,0)
VALGRP(RETURN,GMPLGRP) ; check all problems in the category for inactive codes
"RTN","GMPLAPI6",30,0)
 ;Input:
"RTN","GMPLAPI6",31,0)
 ;  .RETURN [Required,Boolean] Passed by reference, will be set to 1 if category has no problems with inactive codes,
"RTN","GMPLAPI6",32,0)
 ;                             0 if it has one or more.
"RTN","GMPLAPI6",33,0)
 ;                             Set to Error description if the call fails
"RTN","GMPLAPI6",34,0)
 ;   GMPLGRP [Required,Numeric] Problem selection category IEN.
"RTN","GMPLAPI6",35,0)
 ;Output:
"RTN","GMPLAPI6",36,0)
 ;  1=Success,0=Failure
"RTN","GMPLAPI6",37,0)
 N RET,PIFN,GMPLVALC,%
"RTN","GMPLAPI6",38,0)
 S RETURN=0,PIFN=0,GMPLVALC=1
"RTN","GMPLAPI6",39,0)
 I '$$CTGIEN^GMPLCHK(.RETURN,.GMPLGRP) Q 0
"RTN","GMPLAPI6",40,0)
 S %=$$GETGRPP^GMPLDAL1(.RET,GMPLGRP)
"RTN","GMPLAPI6",41,0)
 F  S PIFN=$O(RET(PIFN)) Q:'PIFN!('GMPLVALC)  D
"RTN","GMPLAPI6",42,0)
 . I '$$STATCHK^ICDAPIU(RET(PIFN),DT) S GMPLVALC=0
"RTN","GMPLAPI6",43,0)
 S RETURN=GMPLVALC
"RTN","GMPLAPI6",44,0)
 Q RETURN
"RTN","GMPLAPI6",45,0)
 ;
"RTN","GMPLAPI6",46,0)
VALLIST(RETURN,GMPLLST) ;check all categories in list for probs w/ inactive codes
"RTN","GMPLAPI6",47,0)
 ;Input:
"RTN","GMPLAPI6",48,0)
 ;  .RETURN [Required,Boolean] Passed by reference, will be set to 1 if list has no problems with inactive codes,
"RTN","GMPLAPI6",49,0)
 ;                             0 if it has one or more.
"RTN","GMPLAPI6",50,0)
 ;                             Set to Error description if the call fails
"RTN","GMPLAPI6",51,0)
 ;   GMPLLST [Required,Numeric] Problem selection list IEN (pointer to file 125)
"RTN","GMPLAPI6",52,0)
 ;Output:
"RTN","GMPLAPI6",53,0)
 ;  1=Success,0=Failure
"RTN","GMPLAPI6",54,0)
 N RET,CIFN,GMPLVALC,%
"RTN","GMPLAPI6",55,0)
 S CIFN=0
"RTN","GMPLAPI6",56,0)
 S RETURN=0,GMPLVALC=1
"RTN","GMPLAPI6",57,0)
 I '$$LSTIEN^GMPLCHK(.RETURN,.GMPLLST) Q 0
"RTN","GMPLAPI6",58,0)
 S %=$$GETLSTC^GMPLDAL1(.RET,GMPLLST)
"RTN","GMPLAPI6",59,0)
 F  S CIFN=$O(RET(CIFN)) Q:CIFN=""!('GMPLVALC)  D
"RTN","GMPLAPI6",60,0)
 . I '$$VALGRP(.RETURN,RET(CIFN)) S GMPLVALC=0
"RTN","GMPLAPI6",61,0)
 S RETURN=GMPLVALC
"RTN","GMPLAPI6",62,0)
 Q RETURN
"RTN","GMPLAPI6",63,0)
 ;
"RTN","GMPLAPI6",64,0)
GETFINC(RETURN) ; check probs on lists for future inactivation dates
"RTN","GMPLAPI6",65,0)
 ; returns:
"RTN","GMPLAPI6",66,0)
 ;   ^TMP("GMPLSL",$J,"F",category,problem)
"RTN","GMPLAPI6",67,0)
 ;   ^TMP("GMPLSL",$J,"F",category,"L",list)
"RTN","GMPLAPI6",68,0)
 K RETURN
"RTN","GMPLAPI6",69,0)
 N PROB,CAT,LIST,RET,PROBCAT,PROBNTX
"RTN","GMPLAPI6",70,0)
 S PROB=0,PROBCAT=0
"RTN","GMPLAPI6",71,0)
 D ALLPROB^GMPLDAL1(.RET)
"RTN","GMPLAPI6",72,0)
 F  S PROBCAT=$O(RET(PROBCAT)) Q:'PROBCAT  D
"RTN","GMPLAPI6",73,0)
 . S PROB=0
"RTN","GMPLAPI6",74,0)
 . F  S PROB=$O(RET(PROBCAT,PROB)) Q:'PROB  D
"RTN","GMPLAPI6",75,0)
 . . N PROB0,PROBTX,APIDATA,ACTDT,CODE
"RTN","GMPLAPI6",76,0)
 . . S CODE=RET(PROBCAT,PROB,"CODE")
"RTN","GMPLAPI6",77,0)
 . . I $L(CODE)'>0 Q
"RTN","GMPLAPI6",78,0)
 . . I '$$STATCHK^ICDAPIU(CODE,DT) Q  ;already inactive
"RTN","GMPLAPI6",79,0)
 . . S APIDATA=$$HIST^ICDAPIU(CODE,.APIDATA)
"RTN","GMPLAPI6",80,0)
 . . S ACTDT=+$O(APIDATA(DT))
"RTN","GMPLAPI6",81,0)
 . . Q:'ACTDT  ; no future activity
"RTN","GMPLAPI6",82,0)
 . . I $G(APIDATA(ACTDT)) Q  ; no future inactivation = OK
"RTN","GMPLAPI6",83,0)
 . . S PROBTX=RET(PROBCAT,PROB,"TXT")
"RTN","GMPLAPI6",84,0)
 . . S PROBNTX=RET(PROBCAT,PROB,"NEWTXT")
"RTN","GMPLAPI6",85,0)
 . . S RETURN(PROBCAT,PROB)=PROBTX_U_PROBNTX_U_CODE_U_$$FMTE^XLFDT(ACTDT)
"RTN","GMPLAPI6",86,0)
 . Q
"RTN","GMPLAPI6",87,0)
 ;
"RTN","GMPLAPI6",88,0)
 ; find lists that contain the categories
"RTN","GMPLAPI6",89,0)
 S CAT=0
"RTN","GMPLAPI6",90,0)
 F  S CAT=$O(RETURN(CAT)) Q:'CAT  D
"RTN","GMPLAPI6",91,0)
 . M RETURN(CAT,"L")=RET(CAT,"L")
"RTN","GMPLAPI6",92,0)
 . Q
"RTN","GMPLAPI6",93,0)
 Q
"RTN","GMPLAPI6",94,0)
 ;
"RTN","GMPLAPI6",95,0)
ASSUSR(RETURN,GMPLLST,GMPLUSER) ; Assign Problem Selection List to users
"RTN","GMPLAPI6",96,0)
 ;Input:
"RTN","GMPLAPI6",97,0)
 ;  .RETURN [Required,Boolean] Set to 1 if operation succeeds.
"RTN","GMPLAPI6",98,0)
 ;                             Set to Error description if the call fails
"RTN","GMPLAPI6",99,0)
 ;   GMPLLST [Required,Numeric] Problem selection list IEN (pointer to file 125)
"RTN","GMPLAPI6",100,0)
 ;   GMPLUSER [Required,String] Users IEN (pointer to file 200) list separated by "^"
"RTN","GMPLAPI6",101,0)
 ;Output:
"RTN","GMPLAPI6",102,0)
 ;  1=Success,0=Failure
"RTN","GMPLAPI6",103,0)
 S RETURN=0
"RTN","GMPLAPI6",104,0)
 S RETURN=$$USERLST(.RETURN,.GMPLLST,.GMPLUSER,"ADD")
"RTN","GMPLAPI6",105,0)
 Q RETURN
"RTN","GMPLAPI6",106,0)
 ;
"RTN","GMPLAPI6",107,0)
REMUSR(RETURN,GMPLLST,GMPLUSER) ; Remove Problem Selection List from users
"RTN","GMPLAPI6",108,0)
 ;Input:
"RTN","GMPLAPI6",109,0)
 ;  .RETURN [Required,Boolean] Set to 1 if operation succeeds.
"RTN","GMPLAPI6",110,0)
 ;                             Set to Error description if the call fails
"RTN","GMPLAPI6",111,0)
 ;   GMPLLST [Required,Numeric] Problem selection list IEN (pointer to file 125)
"RTN","GMPLAPI6",112,0)
 ;   GMPLUSER [Required,String] Users IEN (pointer to file 200) list separated by "^"
"RTN","GMPLAPI6",113,0)
 ;Output:
"RTN","GMPLAPI6",114,0)
 ;  1=Success,0=Failure
"RTN","GMPLAPI6",115,0)
 S RETURN=0
"RTN","GMPLAPI6",116,0)
 S RETURN=$$USERLST(.RETURN,.GMPLLST,.GMPLUSER,"REM")
"RTN","GMPLAPI6",117,0)
 Q RETURN
"RTN","GMPLAPI6",118,0)
 ;
"RTN","GMPLAPI6",119,0)
USERLST(RETURN,GMPLLST,GMPLUSER,ACTION) ; Add/Remove Problem Selection List from users
"RTN","GMPLAPI6",120,0)
 I '$$LSTIEN^GMPLCHK(.RETURN,.GMPLLST) Q 0
"RTN","GMPLAPI6",121,0)
 N EXISTS,GMPLI,UE,RET,USR,CNT,%
"RTN","GMPLAPI6",122,0)
 S UE=0,RET=0
"RTN","GMPLAPI6",123,0)
 I '$$VALLIST^GMPLAPI6(.RET,+GMPLLST) D ERRX^GMPLAPIE(.RETURN,"INACTICD") Q 0
"RTN","GMPLAPI6",124,0)
 I $G(GMPLUSER)="" D ERRX^GMPLAPIE(.RETURN,"INVPARAM","GMPLUSER") Q 0
"RTN","GMPLAPI6",125,0)
 S CNT=$L(GMPLUSER,U)
"RTN","GMPLAPI6",126,0)
 F GMPLI=1:1:CNT S USR=$P(GMPLUSER,U,GMPLI) D
"RTN","GMPLAPI6",127,0)
 . I '$$PROVIEN^GMPLCHK(.RETURN,USR,"GMPLUSER") S UE=1 Q
"RTN","GMPLAPI6",128,0)
 Q:UE>0 0
"RTN","GMPLAPI6",129,0)
 F GMPLI=1:1:$L(GMPLUSER,U) S USR=$P(GMPLUSER,U,GMPLI) I USR D
"RTN","GMPLAPI6",130,0)
 . I ACTION="ADD" S %=$$ASSUSR^GMPLEXT1(.RETURN,GMPLLST,USR) Q
"RTN","GMPLAPI6",131,0)
 . I ACTION="REM" S %=$$REMUSR^GMPLEXT1(.RETURN,GMPLLST,USR) Q
"RTN","GMPLAPI6",132,0)
 Q 1
"RTN","GMPLAPI6",133,0)
 ;
"RTN","GMPLAPI7")
0^10^B850874
"RTN","GMPLAPI7",1,0)
GMPLAPI7 ; RGI/VSL -- Problem List - REPORTS ;5/15/13
"RTN","GMPLAPI7",2,0)
 ;;2.0;Problem List;**260002**;Aug 25, 1994;Build 26
"RTN","GMPLAPI7",3,0)
 Q
"RTN","GMPLAPI7",4,0)
 ;
"RTN","GMPLAPI7",5,0)
PPROBCNT(TARGET) ; List patients with active and inactive problems.
"RTN","GMPLAPI7",6,0)
 ;Input:
"RTN","GMPLAPI7",7,0)
 ;  TARGET [Required,String] Root name of a local or global array that will receive data.
"RTN","GMPLAPI7",8,0)
 ;     @TARGET [Numeric] Number of patients.
"RTN","GMPLAPI7",9,0)
 ;     @TARGET(patient_name) [String] number_of_active_problems^number_of_inactive_problems
"RTN","GMPLAPI7",10,0)
 ;Output:
"RTN","GMPLAPI7",11,0)
 ;  1=Success,-1=Failure
"RTN","GMPLAPI7",12,0)
 I $G(TARGET)="" Q -1
"RTN","GMPLAPI7",13,0)
 Q $$PPROBCNT^GMPLDAL4(TARGET)
"RTN","GMPLAPI7",14,0)
 ;
"RTN","GMPLAPI7",15,0)
PPRBSPEC(TARGET,GMPTERM,GMPTEXT,STATUS) ; List patients with specified active or inactive problems
"RTN","GMPLAPI7",16,0)
 ;Input:
"RTN","GMPLAPI7",17,0)
 ;  TARGET [Required,String] Root name of a local or global array that will receive data.
"RTN","GMPLAPI7",18,0)
 ;     @TARGET(patient_name) [String] problem_status (can be one of "active", "inactive" or "active, inactive")
"RTN","GMPLAPI7",19,0)
 ;  GMPTERM [Optional,Numeric] Lexicon term IEN. If specified, only patients having this particular problem will be included.
"RTN","GMPLAPI7",20,0)
 ;  GMPTEXT [Optional,String] Provider narrative. If specified, only patients whose problems match this particular provider narrative will be included.
"RTN","GMPLAPI7",21,0)
 ;  STATUS [Optional,String] Problem status. Can be any combination of A - active and I - inactive
"RTN","GMPLAPI7",22,0)
 ;Output:
"RTN","GMPLAPI7",23,0)
 ;  1=Success,-1=Failure
"RTN","GMPLAPI7",24,0)
 N RETURN
"RTN","GMPLAPI7",25,0)
 I $G(TARGET)="" Q -1
"RTN","GMPLAPI7",26,0)
 I '$$TERMIEN^GMPLCHK(.RETURN,.GMPTERM,,1) Q -1
"RTN","GMPLAPI7",27,0)
 I '$$CODESET^GMPLCHK(.RETURN,.STATUS,"STATUS","AI",1,1) Q -1
"RTN","GMPLAPI7",28,0)
 Q $$PPRBSPEC^GMPLDAL4(TARGET,.GMPTERM,.GMPTEXT,.STATUS)
"RTN","GMPLAPI7",29,0)
 ;
"RTN","GMPLAPIE")
0^11^B7559970
"RTN","GMPLAPIE",1,0)
GMPLAPIE ; RGI -- Problem List Error provider; 03/26/13
"RTN","GMPLAPIE",2,0)
 ;;2.0;Problem List;**260002**;Aug 25, 1994;Build 26
"RTN","GMPLAPIE",3,0)
ERR(ERT,ERRNO,TEXT) ; Adds error to array
"RTN","GMPLAPIE",4,0)
 Q:$G(ERRNO)=""
"RTN","GMPLAPIE",5,0)
 N I
"RTN","GMPLAPIE",6,0)
 S TEXT=$G(TEXT)
"RTN","GMPLAPIE",7,0)
 S:$G(ERT)="" ERT="^TMP(""GMPLERR"",$J)"
"RTN","GMPLAPIE",8,0)
 S I=+$G(@ERT)+1
"RTN","GMPLAPIE",9,0)
 S @ERT=I
"RTN","GMPLAPIE",10,0)
 S @ERT@(I)=ERRNO_U_$$EZBLD^DIALOG($P($T(@ERRNO),";;",2))_TEXT
"RTN","GMPLAPIE",11,0)
 Q
"RTN","GMPLAPIE",12,0)
 ;
"RTN","GMPLAPIE",13,0)
ERRX(RETURN,ERRNO,TEXT) ; adds error to RETURN
"RTN","GMPLAPIE",14,0)
 ;Q:'$D(RETURN)
"RTN","GMPLAPIE",15,0)
 Q:'$D(ERRNO)
"RTN","GMPLAPIE",16,0)
 S TEXT=$G(TEXT)
"RTN","GMPLAPIE",17,0)
 N I
"RTN","GMPLAPIE",18,0)
 F I=0:1 Q:$O(RETURN(I))'>0
"RTN","GMPLAPIE",19,0)
 S RETURN(I)=ERRNO_U_$$EZBLD^DIALOG($P($T(@ERRNO),";;",2))_TEXT
"RTN","GMPLAPIE",20,0)
 Q
"RTN","GMPLAPIE",21,0)
 ;
"RTN","GMPLAPIE",22,0)
ERRTXT(RETURN) ;
"RTN","GMPLAPIE",23,0)
 Q $P($G(RETURN(0)),U,2)
"RTN","GMPLAPIE",24,0)
 ; 
"RTN","GMPLAPIE",25,0)
FIRSTERR(ERT) ; Returns first error text
"RTN","GMPLAPIE",26,0)
 S:$G(ERT)="" ERT="^TMP(""GMPLERR"",$J)"
"RTN","GMPLAPIE",27,0)
 Q $P($G(@ERT@(1)),U,2)
"RTN","GMPLAPIE",28,0)
 ;
"RTN","GMPLAPIE",29,0)
ERRTABLE ; Error table
"RTN","GMPLAPIE",30,0)
INVPARAM ;;1250000.601;;Invalid parameter value - 
"RTN","GMPLAPIE",31,0)
FILELOCK ;;1250000.602;;Record in use. Try again in a few moments.
"RTN","GMPLAPIE",32,0)
PRBNFND ;;1250000.603;;Problem not found
"RTN","GMPLAPIE",33,0)
PRBDLTD ;;1250000.604;;Problem already deleted
"RTN","GMPLAPIE",34,0)
PROVNFND ;;1250000.605;;Provider not found
"RTN","GMPLAPIE",35,0)
FACNFND ;;1250000.606;;Facility not found
"RTN","GMPLAPIE",36,0)
PRBVRFD ;;1250000.607;;Problem Already Verified
"RTN","GMPLAPIE",37,0)
LISTXST ;;1250000.608;;List already exists
"RTN","GMPLAPIE",38,0)
LISTNFND ;;1250000.609;;Problem selection list not found
"RTN","GMPLAPIE",39,0)
INACTICD ;;1250000.610;;This Selection List contains problems with inactive ICD9 codes associated with them.
"RTN","GMPLAPIE",40,0)
LISTUSED ;;1250000.611;;List could not be deleted, 
"RTN","GMPLAPIE",41,0)
LOCNFND ;;1250000.612;;Clinic not found
"RTN","GMPLAPIE",42,0)
CTGEXIST ;;1250000.613;;Category already exists
"RTN","GMPLAPIE",43,0)
PRBINACT ;;1250000.614;;Problem is already inactive!
"RTN","GMPLAPIE",44,0)
ICDINACT ;;1250000.615;;Inactive ICD9 code. Edit the problem before adding comments.
"RTN","GMPLAPIE",45,0)
CTGNFND ;;1250000.616;;Category not found
"RTN","GMPLAPIE",46,0)
CATUSED ;;1250000.617;;Category in use. Could not delete.
"RTN","GMPLAPIE",47,0)
INVREC ;;1250000.618;;Invalid record
"RTN","GMPLAPIE",48,0)
TERMNFND ;;1250000.631;;Lexicon term not found
"RTN","GMPLAPIE",49,0)
PATNFND ;;1250000.632;;Patient not found
"RTN","GMPLAPIE",50,0)
ICDNFND ;;1250000.633;;ICD9 code not found
"RTN","GMPLAPIE",51,0)
NOTENFND ;;1250000.634;;Note not found
"RTN","GMPLAPIE",52,0)
ITEMNFND ;;1250000.635;;Item not found
"RTN","GMPLAPIE",53,0)
SVCNFND ;;1250000.636;;Service not found
"RTN","GMPLBLCK")
0^12^B29699623
"RTN","GMPLBLCK",1,0)
GMPLBLCK ;SLC/JFR - check selection list ICD9 codes; 04/12/12
"RTN","GMPLBLCK",2,0)
 ;;2.0;Problem List;**28,260002**;Aug 25, 1994;Build 26
"RTN","GMPLBLCK",3,0)
 ;
"RTN","GMPLBLCK",4,0)
 ; This routine invokes IA #3990
"RTN","GMPLBLCK",5,0)
 Q
"RTN","GMPLBLCK",6,0)
CSVPEP ;called from protocol GMPL SELECTION LIST CSV EVENT
"RTN","GMPLBLCK",7,0)
 N CAT,LN,LST,LIST,XMSUB,XMTEXT,XMDUZ,XMY
"RTN","GMPLBLCK",8,0)
 D CKLISTS,CKCODES
"RTN","GMPLBLCK",9,0)
 K ^TMP("GMPLMSG",$J)
"RTN","GMPLBLCK",10,0)
 S LN=1
"RTN","GMPLBLCK",11,0)
 I $D(^TMP("GMPLSL",$J,"I")) D
"RTN","GMPLBLCK",12,0)
 . D BLD^DIALOG(1250000.020,,,"^TMP(""GMPLMSG"","_$J_")")
"RTN","GMPLBLCK",13,0)
 . S LN=$O(^TMP("GMPLMSG",$J,999999),-1)+1
"RTN","GMPLBLCK",14,0)
 . S LST=0
"RTN","GMPLBLCK",15,0)
 . F  S LST=$O(^TMP("GMPLSL",$J,"I",LST)) Q:'LST  D
"RTN","GMPLBLCK",16,0)
 .. S ^TMP("GMPLMSG",$J,LN)="   "_^TMP("GMPLSL",$J,"I",LST)
"RTN","GMPLBLCK",17,0)
 .. S LN=LN+1
"RTN","GMPLBLCK",18,0)
 ;
"RTN","GMPLBLCK",19,0)
 I $D(^TMP("GMPLSL",$J,"F")) D  ;no future inact. dates
"RTN","GMPLBLCK",20,0)
 . S ^TMP("GMPLMSG",$J,LN)="",LN=LN+1
"RTN","GMPLBLCK",21,0)
 . S ^TMP("GMPLMSG",$J,LN)="",LN=LN+1
"RTN","GMPLBLCK",22,0)
 . D BLD^DIALOG(1250000.021,,,"^TMP(""GMPLMSG"","_$J_")")
"RTN","GMPLBLCK",23,0)
 . S LN=$O(^TMP("GMPLMSG",$J,999999),-1)+1
"RTN","GMPLBLCK",24,0)
 . S ^TMP("GMPLMSG",$J,LN)="",LN=LN+1
"RTN","GMPLBLCK",25,0)
 . S CAT=0
"RTN","GMPLBLCK",26,0)
 . F  S CAT=$O(^TMP("GMPLSL",$J,"F",CAT)) Q:'CAT  D
"RTN","GMPLBLCK",27,0)
 .. S ^TMP("GMPLMSG",$J,LN)=$$EZBLD^DIALOG(1250000.022)_$$GET1^DIQ(125.11,CAT,.01)
"RTN","GMPLBLCK",28,0)
 .. S LN=LN+1
"RTN","GMPLBLCK",29,0)
 .. S ^TMP("GMPLMSG",$J,LN)="",LN=LN+1
"RTN","GMPLBLCK",30,0)
 .. S ^TMP("GMPLMSG",$J,LN)=$$EZBLD^DIALOG(1250000.023),LN=LN+1
"RTN","GMPLBLCK",31,0)
 .. S ^TMP("GMPLMSG",$J,LN)="",LN=LN+1
"RTN","GMPLBLCK",32,0)
 .. N PROB,TXT
"RTN","GMPLBLCK",33,0)
 .. S PROB=0
"RTN","GMPLBLCK",34,0)
 .. F  S PROB=$O(^TMP("GMPLSL",$J,"F",CAT,PROB)) Q:'PROB  D
"RTN","GMPLBLCK",35,0)
 ... S TXT=^TMP("GMPLSL",$J,"F",CAT,PROB)
"RTN","GMPLBLCK",36,0)
 ... S ^TMP("GMPLMSG",$J,LN)=$$EZBLD^DIALOG(1250000.024)_$P(TXT,U),LN=LN+1
"RTN","GMPLBLCK",37,0)
 ... S ^TMP("GMPLMSG",$J,LN)=$$EZBLD^DIALOG(1250000.025)_$P(TXT,U,2),LN=LN+1
"RTN","GMPLBLCK",38,0)
 ... S ^TMP("GMPLMSG",$J,LN)=$$EZBLD^DIALOG(1250000.026)_$P(TXT,U,3),LN=LN+1
"RTN","GMPLBLCK",39,0)
 ... S ^TMP("GMPLMSG",$J,LN)=$$EZBLD^DIALOG(1250000.027)_$$FMTE^XLFDT($P(TXT,U,4),2),LN=LN+1
"RTN","GMPLBLCK",40,0)
 ... S ^TMP("GMPLMSG",$J,LN)="",LN=LN+1
"RTN","GMPLBLCK",41,0)
 .. I '$D(^TMP("GMPLSL",$J,"F",CAT,"L")) Q  ; category not part of lists
"RTN","GMPLBLCK",42,0)
 .. S ^TMP("GMPLMSG",$J,LN)="",LN=LN+1
"RTN","GMPLBLCK",43,0)
 .. S ^TMP("GMPLMSG",$J,LN)=$$EZBLD^DIALOG(1250000.028),LN=LN+1
"RTN","GMPLBLCK",44,0)
 .. S LIST=0
"RTN","GMPLBLCK",45,0)
 .. F  S LIST=$O(^TMP("GMPLSL",$J,"F",CAT,"L",LIST)) Q:'LIST  D
"RTN","GMPLBLCK",46,0)
 ... S ^TMP("GMPLMSG",$J,LN)="     "_^TMP("GMPLSL",$J,"F",CAT,"L",LIST)
"RTN","GMPLBLCK",47,0)
 ... S LN=LN+1
"RTN","GMPLBLCK",48,0)
 .. S ^TMP("GMPLMSG",$J,LN)="",LN=LN+1
"RTN","GMPLBLCK",49,0)
 .. S ^TMP("GMPLMSG",$J,LN)="",LN=LN+1
"RTN","GMPLBLCK",50,0)
 .. Q
"RTN","GMPLBLCK",51,0)
 I '$D(^TMP("GMPLSL",$J)) D  ; no problems found
"RTN","GMPLBLCK",52,0)
 . S ^TMP("GMPLMSG",$J,LN)=$$EZBLD^DIALOG(1250000.029)
"RTN","GMPLBLCK",53,0)
 . S LN=LN+1
"RTN","GMPLBLCK",54,0)
 S XMY("G.GMPL CODE SET VERSION UPDATES")=""
"RTN","GMPLBLCK",55,0)
 S XMSUB=$$EZBLD^DIALOG(1250000.030)
"RTN","GMPLBLCK",56,0)
 S XMDUZ="Code Set Version Install"
"RTN","GMPLBLCK",57,0)
 S XMTEXT="^TMP(""GMPLMSG"",$J,"
"RTN","GMPLBLCK",58,0)
 D ^XMD
"RTN","GMPLBLCK",59,0)
 K ^TMP("GMPLSL",$J),^TMP("GMPLMSG",$J)
"RTN","GMPLBLCK",60,0)
 Q
"RTN","GMPLBLCK",61,0)
 ;
"RTN","GMPLBLCK",62,0)
CSVOPT ; called from option GMPL SELECTION LIST CSV CHECK
"RTN","GMPLBLCK",63,0)
 ;
"RTN","GMPLBLCK",64,0)
 N %ZIS,POP
"RTN","GMPLBLCK",65,0)
 S %ZIS="QM" D ^%ZIS Q:POP
"RTN","GMPLBLCK",66,0)
 I $D(IO("Q")) D  D ^%ZISC,HOME^%ZIS Q
"RTN","GMPLBLCK",67,0)
 . N ZTRTN,ZTDESC,ZTIO,ZTDTH,ZTSK
"RTN","GMPLBLCK",68,0)
 . S ZTDESC=$$EZBLD^DIALOG(1250000.031)
"RTN","GMPLBLCK",69,0)
 . S ZTRTN="QUEUE^GMPLBLCK",ZTIO=ION,ZTDTH=$H
"RTN","GMPLBLCK",70,0)
 . D ^%ZTLOAD
"RTN","GMPLBLCK",71,0)
 . I '$G(ZTSK) D EN^DDIOL($$EZBLD^DIALOG(1250000.032))
"RTN","GMPLBLCK",72,0)
 . Q
"RTN","GMPLBLCK",73,0)
 ;
"RTN","GMPLBLCK",74,0)
QUEUE ; entry point for tasked report
"RTN","GMPLBLCK",75,0)
 I $D(ZTQUEUED) S ZTREQ="@"
"RTN","GMPLBLCK",76,0)
 U IO
"RTN","GMPLBLCK",77,0)
 N CAT,LN,LST,LIST,PAGE,MSG
"RTN","GMPLBLCK",78,0)
 D CKLISTS,CKCODES
"RTN","GMPLBLCK",79,0)
 S PAGE=1 D PAGE(.PAGE)
"RTN","GMPLBLCK",80,0)
 I '$D(^TMP("GMPLSL",$J)) D  ; no problems found
"RTN","GMPLBLCK",81,0)
 .  D EN^DDIOL($$EZBLD^DIALOG(1250000.029))
"RTN","GMPLBLCK",82,0)
 . I $E(IOST,1,2)="C-" D
"RTN","GMPLBLCK",83,0)
 .. N DIR,DTOUT,DIRUT,DUOUT,X,Y
"RTN","GMPLBLCK",84,0)
 .. S DIR(0)="E" D ^DIR
"RTN","GMPLBLCK",85,0)
 . Q
"RTN","GMPLBLCK",86,0)
 ;
"RTN","GMPLBLCK",87,0)
 I $D(^TMP("GMPLSL",$J,"I")) D  ; some inactive problem codes
"RTN","GMPLBLCK",88,0)
 . D BLD^DIALOG(1250000.020,,,"MSG")
"RTN","GMPLBLCK",89,0)
 . S MSG($O(MSG(999999),-1)+1)=""
"RTN","GMPLBLCK",90,0)
 . D EN^DDIOL(.MSG)
"RTN","GMPLBLCK",91,0)
 . S LST=0
"RTN","GMPLBLCK",92,0)
 . F  S LST=$O(^TMP("GMPLSL",$J,"I",LST)) Q:'LST!(PAGE<1)  D
"RTN","GMPLBLCK",93,0)
 .. I IOSL-$Y<3 D PAGE(.PAGE) Q:'PAGE
"RTN","GMPLBLCK",94,0)
 .. D EN^DDIOL("   "_^TMP("GMPLSL",$J,"I",LST))
"RTN","GMPLBLCK",95,0)
 ;
"RTN","GMPLBLCK",96,0)
 I $D(^TMP("GMPLSL",$J,"F")) D  ; future inact. dates
"RTN","GMPLBLCK",97,0)
 . D PAGE(.PAGE) Q:'PAGE
"RTN","GMPLBLCK",98,0)
 . K MSG
"RTN","GMPLBLCK",99,0)
 . D BLD^DIALOG(1250000.021,,,"MSG")
"RTN","GMPLBLCK",100,0)
 . S MSG($O(MSG(999999),-1)+1)=""
"RTN","GMPLBLCK",101,0)
 . D EN^DDIOL(.MSG)
"RTN","GMPLBLCK",102,0)
 . S CAT=0
"RTN","GMPLBLCK",103,0)
 . F  S CAT=$O(^TMP("GMPLSL",$J,"F",CAT)) Q:'CAT  D
"RTN","GMPLBLCK",104,0)
 .. I IOSL-$Y<8 D PAGE(.PAGE) Q:'PAGE
"RTN","GMPLBLCK",105,0)
 .. D EN^DDIOL($$EZBLD^DIALOG(1250000.022)_$$GET1^DIQ(125.11,CAT,.01),"","!!!")
"RTN","GMPLBLCK",106,0)
 .. D EN^DDIOL($$EZBLD^DIALOG(1250000.033),"","!!")
"RTN","GMPLBLCK",107,0)
 .. N PROB,TXT
"RTN","GMPLBLCK",108,0)
 .. S PROB=0
"RTN","GMPLBLCK",109,0)
 .. F  S PROB=$O(^TMP("GMPLSL",$J,"F",CAT,PROB)) Q:'PROB!(PAGE<1)  D
"RTN","GMPLBLCK",110,0)
 ... S TXT=^TMP("GMPLSL",$J,"F",CAT,PROB)
"RTN","GMPLBLCK",111,0)
 ... I IOSL-$Y<5 D PAGE(.PAGE) Q:'PAGE
"RTN","GMPLBLCK",112,0)
 ... D EN^DDIOL($$EZBLD^DIALOG(1250000.024)_$P(TXT,U))
"RTN","GMPLBLCK",113,0)
 ... D EN^DDIOL($$EZBLD^DIALOG(1250000.025)_$P(TXT,U,2))
"RTN","GMPLBLCK",114,0)
 ... D EN^DDIOL($$EZBLD^DIALOG(1250000.026)_$P(TXT,U,3))
"RTN","GMPLBLCK",115,0)
 ... D EN^DDIOL($$EZBLD^DIALOG(1250000.027)_$P(TXT,U,4))
"RTN","GMPLBLCK",116,0)
 .. I '$D(^TMP("GMPLSL",$J,"F",CAT,"L")) Q  ; category not part of lists
"RTN","GMPLBLCK",117,0)
 .. I IOSL-$Y<3 D PAGE(.PAGE) Q:'PAGE
"RTN","GMPLBLCK",118,0)
 .. D EN^DDIOL($$EZBLD^DIALOG(1250000.028),"","!!")
"RTN","GMPLBLCK",119,0)
 .. S LIST=0
"RTN","GMPLBLCK",120,0)
 .. F  S LIST=$O(^TMP("GMPLSL",$J,"F",CAT,"L",LIST)) Q:'LIST!(PAGE<1)  D
"RTN","GMPLBLCK",121,0)
 ... I IOSL-$Y<3 D PAGE(.PAGE) Q:'PAGE
"RTN","GMPLBLCK",122,0)
 ... W !,"     "_^TMP("GMPLSL",$J,"F",CAT,"L",LIST)
"RTN","GMPLBLCK",123,0)
 .. Q
"RTN","GMPLBLCK",124,0)
 . Q
"RTN","GMPLBLCK",125,0)
 D:$E(IOST,1,2)'="C-" ^%ZISC
"RTN","GMPLBLCK",126,0)
 D HOME^%ZIS
"RTN","GMPLBLCK",127,0)
 K ^TMP("GMPLSL",$J)
"RTN","GMPLBLCK",128,0)
 Q
"RTN","GMPLBLCK",129,0)
 ;
"RTN","GMPLBLCK",130,0)
CKLISTS ; loop lists and see if any inactive problems
"RTN","GMPLBLCK",131,0)
 ;
"RTN","GMPLBLCK",132,0)
 ; returns ^TMP("GMPLSL",$J,"I"
"RTN","GMPLBLCK",133,0)
 ;
"RTN","GMPLBLCK",134,0)
 K ^TMP("GMPLSL",$J,"I")
"RTN","GMPLBLCK",135,0)
 N LST,RETURN,RET,%
"RTN","GMPLBLCK",136,0)
 S LST=0
"RTN","GMPLBLCK",137,0)
 S %=$$GETLSTS^GMPLAPI5(.RETURN)
"RTN","GMPLBLCK",138,0)
 F  S LST=$O(RETURN(LST)) Q:'LST  I '$$VALLIST^GMPLAPI6(.RET,RETURN(LST,"ID")) D
"RTN","GMPLBLCK",139,0)
 . S ^TMP("GMPLSL",$J,"I",RETURN(LST,"ID"))=RETURN(LST,"NAME")
"RTN","GMPLBLCK",140,0)
 . Q
"RTN","GMPLBLCK",141,0)
 Q
"RTN","GMPLBLCK",142,0)
 ;
"RTN","GMPLBLCK",143,0)
CKCODES ; check probs on lists for future inactivation dates
"RTN","GMPLBLCK",144,0)
 ;
"RTN","GMPLBLCK",145,0)
 ; returns:
"RTN","GMPLBLCK",146,0)
 ;   ^TMP("GMPLSL",$J,"F",category,problem)
"RTN","GMPLBLCK",147,0)
 ;   ^TMP("GMPLSL",$J,"F",category,"L",list)
"RTN","GMPLBLCK",148,0)
 ;
"RTN","GMPLBLCK",149,0)
 N RETURN
"RTN","GMPLBLCK",150,0)
 K ^TMP("GMPLSL",$J,"F")
"RTN","GMPLBLCK",151,0)
 D GETFINC^GMPLAPI6(.RETURN)
"RTN","GMPLBLCK",152,0)
 M ^TMP("GMPLSL",$J,"F")=RETURN
"RTN","GMPLBLCK",153,0)
 Q
"RTN","GMPLBLCK",154,0)
 ;
"RTN","GMPLBLCK",155,0)
PAGE(NUM) ;print header and raise page number
"RTN","GMPLBLCK",156,0)
 Q:'$G(NUM)
"RTN","GMPLBLCK",157,0)
 I NUM'=1,$E(IOST,1,2)="C-" D  Q:'NUM
"RTN","GMPLBLCK",158,0)
 . N DIR,DTOUT,DIRUT,DUOUT,X,Y
"RTN","GMPLBLCK",159,0)
 . S DIR(0)="E" D ^DIR
"RTN","GMPLBLCK",160,0)
 . I $D(DTOUT)!($D(DUOUT)) S NUM=0
"RTN","GMPLBLCK",161,0)
 W @IOF
"RTN","GMPLBLCK",162,0)
 D EN^DDIOL($$EZBLD^DIALOG(1250000.034))
"RTN","GMPLBLCK",163,0)
 D EN^DDIOL($$EZBLD^DIALOG(1250000.035)_NUM,"","?70")
"RTN","GMPLBLCK",164,0)
 D EN^DDIOL($$REPEAT^XLFSTR("-",78))
"RTN","GMPLBLCK",165,0)
 S NUM=NUM+1
"RTN","GMPLBLCK",166,0)
 Q
"RTN","GMPLBLD")
0^13^B31098960
"RTN","GMPLBLD",1,0)
GMPLBLD ; SLC/MKB -- Build Problem Selection Lists ;03/27/13
"RTN","GMPLBLD",2,0)
 ;;2.0;Problem List;**3,28,33,260002**;Aug 25, 1994;Build 26
"RTN","GMPLBLD",3,0)
 ;
"RTN","GMPLBLD",4,0)
 ;This routine invokes IA #3991
"RTN","GMPLBLD",5,0)
 ;
"RTN","GMPLBLD",6,0)
EN ; -- main entry point
"RTN","GMPLBLD",7,0)
 D EN^VALM("GMPL SELECTION LIST BUILD")
"RTN","GMPLBLD",8,0)
 Q
"RTN","GMPLBLD",9,0)
 ;
"RTN","GMPLBLD",10,0)
HDR ; -- header code
"RTN","GMPLBLD",11,0)
 N NAME,NUM,DATE
"RTN","GMPLBLD",12,0)
 S NUM=+^TMP("GMPLST",$J,0)_$S(+^TMP("GMPLST",$J,0)'=1:$$EZBLD^DIALOG(1250000.036),1:$$EZBLD^DIALOG(1250000.037))
"RTN","GMPLBLD",13,0)
 S DATE=$$EZBLD^DIALOG(1250000.038)_$P(^TMP("GMPLIST",$J,"LST","MODIFIED"),U,2)
"RTN","GMPLBLD",14,0)
 S VALMHDR(1)=DATE_$J(NUM,79-$L(DATE))
"RTN","GMPLBLD",15,0)
 S NAME=^TMP("GMPLIST",$J,"LST","NAME"),VALMHDR(2)=$J(NAME,$L(NAME)\2+41)
"RTN","GMPLBLD",16,0)
 Q
"RTN","GMPLBLD",17,0)
 ;
"RTN","GMPLBLD",18,0)
INIT ; -- init variables and list array
"RTN","GMPLBLD",19,0)
 N RETURN,MSG
"RTN","GMPLBLD",20,0)
 S GMPLSLST=$$LIST^GMPLBLD2("L") I GMPLSLST="^" S VALMQUIT=1 Q
"RTN","GMPLBLD",21,0)
 I '$$LOCKLST^GMPLAPI1(.RETURN,+GMPLSLST) D  G INIT
"RTN","GMPLBLD",22,0)
 . S MSG(1)=$C(7)
"RTN","GMPLBLD",23,0)
 . S MSG(2)=$$EZBLD^DIALOG(1250000.039)
"RTN","GMPLBLD",24,0)
 . S MSG(2,"F")="!!"
"RTN","GMPLBLD",25,0)
 . S MSG(3)=""
"RTN","GMPLBLD",26,0)
 . D EN^DDIOL(.MSG)
"RTN","GMPLBLD",27,0)
 S GMPLMODE="E",VALMSG=$$MSG^GMPLX
"RTN","GMPLBLD",28,0)
 D GETLIST,BUILD("^TMP(""GMPLIST"",$J)",GMPLMODE)
"RTN","GMPLBLD",29,0)
 D LENGTH
"RTN","GMPLBLD",30,0)
 Q
"RTN","GMPLBLD",31,0)
 ;
"RTN","GMPLBLD",32,0)
GETLIST ; Build ^TMP("GMPLIST",$J,#)
"RTN","GMPLBLD",33,0)
 N RETURN,%
"RTN","GMPLBLD",34,0)
 K ^TMP("GMPLIST",$J)
"RTN","GMPLBLD",35,0)
 D EN^DDIOL($$EZBLD^DIALOG(1250000.040))
"RTN","GMPLBLD",36,0)
 S %=$$GETLIST^GMPLAPI1(.RETURN,+GMPLSLST,50)
"RTN","GMPLBLD",37,0)
 M ^TMP("GMPLIST",$J)=RETURN
"RTN","GMPLBLD",38,0)
 Q
"RTN","GMPLBLD",39,0)
 ;
"RTN","GMPLBLD",40,0)
BUILD(LIST,MODE) ; Build ^TMP("GMPLST",$J,)
"RTN","GMPLBLD",41,0)
 N SEQ,LCNT,NUM,HDR,GROUP,IFN,ITEM,PSEQ,FLAG D CLEAN^VALM10
"RTN","GMPLBLD",42,0)
 S:'$D(^TMP("GMPLIST",$J,0)) ^TMP("GMPLIST",$J,0)=0
"RTN","GMPLBLD",43,0)
 I $P($G(^TMP("GMPLIST",$J,0)),U,1)'>0 S ^TMP("GMPLST",$J,1,0)="   ",^TMP("GMPLST",$J,2,0)=$$EZBLD^DIALOG(1250000.041),^TMP("GMPLST",$J,0)="0^2",VALMCNT=2 Q
"RTN","GMPLBLD",44,0)
 S (LCNT,NUM,SEQ)=0
"RTN","GMPLBLD",45,0)
 F  S SEQ=$O(^TMP("GMPLIST",$J,"SEQ",SEQ)) Q:SEQ'>0  D
"RTN","GMPLBLD",46,0)
 . S IFN=^TMP("GMPLIST",$J,"SEQ",SEQ),LCNT=LCNT+1,NUM=NUM+1
"RTN","GMPLBLD",47,0)
 . S GROUP=$P(^TMP("GMPLIST",$J,IFN),U,2),HDR=$P(^TMP("GMPLIST",$J,IFN),U,3)
"RTN","GMPLBLD",48,0)
 . S:'$L(HDR) HDR=$$EZBLD^DIALOG(1250000.042)
"RTN","GMPLBLD",49,0)
 . I LCNT>1,+$P(^TMP("GMPLIST",$J,IFN),U,4),^TMP("GMPLST",$J,LCNT-1,0)'="   " S LCNT=LCNT+1,^TMP("GMPLST",$J,LCNT,0)="   "
"RTN","GMPLBLD",50,0)
 . S ^TMP("GMPLST",$J,LCNT,0)=$S(MODE="I":$J("<"_SEQ_">",8),1:"        ")_$J(NUM,4)_" "_HDR,^TMP("GMPLST",$J,"B",NUM)=IFN
"RTN","GMPLBLD",51,0)
 . D CNTRL^VALM10(LCNT,9,5,IOINHI,IOINORM)
"RTN","GMPLBLD",52,0)
 . Q:'+$P(^TMP("GMPLIST",$J,IFN),U,4)
"RTN","GMPLBLD",53,0)
 . D CNTRL^VALM10(LCNT,14,$L(HDR),IOUON,IOUOFF)
"RTN","GMPLBLD",54,0)
 . F PSEQ=0:0 S PSEQ=$O(^TMP("GMPLIST",$J,"GRP",+GROUP,PSEQ)) Q:PSEQ'>0  D
"RTN","GMPLBLD",55,0)
 . . S LCNT=LCNT+1
"RTN","GMPLBLD",56,0)
 . . S ITEM=^TMP("GMPLIST",$J,"GRP",+GROUP,PSEQ)
"RTN","GMPLBLD",57,0)
 . . S ^TMP("GMPLST",$J,LCNT,0)="             "_$P(ITEM,U,1)
"RTN","GMPLBLD",58,0)
 . . I $L($P(ITEM,U,2)) D
"RTN","GMPLBLD",59,0)
 ... S ^TMP("GMPLST",$J,LCNT,0)=^TMP("GMPLST",$J,LCNT,0)_" ("_$P(ITEM,U,2)_")"
"RTN","GMPLBLD",60,0)
 ... S FLAG=$P(ITEM,U,3)
"RTN","GMPLBLD",61,0)
 ... Q:$G(FLAG)="0"  ; code is active
"RTN","GMPLBLD",62,0)
 ... S ^TMP("GMPLST",$J,LCNT,0)=^TMP("GMPLST",$J,LCNT,0)_$$EZBLD^DIALOG(1250000.043)
"RTN","GMPLBLD",63,0)
 . S LCNT=LCNT+1,^TMP("GMPLST",$J,LCNT,0)="   "
"RTN","GMPLBLD",64,0)
 S ^TMP("GMPLST",$J,0)=NUM_U_LCNT,VALMCNT=LCNT
"RTN","GMPLBLD",65,0)
 Q
"RTN","GMPLBLD",66,0)
 ;
"RTN","GMPLBLD",67,0)
HELP ; -- help code
"RTN","GMPLBLD",68,0)
 N X,DIR
"RTN","GMPLBLD",69,0)
 D BLD^DIALOG(1250000.044,,,"DIR(""A"")")
"RTN","GMPLBLD",70,0)
 S DIR(0)="FAO"
"RTN","GMPLBLD",71,0)
 D ^DIR
"RTN","GMPLBLD",72,0)
 S VALMSG=$$MSG^GMPLX,VALMBCK=$S(VALMCC:"",1:"R")
"RTN","GMPLBLD",73,0)
 Q
"RTN","GMPLBLD",74,0)
 ;
"RTN","GMPLBLD",75,0)
EXIT ; -- exit code
"RTN","GMPLBLD",76,0)
 I $D(GMPLSAVE),$$CKSAVE^GMPLBLD2 D
"RTN","GMPLBLD",77,0)
 . D SAVE^GMPLBLD2
"RTN","GMPLBLD",78,0)
 D UNLKLST^GMPLAPI1(+GMPLSLST)
"RTN","GMPLBLD",79,0)
 K GMPLIST,GMPLST,GMPLMODE,GMPLSLST,GMPLSAVE,GMPREBLD,GMPQUIT,RT,TMPLST
"RTN","GMPLBLD",80,0)
 K ^TMP("GMPLIST",$J),^TMP("GMPLST",$J)
"RTN","GMPLBLD",81,0)
 Q
"RTN","GMPLBLD",82,0)
 ;
"RTN","GMPLBLD",83,0)
ADD ; Add group(s)
"RTN","GMPLBLD",84,0)
 N SEQ,GROUP,HDR,IFN,GMPQUIT,GMPREBLD,ERR,RETURN,RET,MSG,%
"RTN","GMPLBLD",85,0)
 D FULL^VALM1
"RTN","GMPLBLD",86,0)
 F  D  Q:$D(GMPQUIT)  D EN^DDIOL(" ")
"RTN","GMPLBLD",87,0)
 . S GROUP=$$GROUP^GMPLBLD2("") I GROUP="^" S GMPQUIT=1 Q
"RTN","GMPLBLD",88,0)
 . I $D(^TMP("GMPLIST",$J,"GRP",+GROUP)) D EN^DDIOL($$EZBLD^DIALOG(1250000.045),"","!?4") Q
"RTN","GMPLBLD",89,0)
 . I '$$VALGRP^GMPLAPI6(.RET,+GROUP) D  Q
"RTN","GMPLBLD",90,0)
 .. D FULL^VALM1
"RTN","GMPLBLD",91,0)
 .. D EN^DDIOL($C(7))
"RTN","GMPLBLD",92,0)
 .. D BLD^DIALOG(1250000.046,,,"MSG")
"RTN","GMPLBLD",93,0)
 .. D EN^DDIOL(.MSG)
"RTN","GMPLBLD",94,0)
 .. N DIR,DTOUT,DIRUT,DUOUT,X,Y
"RTN","GMPLBLD",95,0)
 .. S DIR(0)="E" D ^DIR
"RTN","GMPLBLD",96,0)
 .. S VALMBCK="R"
"RTN","GMPLBLD",97,0)
 . S HDR=$$HDR^GMPLBLD1($P(GROUP,U,2)) I HDR="^" S GMPQUIT=1 Q
"RTN","GMPLBLD",98,0)
 . S RT="^TMP(""GMPLIST"",$J,""SEQ"",",SEQ=+$$LAST^GMPLBLD2(RT)+1
"RTN","GMPLBLD",99,0)
 . S SEQ=$$SEQ^GMPLBLD1(SEQ) I SEQ="^" S GMPQUIT=1 Q
"RTN","GMPLBLD",100,0)
 . S IFN=$$TMPIFN^GMPLBLD1,^TMP("GMPLIST",$J,IFN)=SEQ_U_+GROUP_U_HDR_"^1"
"RTN","GMPLBLD",101,0)
 . S (^TMP("GMPLIST",$J,"GRP",+GROUP),^TMP("GMPLIST",$J,"SEQ",SEQ))=IFN,^TMP("GMPLIST",$J,0)=^TMP("GMPLIST",$J,0)+1,GMPREBLD=1
"RTN","GMPLBLD",102,0)
 . S %=$$GETCATD^GMPLAPI5(.RETURN,+GROUP,50)
"RTN","GMPLBLD",103,0)
 . M ^TMP("GMPLIST",$J)=RETURN
"RTN","GMPLBLD",104,0)
 I $D(GMPREBLD) S VALMBCK="R",GMPLSAVE=1 D BUILD("^TMP(""GMPLIST"",$J)",GMPLMODE),HDR
"RTN","GMPLBLD",105,0)
 S VALMBCK="R",VALMSG=$$MSG^GMPLX
"RTN","GMPLBLD",106,0)
 Q
"RTN","GMPLBLD",107,0)
 ;
"RTN","GMPLBLD",108,0)
EDIT ; Edit category contents
"RTN","GMPLBLD",109,0)
 N GMPLIST,GMPLST,GMPLMODE,GMPLGRP,GMPLSAVE
"RTN","GMPLBLD",110,0)
 D EN^VALM("GMPL SELECTION GROUP BUILD")
"RTN","GMPLBLD",111,0)
 S GMPLMODE="E"
"RTN","GMPLBLD",112,0)
 D GETLIST,BUILD("TMP(""GMPLIST"",$J)",GMPLMODE)
"RTN","GMPLBLD",113,0)
 S VALMBCK="R",VALMSG=$$MSG^GMPLX
"RTN","GMPLBLD",114,0)
 Q
"RTN","GMPLBLD",115,0)
 ;
"RTN","GMPLBLD",116,0)
REMOVE ; Remove group
"RTN","GMPLBLD",117,0)
 N NUM,IFN,SEQ,GRP,DIR,X,Y S VALMBCK=""
"RTN","GMPLBLD",118,0)
 S NUM=$$SEL1^GMPLBLD1 G:NUM="^" RMQ
"RTN","GMPLBLD",119,0)
 S IFN=$G(^TMP("GMPLST",$J,"B",NUM)) G:+IFN'>0 RMQ
"RTN","GMPLBLD",120,0)
 I "@"[$G(^TMP("GMPLIST",$J,IFN)) D  H 2 G RMQ
"RTN","GMPLBLD",121,0)
 . D EN^DDIOL($C(7))
"RTN","GMPLBLD",122,0)
 . D EN^DDIOL($$EZBLD^DIALOG(1250000.047,"","!!"))
"RTN","GMPLBLD",123,0)
 S DIR("A")=$$EZBLD^DIALOG(1250000.048,$P(^TMP("GMPLIST",$J,IFN),U,3))
"RTN","GMPLBLD",124,0)
 S DIR("?")=$$EZBLD^DIALOG(1250000.049)
"RTN","GMPLBLD",125,0)
 S DIR(0)="YA",DIR("B")="NO" D ^DIR
"RTN","GMPLBLD",126,0)
 I 'Y D EN^DDIOL($$EZBLD^DIALOG(1250000.132)) H 1 G RMQ
"RTN","GMPLBLD",127,0)
 D DELETE^GMPLBLD1(IFN) S VALMBCK="R",GMPLSAVE=1
"RTN","GMPLBLD",128,0)
 D BUILD("^TMP(""GMPLIST"",$J)",GMPLMODE),HDR
"RTN","GMPLBLD",129,0)
RMQ S:'VALMCC VALMBCK="R" S VALMSG=$$MSG^GMPLX
"RTN","GMPLBLD",130,0)
 Q
"RTN","GMPLBLD",131,0)
 ;
"RTN","GMPLBLD",132,0)
LENGTH ;SHORTEN THE ICD9'S DESCRIPTION TO FIT SCREEN
"RTN","GMPLBLD",133,0)
 N ICD9VAR,LLCNT
"RTN","GMPLBLD",134,0)
 S LLCNT=0
"RTN","GMPLBLD",135,0)
 F  S LLCNT=$O(^TMP("GMPLST",$J,LLCNT)) Q:LLCNT=""  Q:LLCNT'?1N.N  D
"RTN","GMPLBLD",136,0)
 .; I '$D(^TMP("GMPLST",$J,LLCNT,O)) Q
"RTN","GMPLBLD",137,0)
 . S ICD9VAR=^TMP("GMPLST",$J,LLCNT,0) I $L(ICD9VAR)>50 D
"RTN","GMPLBLD",138,0)
 .. S ICD9VAR=$P(ICD9VAR,"(",1)
"RTN","GMPLBLD",139,0)
 .. S ICD9VAR=$E(ICD9VAR,1,50)_" ("_$P(^TMP("GMPLST",$J,LLCNT,0),"(",2)
"RTN","GMPLBLD",140,0)
 .. S ^TMP("GMPLST",$J,LLCNT,0)=ICD9VAR
"RTN","GMPLBLD",141,0)
 Q
"RTN","GMPLBLD1")
0^14^B27314622
"RTN","GMPLBLD1",1,0)
GMPLBLD1 ; SLC/MKB -- Bld PL Selection Lists cont ;5/15/13
"RTN","GMPLBLD1",2,0)
 ;;2.0;Problem List;**3,28,260002**;Aug 25, 1994;Build 26
"RTN","GMPLBLD1",3,0)
 ;
"RTN","GMPLBLD1",4,0)
 ; This routine invokes IA #3991,#10082
"RTN","GMPLBLD1",5,0)
 ;
"RTN","GMPLBLD1",6,0)
SEL() ; Select item(s) from list
"RTN","GMPLBLD1",7,0)
 N DIR,X,Y,MAX,GRP,DTOUT
"RTN","GMPLBLD1",8,0)
 S GRP=$D(GMPLGRP) ; =1 if editing groups, 0 if lists
"RTN","GMPLBLD1",9,0)
 S MAX=$P($G(^TMP("GMPLST",$J,0)),U,1) I MAX'>0 Q "^"
"RTN","GMPLBLD1",10,0)
 S DIR(0)="LAO^1:"_MAX,DIR("A")=$$EZBLD^DIALOG(1250000.050,$S('GRP:$$EZBLD^DIALOG(1250000.051),1:$$EZBLD^DIALOG(1250000.052)))
"RTN","GMPLBLD1",11,0)
 S:MAX>1 DIR("A")=DIR("A")_" (1-"_MAX_"): "
"RTN","GMPLBLD1",12,0)
 S:MAX'>1 DIR("A")=DIR("A")_": ",DIR("B")=1
"RTN","GMPLBLD1",13,0)
 S DIR("?")=$$EZBLD^DIALOG(1250000.053,$S('GRP:$$EZBLD^DIALOG(1250000.054),1:$$EZBLD^DIALOG(1250000.055)))
"RTN","GMPLBLD1",14,0)
 D ^DIR S:$D(DTOUT)!(X="") Y="^"
"RTN","GMPLBLD1",15,0)
 Q Y
"RTN","GMPLBLD1",16,0)
 ;
"RTN","GMPLBLD1",17,0)
SEL1() ; Select item from list
"RTN","GMPLBLD1",18,0)
 N DIR,X,Y,MAX,GRP,DTOUT
"RTN","GMPLBLD1",19,0)
 S GRP=$D(GMPLGRP) ; =1 if editing groups, 0 if lists
"RTN","GMPLBLD1",20,0)
 S MAX=$P($G(^TMP("GMPLST",$J,0)),U,1) I MAX'>0 Q "^"
"RTN","GMPLBLD1",21,0)
 S DIR(0)="NAO^1:"_MAX_":0"
"RTN","GMPLBLD1",22,0)
 D BLD^DIALOG(1250000.058,$S('GRP:$$EZBLD^DIALOG(1250000.051),1:$$EZBLD^DIALOG(1250000.052)),,"DIR(""A"")")
"RTN","GMPLBLD1",23,0)
 S:MAX>1 DIR("A")=DIR("A")_" (1-"_MAX_"): "
"RTN","GMPLBLD1",24,0)
 S:MAX'>1 DIR("A")=DIR("A")_": ",DIR("B")=1
"RTN","GMPLBLD1",25,0)
 D BLD^DIALOG(1250000.059,$S('GRP:$$EZBLD^DIALOG(1250000.056),1:$$EZBLD^DIALOG(1250000.057)),,"DIR(""?"")")
"RTN","GMPLBLD1",26,0)
 D ^DIR I $D(DTOUT)!(X="") S Y="^"
"RTN","GMPLBLD1",27,0)
 Q Y
"RTN","GMPLBLD1",28,0)
 ;
"RTN","GMPLBLD1",29,0)
SEQ(NUM) ; Enter/edit seq #, returns new #
"RTN","GMPLBLD1",30,0)
 N DIR,X,Y,GRP,MSG,DTOUT
"RTN","GMPLBLD1",31,0)
 S GRP=$D(GMPLGRP) ; =1 if editing groups, 0 if lists
"RTN","GMPLBLD1",32,0)
 S DIR(0)="NA^.01:999.99:2"
"RTN","GMPLBLD1",33,0)
 S:NUM DIR("B")=NUM
"RTN","GMPLBLD1",34,0)
 D BLD^DIALOG(1250000.061,,,"DIR(""A"")")
"RTN","GMPLBLD1",35,0)
 D BLD^DIALOG(1250000.060,$S('GRP:$$EZBLD^DIALOG(1250000.072),1:$$EZBLD^DIALOG(1250000.056)),,"DIR(""?"")")
"RTN","GMPLBLD1",36,0)
SQ D ^DIR I $D(DTOUT)!(X="^") Q "^"
"RTN","GMPLBLD1",37,0)
 I X?1"^".E W $C(7),$$NOJUMP G SQ
"RTN","GMPLBLD1",38,0)
 I Y=NUM Q NUM
"RTN","GMPLBLD1",39,0)
 I $D(^TMP("GMPLIST",$J,"SEQ",Y)) D  G SQ
"RTN","GMPLBLD1",40,0)
 . D EN^DDIOL($C(7),"","!")
"RTN","GMPLBLD1",41,0)
 . D BLD^DIALOG(1250000.062,,,"MSG")
"RTN","GMPLBLD1",42,0)
 . D EN^DDIOL(.MSG)
"RTN","GMPLBLD1",43,0)
 Q Y
"RTN","GMPLBLD1",44,0)
 ;
"RTN","GMPLBLD1",45,0)
HDR(TEXT) ; Enter/edit group subheader text in list
"RTN","GMPLBLD1",46,0)
 N DIR,X,Y,DTOUT
"RTN","GMPLBLD1",47,0)
 S:$L(TEXT) DIR("B")=TEXT
"RTN","GMPLBLD1",48,0)
 S DIR(0)="FAO^2:30"
"RTN","GMPLBLD1",49,0)
 D BLD^DIALOG(1250000.063,,,"DIR(""A"")")
"RTN","GMPLBLD1",50,0)
 D BLD^DIALOG(1250000.064,,,"DIR(""?"")")
"RTN","GMPLBLD1",51,0)
 S:$D(DIR("B")) DIR("?",1)=DIR("?")_";",DIR("?")=$$EZBLD^DIALOG(1250000.065)
"RTN","GMPLBLD1",52,0)
H1 D ^DIR I $D(DTOUT)!(X="^") Q "^"
"RTN","GMPLBLD1",53,0)
 I X?1"^".E W $C(7),$$NOJUMP G H1
"RTN","GMPLBLD1",54,0)
 I X="@" Q:$$SURE^GMPLX "" G H1
"RTN","GMPLBLD1",55,0)
 Q Y
"RTN","GMPLBLD1",56,0)
 ;
"RTN","GMPLBLD1",57,0)
TEXT(TEXT) ; Edit problem text
"RTN","GMPLBLD1",58,0)
 N DIR,X,Y,DTOUT
"RTN","GMPLBLD1",59,0)
 S:$L(TEXT) DIR("B")=TEXT
"RTN","GMPLBLD1",60,0)
 S DIR(0)="FAO^2:80"
"RTN","GMPLBLD1",61,0)
 D BLD^DIALOG(1250000.066,,,"DIR(""A"")")
"RTN","GMPLBLD1",62,0)
 D BLD^DIALOG(1250000.067,,,"DIR(""?"")")
"RTN","GMPLBLD1",63,0)
T1 D ^DIR I $D(DTOUT)!("^"[X) S Y="^" G TQ
"RTN","GMPLBLD1",64,0)
 I X?1"^".E W $C(7),$$NOJUMP G T1
"RTN","GMPLBLD1",65,0)
 I X="@" G:'$$SURE^GMPLX T1 S Y="@" G TQ
"RTN","GMPLBLD1",66,0)
TQ Q Y
"RTN","GMPLBLD1",67,0)
 ;
"RTN","GMPLBLD1",68,0)
CODE(CODE) ; Enter/edit problem code
"RTN","GMPLBLD1",69,0)
 N DIR,X,Y,DTOUT
"RTN","GMPLBLD1",70,0)
 S DIR(0)="PAO^ICD9(:QEMZ"
"RTN","GMPLBLD1",71,0)
 S:$L(CODE) DIR("B")=CODE
"RTN","GMPLBLD1",72,0)
 D BLD^DIALOG(1250000.068,,,"DIR(""A"")")
"RTN","GMPLBLD1",73,0)
 D BLD^DIALOG(1250000.069,,,"DIR(""?"")")
"RTN","GMPLBLD1",74,0)
 S DIR("S")="I $$STATCHK^ICDAPIU($P(^(0),U),DT)"
"RTN","GMPLBLD1",75,0)
C1 D ^DIR I $D(DTOUT)!(X="^") S Y="^" G CQ
"RTN","GMPLBLD1",76,0)
 I X?1"^".E W $C(7),$$NOJUMP G C1
"RTN","GMPLBLD1",77,0)
 I X="@" G:'$$SURE^GMPLX C1 S Y=""
"RTN","GMPLBLD1",78,0)
 S:+Y'>0 Y="" S:+Y>0 Y=Y(0,0)
"RTN","GMPLBLD1",79,0)
CQ Q Y
"RTN","GMPLBLD1",80,0)
 ;
"RTN","GMPLBLD1",81,0)
FLAG(DFLT) ; Edit category flag
"RTN","GMPLBLD1",82,0)
 N DIR,X,Y,DTOUT
"RTN","GMPLBLD1",83,0)
 S DIR(0)="YAO",DIR("B")=$S(+DFLT:"YES",1:"NO")
"RTN","GMPLBLD1",84,0)
 D BLD^DIALOG(1250000.070,,,"DIR(""A"")")
"RTN","GMPLBLD1",85,0)
 D BLD^DIALOG(1250000.071,,,"DIR(""?"")")
"RTN","GMPLBLD1",86,0)
F1 D ^DIR I $D(DTOUT)!(X="^") Q "^"
"RTN","GMPLBLD1",87,0)
 I X?1"^".E W $C(7),$$NOJUMP G F1
"RTN","GMPLBLD1",88,0)
 Q Y
"RTN","GMPLBLD1",89,0)
 ;
"RTN","GMPLBLD1",90,0)
NOJUMP() ; Message
"RTN","GMPLBLD1",91,0)
 Q "   ^-jumping not allowed!"
"RTN","GMPLBLD1",92,0)
 ;
"RTN","GMPLBLD1",93,0)
RETURN() ; End of page prompt
"RTN","GMPLBLD1",94,0)
 N DIR,X,Y
"RTN","GMPLBLD1",95,0)
 S DIR(0)="E" D ^DIR
"RTN","GMPLBLD1",96,0)
 Q +Y
"RTN","GMPLBLD1",97,0)
 ;
"RTN","GMPLBLD1",98,0)
TMPIFN() ; Get temporary IFN ("#N") for ^TMP("GMPLIST",$J,)
"RTN","GMPLBLD1",99,0)
 N I,LAST S (I,LAST)=0
"RTN","GMPLBLD1",100,0)
 F  S I=$O(^TMP("GMPLIST",$J,I)) Q:+I'>0  S:I?1.N1"N" LAST=+I
"RTN","GMPLBLD1",101,0)
 S I=LAST+1,I=$E("0000",1,4-$L(I))_I
"RTN","GMPLBLD1",102,0)
TMPQ Q I_"N"
"RTN","GMPLBLD1",103,0)
 ;
"RTN","GMPLBLD1",104,0)
DELETE(IFN) ; Kill entry in ^TMP("GMPLIST",$J,)
"RTN","GMPLBLD1",105,0)
 N SEQ,ITEM S ^TMP("GMPLIST",$J,0)=^TMP("GMPLIST",$J,0)-1
"RTN","GMPLBLD1",106,0)
 S SEQ=+^TMP("GMPLIST",$J,IFN),ITEM=$P(^TMP("GMPLIST",$J,IFN),U,2),^TMP("GMPLIST",$J,IFN)="@"
"RTN","GMPLBLD1",107,0)
 K ^TMP("GMPLIST",$J,"SEQ",SEQ),^TMP("GMPLIST",$J,"PROB",ITEM),^TMP("GMPLIST",$J,"GRP",ITEM)
"RTN","GMPLBLD1",108,0)
 K:IFN?1.N1"N" ^TMP("GMPLIST",$J,IFN)
"RTN","GMPLBLD1",109,0)
 Q
"RTN","GMPLBLD1",110,0)
 ;
"RTN","GMPLBLD1",111,0)
RESEQ ; Resequence items
"RTN","GMPLBLD1",112,0)
 N SEL,NUM,SEQ,NSEQ,PIECE,IFN,GMPQUIT S VALMBCK=""
"RTN","GMPLBLD1",113,0)
 S SEL=$$SEL G:SEL="^" RSQ
"RTN","GMPLBLD1",114,0)
 F PIECE=1:1:$L(SEL,",") D  Q:$D(GMPQUIT)  W !
"RTN","GMPLBLD1",115,0)
 . S NUM=$P(SEL,",",PIECE) Q:NUM'>0
"RTN","GMPLBLD1",116,0)
 . S IFN=$P($G(^TMP("GMPLST",$J,"B",NUM)),U,1) Q:+IFN'>0  S SEQ=$P(^TMP("GMPLIST",$J,IFN),U,1)
"RTN","GMPLBLD1",117,0)
 . W !!,$P(^TMP("GMPLIST",$J,IFN),U,3)
"RTN","GMPLBLD1",118,0)
 . S NSEQ=$$SEQ(SEQ) I NSEQ="^" S GMPQUIT=1 Q 
"RTN","GMPLBLD1",119,0)
 .I SEQ'=NSEQ S ^TMP("GMPLIST",$J,IFN)=NSEQ_U_$P(^TMP("GMPLIST",$J,IFN),U,2,$L(^TMP("GMPLIST",$J,IFN),U)),^TMP("GMPLIST",$J,"SEQ",NSEQ)=IFN,GMPREBLD=1 K ^TMP("GMPLIST",$J,"SEQ",SEQ)
"RTN","GMPLBLD1",120,0)
 I $D(GMPREBLD) S VALMBCK="R",GMPLSAVE=1 ; D BUILD in exit action
"RTN","GMPLBLD1",121,0)
RSQ S:'VALMCC VALMBCK="R" S VALMSG=$$MSG^GMPLX
"RTN","GMPLBLD1",122,0)
 Q
"RTN","GMPLBLD1",123,0)
 ;
"RTN","GMPLBLD1",124,0)
EDIT ; Edit category display
"RTN","GMPLBLD1",125,0)
 N GRPS,NUM,IFN,HDR,FLG,PIECE,GMPQUIT,GMPREBLD S VALMBCK=""
"RTN","GMPLBLD1",126,0)
 S GRPS=$$SEL G:GRPS="^" EDQ
"RTN","GMPLBLD1",127,0)
 F PIECE=1:1:$L(GRPS,",") D  Q:$D(GMPQUIT)  W !
"RTN","GMPLBLD1",128,0)
 . S NUM=$P(GRPS,",",PIECE) Q:NUM'>0
"RTN","GMPLBLD1",129,0)
 .S IFN=$P($G(^TMP("GMPLST",$J,"B",NUM)),U,1) Q:+IFN'>0
"RTN","GMPLBLD1",130,0)
 . S HDR=$P(^TMP("GMPLIST",$J,IFN),U,3),FLG=$P(^TMP("GMPLIST",$J,IFN),U,4)
"RTN","GMPLBLD1",131,0)
 . S HDR=$$HDR(HDR) I HDR="^" S GMPQUIT=1 Q
"RTN","GMPLBLD1",132,0)
 . S FLG=$$FLAG(FLG) I FLG="^" S GMPQUIT=1 Q
"RTN","GMPLBLD1",133,0)
 . S $P(^TMP("GMPLIST",$J,IFN),U,3,4)=HDR_U_FLG,GMPREBLD=1
"RTN","GMPLBLD1",134,0)
 I $D(GMPREBLD) S VALMBCK="R",GMPLSAVE=1 D BUILD^GMPLBLD("^TMP(""GMPLIST"",$J)",GMPLMODE)
"RTN","GMPLBLD1",135,0)
EDQ S:'VALMCC VALMBCK="R" S VALMSG=$$MSG^GMPLX
"RTN","GMPLBLD1",136,0)
 Q
"RTN","GMPLBLD2")
0^15^B40773474
"RTN","GMPLBLD2",1,0)
GMPLBLD2 ; SLC/MKB,JFR -- Bld PL Selection Lists cont ;03/11/13
"RTN","GMPLBLD2",2,0)
 ;;2.0;Problem List;**3,28,260002**;Aug 25, 1994;Build 26
"RTN","GMPLBLD2",3,0)
 ;
"RTN","GMPLBLD2",4,0)
 ; This routine invokes IA #3991
"RTN","GMPLBLD2",5,0)
 ;
"RTN","GMPLBLD2",6,0)
NEWGRP ; Change problem groups
"RTN","GMPLBLD2",7,0)
 N NEWGRP,RETURN,MSG D FULL^VALM1
"RTN","GMPLBLD2",8,0)
 I $D(GMPLSAVE),$$CKSAVE D SAVE
"RTN","GMPLBLD2",9,0)
NG1 S NEWGRP=$$GROUP("L") G:+NEWGRP'>0 NGQ G:+NEWGRP=+GMPLGRP NGQ
"RTN","GMPLBLD2",10,0)
 I '$$LOCKCAT^GMPLAPI1(.RETURN,+NEWGRP) D  G NG1
"RTN","GMPLBLD2",11,0)
 . D EN^DDIOL($C(7))
"RTN","GMPLBLD2",12,0)
 . D BLD^DIALOG(1250000.073,,,"MSG")
"RTN","GMPLBLD2",13,0)
 . D EN^DDIOL(.MSG)
"RTN","GMPLBLD2",14,0)
 D UNLKCAT^GMPLAPI1(+GMPLGRP) S GMPLGRP=NEWGRP
"RTN","GMPLBLD2",15,0)
 D GETLIST^GMPLBLDC,BUILD^GMPLBLDC("^TMP(""GMPLIST"",$J)",GMPLMODE),HDR^GMPLBLDC
"RTN","GMPLBLD2",16,0)
NGQ S VALMBCK="R",VALMSG=$$MSG^GMPLX
"RTN","GMPLBLD2",17,0)
 Q
"RTN","GMPLBLD2",18,0)
 ;
"RTN","GMPLBLD2",19,0)
GROUP(L) ; Lookup into Problem Selection Group file #125.11
"RTN","GMPLBLD2",20,0)
 N DIC,X,Y,DLAYGO ; L = "" or "L", if LAYGO is [not] allowed
"RTN","GMPLBLD2",21,0)
 S DIC="^GMPL(125.11,",DIC(0)="AEQMZ"_L
"RTN","GMPLBLD2",22,0)
 D BLD^DIALOG(1250000.074,,,"DIC(""A"")")
"RTN","GMPLBLD2",23,0)
 S:DIC(0)["L" DLAYGO=125.11
"RTN","GMPLBLD2",24,0)
 D ^DIC S:Y'>0 Y="^" S:Y'="^" Y=+Y_U_Y(0)
"RTN","GMPLBLD2",25,0)
 Q Y
"RTN","GMPLBLD2",26,0)
 ;
"RTN","GMPLBLD2",27,0)
NEWLST ; Change selection lists
"RTN","GMPLBLD2",28,0)
 N NEWLST,RETURN,MSG D FULL^VALM1
"RTN","GMPLBLD2",29,0)
 I $D(GMPLSAVE),$$CKSAVE D SAVE
"RTN","GMPLBLD2",30,0)
NL1 S NEWLST=$$LIST("L") G:+NEWLST'>0 NLQ G:+NEWLST=+GMPLSLST NLQ
"RTN","GMPLBLD2",31,0)
 I '$$LOCKLST^GMPLAPI1(.RETURN,+NEWLST) D  G NL1
"RTN","GMPLBLD2",32,0)
 . D EN^DDIOL($C(7))
"RTN","GMPLBLD2",33,0)
 . D BLD^DIALOG(1250000.078,,,"MSG")
"RTN","GMPLBLD2",34,0)
 . D EN^DDIOL(.MSG)
"RTN","GMPLBLD2",35,0)
 D UNLKLST^GMPLAPI1(+GMPLSLST) S GMPLSLST=NEWLST
"RTN","GMPLBLD2",36,0)
 D GETLIST^GMPLBLD,BUILD^GMPLBLD("^TMP(""GMPLIST"",$J)",GMPLMODE),HDR^GMPLBLD
"RTN","GMPLBLD2",37,0)
NLQ S VALMBCK="R",VALMSG=$$MSG^GMPLX
"RTN","GMPLBLD2",38,0)
 Q
"RTN","GMPLBLD2",39,0)
 ;
"RTN","GMPLBLD2",40,0)
LIST(L) ; Lookup into Problem Selection List file #125
"RTN","GMPLBLD2",41,0)
 N DIC,X,Y,DLAYGO ; L="" or "L" if LAYGO [not] allowed
"RTN","GMPLBLD2",42,0)
 S DIC="^GMPL(125,",DIC(0)="AEQMZ"_L
"RTN","GMPLBLD2",43,0)
 D BLD^DIALOG(1250000.079,,,"DIC(""A"")")
"RTN","GMPLBLD2",44,0)
 S:DIC(0)["L" DLAYGO=125
"RTN","GMPLBLD2",45,0)
 D ^DIC S:Y'>0 Y="^" S:Y'="^" Y=+Y_U_Y(0)
"RTN","GMPLBLD2",46,0)
 Q Y
"RTN","GMPLBLD2",47,0)
 ;
"RTN","GMPLBLD2",48,0)
SELLST(LSTS,X) ;
"RTN","GMPLBLD2",49,0)
 N CNT,Y,MAXP,CLINE,SEL,OUT,RE,DIR,DTOUT
"RTN","GMPLBLD2",50,0)
 I $D(LSTS)=0 Q -1
"RTN","GMPLBLD2",51,0)
 S CNT=$P(LSTS(0),U,1)
"RTN","GMPLBLD2",52,0)
 Q:CNT=0 0
"RTN","GMPLBLD2",53,0)
 I CNT=1 D  Q LSTS(1,"ID")_U_LSTS(1,"NAME")
"RTN","GMPLBLD2",54,0)
 . D EN^DDIOL($E(LSTS(1,"NAME"),$L(X)+1,$L(LSTS(1,"NAME"))),,"?0")
"RTN","GMPLBLD2",55,0)
 S MAXP=5,CLINE=1,SEL=0,OUT=0,RE=0
"RTN","GMPLBLD2",56,0)
 F IND=1:1:CNT  D  Q:OUT
"RTN","GMPLBLD2",57,0)
 . S CLINE=CLINE+1
"RTN","GMPLBLD2",58,0)
 . D EN^DDIOL($C(9)_IND_$C(9)_LSTS(IND,"NAME"))
"RTN","GMPLBLD2",59,0)
 . I CLINE>MAXP D
"RTN","GMPLBLD2",60,0)
 . . D EN^DDIOL($$EZBLD^DIALOG(1250000.083))
"RTN","GMPLBLD2",61,0)
 . I CLINE>MAXP!(IND=CNT) D
"RTN","GMPLBLD2",62,0)
 . . S RE=1
"RTN","GMPLBLD2",63,0)
 . . K DIR
"RTN","GMPLBLD2",64,0)
 . . S DIR(0)="NAO^1:"_IND
"RTN","GMPLBLD2",65,0)
 . . D BLD^DIALOG(1250000.084,IND,,"DIR(""A"")")
"RTN","GMPLBLD2",66,0)
 . . D ^DIR
"RTN","GMPLBLD2",67,0)
 . . S SEL=X
"RTN","GMPLBLD2",68,0)
 . . S:$D(DTOUT) OUT=1
"RTN","GMPLBLD2",69,0)
 . . Q
"RTN","GMPLBLD2",70,0)
 . I RE D  Q
"RTN","GMPLBLD2",71,0)
 . . S RE=0
"RTN","GMPLBLD2",72,0)
 . . I SEL="^" S OUT=1 Q
"RTN","GMPLBLD2",73,0)
 . . I $G(SEL)="" S CLINE=1 Q
"RTN","GMPLBLD2",74,0)
 . . I $G(SEL)>IND S SEL=0,OUT=1 Q
"RTN","GMPLBLD2",75,0)
 . . E  S OUT=1 Q
"RTN","GMPLBLD2",76,0)
 Q:SEL>0 LSTS(SEL,"ID")_U_LSTS(SEL,"NAME")
"RTN","GMPLBLD2",77,0)
 Q -1
"RTN","GMPLBLD2",78,0)
 ;
"RTN","GMPLBLD2",79,0)
PRINTALL(LSTS,CHOOSE) ;
"RTN","GMPLBLD2",80,0)
 N IND,CNT,GMPQUIT,LINE
"RTN","GMPLBLD2",81,0)
 S GMPQUIT=0,LINE=1
"RTN","GMPLBLD2",82,0)
 I $D(LSTS)=0 Q
"RTN","GMPLBLD2",83,0)
 S CNT=$P(LSTS(0),U,1) Q:CNT=0
"RTN","GMPLBLD2",84,0)
 D:$G(CHOOSE) EN^DDIOL($$EZBLD^DIALOG(1250000.085))
"RTN","GMPLBLD2",85,0)
 F IND=1:1:CNT D
"RTN","GMPLBLD2",86,0)
 . S LINE=LINE+1
"RTN","GMPLBLD2",87,0)
 . D EN^DDIOL("   "_LSTS(IND,"NAME"))
"RTN","GMPLBLD2",88,0)
 . I LINE>(IOSL-4) S LINE=1 S:'$$CONTINUE GMPQUIT=1 Q:$D(GMPQUIT)  Q
"RTN","GMPLBLD2",89,0)
 D EN^DDIOL("",,"!")
"RTN","GMPLBLD2",90,0)
 Q
"RTN","GMPLBLD2",91,0)
 ;
"RTN","GMPLBLD2",92,0)
CONTINUE() ; -- end of page prompt
"RTN","GMPLBLD2",93,0)
 N DIR,X,Y
"RTN","GMPLBLD2",94,0)
 S DIR(0)="E"
"RTN","GMPLBLD2",95,0)
 D BLD^DIALOG(1250000.086,,,"DIR(""A"")")
"RTN","GMPLBLD2",96,0)
 D ^DIR
"RTN","GMPLBLD2",97,0)
 Q +Y
"RTN","GMPLBLD2",98,0)
 ;
"RTN","GMPLBLD2",99,0)
LSTSH1(LSTS,FILE,FIELDS) ; All items ??
"RTN","GMPLBLD2",100,0)
 N DIR,X,Y,CNT,PARM
"RTN","GMPLBLD2",101,0)
 S CNT=$P(LSTS(0),U,1) Q:CNT=0 1
"RTN","GMPLBLD2",102,0)
 S PARM(1)=FILE
"RTN","GMPLBLD2",103,0)
 S PARM(2)=FIELDS
"RTN","GMPLBLD2",104,0)
 D EN^DDIOL($$EZBLD^DIALOG(1250000.087,.PARM))
"RTN","GMPLBLD2",105,0)
 Q:CNT<(IOSL-4) 1
"RTN","GMPLBLD2",106,0)
 I CNT>(IOSL-4) D
"RTN","GMPLBLD2",107,0)
 . S PARM(1)=CNT
"RTN","GMPLBLD2",108,0)
 . S PARM(2)=FILE
"RTN","GMPLBLD2",109,0)
 . D BLD^DIALOG(1250000.088,.PARM,,"DIR(""A"")")
"RTN","GMPLBLD2",110,0)
 S DIR(0)="YO"
"RTN","GMPLBLD2",111,0)
 D ^DIR Q Y
"RTN","GMPLBLD2",112,0)
 ;
"RTN","GMPLBLD2",113,0)
ASKADD(NEWEL,FILE) ; Ask
"RTN","GMPLBLD2",114,0)
 N DIR,X,Y,CNT,PARM
"RTN","GMPLBLD2",115,0)
 S CNT=$P(LSTS(0),U,1)
"RTN","GMPLBLD2",116,0)
 S PARM(1)=NEWEL
"RTN","GMPLBLD2",117,0)
 S PARM(2)=FILE
"RTN","GMPLBLD2",118,0)
 D BLD^DIALOG(1250000.089,.PARM,,"DIR(""A"")")
"RTN","GMPLBLD2",119,0)
 S DIR(0)="YO",DIR("B")="No"
"RTN","GMPLBLD2",120,0)
 D ^DIR Q Y
"RTN","GMPLBLD2",121,0)
 ;
"RTN","GMPLBLD2",122,0)
LAST(ROOT) ; Returns last subscript
"RTN","GMPLBLD2",123,0)
 N I,J S (I,J)=""
"RTN","GMPLBLD2",124,0)
 F  S I=$O(@(ROOT_"I)")) Q:I=""  S J=I
"RTN","GMPLBLD2",125,0)
 Q J
"RTN","GMPLBLD2",126,0)
 ;
"RTN","GMPLBLD2",127,0)
CKSAVE() ; Save [changes] ??
"RTN","GMPLBLD2",128,0)
 N DIR,X,Y,TEXT S TEXT=$S($D(GMPLGRP):$$EZBLD^DIALOG(1250000.056),1:$$EZBLD^DIALOG(1250000.072))
"RTN","GMPLBLD2",129,0)
 D BLD^DIALOG(1250000.090,TEXT,,"DIR(""A"")")
"RTN","GMPLBLD2",130,0)
 S DIR("B")="YES"
"RTN","GMPLBLD2",131,0)
 D BLD^DIALOG(1250000.091,TEXT,,"DIR(""?"")")
"RTN","GMPLBLD2",132,0)
 S DIR(0)="YA" D ^DIR
"RTN","GMPLBLD2",133,0)
 Q +Y
"RTN","GMPLBLD2",134,0)
 ;
"RTN","GMPLBLD2",135,0)
SAVE ; Save changes to group/list
"RTN","GMPLBLD2",136,0)
 N GMPLQT,LABEL,DA,MSG,%
"RTN","GMPLBLD2",137,0)
 S GMPLQT=0
"RTN","GMPLBLD2",138,0)
 I $D(GMPLGRP) D  I GMPLQT Q
"RTN","GMPLBLD2",139,0)
 . N ITM,CODE,MSG
"RTN","GMPLBLD2",140,0)
 . S ITM=0
"RTN","GMPLBLD2",141,0)
 . F  S ITM=$O(^TMP("GMPLIST",$J,ITM)) Q:'ITM!(GMPLQT)  D
"RTN","GMPLBLD2",142,0)
 .. S CODE=$P(^TMP("GMPLIST",$J,ITM),U,4) Q:'$L(CODE)
"RTN","GMPLBLD2",143,0)
 .. I '$$STATCHK^ICDAPIU(CODE,DT) S GMPLQT=1 Q
"RTN","GMPLBLD2",144,0)
 . I 'GMPLQT Q  ;no inactive codes in the category
"RTN","GMPLBLD2",145,0)
 . D FULL^VALM1
"RTN","GMPLBLD2",146,0)
 . D BLD^DIALOG(1250000.092,,,"MSG")
"RTN","GMPLBLD2",147,0)
 . D EN^DDIOL($C(7))
"RTN","GMPLBLD2",148,0)
 . D EN^DDIOL(.MSG)
"RTN","GMPLBLD2",149,0)
 . N DIR,DUOUT,DTOUT,DIRUT
"RTN","GMPLBLD2",150,0)
 . S DIR(0)="E" D ^DIR
"RTN","GMPLBLD2",151,0)
 . S VALMBCK="R",GMPLQT=1
"RTN","GMPLBLD2",152,0)
 . Q
"RTN","GMPLBLD2",153,0)
 ;
"RTN","GMPLBLD2",154,0)
 I '$D(GMPLGRP),$D(GMPLSLST) D  I GMPLQT Q
"RTN","GMPLBLD2",155,0)
 . N GRP,RET,MSG
"RTN","GMPLBLD2",156,0)
 . S GRP=0
"RTN","GMPLBLD2",157,0)
 . F  S GRP=$O(^TMP("GMPLIST",$J,"GRP",GRP)) Q:'GRP!(GMPLQT)  D
"RTN","GMPLBLD2",158,0)
 .. I $$VALGRP^GMPLAPI6(.RET,+GRP) Q  ;no inactive codes in the GROUP
"RTN","GMPLBLD2",159,0)
 .. S GMPLQT=1
"RTN","GMPLBLD2",160,0)
 . I 'GMPLQT Q  ; all groups and problems OK
"RTN","GMPLBLD2",161,0)
 . D FULL^VALM1
"RTN","GMPLBLD2",162,0)
 . D BLD^DIALOG(1250000.093,,,"MSG")
"RTN","GMPLBLD2",163,0)
 . D EN^DDIOL($C(7))
"RTN","GMPLBLD2",164,0)
 . D EN^DDIOL(.MSG)
"RTN","GMPLBLD2",165,0)
 . N DIR,DUOUT,DTOUT,DIRUT
"RTN","GMPLBLD2",166,0)
 . S DIR(0)="E" D ^DIR
"RTN","GMPLBLD2",167,0)
 . S VALMBCK="R",GMPLQT=1
"RTN","GMPLBLD2",168,0)
 . Q
"RTN","GMPLBLD2",169,0)
 K MSG
"RTN","GMPLBLD2",170,0)
 D BLD^DIALOG(1250000.094,,,"MSG")
"RTN","GMPLBLD2",171,0)
 D EN^DDIOL(.MSG)
"RTN","GMPLBLD2",172,0)
 N SOURCE,RETURN
"RTN","GMPLBLD2",173,0)
 M SOURCE=^TMP("GMPLIST",$J)
"RTN","GMPLBLD2",174,0)
 S %=$S($D(GMPLGRP):$$SAVGRP^GMPLAPI1(.RETURN,+GMPLGRP,.SOURCE),1:$$SAVLST^GMPLAPI1(.RETURN,+GMPLSLST,.SOURCE))
"RTN","GMPLBLD2",175,0)
 K GMPLSAVE,SOURCE S:$D(GMPLGRP) GMPSAVED=1
"RTN","GMPLBLD2",176,0)
 S VALMBCK="Q" D EN^DDIOL($$EZBLD^DIALOG(1250000.095),,"?0") H 1
"RTN","GMPLBLD2",177,0)
 Q
"RTN","GMPLBLD2",178,0)
 ;
"RTN","GMPLBLD2",179,0)
DELETE ; Delete problem group
"RTN","GMPLBLD2",180,0)
 N DIR,X,Y,DA,DIK,IFN,CNT,RETURN,MSG,%
"RTN","GMPLBLD2",181,0)
 S VALMBCK=$S(VALMCC:"",1:"R")
"RTN","GMPLBLD2",182,0)
 S %=$$CATUSED^GMPLAPI1(.RETURN,+GMPLGRP)
"RTN","GMPLBLD2",183,0)
 I RETURN D  H 2 Q
"RTN","GMPLBLD2",184,0)
 . D BLD^DIALOG(1250000.096,,,"MSG")
"RTN","GMPLBLD2",185,0)
 . D EN^DDIOL($C(7))
"RTN","GMPLBLD2",186,0)
 . D EN^DDIOL(.MSG)
"RTN","GMPLBLD2",187,0)
 S DIR(0)="YA",DIR("B")="NO"
"RTN","GMPLBLD2",188,0)
 D BLD^DIALOG(1250000.097,$P(GMPLGRP,U,2),,"DIR(""A"")")
"RTN","GMPLBLD2",189,0)
 D BLD^DIALOG(1250000.098,,,"DIR(""?"")")
"RTN","GMPLBLD2",190,0)
 D ^DIR Q:'Y
"RTN","GMPLBLD2",191,0)
DEL1 ; Ok, go for it ...
"RTN","GMPLBLD2",192,0)
 D EN^DDIOL($$EZBLD^DIALOG(1250000.099),"","!!")
"RTN","GMPLBLD2",193,0)
 K RETURN
"RTN","GMPLBLD2",194,0)
 S %=$$DELCAT^GMPLAPI1(.RETURN,+GMPLGRP)
"RTN","GMPLBLD2",195,0)
 D UNLKCAT^GMPLAPI1(+GMPLGRP) S GMPLGRP=0 K GMPLSAVE
"RTN","GMPLBLD2",196,0)
 D EN^DDIOL($$EZBLD^DIALOG(1250000.100),"","?0")
"RTN","GMPLBLD2",197,0)
 D NEWGRP S:+GMPLGRP'>0 VALMBCK="Q"
"RTN","GMPLBLD2",198,0)
 Q
"RTN","GMPLBLD2",199,0)
 ;
"RTN","GMPLBLD2",200,0)
ASSIGN ; allow lookup of PROB SEL LIST and assign to users
"RTN","GMPLBLD2",201,0)
 ;
"RTN","GMPLBLD2",202,0)
 N DIC,X,Y,DUOUT,DTOUT,GMPLSLST,RET,MSG
"RTN","GMPLBLD2",203,0)
 S Y=$$LIST("")
"RTN","GMPLBLD2",204,0)
 Q:Y'>0
"RTN","GMPLBLD2",205,0)
 I '$$VALLIST^GMPLAPI6(.RET,+Y) D  G ASSIGN
"RTN","GMPLBLD2",206,0)
 . D BLD^DIALOG(1250000.093,,,"MSG")
"RTN","GMPLBLD2",207,0)
 . D EN^DDIOL($C(7))
"RTN","GMPLBLD2",208,0)
 . D EN^DDIOL(.MSG)
"RTN","GMPLBLD2",209,0)
 S GMPLSLST=+Y
"RTN","GMPLBLD2",210,0)
 D USERS^GMPLBLD3("1")
"RTN","GMPLBLD2",211,0)
 Q
"RTN","GMPLBLD3")
0^16^B19546906
"RTN","GMPLBLD3",1,0)
GMPLBLD3 ; SLC/MKB -- Bld PL Selection Lists cont ;03/27/13
"RTN","GMPLBLD3",2,0)
 ;;2.0;Problem List;**28,260002**;Aug 25, 1994;Build 26
"RTN","GMPLBLD3",3,0)
 ;
"RTN","GMPLBLD3",4,0)
 ; This routine invokes IA #3991
"RTN","GMPLBLD3",5,0)
 ;
"RTN","GMPLBLD3",6,0)
ASSIGN ; Assign list to clinic, users: Expects GMPLSLST
"RTN","GMPLBLD3",7,0)
 N DIE,DA,DR,RET,MSG
"RTN","GMPLBLD3",8,0)
 D FULL^VALM1 G:+$G(GMPLSLST)'>0 ASQ
"RTN","GMPLBLD3",9,0)
 I '$$VALLIST^GMPLAPI6(.RET,+GMPLSLST) D  G ASQ
"RTN","GMPLBLD3",10,0)
 . D BLD^DIALOG(1250000.102,,,"MSG")
"RTN","GMPLBLD3",11,0)
 . D EN^DDIOL($C(7))
"RTN","GMPLBLD3",12,0)
 . D EN^DDIOL(.MSG)
"RTN","GMPLBLD3",13,0)
 . N DIR,DUOUT,DTOUT,DIRUT
"RTN","GMPLBLD3",14,0)
 . S DIR(0)="E" D ^DIR
"RTN","GMPLBLD3",15,0)
 . Q
"RTN","GMPLBLD3",16,0)
 ;
"RTN","GMPLBLD3",17,0)
 K MSG
"RTN","GMPLBLD3",18,0)
 D BLD^DIALOG(1250000.103,,,"MSG")
"RTN","GMPLBLD3",19,0)
 D EN^DDIOL(.MSG)
"RTN","GMPLBLD3",20,0)
 D ASGCLIN(+GMPLSLST)
"RTN","GMPLBLD3",21,0)
 D USERS("1") ; assign
"RTN","GMPLBLD3",22,0)
ASQ S VALMBCK="R",VALMSG=$$MSG^GMPLX
"RTN","GMPLBLD3",23,0)
 Q
"RTN","GMPLBLD3",24,0)
 ;
"RTN","GMPLBLD3",25,0)
ASGCLIN(GMPLSLST) ;
"RTN","GMPLBLD3",26,0)
 N CLIN,RETURN,LST,%
"RTN","GMPLBLD3",27,0)
 S %=$$GETLIST^GMPLAPI1(.LST,+GMPLSLST,0,1)
"RTN","GMPLBLD3",28,0)
 S CLIN=$$CLINIC(,$P($G(LST("LST","CLINIC")),U,2))
"RTN","GMPLBLD3",29,0)
 I +$G(CLIN)>0 S %=$$ADDLOC^GMPLAPI5(.RETURN,GMPLSLST,CLIN)
"RTN","GMPLBLD3",30,0)
 Q
"RTN","GMPLBLD3",31,0)
 ;
"RTN","GMPLBLD3",32,0)
CLINIC(PREFIX,SUFIX) ;
"RTN","GMPLBLD3",33,0)
 N X,Y
"RTN","GMPLBLD3",34,0)
 S:$G(SUFIX)'="" DIC("B")=SUFIX
"RTN","GMPLBLD3",35,0)
 S DIC("S")="I $P(^(0),U,3)=""C"""
"RTN","GMPLBLD3",36,0)
 S DIC="^SC(",DIC(0)="AEQM",DIC("A")=$G(PREFIX)_$$EZBLD^DIALOG(1250000.104)
"RTN","GMPLBLD3",37,0)
 D ^DIC
"RTN","GMPLBLD3",38,0)
 Q Y
"RTN","GMPLBLD3",39,0)
 ;
"RTN","GMPLBLD3",40,0)
USERS(ADD) ; -- select user(s) to de-/assign list
"RTN","GMPLBLD3",41,0)
 N DIR,DIC,DIE,DR,DA,X,Y,GMPLUSER,GMPLI,RETURN,PRMT,MSG,PARM
"RTN","GMPLBLD3",42,0)
 Q:+$G(GMPLSLST)'>0  S GMPLUSER=""
"RTN","GMPLBLD3",43,0)
 S DIC="^VA(200,",DIC(0)="EQM",DIC("A")=$$EZBLD^DIALOG(1250000.107)
"RTN","GMPLBLD3",44,0)
 F  D READ Q:+Y'>0  S GMPLUSER=GMPLUSER_U_+Y,DIC("A")=$$EZBLD^DIALOG(1250000.108)
"RTN","GMPLBLD3",45,0)
 I '$L(GMPLUSER) D  Q
"RTN","GMPLBLD3",46,0)
 . D BLD^DIALOG(1250000.109,,,"MSG")
"RTN","GMPLBLD3",47,0)
 . D EN^DDIOL(.MSG)
"RTN","GMPLBLD3",48,0)
 S DIR(0)="YA",DIR("A")=$$EZBLD^DIALOG(1250000.110),DIR("B")="NO"
"RTN","GMPLBLD3",49,0)
 S PARM(1)=$P(GMPLSLST,U,2)
"RTN","GMPLBLD3",50,0)
 S PARM(2)=$L(GMPLUSER,U)-1
"RTN","GMPLBLD3",51,0)
 D:ADD BLD^DIALOG(1250000.111,.PARM,,"DIR(""?"")")
"RTN","GMPLBLD3",52,0)
 D:'ADD BLD^DIALOG(1250000.112,.PARM,,"DIR(""?"")")
"RTN","GMPLBLD3",53,0)
 D ^DIR Q:'Y
"RTN","GMPLBLD3",54,0)
USR ;
"RTN","GMPLBLD3",55,0)
 N %
"RTN","GMPLBLD3",56,0)
 K MSG
"RTN","GMPLBLD3",57,0)
 D:ADD BLD^DIALOG(1250000.113,$P(GMPLSLST,U,2),,"MSG")
"RTN","GMPLBLD3",58,0)
 D:'ADD BLD^DIALOG(1250000.114,$P(GMPLSLST,U,2),,"MSG")
"RTN","GMPLBLD3",59,0)
 D EN^DDIOL(.MSG)
"RTN","GMPLBLD3",60,0)
 F GMPLI=1:1:$L(GMPLUSER,U) S DA=$P(GMPLUSER,U,GMPLI) I DA D
"RTN","GMPLBLD3",61,0)
 . S %=$S(ADD:$$ASSUSR^GMPLAPI6(.RETURN,+GMPLSLST,DA),1:$$REMUSR^GMPLAPI6(.RETURN,+GMPLSLST,DA))
"RTN","GMPLBLD3",62,0)
 . D EN^DDIOL($$PROVNAME^GMPLEXT(DA),,"!?4")
"RTN","GMPLBLD3",63,0)
 D EN^DDIOL($$EZBLD^DIALOG(1250000.115),"","!!")
"RTN","GMPLBLD3",64,0)
 Q
"RTN","GMPLBLD3",65,0)
 ;
"RTN","GMPLBLD3",66,0)
READ ; prompt for username, respond
"RTN","GMPLBLD3",67,0)
 D EN^DDIOL(DIC("A")) R X:DTIME I '$T!("^"[X) S Y=-1 Q
"RTN","GMPLBLD3",68,0)
 I X="?" D  G READ
"RTN","GMPLBLD3",69,0)
 . D:ADD BLD^DIALOG(1250000.116,,,"MSG")
"RTN","GMPLBLD3",70,0)
 . D:'ADD BLD^DIALOG(1250000.117,,,"MSG")
"RTN","GMPLBLD3",71,0)
 . D EN^DDIOL(.MSG)
"RTN","GMPLBLD3",72,0)
 I X?1"??".E D  G READ
"RTN","GMPLBLD3",73,0)
 . I X="??" D
"RTN","GMPLBLD3",74,0)
 . . S DIC("S")="I $P($G(^(125)),U,2)="_+GMPLSLST
"RTN","GMPLBLD3",75,0)
 . . D BLD^DIALOG(1250000.118,$P(GMPLSLST,U,2),,"MSG")
"RTN","GMPLBLD3",76,0)
 . . D EN^DDIOL(.MSG)
"RTN","GMPLBLD3",77,0)
 . S D="B",DZ="??" D DQ^DICQ K D,DZ,DIC("S")
"RTN","GMPLBLD3",78,0)
 D ^DIC G:Y'>0 READ
"RTN","GMPLBLD3",79,0)
 Q
"RTN","GMPLBLD3",80,0)
 ;
"RTN","GMPLBLD3",81,0)
DELETE ; Delete Selection List
"RTN","GMPLBLD3",82,0)
 N DIR,DIK,DA,X,Y,VIEW,USER,GMPCOUNT,GMPQUIT,GMPLSLST,RETURN,MSG,%
"RTN","GMPLBLD3",83,0)
 S GMPCOUNT=0,GMPLSLST=$$LIST^GMPLBLD2("") Q:GMPLSLST=0
"RTN","GMPLBLD3",84,0)
 D BLD^DIALOG(1250000.119,,,"MSG")
"RTN","GMPLBLD3",85,0)
 D EN^DDIOL(.MSG)
"RTN","GMPLBLD3",86,0)
 S %=$$LSTUSED^GMPLAPI1(.RETURN,+GMPLSLST)
"RTN","GMPLBLD3",87,0)
 S GMPCOUNT=RETURN
"RTN","GMPLBLD3",88,0)
 I GMPCOUNT D  Q
"RTN","GMPLBLD3",89,0)
 . K MSG
"RTN","GMPLBLD3",90,0)
 . D BLD^DIALOG(1250000.120,GMPCOUNT,,"MSG")
"RTN","GMPLBLD3",91,0)
 . D EN^DDIOL($C(7))
"RTN","GMPLBLD3",92,0)
 . D EN^DDIOL(.MSG)
"RTN","GMPLBLD3",93,0)
 D EN^DDIOL($$EZBLD^DIALOG(1250000.121))
"RTN","GMPLBLD3",94,0)
DEL1 S DIR(0)="Y",DIR("B")="NO"
"RTN","GMPLBLD3",95,0)
 D BLD^DIALOG(1250000.122,,,"DIR(""A"")")
"RTN","GMPLBLD3",96,0)
 D BLD^DIALOG(1250000.123,,,"DIR(""?"")")
"RTN","GMPLBLD3",97,0)
 W $C(7),! D ^DIR Q:'Y
"RTN","GMPLBLD3",98,0)
 K MSG
"RTN","GMPLBLD3",99,0)
 D BLD^DIALOG(1250000.124,$P(GMPLSLST,U,2),,"MSG")
"RTN","GMPLBLD3",100,0)
 D EN^DDIOL(.MSG)
"RTN","GMPLBLD3",101,0)
 K RETURN
"RTN","GMPLBLD3",102,0)
 S %=$$DELLST^GMPLAPI1(.RETURN,+GMPLSLST)
"RTN","GMPLBLD3",103,0)
 D EN^DDIOL(".",,"?0")
"RTN","GMPLBLD3",104,0)
 D EN^DDIOL($$EZBLD^DIALOG(1250000.115))
"RTN","GMPLBLD3",105,0)
 D EN^DDIOL("","","!")
"RTN","GMPLBLD3",106,0)
 Q
"RTN","GMPLBLD3",107,0)
 ;
"RTN","GMPLBLD3",108,0)
MENU ; -- init variables and list array for GMPL LIST MENU list template
"RTN","GMPLBLD3",109,0)
 ;    Expects GMPLSLST=selection list
"RTN","GMPLBLD3",110,0)
 N RETURN,GRP,IND,IND1,MSG,%,PRB
"RTN","GMPLBLD3",111,0)
 S IND=0,IND1=0
"RTN","GMPLBLD3",112,0)
 D EN^DDIOL($$EZBLD^DIALOG(1250000.623,$P(GMPLSLST,U,2)),,"!!")
"RTN","GMPLBLD3",113,0)
 S %=$$GETLIST^GMPLAPI1(.RETURN,+GMPLSLST,"")
"RTN","GMPLBLD3",114,0)
 M ^TMP("GMPLMENU1",$J)=RETURN
"RTN","GMPLBLD3",115,0)
 F  S IND=$O(^TMP("GMPLMENU1",$J,"GRP",IND)) Q:'IND  D
"RTN","GMPLBLD3",116,0)
 . S GRP=^TMP("GMPLMENU1",$J,"GRP",IND)
"RTN","GMPLBLD3",117,0)
 . S ^TMP("GMPLMENU",$J,IND,0)=$P(^TMP("GMPLMENU1",$J,GRP),U,3,4)
"RTN","GMPLBLD3",118,0)
 . F  S IND1=$O(^TMP("GMPLMENU1",$J,"GRP",IND,IND1)) Q:'IND1  D
"RTN","GMPLBLD3",119,0)
 . . S PRB=^TMP("GMPLMENU1",$J,"GRP",IND,IND1)
"RTN","GMPLBLD3",120,0)
 . . S ^TMP("GMPLMENU",$J,IND,IND1)=$P(PRB,U,4)_U_$P(PRB,U,1,2)
"RTN","GMPLBLD3",121,0)
 K ^TMP("GMPLMENU1",$J)
"RTN","GMPLBLD3",122,0)
 I '$D(^TMP("GMPLMENU",$J)) D  H 2 S VALMBCK="Q",VALMQUIT=1 Q
"RTN","GMPLBLD3",123,0)
 . D BLD^DIALOG(1250000.125,,,"MSG")
"RTN","GMPLBLD3",124,0)
 . D EN^DDIOL(.MSG)
"RTN","GMPLBLD3",125,0)
 D BUILD^GMPLMENU
"RTN","GMPLBLD3",126,0)
 Q
"RTN","GMPLBLDC")
0^17^B28612202
"RTN","GMPLBLDC",1,0)
GMPLBLDC ; SLC/MKB -- Build Problem Selection Categories ;3/27/13
"RTN","GMPLBLDC",2,0)
 ;;2.0;Problem List;**3,7,28,260002**;Aug 25, 1994;Build 26
"RTN","GMPLBLDC",3,0)
 ;
"RTN","GMPLBLDC",4,0)
 ; This routine invokes IA #3991
"RTN","GMPLBLDC",5,0)
 ;
"RTN","GMPLBLDC",6,0)
EN ; -- main entry point for GMPL SELECTION GROUP BUILD
"RTN","GMPLBLDC",7,0)
 D EN^VALM("GMPL SELECTION GROUP BUILD")
"RTN","GMPLBLDC",8,0)
 Q
"RTN","GMPLBLDC",9,0)
 ;
"RTN","GMPLBLDC",10,0)
HDR ; -- header code
"RTN","GMPLBLDC",11,0)
 N NAME,NUM,DATE S NUM=+^TMP("GMPLST",$J,0)_" "_$S(+^TMP("GMPLST",$J,0)'=1:$$EZBLD^DIALOG(1250000.055),1:$$EZBLD^DIALOG(1250000.057))
"RTN","GMPLBLDC",12,0)
 S DATE=$$EZBLD^DIALOG(1250000.038)_$P(^TMP("GMPLIST",$J,"CAT","MODIFIED"),U,2)
"RTN","GMPLBLDC",13,0)
 S VALMHDR(1)=DATE_$J(NUM,79-$L(DATE))
"RTN","GMPLBLDC",14,0)
 S NAME=^TMP("GMPLIST",$J,"CAT","NAME"),VALMHDR(2)=$J(NAME,$L(NAME)\2+41)
"RTN","GMPLBLDC",15,0)
 Q
"RTN","GMPLBLDC",16,0)
 ;
"RTN","GMPLBLDC",17,0)
INIT ; -- init variables and list array
"RTN","GMPLBLDC",18,0)
 N RETURN,MSG
"RTN","GMPLBLDC",19,0)
 S GMPLGRP=$$GROUP^GMPLBLD2("L") I GMPLGRP="^" S VALMQUIT=1 Q
"RTN","GMPLBLDC",20,0)
 I '$$LOCKCAT^GMPLAPI1(.RETURN,+GMPLGRP) D  G INIT
"RTN","GMPLBLDC",21,0)
 . D EN^DDIOL($C(7))
"RTN","GMPLBLDC",22,0)
 . D BLD^DIALOG(1250000.073,,,"MSG")
"RTN","GMPLBLDC",23,0)
 . D EN^DDIOL(.MSG)
"RTN","GMPLBLDC",24,0)
 S GMPLMODE="E",VALMSG=$$MSG^GMPLX
"RTN","GMPLBLDC",25,0)
 K MSG
"RTN","GMPLBLDC",26,0)
 D BLD^DIALOG(1250000.126,,,"MSG")
"RTN","GMPLBLDC",27,0)
 D EN^DDIOL(.MSG)
"RTN","GMPLBLDC",28,0)
 D GETLIST,BUILD("^TMP(""GMPLIST"",$J)",GMPLMODE)
"RTN","GMPLBLDC",29,0)
 Q
"RTN","GMPLBLDC",30,0)
 ;
"RTN","GMPLBLDC",31,0)
GETLIST ; Build ^TMP("GMPLIST",$J,#) of problems
"RTN","GMPLBLDC",32,0)
 K ^TMP("GMPLIST",$J)
"RTN","GMPLBLDC",33,0)
 N RETURN,%
"RTN","GMPLBLDC",34,0)
 S %=$$GETCAT^GMPLAPI1(.RETURN,+GMPLGRP)
"RTN","GMPLBLDC",35,0)
 M ^TMP("GMPLIST",$J)=RETURN
"RTN","GMPLBLDC",36,0)
 Q
"RTN","GMPLBLDC",37,0)
 ;
"RTN","GMPLBLDC",38,0)
BUILD(LIST,MODE) ; Build ^TMP("GMPLST",$J,) of current items in LIST for display
"RTN","GMPLBLDC",39,0)
 N SEQ,LCNT,NUM,PROB,TEXT,IFN,ITEM,CODE,FLAG
"RTN","GMPLBLDC",40,0)
 D CLEAN^VALM10
"RTN","GMPLBLDC",41,0)
 I $P($G(^TMP("GMPLIST",$J,0)),U,1)'>0 S ^TMP("GMPLST",$J,1,0)="   ",^TMP("GMPLST",$J,2,0)=$$EZBLD^DIALOG(1250000.127),^TMP("GMPLST",$J,0)="0^2",VALMCNT=2 Q
"RTN","GMPLBLDC",42,0)
 S (LCNT,NUM,SEQ)=0
"RTN","GMPLBLDC",43,0)
 F  S SEQ=$O(^TMP("GMPLIST",$J,"SEQ",SEQ)) Q:SEQ'>0  D
"RTN","GMPLBLDC",44,0)
 . S IFN=^TMP("GMPLIST",$J,"SEQ",SEQ),LCNT=LCNT+1,NUM=NUM+1,CODE=""
"RTN","GMPLBLDC",45,0)
 . S PROB=$P(^TMP("GMPLIST",$J,IFN),U,2),TEXT=$P(^TMP("GMPLIST",$J,IFN),U,3)
"RTN","GMPLBLDC",46,0)
 . S:$D(^TMP("GMPLIST",$J,IFN,"CODE"))>0 CODE=^TMP("GMPLIST",$J,IFN,"CODE")
"RTN","GMPLBLDC",47,0)
 . S ^TMP("GMPLST",$J,LCNT,0)=$S(MODE="I":$J("<"_SEQ_">",8),1:"        ")_$J(NUM,4)_" "_TEXT
"RTN","GMPLBLDC",48,0)
 . I $L(CODE) D
"RTN","GMPLBLDC",49,0)
 .. S ^TMP("GMPLST",$J,LCNT,0)=^TMP("GMPLST",$J,LCNT,0)_" ("_$P(CODE,U,1)_")"
"RTN","GMPLBLDC",50,0)
 .. S FLAG=$P(CODE,U,2)
"RTN","GMPLBLDC",51,0)
 .. Q:$G(FLAG)="0"  ; code is active
"RTN","GMPLBLDC",52,0)
 .. S ^TMP("GMPLST",$J,LCNT,0)=^TMP("GMPLST",$J,LCNT,0)_$$EZBLD^DIALOG(1250000.128)
"RTN","GMPLBLDC",53,0)
 . D CNTRL^VALM10(LCNT,9,5,IOINHI,IOINORM)
"RTN","GMPLBLDC",54,0)
 . S ^TMP("GMPLST",$J,"B",NUM)=IFN
"RTN","GMPLBLDC",55,0)
 S ^TMP("GMPLST",$J,0)=NUM_U_LCNT,VALMCNT=LCNT
"RTN","GMPLBLDC",56,0)
 Q
"RTN","GMPLBLDC",57,0)
 ;
"RTN","GMPLBLDC",58,0)
HELP ; -- help code
"RTN","GMPLBLDC",59,0)
 N X,MSG
"RTN","GMPLBLDC",60,0)
 D BLD^DIALOG(1250000.129,,,"MSG")
"RTN","GMPLBLDC",61,0)
 D EN^DDIOL(.MSG)
"RTN","GMPLBLDC",62,0)
 R X:DTIME
"RTN","GMPLBLDC",63,0)
 S VALMSG=$$MSG^GMPLX,VALMBCK=$S(VALMCC:"",1:"R")
"RTN","GMPLBLDC",64,0)
 Q
"RTN","GMPLBLDC",65,0)
 ;
"RTN","GMPLBLDC",66,0)
EXIT ; -- exit code
"RTN","GMPLBLDC",67,0)
 I $D(GMPLSAVE),$$CKSAVE^GMPLBLD2 D
"RTN","GMPLBLDC",68,0)
 . D SAVE^GMPLBLD2
"RTN","GMPLBLDC",69,0)
 D UNLKCAT^GMPLAPI1(+GMPLGRP)
"RTN","GMPLBLDC",70,0)
 K GMPLIST,GMPLST,GMPLMODE,GMPLGRP,GMPLSAVE,GMPREBLD,GMPQUIT,RT1,TMPITEM
"RTN","GMPLBLDC",71,0)
 K VALMBCK,VALMCNT,VALMSG,VALMHDR
"RTN","GMPLBLDC",72,0)
 K ^TMP("GMPLIST",$J),^TMP("GMPLST",$J)
"RTN","GMPLBLDC",73,0)
 Q
"RTN","GMPLBLDC",74,0)
 ;
"RTN","GMPLBLDC",75,0)
ADD ; Add new problem(s)
"RTN","GMPLBLDC",76,0)
 N X,Y,SEQ,CODE,IFN,GMPVOCAB,GMPQUIT,GMPREBLD S VALMBCK=""
"RTN","GMPLBLDC",77,0)
 S GMPVOCAB=$$VOCAB^GMPLX1 Q:GMPVOCAB="^"
"RTN","GMPLBLDC",78,0)
 F  D  Q:$D(GMPQUIT)  W !!
"RTN","GMPLBLDC",79,0)
 . S (X,Y)="" D SEARCH^GMPLX(.X,.Y,$$EZBLD^DIALOG(1250000.130),"1",GMPVOCAB)
"RTN","GMPLBLDC",80,0)
 . I +Y'>0 S GMPQUIT=1 Q
"RTN","GMPLBLDC",81,0)
 . S X=$$TEXT^GMPLBLD1(X) I X="^" S GMPQUIT=1 Q
"RTN","GMPLBLDC",82,0)
 . S CODE=$$CODE^GMPLBLD1($G(Y(1))) I CODE="^" S GMPQUIT=1 Q
"RTN","GMPLBLDC",83,0)
 . S RT1="^TMP(""GMPLIST"",$J,""SEQ"",",SEQ=+$$LAST^GMPLBLD2(RT1)+1 ; dflt = next #
"RTN","GMPLBLDC",84,0)
 . S SEQ=$$SEQ^GMPLBLD1(SEQ) I SEQ="^" S GMPQUIT=1 Q
"RTN","GMPLBLDC",85,0)
 . S IFN=$$TMPIFN^GMPLBLD1,^TMP("GMPLIST",$J,0)=^TMP("GMPLIST",$J,0)+1
"RTN","GMPLBLDC",86,0)
 . S ^TMP("GMPLIST",$J,IFN)=SEQ_U_+Y_U_X_U_CODE ; seq ^ # ^ text ^ code
"RTN","GMPLBLDC",87,0)
 . S ^TMP("GMPLIST",$J,IFN,"CODE")=CODE_U_"0" ; code ^ active flag
"RTN","GMPLBLDC",88,0)
 . S (^TMP("GMPLIST",$J,"PROB",+Y),^TMP("GMPLIST",$J,"SEQ",SEQ))=IFN,GMPREBLD=1
"RTN","GMPLBLDC",89,0)
 I $D(GMPREBLD) S VALMBCK="R",GMPLSAVE=1 D BUILD("^TMP(""GMPLIST"",$J)",GMPLMODE),HDR
"RTN","GMPLBLDC",90,0)
 S:'VALMCC VALMBCK="R" S VALMSG=$$MSG^GMPLX
"RTN","GMPLBLDC",91,0)
 Q
"RTN","GMPLBLDC",92,0)
 ;
"RTN","GMPLBLDC",93,0)
REMOVE ; Remove problem from group
"RTN","GMPLBLDC",94,0)
 N NUM,IFN,MSG S VALMBCK=""
"RTN","GMPLBLDC",95,0)
 S NUM=$$SEL1^GMPLBLD1 G:NUM="^" RMQ
"RTN","GMPLBLDC",96,0)
 S IFN=$P($G(^TMP("GMPLST",$J,"B",NUM)),U,1) G:+IFN'>0 RMQ
"RTN","GMPLBLDC",97,0)
 I "@"[$G(^TMP("GMPLIST",$J,IFN)) D  H 2 G RMQ
"RTN","GMPLBLDC",98,0)
 . D EN^DDIOL($C(7))
"RTN","GMPLBLDC",99,0)
 . D BLD^DIALOG(1250000.131,,,"MSG")
"RTN","GMPLBLDC",100,0)
 . D EN^DDIOL(.MSG)
"RTN","GMPLBLDC",101,0)
 I '$$SURE^GMPLX D  H 1 G RMQ
"RTN","GMPLBLDC",102,0)
 . D BLD^DIALOG(1250000.132,,,"MSG")
"RTN","GMPLBLDC",103,0)
 . D EN^DDIOL(.MSG)
"RTN","GMPLBLDC",104,0)
 D DELETE^GMPLBLD1(IFN) S VALMBCK="R",GMPLSAVE=1
"RTN","GMPLBLDC",105,0)
 D BUILD("^TMP(""GMPLIST"",$J)",GMPLMODE),HDR
"RTN","GMPLBLDC",106,0)
RMQ S:'VALMCC VALMBCK="R" S VALMSG=$$MSG^GMPLX
"RTN","GMPLBLDC",107,0)
 Q
"RTN","GMPLBLDC",108,0)
 ;
"RTN","GMPLBLDC",109,0)
EDIT ; Edit problem text and code
"RTN","GMPLBLDC",110,0)
 N NUM,SEL,IFN,PIECE,CODE,PROB,PROBLEM,GMPQUIT,GMPREBLD,MSG S VALMBCK=""
"RTN","GMPLBLDC",111,0)
 S SEL=$$SEL^GMPLBLD1 G:SEL="^" EDQ
"RTN","GMPLBLDC",112,0)
 F PIECE=1:1:$L(SEL,",") D  Q:$D(GMPQUIT)  W !
"RTN","GMPLBLDC",113,0)
 . S NUM=$P(SEL,",",PIECE) Q:NUM'>0
"RTN","GMPLBLDC",114,0)
 . S IFN=$P($G(^TMP("GMPLST",$J,"B",NUM)),U,1) Q:IFN'>0
"RTN","GMPLBLDC",115,0)
 . I "@"[$G(^TMP("GMPLIST",$J,IFN)) D  H 2 Q
"RTN","GMPLBLDC",116,0)
 . . D EN^DDIOL($C(7))
"RTN","GMPLBLDC",117,0)
 . . K MSG
"RTN","GMPLBLDC",118,0)
 . . D BLD^DIALOG(1250000.133,NUM,,"MSG")
"RTN","GMPLBLDC",119,0)
 . . D EN^DDIOL(.MSG)
"RTN","GMPLBLDC",120,0)
 . K MSG
"RTN","GMPLBLDC",121,0)
 . D BLD^DIALOG(1250000.134,NUM,,"MSG")
"RTN","GMPLBLDC",122,0)
 . D EN^DDIOL(.MSG)
"RTN","GMPLBLDC",123,0)
 . S PROBLEM=^TMP("GMPLIST",$J,IFN)
"RTN","GMPLBLDC",124,0)
 . D:$P(PROBLEM,U,2)>1 EN^DDIOL(" = "_$$CONTEXT^GMPLEXT(+$P(PROBLEM,U,2))) ; KER
"RTN","GMPLBLDC",125,0)
 . S PROB=$$TEXT^GMPLBLD1($P(PROBLEM,U,3)) I PROB="^" S GMPQUIT=1 Q
"RTN","GMPLBLDC",126,0)
 . I PROB="@" D DELETE^GMPLBLD1(IFN) S GMPREBLD=1 Q
"RTN","GMPLBLDC",127,0)
 . S CODE=$$CODE^GMPLBLD1($P(PROBLEM,U,4)) I CODE="^" S GMPQUIT=1 Q
"RTN","GMPLBLDC",128,0)
 . S ^TMP("GMPLIST",$J,IFN)=$P(PROBLEM,U,1,2)_U_PROB_U_CODE,GMPREBLD=1
"RTN","GMPLBLDC",129,0)
 I $D(GMPREBLD) S VALMBCK="R",GMPLSAVE=1 D BUILD("^TMP(""GMPLIST"",$J)",GMPLMODE)
"RTN","GMPLBLDC",130,0)
EDQ S:'VALMCC VALMBCK="R" S VALMSG=$$MSG^GMPLX
"RTN","GMPLBLDC",131,0)
 Q
"RTN","GMPLBLDF")
0^18^B10799450
"RTN","GMPLBLDF",1,0)
GMPLBLDF ; SLC/MKB -- Build Problem Selection List from IB Enc Form ;03/11/13
"RTN","GMPLBLDF",2,0)
 ;;2.0;Problem List;**260002**;Aug 25, 1994;Build 26
"RTN","GMPLBLDF",3,0)
EN ; Start here.
"RTN","GMPLBLDF",4,0)
 N MSG,DIR,DTOUT,DUOUT,X,Y
"RTN","GMPLBLDF",5,0)
 S X="IBDF18" X ^%ZOSF("TEST") I '$T D  Q
"RTN","GMPLBLDF",6,0)
 . D BLD^DIALOG(1250000.135,,,"MSG")
"RTN","GMPLBLDF",7,0)
 . D EN^DDIOL(.MSG)
"RTN","GMPLBLDF",8,0)
EN0 S GMPLFORM=$$GETFORM^IBDF18 G:'GMPLFORM EXIT
"RTN","GMPLBLDF",9,0)
 D BLD^DIALOG(1250000.126,,,"MSG")
"RTN","GMPLBLDF",10,0)
 D EN^DDIOL(.MSG)
"RTN","GMPLBLDF",11,0)
 S X=$$COPYFORM^IBDF18(+GMPLFORM,"GMPL"),GMPL(0)=X
"RTN","GMPLBLDF",12,0)
 I 'X D  G EN0
"RTN","GMPLBLDF",13,0)
 . D BLD^DIALOG(1250000.136,,,"MSG")
"RTN","GMPLBLDF",14,0)
 . D EN^DDIOL(.MSG)
"RTN","GMPLBLDF",15,0)
EN1 ; Create list to copy problems into
"RTN","GMPLBLDF",16,0)
 S DIR(0)="FA^3:30"
"RTN","GMPLBLDF",17,0)
 D BLD^DIALOG(1250000.145,,,"DIR(""A"")")
"RTN","GMPLBLDF",18,0)
 N RETURN,%
"RTN","GMPLBLDF",19,0)
 S %=$$GETLIST^GMPLAPI1(.RETURN,$P(GMPLFORM,U,2))
"RTN","GMPLBLDF",20,0)
 M ^TMP("GMPLLIST",$J)=RETURN
"RTN","GMPLBLDF",21,0)
 S:'RETURN DIR("B")=$P(GMPLFORM,U,2)
"RTN","GMPLBLDF",22,0)
 D BLD^DIALOG(1250000.137,,,"DIR(""?"")")
"RTN","GMPLBLDF",23,0)
 K MSG
"RTN","GMPLBLDF",24,0)
 D BLD^DIALOG(1250000.138,,,"MSG")
"RTN","GMPLBLDF",25,0)
 D EN^DDIOL(.MSG)
"RTN","GMPLBLDF",26,0)
EN2 D ^DIR G:$D(DUOUT)!($D(DTOUT)) EXIT
"RTN","GMPLBLDF",27,0)
 N ERR,CLINIC K ^TMP("GMPLLIST",$J)
"RTN","GMPLBLDF",28,0)
 S ERR=$$NEWLST^GMPLAPI1(.RETURN,Y)
"RTN","GMPLBLDF",29,0)
 I ERR=0,$P(RETURN(0),U,1)="LISTXST" D  G EN2
"RTN","GMPLBLDF",30,0)
 . K MSG
"RTN","GMPLBLDF",31,0)
 . D EN^DDIOL($C(7))
"RTN","GMPLBLDF",32,0)
 . D BLD^DIALOG(1250000.139,,,"MSG")
"RTN","GMPLBLDF",33,0)
 . D EN^DDIOL(.MSG)
"RTN","GMPLBLDF",34,0)
 I RETURN'>0 D  G EXIT
"RTN","GMPLBLDF",35,0)
 . K MSG
"RTN","GMPLBLDF",36,0)
 . D EN^DDIOL($C(7))
"RTN","GMPLBLDF",37,0)
 . D BLD^DIALOG(1250000.140,,,"MSG")
"RTN","GMPLBLDF",38,0)
 . D EN^DDIOL(.MSG)
"RTN","GMPLBLDF",39,0)
 S GMPLSLST=RETURN_U_Y
"RTN","GMPLBLDF",40,0)
 S CLINIC=$$CLINIC^GMPLBLD3("   ")
"RTN","GMPLBLDF",41,0)
 I CLINIC S %=$$ADDLOC^GMPLAPI5(.RETURN,+GMPLSLST,+CLINIC)
"RTN","GMPLBLDF",42,0)
EN3 ; Here we go ...
"RTN","GMPLBLDF",43,0)
 N PARM
"RTN","GMPLBLDF",44,0)
 K MSG
"RTN","GMPLBLDF",45,0)
 S PARM(1)=$P(GMPLFORM,U,2)
"RTN","GMPLBLDF",46,0)
 S PARM(2)=$P(GMPLSLST,U,2)
"RTN","GMPLBLDF",47,0)
 D BLD^DIALOG(1250000.141,.PARM,,"MSG")
"RTN","GMPLBLDF",48,0)
 D EN^DDIOL(.MSG)
"RTN","GMPLBLDF",49,0)
 N RET,GSEQ,PSEG,NSEQ,GMPLI,GHDR,ITEM,SOURCE
"RTN","GMPLBLDF",50,0)
 S (GSEQ,PSEQ,GMPLI)=0,GHDR="" S:'+GMPL(1) GHDR=$P(GMPL(1),U,2),GMPLI=1
"RTN","GMPLBLDF",51,0)
 K ^TMP("GMPLIST",$J),^TMP("GMPGRP",$J)
"RTN","GMPLBLDF",52,0)
 S GSEQ=GSEQ+1,GMPLGRP=$$NEWGRP(GMPLFORM,GHDR,GSEQ)
"RTN","GMPLBLDF",53,0)
 F  S GMPLI=$O(GMPL(GMPLI)) Q:GMPLI'>0  D
"RTN","GMPLBLDF",54,0)
 . S ITEM=$G(GMPL(GMPLI)) Q:'$L(ITEM)
"RTN","GMPLBLDF",55,0)
 . I '+ITEM D  Q
"RTN","GMPLBLDF",56,0)
 . . K SOURCE M SOURCE=^TMP("GMPGRP",$J)
"RTN","GMPLBLDF",57,0)
 . . S %=$$SAVGRP^GMPLAPI1(.RET,+GMPLGRP,.SOURCE)
"RTN","GMPLBLDF",58,0)
 . . K ^TMP("GMPGRP",$J)
"RTN","GMPLBLDF",59,0)
 . . S GSEQ=GSEQ+1,PSEQ=0,GMPLGRP=$$NEWGRP(GMPLFORM,$P(ITEM,U,2),GSEQ)
"RTN","GMPLBLDF",60,0)
 . S PSEQ=PSEQ+1,ITEM=PSEQ_U_ITEM
"RTN","GMPLBLDF",61,0)
 . S NSEQ=$E("0000",1,4-$L(PSEQ))_PSEQ_"N"
"RTN","GMPLBLDF",62,0)
 . S ^TMP("GMPGRP",$J,NSEQ)=ITEM D EN^DDIOL(".",,"?0")
"RTN","GMPLBLDF",63,0)
 K SOURCE M SOURCE=^TMP("GMPGRP",$J)
"RTN","GMPLBLDF",64,0)
 S %=$$SAVGRP^GMPLAPI1(.RET,+GMPLGRP,.SOURCE)
"RTN","GMPLBLDF",65,0)
 K SOURCE M SOURCE=^TMP("GMPLIST",$J)
"RTN","GMPLBLDF",66,0)
 S %=$$SAVLST^GMPLAPI1(.RET,+GMPLSLST,.SOURCE)
"RTN","GMPLBLDF",67,0)
 K ^TMP("GMPLIST",$J),^TMP("GMPGRP",$J)
"RTN","GMPLBLDF",68,0)
 D EN^DDIOL($$EZBLD^DIALOG(1250000.100),"","?0")
"RTN","GMPLBLDF",69,0)
EXIT ; Clean-up
"RTN","GMPLBLDF",70,0)
 K GMPL,GMPLSLST,GMPLGRP,GMPLI,GMPLFORM,GHDR,GSEQ,PSEQ,NSEQ,ITEM
"RTN","GMPLBLDF",71,0)
 Q
"RTN","GMPLBLDF",72,0)
 ;
"RTN","GMPLBLDF",73,0)
NEWGRP(FORM,HDR,SEQ) ; Create new group entries in #125.1 and #125.11
"RTN","GMPLBLDF",74,0)
 N RETURN,NAME,ANAME,GRP,ITEM,NSEQ,%
"RTN","GMPLBLDF",75,0)
 S ANAME=$E($P(FORM,U,2),1,23-$L(SEQ))_$$EZBLD^DIALOG(1250000.146)_SEQ
"RTN","GMPLBLDF",76,0)
 I $L(HDR) S NAME=$$UP^XLFSTR(HDR) E  S NAME=ANAME
"RTN","GMPLBLDF",77,0)
 S %=$$NEWCAT^GMPLAPI1(.RETURN,NAME)
"RTN","GMPLBLDF",78,0)
 I RETURN=0 S NAME=ANAME S %=$$NEWCAT^GMPLAPI1(.RETURN,NAME,1)
"RTN","GMPLBLDF",79,0)
 S ITEM=SEQ_U_+RETURN_U_HDR_"^1",NSEQ=$E("0000",1,4-$L(SEQ))_SEQ_"N"
"RTN","GMPLBLDF",80,0)
 S ^TMP("GMPLIST",$J,NSEQ)=ITEM
"RTN","GMPLBLDF",81,0)
NGQ S GRP=$P(RETURN,U,1,2)
"RTN","GMPLBLDF",82,0)
 Q GRP
"RTN","GMPLBLDF",83,0)
 ;
"RTN","GMPLCHK")
0^19^B34267670
"RTN","GMPLCHK",1,0)
GMPLCHK ; RGI/CBR -- Problem List Validators ;3/27/13
"RTN","GMPLCHK",2,0)
 ;;2.0;Problem List;**260002**;Aug 25, 1994;Build 26
"RTN","GMPLCHK",3,0)
PRBIEN(RETURN,PARM,OPT) ;Validate problem ien
"RTN","GMPLCHK",4,0)
 I '$D(PARM),+$G(OPT) Q 1
"RTN","GMPLCHK",5,0)
 I '($G(PARM)?1.N) D ERRX^GMPLAPIE(.RETURN,"INVPARAM","GMPIFN") Q 0 ; Invalid parameter value
"RTN","GMPLCHK",6,0)
 I PARM'>0 D ERRX^GMPLAPIE(.RETURN,"INVPARAM","GMPIFN") Q 0 ; Invalid parameter value
"RTN","GMPLCHK",7,0)
 I '$$EXISTS^GMPLDAL(+PARM) D ERRX^GMPLAPIE(.RETURN,"PRBNFND") Q 0
"RTN","GMPLCHK",8,0)
 Q 1
"RTN","GMPLCHK",9,0)
 ;
"RTN","GMPLCHK",10,0)
BOOL(RETURN,PARM,PNAME) ;Validate boolean fields
"RTN","GMPLCHK",11,0)
 I $G(PARM)="" Q 1 ;"" defaults to false
"RTN","GMPLCHK",12,0)
 I PARM'="0",PARM'="1" D ERRX^GMPLAPIE(.RETURN,"INVPARAM",$G(PNAME)) Q 0
"RTN","GMPLCHK",13,0)
 Q 1
"RTN","GMPLCHK",14,0)
 ;
"RTN","GMPLCHK",15,0)
NUM(RETURN,PARM,PNAME,OPT,DEC,LOW,HIGH) ;Validate numeric field
"RTN","GMPLCHK",16,0)
 ;PARM=Parameter value
"RTN","GMPLCHK",17,0)
 ;PNAME=Parameter name
"RTN","GMPLCHK",18,0)
 ;OPT=Optional?
"RTN","GMPLCHK",19,0)
 ;DEC=Maximum number of decimals allowed (""=ANY,0=NONE)
"RTN","GMPLCHK",20,0)
 ;LOW=Lower limit
"RTN","GMPLCHK",21,0)
 ;HIGH=Higher limit
"RTN","GMPLCHK",22,0)
 I $G(PARM)="",+$G(OPT) Q 1
"RTN","GMPLCHK",23,0)
 I +$G(PARM)'=$G(PARM) D ERRX^GMPLAPIE(.RETURN,"INVPARAM",$G(PNAME)) Q 0
"RTN","GMPLCHK",24,0)
 I $G(LOW)'="",PARM<+$G(LOW) D ERRX^GMPLAPIE(.RETURN,"INVPARAM",$G(PNAME)) Q 0
"RTN","GMPLCHK",25,0)
 I $G(HIGH)'="",PARM>+$G(HIGH) D ERRX^GMPLAPIE(.RETURN,"INVPARAM",$G(PNAME)) Q 0
"RTN","GMPLCHK",26,0)
 N RES
"RTN","GMPLCHK",27,0)
 S RES=1
"RTN","GMPLCHK",28,0)
 I $G(DEC)'="" D
"RTN","GMPLCHK",29,0)
 . I +DEC=0,PARM?.E1".".N S RES=0 Q
"RTN","GMPLCHK",30,0)
 . N EXPR S EXPR=".E1""."""_(+DEC+1)_"N.N"
"RTN","GMPLCHK",31,0)
 . I PARM?@EXPR S RES=0 Q
"RTN","GMPLCHK",32,0)
 I 'RES D ERRX^GMPLAPIE(.RETURN,"INVPARAM",$G(PNAME)) Q 0
"RTN","GMPLCHK",33,0)
 Q 1
"RTN","GMPLCHK",34,0)
 ;
"RTN","GMPLCHK",35,0)
DTIME(RETURN,PARM,OPT,RQTIME) ;Validate DateTime fields
"RTN","GMPLCHK",36,0)
 N DATE,TIME,M,D
"RTN","GMPLCHK",37,0)
 I $G(PARM)="",+$G(OPT) Q 1
"RTN","GMPLCHK",38,0)
 I '$D(PARM),'+$G(OPT) D ERRX^GMPLAPIE(.RETURN,"INVPARAM","DATE") Q 0
"RTN","GMPLCHK",39,0)
 S DATE=$P(PARM,".")
"RTN","GMPLCHK",40,0)
 S TIME=$P(PARM,".",2)
"RTN","GMPLCHK",41,0)
 I '$$TIME(.RETURN,TIME,'+$G(RQTIME)) D ERRX^GMPLAPIE(.RETURN,"INVPARAM","DATE") Q 0
"RTN","GMPLCHK",42,0)
 I DATE'?3.7N D ERRX^GMPLAPIE(.RETURN,"INVPARAM","DATE") Q 0
"RTN","GMPLCHK",43,0)
 S M=$E(DATE,4,5),D=$E(DATE,6,7)
"RTN","GMPLCHK",44,0)
 I M>12 D ERRX^GMPLAPIE(.RETURN,"INVPARAM","DATE") Q 0
"RTN","GMPLCHK",45,0)
 I D>31 D ERRX^GMPLAPIE(.RETURN,"INVPARAM","DATE") Q 0
"RTN","GMPLCHK",46,0)
 Q 1
"RTN","GMPLCHK",47,0)
 ;
"RTN","GMPLCHK",48,0)
TIME(RETURN,TIME,OPT) ;Validate time
"RTN","GMPLCHK",49,0)
 N H,M,S
"RTN","GMPLCHK",50,0)
 I 'OPT,TIME="" D ERRX^GMPLAPIE(.RETURN,"INVPARAM","DATE") Q 0
"RTN","GMPLCHK",51,0)
 I TIME="" Q 1
"RTN","GMPLCHK",52,0)
 I TIME'?1.6N D ERRX^GMPLAPIE(.RETURN,"INVPARAM","DATE") Q 0
"RTN","GMPLCHK",53,0)
 S H=$E(TIME,1,2),M=$E(TIME,3,4),S=$E(TIME,5,6)
"RTN","GMPLCHK",54,0)
 I H>23 D ERRX^GMPLAPIE(.RETURN,"INVPARAM","DATE") Q 0
"RTN","GMPLCHK",55,0)
 I M>59 D ERRX^GMPLAPIE(.RETURN,"INVPARAM","DATE") Q 0
"RTN","GMPLCHK",56,0)
 I S>59 D ERRX^GMPLAPIE(.RETURN,"INVPARAM","DATE") Q 0
"RTN","GMPLCHK",57,0)
 Q 1
"RTN","GMPLCHK",58,0)
 ;
"RTN","GMPLCHK",59,0)
PROVIEN(RETURN,PARM,PNAME,OPT) ;Validate provider IEN
"RTN","GMPLCHK",60,0)
 S PNAME=$G(PNAME,"GMPROV")
"RTN","GMPLCHK",61,0)
 I $G(PARM)="",+$G(OPT) Q 1
"RTN","GMPLCHK",62,0)
 I '($G(PARM)?1.N) D ERRX^GMPLAPIE(.RETURN,"INVPARAM",PNAME) Q 0 ; Invalid parameter value
"RTN","GMPLCHK",63,0)
 I PARM'>0 D ERRX^GMPLAPIE(.RETURN,"INVPARAM",PNAME) Q 0 ; Invalid parameter value
"RTN","GMPLCHK",64,0)
 I $$PROVNAME^GMPLEXT(PARM)="" D ERRX^GMPLAPIE(.RETURN,"PROVNFND") Q 0
"RTN","GMPLCHK",65,0)
 Q 1
"RTN","GMPLCHK",66,0)
 ;
"RTN","GMPLCHK",67,0)
CODESET(RETURN,PARM,PNAME,CODES,OPT,MULTI) ;Validate lists of codes
"RTN","GMPLCHK",68,0)
 I $G(PARM)="",+$G(OPT) Q 1
"RTN","GMPLCHK",69,0)
 N LEN,I,RES
"RTN","GMPLCHK",70,0)
 S LEN=$L($G(PARM))
"RTN","GMPLCHK",71,0)
 S PNAME=$G(PNAME)
"RTN","GMPLCHK",72,0)
 S MULTI=+$G(MULTI)
"RTN","GMPLCHK",73,0)
 I LEN=0 D ERRX^GMPLAPIE(.RETURN,"INVPARAM",PNAME) Q 0
"RTN","GMPLCHK",74,0)
 I 'MULTI,LEN'=1 D ERRX^GMPLAPIE(.RETURN,"INVPARAM",PNAME) Q 0
"RTN","GMPLCHK",75,0)
 S RES=1
"RTN","GMPLCHK",76,0)
 F I=1:1:LEN D
"RTN","GMPLCHK",77,0)
 . I CODES'[$E(PARM,I) D  Q
"RTN","GMPLCHK",78,0)
 . . D ERRX^GMPLAPIE(.RETURN,"INVPARAM",PNAME)
"RTN","GMPLCHK",79,0)
 . . S RES=0
"RTN","GMPLCHK",80,0)
 Q RES
"RTN","GMPLCHK",81,0)
 ;
"RTN","GMPLCHK",82,0)
LSTIEN(RETURN,PARM) ;Validate problem selection list IEN
"RTN","GMPLCHK",83,0)
 I $G(PARM)'?1.N D ERRX^GMPLAPIE(.RETURN,"INVPARAM","GMPLLST") Q 0
"RTN","GMPLCHK",84,0)
 I PARM'>0 D ERRX^GMPLAPIE(.RETURN,"INVPARAM","GMPLLST") Q 0
"RTN","GMPLCHK",85,0)
 I '$$FINDLST^GMPLDAL1(PARM) D ERRX^GMPLAPIE(.RETURN,"LISTNFND") Q 0
"RTN","GMPLCHK",86,0)
 Q 1
"RTN","GMPLCHK",87,0)
 ;
"RTN","GMPLCHK",88,0)
CTGIEN(RETURN,PARM,OPT) ;Validate problem selection category IEN
"RTN","GMPLCHK",89,0)
 I $G(PARM)'?1.N D ERRX^GMPLAPIE(.RETURN,"INVPARAM","GMPLGRP") Q 0
"RTN","GMPLCHK",90,0)
 I PARM'>0 D ERRX^GMPLAPIE(.RETURN,"INVPARAM","GMPLGRP") Q 0
"RTN","GMPLCHK",91,0)
 I $$FINDCAT^GMPLDAL1(PARM)'>0 D ERRX^GMPLAPIE(.RETURN,"CTGNFND") Q 0
"RTN","GMPLCHK",92,0)
 Q 1
"RTN","GMPLCHK",93,0)
 ;
"RTN","GMPLCHK",94,0)
CTGITM(RETURN,PARM) ;Category list item
"RTN","GMPLCHK",95,0)
 I '$$CATITM^GMPLDAL1(+$G(PARM)) D ERRX^GMPLAPIE(.RETURN,"ITEMNFND") Q 0
"RTN","GMPLCHK",96,0)
 Q 1
"RTN","GMPLCHK",97,0)
 ;
"RTN","GMPLCHK",98,0)
PATIEN(RETURN,PARM,OPT) ;Patient
"RTN","GMPLCHK",99,0)
 I $G(PARM)="",+$G(OPT) Q 1
"RTN","GMPLCHK",100,0)
 I '($G(PARM)?1.N) D ERRX^GMPLAPIE(.RETURN,"INVPARAM","GMPDFN") Q 0 ; Invalid parameter value
"RTN","GMPLCHK",101,0)
 I PARM'>0 D ERRX^GMPLAPIE(.RETURN,"INVPARAM","GMPDFN") Q 0 ; Invalid parameter value
"RTN","GMPLCHK",102,0)
 I $$PATNAME^GMPLEXT(PARM)="" D ERRX^GMPLAPIE(.RETURN,"PATNFND") Q 0
"RTN","GMPLCHK",103,0)
 Q 1
"RTN","GMPLCHK",104,0)
 ;
"RTN","GMPLCHK",105,0)
TERMIEN(RETURN,PARM,PNAME,OPT) ;Lexicon term
"RTN","GMPLCHK",106,0)
 I $G(PARM)="",+$G(OPT) Q 1
"RTN","GMPLCHK",107,0)
 S PNAME=$G(PNAME,"TERM")
"RTN","GMPLCHK",108,0)
 I '($G(PARM)?1.N) D ERRX^GMPLAPIE(.RETURN,"INVPARAM",PNAME) Q 0 ; Invalid parameter value
"RTN","GMPLCHK",109,0)
 I PARM'>0 D ERRX^GMPLAPIE(.RETURN,"INVPARAM",PNAME) Q 0 ; Invalid parameter value
"RTN","GMPLCHK",110,0)
 I $$CONTEXT^GMPLEXT(PARM)="" D ERRX^GMPLAPIE(.RETURN,"TERMNFND") Q 0
"RTN","GMPLCHK",111,0)
 Q 1
"RTN","GMPLCHK",112,0)
 ;
"RTN","GMPLCHK",113,0)
ICDCODE(RETURN,PARM,PNAME,OPT) ;ICD9 code (make sure it is active too)
"RTN","GMPLCHK",114,0)
 I $G(PARM)="",+$G(OPT) Q 1
"RTN","GMPLCHK",115,0)
 N CODE
"RTN","GMPLCHK",116,0)
 S PNAME=$G(PNAME)
"RTN","GMPLCHK",117,0)
 I $G(PARM)'?1.N D ERRX^GMPLAPIE(.RETURN,"INVPARAM",PNAME) Q 0
"RTN","GMPLCHK",118,0)
 S CODE=$$CODEC^ICDCODE(PARM)
"RTN","GMPLCHK",119,0)
 I CODE=-1 D ERRX^GMPLAPIE(.RETURN,"ICDNFND") Q 0
"RTN","GMPLCHK",120,0)
 I +($$STATCHK^ICDAPIU(CODE,$$NOW^XLFDT))'>0 D ERRX^GMPLAPIE(.RETURN,"ICDINACT") Q 0
"RTN","GMPLCHK",121,0)
 Q 1
"RTN","GMPLCHK",122,0)
 ;
"RTN","GMPLCHK",123,0)
LSTNAME(RETURN,PARM,PNAME) ;Selection list/category names
"RTN","GMPLCHK",124,0)
 S PNAME=$G(PNAME)
"RTN","GMPLCHK",125,0)
 I $G(PARM)="" D ERRX^GMPLAPIE(.RETURN,"INVPARAM",PNAME) Q 0
"RTN","GMPLCHK",126,0)
 I $L(PARM)>30!(PARM?.N)!($L(PARM)<3)!'(PARM'?1P.E) D ERRX^GMPLAPIE(.RETURN,"INVPARAM",PNAME) Q 0
"RTN","GMPLCHK",127,0)
 Q 1
"RTN","GMPLCHK",128,0)
 ;
"RTN","GMPLCHK",129,0)
SCIEN(RETURN,PARM,PNAME,OPT) ;Clinic IEN
"RTN","GMPLCHK",130,0)
 I $G(PARM)="",+$G(OPT) Q 1
"RTN","GMPLCHK",131,0)
 I '($G(PARM)?1.N) D ERRX^GMPLAPIE(.RETURN,"INVPARAM",$G(PNAME)) Q 0 ; Invalid parameter value
"RTN","GMPLCHK",132,0)
 I PARM'>0 D ERRX^GMPLAPIE(.RETURN,"INVPARAM",$G(PNAME)) Q 0 ; Invalid parameter value
"RTN","GMPLCHK",133,0)
 N CLIN
"RTN","GMPLCHK",134,0)
 D CLINDET^GMPLEXT(.CLIN,PARM)
"RTN","GMPLCHK",135,0)
 I CLIN("NAME")=""!(CLIN("TYPE")'="C") D ERRX^GMPLAPIE(.RETURN,"LOCNFND") Q 0
"RTN","GMPLCHK",136,0)
 Q 1
"RTN","GMPLCHK",137,0)
 ;
"RTN","GMPLCHK",138,0)
SVCIEN(RETURN,PARM,PNAME,OPT) ;Service IEN
"RTN","GMPLCHK",139,0)
 I $G(PARM)="",+$G(OPT) Q 1
"RTN","GMPLCHK",140,0)
 I '($G(PARM)?1.N) D ERRX^GMPLAPIE(.RETURN,"INVPARAM",$G(PNAME)) Q 0 ; Invalid parameter value
"RTN","GMPLCHK",141,0)
 I PARM'>0 D ERRX^GMPLAPIE(.RETURN,"INVPARAM",$G(PNAME)) Q 0 ; Invalid parameter value
"RTN","GMPLCHK",142,0)
 N CLIN
"RTN","GMPLCHK",143,0)
 I $$SVCNAME^GMPLEXT(PARM)="" D ERRX^GMPLAPIE(.RETURN,"SVCNFND") Q 0
"RTN","GMPLCHK",144,0)
 Q 1
"RTN","GMPLCHK",145,0)
 ;
"RTN","GMPLCODE")
0^20^B6088580
"RTN","GMPLCODE",1,0)
GMPLCODE ; SLC/MKB/AJB -- Problem List ICD Code Utilities ; 09/14/12
"RTN","GMPLCODE",2,0)
 ;;2.0;Problem List;**28,260002**;Aug 25, 1994;Build 26
"RTN","GMPLCODE",3,0)
EN ; -- main entry point for GMPL CODE LIST
"RTN","GMPLCODE",4,0)
 K GMPLUSER
"RTN","GMPLCODE",5,0)
 D EN^VALM("GMPL CODE LIST")
"RTN","GMPLCODE",6,0)
 Q
"RTN","GMPLCODE",7,0)
 ;
"RTN","GMPLCODE",8,0)
INIT ; -- init variables and list array
"RTN","GMPLCODE",9,0)
 S GMPDFN=$$PAT^GMPLX1 I +GMPDFN'>0 K GMPDFN S VALMQUIT=1 Q
"RTN","GMPLCODE",10,0)
 S GMPVA=$S($G(DUZ("AG"))="V":1,1:0),GMPVAMC=+$G(DUZ(2))
"RTN","GMPLCODE",11,0)
 S (GMPSC,GMPAGTOR,GMPION,GMPGULF)=0 D:GMPVA VADPT^GMPLX1(+GMPDFN)
"RTN","GMPLCODE",12,0)
 S (GMPLVIEW("ACT"),GMPLVIEW("VIEW"))="",GMPLVIEW("PROV")=0
"RTN","GMPLCODE",13,0)
 D GET^GMPLSITE(.GMPARAM)
"RTN","GMPLCODE",14,0)
 D GETPLIST^GMPLMGR1(.GMPLIST,.GMPTOTAL,.GMPLVIEW)
"RTN","GMPLCODE",15,0)
 D BUILD^GMPLMGR(.GMPLIST)
"RTN","GMPLCODE",16,0)
 S VALMSG=$$MSG^GMPLX
"RTN","GMPLCODE",17,0)
 Q
"RTN","GMPLCODE",18,0)
 ;
"RTN","GMPLCODE",19,0)
HELP ; -- help code
"RTN","GMPLCODE",20,0)
 N X,MSG
"RTN","GMPLCODE",21,0)
 D BLD^DIALOG(1250000.142,,,"MSG")
"RTN","GMPLCODE",22,0)
 D EN^DDIOL(.MSG)
"RTN","GMPLCODE",23,0)
 R X:DTIME
"RTN","GMPLCODE",24,0)
 S VALMSG=$$MSG^GMPLX,VALMBCK=$S(VALMCC:"",1:"R")
"RTN","GMPLCODE",25,0)
 Q
"RTN","GMPLCODE",26,0)
 ;
"RTN","GMPLCODE",27,0)
EDIT ; -- edit field .01
"RTN","GMPLCODE",28,0)
 N GMPLSEL,GMPLNO,GMPI,GMPIFN,GMPLNUM,GMPSAVED
"RTN","GMPLCODE",29,0)
 S VALMBCK=$S(VALMCC:"",1:"R")
"RTN","GMPLCODE",30,0)
 S GMPLSEL=$$SEL^GMPLX("code") G:GMPLSEL="^" EDQ
"RTN","GMPLCODE",31,0)
 S GMPLNO=$L(GMPLSEL,",")
"RTN","GMPLCODE",32,0)
 F GMPI=1:1:GMPLNO S GMPLNUM=$P(GMPLSEL,",",GMPI) I GMPLNUM D  Q:$D(GMPQUIT)
"RTN","GMPLCODE",33,0)
 . S GMPIFN=$P($G(^TMP("GMPLIDX",$J,+GMPLNUM)),U,2) Q:GMPIFN'>0
"RTN","GMPLCODE",34,0)
 . I '$$LOCK^GMPLDAL(GMPIFN,0) W $C(7),!!,$$LOCKED^GMPLX,! H 2 Q
"RTN","GMPLCODE",35,0)
 . D ICD(GMPLNUM,GMPIFN)
"RTN","GMPLCODE",36,0)
 . D UNLOCK^GMPLDAL(GMPIFN,0)
"RTN","GMPLCODE",37,0)
 S:$D(GMPSAVED) VALMBCK="R"
"RTN","GMPLCODE",38,0)
EDQ D KILL^GMPLX S VALMSG=$$MSG^GMPLX
"RTN","GMPLCODE",39,0)
 Q
"RTN","GMPLCODE",40,0)
 ;
"RTN","GMPLCODE",41,0)
ICD(NUM,IFN) ; -- search ICD Diagnosis file #80
"RTN","GMPLCODE",42,0)
 N X,Y,DIC,DIR,OLD,NEW,LCNT,RET,PARM,%,DTOUT,DUOUT
"RTN","GMPLCODE",43,0)
 W !,IFN,!
"RTN","GMPLCODE",44,0)
 D FULL^VALM1 S VALMBCK="R" W !!
"RTN","GMPLCODE",45,0)
 S %=$$DIAG^GMPLAPI4(.OLD,IFN)
"RTN","GMPLCODE",46,0)
 S DIR(0)="PAO^ICD9(:QEM"
"RTN","GMPLCODE",47,0)
 S PARM(1)=NUM,PARM(2)=$$PROBTEXT^GMPLX(IFN)
"RTN","GMPLCODE",48,0)
 D BLD^DIALOG(1250000.143,.PARM,,"DIR(""A"")")
"RTN","GMPLCODE",49,0)
 D BLD^DIALOG(1250000.144,,,"DIR(""?"")")
"RTN","GMPLCODE",50,0)
 S DIR("B")=$P(OLD,U,2)
"RTN","GMPLCODE",51,0)
 ; Added for Code Set Versioning (CSV) - screen allows ONLY active codes
"RTN","GMPLCODE",52,0)
 S DIR("S")="I +($$STATCHK^ICDAPIU($$CODEC^ICDCODE(+($G(Y))),DT))>0"
"RTN","GMPLCODE",53,0)
 D ^DIR I $D(DTOUT)!($D(DUOUT)) S GMPQUIT=1 Q
"RTN","GMPLCODE",54,0)
 I X="@" Q:'$D(DIR("B"))  S:$$SURE^GMPLX Y=$$NOS^GMPLEXT()
"RTN","GMPLCODE",55,0)
 I +Y>0,Y'=OLD D  S GMPSAVED=1
"RTN","GMPLCODE",56,0)
 . S NEW=Y
"RTN","GMPLCODE",57,0)
 . S %=$$REPLACE^GMPLAPI4(.RET,IFN,NEW)
"RTN","GMPLCODE",58,0)
 . S LCNT=+$G(^TMP("GMPLIDX",$J,NUM))
"RTN","GMPLCODE",59,0)
 . D FLDTEXT^VALM10(LCNT,"ICD",$P(NEW,U,2))
"RTN","GMPLCODE",60,0)
 D BUILD^GMPLMGR(.GMPLIST) S VALMBCK="R"
"RTN","GMPLCODE",61,0)
 Q
"RTN","GMPLDAL")
0^21^B70495216
"RTN","GMPLDAL",1,0)
GMPLDAL ; RGI/CBR DATA ACCESS LAYER - DIRECT GLOBALS ACCESS ; 8/29/2013
"RTN","GMPLDAL",2,0)
 ;;2.0;Problem List;**260002**;Aug 25, 1994;Build 26
"RTN","GMPLDAL",3,0)
CREATE(GMPDFN,GMPVAMC,GMPFLD,ERT) ; Create new problem
"RTN","GMPLDAL",4,0)
 N GMPIFN,NUM,DATA,I,DA,DIK
"RTN","GMPLDAL",5,0)
 S ERT=$G(ERT)
"RTN","GMPLDAL",6,0)
 S GMPIFN=$$NEWPROB(+GMPFLD(.01),+GMPDFN,ERT) Q:GMPIFN'>0 0
"RTN","GMPLDAL",7,0)
 S NUM=$$NEXTNMBR(+GMPDFN,+GMPVAMC)
"RTN","GMPLDAL",8,0)
 S:'NUM NUM=""
"RTN","GMPLDAL",9,0)
 ;   Set Node 0
"RTN","GMPLDAL",10,0)
 S DATA=^AUPNPROB(GMPIFN,0)_U_DT_"^^"_$P(GMPFLD(.05),U)_U_+GMPVAMC_U_+NUM_U_DT_"^^^^"_$P(GMPFLD(.12),U)_U_$P(GMPFLD(.13),U)
"RTN","GMPLDAL",11,0)
 S ^AUPNPROB(GMPIFN,0)=DATA
"RTN","GMPLDAL",12,0)
 ;   Set Node 1
"RTN","GMPLDAL",13,0)
 S DATA=$P(GMPFLD(1.01),U)
"RTN","GMPLDAL",14,0)
 F I=1.02:.01:1.18 S DATA=DATA_U_$P($G(GMPFLD(+I)),U)
"RTN","GMPLDAL",15,0)
 S ^AUPNPROB(GMPIFN,1)=DATA
"RTN","GMPLDAL",16,0)
 ;   Set X-Refs
"RTN","GMPLDAL",17,0)
 S DIK="^AUPNPROB(",DA=GMPIFN D IX1^DIK
"RTN","GMPLDAL",18,0)
 Q GMPIFN
"RTN","GMPLDAL",19,0)
 ;
"RTN","GMPLDAL",20,0)
NEWPROB(ICD,DFN,ERT) ; Creates New Problem Entry in file #9000011
"RTN","GMPLDAL",21,0)
 N HDR,LAST,TOTAL,DA
"RTN","GMPLDAL",22,0)
 S ERT=$G(ERT)
"RTN","GMPLDAL",23,0)
 Q:'$$LOCK(0,,ERT) -1
"RTN","GMPLDAL",24,0)
 ;L +^AUPNPROB(0):1 I '$T D  Q -1
"RTN","GMPLDAL",25,0)
 ;. W !!,"Someone else is currently editing this file."
"RTN","GMPLDAL",26,0)
 ;. W !,"Please try again later.",!
"RTN","GMPLDAL",27,0)
 S HDR=$G(^AUPNPROB(0)) Q:HDR="" -1
"RTN","GMPLDAL",28,0)
 S LAST=$P(HDR,U,3)
"RTN","GMPLDAL",29,0)
 S TOTAL=$P(HDR,U,4)
"RTN","GMPLDAL",30,0)
 F DA=(LAST+1):1 Q:'$D(^AUPNPROB(DA,0))
"RTN","GMPLDAL",31,0)
 S ^AUPNPROB(DA,0)=ICD_U_DFN
"RTN","GMPLDAL",32,0)
 S ^AUPNPROB("B",ICD,DA)=""
"RTN","GMPLDAL",33,0)
 S ^AUPNPROB("AC",DFN,DA)=""
"RTN","GMPLDAL",34,0)
 S $P(^AUPNPROB(0),U,3,4)=DA_U_(TOTAL+1)
"RTN","GMPLDAL",35,0)
 D UNLOCK(0)
"RTN","GMPLDAL",36,0)
 Q DA
"RTN","GMPLDAL",37,0)
 ;
"RTN","GMPLDAL",38,0)
UPDATE(GMPIFN,GMPORIG,GMPFLD,GMPLUSER,GMPROV,ERT) ; Updates a problem
"RTN","GMPLDAL",39,0)
 N DA,DR,DIE,FLD,NOW,AUDITED,FDA,AUPN,MSG
"RTN","GMPLDAL",40,0)
 S AUPN=9000011
"RTN","GMPLDAL",41,0)
 S AUDITED=0
"RTN","GMPLDAL",42,0)
 I $P($G(GMPFLD(1.02)),U)="" S GMPFLD(1.02)=GMPORIG(1.02)
"RTN","GMPLDAL",43,0)
 S FDA(AUPN,GMPIFN_",",1.02)=$S('+$G(GMPLUSER):"T",1:$P(GMPFLD(1.02),U))
"RTN","GMPLDAL",44,0)
 D:(GMPORIG(1.02)="T")&(GMPFLD(1.02)="P") AUDIT(GMPIFN,"1.02","T","P","Verified")
"RTN","GMPLDAL",45,0)
 I $P($G(GMPORIG(.12)),U)="I",$P(GMPFLD(.12),U)="A" D REACTV(GMPIFN,GMPROV) S AUDITED=1
"RTN","GMPLDAL",46,0)
 I +$G(GMPORIG(1.01))'=(+GMPFLD(1.01)) D REFORM(GMPIFN,GMPROV,GMPORIG(1.01),GMPFLD(1.01)) S AUDITED=1
"RTN","GMPLDAL",47,0)
 F FLD=.01,.05,.12,.13,1.01,1.05,1.06,1.07,1.08,1.09,1.1,1.11,1.12,1.13,1.14,1.15,1.16,1.17,1.18 D
"RTN","GMPLDAL",48,0)
 . Q:'$D(GMPFLD(FLD))  Q:$P($G(GMPORIG(FLD)),U)=$P($G(GMPFLD(FLD)),U)
"RTN","GMPLDAL",49,0)
 . S FDA(AUPN,GMPIFN_",",FLD)=$S($P(GMPFLD(FLD),U)'="":$P(GMPFLD(FLD),U),1:"@")
"RTN","GMPLDAL",50,0)
 . D:'AUDITED AUDIT(GMPIFN,FLD,$P(GMPORIG(FLD),U),$P(GMPFLD(FLD),U),"",+$G(GMPROV))
"RTN","GMPLDAL",51,0)
 D FILE^DIE("","FDA","MSG") 
"RTN","GMPLDAL",52,0)
 I $D(MSG) Q 0
"RTN","GMPLDAL",53,0)
 Q 1
"RTN","GMPLDAL",54,0)
 ;
"RTN","GMPLDAL",55,0)
DELETE(GMPIFN,GMPROV,ERT) ; Delete a problem
"RTN","GMPLDAL",56,0)
 Q:'$$LOCK(GMPIFN,0,ERT) 0
"RTN","GMPLDAL",57,0)
 N OLD
"RTN","GMPLDAL",58,0)
 S OLD=$P($G(^AUPNPROB(GMPIFN,1)),U,2)
"RTN","GMPLDAL",59,0)
 D CHGCOND(GMPIFN,OLD,"H",GMPROV)
"RTN","GMPLDAL",60,0)
 D UNLOCK(GMPIFN,0)
"RTN","GMPLDAL",61,0)
 Q 1
"RTN","GMPLDAL",62,0)
 ;
"RTN","GMPLDAL",63,0)
DETAIL(GMPIFN,GMPFLD,ERT) ; Return problem details
"RTN","GMPLDAL",64,0)
 ;                
"RTN","GMPLDAL",65,0)
 ; Input   GMPIFN  Pointer to Problem file #9000011
"RTN","GMPLDAL",66,0)
 ;                
"RTN","GMPLDAL",67,0)
 ; Output  GMPFLD Array, passed by reference
"RTN","GMPLDAL",68,0)
 ;
"RTN","GMPLDAL",69,0)
 Q:'$D(^AUPNPROB(GMPIFN,0)) 0
"RTN","GMPLDAL",70,0)
 N GMPL0,GMPL1
"RTN","GMPLDAL",71,0)
 S GMPL0=$G(^AUPNPROB(GMPIFN,0))
"RTN","GMPLDAL",72,0)
 S GMPL1=$G(^AUPNPROB(GMPIFN,1))
"RTN","GMPLDAL",73,0)
 S GMPFLD(.01)=+$P(GMPL0,U)
"RTN","GMPLDAL",74,0)
 S GMPFLD(.02)=+$P(GMPL0,U,2)
"RTN","GMPLDAL",75,0)
 S GMPFLD(.03)=$P(GMPL0,U,3)
"RTN","GMPLDAL",76,0)
 ;S GMPFLD(.05)=$$PROBTEXT^GMPLX(GMPIFN)
"RTN","GMPLDAL",77,0)
 S GMPFLD(.08)=$P(GMPL0,U,8) ;_U_$P($G(^VA(200,+$P(GMPL1,U,3),0)),U)
"RTN","GMPLDAL",78,0)
 S GMPFLD(.12)=$P(GMPL0,U,12) ;,GMPL("STATUS")=$S(X="A":"ACTIVE",1:"INACTIVE")
"RTN","GMPLDAL",79,0)
 ;S X=$S(X'="A":"",1:$P(GMPL1,U,14)),GMPL("PRIORITY")=$S(X="A":"ACUTE",X="C":"CHRONIC",1:"")
"RTN","GMPLDAL",80,0)
 S GMPFLD(.13)=$P(GMPL0,U,13)
"RTN","GMPLDAL",81,0)
 S GMPFLD(1.02)=$P(GMPL1,U,2)
"RTN","GMPLDAL",82,0)
 S GMPFLD(1.03)=$P(GMPL1,U,3)
"RTN","GMPLDAL",83,0)
 S GMPFLD(1.04)=$P(GMPL1,U,4)
"RTN","GMPLDAL",84,0)
 S GMPFLD(1.05)=$P(GMPL1,U,5)
"RTN","GMPLDAL",85,0)
 S GMPFLD(1.06)=$P(GMPL1,U,6)
"RTN","GMPLDAL",86,0)
 S GMPFLD(1.08)=$P(GMPL1,U,8)
"RTN","GMPLDAL",87,0)
 S GMPFLD(1.09)=$P(GMPL1,U,9)
"RTN","GMPLDAL",88,0)
 S GMPFLD(1.10)=$P(GMPL1,U,10)
"RTN","GMPLDAL",89,0)
 S GMPFLD(1.11)=$P(GMPL1,U,11) ;S X=GMPL("EXPOSURE")+1,GMPL("EXPOSURE",X)="AGENT ORANGE",GMPL("EXPOSURE")=X
"RTN","GMPLDAL",90,0)
 S GMPFLD(1.12)=$P(GMPL1,U,12) ;S X=GMPL("EXPOSURE")+1,GMPL("EXPOSURE",X)="RADIATION",GMPL("EXPOSURE")=X
"RTN","GMPLDAL",91,0)
 S GMPFLD(1.13)=$P(GMPL1,U,13) ;S X=GMPL("EXPOSURE")+1,GMPL("EXPOSURE",X)="ENV CONTAMINANTS",GMPL("EXPOSURE")=X
"RTN","GMPLDAL",92,0)
 S GMPFLD(1.14)=$P(GMPL1,U,14)
"RTN","GMPLDAL",93,0)
 S GMPFLD(1.15)=$P(GMPL1,U,15) ;S X=GMPL("EXPOSURE")+1,GMPL("EXPOSURE",X)="HEAD AND/OR NECK CANCER",GMPL("EXPOSURE")=X
"RTN","GMPLDAL",94,0)
 S GMPFLD(1.16)=$P(GMPL1,U,16) ;S X=GMPL("EXPOSURE")+1,GMPL("EXPOSURE",X)="MILITARY SEXUAL TRAUMA",GMPL("EXPOSURE")=X
"RTN","GMPLDAL",95,0)
 S GMPFLD(1.17)=$P(GMPL1,U,17) ;S X=GMPL("EXPOSURE")+1,GMPL("EXPOSURE",X)="COMBAT VET",GMPL("EXPOSURE")=X
"RTN","GMPLDAL",96,0)
 S GMPFLD(1.18)=$P(GMPL1,U,18) ;&(GMPLP'>0) S X=GMPL("EXPOSURE")+1,GMPL("EXPOSURE",X)="SHAD",GMPL("EXPOSURE")=X
"RTN","GMPLDAL",97,0)
 Q 1
"RTN","GMPLDAL",98,0)
 ;
"RTN","GMPLDAL",99,0)
VERIFIED(GMPIFN) ; True if problem already verified
"RTN","GMPLDAL",100,0)
 Q $P($G(^AUPNPROB(GMPIFN,1)),U,2)'="T"
"RTN","GMPLDAL",101,0)
 ;
"RTN","GMPLDAL",102,0)
MKPERM(GMPIFN) ; Make a problem PERMANENT
"RTN","GMPLDAL",103,0)
 D CHGCOND(GMPIFN,"T","P")
"RTN","GMPLDAL",104,0)
 Q
"RTN","GMPLDAL",105,0)
 ;
"RTN","GMPLDAL",106,0)
CHGCOND(GMPIFN,OLD,NEW,GMPROV) ; Change condition flag
"RTN","GMPLDAL",107,0)
 N AUDMSG
"RTN","GMPLDAL",108,0)
 S GMPROV=$G(GMPROV,DUZ)
"RTN","GMPLDAL",109,0)
 S $P(^AUPNPROB(GMPIFN,1),U,2)=NEW
"RTN","GMPLDAL",110,0)
 S AUDMSG=""
"RTN","GMPLDAL",111,0)
 S:(NEW="H") AUDMSG="Deleted"
"RTN","GMPLDAL",112,0)
 S:(OLD="T")&(NEW="P") AUDMSG="Verified"
"RTN","GMPLDAL",113,0)
 S:(OLD="H")&(NEW="P") AUDMSG="Replaced"
"RTN","GMPLDAL",114,0)
 D AUDIT(GMPIFN,1.02,OLD,NEW,AUDMSG,+GMPROV)
"RTN","GMPLDAL",115,0)
 D DTMOD(GMPIFN)
"RTN","GMPLDAL",116,0)
 Q
"RTN","GMPLDAL",117,0)
 ;
"RTN","GMPLDAL",118,0)
LOCK(GMPIFN,SUB,ERT,TIMEOUT) ;
"RTN","GMPLDAL",119,0)
 N LOCKED
"RTN","GMPLDAL",120,0)
 S TIMEOUT=$G(TIMEOUT,1)
"RTN","GMPLDAL",121,0)
 I '$D(SUB) L +^AUPNPROB(GMPIFN):TIMEOUT S LOCKED=$T
"RTN","GMPLDAL",122,0)
 I $D(SUB) L +^AUPNPROB(GMPIFN,SUB):TIMEOUT S LOCKED=$T
"RTN","GMPLDAL",123,0)
 I 'LOCKED,$G(ERT)'="" D ERR^GMPLAPIE(ERT,"FILELOCK")
"RTN","GMPLDAL",124,0)
 Q LOCKED
"RTN","GMPLDAL",125,0)
 ;
"RTN","GMPLDAL",126,0)
UNLOCK(GMPIFN,SUB) ;
"RTN","GMPLDAL",127,0)
 L:'$D(SUB) -^AUPNPROB(GMPIFN)
"RTN","GMPLDAL",128,0)
 L:$D(SUB) -^AUPNPROB(GMPIFN,SUB)
"RTN","GMPLDAL",129,0)
 Q
"RTN","GMPLDAL",130,0)
 ;
"RTN","GMPLDAL",131,0)
AUDIT(GMPIFN,FIELD,ORIGVAL,CRTVAL,NOTE,GMPROV,OLD) ;
"RTN","GMPLDAL",132,0)
 N DA,DD,DO,DIC,X,Y,DIK,DLAYGO,DATA
"RTN","GMPLDAL",133,0)
 S:$G(GMPROV)="" GMPROV=DUZ
"RTN","GMPLDAL",134,0)
 S X=$G(GMPIFN)
"RTN","GMPLDAL",135,0)
 S DIC="^GMPL(125.8,"
"RTN","GMPLDAL",136,0)
 S DIC(0)="L"
"RTN","GMPLDAL",137,0)
 S DLAYGO=125.8
"RTN","GMPLDAL",138,0)
 D FILE^DICN
"RTN","GMPLDAL",139,0)
 Q:+Y'>0
"RTN","GMPLDAL",140,0)
 S DA=+Y,DIK="^GMPL(125.8,"
"RTN","GMPLDAL",141,0)
 S DATA=X_U_$G(FIELD)_U_$$HTFM^XLFDT($H)_U_DUZ_U_$G(ORIGVAL)_U_$G(CRTVAL)_U_$G(NOTE)_U_GMPROV
"RTN","GMPLDAL",142,0)
 S ^GMPL(125.8,DA,0)=DATA
"RTN","GMPLDAL",143,0)
 D IX1^DIK
"RTN","GMPLDAL",144,0)
 S:$G(OLD)'="" ^GMPL(125.8,DA,1)=OLD
"RTN","GMPLDAL",145,0)
 Q
"RTN","GMPLDAL",146,0)
 ;
"RTN","GMPLDAL",147,0)
DTMOD(GMPIFN) ; Update Date Last Modified
"RTN","GMPLDAL",148,0)
 N DIE,DR,DA
"RTN","GMPLDAL",149,0)
 S DA=GMPIFN
"RTN","GMPLDAL",150,0)
 S DR=".03///TODAY"
"RTN","GMPLDAL",151,0)
 S DIE="^AUPNPROB("
"RTN","GMPLDAL",152,0)
 D ^DIE
"RTN","GMPLDAL",153,0)
 Q
"RTN","GMPLDAL",154,0)
 ;
"RTN","GMPLDAL",155,0)
NOTE(GMPIFN,FAC,NIFN) ;Return note text or "" if not found
"RTN","GMPLDAL",156,0)
 Q $P($G(^AUPNPROB(GMPIFN,11,FAC,11,NIFN,0)),U,3)
"RTN","GMPLDAL",157,0)
 ;
"RTN","GMPLDAL",158,0)
UPDNOTE(GMPIFN,FAC,NIFN,TEXT,GMPROV) ;
"RTN","GMPLDAL",159,0)
 N NODE,OLDTEXT
"RTN","GMPLDAL",160,0)
 S NODE=$G(^AUPNPROB(GMPIFN,11,FAC,11,NIFN,0))
"RTN","GMPLDAL",161,0)
 S OLDTEXT=$P(NODE,U,3)
"RTN","GMPLDAL",162,0)
 S $P(^AUPNPROB(GMPIFN,11,FAC,11,NIFN,0),U,3)=TEXT
"RTN","GMPLDAL",163,0)
 D AUDIT(GMPIFN,"1101","C","","Note Modified",GMPROV,NODE)
"RTN","GMPLDAL",164,0)
 Q
"RTN","GMPLDAL",165,0)
 ;
"RTN","GMPLDAL",166,0)
DELNOTE(GMPIFN,FAC,NIFN,GMPROV) ;
"RTN","GMPLDAL",167,0)
 N DA,DIK,NODE
"RTN","GMPLDAL",168,0)
 S NODE=$G(^AUPNPROB(GMPIFN,11,FAC,11,NIFN,0))
"RTN","GMPLDAL",169,0)
 S DIK="^AUPNPROB("_GMPIFN_",11,"_FAC_",11,"
"RTN","GMPLDAL",170,0)
 S DA(2)=GMPIFN
"RTN","GMPLDAL",171,0)
 S DA(1)=FAC
"RTN","GMPLDAL",172,0)
 S DA=NIFN
"RTN","GMPLDAL",173,0)
 D ^DIK
"RTN","GMPLDAL",174,0)
 D AUDIT(GMPIFN,"1101","A","","Deleted Note",+$G(GMPROV),NODE)
"RTN","GMPLDAL",175,0)
 Q
"RTN","GMPLDAL",176,0)
 ;
"RTN","GMPLDAL",177,0)
GETPLIST(PLIST,TOTAL,GMPDFN,GMPSTAT,GMPREV,GMPROV,GMPVIEW,GMPIDX) ; Build PLIST(#)=IFN for view
"RTN","GMPLDAL",178,0)
 N SHOWDEL,ST,STEND,IFN,RECORD,LIST,JUSTDEL,CNT,DATE
"RTN","GMPLDAL",179,0)
 K PLIST
"RTN","GMPLDAL",180,0)
 S GMPSTAT=$G(GMPSTAT)
"RTN","GMPLDAL",181,0)
 S GMPREV=+$G(GMPREV)
"RTN","GMPLDAL",182,0)
 S GMPROV=+$G(GMPROV)
"RTN","GMPLDAL",183,0)
 S GMPVIEW=$G(GMPVIEW)
"RTN","GMPLDAL",184,0)
 S GMPIDX=+$G(GMPIDX)
"RTN","GMPLDAL",185,0)
 S:GMPSTAT="" GMPSTAT="AI"
"RTN","GMPLDAL",186,0)
 S SHOWDEL=GMPSTAT["R"
"RTN","GMPLDAL",187,0)
 S JUSTDEL=GMPSTAT="R"
"RTN","GMPLDAL",188,0)
 S:GMPSTAT="R" GMPSTAT="AIR"
"RTN","GMPLDAL",189,0)
 S ST=$S(GMPSTAT'["A":"A",1:"")
"RTN","GMPLDAL",190,0)
 S STEND=$S(GMPSTAT'["I":"I",1:"")
"RTN","GMPLDAL",191,0)
 S TOTAL=0
"RTN","GMPLDAL",192,0)
 F  S ST=$O(^AUPNPROB("ACTIVE",+GMPDFN,ST)) Q:(ST="")!(ST=STEND)  D
"RTN","GMPLDAL",193,0)
 . F IFN=0:0 S IFN=$O(^AUPNPROB("ACTIVE",+GMPDFN,ST,IFN)) Q:IFN'>0  D
"RTN","GMPLDAL",194,0)
 . . S RECORD=$G(^AUPNPROB(IFN,1)) Q:'$L(RECORD)
"RTN","GMPLDAL",195,0)
 . . Q:'SHOWDEL&($P(RECORD,U,2)="H")
"RTN","GMPLDAL",196,0)
 . . Q:JUSTDEL&($P(RECORD,U,2)'="H")
"RTN","GMPLDAL",197,0)
 . . S TOTAL=TOTAL+1
"RTN","GMPLDAL",198,0)
 . . I $L(GMPVIEW)>2,GMPVIEW'[("/"_$P(RECORD,U,$S($E(GMPVIEW)="S":6,1:8))_"/") Q
"RTN","GMPLDAL",199,0)
 . . I GMPROV,$P(RECORD,U,5)'=+GMPROV Q
"RTN","GMPLDAL",200,0)
 . . S DATE=$P(RECORD,U,9) S:'DATE DATE=$P($G(^AUPNPROB(IFN,0)),U,8)
"RTN","GMPLDAL",201,0)
 . . S:GMPREV DATE=9999999-DATE
"RTN","GMPLDAL",202,0)
 . . S LIST(ST,DATE,IFN)=""
"RTN","GMPLDAL",203,0)
 S ST="",CNT=0
"RTN","GMPLDAL",204,0)
 F  S ST=$O(LIST(ST)) Q:ST=""  D
"RTN","GMPLDAL",205,0)
 . S DATE="" F  S DATE=$O(LIST(ST,DATE)) Q:DATE=""  D
"RTN","GMPLDAL",206,0)
 . . S IFN="" F  S IFN=$O(LIST(ST,DATE,IFN)) Q:IFN=""  D
"RTN","GMPLDAL",207,0)
 . . . S CNT=CNT+1
"RTN","GMPLDAL",208,0)
 . . . S PLIST(CNT)=IFN
"RTN","GMPLDAL",209,0)
 . . . S:$G(GMPIDX) PLIST("B",IFN)=CNT
"RTN","GMPLDAL",210,0)
 S PLIST(0)=CNT
"RTN","GMPLDAL",211,0)
 Q
"RTN","GMPLDAL",212,0)
 ;
"RTN","GMPLDAL",213,0)
REFORM(GMPIFN,GMPROV,OLDPRB,NEWPRB) ; Audit Entry that has been Reformulated
"RTN","GMPLDAL",214,0)
 N NODE
"RTN","GMPLDAL",215,0)
 S NODE=$G(^AUPNPROB(GMPIFN,0))_U_$G(^AUPNPROB(GMPIFN,1))
"RTN","GMPLDAL",216,0)
 D AUDIT(GMPIFN,1.01,+OLDPRB,+NEWPRB,"Reformulated",+GMPROV,NODE)
"RTN","GMPLDAL",217,0)
 Q
"RTN","GMPLDAL",218,0)
 ;
"RTN","GMPLDAL",219,0)
REACTV(GMPIFN,GMPROV) ; Audit Entry that has been Reactivated
"RTN","GMPLDAL",220,0)
 N NODE
"RTN","GMPLDAL",221,0)
 S NODE=$G(^AUPNPROB(GMPIFN,0))_U_$G(^AUPNPROB(GMPIFN,1))
"RTN","GMPLDAL",222,0)
 D AUDIT(GMPIFN,.12,"I","A","Reactivated",GMPROV,NODE)
"RTN","GMPLDAL",223,0)
 Q
"RTN","GMPLDAL",224,0)
 ;
"RTN","GMPLDAL",225,0)
REPLACE(GMPIFN,OLD,NEW) ; Replace ICD diagnosis
"RTN","GMPLDAL",226,0)
 N DIE,DA,DR
"RTN","GMPLDAL",227,0)
 S DIE="^AUPNPROB("
"RTN","GMPLDAL",228,0)
 S DA=GMPIFN
"RTN","GMPLDAL",229,0)
 S DR=".01////"_+NEW
"RTN","GMPLDAL",230,0)
 D ^DIE
"RTN","GMPLDAL",231,0)
 D AUDIT(GMPIFN,".01",OLD,NEW)
"RTN","GMPLDAL",232,0)
 Q
"RTN","GMPLDAL",233,0)
 ;
"RTN","GMPLDAL",234,0)
NEXTNMBR(DFN,VAMC) ; Returns Next Available Problem Number
"RTN","GMPLDAL",235,0)
 N I,J,NUM S NUM=1,I="" I '$D(^AUPNPROB("AA",DFN,VAMC)) Q NUM
"RTN","GMPLDAL",236,0)
 F  S I=$O(^AUPNPROB("AA",DFN,VAMC,I)) Q:I=""  S J=$E(I,2,999),NUM=+J
"RTN","GMPLDAL",237,0)
 S NUM=NUM+1
"RTN","GMPLDAL",238,0)
 Q NUM
"RTN","GMPLDAL",239,0)
ONSET(GMPIFN) ; Returns the date of onset
"RTN","GMPLDAL",240,0)
 Q $P($G(^AUPNPROB(GMPIFN,0)),U,13)
"RTN","GMPLDAL",241,0)
ACTIVE(GMPIFN) ; Is problem active?
"RTN","GMPLDAL",242,0)
 Q $P($G(^AUPNPROB(GMPIFN,0)),U,12)="A"
"RTN","GMPLDAL",243,0)
DELETED(GMPIFN) ;Is problem deleted?
"RTN","GMPLDAL",244,0)
 Q $P($G(^AUPNPROB(GMPIFN,1)),U,2)="H"
"RTN","GMPLDAL",245,0)
EXISTS(GMPIFN) ;Is ifn defined?
"RTN","GMPLDAL",246,0)
 Q $D(^AUPNPROB(GMPIFN,0))
"RTN","GMPLDAL",247,0)
DIAG(GMPIFN) ;Return diagnosis
"RTN","GMPLDAL",248,0)
 Q $P(^AUPNPROB(GMPIFN,0),U)
"RTN","GMPLDAL",249,0)
INACTV(GMPIFN,RESOLVED,GMPROV) ;Inactivate problem
"RTN","GMPLDAL",250,0)
 N FDA,AUPN,MSG
"RTN","GMPLDAL",251,0)
 S AUPN=9000011
"RTN","GMPLDAL",252,0)
 S FDA(AUPN,GMPIFN_",",.12)="I"
"RTN","GMPLDAL",253,0)
 S FDA(AUPN,GMPIFN_",",1.07)=$P($G(RESOLVED),U)
"RTN","GMPLDAL",254,0)
 D FILE^DIE("","FDA","MSG") 
"RTN","GMPLDAL",255,0)
 D AUDIT(GMPIFN,".12","A","I","Inactivated",+$G(GMPROV))
"RTN","GMPLDAL",256,0)
 D DTMOD(GMPIFN)
"RTN","GMPLDAL",257,0)
 Q
"RTN","GMPLDAL",258,0)
TERMEXST(TERM) ;
"RTN","GMPLDAL",259,0)
 Q $D(^AUPNPROB("C",TERM))
"RTN","GMPLDAL",260,0)
AUPNEXST() ;
"RTN","GMPLDAL",261,0)
 Q $D(^AUPNPROB)
"RTN","GMPLDAL",262,0)
 ;
"RTN","GMPLDAL1")
0^22^B65987851
"RTN","GMPLDAL1",1,0)
GMPLDAL1 ; RGI/VSL -- DATA ACCESS LAYER - DIRECT GLOBALS ACCESS ; 03/27/13
"RTN","GMPLDAL1",2,0)
 ;;2.0;Problem List;**260002**;Aug 25, 1994;Build 26
"RTN","GMPLDAL1",3,0)
GETCATS(RETURN,SEARCH,START,NUMBER) ;
"RTN","GMPLDAL1",4,0)
 S:$D(START)=0 START="" S:$D(SEARCH)=0 SEARCH=""
"RTN","GMPLDAL1",5,0)
 D LIST^DIC("125.11","","","",NUMBER,.START,SEARCH,"","","","RETURN")
"RTN","GMPLDAL1",6,0)
 I $L(SEARCH)>0,$P(RETURN("DILIST",0),U,1)'>0 D
"RTN","GMPLDAL1",7,0)
 . D LIST^DIC("125.11","","","",NUMBER,.START,$$UP^XLFSTR(SEARCH),"","","","RETURN")
"RTN","GMPLDAL1",8,0)
 Q
"RTN","GMPLDAL1",9,0)
 ;
"RTN","GMPLDAL1",10,0)
DELLST(GMPLLST) ; Delete problem selection list
"RTN","GMPLDAL1",11,0)
 N CNT,DA,DIK
"RTN","GMPLDAL1",12,0)
 S DIK="^GMPL(125.1,",DA=0,CNT=0
"RTN","GMPLDAL1",13,0)
 F  S CNT=CNT+1,DA=$O(^GMPL(125.1,"B",+GMPLLST,DA)) Q:DA'>0  D ^DIK
"RTN","GMPLDAL1",14,0)
 S DA=+GMPLLST,DIK="^GMPL(125," D ^DIK
"RTN","GMPLDAL1",15,0)
 Q CNT
"RTN","GMPLDAL1",16,0)
 ;
"RTN","GMPLDAL1",17,0)
DELCAT(GMPLGRP) ; Delete problem category
"RTN","GMPLDAL1",18,0)
 N IFN,DA,DIK,CNT S CNT=0
"RTN","GMPLDAL1",19,0)
 F IFN=0:0 S IFN=$O(^GMPL(125.12,"B",+GMPLGRP,IFN)) Q:IFN'>0  D
"RTN","GMPLDAL1",20,0)
 . Q:IFN'>0  S CNT=CNT+1,DA=IFN,DIK="^GMPL(125.12," D ^DIK
"RTN","GMPLDAL1",21,0)
 S DA=+GMPLGRP,DIK="^GMPL(125.11," D ^DIK
"RTN","GMPLDAL1",22,0)
 Q 1
"RTN","GMPLDAL1",23,0)
 ;
"RTN","GMPLDAL1",24,0)
GETLSTS(RETURN,SEARCH,START,NUMBER) ;
"RTN","GMPLDAL1",25,0)
 N FILE,FIELDS
"RTN","GMPLDAL1",26,0)
 S FILE="125",FIELDS="@;.01"
"RTN","GMPLDAL1",27,0)
 S:$D(START)=0 START="" S:$D(SEARCH)=0 SEARCH=""
"RTN","GMPLDAL1",28,0)
 D LIST^DIC(FILE,"",FIELDS,"",NUMBER,.START,SEARCH,"B","","","RETURN")
"RTN","GMPLDAL1",29,0)
 I $L(SEARCH)>0,$P(RETURN("DILIST",0),U,1)'>0 D
"RTN","GMPLDAL1",30,0)
 . D LIST^DIC(FILE,"",FIELDS,"",NUMBER,.START,$$UP^XLFSTR(SEARCH),"B","","","RETURN")
"RTN","GMPLDAL1",31,0)
 I $P(RETURN("DILIST",0),U,1)'>0 D
"RTN","GMPLDAL1",32,0)
 . S FIELDS="@;.01;.03"
"RTN","GMPLDAL1",33,0)
 . D LIST^DIC(FILE,"",FIELDS,"",NUMBER,.START,SEARCH,"C","","","RETURN")
"RTN","GMPLDAL1",34,0)
 Q
"RTN","GMPLDAL1",35,0)
 ;
"RTN","GMPLDAL1",36,0)
LOCKLST(RETURN,GMPLLST) ; Lock the list
"RTN","GMPLDAL1",37,0)
 S RETURN=0
"RTN","GMPLDAL1",38,0)
 L +^GMPL(125,+GMPLLST,0):1
"RTN","GMPLDAL1",39,0)
 I '$T D ERRX^GMPLAPIE(.RETURN,"FILELOCK") Q
"RTN","GMPLDAL1",40,0)
 S RETURN=1
"RTN","GMPLDAL1",41,0)
 Q
"RTN","GMPLDAL1",42,0)
 ;
"RTN","GMPLDAL1",43,0)
UNLCKLST(GMPLLST) ; Unlock the list
"RTN","GMPLDAL1",44,0)
 L -^GMPL(125,+GMPLLST,0)
"RTN","GMPLDAL1",45,0)
 Q
"RTN","GMPLDAL1",46,0)
 ;
"RTN","GMPLDAL1",47,0)
LOCKCAT(RETURN,GMPLCAT) ; Lock the category
"RTN","GMPLDAL1",48,0)
 S RETURN=0
"RTN","GMPLDAL1",49,0)
 L +^GMPL(125.11,+GMPLCAT,0):1
"RTN","GMPLDAL1",50,0)
 I '$T D ERRX^GMPLAPIE(.RETURN,"FILELOCK") Q
"RTN","GMPLDAL1",51,0)
 S RETURN=1
"RTN","GMPLDAL1",52,0)
 Q
"RTN","GMPLDAL1",53,0)
 ;
"RTN","GMPLDAL1",54,0)
UNLCKCAT(GMPLCAT) ; Unlock the category
"RTN","GMPLDAL1",55,0)
 L -^GMPL(125.11,+GMPLCAT,0)
"RTN","GMPLDAL1",56,0)
 Q
"RTN","GMPLDAL1",57,0)
 ;
"RTN","GMPLDAL1",58,0)
FINDLST(NAMEIFN) ; Search for problem selection list
"RTN","GMPLDAL1",59,0)
 Q $$FIND("125",NAMEIFN)
"RTN","GMPLDAL1",60,0)
 ;
"RTN","GMPLDAL1",61,0)
FINDCAT(NAMEIFN) ; Search for problem category
"RTN","GMPLDAL1",62,0)
 Q $$FIND("125.11",NAMEIFN)
"RTN","GMPLDAL1",63,0)
 ;
"RTN","GMPLDAL1",64,0)
FINDCATM(NAMEIFN) ; Search for problem category
"RTN","GMPLDAL1",65,0)
 Q $$FINDM("125.11",NAMEIFN)
"RTN","GMPLDAL1",66,0)
 ;
"RTN","GMPLDAL1",67,0)
GETLSTGR(IFN) ; Search for problem selection category
"RTN","GMPLDAL1",68,0)
 Q $G(^GMPL(125.1,IFN,0))
"RTN","GMPLDAL1",69,0)
 ;
"RTN","GMPLDAL1",70,0)
FIND(FILENO,EL) ; Lookup
"RTN","GMPLDAL1",71,0)
 ; Input
"RTN","GMPLDAL1",72,0)
 ;  EL      IEN or name of the record
"RTN","GMPLDAL1",73,0)
 ;  FILENO  File number
"RTN","GMPLDAL1",74,0)
 ; Output:
"RTN","GMPLDAL1",75,0)
 ;  0   - if no exact matches are found
"RTN","GMPLDAL1",76,0)
 ;  IEN - if a single match is found
"RTN","GMPLDAL1",77,0)
 N PRE,TEXT S TEXT=EL,PRE=""
"RTN","GMPLDAL1",78,0)
 I +EL>0 S TEXT=+EL,PRE="`"
"RTN","GMPLDAL1",79,0)
 Q $$FIND1^DIC(FILENO,"","MX",PRE_TEXT,"","","ERR")
"RTN","GMPLDAL1",80,0)
 ;
"RTN","GMPLDAL1",81,0)
FINDM(FILENO,TEXT) ; Lookup
"RTN","GMPLDAL1",82,0)
 ; Input
"RTN","GMPLDAL1",83,0)
 ;  EL      IEN or name of the record
"RTN","GMPLDAL1",84,0)
 ;  FILENO  File number
"RTN","GMPLDAL1",85,0)
 ; Output:
"RTN","GMPLDAL1",86,0)
 ;  0   - if no exact matches are found
"RTN","GMPLDAL1",87,0)
 ;  IEN - if a single match is found
"RTN","GMPLDAL1",88,0)
 N LST
"RTN","GMPLDAL1",89,0)
 D FIND^DIC(FILENO,,,"MX",TEXT,,,,,"LST")
"RTN","GMPLDAL1",90,0)
 Q +LST("DILIST",0)
"RTN","GMPLDAL1",91,0)
 ;
"RTN","GMPLDAL1",92,0)
NEWLST(GMPLNAME) ; Create new problem selection list
"RTN","GMPLDAL1",93,0)
 Q $$CREATE(GMPLNAME,"^GMPL(125,","125")
"RTN","GMPLDAL1",94,0)
 ;
"RTN","GMPLDAL1",95,0)
NEWCAT(GMPLNAME,DUPLIC) ; Create new problem category
"RTN","GMPLDAL1",96,0)
 Q $$CREATE(GMPLNAME,"^GMPL(125.11,","125.11",$G(DUPLIC))
"RTN","GMPLDAL1",97,0)
 ;
"RTN","GMPLDAL1",98,0)
CREATE(GMPLNAME,GMPLFILE,GMPLFN,DUPLIC) ; Create simple record
"RTN","GMPLDAL1",99,0)
 ; Input
"RTN","GMPLDAL1",100,0)
 ;  GMPLNAME  Name of the new record
"RTN","GMPLDAL1",101,0)
 ;  GMPLFILE  File name
"RTN","GMPLDAL1",102,0)
 ;  GMPLFN    File number
"RTN","GMPLDAL1",103,0)
 ; Output
"RTN","GMPLDAL1",104,0)
 ;  IEN  New record IEN
"RTN","GMPLDAL1",105,0)
 ;  -1   On error
"RTN","GMPLDAL1",106,0)
 N DIC,X,Y,DLAYGO
"RTN","GMPLDAL1",107,0)
 I $G(DUPLIC) D
"RTN","GMPLDAL1",108,0)
 . S DIC=GMPLFILE,DIC(0)="L",DLAYGO=GMPLFILE,X=GMPLNAME
"RTN","GMPLDAL1",109,0)
 . D FILE^DICN
"RTN","GMPLDAL1",110,0)
 E  D
"RTN","GMPLDAL1",111,0)
 . S DIC=GMPLFILE,DIC(0)="OMZLX",DLAYGO=GMPLFN,X=GMPLNAME
"RTN","GMPLDAL1",112,0)
 . D ^DIC
"RTN","GMPLDAL1",113,0)
 . S:Y>0 Y=+Y_U_Y(0)
"RTN","GMPLDAL1",114,0)
 Q Y
"RTN","GMPLDAL1",115,0)
 ;
"RTN","GMPLDAL1",116,0)
CATUSED(GMPLGRP) ; Check if category is used by any selection list
"RTN","GMPLDAL1",117,0)
 Q $D(^GMPL(125.1,"G",+GMPLGRP))
"RTN","GMPLDAL1",118,0)
 ;
"RTN","GMPLDAL1",119,0)
GETCATD(RETURN,GMPLGRP,CODLEN) ; Return Category details
"RTN","GMPLDAL1",120,0)
 N PSEQ,IFN,ITEM,LINE,GROUP,DIAG
"RTN","GMPLDAL1",121,0)
 S LINE=0,GROUP=+GMPLGRP
"RTN","GMPLDAL1",122,0)
 F PSEQ=0:0 S PSEQ=$O(^GMPL(125.12,"C",+GROUP,PSEQ)) Q:PSEQ'>0  D
"RTN","GMPLDAL1",123,0)
 . S IFN=$O(^GMPL(125.12,"C",+GROUP,PSEQ,0))
"RTN","GMPLDAL1",124,0)
 . S ITEM=$G(^GMPL(125.12,IFN,0)),LINE=LINE+1
"RTN","GMPLDAL1",125,0)
 . S DIAG=$P(ITEM,U,4)
"RTN","GMPLDAL1",126,0)
 . I $G(CODLEN) S DIAG=$E(DIAG,1,CODLEN)
"RTN","GMPLDAL1",127,0)
 . S RETURN("GRP",GROUP,LINE)=DIAG_"^"_$P(ITEM,U,5)_"^"_$P(ITEM,U,3)
"RTN","GMPLDAL1",128,0)
 S RETURN=1
"RTN","GMPLDAL1",129,0)
 Q 1
"RTN","GMPLDAL1",130,0)
 ;
"RTN","GMPLDAL1",131,0)
GETLIST(RETURN,GMPLLST,CODLEN,MINIM) ; Return Problem Selection list details
"RTN","GMPLDAL1",132,0)
 N CNT,LIST,IFN,ITEM,SEQ,GRP
"RTN","GMPLDAL1",133,0)
 S CNT=0,LIST=^GMPL(125,GMPLLST,0)
"RTN","GMPLDAL1",134,0)
 S RETURN("LST","NAME")=$P(LIST,"^",1)
"RTN","GMPLDAL1",135,0)
 S RETURN("LST","MODIFIED")=+$P(LIST,U,2)
"RTN","GMPLDAL1",136,0)
 S RETURN("LST","CLINIC")=$P(LIST,U,3)
"RTN","GMPLDAL1",137,0)
 Q:$G(MINIM)>0 1
"RTN","GMPLDAL1",138,0)
 F IFN=0:0 S IFN=$O(^GMPL(125.1,"B",GMPLLST,IFN)) Q:IFN'>0  D
"RTN","GMPLDAL1",139,0)
 . S ITEM=$G(^GMPL(125.1,IFN,0)),SEQ=$P(ITEM,U,2),GRP=$P(ITEM,U,3)
"RTN","GMPLDAL1",140,0)
 . S RETURN(IFN)=$P(ITEM,U,2,5),CNT=CNT+1 ; seq ^ group ^ subhdr ^ probs
"RTN","GMPLDAL1",141,0)
 . S (RETURN("GRP",GRP),RETURN("SEQ",SEQ))=IFN
"RTN","GMPLDAL1",142,0)
 S RETURN(0)=CNT,RETURN=1
"RTN","GMPLDAL1",143,0)
 Q 1
"RTN","GMPLDAL1",144,0)
 ;
"RTN","GMPLDAL1",145,0)
GETCAT(RETURN,GMPLGRP) ; Return category details
"RTN","GMPLDAL1",146,0)
 S RETURN=0
"RTN","GMPLDAL1",147,0)
 N SEQ,IFN,ITEM,PROB,CNT,CODE,CAT S CNT=0
"RTN","GMPLDAL1",148,0)
 S CAT=^GMPL("125.11",+GMPLGRP,0)
"RTN","GMPLDAL1",149,0)
 S RETURN("CAT","NAME")=$P(CAT,"^",1)
"RTN","GMPLDAL1",150,0)
 S RETURN("CAT","MODIFIED")=+$P(CAT,U,2)
"RTN","GMPLDAL1",151,0)
 F IFN=0:0 S IFN=$O(^GMPL(125.12,"B",+GMPLGRP,IFN)) Q:IFN'>0  D
"RTN","GMPLDAL1",152,0)
 . S ITEM=$G(^GMPL(125.12,IFN,0)),SEQ=$P(ITEM,U,2),PROB=$P(ITEM,U,3)
"RTN","GMPLDAL1",153,0)
 . S RETURN(IFN)=$P(ITEM,U,2,5),CNT=CNT+1 ; seq ^ prob ^ text ^ code
"RTN","GMPLDAL1",154,0)
 . S (RETURN("PROB",PROB),RETURN("SEQ",SEQ))=IFN,CODE=$P(ITEM,U,5) ; Xrefs
"RTN","GMPLDAL1",155,0)
 . S RETURN(IFN,"CODE")=CODE
"RTN","GMPLDAL1",156,0)
 S RETURN(0)=CNT,RETURN=1
"RTN","GMPLDAL1",157,0)
 Q 1
"RTN","GMPLDAL1",158,0)
 ;
"RTN","GMPLDAL1",159,0)
SAVLST(RETURN,GMPLLST,SOURCE) ; Save changes to existing list
"RTN","GMPLDAL1",160,0)
 S RETURN=0
"RTN","GMPLDAL1",161,0)
 N DIK,DIE,DR,ITEM,TMPLST,DA,I,FDA,MSG
"RTN","GMPLDAL1",162,0)
 S DIE="^GMPL(125,",DA=+GMPLLST,DR=".02////"_$P($$HTFM^XLFDT($H),".") D ^DIE ; set modified date
"RTN","GMPLDAL1",163,0)
 S DA=0
"RTN","GMPLDAL1",164,0)
 F  S DA=$O(SOURCE(DA)) Q:+DA'>0  D
"RTN","GMPLDAL1",165,0)
 .S DIK="^GMPL(125.1,"
"RTN","GMPLDAL1",166,0)
 .I +DA'=DA D  Q  ; new link
"RTN","GMPLDAL1",167,0)
 .. Q:"@"[$G(SOURCE(DA))  ; nothing to save
"RTN","GMPLDAL1",168,0)
 .. S TMPLST=SOURCE(DA) D NEW(DIK,+GMPLLST,TMPLST)
"RTN","GMPLDAL1",169,0)
 .I "@"[$G(SOURCE(DA)) D ^DIK Q
"RTN","GMPLDAL1",170,0)
 .S ITEM=$P($G(^GMPL(125.1,DA,0)),U,2,5)
"RTN","GMPLDAL1",171,0)
 .I ITEM'=SOURCE(DA) D
"RTN","GMPLDAL1",172,0)
 ..F I=1,2,3,4 D
"RTN","GMPLDAL1",173,0)
 ... S:$P(SOURCE(DA),U,I)'=$P(ITEM,U,I) FDA(125.1,DA_",",I)=$S($P(SOURCE(DA),U,I)="":"@",1:$P(SOURCE(DA),U,I))
"RTN","GMPLDAL1",174,0)
 .. D FILE^DIE("","FDA","MSG")
"RTN","GMPLDAL1",175,0)
 S RETURN=1
"RTN","GMPLDAL1",176,0)
 Q 1
"RTN","GMPLDAL1",177,0)
 ;
"RTN","GMPLDAL1",178,0)
SAVGRP(RETURN,GMPLGRP,SOURCE) ; Save changes to existing group
"RTN","GMPLDAL1",179,0)
 S RETURN=0
"RTN","GMPLDAL1",180,0)
 N DIK,DIE,DR,ITEM,TMPITEM,DA,I,FDA,MSG
"RTN","GMPLDAL1",181,0)
 S DIE="^GMPL(125.11,",DA=+GMPLGRP,DR="1////"_DT D ^DIE ; set modified date
"RTN","GMPLDAL1",182,0)
 S DA=0
"RTN","GMPLDAL1",183,0)
 F  S DA=$O(SOURCE(DA)) Q:+DA'>0  D
"RTN","GMPLDAL1",184,0)
 .S DIK="^GMPL(125.12,"
"RTN","GMPLDAL1",185,0)
 .I +DA'=DA D  Q
"RTN","GMPLDAL1",186,0)
 .. Q:"@"[$G(SOURCE(DA))  ; nothing to save
"RTN","GMPLDAL1",187,0)
 .. S TMPITEM=SOURCE(DA) D NEW(DIK,+GMPLGRP,TMPITEM)
"RTN","GMPLDAL1",188,0)
 .I "@"[$G(SOURCE(DA)) D ^DIK Q
"RTN","GMPLDAL1",189,0)
 .S ITEM=$P($G(^GMPL(125.12,DA,0)),U,2,5)
"RTN","GMPLDAL1",190,0)
 .I ITEM'=SOURCE(DA) D
"RTN","GMPLDAL1",191,0)
 .. F I=1:1:4 D
"RTN","GMPLDAL1",192,0)
 ... S:$P(SOURCE(DA),U,I)'=$P(ITEM,U,I) FDA(125.12,DA_",",I)=$S($P(SOURCE(DA),U,I)="":"@",1:$P(SOURCE(DA),U,I))
"RTN","GMPLDAL1",193,0)
 .. D FILE^DIE("","FDA","MSG")
"RTN","GMPLDAL1",194,0)
 S RETURN=1
"RTN","GMPLDAL1",195,0)
 Q 1
"RTN","GMPLDAL1",196,0)
 ;
"RTN","GMPLDAL1",197,0)
NEW(DIK,LIST,ITEM) ; Create new entry in Contents file #125.1 or #125.12
"RTN","GMPLDAL1",198,0)
 N I,HDR,LAST,TOTAL,DA
"RTN","GMPLDAL1",199,0)
 S HDR=$G(@(DIK_"0)")),LAST=$P(HDR,U,3),TOTAL=$P(HDR,U,4)
"RTN","GMPLDAL1",200,0)
 F I=(LAST+1):1 Q:'$D(@(DIK_"I,0)"))
"RTN","GMPLDAL1",201,0)
 S DA=I,@(DIK_"DA,0)")=LIST_U_ITEM
"RTN","GMPLDAL1",202,0)
 S $P(@(DIK_"0)"),U,3,4)=DA_U_(TOTAL+1)
"RTN","GMPLDAL1",203,0)
 D IX1^DIK ; set Xrefs
"RTN","GMPLDAL1",204,0)
 Q
"RTN","GMPLDAL1",205,0)
 ;
"RTN","GMPLDAL1",206,0)
ADDLOC(RETURN,GMPLLST,GMPLLOC) ; Add location to list
"RTN","GMPLDAL1",207,0)
 S RETURN=0
"RTN","GMPLDAL1",208,0)
 N DIE,DA,DR
"RTN","GMPLDAL1",209,0)
 S DIE="^GMPL(125,",DA=+GMPLLST,DR=".03////"_+GMPLLOC D ^DIE
"RTN","GMPLDAL1",210,0)
 S RETURN=1
"RTN","GMPLDAL1",211,0)
 Q
"RTN","GMPLDAL1",212,0)
 ;
"RTN","GMPLDAL1",213,0)
GETCLST(GMPCLIN) ; Get first list assigned to the clinic
"RTN","GMPLDAL1",214,0)
 ; RETURN - Passed by reference, List IFN^List name
"RTN","GMPLDAL1",215,0)
 ; GMPCLIN - Location IFN
"RTN","GMPLDAL1",216,0)
 N LST
"RTN","GMPLDAL1",217,0)
 S:$D(^GMPL(125,"C",+GMPCLIN)) LST=$O(^GMPL(125,"C",+GMPCLIN,0))
"RTN","GMPLDAL1",218,0)
 Q:'$G(LST) ""
"RTN","GMPLDAL1",219,0)
 S $P(LST,U,2)=$P($G(^GMPL(125,+LST,0)),U)
"RTN","GMPLDAL1",220,0)
 Q LST
"RTN","GMPLDAL1",221,0)
 ;
"RTN","GMPLDAL1",222,0)
GETGRPP(RETURN,GMPLCAT) ; get all problems in the category
"RTN","GMPLDAL1",223,0)
 I '$G(GMPLCAT) Q 0
"RTN","GMPLDAL1",224,0)
 N PROB,GMPLVALC,PCNT
"RTN","GMPLDAL1",225,0)
 S PROB=0,PCNT=0
"RTN","GMPLDAL1",226,0)
 F  S PROB=$O(^GMPL(125.12,"B",GMPLCAT,PROB)) Q:'PROB  D
"RTN","GMPLDAL1",227,0)
 . N GMPLCOD
"RTN","GMPLDAL1",228,0)
 . S GMPLCOD=$P(^GMPL(125.12,PROB,0),U,5)
"RTN","GMPLDAL1",229,0)
 . Q:'$L(GMPLCOD)  ; no code there
"RTN","GMPLDAL1",230,0)
 . S PCNT=PCNT+1
"RTN","GMPLDAL1",231,0)
 . S RETURN(PCNT)=GMPLCOD
"RTN","GMPLDAL1",232,0)
 . Q
"RTN","GMPLDAL1",233,0)
 Q 1
"RTN","GMPLDAL1",234,0)
 ;
"RTN","GMPLDAL1",235,0)
GETLSTC(RETURN,LIST) ; get all categories in list
"RTN","GMPLDAL1",236,0)
 N GMPLIEN,GMPLVAL,GCNT
"RTN","GMPLDAL1",237,0)
 I '$G(LIST) Q 0
"RTN","GMPLDAL1",238,0)
 S GMPLIEN=0,GMPLVAL=1,GCNT=0
"RTN","GMPLDAL1",239,0)
 F  S GMPLIEN=$O(^GMPL(125.1,"B",LIST,GMPLIEN)) Q:'GMPLIEN!('GMPLVAL)  D
"RTN","GMPLDAL1",240,0)
 . N GMPLCAT
"RTN","GMPLDAL1",241,0)
 . S GCNT=GCNT+1
"RTN","GMPLDAL1",242,0)
 . S GMPLCAT=$P(^GMPL(125.1,GMPLIEN,0),U,3) I 'GMPLCAT Q
"RTN","GMPLDAL1",243,0)
 . S RETURN(GCNT)=GMPLCAT
"RTN","GMPLDAL1",244,0)
 . Q
"RTN","GMPLDAL1",245,0)
 Q 1
"RTN","GMPLDAL1",246,0)
 ;
"RTN","GMPLDAL1",247,0)
ALLPROB(RETURN) ;
"RTN","GMPLDAL1",248,0)
 N PROB,CAT,LIST,CNT
"RTN","GMPLDAL1",249,0)
 S PROB=0,CNT=0
"RTN","GMPLDAL1",250,0)
 F  S PROB=$O(^GMPL(125.12,PROB)) Q:'PROB  I $L($P(^GMPL(125.12,PROB,0),U,5)) D
"RTN","GMPLDAL1",251,0)
 . N PROB0,PROBTX,APIDATA,PROBCAT,ACTDT
"RTN","GMPLDAL1",252,0)
 . S CNT=CNT+1
"RTN","GMPLDAL1",253,0)
 . S PROB0=^GMPL(125.12,PROB,0)
"RTN","GMPLDAL1",254,0)
 . S PROBCAT=$P(PROB0,U)
"RTN","GMPLDAL1",255,0)
 . S RETURN(PROBCAT,PROB,"CODE")=$P(PROB0,U,5)
"RTN","GMPLDAL1",256,0)
 . S RETURN(PROBCAT,PROB,"NEWTXT")=$P(PROB0,U,4)
"RTN","GMPLDAL1",257,0)
 . S RETURN(PROBCAT,PROB,"TXT")=$$GET1^DIQ(125.12,PROB,2)
"RTN","GMPLDAL1",258,0)
 . I '$D(^GMPL(125.1,"G",PROBCAT)) Q
"RTN","GMPLDAL1",259,0)
 . N LIST S LIST=0
"RTN","GMPLDAL1",260,0)
 . F  S LIST=$O(^GMPL(125.1,"G",PROBCAT,LIST)) Q:'LIST  D
"RTN","GMPLDAL1",261,0)
 .. S RETURN(PROBCAT,"L",LIST)=$$GET1^DIQ(125.1,LIST,.01)
"RTN","GMPLDAL1",262,0)
 .. Q
"RTN","GMPLDAL1",263,0)
 . Q
"RTN","GMPLDAL1",264,0)
 Q
"RTN","GMPLDAL1",265,0)
 ;
"RTN","GMPLDAL1",266,0)
CATITM(IEN) ;RETURN 1 if ien exists in file 125.12
"RTN","GMPLDAL1",267,0)
 Q $D(^GMPL(125.12,IEN,0))
"RTN","GMPLDAL1",268,0)
 ;
"RTN","GMPLDAL2")
0^23^B6670259
"RTN","GMPLDAL2",1,0)
GMPLDAL2 ; RGI/VSL -- DATA ACCESS LAYER - DIRECT GLOBALS ACCESS ; 03/19/13
"RTN","GMPLDAL2",2,0)
 ;;2.0;Problem List;**260002**;Aug 25, 1994;Build 26
"RTN","GMPLDAL2",3,0)
GETADATA(RETURN,AIFN) ; Get the audit entry details
"RTN","GMPLDAL2",4,0)
 N AUD0,AUD1
"RTN","GMPLDAL2",5,0)
 S AUD0=$G(^GMPL(125.8,AIFN,0))
"RTN","GMPLDAL2",6,0)
 Q:'AUD0 0
"RTN","GMPLDAL2",7,0)
 S RETURN(0)=""
"RTN","GMPLDAL2",8,0)
 S RETURN(0,.01)=$P(AUD0,U,1)
"RTN","GMPLDAL2",9,0)
 S RETURN(0,1)=$P(AUD0,U,2)
"RTN","GMPLDAL2",10,0)
 S RETURN(0,2)=$P(AUD0,U,3)
"RTN","GMPLDAL2",11,0)
 S RETURN(0,3)=$P(AUD0,U,4)
"RTN","GMPLDAL2",12,0)
 S RETURN(0,4)=$P(AUD0,U,5)
"RTN","GMPLDAL2",13,0)
 S RETURN(0,5)=$P(AUD0,U,6)
"RTN","GMPLDAL2",14,0)
 S RETURN(0,6)=$P(AUD0,U,7)
"RTN","GMPLDAL2",15,0)
 S RETURN(0,7)=$P(AUD0,U,8)
"RTN","GMPLDAL2",16,0)
 S RETURN(1)=$G(^GMPL(125.8,AIFN,1))
"RTN","GMPLDAL2",17,0)
 S AUD1=$G(^GMPL(125.8,AIFN,1))
"RTN","GMPLDAL2",18,0)
 S RETURN(1)=""
"RTN","GMPLDAL2",19,0)
 S RETURN(1,.01)=$P(AUD1,U,1)
"RTN","GMPLDAL2",20,0)
 S RETURN(1,.03)=$P(AUD1,U,3)
"RTN","GMPLDAL2",21,0)
 S RETURN(1,.04)=$P(AUD1,U,4)
"RTN","GMPLDAL2",22,0)
 S RETURN(1,.05)=$P(AUD1,U,5)
"RTN","GMPLDAL2",23,0)
 S RETURN(1,.06)=$P(AUD1,U,6)
"RTN","GMPLDAL2",24,0)
 Q 1
"RTN","GMPLDAL2",25,0)
 ;
"RTN","GMPLDAL2",26,0)
AUDITX(RETURN,GMPIFN,FIELD,VALUE) ; Returns all audit data of the problem
"RTN","GMPLDAL2",27,0)
 N IDT,AIFN,X0,X1,FLD,CNT
"RTN","GMPLDAL2",28,0)
 S CNT=0,RETURN=CNT
"RTN","GMPLDAL2",29,0)
 F IDT=0:0 S IDT=$O(^GMPL(125.8,"AD",GMPIFN,IDT)) Q:IDT'>0  D
"RTN","GMPLDAL2",30,0)
 . F AIFN=0:0 S AIFN=$O(^GMPL(125.8,"AD",GMPIFN,IDT,AIFN)) Q:AIFN'>0  D
"RTN","GMPLDAL2",31,0)
 .. S X0=$G(^GMPL(125.8,AIFN,0)),X1=$G(^GMPL(125.8,AIFN,1)) Q:'$L(X0)
"RTN","GMPLDAL2",32,0)
 .. I $G(FIELD),$P(X0,U,2)'=FIELD Q
"RTN","GMPLDAL2",33,0)
 .. I $G(FIELD),$G(VALUE),$P(X0,U,6)'=VALUE Q
"RTN","GMPLDAL2",34,0)
 .. S CNT=CNT+1
"RTN","GMPLDAL2",35,0)
 .. S RETURN(CNT,1)=$P(X0,U,2)
"RTN","GMPLDAL2",36,0)
 .. S RETURN(CNT,2)=$P(X0,U,3)
"RTN","GMPLDAL2",37,0)
 .. S RETURN(CNT,3)=$P(X0,U,4)
"RTN","GMPLDAL2",38,0)
 .. S RETURN(CNT,4)=$P(X0,U,5)
"RTN","GMPLDAL2",39,0)
 .. S RETURN(CNT,5)=$P(X0,U,6)
"RTN","GMPLDAL2",40,0)
 .. S RETURN(CNT,6)=$P(X0,U,7)
"RTN","GMPLDAL2",41,0)
 .. S RETURN(CNT,7)=$P(X0,U,8)
"RTN","GMPLDAL2",42,0)
 .. S:$L(X1) RETURN(CNT,1101)=X1,RETURN(CNT,4)=$P(X1,U,3)
"RTN","GMPLDAL2",43,0)
 S RETURN=CNT
"RTN","GMPLDAL2",44,0)
 Q
"RTN","GMPLDAL2",45,0)
 ;
"RTN","GMPLDAL2",46,0)
GETAUDIT(RETURN,GMPIFN,FIELD,VALUE) ; Returns all audit data of the problem
"RTN","GMPLDAL2",47,0)
 N IDT,AIFN,X0,X1,FLD,CNT
"RTN","GMPLDAL2",48,0)
 S CNT=0,RETURN=CNT
"RTN","GMPLDAL2",49,0)
 F IDT=0:0 S IDT=$O(^GMPL(125.8,"AD",GMPIFN,IDT)) Q:IDT'>0  D
"RTN","GMPLDAL2",50,0)
 . F AIFN=0:0 S AIFN=$O(^GMPL(125.8,"AD",GMPIFN,IDT,AIFN)) Q:AIFN'>0  D
"RTN","GMPLDAL2",51,0)
 .. S X0=$G(^GMPL(125.8,AIFN,0)),X1=$G(^GMPL(125.8,AIFN,1)) Q:'$L(X0)
"RTN","GMPLDAL2",52,0)
 .. I $G(FIELD),$P(X0,U,2)'=FIELD Q
"RTN","GMPLDAL2",53,0)
 .. I $G(FIELD),$G(VALUE),$P(X0,U,6)'=VALUE Q
"RTN","GMPLDAL2",54,0)
 .. S CNT=CNT+1
"RTN","GMPLDAL2",55,0)
 .. S RETURN(CNT,0)=$P(X0,U,2,8)
"RTN","GMPLDAL2",56,0)
 .. S:$L(X1) RETURN(CNT,1)=X1
"RTN","GMPLDAL2",57,0)
 S RETURN=CNT
"RTN","GMPLDAL2",58,0)
 Q
"RTN","GMPLDAL2",59,0)
 ;
"RTN","GMPLDAL2",60,0)
GETHIST(RETURN,GMPIFN) ; Returns all audit entries of the problem
"RTN","GMPLDAL2",61,0)
 ; RETURN - By reference, problem history
"RTN","GMPLDAL2",62,0)
 ;  RETURN(I)=Audit IFN
"RTN","GMPLDAL2",63,0)
 ; GMIFN - Problem IFN
"RTN","GMPLDAL2",64,0)
 N IDT,AIFN,LCNT
"RTN","GMPLDAL2",65,0)
 S LCNT=0
"RTN","GMPLDAL2",66,0)
 I '$D(^GMPL(125.8,"B",GMPIFN)) Q  ;BAIL OUT - NO CHANGES
"RTN","GMPLDAL2",67,0)
 S IDT=""
"RTN","GMPLDAL2",68,0)
 F  S IDT=$O(^GMPL(125.8,"AD",GMPIFN,IDT)) Q:IDT'>0  D
"RTN","GMPLDAL2",69,0)
 . S AIFN=""
"RTN","GMPLDAL2",70,0)
 . F  S AIFN=$O(^GMPL(125.8,"AD",GMPIFN,IDT,AIFN)) Q:AIFN'>0  D
"RTN","GMPLDAL2",71,0)
 .. S LCNT=LCNT+1
"RTN","GMPLDAL2",72,0)
 .. S RETURN(LCNT)=AIFN
"RTN","GMPLDAL2",73,0)
 Q
"RTN","GMPLDAL2",74,0)
 ;
"RTN","GMPLDAL3")
0^24^B12151970
"RTN","GMPLDAL3",1,0)
GMPLDAL3 ; RGI/CBR DATA ACCESS LAYER - DIRECT GLOBALS ACCESS ; 09/13/12
"RTN","GMPLDAL3",2,0)
 ;;2.0;Problem List;**260002**;Aug 25, 1994;Build 26
"RTN","GMPLDAL3",3,0)
NOTES(RETURN,GMPIFN,GMPFMT,GMPACT,GMPVAMC,GMPROV) ;Returns Problem notes
"RTN","GMPLDAL3",4,0)
 ;.RETURN    (R) Data array
"RTN","GMPLDAL3",5,0)
 ;           RETURN=number of notes returned
"RTN","GMPLDAL3",6,0)
 ;           RETURN(#)=data (formatted according to GMPFMT)
"RTN","GMPLDAL3",7,0)
 ;GMPIFN     (R) Problem IFN
"RTN","GMPLDAL3",8,0)
 ;GMPFMT     (R) Format
"RTN","GMPLDAL3",9,0)
 ;           1 -- RETURN(#)=note_narrative
"RTN","GMPLDAL3",10,0)
 ;           2 -- RETURN(#)=date_note_added^author^note_narrative
"RTN","GMPLDAL3",11,0)
 ;           3 -- RETURN(#)=note_nmbr^facility^note_narrative^status^date_note_added^author
"RTN","GMPLDAL3",12,0)
 ;           4 -- RETURN(facility,note_nmbr)=note_nmbr^^note_narrative^status^date_note_added^author
"RTN","GMPLDAL3",13,0)
 ;GMPACT     (O) 1=Active only, Default=ALL
"RTN","GMPLDAL3",14,0)
 ;GMPVAMC    (O) Only notes from that facility, Default=Multi_divisional
"RTN","GMPLDAL3",15,0)
 ;GMPROV     (O) Only notes from that provider, Default=ALL
"RTN","GMPLDAL3",16,0)
 K RETURN S RETURN=0
"RTN","GMPLDAL3",17,0)
 Q:$D(^AUPNPROB(GMPIFN,11))'>0
"RTN","GMPLDAL3",18,0)
 S GMPFMT=$G(GMPFMT,1)
"RTN","GMPLDAL3",19,0)
 I (GMPFMT<1)!(GMPFMT>4) S GMPFMT=1
"RTN","GMPLDAL3",20,0)
 N FAC,CNT,NIFN,X
"RTN","GMPLDAL3",21,0)
 S (FAC,CNT)=0
"RTN","GMPLDAL3",22,0)
 F  S FAC=$O(^AUPNPROB(GMPIFN,11,FAC)) Q:+FAC'>0  D
"RTN","GMPLDAL3",23,0)
 . I +$G(GMPVAMC)'=0,FAC'=$O(^AUPNPROB(GMPIFN,11,"B",GMPVAMC,0)) Q
"RTN","GMPLDAL3",24,0)
 . S NIFN=0
"RTN","GMPLDAL3",25,0)
 . F  S NIFN=$O(^AUPNPROB(GMPIFN,11,FAC,11,NIFN)) Q:NIFN'>0  D
"RTN","GMPLDAL3",26,0)
 . . S X=$G(^AUPNPROB(GMPIFN,11,FAC,11,NIFN,0))
"RTN","GMPLDAL3",27,0)
 . . I +$G(GMPACT),$P(X,U,4)'="A" Q
"RTN","GMPLDAL3",28,0)
 . . I +$G(GMPROV)>0,$P(X,U,6)'=+GMPROV Q
"RTN","GMPLDAL3",29,0)
 . . S CNT=CNT+1
"RTN","GMPLDAL3",30,0)
 . . S:GMPFMT=1 RETURN(CNT)=$P(X,U,3)
"RTN","GMPLDAL3",31,0)
 . . S:GMPFMT=2 RETURN(CNT)=$$EXTDT^GMPLX($P(X,U,5))_U_$$PROVNAME^GMPLEXT($P(X,U,6))_U_$P(X,U,3)
"RTN","GMPLDAL3",32,0)
 . . S:GMPFMT=4 RETURN(+$G(^AUPNPROB(GMPIFN,11,FAC,0)),$P(X,U))=X
"RTN","GMPLDAL3",33,0)
 . . I GMPFMT=3 S $P(X,U,2)=FAC,RETURN(CNT)=X
"RTN","GMPLDAL3",34,0)
 S RETURN=CNT
"RTN","GMPLDAL3",35,0)
 Q
"RTN","GMPLDAL3",36,0)
 ;
"RTN","GMPLDAL3",37,0)
NEWNOTE(GMPIFN,GMPVAMC,GMPROV,NOTES) ;
"RTN","GMPLDAL3",38,0)
 N FAC,HDR,LAST,TOTAL,NIFN,I
"RTN","GMPLDAL3",39,0)
 S FAC=+$O(^AUPNPROB(GMPIFN,11,"B",GMPVAMC,0))
"RTN","GMPLDAL3",40,0)
 I 'FAC D
"RTN","GMPLDAL3",41,0)
 . S:'$D(^AUPNPROB(GMPIFN,11,0)) ^AUPNPROB(GMPIFN,11,0)="^9000011.11PA^^"
"RTN","GMPLDAL3",42,0)
 . S HDR=^AUPNPROB(GMPIFN,11,0)
"RTN","GMPLDAL3",43,0)
 . S LAST=$P(HDR,"^",3)
"RTN","GMPLDAL3",44,0)
 . S TOTAL=$P(HDR,"^",4)
"RTN","GMPLDAL3",45,0)
 . F I=(LAST+1):1 Q:'$D(^AUPNPROB(GMPIFN,11,I,0))
"RTN","GMPLDAL3",46,0)
 . S ^AUPNPROB(GMPIFN,11,I,0)=GMPVAMC
"RTN","GMPLDAL3",47,0)
 . S ^AUPNPROB(GMPIFN,11,"B",GMPVAMC,I)=""
"RTN","GMPLDAL3",48,0)
 . S FAC=I
"RTN","GMPLDAL3",49,0)
 . S $P(^AUPNPROB(GMPIFN,11,0),U,3,4)=FAC_"^"_(TOTAL+1)
"RTN","GMPLDAL3",50,0)
 I FAC>0 D
"RTN","GMPLDAL3",51,0)
 . S:'$D(^AUPNPROB(GMPIFN,11,FAC,11,0)) ^AUPNPROB(GMPIFN,11,FAC,11,0)="^9000011.1111IA^^"
"RTN","GMPLDAL3",52,0)
 . S HDR=^AUPNPROB(GMPIFN,11,FAC,11,0)
"RTN","GMPLDAL3",53,0)
 . S LAST=$P(HDR,U,3)
"RTN","GMPLDAL3",54,0)
 . S TOTAL=$P(HDR,U,4)
"RTN","GMPLDAL3",55,0)
 . F I=(LAST+1):1 Q:'$D(^AUPNPROB(GMPIFN,11,FAC,11,I,0))
"RTN","GMPLDAL3",56,0)
 . S NIFN=I
"RTN","GMPLDAL3",57,0)
 . F I=0:0 S I=$O(NOTES(I)) Q:I'>0  D
"RTN","GMPLDAL3",58,0)
 . . S ^AUPNPROB(GMPIFN,11,FAC,11,NIFN,0)=NIFN_"^^"_NOTES(I)_"^A^"_DT_U_+$G(GMPROV)
"RTN","GMPLDAL3",59,0)
 . . S ^AUPNPROB(GMPIFN,11,FAC,11,"B",NIFN,NIFN)=""
"RTN","GMPLDAL3",60,0)
 . . S TOTAL=TOTAL+1,LAST=NIFN,NIFN=NIFN+1
"RTN","GMPLDAL3",61,0)
 . S $P(^AUPNPROB(GMPIFN,11,FAC,11,0),U,3,4)=LAST_U_TOTAL
"RTN","GMPLDAL3",62,0)
 Q
"RTN","GMPLDAL3",63,0)
 ;
"RTN","GMPLDAL3",64,0)
HASNOTE(GMPIFN) ;
"RTN","GMPLDAL3",65,0)
 Q $D(^AUPNPROB(GMPIFN,11,0))>0
"RTN","GMPLDAL3",66,0)
MODIFIED(GMPDFN) ; Return the Date the Patients Problem List was Last Modified
"RTN","GMPLDAL3",67,0)
 Q +$O(^AUPNPROB("MODIFIED",GMPDFN,0))
"RTN","GMPLDAL3",68,0)
LASTMOD(GMPIFN) ; last modified date
"RTN","GMPLDAL3",69,0)
 Q $P(^AUPNPROB(GMPIFN,0),U,3)
"RTN","GMPLDAL3",70,0)
PRBCNT() ;Return number of entries in PROBLEM LIST.
"RTN","GMPLDAL3",71,0)
 Q $P(^AUPNPROB(0),U,4)
"RTN","GMPLDAL3",72,0)
HASPRBS(GMPDFN,GMPSTAT) ; Returns 1 if patient DFN has problems with status GMPSTAT
"RTN","GMPLDAL3",73,0)
 I GMPSTAT["A",$D(^AUPNPROB("ACTIVE",GMPDFN,"A")) Q 1
"RTN","GMPLDAL3",74,0)
 I GMPSTAT["I",$D(^AUPNPROB("ACTIVE",GMPDFN,"I")) Q 1
"RTN","GMPLDAL3",75,0)
 Q 0
"RTN","GMPLDAL3",76,0)
GETPARM(RETURN) ;Gets site parameters
"RTN","GMPLDAL3",77,0)
 N X
"RTN","GMPLDAL3",78,0)
 S X=$G(^GMPL(125.99,1,0))
"RTN","GMPLDAL3",79,0)
 S RETURN("VER")=$P(X,"^",2)
"RTN","GMPLDAL3",80,0)
 S RETURN("PRT")=$P(X,"^",3)
"RTN","GMPLDAL3",81,0)
 S RETURN("CLU")=$P(X,"^",4)
"RTN","GMPLDAL3",82,0)
 S RETURN("REV")=$P(X,"^",5)
"RTN","GMPLDAL3",83,0)
 S RETURN("SDP")=$P(X,"^",6)
"RTN","GMPLDAL3",84,0)
 Q
"RTN","GMPLDAL3",85,0)
 ;
"RTN","GMPLDAL3",86,0)
SETPARM(PARAMS) ;Sets site parameters
"RTN","GMPLDAL3",87,0)
 N FDAROOT
"RTN","GMPLDAL3",88,0)
 S:$D(PARAMS("VER")) FDAROOT(125.99,"1,",1)=PARAMS("VER")
"RTN","GMPLDAL3",89,0)
 S:$D(PARAMS("PRT")) FDAROOT(125.99,"1,",2)=PARAMS("PRT")
"RTN","GMPLDAL3",90,0)
 S:$D(PARAMS("CLU")) FDAROOT(125.99,"1,",3)=PARAMS("CLU")
"RTN","GMPLDAL3",91,0)
 S:$D(PARAMS("REV")) FDAROOT(125.99,"1,",4)=PARAMS("REV")
"RTN","GMPLDAL3",92,0)
 S:$D(PARAMS("SDP")) FDAROOT(125.99,"1,",6)=PARAMS("SDP")
"RTN","GMPLDAL3",93,0)
 D FILE^DIE("K","FDAROOT")
"RTN","GMPLDAL3",94,0)
 Q
"RTN","GMPLDAL3",95,0)
 ;
"RTN","GMPLDAL4")
0^25^B4721208
"RTN","GMPLDAL4",1,0)
GMPLDAL4 ; RGI/CBR DATA ACCESS LAYER - REPORTS ; 09/17/12
"RTN","GMPLDAL4",2,0)
 ;;2.0;Problem List;**260002**;Aug 25, 1994;Build 26
"RTN","GMPLDAL4",3,0)
GETPROB(IFN,PROBLEM) ;
"RTN","GMPLDAL4",4,0)
 N NODE0,NODE1
"RTN","GMPLDAL4",5,0)
 S NODE0=^AUPNPROB(IFN,0)
"RTN","GMPLDAL4",6,0)
 S NODE1=$G(^AUPNPROB(IFN,1))
"RTN","GMPLDAL4",7,0)
 S PROBLEM("ACTFLAG")=$P(NODE0,"^",12)
"RTN","GMPLDAL4",8,0)
 S PROBLEM("DFN")=$P(NODE0,"^",2)
"RTN","GMPLDAL4",9,0)
 S PROBLEM("TEXT")=$P(NODE0,"^",5)
"RTN","GMPLDAL4",10,0)
 S PROBLEM("DELETED")=($P(NODE1,"^",2)="H")
"RTN","GMPLDAL4",11,0)
 Q
"RTN","GMPLDAL4",12,0)
 ;
"RTN","GMPLDAL4",13,0)
 ;
"RTN","GMPLDAL4",14,0)
 ; Finds patients with active and inactive problems.
"RTN","GMPLDAL4",15,0)
 ;   TARGET: Root of the target local or global.
"RTN","GMPLDAL4",16,0)
 ; Results stored as TARGET(PATIENT_NAME)=<# Active Problems>_"^"_<# Inactive Problems>
"RTN","GMPLDAL4",17,0)
 ; Returns number of patients.
"RTN","GMPLDAL4",18,0)
PPROBCNT(TARGET) ;
"RTN","GMPLDAL4",19,0)
 N DFN,IFN,CNT,PATCNT,ST,PROBLEM
"RTN","GMPLDAL4",20,0)
 S PATCNT=0
"RTN","GMPLDAL4",21,0)
 F DFN=0:0 S DFN=$O(^AUPNPROB("AC",DFN)) Q:DFN'>0  D
"RTN","GMPLDAL4",22,0)
 . S (CNT("A"),CNT("I"),IFN)=0
"RTN","GMPLDAL4",23,0)
 . F  S IFN=$O(^AUPNPROB("AC",DFN,IFN)) Q:IFN'>0  D
"RTN","GMPLDAL4",24,0)
 . . K PROBLEM D GETPROB(IFN,.PROBLEM)
"RTN","GMPLDAL4",25,0)
 . . Q:PROBLEM("DELETED")
"RTN","GMPLDAL4",26,0)
 . . S ST=PROBLEM("ACTFLAG")
"RTN","GMPLDAL4",27,0)
 . . S CNT(ST)=CNT(ST)+1
"RTN","GMPLDAL4",28,0)
 . I (CNT("A")>0)!(CNT("I")>0) D
"RTN","GMPLDAL4",29,0)
 . . S PATCNT=PATCNT+1
"RTN","GMPLDAL4",30,0)
 . . S @TARGET@($$PATNAME^GMPLEXT(DFN))=CNT("A")_"^"_CNT("I")
"RTN","GMPLDAL4",31,0)
 Q PATCNT
"RTN","GMPLDAL4",32,0)
 ;
"RTN","GMPLDAL4",33,0)
 ; Finds patients with specified active or inactive problems
"RTN","GMPLDAL4",34,0)
 ;   TARGET: Root of the target local or global.
"RTN","GMPLDAL4",35,0)
 ;   GMPTERM: Problem code
"RTN","GMPLDAL4",36,0)
 ;   GMPTEXT: Problem text
"RTN","GMPLDAL4",37,0)
 ;   STATUS: Problem status
"RTN","GMPLDAL4",38,0)
PPRBSPEC(TARGET,GMPTERM,GMPTEXT,STATUS) ;
"RTN","GMPLDAL4",39,0)
 N IFN,PROBLEM,ST,DFN,TXT,STWORD,PATCNT,NAME,LINE
"RTN","GMPLDAL4",40,0)
 S PATCNT=0
"RTN","GMPLDAL4",41,0)
 F IFN=0:0 S IFN=$O(^AUPNPROB("C",+GMPTERM,IFN)) Q:IFN'>0  D
"RTN","GMPLDAL4",42,0)
 . K PROBLEM D GETPROB(IFN,.PROBLEM)
"RTN","GMPLDAL4",43,0)
 . Q:PROBLEM("DELETED")
"RTN","GMPLDAL4",44,0)
 . S ST=PROBLEM("ACTFLAG")
"RTN","GMPLDAL4",45,0)
 . Q:STATUS'[ST
"RTN","GMPLDAL4",46,0)
 . I GMPTERM'>1,GMPTEXT'=$$UP^XLFSTR($$NARR^GMPLEXT(+TXT)) Q
"RTN","GMPLDAL4",47,0)
 . S DFN=PROBLEM("DFN"),TXT=PROBLEM("TEXT")
"RTN","GMPLDAL4",48,0)
 . S NAME=$$PATNAME^GMPLEXT(DFN)
"RTN","GMPLDAL4",49,0)
 . S STWORD=$S(ST="A":"active",1:"inactive")
"RTN","GMPLDAL4",50,0)
 . I '$D(@TARGET@(NAME)) S PATCNT=PATCNT+1,@TARGET@(NAME)=STWORD Q
"RTN","GMPLDAL4",51,0)
 . S LINE=@TARGET@(NAME)
"RTN","GMPLDAL4",52,0)
 . Q:(" "_LINE)[(" "_STWORD)  ; already included
"RTN","GMPLDAL4",53,0)
 . S:$E(STWORD)="a" @TARGET@(NAME)=STWORD_", "_LINE
"RTN","GMPLDAL4",54,0)
 . S:$E(STWORD)="i" @TARGET@(NAME)=LINE_", "_STWORD
"RTN","GMPLDAL4",55,0)
 Q PATCNT
"RTN","GMPLDAL4",56,0)
 ;
"RTN","GMPLDALF")
0^26^B2783278
"RTN","GMPLDALF",1,0)
GMPLDALF ; RGI -- DATA ACCESS LAYER - FILEMAN CALLS ; 03/25/13
"RTN","GMPLDALF",2,0)
 ;;2.0;Problem List;**260002**;Aug 25, 1994;Build 26
"RTN","GMPLDALF",3,0)
DETAIL(GMPIFN,GMPFLD,ERT) ; Return problem details
"RTN","GMPLDALF",4,0)
 ;                
"RTN","GMPLDALF",5,0)
 ; Input   GMPIFN  Pointer to Problem file #9000011
"RTN","GMPLDALF",6,0)
 ;                
"RTN","GMPLDALF",7,0)
 ; Output  GMPFLD Array, passed by reference
"RTN","GMPLDALF",8,0)
 ;
"RTN","GMPLDALF",9,0)
 N GMPBUF,FILE,I,PROBLEM
"RTN","GMPLDALF",10,0)
 S PROBLEM=9000011
"RTN","GMPLDALF",11,0)
 D GETS^DIQ(PROBLEM,GMPIFN,".01:.03;.05;.06:.08;.12;.13;1.01:1.18","IE","GMPBUF","ERT")
"RTN","GMPLDALF",12,0)
 Q:'$D(GMPBUF(PROBLEM,GMPIFN_",")) 0
"RTN","GMPLDALF",13,0)
 S I=""
"RTN","GMPLDALF",14,0)
 F  S I=$O(GMPBUF(PROBLEM,GMPIFN_",",I)) Q:I=""  D
"RTN","GMPLDALF",15,0)
 . I GMPBUF(PROBLEM,GMPIFN_",",I,"I")="" S GMPFLD(I)=""
"RTN","GMPLDALF",16,0)
 . E  S GMPFLD(I)=GMPBUF(PROBLEM,GMPIFN_",",I,"I")_U_GMPBUF(PROBLEM,GMPIFN_",",I,"E")
"RTN","GMPLDALF",17,0)
 Q 1
"RTN","GMPLDALF",18,0)
 ;
"RTN","GMPLDALF",19,0)
VERIFIED(GMPIFN) ; True if problem already verified
"RTN","GMPLDALF",20,0)
 Q $$GET1^DIQ(9000011,2,"1.02","I")'="T"
"RTN","GMPLDALF",21,0)
 ;
"RTN","GMPLDALF",22,0)
MKPERM(GMPIFN) ; Make a problem PERMANENT
"RTN","GMPLDALF",23,0)
 D CHGCOND(GMPIFN,"T","P")
"RTN","GMPLDALF",24,0)
 Q
"RTN","GMPLDALF",25,0)
 ;
"RTN","GMPLDALF",26,0)
CHGCOND(GMPIFN,OLD,NEW,GMPROV) ; Change condition flag
"RTN","GMPLDALF",27,0)
 N AUDMSG,FDA
"RTN","GMPLDALF",28,0)
 S GMPROV=$G(GMPROV,DUZ)
"RTN","GMPLDALF",29,0)
 S FDA(9000011,GMPIFN_",",1.02)=NEW
"RTN","GMPLDALF",30,0)
 D FILE^DIE("","FDA")
"RTN","GMPLDALF",31,0)
 S AUDMSG=""
"RTN","GMPLDALF",32,0)
 S:(NEW="H") AUDMSG="Deleted"
"RTN","GMPLDALF",33,0)
 S:(OLD="T")&(NEW="P") AUDMSG="Verified"
"RTN","GMPLDALF",34,0)
 S:(OLD="H")&(NEW="P") AUDMSG="Replaced"
"RTN","GMPLDALF",35,0)
 D AUDIT^GMPLDAL(GMPIFN,OLD,NEW,AUDMSG,+GMPROV)
"RTN","GMPLDALF",36,0)
 D DTMOD^GMPLDAL(GMPIFN)
"RTN","GMPLDALF",37,0)
 Q
"RTN","GMPLDALF",38,0)
 ;
"RTN","GMPLDALF",39,0)
LOCK(GMPIFN,SUB,ERT) ;
"RTN","GMPLDALF",40,0)
 S SUB=+$G(SUB)
"RTN","GMPLDALF",41,0)
 L +^AUPNPROB(GMPIFN,SUB):1
"RTN","GMPLDALF",42,0)
 I '$T D ERR^GMPLAPIE(ERT,"FILELOCK") Q 0
"RTN","GMPLDALF",43,0)
 Q 1
"RTN","GMPLDALF",44,0)
 ;
"RTN","GMPLDALF",45,0)
UNLOCK(GMPIFN,SUB) ;
"RTN","GMPLDALF",46,0)
 L -^AUPNPROB(GMPIFN,SUB)
"RTN","GMPLDALF",47,0)
 Q
"RTN","GMPLDALF",48,0)
 ;
"RTN","GMPLDIS1")
0^27^B7162999
"RTN","GMPLDIS1",1,0)
GMPLDIS1 ; SLC/MKB -- Displays current/default values for saving ;03/11/13
"RTN","GMPLDIS1",2,0)
 ;;2.0;Problem List;**260002**;Aug 25, 1994;Build 26
"RTN","GMPLDIS1",3,0)
ACCEPT(GMPFLD) ; accept current values of problem to save?
"RTN","GMPLDIS1",4,0)
 N DIR,X,Y,DTOUT,DUOUT
"RTN","GMPLDIS1",5,0)
 D DISPLAY W !
"RTN","GMPLDIS1",6,0)
 S DIR(0)="SAOM^S:SAVE;E:EDIT;Q:QUIT;",DIR("B")="SAVE"
"RTN","GMPLDIS1",7,0)
 D BLD^DIALOG(1250000.147,,,"DIR(""A"")")
"RTN","GMPLDIS1",8,0)
 S DIR("?")="^D HELP^GMPLDIS1"
"RTN","GMPLDIS1",9,0)
 D ^DIR I $D(DUOUT)!($D(DTOUT))!(Y="Q") Q "^"
"RTN","GMPLDIS1",10,0)
 Q $S(Y="S":1,1:0)
"RTN","GMPLDIS1",11,0)
HELP ; help msg for $$ACCEPT, redisplay values
"RTN","GMPLDIS1",12,0)
 N DIR
"RTN","GMPLDIS1",13,0)
 S DIR(0)="EA"
"RTN","GMPLDIS1",14,0)
 D BLD^DIALOG(1250000.148,,,"DIR(""A"")")
"RTN","GMPLDIS1",15,0)
 D ^DIR
"RTN","GMPLDIS1",16,0)
 D DISPLAY
"RTN","GMPLDIS1",17,0)
 Q
"RTN","GMPLDIS1",18,0)
DISPLAY ; display current values for problem in GMPFLD array
"RTN","GMPLDIS1",19,0)
 N SP,I,NTS,CMMT,TEXT,PROB S NTS=0,(SP,CMMT)="" Q:$D(GMPFLD)'>9
"RTN","GMPLDIS1",20,0)
 F I=1.11,1.12,1.13 S:$P(GMPFLD(I),U) SP=SP_$P(GMPFLD(I),U,2)_U
"RTN","GMPLDIS1",21,0)
 S:$L(SP) SP=$E(SP,1,$L(SP)-1) ; strip final "^"
"RTN","GMPLDIS1",22,0)
 F I=0:0 S I=$O(GMPFLD(10,"NEW",I)) Q:I'>0  S:$L(GMPFLD(10,"NEW",I)) NTS=NTS+1
"RTN","GMPLDIS1",23,0)
 I NTS S CMMT=$$EZBLD^DIALOG($S(NTS=1:1250000.149,1:1250000.150),NTS)
"RTN","GMPLDIS1",24,0)
 S PROB=$P(GMPFLD(.05),U,2)
"RTN","GMPLDIS1",25,0)
 I $L(PROB)'>68 S TEXT(1)=PROB,TEXT(2)=CMMT,TEXT=2
"RTN","GMPLDIS1",26,0)
 I $L(PROB)>68 S:NTS PROB=PROB_" "_CMMT D WRAP^GMPLX(PROB,65,.TEXT)
"RTN","GMPLDIS1",27,0)
DIS1 D EN^DDIOL("","","!!")
"RTN","GMPLDIS1",28,0)
 D:'VALMCC EN^DDIOL($$REPEAT^XLFSTR("-",79),"","")
"RTN","GMPLDIS1",29,0)
 D EN^DDIOL($$EZBLD^DIALOG(1250000.151,TEXT(1)))
"RTN","GMPLDIS1",30,0)
 F I=2:1:TEXT D EN^DDIOL("           "_TEXT(I))
"RTN","GMPLDIS1",31,0)
 D EN^DDIOL($$EZBLD^DIALOG(1250000.152,$P(GMPFLD(.13),U,2)))
"RTN","GMPLDIS1",32,0)
 D:GMPVA EN^DDIOL($$EZBLD^DIALOG(1250000.153,$P(GMPFLD(1.1),U,2)),"","?51")
"RTN","GMPLDIS1",33,0)
 D EN^DDIOL($$EZBLD^DIALOG(1250000.154,$P(GMPFLD(.12),U,2)))
"RTN","GMPLDIS1",34,0)
 I $P(GMPFLD(.12),U)="A",$L(GMPFLD(1.14)) D EN^DDIOL("/"_$P(GMPFLD(1.14),U,2),"","?0")
"RTN","GMPLDIS1",35,0)
 I $P(GMPFLD(.12),U)="I",$L(GMPFLD(1.07)) D EN^DDIOL($$EZBLD^DIALOG(1250000.155,$P(GMPFLD(1.07),U)),"","?0")
"RTN","GMPLDIS1",36,0)
 D:GMPVA EN^DDIOL($$EZBLD^DIALOG(1250000.156,$S('$L(SP):$$EZBLD^DIALOG(1250000.157),1:$P(SP,U))),"","?55")
"RTN","GMPLDIS1",37,0)
 D EN^DDIOL($$EZBLD^DIALOG(1250000.165,$P(GMPFLD(1.05),U,2)))
"RTN","GMPLDIS1",38,0)
 D:$L(SP,U)>1 EN^DDIOL($P(SP,U,2),"","?65")
"RTN","GMPLDIS1",39,0)
 I $E(GMPLVIEW("VIEW"))="S" D EN^DDIOL($$EZBLD^DIALOG(1250000.158,$P(GMPFLD(1.06),U,2)))
"RTN","GMPLDIS1",40,0)
 E  D EN^DDIOL($$EZBLD^DIALOG(1250000.159,$P(GMPFLD(1.08),U,2)))
"RTN","GMPLDIS1",41,0)
 D:$L(SP,U)>2 EN^DDIOL($P(SP,U,3),"","?65")
"RTN","GMPLDIS1",42,0)
 N PAR,MSG
"RTN","GMPLDIS1",43,0)
 S PAR(1)=$P(GMPFLD(1.09),U,2)
"RTN","GMPLDIS1",44,0)
 S PAR(2)=$P(GMPFLD(1.04),U,2)
"RTN","GMPLDIS1",45,0)
 D BLD^DIALOG(1250000.160,.PAR,,"MSG")
"RTN","GMPLDIS1",46,0)
 D EN^DDIOL(.MSG)
"RTN","GMPLDIS1",47,0)
 I $$KCHK^XUSRB("GMPL ICD CODE") D EN^DDIOL($$EZBLD^DIALOG(1250000.161,$P(GMPFLD(.01),U,2)),"","?55")
"RTN","GMPLDIS1",48,0)
 D:'VALMCC EN^DDIOL($$REPEAT^XLFSTR("-",79))
"RTN","GMPLDIS1",49,0)
 Q
"RTN","GMPLDISP")
0^28^B46347734
"RTN","GMPLDISP",1,0)
GMPLDISP ; SLC/MKB -- Problem List detailed display ;03/25/13
"RTN","GMPLDISP",2,0)
 ;;2.0;Problem List;**21,26,35,260002**;Aug 25, 1994;Build 26
"RTN","GMPLDISP",3,0)
 ;
"RTN","GMPLDISP",4,0)
 ; External References
"RTN","GMPLDISP",5,0)
 ;   DBIA  3106  ^DIC(49
"RTN","GMPLDISP",6,0)
 ;   DBIA 10082  ^ICD9( file 80
"RTN","GMPLDISP",7,0)
 ;   DBIA 10040  ^SC(  file 44
"RTN","GMPLDISP",8,0)
 ;   DBIA 10060  ^VA(200
"RTN","GMPLDISP",9,0)
 ;   DBIA 10116  $$SETSTR^VALM1
"RTN","GMPLDISP",10,0)
 ;   DBIA 10117  CLEAN^VALM10
"RTN","GMPLDISP",11,0)
 ;   DBIA 10117  CNTRL^VALM10
"RTN","GMPLDISP",12,0)
 ;   DBIA 10103  $$FMTE^XLFDT
"RTN","GMPLDISP",13,0)
 ;   DBIA 10103  $$HTFM^XLFDT
"RTN","GMPLDISP",14,0)
 ;   DBIA 10104  $$REPEAT^XLFSTR
"RTN","GMPLDISP",15,0)
 ;                      
"RTN","GMPLDISP",16,0)
EN ; Init Variables (need GMPLSEL,GMPLNO) and List Array
"RTN","GMPLDISP",17,0)
 G:'$D(GMPLSEL) ERROR G:'$G(GMPLNO) ERROR
"RTN","GMPLDISP",18,0)
 N MSG
"RTN","GMPLDISP",19,0)
 S GMPI=+$G(GMPI)+1 I GMPI>GMPLNO D  Q
"RTN","GMPLDISP",20,0)
 . D BLD^DIALOG(1250000.162,,,"MSG"),EN^DDIOL(.MSG) S VALMBCK="" H 2
"RTN","GMPLDISP",21,0)
 S GMPLNUM=$P(GMPLSEL,",",GMPI) G:GMPLNUM'>0 ERROR
"RTN","GMPLDISP",22,0)
 S GMPIFN=$P($G(^TMP("GMPLIDX",$J,+GMPLNUM)),U,2) G:GMPIFN'>0 ERROR
"RTN","GMPLDISP",23,0)
 K MSG
"RTN","GMPLDISP",24,0)
 D BLD^DIALOG(1250000.163,GMPLNUM,,"MSG")
"RTN","GMPLDISP",25,0)
 D EN^DDIOL(.MSG)
"RTN","GMPLDISP",26,0)
 ;                        
"RTN","GMPLDISP",27,0)
PROB ; Display problem GMPIFN
"RTN","GMPLDISP",28,0)
 N LINE,STR,I,TEXT,NOTE,GMPL,X,Y,IDT,FAC,AIFN,SP,LCNT,NIFN,PARM,%
"RTN","GMPLDISP",29,0)
 G:'$G(GMPIFN) ERROR D CLEAN^VALM10
"RTN","GMPLDISP",30,0)
 S %=$$DETAILX^GMPLAPI2(.GMPL,GMPIFN)
"RTN","GMPLDISP",31,0)
 S SP="",LCNT=1
"RTN","GMPLDISP",32,0)
 F I=1:1:GMPL("EXPOSURE") D
"RTN","GMPLDISP",33,0)
 . S SP=SP_GMPL("EXPOSURE",I)
"RTN","GMPLDISP",34,0)
 . S:I'=GMPL("EXPOSURE") SP=SP_U
"RTN","GMPLDISP",35,0)
 D WRAP^GMPLX($$PROBTEXT^GMPLX(GMPIFN),65,.TEXT)
"RTN","GMPLDISP",36,0)
 S GMPDT(LCNT,0)=$$EZBLD^DIALOG(1250000.151,TEXT(1))
"RTN","GMPLDISP",37,0)
 I TEXT>1 F I=2:1:TEXT S LCNT=LCNT+1,GMPDT(LCNT,0)=TEXT(I)
"RTN","GMPLDISP",38,0)
 S LCNT=LCNT+1,GMPDT(LCNT,0)="       "
"RTN","GMPLDISP",39,0)
PR1 ;   Onset
"RTN","GMPLDISP",40,0)
 ;   SC Condition
"RTN","GMPLDISP",41,0)
 ;   Status
"RTN","GMPLDISP",42,0)
 ;   Exposure
"RTN","GMPLDISP",43,0)
 ;   Provider
"RTN","GMPLDISP",44,0)
 ;   Service/Clinic
"RTN","GMPLDISP",45,0)
 S LINE=$$EZBLD^DIALOG(1250000.152,$S(GMPL("ONSET")'="":GMPL("ONSET"),1:$$EZBLD^DIALOG(1250000.164))),STR=""
"RTN","GMPLDISP",46,0)
 S:GMPVA STR=$$EZBLD^DIALOG(1250000.153,GMPL("SC"))
"RTN","GMPLDISP",47,0)
 S LINE=$$SETSTR^VALM1(STR,LINE,49,30),LCNT=LCNT+1,GMPDT(LCNT,0)=LINE
"RTN","GMPLDISP",48,0)
 S LINE=$$EZBLD^DIALOG(1250000.154,GMPL("STATUS"))
"RTN","GMPLDISP",49,0)
 I GMPL("PRIORITY")'="" S LINE=LINE_"/"_GMPL("PRIORITY")
"RTN","GMPLDISP",50,0)
 I GMPL("STATUS")="INACTIVE",GMPL("RESOLVED") S LINE=LINE_$$EZBLD^DIALOG(1250000.155,GMPL("RESOLVED"))
"RTN","GMPLDISP",51,0)
 S STR="",LCNT=LCNT+1
"RTN","GMPLDISP",52,0)
 S:GMPVA STR=$$EZBLD^DIALOG(1250000.624,$S('$L(SP):$$EZBLD^DIALOG(1250000.625),1:$P(SP,U)))
"RTN","GMPLDISP",53,0)
 S LINE=$$SETSTR^VALM1(STR,LINE,49,30),GMPDT(LCNT,0)=LINE
"RTN","GMPLDISP",54,0)
 S LINE=$$EZBLD^DIALOG(1250000.165,GMPL("PROVIDER")),LCNT=LCNT+1,STR=""
"RTN","GMPLDISP",55,0)
 I GMPVA,$L(SP,U)>1 S STR=$P(SP,U,2)
"RTN","GMPLDISP",56,0)
 S LINE=$$SETSTR^VALM1(STR,LINE,63,16),GMPDT(LCNT,0)=LINE
"RTN","GMPLDISP",57,0)
 I $E(GMPLVIEW("VIEW"))="S" S LINE=$$EZBLD^DIALOG(1250000.158,GMPL("SERVICE"))
"RTN","GMPLDISP",58,0)
 E  S LINE=$$EZBLD^DIALOG(1250000.159,GMPL("CLINIC"))
"RTN","GMPLDISP",59,0)
 S LCNT=LCNT+1,STR="" I GMPVA,$L(SP,U)>2 S STR=$P(SP,U,3)
"RTN","GMPLDISP",60,0)
 S LINE=$$SETSTR^VALM1(STR,LINE,63,16),GMPDT(LCNT,0)=LINE
"RTN","GMPLDISP",61,0)
 S LCNT=LCNT+1,GMPDT(LCNT,0)="       "
"RTN","GMPLDISP",62,0)
PR2 ;   Recorded
"RTN","GMPLDISP",63,0)
 ;   Entered
"RTN","GMPLDISP",64,0)
 ;   Provider Narrative
"RTN","GMPLDISP",65,0)
 ;   ICD code
"RTN","GMPLDISP",66,0)
 S LINE=$$EZBLD^DIALOG(1250000.626,$S($P(GMPL("RECORDED"),U):$P(GMPL("RECORDED"),U),1:$$EZBLD^DIALOG(1250000.164)))
"RTN","GMPLDISP",67,0)
 S:$P(GMPL("RECORDED"),U,2)'="" LINE=LINE_$$EZBLD^DIALOG(1250000.627,$P(GMPL("RECORDED"),U,2))
"RTN","GMPLDISP",68,0)
 S LCNT=LCNT+1,GMPDT(LCNT,0)=LINE
"RTN","GMPLDISP",69,0)
 S PARM(1)=$P(GMPL("ENTERED"),U),PARM(2)=$P(GMPL("ENTERED"),U,2)
"RTN","GMPLDISP",70,0)
 S LINE=$$EZBLD^DIALOG(1250000.167,.PARM)
"RTN","GMPLDISP",71,0)
 S LCNT=LCNT+1
"RTN","GMPLDISP",72,0)
 S:GMPARAM("VER")&(GMPL("CONDITION")="TRANSCRIBED") LINE=LINE_$$EZBLD^DIALOG(1250000.168)
"RTN","GMPLDISP",73,0)
 S GMPDT(LCNT,0)=LINE
"RTN","GMPLDISP",74,0)
 S LINE=$$EZBLD^DIALOG(1250000.628,GMPL("DIAGNOSIS")),LCNT=LCNT+1,GMPDT(LCNT,0)=LINE
"RTN","GMPLDISP",75,0)
 S LCNT=LCNT+1,GMPDT(LCNT,0)="       "
"RTN","GMPLDISP",76,0)
PR3 ;   Comments
"RTN","GMPLDISP",77,0)
 S LCNT=LCNT+1,GMPDT(LCNT,0)=$$EZBLD^DIALOG(1250000.169)
"RTN","GMPLDISP",78,0)
 D CNTRL^VALM10(LCNT,1,8,IOUON,IOUOFF)
"RTN","GMPLDISP",79,0)
 ;     By Facility
"RTN","GMPLDISP",80,0)
 I GMPL("COMMENT")=0 S LCNT=LCNT+1,GMPDT(LCNT,0)=$$EZBLD^DIALOG(1250000.170) G PR4
"RTN","GMPLDISP",81,0)
 F I=1:1:GMPL("COMMENT") D
"RTN","GMPLDISP",82,0)
 . S NOTE=GMPL("COMMENT",I) Q:NOTE=""
"RTN","GMPLDISP",83,0)
 . S LINE=$J($P(NOTE,U),10)_": "_$P(NOTE,U,3)
"RTN","GMPLDISP",84,0)
 . S LCNT=LCNT+1,GMPDT(LCNT,0)=LINE
"RTN","GMPLDISP",85,0)
 . I $P(NOTE,U,2)'="" S LINE="            "_$P(NOTE,U,2),LCNT=LCNT+1,GMPDT(LCNT,0)=LINE
"RTN","GMPLDISP",86,0)
 S:'($G(NOTE)) LCNT=LCNT+1,GMPDT(LCNT,0)=$$EZBLD^DIALOG(1250000.170)
"RTN","GMPLDISP",87,0)
PR4 ;   Audit Trail
"RTN","GMPLDISP",88,0)
 S LCNT=LCNT+1,GMPDT(LCNT,0)="       "
"RTN","GMPLDISP",89,0)
 S LCNT=LCNT+1,GMPDT(LCNT,0)=$$EZBLD^DIALOG(1250000.171)
"RTN","GMPLDISP",90,0)
 D CNTRL^VALM10(LCNT,1,7,IOUON,IOUOFF)
"RTN","GMPLDISP",91,0)
 I GMPL("HISTORY")=0 S LCNT=LCNT+1,GMPDT(LCNT,0)=$$EZBLD^DIALOG(1250000.172) G PRQ
"RTN","GMPLDISP",92,0)
 F I=1:1:GMPL("HISTORY") D 
"RTN","GMPLDISP",93,0)
 . S AIFN=$P(GMPL("HISTORY",I),U)
"RTN","GMPLDISP",94,0)
 . S %=$$AUDET^GMPLHIST(.RETURN,AIFN)
"RTN","GMPLDISP",95,0)
 . D DT(.GMPDT,.LCNT,.RETURN)
"RTN","GMPLDISP",96,0)
PRQ ;   Header Node
"RTN","GMPLDISP",97,0)
 S VALMCNT=LCNT,GMPDT(0)=VALMCNT,VALMSG=$$MSG^GMPLX,VALMBG=1,VALMBCK="R"
"RTN","GMPLDISP",98,0)
 Q
"RTN","GMPLDISP",99,0)
 ;                     
"RTN","GMPLDISP",100,0)
DT(GMPDT,LCNT,RETURN) ;
"RTN","GMPLDISP",101,0)
 N FLD,OLD,NEW,DATE,PROV,PAR,NEWT,OLDT,CHNGE,REASON
"RTN","GMPLDISP",102,0)
 S FLD=RETURN("FLD")
"RTN","GMPLDISP",103,0)
 S OLD=RETURN("OLD")
"RTN","GMPLDISP",104,0)
 S NEW=RETURN("NEW")
"RTN","GMPLDISP",105,0)
 S DATE=RETURN("DATE")
"RTN","GMPLDISP",106,0)
 S PROV=RETURN("PROV")
"RTN","GMPLDISP",107,0)
 S LCNT=LCNT+1
"RTN","GMPLDISP",108,0)
 I +FLD=1101 D  Q
"RTN","GMPLDISP",109,0)
 . S REASON=$$EZBLD^DIALOG(1250000.173)
"RTN","GMPLDISP",110,0)
 . S:OLD="C" REASON=$$EZBLD^DIALOG(1250000.174)
"RTN","GMPLDISP",111,0)
 . S PAR(1)=$J(DATE,10)
"RTN","GMPLDISP",112,0)
 . S PAR(2)=RETURN("OLDDATE")_REASON_PROV
"RTN","GMPLDISP",113,0)
 . S GMPDT(LCNT,0)=$$EZBLD^DIALOG(1250000.175,.PAR)
"RTN","GMPLDISP",114,0)
 . S LCNT=LCNT+1,GMPDT(LCNT,0)="            "_RETURN("OLDNOTE")
"RTN","GMPLDISP",115,0)
 I +FLD=1.02 D  Q
"RTN","GMPLDISP",116,0)
 . S CHNGE=$S(NEW="H":1250000.176,OLD="T":1250000.177,1:1250000.178)
"RTN","GMPLDISP",117,0)
 . S PAR(1)=$J(DATE,10)
"RTN","GMPLDISP",118,0)
 . S PAR(2)=PROV
"RTN","GMPLDISP",119,0)
 . S GMPDT(LCNT,0)=$$EZBLD^DIALOG(CHNGE,.PAR)
"RTN","GMPLDISP",120,0)
 S PAR(1)=$J(DATE,10)
"RTN","GMPLDISP",121,0)
 S PAR(2)=$P(FLD,U,2)
"RTN","GMPLDISP",122,0)
 S PAR(3)=PROV
"RTN","GMPLDISP",123,0)
 S GMPDT(LCNT,0)=$$EZBLD^DIALOG(1250000.179,.PAR),LCNT=LCNT+1
"RTN","GMPLDISP",124,0)
 I +FLD=.12 D  Q
"RTN","GMPLDISP",125,0)
 . S OLDT=$S(OLD="A":$$EZBLD^DIALOG(1250000.182),OLD="I":$$EZBLD^DIALOG(1250000.183),1:$$EZBLD^DIALOG(1250000.184))
"RTN","GMPLDISP",126,0)
 . S NEWT=$S(NEW="A":$$EZBLD^DIALOG(1250000.182),NEW="I":$$EZBLD^DIALOG(1250000.183),1:$$EZBLD^DIALOG(1250000.184))
"RTN","GMPLDISP",127,0)
 . S GMPDT(LCNT,0)=$J($$EZBLD^DIALOG(1250000.180),17)_OLDT_$$EZBLD^DIALOG(1250000.181)_NEWT
"RTN","GMPLDISP",128,0)
 I (+FLD=.13)!(+FLD=1.07) S GMPDT(LCNT,0)=$J($$EZBLD^DIALOG(1250000.180),17)_OLD_$$EZBLD^DIALOG(1250000.181)_NEW Q
"RTN","GMPLDISP",129,0)
 I +FLD=1.14 D  Q
"RTN","GMPLDISP",130,0)
 . S OLDT=$S(OLD="A":$$EZBLD^DIALOG(1250000.185),OLD="C":$$EZBLD^DIALOG(1250000.186),1:$$EZBLD^DIALOG(1250000.187))
"RTN","GMPLDISP",131,0)
 . S NEWT=$S(NEW="A":$$EZBLD^DIALOG(1250000.185),NEW="C":$$EZBLD^DIALOG(1250000.186),1:$$EZBLD^DIALOG(1250000.187))
"RTN","GMPLDISP",132,0)
 . S GMPDT(LCNT,0)=$J($$EZBLD^DIALOG(1250000.180),17)_OLDT_$$EZBLD^DIALOG(1250000.181)_NEWT
"RTN","GMPLDISP",133,0)
 I +FLD>1.09 D  Q
"RTN","GMPLDISP",134,0)
 . S OLDT=$S(+OLD:$$EZBLD^DIALOG(1250000.188),OLD=0:$$EZBLD^DIALOG(1250000.189),1:$$EZBLD^DIALOG(1250000.184))
"RTN","GMPLDISP",135,0)
 . S NEWT=$S(+NEW:$$EZBLD^DIALOG(1250000.188),NEW=0:$$EZBLD^DIALOG(1250000.189),1:$$EZBLD^DIALOG(1250000.184))
"RTN","GMPLDISP",136,0)
 . S GMPDT(LCNT,0)=$J($$EZBLD^DIALOG(1250000.180),17)_OLDT_$$EZBLD^DIALOG(1250000.181)_NEWT
"RTN","GMPLDISP",137,0)
 I "^.01^.05^1.01^1.04^1.05^1.06^1.08^"[(U_+FLD_U) D
"RTN","GMPLDISP",138,0)
 . S GMPDT(LCNT,0)=$J($$EZBLD^DIALOG(1250000.180),17)_$S($L($G(OLD))>0:OLD,1:$$EZBLD^DIALOG(1250000.187))
"RTN","GMPLDISP",139,0)
 . S LCNT=LCNT+1,GMPDT(LCNT,0)=$J($$EZBLD^DIALOG(1250000.181),17)_$S($L($G(NEW))>0:NEW,1:$$EZBLD^DIALOG(1250000.187))
"RTN","GMPLDISP",140,0)
 Q
"RTN","GMPLDISP",141,0)
 ;
"RTN","GMPLDISP",142,0)
HDR ; Header Code (uses GMPDFN, GMPIFN)
"RTN","GMPLDISP",143,0)
 N LASTMOD,PAT,%
"RTN","GMPLDISP",144,0)
 S PAT=$P(GMPDFN,U,2)_"  ("_$P(GMPDFN,U,3)_")"
"RTN","GMPLDISP",145,0)
 S:$G(GMPIFN) %=$$LASTMOD^GMPLAPI4(.LASTMOD,GMPIFN)
"RTN","GMPLDISP",146,0)
 S:'$G(GMPIFN) LASTMOD=$E($$HTFM^XLFDT($H),1,12)
"RTN","GMPLDISP",147,0)
 S LASTMOD=$$EZBLD^DIALOG(1250000.190,$$FMTE^XLFDT(LASTMOD))
"RTN","GMPLDISP",148,0)
 S VALMHDR(1)=PAT_$$REPEAT^XLFSTR(" ",(79-$L(PAT)-$L(LASTMOD)))_LASTMOD
"RTN","GMPLDISP",149,0)
 Q
"RTN","GMPLDISP",150,0)
 ;
"RTN","GMPLDISP",151,0)
HELP ; Help Code
"RTN","GMPLDISP",152,0)
 N DIR
"RTN","GMPLDISP",153,0)
 S DIR(0)="EA"
"RTN","GMPLDISP",154,0)
 D BLD^DIALOG(1250000.191,,,"DIR(""A"")")
"RTN","GMPLDISP",155,0)
 D ^DIR
"RTN","GMPLDISP",156,0)
 S VALMSG=$$MSG^GMPLX,VALMBCK=$S(VALMCC:"",1:"R")
"RTN","GMPLDISP",157,0)
 Q
"RTN","GMPLDISP",158,0)
 ;
"RTN","GMPLDISP",159,0)
DEFLT() ; Default Action, using GMPI and GMPLNO
"RTN","GMPLDISP",160,0)
 I GMPI<GMPLNO Q $$EZBLD^DIALOG(1250000.192)
"RTN","GMPLDISP",161,0)
 Q $$EZBLD^DIALOG(1250000.193)
"RTN","GMPLDISP",162,0)
 ;
"RTN","GMPLDISP",163,0)
ERROR ; Error Message - drop into EXIT
"RTN","GMPLDISP",164,0)
 N MSG
"RTN","GMPLDISP",165,0)
 D BLD^DIALOG(1250000.194,,,"MSG")
"RTN","GMPLDISP",166,0)
 D EN^DDIOL(.MSG)
"RTN","GMPLDISP",167,0)
 S VALMBCK="Q" H 1
"RTN","GMPLDISP",168,0)
EXIT ; Exit Code
"RTN","GMPLDISP",169,0)
 K GMPDT Q
"RTN","GMPLDUP2")
0^29^B11747246
"RTN","GMPLDUP2",1,0)
GMPLDUP2 ;SLC/JVS -- Duplicate Problem #3;08/28/13
"RTN","GMPLDUP2",2,0)
 ;;2.0;Problem List;**12,260002**;Aug 25, 1994;Build 26
"RTN","GMPLDUP2",3,0)
 ;
"RTN","GMPLDUP2",4,0)
 ;VARIABLES:
"RTN","GMPLDUP2",5,0)
 ;PATIENT  = Pointer to the PATIENT/IHS #9000001
"RTN","GMPLDUP2",6,0)
 ;IEN,IFN  = IEN of problem in PROBLEM #9000011
"RTN","GMPLDUP2",7,0)
 ;ICD      = Pointer to ICD DIAGNOSIS # 80
"RTN","GMPLDUP2",8,0)
 ;PROBLEM  = Pointer to EXPRESSIONS #757.01
"RTN","GMPLDUP2",9,0)
 ;FLAG     = Used to exit program
"RTN","GMPLDUP2",10,0)
 ;^TMP("GMPLDUP",$J) = Storage of located duplicates
"RTN","GMPLDUP2",11,0)
 ;^TMP("GMPLD",$J)      = Temporary storage for duplicates
"RTN","GMPLDUP2",12,0)
 ;DUPLICAT= Local array of Current Duplicate being examined
"RTN","GMPLDUP2",13,0)
 ;
"RTN","GMPLDUP2",14,0)
 Q
"RTN","GMPLDUP2",15,0)
TASK ;-TASK JOB
"RTN","GMPLDUP2",16,0)
 S ZTRTN="EN^GMPLDUP2"
"RTN","GMPLDUP2",17,0)
 S ZTDESC="Hide Duplicate Problem for GMPL*2*12"
"RTN","GMPLDUP2",18,0)
 S ZTDTH=$H
"RTN","GMPLDUP2",19,0)
 S ZTSAVE=("DUZ")
"RTN","GMPLDUP2",20,0)
 S ZTIO=""
"RTN","GMPLDUP2",21,0)
 D ^%ZTLOAD
"RTN","GMPLDUP2",22,0)
 I $D(ZTSK) D BMES^XPDUTL("Task Number: "_$G(ZTSK))
"RTN","GMPLDUP2",23,0)
 I '$D(ZTSK) D BMES^XPDUTL("TASK JOB DID NOT RUN!")
"RTN","GMPLDUP2",24,0)
 I '$D(ZTSK) D MES^XPDUTL("Start Task with  D TASK^GMPLDUP2")
"RTN","GMPLDUP2",25,0)
 ;
"RTN","GMPLDUP2",26,0)
 Q
"RTN","GMPLDUP2",27,0)
 ;
"RTN","GMPLDUP2",28,0)
EN ; Official entry point
"RTN","GMPLDUP2",29,0)
 ;
"RTN","GMPLDUP2",30,0)
 D SEARCH
"RTN","GMPLDUP2",31,0)
 D CLASS2
"RTN","GMPLDUP2",32,0)
 D EXIT
"RTN","GMPLDUP2",33,0)
SEARCH ;Search for possible duplicates and locate in ^TMP("GMPLDUP")
"RTN","GMPLDUP2",34,0)
 ;S TOTAL=$P(^AUPNPROB(0),"^",3)
"RTN","GMPLDUP2",35,0)
 N PATIENT,IEN,ICD,PROBLEM,CNT,CNTR
"RTN","GMPLDUP2",36,0)
 K ^TMP("GMPLD",$J)
"RTN","GMPLDUP2",37,0)
 S PATIENT=0,ICD=0,PROBLEM=0,CNT=0,CNTR=0
"RTN","GMPLDUP2",38,0)
 F  S PATIENT=$O(^AUPNPROB("AC",PATIENT)) Q:PATIENT=""  D  K ^TMP("GMPLD",$J)
"RTN","GMPLDUP2",39,0)
 .S IEN=0 F  S IEN=$O(^AUPNPROB("AC",PATIENT,IEN)) Q:IEN=""  D
"RTN","GMPLDUP2",40,0)
 ..Q:$P($G(^AUPNPROB(IEN,1)),"^",2)="H"
"RTN","GMPLDUP2",41,0)
 ..S ICD=$P($G(^AUPNPROB(IEN,0)),"^",1)
"RTN","GMPLDUP2",42,0)
 ..S PROBLEM=$P($G(^AUPNPROB(IEN,1)),"^",1)
"RTN","GMPLDUP2",43,0)
 ..S CNT=CNT+1
"RTN","GMPLDUP2",44,0)
 ..I '$D(^TMP("GMPLD",$J,PATIENT,ICD,PROBLEM)) D
"RTN","GMPLDUP2",45,0)
 ...S ^TMP("GMPLD",$J,PATIENT,ICD,PROBLEM,IEN)=""
"RTN","GMPLDUP2",46,0)
 ..E  S ^TMP("GMPLDUP",$J,PATIENT,ICD,PROBLEM,IEN)="",^TMP("GMPLDUP",$J,PATIENT,ICD,PROBLEM,$O(^TMP("GMPLD",$J,PATIENT,ICD,PROBLEM,0)))="" S CNTR=CNTR+1
"RTN","GMPLDUP2",47,0)
 Q
"RTN","GMPLDUP2",48,0)
CLASS2 ;Eliminate Class 2 Duplicates
"RTN","GMPLDUP2",49,0)
 ;
"RTN","GMPLDUP2",50,0)
SET2 N IFN,DUPLICAT,PATIENT,ICD,PROBLEM,FLAG,PN,CONDITIO,STATUS
"RTN","GMPLDUP2",51,0)
 N FACILITY,GMPLC1,DOC
"RTN","GMPLDUP2",52,0)
 S PATIENT=0,FLAG=1,CNT=0,CONDITIO=""
"RTN","GMPLDUP2",53,0)
 ;
"RTN","GMPLDUP2",54,0)
FIND2 ;
"RTN","GMPLDUP2",55,0)
 F  S PATIENT=$O(^TMP("GMPLDUP",$J,PATIENT)) Q:PATIENT=""  D
"RTN","GMPLDUP2",56,0)
 .S ICD=0 F  S ICD=$O(^TMP("GMPLDUP",$J,PATIENT,ICD)) Q:ICD=""  D
"RTN","GMPLDUP2",57,0)
 ..S PROBLEM=0 F  S PROBLEM=$O(^TMP("GMPLDUP",$J,PATIENT,ICD,PROBLEM)) Q:PROBLEM=""  D  K GMPLC1
"RTN","GMPLDUP2",58,0)
 ...S IFN=0 F  S IFN=$O(^TMP("GMPLDUP",$J,PATIENT,ICD,PROBLEM,IFN)) Q:IFN=""  D
"RTN","GMPLDUP2",59,0)
 ....;---
"RTN","GMPLDUP2",60,0)
 ....;-Look for notes
"RTN","GMPLDUP2",61,0)
 ....Q:$D(^AUPNPROB(IFN,11,0))
"RTN","GMPLDUP2",62,0)
 ....;-Look for Verified Problem
"RTN","GMPLDUP2",63,0)
 ....Q:$P($G(^AUPNPROB(IFN,1)),"^",2)="P"
"RTN","GMPLDUP2",64,0)
 ....;-Look for already hidden
"RTN","GMPLDUP2",65,0)
 ....Q:$P($G(^AUPNPROB(IFN,1)),"^",2)="H"
"RTN","GMPLDUP2",66,0)
 ....;---
"RTN","GMPLDUP2",67,0)
 ....S PN=$P($G(^AUPNPROB(IFN,0)),"^",5)
"RTN","GMPLDUP2",68,0)
 ....S STATUS=$P($G(^AUPNPROB(IFN,0)),"^",12)
"RTN","GMPLDUP2",69,0)
 ....S CONDITIO=$P($G(^AUPNPROB(IFN,1)),"^",2)
"RTN","GMPLDUP2",70,0)
 ....;---
"RTN","GMPLDUP2",71,0)
 ....I '$D(GMPLC1(PN,STATUS,CONDITIO)) S GMPLC1(PN,STATUS,CONDITIO)=IFN
"RTN","GMPLDUP2",72,0)
 ....E  S ^TMP("GMPLREM",$J,IFN)=""
"RTN","GMPLDUP2",73,0)
 D HIDE2 Q
"RTN","GMPLDUP2",74,0)
HIDE2 ;---Hide Duplicates and count them.
"RTN","GMPLDUP2",75,0)
 N IFN,CNT,GMPIFN,%,RET
"RTN","GMPLDUP2",76,0)
 S CNT=0
"RTN","GMPLDUP2",77,0)
 S IFN=0 F  S IFN=$O(^TMP("GMPLREM",$J,IFN)) Q:IFN=""  D
"RTN","GMPLDUP2",78,0)
 .S CNT=CNT+1
"RTN","GMPLDUP2",79,0)
 .S GMPIFN=IFN
"RTN","GMPLDUP2",80,0)
 .S %=$$DELETE^GMPLAPI2(.RET,GMPIFN,"")
"RTN","GMPLDUP2",81,0)
 ;---Send Bulletin
"RTN","GMPLDUP2",82,0)
 S XMB="GMPL DUPLICATE PROBLEMS"
"RTN","GMPLDUP2",83,0)
 S XMDUZ=$P($$SITE^VASITE,"^",2)_" "_"GMPL*2*12"
"RTN","GMPLDUP2",84,0)
 S XMY("SMITH,VAUGHN@ISC-SLC.DOMAIN.EXT")=""
"RTN","GMPLDUP2",85,0)
 S XMY(DUZ)=""
"RTN","GMPLDUP2",86,0)
 S XMB(1)=$G(CNT)
"RTN","GMPLDUP2",87,0)
 D ^XMB
"RTN","GMPLDUP2",88,0)
 ;----
"RTN","GMPLDUP2",89,0)
 K ^TMP("GMPLREM",$J)
"RTN","GMPLDUP2",90,0)
 Q
"RTN","GMPLDUP2",91,0)
EXIT ;-KILLS GLOBALS AND EXITS
"RTN","GMPLDUP2",92,0)
 K ^TMP("GMPLD",$J),^TMP("GMPLDUP",$J),^TMP("GMPLREM",$J)
"RTN","GMPLDUP2",93,0)
 K CNT ;,TOTAL
"RTN","GMPLE9")
0^30^B4417729
"RTN","GMPLE9",1,0)
GMPLE9 ; ISL - Problem List Env Chk for GMPL*2*9  ;09/21/12
"RTN","GMPLE9",2,0)
 ;;2.0;Problem List;**9,260002**;Aug 25,1994;Build 26
"RTN","GMPLE9",3,0)
 ;
"RTN","GMPLE9",4,0)
 ;
"RTN","GMPLE9",5,0)
E9 N Y S Y=$$VERSION^XPDUTL("LEX") W !!,"Patch GMPL*2*9 corrects Problem List routine GMPLUTL1 exported with the",!,"Lexicon Utility v 2.0"
"RTN","GMPLE9",6,0)
 I +Y'>1 W !!,"    Could not find Lexicon Utility v 2.0.  This patch should only be ",!,"    installed at sites using version 2.0 of the Lexicon Utility",! S XPDQUIT=1 Q
"RTN","GMPLE9",7,0)
 I +Y>1,'$$LEXINST^GMPLEXT() W !!,"    Lexicon Utility v 2.0 installed without data global.  Please install",!,"    the Lexicon data global exported in HF LEX_2_0.GBL then restart ",!,"    this installation.",! S XPDQUIT=2 Q
"RTN","GMPLE9",8,0)
 I +Y>1 W !!,"    Lexicon Utility v ",Y," installed --> Ok",!
"RTN","GMPLE9",9,0)
 Q
"RTN","GMPLEDIT")
0^31^B29020084
"RTN","GMPLEDIT",1,0)
GMPLEDIT ; SLC/MKB/KER -- VALM Utilities for Edit sub-list ;08/07/13
"RTN","GMPLEDIT",2,0)
 ;;2.0;Problem List;**26,35,260002**;Aug 25, 1994;Build 26
"RTN","GMPLEDIT",3,0)
 ;
"RTN","GMPLEDIT",4,0)
 ; External References
"RTN","GMPLEDIT",5,0)
 ;   DBIA 10060  ^VA(200
"RTN","GMPLEDIT",6,0)
 ;   DBIA 10076  ^XUSEC("GMPL ICD CODE"
"RTN","GMPLEDIT",7,0)
 ;   DBIA 10009  YN^DICN
"RTN","GMPLEDIT",8,0)
 ;   DBIA 10116  $$SETSTR^VALM1
"RTN","GMPLEDIT",9,0)
 ;   DBIA 10117  CLEAN^VALM10
"RTN","GMPLEDIT",10,0)
 ;   DBIA 10117  CNTRL^VALM10
"RTN","GMPLEDIT",11,0)
 ;   DBIA 10103  $$FMTE^XLFDT
"RTN","GMPLEDIT",12,0)
 ;   DBIA 10104  $$REPEAT^XLFSTR
"RTN","GMPLEDIT",13,0)
 ;                    
"RTN","GMPLEDIT",14,0)
EN ; Init Variables, list array
"RTN","GMPLEDIT",15,0)
 ;   Expects GMPIFN   IEN of file 900011 (required)
"RTN","GMPLEDIT",16,0)
 ;           GMPLNUM  Sequence # of Problem Edit (optional)
"RTN","GMPLEDIT",17,0)
 N I,MSG,%
"RTN","GMPLEDIT",18,0)
 D BLD^DIALOG(1250000.195,,,"MSG")
"RTN","GMPLEDIT",19,0)
 D EN^DDIOL(.MSG)
"RTN","GMPLEDIT",20,0)
 D EN^DDIOL($S($G(GMPLNUM):"#"_GMPLNUM_" ",1:"")_"...",,"?0")
"RTN","GMPLEDIT",21,0)
 D EN^DDIOL("",,"!") K GMPFLD,GMPORIG
"RTN","GMPLEDIT",22,0)
 ;   Set GMPFLD() and GMPORIG() Arrays
"RTN","GMPLEDIT",23,0)
 ;D GETFLDS^GMPLEDT3(GMPIFN)
"RTN","GMPLEDIT",24,0)
 S %=$$DETAIL^GMPLAPI2(.GMPORIG,GMPIFN,$S('$D(GMPLMGR):+GMPROV,1:""))
"RTN","GMPLEDIT",25,0)
 I '$D(GMPORIG) D  G KILL
"RTN","GMPLEDIT",26,0)
 . K MSG
"RTN","GMPLEDIT",27,0)
 . D BLD^DIALOG(1250000.194,,,"MSG")
"RTN","GMPLEDIT",28,0)
 . D EN^DDIOL(MSG)
"RTN","GMPLEDIT",29,0)
 . S VALMBCK="Q"
"RTN","GMPLEDIT",30,0)
 M GMPFLD=GMPORIG
"RTN","GMPLEDIT",31,0)
INIT ;   Build list from GMPFLD()
"RTN","GMPLEDIT",32,0)
 N LCNT,TEXT,I,SP,LINE,STR,NUM,NOTE,ICD
"RTN","GMPLEDIT",33,0)
 S LCNT=1,ICD=$$KCHK^XUSRB("GMPL ICD CODE")
"RTN","GMPLEDIT",34,0)
 S SP="" F I=1.11,1.12,1.13,1.15,1.16,1.17,1.18 S:GMPFLD(I) SP=SP_$P(GMPFLD(I),U,2)_U
"RTN","GMPLEDIT",35,0)
 S:$L(SP) SP=$E(SP,1,$L(SP)-1)
"RTN","GMPLEDIT",36,0)
 K GMPSAVED,GMPREBLD D CLEAN^VALM10
"RTN","GMPLEDIT",37,0)
 D WRAP^GMPLX($P(GMPFLD(.05),U,2),65,.TEXT)
"RTN","GMPLEDIT",38,0)
 ;   Line 1
"RTN","GMPLEDIT",39,0)
 S LINE=$$EZBLD^DIALOG(1250000.196,TEXT(1))
"RTN","GMPLEDIT",40,0)
 S ^TMP("GMPLEDIT",$J,LCNT,0)=LINE D HI(LCNT,1)
"RTN","GMPLEDIT",41,0)
 I +$G(GMPLUSER),GMPARAM("VER"),$P(GMPFLD(1.02),U)="T" S LINE=$E(LINE,1,12)_"$"_$E(LINE,14,79),^TMP("GMPLEDIT",$J,LCNT,0)=LINE D HI(LCNT,13)
"RTN","GMPLEDIT",42,0)
 I TEXT>1 F I=2:1:TEXT S LCNT=LCNT+1,^TMP("GMPLEDIT",$J,LCNT,0)="              "_TEXT(I)
"RTN","GMPLEDIT",43,0)
 S LCNT=LCNT+1,^TMP("GMPLEDIT",$J,LCNT,0)="   "
"RTN","GMPLEDIT",44,0)
IN1 ;   Line 2
"RTN","GMPLEDIT",45,0)
 S LINE=$$EZBLD^DIALOG(1250000.197),STR=$P(GMPFLD(.13),U,2)
"RTN","GMPLEDIT",46,0)
 S LINE=LINE_$S(STR="":$$EZBLD^DIALOG(1250000.198),1:STR),LCNT=LCNT+1
"RTN","GMPLEDIT",47,0)
 I GMPVA S STR=$S(ICD:7,1:6)_"  "_$$EZBLD^DIALOG(1250000.153,$S(GMPFLD(1.1)="":$$EZBLD^DIALOG(1250000.198),1:$P(GMPFLD(1.1),U,2))),LINE=$$SETSTR^VALM1(STR,LINE,45,34)
"RTN","GMPLEDIT",48,0)
 S ^TMP("GMPLEDIT",$J,LCNT,0)=LINE F I=1,45 D HI(LCNT,I)
"RTN","GMPLEDIT",49,0)
IN2 ;   Line 3
"RTN","GMPLEDIT",50,0)
 S LINE=$$EZBLD^DIALOG(1250000.199,$P(GMPFLD(.12),U,2)),LCNT=LCNT+1
"RTN","GMPLEDIT",51,0)
 I $E(GMPFLD(.12))="A",$L(GMPFLD(1.14)) S LINE=LINE_"/"_$P(GMPFLD(1.14),U,2)
"RTN","GMPLEDIT",52,0)
 I $E(GMPFLD(.12))="I",GMPFLD(1.07) S LINE=LINE_$$EZBLD^DIALOG(1250000.155,$P(GMPFLD(1.07),U,2))
"RTN","GMPLEDIT",53,0)
 I GMPVA S STR=$S(ICD:8,1:7)_$$EZBLD^DIALOG(1250000.622,$S('$L(SP):$$EZBLD^DIALOG(1250000.170),1:$P(SP,U))),LINE=$$SETSTR^VALM1(STR,LINE,45,34)
"RTN","GMPLEDIT",54,0)
 S ^TMP("GMPLEDIT",$J,LCNT,0)=LINE F I=1,45 D HI(LCNT,I)
"RTN","GMPLEDIT",55,0)
IN3 ;   Line 4
"RTN","GMPLEDIT",56,0)
 S LINE=$$EZBLD^DIALOG(1250000.200,$P(GMPFLD(1.05),U,2)),LCNT=LCNT+1
"RTN","GMPLEDIT",57,0)
 I GMPVA,$L(SP,U)>1 S STR=$P(SP,U,2),LINE=$$SETSTR^VALM1(STR,LINE,60,20)
"RTN","GMPLEDIT",58,0)
 S ^TMP("GMPLEDIT",$J,LCNT,0)=LINE D HI(LCNT,1)
"RTN","GMPLEDIT",59,0)
 ;   Line 5
"RTN","GMPLEDIT",60,0)
 I $E(GMPLVIEW("VIEW"))="S" S LINE=$$EZBLD^DIALOG(1250000.201,$P(GMPFLD(1.06),U,2))
"RTN","GMPLEDIT",61,0)
 E  S LINE=$$EZBLD^DIALOG(1250000.202,$P(GMPFLD(1.08),U,2))
"RTN","GMPLEDIT",62,0)
 I GMPVA,$L(SP,U)>2 S STR=$P(SP,U,3),LINE=$$SETSTR^VALM1(STR,LINE,60,20)
"RTN","GMPLEDIT",63,0)
 S LCNT=LCNT+1,^TMP("GMPLEDIT",$J,LCNT,0)=LINE D HI(LCNT,1) G:'ICD IN4
"RTN","GMPLEDIT",64,0)
 ;   Line 6
"RTN","GMPLEDIT",65,0)
 S LINE=$$EZBLD^DIALOG(1250000.203,$P(GMPFLD(.01),U,2)),LCNT=LCNT+1
"RTN","GMPLEDIT",66,0)
 S ^TMP("GMPLEDIT",$J,LCNT,0)=LINE D HI(LCNT,1)
"RTN","GMPLEDIT",67,0)
IN4 ;   Line 7/8
"RTN","GMPLEDIT",68,0)
 S LCNT=LCNT+1,^TMP("GMPLEDIT",$J,LCNT,0)="   "
"RTN","GMPLEDIT",69,0)
 S LCNT=LCNT+1,^TMP("GMPLEDIT",$J,LCNT,0)=$$EZBLD^DIALOG(1250000.169)
"RTN","GMPLEDIT",70,0)
 D CNTRL^VALM10(LCNT,1,8,IOUON,IOUOFF)
"RTN","GMPLEDIT",71,0)
 S NUM=$S(GMPVA:7,1:5) S:ICD NUM=NUM+1
"RTN","GMPLEDIT",72,0)
 I GMPFLD(10,0) F I=1:1:GMPFLD(10,0) D
"RTN","GMPLEDIT",73,0)
 . S NUM=NUM+1,NOTE=GMPFLD(10,I)
"RTN","GMPLEDIT",74,0)
 . S LINE=NUM_$E("   ",1,3-$L(NUM))_$J($$EXTDT^GMPLX($P(NOTE,U,5)),8)
"RTN","GMPLEDIT",75,0)
 . I $P(GMPFLD(10,I),U,3)="",$P(GMPORIG(10,I),U,3)'="" S $P(NOTE,U,3)=$$EZBLD^DIALOG(1250000.204)
"RTN","GMPLEDIT",76,0)
 . S LCNT=LCNT+1,^TMP("GMPLEDIT",$J,LCNT,0)=LINE_": "_$P(NOTE,U,3)
"RTN","GMPLEDIT",77,0)
 . D HI(LCNT,1) Q:'$D(GMPLMGR)
"RTN","GMPLEDIT",78,0)
 . S LINE="             "_$$PROVNAME^GMPLEXT(+$P(NOTE,U,6))
"RTN","GMPLEDIT",79,0)
 . S LCNT=LCNT+1,^TMP("GMPLEDIT",$J,LCNT,0)=LINE
"RTN","GMPLEDIT",80,0)
IN5 ;   Last Line
"RTN","GMPLEDIT",81,0)
 I $D(GMPFLD(10,"NEW"))>9 S NUM=NUM+1 D
"RTN","GMPLEDIT",82,0)
 . S LINE=NUM_$E("   ",1,3-$L(NUM))_$J($$EXTDT^GMPLX(DT),8)_": "
"RTN","GMPLEDIT",83,0)
 . S I=$O(GMPFLD(10,"NEW",0)),LINE=LINE_GMPFLD(10,"NEW",I)
"RTN","GMPLEDIT",84,0)
 . S LCNT=LCNT+1,^TMP("GMPLEDIT",$J,LCNT,0)=LINE D HI(LCNT,1)
"RTN","GMPLEDIT",85,0)
 . F  S I=$O(GMPFLD(10,"NEW",I)) Q:I'>0  D
"RTN","GMPLEDIT",86,0)
 . . S LINE="             "_GMPFLD(10,"NEW",I)
"RTN","GMPLEDIT",87,0)
 . . S LCNT=LCNT+1,^TMP("GMPLEDIT",$J,LCNT,0)=LINE
"RTN","GMPLEDIT",88,0)
 S VALMCNT=LCNT,^TMP("GMPLEDIT",$J,0)=NUM_U_LCNT,VALMSG=$$MSG^GMPLEDT3
"RTN","GMPLEDIT",89,0)
 Q
"RTN","GMPLEDIT",90,0)
 ;          
"RTN","GMPLEDIT",91,0)
HI(LINE,COL) ; Hi-lite #
"RTN","GMPLEDIT",92,0)
 D CNTRL^VALM10(LINE,COL,3,IOINHI,IOINORM)
"RTN","GMPLEDIT",93,0)
 Q
"RTN","GMPLEDIT",94,0)
 ;          
"RTN","GMPLEDIT",95,0)
HDR ; Header code
"RTN","GMPLEDIT",96,0)
 N LASTMOD,PAT,% S PAT=$P(GMPDFN,U,2)_"  ("_$P(GMPDFN,U,3)_")"
"RTN","GMPLEDIT",97,0)
 S %=$$LASTMOD^GMPLAPI4(.LASTMOD,GMPIFN)
"RTN","GMPLEDIT",98,0)
 S LASTMOD=$$EZBLD^DIALOG(1250000.190,$$FMTE^XLFDT(LASTMOD))
"RTN","GMPLEDIT",99,0)
 S VALMHDR(1)=PAT_$$REPEAT^XLFSTR(" ",(79-$L(PAT)-$L(LASTMOD)))_LASTMOD
"RTN","GMPLEDIT",100,0)
 Q
"RTN","GMPLEDIT",101,0)
 ;
"RTN","GMPLEDIT",102,0)
HELP ; Help code
"RTN","GMPLEDIT",103,0)
 N DIR,MSG,DLG,CNT
"RTN","GMPLEDIT",104,0)
 S DIR(0)="EA"
"RTN","GMPLEDIT",105,0)
 S DLG=$S(VALMCNT>11:1250000.405,1:1250000.205)
"RTN","GMPLEDIT",106,0)
 D BLD^DIALOG(DLG,CNT,,"DIR(""A"")")
"RTN","GMPLEDIT",107,0)
 D ^DIR
"RTN","GMPLEDIT",108,0)
 S CNT=+$G(^TMP("GMPLEDIT",$J,0))
"RTN","GMPLEDIT",109,0)
 S VALMSG=$$MSG^GMPLEDT3,VALMBCK=$S(VALMCC:"",1:"R")
"RTN","GMPLEDIT",110,0)
 Q
"RTN","GMPLEDIT",111,0)
 ;          
"RTN","GMPLEDIT",112,0)
EXIT ; Exit code
"RTN","GMPLEDIT",113,0)
 N DIFFRENT,%,MSG G:$D(GMPSAVED) KILL
"RTN","GMPLEDIT",114,0)
 S DIFFRENT=$$EDITED^GMPLEDT2 I 'DIFFRENT G KILL
"RTN","GMPLEDIT",115,0)
 D BLD^DIALOG(1250000.206,,,"MSG")
"RTN","GMPLEDIT",116,0)
 D EN^DDIOL($C(7))
"RTN","GMPLEDIT",117,0)
 D EN^DDIOL(.MSG)
"RTN","GMPLEDIT",118,0)
EX1 ;   Ask to Save Changes on Exit
"RTN","GMPLEDIT",119,0)
 K MSG
"RTN","GMPLEDIT",120,0)
 D BLD^DIALOG(1250000.207,,,"MSG")
"RTN","GMPLEDIT",121,0)
 D EN^DDIOL(.MSG)
"RTN","GMPLEDIT",122,0)
 S %=1 D YN^DICN G:(%<0)!(%=2) KILL I %=0 D  G EX1
"RTN","GMPLEDIT",123,0)
 . K MSG
"RTN","GMPLEDIT",124,0)
 . D BLD^DIALOG(1250000.208,,,"MSG")
"RTN","GMPLEDIT",125,0)
 . D EN^DDIOL(.MSG)
"RTN","GMPLEDIT",126,0)
 D EN^DDIOL($$EZBLD^DIALOG(1250000.94,,"!!"))
"RTN","GMPLEDIT",127,0)
 N RETURN
"RTN","GMPLEDIT",128,0)
 I '$$UPDATE^GMPLAPI2(.RETURN,GMPIFN,.GMPFLD,.GMPLUSER,+GMPROV) D  G EX1
"RTN","GMPLEDIT",129,0)
 . W !,$$ERRTXT^GMPLAPIE(.RETURN)
"RTN","GMPLEDIT",130,0)
 D EN^DDIOL($$EZBLD^DIALOG(1250000.95))
"RTN","GMPLEDIT",131,0)
KILL ;   Clean-up
"RTN","GMPLEDIT",132,0)
 S CNT=+$G(^TMP("GMPLEDIT",$J,0))
"RTN","GMPLEDIT",133,0)
 F I=1:1:CNT K XQORM("KEY",I)
"RTN","GMPLEDIT",134,0)
 D CLEAN^VALM10 K XQORM("KEY","$")
"RTN","GMPLEDIT",135,0)
 K GMPFLD,GMPORIG,GMPQUIT,DUOUT,DTOUT,I,CNT
"RTN","GMPLEDIT",136,0)
 Q
"RTN","GMPLEDT1")
0^32^B32309398
"RTN","GMPLEDT1",1,0)
GMPLEDT1 ; SLC/MKB/KER/AJB -- Edit Problem List fields ; 5/15/13
"RTN","GMPLEDT1",2,0)
 ;;2.0;Problem List;**17,20,26,28,35,260002**;Aug 25, 1994;Build 26
"RTN","GMPLEDT1",3,0)
 ;
"RTN","GMPLEDT1",4,0)
 ; External References
"RTN","GMPLEDT1",5,0)
 ;   DBIA 10006  ^DIC
"RTN","GMPLEDT1",6,0)
 ;   DBIA 10026  ^DIR
"RTN","GMPLEDT1",7,0)
 ;   DBIA   341  DIS^SDROUT2
"RTN","GMPLEDT1",8,0)
 ;                
"RTN","GMPLEDT1",9,0)
ONSET ; Edit Date of Onset - field .13
"RTN","GMPLEDT1",10,0)
 N X,Y,ENTERED,PROMPT,HELPMSG,DEFAULT,MSG
"RTN","GMPLEDT1",11,0)
 S ENTERED=$S($G(GMPFLD(.08)):+GMPFLD(.08),1:DT),DEFAULT=$G(GMPFLD(.13))
"RTN","GMPLEDT1",12,0)
 S PROMPT=$$EZBLD^DIALOG(1250000.209),HELPMSG=$$EZBLD^DIALOG(1250000.210)
"RTN","GMPLEDT1",13,0)
O1 ;   Get Date of Onset
"RTN","GMPLEDT1",14,0)
 D DATE^GMPLEDT2 Q:$D(GMPQUIT)!($G(GMPLJUMP))
"RTN","GMPLEDT1",15,0)
 I Y>ENTERED D  G O1
"RTN","GMPLEDT1",16,0)
 . D BLD^DIALOG(1250000.211,,,"MSG")
"RTN","GMPLEDT1",17,0)
 . D EN^DDIOL($C(7))
"RTN","GMPLEDT1",18,0)
 . D EN^DDIOL(.MSG)
"RTN","GMPLEDT1",19,0)
 I +$P(GMPDFN,U,4),Y>$P(GMPDFN,U,4) D  G O1
"RTN","GMPLEDT1",20,0)
 . K MSG
"RTN","GMPLEDT1",21,0)
 . D BLD^DIALOG(1250000.212,,,"MSG")
"RTN","GMPLEDT1",22,0)
 . D EN^DDIOL($C(7))
"RTN","GMPLEDT1",23,0)
 . D EN^DDIOL(.MSG)
"RTN","GMPLEDT1",24,0)
 S GMPFLD(.13)=Y S:Y'="" GMPFLD(.13)=GMPFLD(.13)_U_$$EXTDT^GMPLX(Y)
"RTN","GMPLEDT1",25,0)
 Q
"RTN","GMPLEDT1",26,0)
STATUS ; Edit Status - field .12
"RTN","GMPLEDT1",27,0)
 ;   Then Edit Date Resolved - Field 1.07, if inactive
"RTN","GMPLEDT1",28,0)
 N DIR,X,Y,DTOUT
"RTN","GMPLEDT1",29,0)
 S DIR(0)="9000011,.12"
"RTN","GMPLEDT1",30,0)
 S:$L($G(GMPFLD(.12))) DIR("B")=$P(GMPFLD(.12),U,2)
"RTN","GMPLEDT1",31,0)
ST1 ;   Get Status
"RTN","GMPLEDT1",32,0)
 D ^DIR I $D(DTOUT)!(Y="^") S GMPQUIT=1 Q
"RTN","GMPLEDT1",33,0)
 I Y?1"^".E D JUMP^GMPLEDT3(Y) Q:$D(GMPQUIT)!($G(GMPLJUMP))  K:$G(GMPIFN) GMPLJUMP G ST1
"RTN","GMPLEDT1",34,0)
 S:Y'="" Y=Y_U_$S(Y="A":$$EZBLD^DIALOG(1250000.182),1:$$EZBLD^DIALOG(1250000.183)) S GMPFLD(.12)=Y
"RTN","GMPLEDT1",35,0)
 S:$E(Y)'="I" GMPFLD(1.07)="" S:$E(Y)'="A" GMPFLD(1.14)=""
"RTN","GMPLEDT1",36,0)
 D:$E(GMPFLD(.12))="I" RESOLVED^GMPLEDT4
"RTN","GMPLEDT1",37,0)
 D:$E(GMPFLD(.12))="A" PRIORITY^GMPLEDT4
"RTN","GMPLEDT1",38,0)
 Q
"RTN","GMPLEDT1",39,0)
RECORDED ; Edit Date Recorded - field 1.09
"RTN","GMPLEDT1",40,0)
 N X,Y,PROMPT,HELPMSG,DEFAULT,ENTERED,MSG
"RTN","GMPLEDT1",41,0)
 S ENTERED=$S($G(GMPFLD(.08)):+GMPFLD(.08),1:DT),DEFAULT=$G(GMPFLD(1.09))
"RTN","GMPLEDT1",42,0)
 S PROMPT=$$EZBLD^DIALOG(1250000.213),HELPMSG=$$EZBLD^DIALOG(1250000.214)
"RTN","GMPLEDT1",43,0)
RC1 ;   Get Date
"RTN","GMPLEDT1",44,0)
 D DATE^GMPLEDT2 Q:$D(GMPQUIT)!($G(GMPLJUMP))
"RTN","GMPLEDT1",45,0)
 I Y>ENTERED D  G RC1
"RTN","GMPLEDT1",46,0)
 . D BLD^DIALOG(150000.215,,,"MSG")
"RTN","GMPLEDT1",47,0)
 . D EN^DDIOL($C(7))
"RTN","GMPLEDT1",48,0)
 . D EN^DDIOL(.MSG)
"RTN","GMPLEDT1",49,0)
 S GMPFLD(1.09)=Y S:Y'="" GMPFLD(1.09)=GMPFLD(1.09)_U_$$EXTDT^GMPLX(Y)
"RTN","GMPLEDT1",50,0)
 Q
"RTN","GMPLEDT1",51,0)
SC ; Edit Service Connected - field 1.1
"RTN","GMPLEDT1",52,0)
 N DFN,DIR,X,Y,MSG,DTOUT
"RTN","GMPLEDT1",53,0)
 ;
"RTN","GMPLEDT1",54,0)
 ;   The following allows changing a problem's SC/NSC to
"RTN","GMPLEDT1",55,0)
 ;   NSC if there is no SC on file for patient and Problem 
"RTN","GMPLEDT1",56,0)
 ;   original SC was set to "YES"
"RTN","GMPLEDT1",57,0)
 ;
"RTN","GMPLEDT1",58,0)
 I +$G(GMPORIG(1.1))=1 D
"RTN","GMPLEDT1",59,0)
 . D BLD^DIALOG(1250000.216,$P(GMPDFN,U,2),,"MSG")
"RTN","GMPLEDT1",60,0)
 . D EN^DDIOL(.MSG)
"RTN","GMPLEDT1",61,0)
 ELSE  Q:'GMPSC
"RTN","GMPLEDT1",62,0)
 S DFN=+GMPDFN D DIS^SDROUT2
"RTN","GMPLEDT1",63,0)
 I +GMPSC=0,+$G(GMPORIG(1.1))=1 D
"RTN","GMPLEDT1",64,0)
 . D BLD^DIALOG(1250000.217,,,"DIR(""A"")")
"RTN","GMPLEDT1",65,0)
 . S DIR("B")="NO"
"RTN","GMPLEDT1",66,0)
 ELSE  D
"RTN","GMPLEDT1",67,0)
 . D BLD^DIALOG(1250000.218,,,"DIR(""A"")")
"RTN","GMPLEDT1",68,0)
 . S:$L($G(GMPFLD(1.1))) DIR("B")=$P(GMPFLD(1.1),U,2)
"RTN","GMPLEDT1",69,0)
 . D EN^DDIOL("",,"!")
"RTN","GMPLEDT1",70,0)
 D BLD^DIALOG(1250000.219,,,"DIR(""?"")")
"RTN","GMPLEDT1",71,0)
 S DIR(0)="YAO"
"RTN","GMPLEDT1",72,0)
SC1 ;   Get Service Connection
"RTN","GMPLEDT1",73,0)
 D ^DIR I $D(DTOUT)!(Y="^") S GMPQUIT=1 Q
"RTN","GMPLEDT1",74,0)
 I Y?1"^".E D JUMP^GMPLEDT3(Y) Q:$D(GMPQUIT)!($G(GMPLJUMP))  K:$G(GMPIFN) GMPLJUMP G SC1
"RTN","GMPLEDT1",75,0)
 I X="@" G:'$$SURE^GMPLX SC1 S Y=""
"RTN","GMPLEDT1",76,0)
 S GMPFLD(1.1)=Y S:Y'="" GMPFLD(1.1)=GMPFLD(1.1)_U_$S(Y:$$EZBLD^DIALOG(1250000.188),1:$$EZBLD^DIALOG(1250000.189))
"RTN","GMPLEDT1",77,0)
 Q
"RTN","GMPLEDT1",78,0)
SP ; Edit Exposures/Conditions
"RTN","GMPLEDT1",79,0)
 ;   Agent Orange - field 1.11
"RTN","GMPLEDT1",80,0)
 ;   Ionizing Radiation - field 1.12
"RTN","GMPLEDT1",81,0)
 ;   Persian Gulf/Environmental Contaminants - field 1.13
"RTN","GMPLEDT1",82,0)
 ;   Head and/or Neck Cancer - field 1.15
"RTN","GMPLEDT1",83,0)
 ;   Military Sexual Trauma - field 1.16
"RTN","GMPLEDT1",84,0)
 ;   Combat Vet - field 1.17
"RTN","GMPLEDT1",85,0)
 ;   SHAD - field 1.18
"RTN","GMPLEDT1",86,0)
 G SPEXP^GMPLEDT2
"RTN","GMPLEDT1",87,0)
 Q
"RTN","GMPLEDT1",88,0)
SOURCE ; Edit Service - field 1.06
"RTN","GMPLEDT1",89,0)
 ; or Clinic - field 1.08
"RTN","GMPLEDT1",90,0)
 N DIC,X,Y,HELPMSG,PROMPT,DEFAULT,VIEW,MSG,DLG S VIEW=$E(GMPLVIEW("VIEW"))
"RTN","GMPLEDT1",91,0)
 S DIC=$S(VIEW="S":"^DIC(49,",1:"^SC("),DIC(0)="EMQ"
"RTN","GMPLEDT1",92,0)
 S DIC("S")="I $P(^(0),U,"_$S(VIEW="S":9,1:3)_")=""C"""
"RTN","GMPLEDT1",93,0)
 I VIEW="S" S PROMPT=$$EZBLD^DIALOG(1250000.220),DEFAULT=$P(GMPFLD(1.06),U,2)
"RTN","GMPLEDT1",94,0)
 E  S PROMPT=$$EZBLD^DIALOG(1250000.221),DEFAULT=$P(GMPFLD(1.08),U,2)
"RTN","GMPLEDT1",95,0)
 S HELPMSG=$$EZBLD^DIALOG($S(VIEW="S":1250000.223,1:1250000.222))
"RTN","GMPLEDT1",96,0)
S1 ;   Get Service/Clinic
"RTN","GMPLEDT1",97,0)
 D EN^DDIOL(PROMPT_$S($L(DEFAULT):DEFAULT_"//",1:""))
"RTN","GMPLEDT1",98,0)
 R X:DTIME S:'$T X="^",DTOUT=1 S:X="^" GMPQUIT=1 Q:(X="^")!(X="")
"RTN","GMPLEDT1",99,0)
 I X?1"^".E D JUMP^GMPLEDT3(X) Q:$D(GMPQUIT)!($G(GMPLJUMP))  K:$G(GMPIFN) GMPLJUMP G S1
"RTN","GMPLEDT1",100,0)
 I X="?" W !!,HELPMSG,! G S1
"RTN","GMPLEDT1",101,0)
 I X["??" D @("LIST"_$S(VIEW="S":"SERV",1:"CLIN")_"^GMPLMGR1") W !,HELPMSG G S1
"RTN","GMPLEDT1",102,0)
 I X="@" G:'$$SURE^GMPLX S1 S Y="" G SQ
"RTN","GMPLEDT1",103,0)
 D ^DIC I Y'>0 D  G S1
"RTN","GMPLEDT1",104,0)
 . S DLG=$S(VIEW="S":1250000.225,1:1250000.124)
"RTN","GMPLEDT1",105,0)
 . D BLD^DIALOG(DLG,,,"MSG")
"RTN","GMPLEDT1",106,0)
 . D EN^DDIOL(.MSG)
"RTN","GMPLEDT1",107,0)
SQ ;   Quit Service/Clinic
"RTN","GMPLEDT1",108,0)
 S:VIEW'="S" GMPFLD(1.08)=Y S:VIEW="S" GMPFLD(1.06)=Y
"RTN","GMPLEDT1",109,0)
 Q
"RTN","GMPLEDT1",110,0)
AUTHOR ; Edit Recording Provider - field 1.04
"RTN","GMPLEDT1",111,0)
 N X,Y,PROMPT,HELPMSG,DEFAULT S PROMPT=$$EZBLD^DIALOG(1250000.226)
"RTN","GMPLEDT1",112,0)
 S DEFAULT=$G(GMPFLD(1.04)),HELPMSG=$$EZBLD^DIALOG(1250000.227)
"RTN","GMPLEDT1",113,0)
 D NPERSON^GMPLEDT2 Q:$D(GMPQUIT)!($G(GMPLJUMP))
"RTN","GMPLEDT1",114,0)
 S GMPFLD(1.04)=$S(+Y>0:Y,1:"")
"RTN","GMPLEDT1",115,0)
 Q
"RTN","GMPLEDT1",116,0)
PROV ; Edit Responsible Provider - field 1.05
"RTN","GMPLEDT1",117,0)
 N X,Y,PROMPT,DEFAULT,HELPMSG S DEFAULT=$G(GMPFLD(1.05))
"RTN","GMPLEDT1",118,0)
 S PROMPT=$$EZBLD^DIALOG(1250000.228),HELPMSG=$$EZBLD^DIALOG(1250000.229)
"RTN","GMPLEDT1",119,0)
 D NPERSON^GMPLEDT2 Q:$D(GMPQUIT)!($G(GMPLJUMP))
"RTN","GMPLEDT1",120,0)
 S GMPFLD(1.05)=$S(+Y>0:Y,1:"")
"RTN","GMPLEDT1",121,0)
 Q
"RTN","GMPLEDT1",122,0)
ICD ; Edit ICD-9-CM Code - field .01
"RTN","GMPLEDT1",123,0)
 N DIC,DIR,X,Y,MSG,DTOUT
"RTN","GMPLEDT1",124,0)
ICD0 ;   Prompt for ICD Code
"RTN","GMPLEDT1",125,0)
 K DIR S DIR(0)="FAO^2:6",DIR("A")=$$EZBLD^DIALOG(1250000.230)
"RTN","GMPLEDT1",126,0)
 S:$P($G(GMPFLD(.01)),U,2)="799.9" DIR("A")=IORVON_$$EZBLD^DIALOG(1250000.230)
"RTN","GMPLEDT1",127,0)
 S:+$G(GMPFLD(.01)) DIR("B")=$P(GMPFLD(.01),U,2)
"RTN","GMPLEDT1",128,0)
 D BLD^DIALOG(1250000.231,,,"DIR(""?"")")
"RTN","GMPLEDT1",129,0)
ICD1 ;   Get ICD Code
"RTN","GMPLEDT1",130,0)
 D ^DIR W IORVOFF I $D(DTOUT)!(Y="^") S GMPQUIT=1 Q
"RTN","GMPLEDT1",131,0)
 I Y?1"^".E D JUMP^GMPLEDT3(Y) Q:$D(GMPQUIT)!($G(GMPLJUMP))  K:$G(GMPIFN) GMPLJUMP G ICD1
"RTN","GMPLEDT1",132,0)
 I X="@" D  G ICD1
"RTN","GMPLEDT1",133,0)
 . D BLD^DIALOG(1250000.232,,,"MSG")
"RTN","GMPLEDT1",134,0)
 . D EN^DDIOL($C(7))
"RTN","GMPLEDT1",135,0)
 . D EN^DDIOL(.MSG)
"RTN","GMPLEDT1",136,0)
 Q:X=""  Q:$P($G(GMPFLD(.01)),U,2)=Y
"RTN","GMPLEDT1",137,0)
 S DIC=80,DIC(0)="EQM" D ^DIC G:Y'>0 ICD0
"RTN","GMPLEDT1",138,0)
 S GMPFLD(.01)=Y
"RTN","GMPLEDT1",139,0)
 Q
"RTN","GMPLEDT1",140,0)
NOTE ; Attach a note to problem - field 11
"RTN","GMPLEDT1",141,0)
 N X,Y,I,DEFAULT,PROMPT,DONE,NXT,NCNT,MSG S (I,NCNT,DONE)=0
"RTN","GMPLEDT1",142,0)
 ; added for Code Set Versioning (CSV)
"RTN","GMPLEDT1",143,0)
 I $G(GMPICD),'+$$STATCHK^ICDAPIU(GMPICD,DT) D  Q
"RTN","GMPLEDT1",144,0)
 . D BLD^DIALOG(1250000.233,,,"MSG")
"RTN","GMPLEDT1",145,0)
 . D EN^DDIOL(.MSG)
"RTN","GMPLEDT1",146,0)
 .H 3
"RTN","GMPLEDT1",147,0)
 I $G(GMPIFN),'$$CODESTS^GMPLX(GMPIFN,DT) D  Q
"RTN","GMPLEDT1",148,0)
 . D BLD^DIALOG(1250000.233,,,"MSG")
"RTN","GMPLEDT1",149,0)
 . D EN^DDIOL(.MSG)
"RTN","GMPLEDT1",150,0)
 . H 3
"RTN","GMPLEDT1",151,0)
 F  D  Q:$D(GMPQUIT)!($G(GMPLJUMP))!DONE
"RTN","GMPLEDT1",152,0)
 . S NXT=$O(GMPFLD(10,"NEW",I)) S:'NXT NXT=I+1
"RTN","GMPLEDT1",153,0)
 . S I=NXT,NCNT=NCNT+1
"RTN","GMPLEDT1",154,0)
 . S PROMPT=$$EZBLD^DIALOG($S(NCNT=1:1250000.234,1:1250000.235)),DEFAULT=$G(GMPFLD(10,"NEW",I))
"RTN","GMPLEDT1",155,0)
 . D EDNOTE^GMPLEDT4 Q:$D(GMPQUIT)!($G(GMPLJUMP))
"RTN","GMPLEDT1",156,0)
 . I X="@" K GMPFLD(10,"NEW",I) Q
"RTN","GMPLEDT1",157,0)
 . I Y="" S DONE=1 Q
"RTN","GMPLEDT1",158,0)
 . S GMPFLD(10,"NEW",I)=Y
"RTN","GMPLEDT1",159,0)
 Q
"RTN","GMPLEDT1",160,0)
TERM ; Edit Problem - field 1.01
"RTN","GMPLEDT1",161,0)
 G TERM^GMPLEDT4
"RTN","GMPLEDT1",162,0)
 Q
"RTN","GMPLEDT1",163,0)
Q ; No Editing
"RTN","GMPLEDT1",164,0)
 Q
"RTN","GMPLEDT2")
0^33^B23723597
"RTN","GMPLEDT2",1,0)
GMPLEDT2 ; SLC/MKB/KER -- Problem List edit actions ; 03/28/12
"RTN","GMPLEDT2",2,0)
 ;;2.0;Problem List;**26,35,260002**;Aug 25, 1994;Build 26
"RTN","GMPLEDT2",3,0)
 ;
"RTN","GMPLEDT2",4,0)
 ; External References
"RTN","GMPLEDT2",5,0)
 ;   DBIA 10060  ^VA(200
"RTN","GMPLEDT2",6,0)
 ;   DBIA 10003  ^%DT
"RTN","GMPLEDT2",7,0)
 ;   DBIA 10006  ^DIC
"RTN","GMPLEDT2",8,0)
 ;   DBIA 10026  ^DIR
"RTN","GMPLEDT2",9,0)
 ;   DBIA 10103  $$HTFM^XLFDT
"RTN","GMPLEDT2",10,0)
 ;   DBIA 10104  $$UP^XLFSTR
"RTN","GMPLEDT2",11,0)
 ;                   
"RTN","GMPLEDT2",12,0)
EDITED() ; Returns 1 if problem has been altered
"RTN","GMPLEDT2",13,0)
 N FLD,NOTE,DIFFRENT S DIFFRENT=0
"RTN","GMPLEDT2",14,0)
 F FLD=0:0 S FLD=$O(GMPORIG(FLD)) Q:(FLD'>0)!(FLD'<10)  I GMPORIG(FLD)'=GMPFLD(FLD) S DIFFRENT=1 Q
"RTN","GMPLEDT2",15,0)
 G:DIFFRENT EDQ
"RTN","GMPLEDT2",16,0)
 I $D(GMPFLD(10,"NEW"))>9 S DIFFRENT=1 G EDQ
"RTN","GMPLEDT2",17,0)
 F NOTE=0:0 S NOTE=$O(GMPORIG(10,NOTE)) Q:NOTE'>0  I $P(GMPORIG(10,NOTE),U,3)'=$P(GMPFLD(10,NOTE),U,3) S DIFFRENT=1 Q
"RTN","GMPLEDT2",18,0)
EDQ Q DIFFRENT
"RTN","GMPLEDT2",19,0)
 ;
"RTN","GMPLEDT2",20,0)
SUREDEL(NUM) ; -- sure you want to delete problems?
"RTN","GMPLEDT2",21,0)
 N DIR,X,Y,MSG
"RTN","GMPLEDT2",22,0)
 D:NUM=1 BLD^DIALOG(1250000.236,,,"MSG")
"RTN","GMPLEDT2",23,0)
 D:NUM'=1 BLD^DIALOG(1250000.237,NUM,,"MSG")
"RTN","GMPLEDT2",24,0)
 D EN^DDIOL(.MSG)
"RTN","GMPLEDT2",25,0)
 S DIR(0)="YA",DIR("B")="NO"
"RTN","GMPLEDT2",26,0)
 D BLD^DIALOG(1250000.238,,,"DIR(""A"")")
"RTN","GMPLEDT2",27,0)
 D BLD^DIALOG($S(NUM=1:1250000.239,1:250000.240),,,"DIR(""?"")")
"RTN","GMPLEDT2",28,0)
 D EN^DDIOL($C(7),,"?0")
"RTN","GMPLEDT2",29,0)
 D ^DIR
"RTN","GMPLEDT2",30,0)
 Q +Y
"RTN","GMPLEDT2",31,0)
 ;
"RTN","GMPLEDT2",32,0)
DELETE ; Remove current problem from patient's list
"RTN","GMPLEDT2",33,0)
 N DELETED,MSG,%
"RTN","GMPLEDT2",34,0)
 S VALMBCK=$S(VALMCC:"",1:"R")
"RTN","GMPLEDT2",35,0)
 Q:'$$SUREDEL(1)
"RTN","GMPLEDT2",36,0)
 S %=$$DELETE^GMPLAPI2(.DELETED,GMPIFN,+$G(GMPROV))
"RTN","GMPLEDT2",37,0)
 I 'DELETED W $$ERRTXT^GMPLAPIE(DELETED) H 2 Q
"RTN","GMPLEDT2",38,0)
 S GMPSAVED=1
"RTN","GMPLEDT2",39,0)
 S VALMBCK="Q"
"RTN","GMPLEDT2",40,0)
 D BLD^DIALOG(1250000.241,,,"MSG")
"RTN","GMPLEDT2",41,0)
 D EN^DDIOL(.MSG)
"RTN","GMPLEDT2",42,0)
 H 1
"RTN","GMPLEDT2",43,0)
 Q
"RTN","GMPLEDT2",44,0)
 ;
"RTN","GMPLEDT2",45,0)
VERIFY ; Mark current problem as verified
"RTN","GMPLEDT2",46,0)
 N MSG
"RTN","GMPLEDT2",47,0)
 I GMPFLD(1.02)'="T" D  H 1 Q
"RTN","GMPLEDT2",48,0)
 . D BLD^DIALOG(1250000.242,,,"MSG")
"RTN","GMPLEDT2",49,0)
 . D EN^DDIOL($C(7))
"RTN","GMPLEDT2",50,0)
 . D EN^DDIOL(.MSG)
"RTN","GMPLEDT2",51,0)
 S GMPFLD(1.02)="P" D EN^DDIOL(".")
"RTN","GMPLEDT2",52,0)
 D EN^DDIOL($$EZBLD^DIALOG(1250000.243),,"?0") H 1
"RTN","GMPLEDT2",53,0)
 Q
"RTN","GMPLEDT2",54,0)
 ;
"RTN","GMPLEDT2",55,0)
NPERSON ; look up into #200, given PROMPT,HELPMSG,DEFAULT (returns X, Y)
"RTN","GMPLEDT2",56,0)
 N DIC
"RTN","GMPLEDT2",57,0)
NP N DIR
"RTN","GMPLEDT2",58,0)
 S DIR(0)="FA"
"RTN","GMPLEDT2",59,0)
 S DIR("A")=PROMPT_$S(+DEFAULT:$P(DEFAULT,U,2)_"//",1:"")
"RTN","GMPLEDT2",60,0)
 D ^DIR
"RTN","GMPLEDT2",61,0)
 I $D(DTOUT)!(X="^") S GMPQUIT=1 Q
"RTN","GMPLEDT2",62,0)
 I X?1"^".E D JUMP^GMPLEDT3(X) Q:$D(GMPQUIT)!($G(GMPLJUMP))  K:$G(GMPIFN) GMPLJUMP G NP
"RTN","GMPLEDT2",63,0)
 I X="" S Y=DEFAULT Q
"RTN","GMPLEDT2",64,0)
 I X="@" G:'$$SURE^GMPLX NP S Y="" Q
"RTN","GMPLEDT2",65,0)
 I X="?" W !!,HELPMSG,! G NP
"RTN","GMPLEDT2",66,0)
 I X["??" D NPHELP G NP
"RTN","GMPLEDT2",67,0)
 S DIC="^VA(200,",DIC(0)="EMQ" D ^DIC
"RTN","GMPLEDT2",68,0)
 I Y'>0 D  G NP
"RTN","GMPLEDT2",69,0)
 . D EN^DDIOL(HELPMSG,,"!!")
"RTN","GMPLEDT2",70,0)
 . D EN^DDIOL($C(7))
"RTN","GMPLEDT2",71,0)
 Q
"RTN","GMPLEDT2",72,0)
 ;
"RTN","GMPLEDT2",73,0)
NPHELP ; List names in New Person file
"RTN","GMPLEDT2",74,0)
 N NM,CNT,I,Y,DIR,X S CNT=0,(NM,Y)=""
"RTN","GMPLEDT2",75,0)
 D EN^DDIOL($$EZBLD^DIALOG(1250000.244))
"RTN","GMPLEDT2",76,0)
 F  S NM=$O(^VA(200,"B",NM)) Q:NM=""  D  Q:Y'=""
"RTN","GMPLEDT2",77,0)
 . S CNT=CNT+1 I '(CNT#9) D  Q:Y="^"
"RTN","GMPLEDT2",78,0)
 . . D BLD^DIALOG(1250000.245,,,"DIR(""A"")")
"RTN","GMPLEDT2",79,0)
 . . S DIR(0)="EA"
"RTN","GMPLEDT2",80,0)
 . . D ^DIR
"RTN","GMPLEDT2",81,0)
 . . S Y=X
"RTN","GMPLEDT2",82,0)
 . . S:$D(DTOUT) Y="^"
"RTN","GMPLEDT2",83,0)
 . S I=$O(^VA(200,"B",NM,0)) D EN^DDIOL("   "_$P($G(^VA(200,I,0)),U))
"RTN","GMPLEDT2",84,0)
 D EN^DDIOL("",,"!")
"RTN","GMPLEDT2",85,0)
 Q
"RTN","GMPLEDT2",86,0)
 ;
"RTN","GMPLEDT2",87,0)
DATE ; Edit date fields given PROMPT,HELPMSG,DEFAULT (ret'ns X,Y)
"RTN","GMPLEDT2",88,0)
 N %DT,DIR,MSG S %DT="EP"
"RTN","GMPLEDT2",89,0)
D1 ;
"RTN","GMPLEDT2",90,0)
 K DIR
"RTN","GMPLEDT2",91,0)
 S DIR(0)="DA"
"RTN","GMPLEDT2",92,0)
 S DIR("A")=PROMPT_$S(+DEFAULT:$P(DEFAULT,U,2)_"//",1:"")
"RTN","GMPLEDT2",93,0)
 D ^DIR
"RTN","GMPLEDT2",94,0)
 I $D(DTOUT)!(X="^") S GMPQUIT=1 Q
"RTN","GMPLEDT2",95,0)
 I X?1"^".E D JUMP^GMPLEDT3(X) Q:$D(GMPQUIT)!($G(GMPLJUMP))  K:$G(GMPIFN) GMPLJUMP G D1
"RTN","GMPLEDT2",96,0)
 I X="" S Y=DEFAULT Q
"RTN","GMPLEDT2",97,0)
 I X="@" G:'$$SURE^GMPLX D1 S Y="" Q
"RTN","GMPLEDT2",98,0)
 I X="?" W !!,HELPMSG,! G D1
"RTN","GMPLEDT2",99,0)
 I X["??" D DTHELP G D1
"RTN","GMPLEDT2",100,0)
 D ^%DT I Y<1 D  G D1
"RTN","GMPLEDT2",101,0)
 . D EN^DDIOL($$EZBLD^DIALOG(1250000.246))
"RTN","GMPLEDT2",102,0)
 . D DTHELP
"RTN","GMPLEDT2",103,0)
 . D EN^DDIOL(HELPMSG)
"RTN","GMPLEDT2",104,0)
 I Y>DT D  G D1
"RTN","GMPLEDT2",105,0)
 . D BLD^DIALOG(1250000.247,,,"MSG")
"RTN","GMPLEDT2",106,0)
 . D EN^DDIOL(.MSG)
"RTN","GMPLEDT2",107,0)
 . D EN^DDIOL($C(7))
"RTN","GMPLEDT2",108,0)
 Q
"RTN","GMPLEDT2",109,0)
 ;
"RTN","GMPLEDT2",110,0)
DTHELP ; Date help
"RTN","GMPLEDT2",111,0)
 N MSG
"RTN","GMPLEDT2",112,0)
 D BLD^DIALOG(1250000.248,,,"MSG")
"RTN","GMPLEDT2",113,0)
 D EN^DDIOL(.MSG)
"RTN","GMPLEDT2",114,0)
 Q
"RTN","GMPLEDT2",115,0)
 ;
"RTN","GMPLEDT2",116,0)
SPEXP ; Edit Fields 1.11, 1.12, 1.13, 1.15, 1.16, 1.17, 1.18
"RTN","GMPLEDT2",117,0)
 D:GMPAGTOR SP(1.11,1250000.249) Q:$D(GMPQUIT)!($G(GMPLJUMP))
"RTN","GMPLEDT2",118,0)
 S:$G(GMPFLD(1.11)) $P(GMPFLD(1.11),U,2)="AGENT ORANGE"
"RTN","GMPLEDT2",119,0)
 D:GMPION SP(1.12,1250000.250) Q:$D(GMPQUIT)!($G(GMPLJUMP))
"RTN","GMPLEDT2",120,0)
 S:$G(GMPFLD(1.12)) $P(GMPFLD(1.12),U,2)="RADIATION"
"RTN","GMPLEDT2",121,0)
 D:GMPGULF SP(1.13,1250000.251) Q:$D(GMPQUIT)!($G(GMPLJUMP))
"RTN","GMPLEDT2",122,0)
 S:$G(GMPFLD(1.13)) $P(GMPFLD(1.13),U,2)="ENV CONTAMINANTS"
"RTN","GMPLEDT2",123,0)
 D:GMPHNC SP(1.15,1250000.252) Q:$D(GMPQUIT)!($G(GMPLJUMP))
"RTN","GMPLEDT2",124,0)
 S:$G(GMPFLD(1.15)) $P(GMPFLD(1.15),U,2)="HEAD/NECK CANCER"
"RTN","GMPLEDT2",125,0)
 D:GMPMST SP(1.16,1250000.253) Q:$D(GMPQUIT)!($G(GMPLJUMP))
"RTN","GMPLEDT2",126,0)
 S:$G(GMPFLD(1.16)) $P(GMPFLD(1.16),U,2)="MIL SEXUAL TRAUMA"
"RTN","GMPLEDT2",127,0)
 D:GMPCV SP(1.17,1250000.254) Q:$D(GMPQUIT)!($G(GMPLJUMP))
"RTN","GMPLEDT2",128,0)
 S:$G(GMPFLD(1.17)) $P(GMPFLD(1.17),U,2)="COMBAT VET"
"RTN","GMPLEDT2",129,0)
 D:GMPSHD SP(1.18,1250000.255) Q:$D(GMPQUIT)!($G(GMPLJUMP))
"RTN","GMPLEDT2",130,0)
 S:$G(GMPFLD(1.18)) $P(GMPFLD(1.18),U,2)="SHAD"
"RTN","GMPLEDT2",131,0)
 Q
"RTN","GMPLEDT2",132,0)
SP(FLD,NAME) ; edit exposure fields -- Requires FLD number & field NAME
"RTN","GMPLEDT2",133,0)
 N DIR,X,Y,GMPLN S DIR(0)="YAO" ;,GMPLN=$$UP^XLFSTR(NAME)
"RTN","GMPLEDT2",134,0)
 D BLD^DIALOG(NAME,,,"DIR(""A"")")
"RTN","GMPLEDT2",135,0)
 D BLD^DIALOG(NAME+.007,,,"DIR(""?"")")
"RTN","GMPLEDT2",136,0)
 S:$L($G(GMPFLD(FLD))) DIR("B")=$S(+GMPFLD(FLD):"YES",1:"NO")
"RTN","GMPLEDT2",137,0)
SP1 D ^DIR I $D(DTOUT)!(Y="^") S GMPQUIT=1 Q
"RTN","GMPLEDT2",138,0)
 I Y?1"^".E D JUMP^GMPLEDT3(Y) Q:$D(GMPQUIT)!($G(GMPLJUMP))  K:$G(GMPIFN) GMPLJUMP G SP1
"RTN","GMPLEDT2",139,0)
 I X="@" G:'$$SURE^GMPLX SP1 S Y=""
"RTN","GMPLEDT2",140,0)
 S GMPFLD(FLD)=Y S:Y'="" GMPFLD(FLD)=GMPFLD(FLD)_U_$S(Y:"YES",1:"NO")
"RTN","GMPLEDT2",141,0)
 Q
"RTN","GMPLEDT3")
0^34^B19132653
"RTN","GMPLEDT3",1,0)
GMPLEDT3 ; SLC/MKB/KER -- Problem List edit utilities ; 09/14/12
"RTN","GMPLEDT3",2,0)
 ;;2.0;Problem List;**26,35,260002**;Aug 25, 1994;Build 26
"RTN","GMPLEDT3",3,0)
 ;
"RTN","GMPLEDT3",4,0)
 ; External References
"RTN","GMPLEDT3",5,0)
 ;   DBIA   872  ^ORD(101
"RTN","GMPLEDT3",6,0)
 ;   DBIA 10026  ^XUSEC("GMPL ICD CODE"
"RTN","GMPLEDT3",7,0)
 ;   DBIA 10015  EN^DIQ1
"RTN","GMPLEDT3",8,0)
 ;   DBIA 10026  ^DIR
"RTN","GMPLEDT3",9,0)
 ;   DBIA 10104  $$UP^XLFSTR
"RTN","GMPLEDT3",10,0)
 ;                     
"RTN","GMPLEDT3",11,0)
MSG() ; List Manager Message Bar
"RTN","GMPLEDT3",12,0)
 Q $$EZBLD^DIALOG(1250000.263)
"RTN","GMPLEDT3",13,0)
 ;
"RTN","GMPLEDT3",14,0)
KEYS ; Setup XQORM("KEY") array
"RTN","GMPLEDT3",15,0)
 ;   Numbers ref'd also in IN4^-EDIT, NTES^-EDT4
"RTN","GMPLEDT3",16,0)
 N I,PROTCL,NUM,ICD
"RTN","GMPLEDT3",17,0)
 S ICD=$$KCHK^XUSRB("GMPL ICD CODE")
"RTN","GMPLEDT3",18,0)
 S XQORM("KEY","1")=$$PROTKEY^GMPLEXT("GMPL EDIT REFORMULATE")_"^1"
"RTN","GMPLEDT3",19,0)
 S XQORM("KEY","2")=$$PROTKEY^GMPLEXT("GMPL EDIT ONSET")_"^1"
"RTN","GMPLEDT3",20,0)
 S XQORM("KEY","3")=$$PROTKEY^GMPLEXT("GMPL EDIT STATUS")_"^1"
"RTN","GMPLEDT3",21,0)
 S XQORM("KEY","4")=$$PROTKEY^GMPLEXT("GMPL EDIT PROVIDER")_"^1"
"RTN","GMPLEDT3",22,0)
 S XQORM("KEY","5")=$$PROTKEY^GMPLEXT("GMPL EDIT SERVICE")_"^1",NUM=5
"RTN","GMPLEDT3",23,0)
 S:ICD XQORM("KEY","6")=$$PROTKEY^GMPLEXT("GMPL EDIT ICD")_"^1",NUM=6
"RTN","GMPLEDT3",24,0)
 I GMPVA D
"RTN","GMPLEDT3",25,0)
 . S NUM=NUM+1,XQORM("KEY",NUM)=$$PROTKEY^GMPLEXT("GMPL EDIT SC")_"^1"
"RTN","GMPLEDT3",26,0)
 . S NUM=NUM+1,XQORM("KEY",NUM)=$$PROTKEY^GMPLEXT("GMPL EDIT SP")_"^1"
"RTN","GMPLEDT3",27,0)
 S PROTCL=$$PROTKEY^GMPLEXT("GMPL EDIT NOTES")_"^1"
"RTN","GMPLEDT3",28,0)
 I GMPFLD(10,0) F I=1:1:GMPFLD(10,0) S NUM=NUM+1,XQORM("KEY",NUM)=PROTCL
"RTN","GMPLEDT3",29,0)
 S XQORM("KEY",NUM+1)=$$PROTKEY^GMPLEXT("GMPL EDIT NEW NOTE")_"^1"
"RTN","GMPLEDT3",30,0)
 S:$G(GMPARAM("VER"))&$D(GMPLUSER) XQORM("KEY","$")=$$PROTKEY^GMPLEXT("GMPL EDIT VERIFY")_"^1"
"RTN","GMPLEDT3",31,0)
 S XQORM("KEY","=")=$$PROTKEY^GMPLEXT("VALM NEXT SCREEN")_"^1"
"RTN","GMPLEDT3",32,0)
 S VALMSG=$$MSG
"RTN","GMPLEDT3",33,0)
 Q
"RTN","GMPLEDT3",34,0)
 ;
"RTN","GMPLEDT3",35,0)
GETFLDS(DA) ; Define GMPFLD(#) and GMPORIG(#) Arrays with Current Values
"RTN","GMPLEDT3",36,0)
 N MGR
"RTN","GMPLEDT3",37,0)
 K GMPORIG,GMPFLD
"RTN","GMPLEDT3",38,0)
 I '$$DETAIL^GMPLAPI2(.GMPORIG,DA,$S('$D(GMPLMGR):+GMPROV,1:"")) K GMPORIG Q
"RTN","GMPLEDT3",39,0)
 M GMPFLD=GMPORIG
"RTN","GMPLEDT3",40,0)
 Q
"RTN","GMPLEDT3",41,0)
 ;
"RTN","GMPLEDT3",42,0)
FLDS ; Define GMPFLD("FLD") Array for Editing
"RTN","GMPLEDT3",43,0)
 S (GMPFLD("FLD",2),GMPFLD("FLD",6),GMPFLD("FLD",7))="Q"
"RTN","GMPLEDT3",44,0)
 S GMPFLD("FLD",1)="TERM",GMPFLD("FLD","PROBLEM")=1
"RTN","GMPLEDT3",45,0)
 S:$$KCHK^XUSRB("GMPL ICD CODE") GMPFLD("FLD",2)="ICD",GMPFLD("FLD","ICD CODE")=2
"RTN","GMPLEDT3",46,0)
 S GMPFLD("FLD",3)="NOTE",GMPFLD("FLD","COMMENT")=3
"RTN","GMPLEDT3",47,0)
 S GMPFLD("FLD",4)="ONSET",GMPFLD("FLD","DATE OF ONSET")=4
"RTN","GMPLEDT3",48,0)
 S GMPFLD("FLD",5)="STATUS",GMPFLD("FLD","STATUS")=5
"RTN","GMPLEDT3",49,0)
 S:GMPSC GMPFLD("FLD",6)="SC",GMPFLD("FLD","IS THIS PROBLEM RELATED TO A SERVICE-CONNECTED CONDITION?")=6
"RTN","GMPLEDT3",50,0)
 S:GMPAGTOR GMPFLD("FLD",7)="SP",GMPFLD("FLD","IS THIS PROBLEM RELATED TO AGENT ORANGE EXPOSURE?")=7
"RTN","GMPLEDT3",51,0)
 S:GMPION GMPFLD("FLD",7)="SP",GMPFLD("FLD","IS THIS PROBLEM RELATED TO RADIATION EXPOSURE?")=7
"RTN","GMPLEDT3",52,0)
 S:GMPGULF GMPFLD("FLD",7)="SP",GMPFLD("FLD","IS THIS PROBLEM RELATED TO ENVIRONMENTAL CONTAMINANTS EXPOSURE?")=7
"RTN","GMPLEDT3",53,0)
 S:GMPHNC GMPFLD("FLD",7)="SP",GMPFLD("FLD","IS THIS PROBLEM RELATED TO DIAGNOSED HEAD AND/OR NECK CANCER?")=7
"RTN","GMPLEDT3",54,0)
 S:GMPMST GMPFLD("FLD",7)="SP",GMPFLD("FLD","IS THIS PROBLEM RELATED TO REPORTED MILITARY SEXUAL TRAUMA?")=7
"RTN","GMPLEDT3",55,0)
 S:GMPCV GMPFLD("FLD",7)="SP",GMPFLD("FLD","IS THIS PROBLEM RELATED TO REPORTED COMBAT VET?")=7
"RTN","GMPLEDT3",56,0)
 S:GMPSHD GMPFLD("FLD",7)="SP",GMPFLD("FLD","IS THIS PROBLEM RELATED TO REPORTED SHIPBOARD HAZARD AND DEFENSE?")=7
"RTN","GMPLEDT3",57,0)
 S GMPFLD("FLD",8)="PROV",GMPFLD("FLD","RESPONSIBLE PROVIDER")=8
"RTN","GMPLEDT3",58,0)
 S GMPFLD("FLD",9)="SOURCE"
"RTN","GMPLEDT3",59,0)
 S:$E(GMPLVIEW("VIEW"))="C" GMPFLD("FLD","CLINIC")=9
"RTN","GMPLEDT3",60,0)
 S:$E(GMPLVIEW("VIEW"))'="C" GMPFLD("FLD","SERVICE")=9
"RTN","GMPLEDT3",61,0)
 S GMPFLD("FLD",10)="RECORDED",GMPFLD("FLD","DATE RECORDED")=10
"RTN","GMPLEDT3",62,0)
 S GMPFLD("FLD",11)="AUTHOR",GMPFLD("FLD","RECORDING PROVIDER")=11
"RTN","GMPLEDT3",63,0)
 S GMPFLD("FLD",0)=11
"RTN","GMPLEDT3",64,0)
 Q
"RTN","GMPLEDT3",65,0)
 ;
"RTN","GMPLEDT3",66,0)
JUMP(XFLD) ; Resolve ^- Jump Out of Field Order in Edit
"RTN","GMPLEDT3",67,0)
 N I,MATCH,CNT,PROMPT,DIR,X,Y
"RTN","GMPLEDT3",68,0)
 ;   Passed in as ^XXX
"RTN","GMPLEDT3",69,0)
 S XFLD=$$UP^XLFSTR($P(XFLD,U,2))
"RTN","GMPLEDT3",70,0)
 I (XFLD="")!(XFLD["^") S GMPQUIT=1 Q
"RTN","GMPLEDT3",71,0)
 I '$D(GMPLJUMP) D EN^DDIOL($C(7)_$$EZBLD^DIALOG(1250000.264),,"?0") S GMPLJUMP=0 Q
"RTN","GMPLEDT3",72,0)
 ;   Field is Exact
"RTN","GMPLEDT3",73,0)
 I $G(GMPFLD("FLD",XFLD)) S GMPLJUMP=GMPFLD("FLD",XFLD) Q
"RTN","GMPLEDT3",74,0)
 S CNT=0,PROMPT=" "
"RTN","GMPLEDT3",75,0)
 F  S PROMPT=$O(GMPFLD("FLD",PROMPT)) Q:PROMPT=""  D
"RTN","GMPLEDT3",76,0)
 . Q:$E(PROMPT,1,$L(XFLD))'=XFLD
"RTN","GMPLEDT3",77,0)
 . S CNT=CNT+1,MATCH(CNT)=GMPFLD("FLD",PROMPT)_U_PROMPT
"RTN","GMPLEDT3",78,0)
 I CNT=0 W $C(7),"  ??" Q
"RTN","GMPLEDT3",79,0)
 I CNT=1 S PROMPT=$P(MATCH(1),U,2),GMPLJUMP=+MATCH(1) W $E(PROMPT,$L(XFLD)+1,$L(PROMPT)) Q
"RTN","GMPLEDT3",80,0)
 ;   Select which Field to Jump To.
"RTN","GMPLEDT3",81,0)
 F I=1:1:CNT S DIR("A",I)=I_"  "_$P(MATCH(I),U,2)
"RTN","GMPLEDT3",82,0)
 S DIR(0)="NAO^1:"_CNT
"RTN","GMPLEDT3",83,0)
 D BLD^DIALOG(1250000.265,CNT,,"DIR(""A"")")
"RTN","GMPLEDT3",84,0)
 D BLD^DIALOG(1250000.266,,,"DIR(""?"")")
"RTN","GMPLEDT3",85,0)
 D ^DIR I $D(DTOUT)!($D(DUOUT))!(Y="") Q
"RTN","GMPLEDT3",86,0)
 S GMPLJUMP=+MATCH(+Y)
"RTN","GMPLEDT3",87,0)
 Q
"RTN","GMPLEDT3",88,0)
 ;
"RTN","GMPLEDT3",89,0)
CK ; Check whether to Stop Processing
"RTN","GMPLEDT3",90,0)
 ;   Called from Exit Action of GMPL EDIT XXX Protocols
"RTN","GMPLEDT3",91,0)
 S:$D(GMPQUIT) XQORPOP=1 S:'$D(GMPQUIT) GMPREBLD=1 K GMPQUIT
"RTN","GMPLEDT3",92,0)
 I $D(DTOUT)!($G(VALMBCK)="Q") S VALMBCK="Q" Q
"RTN","GMPLEDT3",93,0)
 S VALMBCK="R",VALMSG=$$MSG
"RTN","GMPLEDT3",94,0)
 Q
"RTN","GMPLEDT4")
0^35^B13662429
"RTN","GMPLEDT4",1,0)
GMPLEDT4 ; SLC/MKB -- Problem List Edit actions cont ;09/14/12
"RTN","GMPLEDT4",2,0)
 ;;2.0;Problem List;**5,260002**;Aug 25, 1994;Build 26
"RTN","GMPLEDT4",3,0)
TERM ; edit field 1.01
"RTN","GMPLEDT4",4,0)
 N PROB,TERM,ICD,DUP,Y,MSG
"RTN","GMPLEDT4",5,0)
T1 D EN^DDIOL($$EZBLD^DIALOG(1250000.267,$P(GMPFLD(.05),U,2)))
"RTN","GMPLEDT4",6,0)
 R PROB:DTIME S:'$T DTOUT=1 I $D(DTOUT)!(PROB="^") S GMPQUIT=1 Q
"RTN","GMPLEDT4",7,0)
 I PROB?1"^".E D JUMP^GMPLEDT3(PROB) Q:$D(GMPQUIT)!($G(GMPLJUMP))  K:$G(GMPIFN) GMPLJUMP G T1
"RTN","GMPLEDT4",8,0)
 Q:PROB=""  Q:PROB=$P(GMPFLD(.05),U,2)  ; no change
"RTN","GMPLEDT4",9,0)
 I PROB["?" D  G T1
"RTN","GMPLEDT4",10,0)
 . K MSG
"RTN","GMPLEDT4",11,0)
 . D BLD^DIALOG(1250000.268,,,"MSG")
"RTN","GMPLEDT4",12,0)
 . D EN^DDIOL(.MSG)
"RTN","GMPLEDT4",13,0)
 I PROB="@",'+$G(GMPIFN) D  S GMPQUIT=1 Q
"RTN","GMPLEDT4",14,0)
 . K MSG
"RTN","GMPLEDT4",15,0)
 . D BLD^DIALOG(1250000.269,,,"MSG")
"RTN","GMPLEDT4",16,0)
 . D EN^DDIOL($C(7)_$C(7))
"RTN","GMPLEDT4",17,0)
 . D EN^DDIOL(.MSG)
"RTN","GMPLEDT4",18,0)
 . K DIR
"RTN","GMPLEDT4",19,0)
 . D BLD^DIALOG(1250000.270,"DIR(""A"")")
"RTN","GMPLEDT4",20,0)
 . S DIR(0)="E" D ^DIR K DIR
"RTN","GMPLEDT4",21,0)
 I PROB="@" D DELETE^GMPLEDT2 S:VALMBCK="Q" GMPQUIT=1 Q:$D(GMPQUIT)  G T1
"RTN","GMPLEDT4",22,0)
T2 ; new text -- pass to look-up
"RTN","GMPLEDT4",23,0)
 I '$D(GMPLUSER)!($D(GMPLUSER)&('GMPARAM("CLU"))) S GMPFLD(1.01)="",GMPFLD(.05)=U_PROB Q
"RTN","GMPLEDT4",24,0)
 D SEARCH^GMPLX(.PROB,.Y,$$EZBLD^DIALOG(1250000.271),"1") ; pass to CLU
"RTN","GMPLEDT4",25,0)
 S TERM=$G(Y),ICD=$G(Y(1)) I +TERM'>0 S GMPQUIT=1 Q
"RTN","GMPLEDT4",26,0)
 N %
"RTN","GMPLEDT4",27,0)
 S %=$$DUPL^GMPLAPI2(.DUP,+GMPDFN,+TERM,PROB,0)
"RTN","GMPLEDT4",28,0)
 I DUP,'$$DUPLOK^GMPLX(DUP) W ! G T1
"RTN","GMPLEDT4",29,0)
 S GMPFLD(1.01)=$S(+TERM>1:TERM,1:""),GMPFLD(.05)=U_PROB
"RTN","GMPLEDT4",30,0)
 S GMPFLD(.01)=$S($L(ICD):$$ICD9KEY^GMPLEXT(ICD)_U_ICD,1:"")
"RTN","GMPLEDT4",31,0)
 S:'GMPFLD(.01) GMPFLD(.01)=$$NOS^GMPLEXT()
"RTN","GMPLEDT4",32,0)
 Q
"RTN","GMPLEDT4",33,0)
 ;
"RTN","GMPLEDT4",34,0)
TEXT(DFLT) ; Enter/edit provider narrative text (no lookup)
"RTN","GMPLEDT4",35,0)
 N DIR,X,Y
"RTN","GMPLEDT4",36,0)
 S DIR(0)="FAO^2:80" S:$L(DFLT) DIR("B")=DFLT
"RTN","GMPLEDT4",37,0)
 D BLD^DIALOG(1250000.271,,,"DIR(""A"")")
"RTN","GMPLEDT4",38,0)
 D BLD^DIALOG(1250000.268,,,"DIR(""?"")")
"RTN","GMPLEDT4",39,0)
 D ^DIR S:$D(DTOUT)!(X="^") Y="^" S:'$L(DFLT)&(X="") Y="^"
"RTN","GMPLEDT4",40,0)
 Q Y
"RTN","GMPLEDT4",41,0)
 ;
"RTN","GMPLEDT4",42,0)
NTES ; Edit existing note, display # in XQORNOD(0)
"RTN","GMPLEDT4",43,0)
 N NUM,NOTE,X,Y,PROMPT,DEFAULT,NT
"RTN","GMPLEDT4",44,0)
 S NT=$S(GMPVA:7,1:5) S:$$KCHK^XUSRB("GMPL ICD CODE") NT=NT+1
"RTN","GMPLEDT4",45,0)
 S NUM=+$P(XQORNOD(0),U,3)-NT Q:NUM'>0
"RTN","GMPLEDT4",46,0)
 S NOTE=GMPFLD(10,NUM),DEFAULT=$P(NOTE,U,3)
"RTN","GMPLEDT4",47,0)
 S PROMPT=$$EZBLD^DIALOG(1250000.272,$$EXTDT^GMPLX($P(NOTE,U,5)))
"RTN","GMPLEDT4",48,0)
 D EDNOTE Q:$D(GMPQUIT)
"RTN","GMPLEDT4",49,0)
 S $P(GMPFLD(10,NUM),U,3)=Y
"RTN","GMPLEDT4",50,0)
 Q
"RTN","GMPLEDT4",51,0)
 ;
"RTN","GMPLEDT4",52,0)
EDNOTE ; Edit note text given PROMPT,DEFAULT (returns X,Y)
"RTN","GMPLEDT4",53,0)
 N DIR,MSG S DIR(0)="FAO^1:100",DIR("A")=PROMPT
"RTN","GMPLEDT4",54,0)
 S:$L(DEFAULT) DIR("B")=DEFAULT
"RTN","GMPLEDT4",55,0)
 D BLD^DIALOG(1250000.273,,,"DIR(""?"")")
"RTN","GMPLEDT4",56,0)
ED1 D ^DIR I $D(DTOUT)!(Y="^") S GMPQUIT=1,Y="" Q
"RTN","GMPLEDT4",57,0)
 I Y?1"^".E D JUMP^GMPLEDT3(Y) Q:$D(GMPQUIT)!($G(GMPLJUMP))  K:$G(GMPIFN) GMPLJUMP G ED1
"RTN","GMPLEDT4",58,0)
 Q:Y=DEFAULT  I X="@" D  Q:$D(GMPQUIT)!(Y="")  G ED1
"RTN","GMPLEDT4",59,0)
 . N DIR,X S DIR(0)="YAO",DIR("B")="NO"
"RTN","GMPLEDT4",60,0)
 . D BLD^DIALOG(1250000.274,,,"DIR(""A"")")
"RTN","GMPLEDT4",61,0)
 . D BLD^DIALOG(1250000.275,,,"DIR(""?"")")
"RTN","GMPLEDT4",62,0)
 . D EN^DDIOL($C(7),,"?0") D ^DIR I $D(DUOUT)!($D(DTOUT)) S GMPQUIT=1,Y="" Q
"RTN","GMPLEDT4",63,0)
 . S:Y Y=""
"RTN","GMPLEDT4",64,0)
 I $L(X)>60 D  G ED1
"RTN","GMPLEDT4",65,0)
 . K MSG
"RTN","GMPLEDT4",66,0)
 . D BLD^DIALOG(1250000.276,,,"MSG")
"RTN","GMPLEDT4",67,0)
 . D EN^DDIOL($C(7),,"?0")
"RTN","GMPLEDT4",68,0)
 . D EN^DDIOL(.MSG)
"RTN","GMPLEDT4",69,0)
 . S DIR("B")=$E(X,1,60)
"RTN","GMPLEDT4",70,0)
 S Y=X
"RTN","GMPLEDT4",71,0)
 Q
"RTN","GMPLEDT4",72,0)
 ;
"RTN","GMPLEDT4",73,0)
RESOLVED ; edit field 1.07
"RTN","GMPLEDT4",74,0)
 N X,Y,PROMPT,HELPMSG,DEFAULT,ONSET,MSG S ONSET=+$G(GMPFLD(.13))
"RTN","GMPLEDT4",75,0)
 S DEFAULT=$G(GMPFLD(1.07)),PROMPT=$$EZBLD^DIALOG(1250000.277)
"RTN","GMPLEDT4",76,0)
 S HELPMSG=$$EZBLD^DIALOG(1250000.278)
"RTN","GMPLEDT4",77,0)
R1 D DATE^GMPLEDT2 Q:$D(GMPQUIT)!($G(GMPLJUMP))
"RTN","GMPLEDT4",78,0)
 I Y,ONSET,Y<ONSET D  G R1
"RTN","GMPLEDT4",79,0)
 . K MSG
"RTN","GMPLEDT4",80,0)
 . D BLD^DIALOG(1250000.279,,,"MSG")
"RTN","GMPLEDT4",81,0)
 . D EN^DDIOL(.MSG)
"RTN","GMPLEDT4",82,0)
 . D EN^DDIOL($C(7))
"RTN","GMPLEDT4",83,0)
 S GMPFLD(1.07)=Y S:Y'="" GMPFLD(1.07)=GMPFLD(1.07)_U_$$EXTDT^GMPLX(Y)
"RTN","GMPLEDT4",84,0)
 Q
"RTN","GMPLEDT4",85,0)
 ;
"RTN","GMPLEDT4",86,0)
PRIORITY ; edit field 1.14
"RTN","GMPLEDT4",87,0)
 N DIR,X,Y
"RTN","GMPLEDT4",88,0)
 S DIR(0)="SAO^A:ACUTE;C:CHRONIC;"
"RTN","GMPLEDT4",89,0)
 D BLD^DIALOG(1250000.280,,,"DIR(""A"")")
"RTN","GMPLEDT4",90,0)
 S:$L($G(GMPFLD(1.14))) DIR("B")=$P(GMPFLD(1.14),U,2)
"RTN","GMPLEDT4",91,0)
 D BLD^DIALOG(1250000.281,,,"DIR(""?"")")
"RTN","GMPLEDT4",92,0)
PR1 D ^DIR I $D(DTOUT)!(Y="^") S GMPQUIT=1 Q
"RTN","GMPLEDT4",93,0)
 I Y?1"^".E D JUMP^GMPLEDT3(Y) Q:$D(GMPQUIT)!($G(GMPLJUMP))  K:$G(GMPIFN) GMPLJUMP G PR1
"RTN","GMPLEDT4",94,0)
 S:Y'="" Y=Y_U_$S(Y="A":"ACUTE",1:"CHRONIC")
"RTN","GMPLEDT4",95,0)
 S GMPFLD(1.14)=Y
"RTN","GMPLEDT4",96,0)
 Q
"RTN","GMPLEDT5")
0^36^B9900642
"RTN","GMPLEDT5",1,0)
GMPLEDT5 ; RGI -- Edit Site parameters ; 8/29/13
"RTN","GMPLEDT5",2,0)
 ;;2.0;Problem List;**260002**;Aug 25, 1994;Build 26
"RTN","GMPLEDT5",3,0)
 Q  ;
"RTN","GMPLEDT5",4,0)
 ;
"RTN","GMPLEDT5",5,0)
CHOOSE(VALUE,PARAMS) ;
"RTN","GMPLEDT5",6,0)
 N DIR,X,X1,Y,IND,OLDVAL,VAL,KEY,SEP,LCNT,HCNT,HIND,DUOUT,DIRUT,DIROUT
"RTN","GMPLEDT5",7,0)
CH ; for recursive call
"RTN","GMPLEDT5",8,0)
 S DIR(0)="SAO^",SEP="",IND="",OLDVAL=""
"RTN","GMPLEDT5",9,0)
 S DIR("L",1)=$$EZBLD^DIALOG(1250000.282),LCNT=1
"RTN","GMPLEDT5",10,0)
 F  S IND=$O(PARAMS("OPT",IND)) Q:IND=""  D
"RTN","GMPLEDT5",11,0)
 . S KEY=$P(PARAMS("OPT",IND),U,1)
"RTN","GMPLEDT5",12,0)
 . S VAL=$P(PARAMS("OPT",IND),U,2)
"RTN","GMPLEDT5",13,0)
 . S LCNT=LCNT+1
"RTN","GMPLEDT5",14,0)
 . S DIR("L",LCNT)="       "_KEY_"        "_VAL
"RTN","GMPLEDT5",15,0)
 . S DIR(0)=DIR(0)_SEP_KEY_":"_VAL
"RTN","GMPLEDT5",16,0)
 . S SEP=";"
"RTN","GMPLEDT5",17,0)
 S IND=0
"RTN","GMPLEDT5",18,0)
 S DIR("L")=DIR("L",LCNT) K DIR("L",LCNT)
"RTN","GMPLEDT5",19,0)
 F  S IND=$O(PARAMS("OPT",IND)) Q:IND=""  D
"RTN","GMPLEDT5",20,0)
 . I $P(PARAMS("OPT",IND),U,1)=VALUE S OLDVAL=$P(PARAMS("OPT",IND),U,2) Q
"RTN","GMPLEDT5",21,0)
 S HCNT=0,HIND=""
"RTN","GMPLEDT5",22,0)
 F  S HIND=$O(PARAMS("H1",HIND)) Q:HIND=""  D
"RTN","GMPLEDT5",23,0)
 . S HCNT=HCNT+1
"RTN","GMPLEDT5",24,0)
 . S DIR("?",HCNT)=PARAMS("H1",HIND)
"RTN","GMPLEDT5",25,0)
 S DIR("?")=PARAMS("H1")
"RTN","GMPLEDT5",26,0)
 S DIR("??")=PARAMS("H2")
"RTN","GMPLEDT5",27,0)
 S DIR("B")=OLDVAL
"RTN","GMPLEDT5",28,0)
 S DIR("A")=PARAMS("FLD")_": "
"RTN","GMPLEDT5",29,0)
 D ^DIR
"RTN","GMPLEDT5",30,0)
 I X="@" S X1=X I $$ASKDEL() S Y=X1  E  G CH
"RTN","GMPLEDT5",31,0)
 I $G(DUOUT),$G(DIRUT),Y'="^",'$G(DIROUT) G CH
"RTN","GMPLEDT5",32,0)
 Q Y
"RTN","GMPLEDT5",33,0)
 ;
"RTN","GMPLEDT5",34,0)
ASKDEL() ;
"RTN","GMPLEDT5",35,0)
 S DIR(0)="YO"
"RTN","GMPLEDT5",36,0)
 D BLD^DIALOG(1250000.283,,,"DIR(""A"")")
"RTN","GMPLEDT5",37,0)
 D BLD^DIALOG(1250000.284,,,"DIR(""?"")")
"RTN","GMPLEDT5",38,0)
 D ^DIR
"RTN","GMPLEDT5",39,0)
 Q Y
"RTN","GMPLEDT5",40,0)
 ;
"RTN","GMPLEDT5",41,0)
SELPAR(FIELD,VALUE) ;
"RTN","GMPLEDT5",42,0)
 N PARAMS,DIR,NEWVAL
"RTN","GMPLEDT5",43,0)
 S PARAMS=""
"RTN","GMPLEDT5",44,0)
 I FIELD="VER" D
"RTN","GMPLEDT5",45,0)
 . S PARAMS("OPT",1)="1^YES"
"RTN","GMPLEDT5",46,0)
 . S PARAMS("OPT",2)="0^NO"
"RTN","GMPLEDT5",47,0)
 . S PARAMS("FLD")=$$EZBLD^DIALOG(1250000.285)
"RTN","GMPLEDT5",48,0)
 . D BLD^DIALOG(1250000.286,,,"DIR(""?"")")
"RTN","GMPLEDT5",49,0)
 I FIELD="PRT" D
"RTN","GMPLEDT5",50,0)
 . S PARAMS("OPT",1)="1^YES, ASK"
"RTN","GMPLEDT5",51,0)
 . S PARAMS("OPT",2)="0^NO, DON'T ASK"
"RTN","GMPLEDT5",52,0)
 . S PARAMS("FLD")=$$EZBLD^DIALOG(1250000.287)
"RTN","GMPLEDT5",53,0)
 . D BLD^DIALOG(1250000.288,,,"DIR(""?"")")
"RTN","GMPLEDT5",54,0)
 I FIELD="CLU" D
"RTN","GMPLEDT5",55,0)
 . S PARAMS("OPT",1)="1^YES"
"RTN","GMPLEDT5",56,0)
 . S PARAMS("OPT",2)="0^NO"
"RTN","GMPLEDT5",57,0)
 . S PARAMS("FLD")=$$EZBLD^DIALOG(1250000.289)
"RTN","GMPLEDT5",58,0)
 . D BLD^DIALOG(1250000.290,,,"DIR(""?"")")
"RTN","GMPLEDT5",59,0)
 I FIELD="REV" D
"RTN","GMPLEDT5",60,0)
 . S PARAMS("OPT",1)="C^CHRONOLOGICAL"
"RTN","GMPLEDT5",61,0)
 . S PARAMS("OPT",2)="R^REVERSE-CHRONOLOGICAL"
"RTN","GMPLEDT5",62,0)
 . S PARAMS("FLD")=$$EZBLD^DIALOG(1250000.291)
"RTN","GMPLEDT5",63,0)
 . D BLD^DIALOG(1250000.292,,,"DIR(""?"")")
"RTN","GMPLEDT5",64,0)
 I FIELD="SDP" D
"RTN","GMPLEDT5",65,0)
 . S PARAMS("OPT",1)="1^YES"
"RTN","GMPLEDT5",66,0)
 . S PARAMS("FLD")=$$EZBLD^DIALOG(1250000.293)
"RTN","GMPLEDT5",67,0)
 . D BLD^DIALOG(1250000.294,,,"DIR(""?"")")
"RTN","GMPLEDT5",68,0)
 M:$D(DIR("?")) PARAMS("H1")=DIR("?")
"RTN","GMPLEDT5",69,0)
 S PARAMS("H2")="^D PARHLP^GMPLEDT5("""_FIELD_""",.PARAMS)"
"RTN","GMPLEDT5",70,0)
 S NEWVAL=$$CHOOSE(VALUE,.PARAMS)
"RTN","GMPLEDT5",71,0)
 Q NEWVAL
"RTN","GMPLEDT5",72,0)
 ;
"RTN","GMPLEDT5",73,0)
PARHLP(FIELD,PARAMS) ;
"RTN","GMPLEDT5",74,0)
 N MSG
"RTN","GMPLEDT5",75,0)
 I FIELD="VER" D
"RTN","GMPLEDT5",76,0)
 . D BLD^DIALOG(1250000.295,,,"MSG")
"RTN","GMPLEDT5",77,0)
 I FIELD="PRT" D
"RTN","GMPLEDT5",78,0)
 . D BLD^DIALOG(1250000.296,,,"MSG")
"RTN","GMPLEDT5",79,0)
 I FIELD="CLU" D
"RTN","GMPLEDT5",80,0)
 . D BLD^DIALOG(1250000.297,,,"MSG")
"RTN","GMPLEDT5",81,0)
 I FIELD="REV" D
"RTN","GMPLEDT5",82,0)
 . D BLD^DIALOG(1250000.298,,,"MSG")
"RTN","GMPLEDT5",83,0)
 I FIELD="SDP" D
"RTN","GMPLEDT5",84,0)
 . D BLD^DIALOG(1250000.299,,,"MSG")
"RTN","GMPLEDT5",85,0)
 D:$D(MSG) EN^DDIOL(.MSG)
"RTN","GMPLEDT5",86,0)
 D EN^DDIOL($$EZBLD^DIALOG(1250000.244),,"!?5")
"RTN","GMPLEDT5",87,0)
 N IND S IND=""
"RTN","GMPLEDT5",88,0)
 F  S IND=$O(PARAMS("OPT",IND)) Q:IND=""  D
"RTN","GMPLEDT5",89,0)
 . D EN^DDIOL($P(PARAMS("OPT",IND),U,1)_"        "_$P(PARAMS("OPT",IND),U,2),,"!?7")
"RTN","GMPLEDT5",90,0)
 Q
"RTN","GMPLEDT5",91,0)
 ;
"RTN","GMPLENFM")
0^37^B9439306
"RTN","GMPLENFM",1,0)
GMPLENFM ; SLC/MKB/KER -- Problem List Enc Form utilities ; 08/29/13
"RTN","GMPLENFM",2,0)
 ;;2.0;Problem List;**3,4,7,26,35,260002**;Aug 25, 1994;Build 26
"RTN","GMPLENFM",3,0)
 ;
"RTN","GMPLENFM",4,0)
 ; External References
"RTN","GMPLENFM",5,0)
 ;   DBIA 10082  ^ICD9(
"RTN","GMPLENFM",6,0)
 ;   DBIA 10006  ^DIC
"RTN","GMPLENFM",7,0)
 ;   DBIA  1609  CONFIG^LEXSET
"RTN","GMPLENFM",8,0)
 ;                    
"RTN","GMPLENFM",9,0)
ACTIVE ; List of Active Problems for DFN
"RTN","GMPLENFM",10,0)
 ;   Sets Global Array:                   
"RTN","GMPLENFM",11,0)
 ;   ^TMP("IB",$J,"INTERFACES",DFN,"GMP PATIENT ACTIVE PROBLEMS",#) =
"RTN","GMPLENFM",12,0)
 ;                      
"RTN","GMPLENFM",13,0)
 ;   Piece 1:  Problem text
"RTN","GMPLENFM",14,0)
 ;         2:  ICD code
"RTN","GMPLENFM",15,0)
 ;         3:  Date of Onset     00/00/00 format
"RTN","GMPLENFM",16,0)
 ;         4:  SC/NSC/""         serv-conn/not sc/unknown
"RTN","GMPLENFM",17,0)
 ;         5:  Y/N/""            serv-conn/not sc/unknown
"RTN","GMPLENFM",18,0)
 ;         6:  A/I/E/H/M/C/S/""      If problem is flagged as:
"RTN","GMPLENFM",19,0)
 ;                               A - Agent Orange
"RTN","GMPLENFM",20,0)
 ;                               I - Ionizing Radiation
"RTN","GMPLENFM",21,0)
 ;                               E - Environmental Contaminants
"RTN","GMPLENFM",22,0)
 ;                               H - Head/Neck Cancer
"RTN","GMPLENFM",23,0)
 ;                               M - Mil Sexual Trauma
"RTN","GMPLENFM",24,0)
 ;                               C - Combat Vet
"RTN","GMPLENFM",25,0)
 ;                               S - SHAD
"RTN","GMPLENFM",26,0)
 ;                                 - None
"RTN","GMPLENFM",27,0)
 ;         7:  Special Exposure  Full text of piece 6
"RTN","GMPLENFM",28,0)
 ;                    
"RTN","GMPLENFM",29,0)
 N GMPL
"RTN","GMPLENFM",30,0)
 Q:'$$FILL(.GMPL,0)
"RTN","GMPLENFM",31,0)
 M ^TMP("IB",$J,"INTERFACES",+$G(DFN),"GMP PATIENT ACTIVE PROBLEMS")=GMPL
"RTN","GMPLENFM",32,0)
 Q
"RTN","GMPLENFM",33,0)
 ;
"RTN","GMPLENFM",34,0)
SELECT ; Select Common Problems
"RTN","GMPLENFM",35,0)
 ;   Sets Global Array:
"RTN","GMPLENFM",36,0)
 ;   ^TMP("IB",$J,"INTERFACES","GMP SELECT CLINIC COMMON PROBLEMS")
"RTN","GMPLENFM",37,0)
 ;   Piece 1:  Pointer to Clinical Lexicon
"RTN","GMPLENFM",38,0)
 ;         2:  Problem Text
"RTN","GMPLENFM",39,0)
 ;         3:  ICD Code (null if unknown)
"RTN","GMPLENFM",40,0)
 ;            
"RTN","GMPLENFM",41,0)
 N X,Y,DIC,PROB D CONFIG^LEXSET("ICD","ICD")
"RTN","GMPLENFM",42,0)
 K ^TMP("IB",$J,"INTERFACES","GMP SELECT CLINIC COMMON PROBLEMS")
"RTN","GMPLENFM",43,0)
 S DIC("A")=$$EZBLD^DIALOG(1250000.301)
"RTN","GMPLENFM",44,0)
 S DIC(0)="AEQM",DIC="^LEX(757.01,"
"RTN","GMPLENFM",45,0)
 D ^DIC Q:+Y<0  S PROB=Y I +Y'>1 S PROB=+Y_U_X
"RTN","GMPLENFM",46,0)
 S PROB=PROB_U_$G(Y(1))
"RTN","GMPLENFM",47,0)
 S ^TMP("IB",$J,"INTERFACES","GMP SELECT CLINIC COMMON PROBLEMS")=PROB
"RTN","GMPLENFM",48,0)
 Q
"RTN","GMPLENFM",49,0)
 ;
"RTN","GMPLENFM",50,0)
DSELECT ; List of Active Problems for DFN
"RTN","GMPLENFM",51,0)
 ;   Sets Global Array"
"RTN","GMPLENFM",52,0)
 ;   ^TMP("IB",$J,"INTERFACES","GMP SELECT PATIENT ACTIVE PROBLEMS",#) =
"RTN","GMPLENFM",53,0)
 ;            
"RTN","GMPLENFM",54,0)
 ;   Piece 1:  Problem IEN
"RTN","GMPLENFM",55,0)
 ;         2:  Problem Text
"RTN","GMPLENFM",56,0)
 ;         3:  ICD code
"RTN","GMPLENFM",57,0)
 ;         4:  Date of Onset     00/00/00 format
"RTN","GMPLENFM",58,0)
 ;         5:  SC/NSC/""         serv-conn/not sc/unknown
"RTN","GMPLENFM",59,0)
 ;         6:  Y/N/""            serv-conn/not sc/unknown
"RTN","GMPLENFM",60,0)
 ;         7:  A/I/E/H/M/C/S/""      If problem is flagged as:
"RTN","GMPLENFM",61,0)
 ;                               A - Agent Orange
"RTN","GMPLENFM",62,0)
 ;                               I - Ionizing Radiation
"RTN","GMPLENFM",63,0)
 ;                               E - Environmental Contaminants
"RTN","GMPLENFM",64,0)
 ;                               H - Head/Neck Cancer
"RTN","GMPLENFM",65,0)
 ;                               M - Mil Sexual Trauma
"RTN","GMPLENFM",66,0)
 ;                               C - Combat Vet
"RTN","GMPLENFM",67,0)
 ;                               S - SHAD
"RTN","GMPLENFM",68,0)
 ;                                 - None
"RTN","GMPLENFM",69,0)
 ;         8:  Special Exposure  Full text of piece 6
"RTN","GMPLENFM",70,0)
 ;               
"RTN","GMPLENFM",71,0)
 N GMPL
"RTN","GMPLENFM",72,0)
 Q:'$$FILL(.GMPL,1)
"RTN","GMPLENFM",73,0)
 M ^TMP("IB",$J,"INTERFACES","GMP SELECT PATIENT ACTIVE PROBLEMS")=GMPL
"RTN","GMPLENFM",74,0)
 Q
"RTN","GMPLENFM",75,0)
 ;
"RTN","GMPLENFM",76,0)
FILL(GMPL,ADDIFN) ;
"RTN","GMPLENFM",77,0)
 N IFN,SC,NUM,GMPLIST,GMPARAM,GMPLVIEW,GMPTOTAL,GMPDFN,SCCOND,ONSET,PROB,%
"RTN","GMPLENFM",78,0)
 Q:$G(DFN)'>0 0
"RTN","GMPLENFM",79,0)
 S GMPDFN=DFN
"RTN","GMPLENFM",80,0)
 D GET^GMPLSITE(.GMPARAM) S GMPARAM("QUIET")=1
"RTN","GMPLENFM",81,0)
 S GMPLVIEW("ACT")="A",GMPLVIEW("PROV")=0,GMPLVIEW("VIEW")=""
"RTN","GMPLENFM",82,0)
 D GETPLIST^GMPLMGR1(.GMPLIST,.GMPTOTAL,.GMPLVIEW)
"RTN","GMPLENFM",83,0)
 S %=$$BUILDLST^GMPLAPI4(.GMPL,.GMPLIST)
"RTN","GMPLENFM",84,0)
 Q:'%
"RTN","GMPLENFM",85,0)
 F NUM=1:1:GMPLIST(0) D
"RTN","GMPLENFM",86,0)
 . S SCCOND=$P(GMPL(NUM),U,17)
"RTN","GMPLENFM",87,0)
 . S SC=$P(SCCOND,"/")
"RTN","GMPLENFM",88,0)
 . S SC=SC_"^"_$S(SC="SC":"Y",SC="NSC":"N",1:"")
"RTN","GMPLENFM",89,0)
 . S ONSET=$$EXTDT^GMPLX($P(GMPL(NUM),U,5))
"RTN","GMPLENFM",90,0)
 . S PROB=$P(GMPL(NUM),U,3)
"RTN","GMPLENFM",91,0)
 . I GMPARAM("VER"),$P(GMPL(NUM),U,9)="T" S PROB="$"_PROB
"RTN","GMPLENFM",92,0)
 . S:ADDIFN PROB=$P(GMPL(NUM),U)_U_PROB
"RTN","GMPLENFM",93,0)
 . S GMPL(NUM)=PROB_U_$P(GMPL(NUM),U,4)_U_ONSET_U_SC_U_$$GMPL1(SCCOND)
"RTN","GMPLENFM",94,0)
 Q 1
"RTN","GMPLENFM",95,0)
 ;
"RTN","GMPLENFM",96,0)
GMPL1(SCCOND) ;Determine Treatment Factor, if any
"RTN","GMPLENFM",97,0)
 N SP
"RTN","GMPLENFM",98,0)
 S SP=$P(SCCOND,"/",2)
"RTN","GMPLENFM",99,0)
 Q:SP="AO" "A^Agent Orange"
"RTN","GMPLENFM",100,0)
 Q:SP="IR" "I^Ionizing Radiation"
"RTN","GMPLENFM",101,0)
 Q:SP="EC" "E^Env. Contaminants"
"RTN","GMPLENFM",102,0)
 Q:SP="HNC" "H^Head/Neck Cancer"
"RTN","GMPLENFM",103,0)
 Q:SP="MST" "M^Mil Sexual Trauma"
"RTN","GMPLENFM",104,0)
 Q:SP="CV" "C^Combat Vet"
"RTN","GMPLENFM",105,0)
 Q:SP="SHD" "S^SHAD"
"RTN","GMPLENFM",106,0)
 Q "^"
"RTN","GMPLEXT")
0^38^B25012371
"RTN","GMPLEXT",1,0)
GMPLEXT ; RGI/CBR -- External functions mockup (to be deleted when the interfaces are fixed); 8/29/13
"RTN","GMPLEXT",2,0)
 ;;2.0;Problem List;**260002**;Aug 25, 1994;Build 26
"RTN","GMPLEXT",3,0)
PROVNAME(GMPROV) ; Returns provider name
"RTN","GMPLEXT",4,0)
 Q $P($G(^VA(200,+GMPROV,0)),U)
"RTN","GMPLEXT",5,0)
 ;
"RTN","GMPLEXT",6,0)
CLINNAME(GMCLIN) ; Returns Clinic name
"RTN","GMPLEXT",7,0)
 Q $P($G(^SC(+GMCLIN,0)),U)
"RTN","GMPLEXT",8,0)
 ;
"RTN","GMPLEXT",9,0)
LOCTYPE(GMPLOC) ; Returns location type
"RTN","GMPLEXT",10,0)
 Q $P($G(^SC(GMPLOC,0)),U,3)
"RTN","GMPLEXT",11,0)
 ;
"RTN","GMPLEXT",12,0)
PATNAME(GMPDFN) ; Returns patient name
"RTN","GMPLEXT",13,0)
 Q $P($G(^DPT(+GMPDFN,0)),U)
"RTN","GMPLEXT",14,0)
 ;
"RTN","GMPLEXT",15,0)
ICDCODE(GMPICD) ;
"RTN","GMPLEXT",16,0)
 Q $P($G(^ICD9(+GMPICD,0)),U)
"RTN","GMPLEXT",17,0)
 ;
"RTN","GMPLEXT",18,0)
NOS() ; Return PTR ^ 799.9 ICD code
"RTN","GMPLEXT",19,0)
 N X
"RTN","GMPLEXT",20,0)
 S X=$O(^ICD9("BA",799.9,0))
"RTN","GMPLEXT",21,0)
 Q (+X_"^799.9")
"RTN","GMPLEXT",22,0)
 ;
"RTN","GMPLEXT",23,0)
PROVNARR(X,CL) ; Returns IFN ^ Text of Narrative (#9999999.27)
"RTN","GMPLEXT",24,0)
 N DIC,Y,DLAYGO,DD,DO,DA
"RTN","GMPLEXT",25,0)
 S:$L(X)>80 X=$E(X,1,80)
"RTN","GMPLEXT",26,0)
 S DIC="^AUTNPOV(",DIC(0)="L",DLAYGO=9999999.27,(DA,Y)=0
"RTN","GMPLEXT",27,0)
 F  S DA=$O(^AUTNPOV("B",$E(X,1,30),DA)) Q:DA'>0  D
"RTN","GMPLEXT",28,0)
 . I $P(^AUTNPOV(DA,0),U)=X S Y=DA_U_X Q
"RTN","GMPLEXT",29,0)
 I '(+Y) D
"RTN","GMPLEXT",30,0)
 . K DA,Y
"RTN","GMPLEXT",31,0)
 . D FILE^DICN
"RTN","GMPLEXT",32,0)
 . S:Y'>0 Y=U_X
"RTN","GMPLEXT",33,0)
 . I Y>0,CL>1 S ^AUTNPOV(+Y,757)=CL
"RTN","GMPLEXT",34,0)
 Q $P(Y,U,1,2)
"RTN","GMPLEXT",35,0)
 ;
"RTN","GMPLEXT",36,0)
NARREXST(IEN) ;Provider narrative exists?
"RTN","GMPLEXT",37,0)
 Q $D(^AUTNPOV(IEN))>0
"RTN","GMPLEXT",38,0)
 ;
"RTN","GMPLEXT",39,0)
LSTTEXT(GMPLSLST) ; Returns list name
"RTN","GMPLEXT",40,0)
 Q $P($G(^GMPL(125,+GMPLSLST,0)),U)
"RTN","GMPLEXT",41,0)
 ;
"RTN","GMPLEXT",42,0)
USERLST(GMPCLIN) ; Returns user list or clinic's
"RTN","GMPLEXT",43,0)
 N GMPLSLST
"RTN","GMPLEXT",44,0)
 S GMPLSLST=$P($G(^VA(200,DUZ,125)),U,2)
"RTN","GMPLEXT",45,0)
 I 'GMPLSLST,$G(GMPCLIN),$D(^GMPL(125,"C",+GMPCLIN)) S GMPLSLST=$O(^GMPL(125,"C",+GMPCLIN,0)) ; if user has no list but clinic does, use clinic list
"RTN","GMPLEXT",46,0)
 Q GMPLSLST
"RTN","GMPLEXT",47,0)
 ;
"RTN","GMPLEXT",48,0)
UPUSRLST(PRIVW,SELLIST) ;Update user list
"RTN","GMPLEXT",49,0)
 S ^VA(200,DUZ,125)=PRIVW_U_SELLIST
"RTN","GMPLEXT",50,0)
 Q
"RTN","GMPLEXT",51,0)
 ;
"RTN","GMPLEXT",52,0)
ICD9KEY(GMPICD) ; Returns KEY IN icd9 File
"RTN","GMPLEXT",53,0)
 Q $O(^ICD9("AB",GMPICD_" ",0))
"RTN","GMPLEXT",54,0)
 ;
"RTN","GMPLEXT",55,0)
SERVICE(USER) ; Returns User's service/section from file #49
"RTN","GMPLEXT",56,0)
 S:$G(USER)="" USER=DUZ
"RTN","GMPLEXT",57,0)
 N X S X=+$P($G(^VA(200,USER,5)),U)
"RTN","GMPLEXT",58,0)
 I $P($G(^DIC(49,X,0)),U,9)'="C" S X=0
"RTN","GMPLEXT",59,0)
 S:X>0 X=X_U_$$SVCNAME(X) S:X'>0 X=""
"RTN","GMPLEXT",60,0)
 Q X
"RTN","GMPLEXT",61,0)
 ;
"RTN","GMPLEXT",62,0)
SVCNAME(SVC) ; Return service name
"RTN","GMPLEXT",63,0)
 Q $P($G(^DIC(49,SVC,0)),U)
"RTN","GMPLEXT",64,0)
 ;
"RTN","GMPLEXT",65,0)
SVCABBV(SVC) ;Service abbreviation
"RTN","GMPLEXT",66,0)
 Q $P($G(^DIC(49,SVC,0)),U,2)
"RTN","GMPLEXT",67,0)
 ;
"RTN","GMPLEXT",68,0)
USERVIEW(USER) ; Returns user's preferred view
"RTN","GMPLEXT",69,0)
 S USER=+$G(USER,DUZ)
"RTN","GMPLEXT",70,0)
 Q $P($G(^VA(200,USER,125)),U)
"RTN","GMPLEXT",71,0)
 ;
"RTN","GMPLEXT",72,0)
CLINUSER() ;is this a clinical user?
"RTN","GMPLEXT",73,0)
 N GMPLUSER
"RTN","GMPLEXT",74,0)
 S GMPLUSER=0
"RTN","GMPLEXT",75,0)
 I $$KCHK^XUSRB("PROVIDER") S GMPLUSER=1
"RTN","GMPLEXT",76,0)
 I $$KCHK^XUSRB("ORES") S GMPLUSER=1
"RTN","GMPLEXT",77,0)
 I $$KCHK^XUSRB("ORELSE") S GMPLUSER=1
"RTN","GMPLEXT",78,0)
 Q GMPLUSER
"RTN","GMPLEXT",79,0)
 ;
"RTN","GMPLEXT",80,0)
NARR(PRB) ; Returns problem narrative
"RTN","GMPLEXT",81,0)
 Q:'+$G(PRB) ""
"RTN","GMPLEXT",82,0)
 Q $P($G(^AUTNPOV(+PRB,0)),U)
"RTN","GMPLEXT",83,0)
PROTKEY(NAME) ;PROTOCOL IEN from name
"RTN","GMPLEXT",84,0)
 Q $O(^ORD(101,"B",NAME,0))
"RTN","GMPLEXT",85,0)
 ;
"RTN","GMPLEXT",86,0)
ENACT(KEY) ;PROTOCOL entry action
"RTN","GMPLEXT",87,0)
 Q $G(^ORD(101,KEY,20))
"RTN","GMPLEXT",88,0)
 ;
"RTN","GMPLEXT",89,0)
UPDITEM(KEY,ITEM,MN,NAME) ;Update protocol item details
"RTN","GMPLEXT",90,0)
 N DA,DR,DIE,X
"RTN","GMPLEXT",91,0)
 S DA=$O(^ORD(101,KEY,10,"B",ITEM,0)) Q:'DA
"RTN","GMPLEXT",92,0)
 Q:($G(MN)'="@")&($G(MN)'="$")
"RTN","GMPLEXT",93,0)
 S DR="2////"_MN_";6///^S X=NAME"
"RTN","GMPLEXT",94,0)
 S DA(1)=KEY
"RTN","GMPLEXT",95,0)
 S DIE="^ORD(101,"_KEY_",10,"
"RTN","GMPLEXT",96,0)
 D ^DIE
"RTN","GMPLEXT",97,0)
 Q
"RTN","GMPLEXT",98,0)
 ;
"RTN","GMPLEXT",99,0)
CONTEXT(LEXIEN) ;Returns concept displayable text
"RTN","GMPLEXT",100,0)
 Q $G(^LEX(757.01,LEXIEN,0))
"RTN","GMPLEXT",101,0)
 ;
"RTN","GMPLEXT",102,0)
PATDET(RETURN,DFN) ;RETURN PATIENT DETAILS
"RTN","GMPLEXT",103,0)
 Q:'+$G(DFN) 0
"RTN","GMPLEXT",104,0)
 N REC,ERT
"RTN","GMPLEXT",105,0)
 K RETURN
"RTN","GMPLEXT",106,0)
 D GETS^DIQ(2,DFN,".01;.351;.32201","IE","REC","ERT")
"RTN","GMPLEXT",107,0)
 S RETURN("NAME")=REC(2,DFN_",",.01,"I")_"^"_REC(2,DFN_",",.01,"E")
"RTN","GMPLEXT",108,0)
 S RETURN("DOD")=REC(2,DFN_",",.351,"I")_"^"_REC(2,DFN_",",.351,"E")
"RTN","GMPLEXT",109,0)
 S RETURN("PGSVC")=REC(2,DFN_",",.32201,"I")_"^"_REC(2,DFN_",",.32201,"E")
"RTN","GMPLEXT",110,0)
 Q 1
"RTN","GMPLEXT",111,0)
 ;
"RTN","GMPLEXT",112,0)
LEXINST() ;Is LEX package installed?
"RTN","GMPLEXT",113,0)
 Q $D(^LEX(757.01,0))
"RTN","GMPLEXT",114,0)
 ;
"RTN","GMPLEXT",115,0)
LDMSG(XMZ,MSG) ;Load message (MailMan)
"RTN","GMPLEXT",116,0)
 N NL
"RTN","GMPLEXT",117,0)
 M ^XMB(3.9,XMZ,2)=MSG
"RTN","GMPLEXT",118,0)
 S NL=$O(^XMB(3.9,XMZ,2,""),-1)
"RTN","GMPLEXT",119,0)
 S ^XMB(3.9,XMZ,2,0)="^3.92^"_+NL_U_+NL_U_DT
"RTN","GMPLEXT",120,0)
 Q
"RTN","GMPLEXT",121,0)
 ;
"RTN","GMPLEXT",122,0)
LISTPXRM(RETURN,ACTION) ;List ^PXRMINDX entries
"RTN","GMPLEXT",123,0)
 ;ACTION = 1 Return array of IEN's, otherwise return # of entries
"RTN","GMPLEXT",124,0)
 N CNT,DAT,IEN,PL,PRI,PT,STAT
"RTN","GMPLEXT",125,0)
 S CNT=0
"RTN","GMPLEXT",126,0)
 S RETURN=0
"RTN","GMPLEXT",127,0)
 S PT=0 F  S PT=$O(^PXRMINDX(9000011,"PSPI",PT)) Q:PT'>0  D
"RTN","GMPLEXT",128,0)
 .S STAT=""
"RTN","GMPLEXT",129,0)
 .F  S STAT=$O(^PXRMINDX(9000011,"PSPI",PT,STAT)) Q:STAT=""  D
"RTN","GMPLEXT",130,0)
 ..I '$D(^PXRMINDX(9000011,"PSPI",PT,STAT,0)) Q
"RTN","GMPLEXT",131,0)
 ..S PL=0
"RTN","GMPLEXT",132,0)
 ..F  S PL=$O(^PXRMINDX(9000011,"PSPI",PT,STAT,0,PL)) Q:PL'>0  D
"RTN","GMPLEXT",133,0)
 ...S DAT=0
"RTN","GMPLEXT",134,0)
 ...F  S DAT=$O(^PXRMINDX(9000011,"PSPI",PT,STAT,0,PL,DAT)) Q:DAT'>0  D
"RTN","GMPLEXT",135,0)
 ....S IEN=0
"RTN","GMPLEXT",136,0)
 ....F  S IEN=$O(^PXRMINDX(9000011,"PSPI",PT,STAT,0,PL,DAT,IEN)) Q:IEN'>0  D
"RTN","GMPLEXT",137,0)
 .....S CNT=CNT+1
"RTN","GMPLEXT",138,0)
 .....I ACTION=1 S RETURN(CNT)=IEN
"RTN","GMPLEXT",139,0)
 S RETURN=CNT
"RTN","GMPLEXT",140,0)
 Q
"RTN","GMPLEXT",141,0)
 ;
"RTN","GMPLEXT",142,0)
SVCCHLD(SVC,LIST) ;Return children
"RTN","GMPLEXT",143,0)
 N J
"RTN","GMPLEXT",144,0)
 K LIST
"RTN","GMPLEXT",145,0)
 S LIST=0
"RTN","GMPLEXT",146,0)
 Q:'$D(^DIC(49,"ACHLD",SVC))
"RTN","GMPLEXT",147,0)
 F J=0:0 S J=$O(^DIC(49,"ACHLD",SVC,J)) Q:J'>0  D
"RTN","GMPLEXT",148,0)
 . S LIST(J)=$P($G(^DIC(49,J,0)),U)
"RTN","GMPLEXT",149,0)
 Q
"RTN","GMPLEXT",150,0)
 ;
"RTN","GMPLEXT",151,0)
SVCLIST(LIST,TYPE) ;Get list of services
"RTN","GMPLEXT",152,0)
 N IEN,CNT
"RTN","GMPLEXT",153,0)
 K LIST
"RTN","GMPLEXT",154,0)
 S LIST=0
"RTN","GMPLEXT",155,0)
 F IEN=0:0 S IEN=$O(^DIC(49,"F",TYPE,IEN)) Q:IEN'>0  D
"RTN","GMPLEXT",156,0)
 . S LIST(IEN)=$P($G(^DIC(49,IEN,0)),U)
"RTN","GMPLEXT",157,0)
 . S LIST=LIST+1
"RTN","GMPLEXT",158,0)
 Q
"RTN","GMPLEXT",159,0)
 ;
"RTN","GMPLEXT",160,0)
SVCDET(RETURN,IEN) ;Service detail
"RTN","GMPLEXT",161,0)
 K RETURN
"RTN","GMPLEXT",162,0)
 S RETURN("NAME")=$P($G(^DIC(49,IEN,0)),U)
"RTN","GMPLEXT",163,0)
 S RETURN("PARENT")=+$P($G(^DIC(49,IEN,0)),U,4)
"RTN","GMPLEXT",164,0)
 S RETURN("TYPE")=+$P($G(^DIC(49,IEN,0)),U,9)
"RTN","GMPLEXT",165,0)
 Q
"RTN","GMPLEXT",166,0)
 ;
"RTN","GMPLEXT",167,0)
CLINLST(LIST) ;List clinics
"RTN","GMPLEXT",168,0)
 N IFN
"RTN","GMPLEXT",169,0)
 K LIST
"RTN","GMPLEXT",170,0)
 S LIST=0
"RTN","GMPLEXT",171,0)
 F IFN=0:0 S IFN=$O(^SC(IFN)) Q:IFN'>0  D
"RTN","GMPLEXT",172,0)
 . S LIST(IFN)=$P($G(^SC(IFN,0)),U)
"RTN","GMPLEXT",173,0)
 . S LIST=LIST+1
"RTN","GMPLEXT",174,0)
 Q
"RTN","GMPLEXT",175,0)
 ;
"RTN","GMPLEXT",176,0)
CLINDET(RETURN,IEN) ;Clinic details
"RTN","GMPLEXT",177,0)
 N NODE
"RTN","GMPLEXT",178,0)
 K RETURN
"RTN","GMPLEXT",179,0)
 S NODE=$G(^SC(IEN,0))
"RTN","GMPLEXT",180,0)
 S RETURN("NAME")=$P(NODE,U)
"RTN","GMPLEXT",181,0)
 S RETURN("TYPE")=$P(NODE,U,3)
"RTN","GMPLEXT",182,0)
 Q
"RTN","GMPLEXT",183,0)
 ;
"RTN","GMPLEXT1")
0^39^B5116305
"RTN","GMPLEXT1",1,0)
GMPLEXT1 ; RGI -- DATA ACCESS LAYER - DIRECT GLOBALS ACCESS ; 3/27/13
"RTN","GMPLEXT1",2,0)
 ;;2.0;Problem List;**260002**;Aug 25, 1994;Build 26
"RTN","GMPLEXT1",3,0)
GETUSRS(RETURN,SEARCH,START,NUMBER) ;
"RTN","GMPLEXT1",4,0)
 S:$D(START)=0 START="" S:$D(SEARCH)=0 SEARCH=""
"RTN","GMPLEXT1",5,0)
 S:'$G(NUMBER) NUMBER=""
"RTN","GMPLEXT1",6,0)
 D LIST^DIC("200","","@;.01;1;.151;8","",NUMBER,.START,SEARCH,"","","","RETURN")
"RTN","GMPLEXT1",7,0)
 I $L(SEARCH)>0,$P(RETURN("DILIST",0),U,1)'>0 D
"RTN","GMPLEXT1",8,0)
 . D LIST^DIC("200","","@;.01;1;.151;8","",NUMBER,.START,$$UP^XLFSTR(SEARCH),"","","","RETURN")
"RTN","GMPLEXT1",9,0)
 Q
"RTN","GMPLEXT1",10,0)
 ;
"RTN","GMPLEXT1",11,0)
GETASSUS(RETURN,GMPLST) ; Array of users assigned to specified list
"RTN","GMPLEXT1",12,0)
 ; RETURN - Passed by reference, array of users
"RTN","GMPLEXT1",13,0)
 ;  RETURN(0) = Number of users
"RTN","GMPLEXT1",14,0)
 ;  RETURN(I,"ID") = user IFN
"RTN","GMPLEXT1",15,0)
 ;  RETURN(I,"NAME") = user name
"RTN","GMPLEXT1",16,0)
 ; GMPLST - problem list IFN
"RTN","GMPLEXT1",17,0)
 N IND,RET,DL,LIST,LIN,CNT,ID
"RTN","GMPLEXT1",18,0)
 S IND="",DL="DILIST"
"RTN","GMPLEXT1",19,0)
 D LIST^DIC("200","","@;.01","",,,,,,,"RET")
"RTN","GMPLEXT1",20,0)
 S RETURN(DL,0)="0^*^0^"
"RTN","GMPLEXT1",21,0)
 S CNT=$P(RET(DL,0),"^",1),LIN=0
"RTN","GMPLEXT1",22,0)
 F IND=1:1:CNT D
"RTN","GMPLEXT1",23,0)
 . S ID=RET(DL,2,IND),LIST=""
"RTN","GMPLEXT1",24,0)
 . S:$D(^VA(200,ID,125))>0 LIST=$P(^VA(200,ID,125),"^",2) Q:'$G(LIST)
"RTN","GMPLEXT1",25,0)
 . I LIST=+GMPLST D
"RTN","GMPLEXT1",26,0)
 . . S LIN=LIN+1
"RTN","GMPLEXT1",27,0)
 . . S RETURN(DL,2,LIN)=ID
"RTN","GMPLEXT1",28,0)
 . . S RETURN(DL,"ID",LIN,".01")=RET(DL,"ID",IND,".01")
"RTN","GMPLEXT1",29,0)
 S RETURN(DL,0)=LIN_"^*^0^"
"RTN","GMPLEXT1",30,0)
 Q
"RTN","GMPLEXT1",31,0)
 ;
"RTN","GMPLEXT1",32,0)
GETCLIN(RETURN,SEARCH,START,NUMBER) ;
"RTN","GMPLEXT1",33,0)
 S:$D(START)=0 START="" S:$D(SEARCH)=0 SEARCH=""
"RTN","GMPLEXT1",34,0)
 S:'$G(NUMBER) NUMBER=""
"RTN","GMPLEXT1",35,0)
 D LIST^DIC("44","",,,NUMBER,.START,SEARCH,,"I $P(^(0),U,3)=""C""","","RETURN")
"RTN","GMPLEXT1",36,0)
 Q
"RTN","GMPLEXT1",37,0)
 ;
"RTN","GMPLEXT1",38,0)
LSTUSED(GMPLLST) ;
"RTN","GMPLEXT1",39,0)
 N USER,VIEW,GMPCOUNT
"RTN","GMPLEXT1",40,0)
 S GMPCOUNT=0
"RTN","GMPLEXT1",41,0)
 F USER=0:0 S USER=$O(^VA(200,USER)) Q:USER'>0  D
"RTN","GMPLEXT1",42,0)
 . S VIEW=$P($G(^VA(200,USER,125)),U,2) Q:'VIEW  Q:VIEW'=+GMPLLST
"RTN","GMPLEXT1",43,0)
 . S GMPCOUNT=GMPCOUNT+1
"RTN","GMPLEXT1",44,0)
 Q GMPCOUNT
"RTN","GMPLEXT1",45,0)
 ;
"RTN","GMPLEXT1",46,0)
GETULST(USER) ; Get user assigned problem selection list
"RTN","GMPLEXT1",47,0)
 ; RETURN - Passed by reference, List IFN^List name
"RTN","GMPLEXT1",48,0)
 ; USER - User IFN
"RTN","GMPLEXT1",49,0)
 N LST
"RTN","GMPLEXT1",50,0)
 S LST=$P($G(^VA(200,USER,125)),U,2)
"RTN","GMPLEXT1",51,0)
 S:LST'="" $P(LST,U,2)=$P($G(^GMPL(125,+LST,0)),U)
"RTN","GMPLEXT1",52,0)
 Q LST
"RTN","GMPLEXT1",53,0)
 ;
"RTN","GMPLEXT1",54,0)
ASSUSR(RETURN,GMPLLST,GMPLUSER) ; Assign Problem Selection List to user
"RTN","GMPLEXT1",55,0)
 N DIE,DR,DA
"RTN","GMPLEXT1",56,0)
 S DIE="^VA(200,"
"RTN","GMPLEXT1",57,0)
 S DR="125.1////"_+$G(GMPLLST),RETURN=0
"RTN","GMPLEXT1",58,0)
 S DA=GMPLUSER
"RTN","GMPLEXT1",59,0)
 D ^DIE
"RTN","GMPLEXT1",60,0)
 Q 1
"RTN","GMPLEXT1",61,0)
 ;
"RTN","GMPLEXT1",62,0)
REMUSR(RETURN,GMPLLST,GMPLUSER) ; Remove Problem Selection List from user
"RTN","GMPLEXT1",63,0)
 N DIE,DR,DA
"RTN","GMPLEXT1",64,0)
 S DIE="^VA(200,"
"RTN","GMPLEXT1",65,0)
 S DR="125.1///@"
"RTN","GMPLEXT1",66,0)
 S DA=GMPLUSER
"RTN","GMPLEXT1",67,0)
 D ^DIE
"RTN","GMPLEXT1",68,0)
 Q 1
"RTN","GMPLEXT1",69,0)
 ;
"RTN","GMPLEXT1",70,0)
LEXICON(LEX) ;
"RTN","GMPLEXT1",71,0)
 Q:'+$G(LEX) ""
"RTN","GMPLEXT1",72,0)
 Q $P($G(^LEX(757.01,+LEX,0)),U)
"RTN","GMPLEXT1",73,0)
 ;
"RTN","GMPLHIST")
0^40^B27245378
"RTN","GMPLHIST",1,0)
GMPLHIST ; SLC/MKB/KER -- Problem List Historical data ; 5/15/13
"RTN","GMPLHIST",2,0)
 ;;2.0;Problem List;**7,26,,31,35,260002**;Aug 25, 1994;Build 26
"RTN","GMPLHIST",3,0)
 ;
"RTN","GMPLHIST",4,0)
 ; External References
"RTN","GMPLHIST",5,0)
 ;   DBIA 10060  ^VA(200
"RTN","GMPLHIST",6,0)
 ;            
"RTN","GMPLHIST",7,0)
AUDET(RETURN,AIFN) ; Returns the audit entry details
"RTN","GMPLHIST",8,0)
 ;Input:
"RTN","GMPLHIST",9,0)
 ;  .RETURN [Required,Array] Array passed by reference that will receive the audit entry details (external format)
"RTN","GMPLHIST",10,0)
 ;                           Set to Error description if the call fails
"RTN","GMPLHIST",11,0)
 ;      RETURN("DATE") date modified
"RTN","GMPLHIST",12,0)
 ;      RETURN("FLD") modified_field_id^modified_field_name (ex. .12^STATUS)
"RTN","GMPLHIST",13,0)
 ;      RETURN("NEW") new value
"RTN","GMPLHIST",14,0)
 ;      RETURN("OLD") old value
"RTN","GMPLHIST",15,0)
 ;      RETURN("PROV") provider name
"RTN","GMPLHIST",16,0)
 ;      RETURN("OLDDATE") old note date (this subscript is returned only when field is 1101^NOTE)
"RTN","GMPLHIST",17,0)
 ;      RETURN("OLDNOTE") old note text (this subscript is returned only when field is 1101^NOTE)
"RTN","GMPLHIST",18,0)
 ;   AIFN [Required,Numeric] Audit entry IEN (pointer to file 125.8)
"RTN","GMPLHIST",19,0)
 ;Output:
"RTN","GMPLHIST",20,0)
 ;  1=Success,0=Failure
"RTN","GMPLHIST",21,0)
 N NODE,DATE,FLD,PROV,OLD,NEW,ROOT,CHNGE,REASON,LCNT,AUDIT,%
"RTN","GMPLHIST",22,0)
 S %=$$GETADATA^GMPLDAL2(.AUDIT,AIFN)
"RTN","GMPLHIST",23,0)
 Q:$D(AUDIT(0))'>0 0
"RTN","GMPLHIST",24,0)
 S RETURN("DATE")=$$EXTDT^GMPLX(AUDIT(0,2))
"RTN","GMPLHIST",25,0)
 S RETURN("FLD")=AUDIT(0,1),RETURN("FLD")=RETURN("FLD")_U_$$FLDNAME(+RETURN("FLD"))
"RTN","GMPLHIST",26,0)
 S RETURN("PROV")=AUDIT(0,7)
"RTN","GMPLHIST",27,0)
 S:'RETURN("PROV") RETURN("PROV")=AUDIT(0,3)
"RTN","GMPLHIST",28,0)
 S RETURN("PROV")=$$PROVNAME^GMPLEXT(RETURN("PROV"))
"RTN","GMPLHIST",29,0)
 S OLD=AUDIT(0,4)
"RTN","GMPLHIST",30,0)
 S NEW=AUDIT(0,5)
"RTN","GMPLHIST",31,0)
 S RETURN("OLD")=OLD
"RTN","GMPLHIST",32,0)
 S RETURN("NEW")=NEW
"RTN","GMPLHIST",33,0)
 I +RETURN("FLD")=1101 D  Q 1
"RTN","GMPLHIST",34,0)
 . S RETURN("OLDDATE")=$$EXTDT^GMPLX(AUDIT(1,.05))
"RTN","GMPLHIST",35,0)
 . S RETURN("OLDNOTE")=AUDIT(1,.03)
"RTN","GMPLHIST",36,0)
 I (+RETURN("FLD")=.13)!(+RETURN("FLD")=1.07) D  Q 1
"RTN","GMPLHIST",37,0)
 . S RETURN("OLD")=$$EXTDT^GMPLX(OLD)
"RTN","GMPLHIST",38,0)
 . S RETURN("NEW")=$$EXTDT^GMPLX(NEW)
"RTN","GMPLHIST",39,0)
 I +RETURN("FLD")=.01 D  Q 1
"RTN","GMPLHIST",40,0)
 . S RETURN("OLD")=$$ICDCODE^GMPLEXT(OLD)
"RTN","GMPLHIST",41,0)
 . S RETURN("NEW")=$$ICDCODE^GMPLEXT(NEW)
"RTN","GMPLHIST",42,0)
 I +RETURN("FLD")=.05 D  Q 1
"RTN","GMPLHIST",43,0)
 . S RETURN("OLD")=$$NARR^GMPLEXT(OLD)
"RTN","GMPLHIST",44,0)
 . S RETURN("NEW")=$$NARR^GMPLEXT(NEW)
"RTN","GMPLHIST",45,0)
 I +RETURN("FLD")=1.01 D  Q 1
"RTN","GMPLHIST",46,0)
 . S RETURN("OLD")=$$LEXICON^GMPLEXT1(OLD)
"RTN","GMPLHIST",47,0)
 . S RETURN("NEW")=$$LEXICON^GMPLEXT1(NEW)
"RTN","GMPLHIST",48,0)
 I (+RETURN("FLD")=1.04)!(+RETURN("FLD")=1.05) D  Q 1
"RTN","GMPLHIST",49,0)
 . S RETURN("OLD")=$$PROVNAME^GMPLEXT(OLD)
"RTN","GMPLHIST",50,0)
 . S RETURN("NEW")=$$PROVNAME^GMPLEXT(NEW)
"RTN","GMPLHIST",51,0)
 I +RETURN("FLD")=1.06 D  Q 1
"RTN","GMPLHIST",52,0)
 . S RETURN("OLD")=$$SVCNAME^GMPLEXT(OLD)
"RTN","GMPLHIST",53,0)
 . S RETURN("NEW")=$$SVCNAME^GMPLEXT(NEW)
"RTN","GMPLHIST",54,0)
 I +RETURN("FLD")=1.08 D  Q 1
"RTN","GMPLHIST",55,0)
 . S RETURN("OLD")=$$CLINNAME^GMPLEXT(OLD)
"RTN","GMPLHIST",56,0)
 . S RETURN("NEW")=$$CLINNAME^GMPLEXT(NEW)
"RTN","GMPLHIST",57,0)
 Q 1
"RTN","GMPLHIST",58,0)
 ;           
"RTN","GMPLHIST",59,0)
GETHIST(RETURN,GMPIFN) ; Returns all audit entries of the problem
"RTN","GMPLHIST",60,0)
 ;Input:
"RTN","GMPLHIST",61,0)
 ;  .RETURN [Required,Array] Array passed by reference that will receive the list of audit entry IENs
"RTN","GMPLHIST",62,0)
 ;                           Set to Error description if the call fails
"RTN","GMPLHIST",63,0)
 ;      RETURN [Boolean] 1 if the call succeeded, 0 otherwise
"RTN","GMPLHIST",64,0)
 ;      RETURN(#) [Numeric] Audit entry IEN (file 125.8)
"RTN","GMPLHIST",65,0)
 ;   GMPIFN [Required,Numeric] Problem IEN (pointer to file 9000011)
"RTN","GMPLHIST",66,0)
 ;Output:
"RTN","GMPLHIST",67,0)
 ;  1=Success,0=Failure
"RTN","GMPLHIST",68,0)
 N VALID,%
"RTN","GMPLHIST",69,0)
 S RETURN=0
"RTN","GMPLHIST",70,0)
 S %=$$VALID^GMPLAPI4(.VALID,GMPIFN)
"RTN","GMPLHIST",71,0)
 I 'VALID D ERRX^GMPLAPIE(.RETURN,"PRBNFND") Q 0
"RTN","GMPLHIST",72,0)
 D GETHIST^GMPLDAL2(.RETURN,GMPIFN)
"RTN","GMPLHIST",73,0)
 S RETURN=1
"RTN","GMPLHIST",74,0)
 Q 1
"RTN","GMPLHIST",75,0)
 ;
"RTN","GMPLHIST",76,0)
GETAUDIT(RETURN,GMPIFN,FIELD,VALUE) ; Returns all audit data of the problem
"RTN","GMPLHIST",77,0)
 ;Input:
"RTN","GMPLHIST",78,0)
 ;  .RETURN [Required,Array] Array passed by reference that will receive the audit data (internal format)
"RTN","GMPLHIST",79,0)
 ;                           Set to Error description if the call fails
"RTN","GMPLHIST",80,0)
 ;      RETURN = number of audit entries returned
"RTN","GMPLHIST",81,0)
 ;      RETURN(#,0) audit data: field_number^field_name^date_modified^who_modified^old_value^
"RTN","GMPLHIST",82,0)
 ;                              new_value^reason_for_change^requesting_provider
"RTN","GMPLHIST",83,0)
 ;      RETURN(#,1) old problem entry (the entire problem entry as it existed before change)
"RTN","GMPLHIST",84,0)
 ;   GMPIFN [Required,Numeric] Problem IEN (pointer to file 9000011)
"RTN","GMPLHIST",85,0)
 ;   FIELD [Optional,Numeric] If specified, the function will return audit data for this field change only
"RTN","GMPLHIST",86,0)
 ;   VALUE [Optional,Numeric] If specified along with FIELD the function will return only changes made to that field having the new value of VALUE. 
"RTN","GMPLHIST",87,0)
 ;Output:
"RTN","GMPLHIST",88,0)
 ;  1=Success,0=Failure
"RTN","GMPLHIST",89,0)
 N IDT,PROB,RET,VALID,%
"RTN","GMPLHIST",90,0)
 S RETURN=0
"RTN","GMPLHIST",91,0)
 S %=$$VALID^GMPLAPI4(.VALID,GMPIFN)
"RTN","GMPLHIST",92,0)
 I 'VALID D ERRX^GMPLAPIE(.RETURN,"PRBNFND") Q 0
"RTN","GMPLHIST",93,0)
 D GETAUDIT^GMPLDAL2(.RET,GMPIFN,$G(FIELD),$G(VALUE))
"RTN","GMPLHIST",94,0)
 S IDT=0
"RTN","GMPLHIST",95,0)
 F  S IDT=$O(RET(IDT)) Q:IDT'>0  D
"RTN","GMPLHIST",96,0)
 . S PROB=RET(IDT,0)
"RTN","GMPLHIST",97,0)
 . S FLD=$$FLDNAME(+$P(PROB,U))
"RTN","GMPLHIST",98,0)
 . S RETURN(IDT,0)=+$P(PROB,U)_U_FLD_U_$P(PROB,U,2,7)
"RTN","GMPLHIST",99,0)
 . S:$D(RET(IDT,1)) RETURN(IDT,1)=RET(IDT,1)
"RTN","GMPLHIST",100,0)
 S RETURN=IDT
"RTN","GMPLHIST",101,0)
 Q
"RTN","GMPLHIST",102,0)
 ;
"RTN","GMPLHIST",103,0)
AUDITX(RETURN,GMPIFN,FIELD,VALUE) ; Returns all audit data of the problem
"RTN","GMPLHIST",104,0)
 ;Input:
"RTN","GMPLHIST",105,0)
 ;  .RETURN [Required,Array] Array passed by reference that will receive the audit entry details (external format)
"RTN","GMPLHIST",106,0)
 ;                           Set to Error description if the call fails
"RTN","GMPLHIST",107,0)
 ;      RETURN = number of audit entries returned
"RTN","GMPLHIST",108,0)
 ;      RETURN(#,"FIELD") changed field id^changed field name (ex. .12^STATUS)
"RTN","GMPLHIST",109,0)
 ;      RETURN(#,"MODIFIED") modified date
"RTN","GMPLHIST",110,0)
 ;      RETURN(#,"MODIFIEDBY") user who modified the problem (provider name)
"RTN","GMPLHIST",111,0)
 ;      RETURN(#,"NEW") new value
"RTN","GMPLHIST",112,0)
 ;      RETURN(#,"OLD") old value
"RTN","GMPLHIST",113,0)
 ;      RETURN(#,"OLDPROBLEM") the entire problem entry (internal format) as it existed before it was changed
"RTN","GMPLHIST",114,0)
 ;                            (this subscript is returned only if the changed field is 1101^NOTE)
"RTN","GMPLHIST",115,0)
 ;      RETURN(#,"REASON") reason for change
"RTN","GMPLHIST",116,0)
 ;      RETURN(#,"REQUESTINGBY") requesting provider
"RTN","GMPLHIST",117,0)
 ;   GMPIFN [Required,Numeric] Problem IEN (pointer to file 9000011)
"RTN","GMPLHIST",118,0)
 ;   FIELD [Optional,Numeric] If specified, the function will return audit data for this field change only
"RTN","GMPLHIST",119,0)
 ;   VALUE [Optional,Numeric] If specified along with FIELD the function will return only changes made to that field
"RTN","GMPLHIST",120,0)
 ;                            having the new value of VALUE. 
"RTN","GMPLHIST",121,0)
 ;Output:
"RTN","GMPLHIST",122,0)
 ;  1=Success,0=Failure
"RTN","GMPLHIST",123,0)
 N IDT,FLD,CNT,RET,%,VALID
"RTN","GMPLHIST",124,0)
 S CNT=0,RETURN=CNT,IDT=0
"RTN","GMPLHIST",125,0)
 S %=$$VALID^GMPLAPI4(.VALID,GMPIFN)
"RTN","GMPLHIST",126,0)
 I 'VALID D ERRX^GMPLAPIE(.RETURN,"PRBNFND") Q 0
"RTN","GMPLHIST",127,0)
 D AUDITX^GMPLDAL2(.RET,GMPIFN,$G(FIELD),$G(VALUE))
"RTN","GMPLHIST",128,0)
 F  S IDT=$O(RET(IDT)) Q:IDT'>0  D
"RTN","GMPLHIST",129,0)
 . S FLD=$$FLDNAME(RET(IDT,1))
"RTN","GMPLHIST",130,0)
 . S CNT=CNT+1
"RTN","GMPLHIST",131,0)
 . S RETURN(CNT,"FIELD")=RET(IDT,1)_U_FLD
"RTN","GMPLHIST",132,0)
 . S RETURN(CNT,"MODIFIED")=$$EXTDT^GMPLX(RET(IDT,2))
"RTN","GMPLHIST",133,0)
 . S RETURN(CNT,"MODIFIEDBY")=$$PROVNAME^GMPLEXT(RET(IDT,3))
"RTN","GMPLHIST",134,0)
 . S RETURN(CNT,"OLD")=RET(IDT,4)
"RTN","GMPLHIST",135,0)
 . S RETURN(CNT,"NEW")=RET(IDT,5)
"RTN","GMPLHIST",136,0)
 . S RETURN(CNT,"REASON")=RET(IDT,6)
"RTN","GMPLHIST",137,0)
 . S RETURN(CNT,"REQUESTINGBY")=$$PROVNAME^GMPLEXT(RET(IDT,7))
"RTN","GMPLHIST",138,0)
 . S:$D(RET(IDT,1101)) RETURN(CNT,"OLDPROBLEM")=RET(IDT,1101)
"RTN","GMPLHIST",139,0)
 S RETURN=CNT
"RTN","GMPLHIST",140,0)
 Q 1
"RTN","GMPLHIST",141,0)
 ;
"RTN","GMPLHIST",142,0)
FLDNAME(NUM) ; Returns Field Name for Display
"RTN","GMPLHIST",143,0)
 N NAME,NM1,NM2,I,J S J=0,NAME="" D NUM(.NM1),ALP(.NM2) S:+($G(NM1(+NUM)))=+NUM J=+NUM
"RTN","GMPLHIST",144,0)
 S:$L($G(NM2(+J))) NAME=$G(NM2(+J))
"RTN","GMPLHIST",145,0)
 Q NAME
"RTN","GMPLHIST",146,0)
ALP(X) ; Alpha Field Names
"RTN","GMPLHIST",147,0)
 S X(.01)="DIAGNOSIS",X(.02)="PATIENT NAME",X(.03)="DATE LAST MODIFIED",X(.04)="CLASS",X(.05)="PROVIDER NARRATIVE"
"RTN","GMPLHIST",148,0)
 S X(.06)="FACILITY",X(.07)="NUMBER",X(.08)="DATE ENTERED",X(.12)="STATUS",X(.13)="DATE OF ONSET",X(1.01)="PROBLEM",X(1.02)="CONDITION"
"RTN","GMPLHIST",149,0)
 S X(1.03)="ENTERED BY",X(1.04)="RECORDING PROVIDER",X(1.05)="RESPONSIBLE PROVIDER",X(1.06)="SERVICE",X(1.07)="DATE RESOLVED"
"RTN","GMPLHIST",150,0)
 S X(1.08)="CLINIC",X(1.09)="DATE RECORDED",X(1.1)="SERVICE CONNECTED",X(1.11)="AGENT ORANGE EXP",X(1.12)="RADIATION EXP",X(1.13)="ENV CONTAMINANTS EXP"
"RTN","GMPLHIST",151,0)
 S X(1.14)="PRIORITY",X(1.15)="HEAD/NECK CANCER",X(1.16)="MIL SEXUAL TRAUMA",X(1.17)="COMBAT VET",X(1.18)="SHAD",X(1101)="NOTE"
"RTN","GMPLHIST",152,0)
 Q
"RTN","GMPLHIST",153,0)
NUM(X) ; Numeric Field Designations
"RTN","GMPLHIST",154,0)
 N FN F FN=.01:.01:.08 S X(+FN)=+FN
"RTN","GMPLHIST",155,0)
 F FN=.12:.01:.13 S X(+FN)=+FN
"RTN","GMPLHIST",156,0)
 F FN=1.01:.01:1.18 S X(+FN)=+FN
"RTN","GMPLHIST",157,0)
 S X(1101)=1101
"RTN","GMPLHIST",158,0)
 Q
"RTN","GMPLHIST",159,0)
 ;
"RTN","GMPLHS")
0^41^B10593584
"RTN","GMPLHS",1,0)
GMPLHS ; SLC/MKB/KER - Extract Prob List Health Summary ; 09/17/12
"RTN","GMPLHS",2,0)
 ;;2.0;Problem List;**22,26,35,260002**;Aug 25, 1994;Build 26
"RTN","GMPLHS",3,0)
 ;
"RTN","GMPLHS",4,0)
 ; External References
"RTN","GMPLHS",5,0)
 ;   DBIA  3106  ^DIC(49
"RTN","GMPLHS",6,0)
 ;   DBIA 10060  ^VA(200
"RTN","GMPLHS",7,0)
 ;   DBIA 10015  EN^DIQ1
"RTN","GMPLHS",8,0)
 ;                    
"RTN","GMPLHS",9,0)
GETLIST(GMPDFN,STATUS) ; Define List 
"RTN","GMPLHS",10,0)
 N GMPLIST,GMPLVIEW,GMPARAM,GMPTOTAL K ^TMP("GMPLHS",$J) Q:+GMPDFN'>0
"RTN","GMPLHS",11,0)
 D GET^GMPLSITE(.GMPARAM) S GMPARAM("QUIET")=1
"RTN","GMPLHS",12,0)
 S GMPLVIEW("ACT")=STATUS,GMPLVIEW("PROV")=0,GMPLVIEW("VIEW")=""
"RTN","GMPLHS",13,0)
 D GETPLIST^GMPLMGR1(.GMPLIST,.GMPTOTAL,.GMPLVIEW)
"RTN","GMPLHS",14,0)
BUILD ; Build list for selected patient
"RTN","GMPLHS",15,0)
 ;   Sets Global Array:
"RTN","GMPLHS",16,0)
 ;   ^TMP("GMPLHS",$J,STATUS,0)
"RTN","GMPLHS",17,0)
 ;                  
"RTN","GMPLHS",18,0)
 ;   Piece 1:  GMPCNT     # of entries extracted
"RTN","GMPLHS",19,0)
 ;         2:  GMPTOTAL   # of entries that exist
"RTN","GMPLHS",20,0)
 N IFN,GMPCNT,NUM S (NUM,GMPCNT)=0 F  S NUM=$O(GMPLIST(NUM)) Q:NUM'>0  D
"RTN","GMPLHS",21,0)
 . S IFN=+GMPLIST(NUM) Q:IFN'>0  D GETPROB(IFN)
"RTN","GMPLHS",22,0)
 I $G(GMPCNT)'>0 K ^TMP("GMPLHS",$J) Q
"RTN","GMPLHS",23,0)
 S ^TMP("GMPLHS",$J,STATUS,0)=GMPCNT_U_GMPTOTAL
"RTN","GMPLHS",24,0)
 Q
"RTN","GMPLHS",25,0)
GETPROB(IFN) ; Get problem data and set it to ^TMP array
"RTN","GMPLHS",26,0)
 ;   Sets Global Arrays:
"RTN","GMPLHS",27,0)
 ;   ^TMP("GMPLHS",$J,CNT,0)
"RTN","GMPLHS",28,0)
 ;   Piece 1:  Pointer to ICD9 file #80
"RTN","GMPLHS",29,0)
 ;         2:  Internal Date Last Modified
"RTN","GMPLHS",30,0)
 ;         3:  Facility Name
"RTN","GMPLHS",31,0)
 ;         4:  Internal Date Entered
"RTN","GMPLHS",32,0)
 ;         5:  Internal Status (A/I/"")
"RTN","GMPLHS",33,0)
 ;         6:  Internal Date of Onset
"RTN","GMPLHS",34,0)
 ;         7:  Responsible Provider Name
"RTN","GMPLHS",35,0)
 ;         8:  Service Name
"RTN","GMPLHS",36,0)
 ;         9:  Service Abbreviation
"RTN","GMPLHS",37,0)
 ;        10:  Internal Date Resolved
"RTN","GMPLHS",38,0)
 ;        11:  Clinic Name
"RTN","GMPLHS",39,0)
 ;        12:  Internal Date Recorded
"RTN","GMPLHS",40,0)
 ;        13:  Problem Term (from Lexicon)
"RTN","GMPLHS",41,0)
 ;        14:  Exposure String (AO/IR/EC/HNC/MST/CV/SHD)
"RTN","GMPLHS",42,0)
 ;                        
"RTN","GMPLHS",43,0)
 ;   ^TMP("GMPLHS",$J,CNT,"N")
"RTN","GMPLHS",44,0)
 ;   Piece 1:  Provider Narrative
"RTN","GMPLHS",45,0)
 ;                   
"RTN","GMPLHS",46,0)
 ;   ^TMP("GMPLHS",$J,CNT,"IEN")
"RTN","GMPLHS",47,0)
 ;   Piece 1:  Pointer to Problem file 9000011
"RTN","GMPLHS",48,0)
 ;                   
"RTN","GMPLHS",49,0)
 N DIC,DIQ,DR,DA,REC,DIAG,LASTMDT,NARR,SITE,ENTDT,STAT,ONSETDT,RPROV
"RTN","GMPLHS",50,0)
 N SERV,SERVABB,RESDT,CLIN,RECDT,LEXI,LEX,PG,AO,EXP,HNC,MST,CV,SHD,IR,SCS
"RTN","GMPLHS",51,0)
 N %,PRB
"RTN","GMPLHS",52,0)
 S %=$$DETAIL^GMPLAPI2(.PRB,IFN)
"RTN","GMPLHS",53,0)
 S DIAG=$P(PRB(.01),U),LASTMDT=$P(PRB(.03),U)
"RTN","GMPLHS",54,0)
 S NARR=$P(PRB(.05),U,2),SITE=$P(PRB(.06),U,2)
"RTN","GMPLHS",55,0)
 S ENTDT=$P(PRB(.08),U),STAT=$P(PRB(.12),U)
"RTN","GMPLHS",56,0)
 S ONSETDT=$P(PRB(.13),U)
"RTN","GMPLHS",57,0)
 S LEXI=$P(PRB(1.01),U)
"RTN","GMPLHS",58,0)
 S LEX=$P(PRB(1.01),U,2)
"RTN","GMPLHS",59,0)
 S RPROV=$P(PRB(1.05),U,2)
"RTN","GMPLHS",60,0)
 S SERV=$P(PRB(1.06),U,2)
"RTN","GMPLHS",61,0)
 S SERVABB=$$SERV($P(PRB(1.06),U),SERV)
"RTN","GMPLHS",62,0)
 S RESDT=$P(PRB(1.07),U)
"RTN","GMPLHS",63,0)
 S CLIN=$P(PRB(1.08),U,2)
"RTN","GMPLHS",64,0)
 S RECDT=$P(PRB(1.09),U)
"RTN","GMPLHS",65,0)
 S AO=+$P(PRB(1.11),U)
"RTN","GMPLHS",66,0)
 S IR=+$P(PRB(1.12),U)
"RTN","GMPLHS",67,0)
 S PG=+$P(PRB(1.13),U)
"RTN","GMPLHS",68,0)
 S HNC=+$P(PRB(1.15),U)
"RTN","GMPLHS",69,0)
 S MST=+$P(PRB(1.16),U)
"RTN","GMPLHS",70,0)
 S CV=+$P(PRB(1.17),U)
"RTN","GMPLHS",71,0)
 S SHD=+$P(PRB(1.18),U)
"RTN","GMPLHS",72,0)
 K SCS D SCS^GMPLX1(DA,.SCS) S EXP=$G(SCS(1))
"RTN","GMPLHS",73,0)
 S GMPCNT=GMPCNT+1,^TMP("GMPLHS",$J,GMPCNT,0)=DIAG_U_LASTMDT_U_SITE_U_ENTDT_U_STAT_U_ONSETDT_U_RPROV_U_SERV_U_SERVABB_U_RESDT_U_CLIN_U_RECDT_U_LEX_U_EXP
"RTN","GMPLHS",74,0)
 S ^TMP("GMPLHS",$J,GMPCNT,"N")=NARR,^TMP("GMPLHS",$J,GMPCNT,"IEN")=IFN
"RTN","GMPLHS",75,0)
 S:+LEXI>0 ^TMP("GMPLHS",$J,GMPCNT,"L")=LEXI_"^"_LEX
"RTN","GMPLHS",76,0)
 D GETCOMM(IFN,GMPCNT)
"RTN","GMPLHS",77,0)
 Q
"RTN","GMPLHS",78,0)
GETCOMM(IFN,CNT) ; Get Active Comments for a Note
"RTN","GMPLHS",79,0)
 ;   Sets Global Array:
"RTN","GMPLHS",80,0)
 ;   ^TMP("GMPLHS",$J,CNT,"C",LOCATION,NOTE NMBR,0)
"RTN","GMPLHS",81,0)
 ;                     
"RTN","GMPLHS",82,0)
 ;   Piece 1:  Note Narrative
"RTN","GMPLHS",83,0)
 ;         2:  Internal Date Note Added 
"RTN","GMPLHS",84,0)
 ;         3;  Name of Note's Author 
"RTN","GMPLHS",85,0)
 ;                        
"RTN","GMPLHS",86,0)
 N %,NTE,LOC,NIFN
"RTN","GMPLHS",87,0)
 S %=$$NOTES^GMPLAPI3(.NTE,IFN,1,4)
"RTN","GMPLHS",88,0)
 S LOC=0
"RTN","GMPLHS",89,0)
 F  S LOC=$O(NTE(LOC)) Q:LOC'>0  D
"RTN","GMPLHS",90,0)
 . S NIFN=0
"RTN","GMPLHS",91,0)
 . F  S NIFN=$O(NTE(LOC,NIFN)) Q:NIFN'>0  D
"RTN","GMPLHS",92,0)
 . . S ^TMP("GMPLHS",$J,CNT,"C",LOC,NIFN,0)=$P(NTE(LOC,NIFN),U,3)_U_$P(NTE(LOC,NIFN),U,5)_U_$P(NTE(LOC,NIFN),U,6)
"RTN","GMPLHS",93,0)
 Q
"RTN","GMPLHS",94,0)
SERV(X,SERV) ; Returns Service Name Abbreviation
"RTN","GMPLHS",95,0)
 N ABBREV S ABBREV=$$SVCABBV^GMPLEXT(+X) S:ABBREV="" ABBREV=$E($G(SERV),1,5)
"RTN","GMPLHS",96,0)
 Q ABBREV
"RTN","GMPLHSPL")
0^42^B4867282
"RTN","GMPLHSPL",1,0)
GMPLHSPL ; SLC/MKB -- Problem List HS Component Driver (for export) ;09/20/12
"RTN","GMPLHSPL",2,0)
 ;;2.0;Problem List;**260002**;Aug 25, 1994;Build 26
"RTN","GMPLHSPL",3,0)
GMTSPLST ; SLC/DJP -- Problem List HS Component Driver ;5/27/93  15:35
"RTN","GMPLHSPL",4,0)
 ;;2.5;Health Summary;;
"RTN","GMPLHSPL",5,0)
ACTIVE ;
"RTN","GMPLHSPL",6,0)
 S STATUS="A" D MAIN,KILL Q
"RTN","GMPLHSPL",7,0)
INACT S STATUS="I" D MAIN,KILL Q
"RTN","GMPLHSPL",8,0)
ALL S STATUS="ALL" D MAIN,KILL Q
"RTN","GMPLHSPL",9,0)
MAIN ;Driver
"RTN","GMPLHSPL",10,0)
 D CKP^GMTSUP Q:$D(GMTSQIT)  I 'GMTSNPG D BREAK^GMTSUP
"RTN","GMPLHSPL",11,0)
 D ^GMPLHS
"RTN","GMPLHSPL",12,0)
 I '$D(^TMP("GMPLHS",$J)) D NOPROBS Q
"RTN","GMPLHSPL",13,0)
 W ! D SUBHDR
"RTN","GMPLHSPL",14,0)
 D CKP^GMTSUP Q:$D(GMTSQIT)  W !
"RTN","GMPLHSPL",15,0)
 D WRT
"RTN","GMPLHSPL",16,0)
 Q
"RTN","GMPLHSPL",17,0)
 ;
"RTN","GMPLHSPL",18,0)
KILL ;D KILL^GMPLHS
"RTN","GMPLHSPL",19,0)
 K STATUS
"RTN","GMPLHSPL",20,0)
 Q
"RTN","GMPLHSPL",21,0)
 ;
"RTN","GMPLHSPL",22,0)
NOPROBS ;Indicates problems not on file for patient
"RTN","GMPLHSPL",23,0)
 D CKP^GMTSUP Q:$D(GMTSQIT)
"RTN","GMPLHSPL",24,0)
 N MSG
"RTN","GMPLHSPL",25,0)
 D BLD^DIALOG(1250000.302,,,"MSG")
"RTN","GMPLHSPL",26,0)
 D EN^DDIOL(.MSG)
"RTN","GMPLHSPL",27,0)
 Q
"RTN","GMPLHSPL",28,0)
SUBHDR ; Subheader for Problem List Component
"RTN","GMPLHSPL",29,0)
 N NUM S NUM=GMPCOUNT S:GMPTOTAL>GMPCOUNT NUM=NUM_" of "_GMPTOTAL
"RTN","GMPLHSPL",30,0)
 S NUM=$$EZBLD^DIALOG($S(STATUS="A":1250000.303,STATUS="I":1250000.304,1:1250000.319),NUM)
"RTN","GMPLHSPL",31,0)
 D CKP^GMTSUP Q:$D(GMTSQIT)  ;I 'GMTSNPG D BREAK^GMTSUP
"RTN","GMPLHSPL",32,0)
 D EN^DDIOL(NUM,,"?56")
"RTN","GMPLHSPL",33,0)
 D EN^DDIOL("",,"!")
"RTN","GMPLHSPL",34,0)
 D CKP^GMTSUP Q:$D(GMTSQIT)  ;I 'GMTSNPG D BREAK^GMTSUP
"RTN","GMPLHSPL",35,0)
 D EN^DDIOL($$EZBLD^DIALOG(1250000.305),,"?6")
"RTN","GMPLHSPL",36,0)
 D EN^DDIOL($$EZBLD^DIALOG(1250000.306),,"?46")
"RTN","GMPLHSPL",37,0)
 D EN^DDIOL($$EZBLD^DIALOG(1250000.307),,"?56")
"RTN","GMPLHSPL",38,0)
 D EN^DDIOL("",,"!")
"RTN","GMPLHSPL",39,0)
 Q
"RTN","GMPLHSPL",40,0)
 ;
"RTN","GMPLHSPL",41,0)
WRT ; Writes Problem List Component
"RTN","GMPLHSPL",42,0)
 S GMPI=0 F GMPI=0:0  S GMPI=$O(^TMP("GMPLHS",$J,STATUS,GMPI)) Q:GMPI'>0  D LINE
"RTN","GMPLHSPL",43,0)
 Q
"RTN","GMPLHSPL",44,0)
 ;
"RTN","GMPLHSPL",45,0)
LINE ;Prints individual line
"RTN","GMPLHSPL",46,0)
 D CKP^GMTSUP Q:$D(GMTSQIT)  ;I 'GMTSNPG D BREAK^GMTSUP
"RTN","GMPLHSPL",47,0)
 N PROBLEM,TEXT,I,PROB,MAX
"RTN","GMPLHSPL",48,0)
 S PROBLEM=$G(^TMP("GMPLHS",$J,STATUS,GMPI,0))
"RTN","GMPLHSPL",49,0)
 S PROB=$P(PROBLEM,U,2),MAX=38 D WRAP^GMPLX(PROB,MAX,.TEXT)
"RTN","GMPLHSPL",50,0)
 I STATUS="ALL" D EN^DDIOL($P(PROBLEM,"^",1),,"?3")
"RTN","GMPLHSPL",51,0)
 D EN^DDIOL(TEXT(1),,"?6")
"RTN","GMPLHSPL",52,0)
 D EN^DDIOL($P(PROBLEM,"^",3),,"?46")
"RTN","GMPLHSPL",53,0)
 D EN^DDIOL($P(PROBLEM,"^",4),,"?56")
"RTN","GMPLHSPL",54,0)
 D EN^DDIOL("",,"!")
"RTN","GMPLHSPL",55,0)
 I TEXT>1 F I=2:1:TEXT D
"RTN","GMPLHSPL",56,0)
 . D EN^DDIOL(TEXT(I),,"?8")
"RTN","GMPLHSPL",57,0)
 . D EN^DDIOL("",,"!")
"RTN","GMPLHSPL",58,0)
 Q
"RTN","GMPLMENU")
0^43^B17048988
"RTN","GMPLMENU",1,0)
GMPLMENU ; SLC/MKB -- VALM Utilities for Add Menu sub-list ;09/14/12
"RTN","GMPLMENU",2,0)
 ;;2.0;Problem List;**11,260002**;Aug 25, 1994;Build 26
"RTN","GMPLMENU",3,0)
HDR ; -- header code
"RTN","GMPLMENU",4,0)
 N PAT,NUM,LIST S NUM=$$EZBLD^DIALOG(1250000.308,GMPLCNT)
"RTN","GMPLMENU",5,0)
 S PAT=$P(GMPDFN,U,2)_"  ("_$P(GMPDFN,U,3)_")"
"RTN","GMPLMENU",6,0)
 S VALMHDR(1)=PAT_$J(NUM,79-$L(PAT)),LIST=$P(GMPLSLST,U,2)
"RTN","GMPLMENU",7,0)
 S VALMHDR(2)=$J(LIST,$L(LIST)\2+41)
"RTN","GMPLMENU",8,0)
 Q
"RTN","GMPLMENU",9,0)
 ;
"RTN","GMPLMENU",10,0)
HELP ; -- help code
"RTN","GMPLMENU",11,0)
 N CNT,MSG,DIR S CNT=+$G(^TMP("GMPLMENU",$J,"LIST",0))
"RTN","GMPLMENU",12,0)
 D BLD^DIALOG(1250000.309,CNT,,"MSG")
"RTN","GMPLMENU",13,0)
 D EN^DDIOL(.MSG)
"RTN","GMPLMENU",14,0)
 I VALMCNT>10 D EN^DDIOL($$EZBLD^DIALOG(1250000.310))
"RTN","GMPLMENU",15,0)
 S DIR(0)="EA"
"RTN","GMPLMENU",16,0)
 D BLD^DIALOG(1250000.311,,,"DIR(""A"")")
"RTN","GMPLMENU",17,0)
 D ^DIR
"RTN","GMPLMENU",18,0)
 S VALMSG=$$MSG,VALMBCK=$S(VALMCC:"",1:"R")
"RTN","GMPLMENU",19,0)
 Q
"RTN","GMPLMENU",20,0)
EXIT ; -- exit code
"RTN","GMPLMENU",21,0)
 N I F I=0:0 S I=$O(XQORM("KEY",I)) Q:I'>0  K XQORM("KEY",I)
"RTN","GMPLMENU",22,0)
 K ^TMP("GMPLMENU",$J),GMPLCNT
"RTN","GMPLMENU",23,0)
 Q
"RTN","GMPLMENU",24,0)
 ;
"RTN","GMPLMENU",25,0)
MSG() ; -- set LMgr msg bar
"RTN","GMPLMENU",26,0)
 Q $$EZBLD^DIALOG(1250000.312)
"RTN","GMPLMENU",27,0)
 ;
"RTN","GMPLMENU",28,0)
BUILD ; -- Build ^TMP("GMPLMENU",$J,"LIST") list to display
"RTN","GMPLMENU",29,0)
 N I,LCNT,NUM,ITEM,CODE,GRP,PROBS,ADDED
"RTN","GMPLMENU",30,0)
 S (GRP,NUM,LCNT)=0 D CLEAN^VALM10
"RTN","GMPLMENU",31,0)
 F  S GRP=$O(^TMP("GMPLMENU",$J,GRP)) Q:GRP'>0  D
"RTN","GMPLMENU",32,0)
 . S ITEM=$G(^TMP("GMPLMENU",$J,GRP,0)),PROBS=+$P(ITEM,U,2)
"RTN","GMPLMENU",33,0)
 . I 'PROBS D  Q
"RTN","GMPLMENU",34,0)
 . . S LCNT=LCNT+1,NUM=NUM+1,^TMP("GMPLMENU",$J,"IDX",NUM)=U_GRP_U_LCNT
"RTN","GMPLMENU",35,0)
 . . S ^TMP("GMPLMENU",$J,"LIST",LCNT,0)=$J(NUM,5)_" "_$P(ITEM,U)_" ..."
"RTN","GMPLMENU",36,0)
 . . D CNTRL^VALM10(LCNT,1,5,IOINHI,IOINORM)
"RTN","GMPLMENU",37,0)
BLD1 . I LCNT,^TMP("GMPLMENU",$J,"LIST",LCNT,0)'="   " S LCNT=LCNT+1,^TMP("GMPLMENU",$J,"LIST",LCNT,0)="   "
"RTN","GMPLMENU",38,0)
 . S:+$G(GMPLGRP)=GRP VALMBG=LCNT+1 ; start list display here
"RTN","GMPLMENU",39,0)
 . I $L($P(ITEM,U)) D  ; have a hdr
"RTN","GMPLMENU",40,0)
 . . S LCNT=LCNT+1,^TMP("GMPLMENU",$J,"LIST",LCNT,0)="      "_$P(ITEM,U)
"RTN","GMPLMENU",41,0)
 . . D CNTRL^VALM10(LCNT,7,$L($P(ITEM,U)),IOUON,IOUOFF)
"RTN","GMPLMENU",42,0)
 . S I=0 F  S I=$O(^TMP("GMPLMENU",$J,GRP,I)) Q:I'>0  D
"RTN","GMPLMENU",43,0)
 . . S LCNT=LCNT+1,NUM=NUM+1
"RTN","GMPLMENU",44,0)
 . . S ITEM=$G(^TMP("GMPLMENU",$J,GRP,I)),CODE=$P(ITEM,U,3),ADDED=+$P(ITEM,U,4) ; ITEM=term^text^code, _"^1" if added
"RTN","GMPLMENU",45,0)
 . . S ^TMP("GMPLMENU",$J,"LIST",LCNT,0)=$S(ADDED:" X",1:"  ")_$J(NUM,3)_" "_$P(ITEM,U,2)_$S($L(CODE):" ("_CODE_")",1:"")
"RTN","GMPLMENU",46,0)
 . . S ^TMP("GMPLMENU",$J,"IDX",NUM)=I_U_GRP_U_LCNT_U_ITEM
"RTN","GMPLMENU",47,0)
 . . D CNTRL^VALM10(LCNT,1,5,IOINHI,IOINORM)
"RTN","GMPLMENU",48,0)
 . S LCNT=LCNT+1,^TMP("GMPLMENU",$J,"LIST",LCNT,0)="   "
"RTN","GMPLMENU",49,0)
BLDQ S ^TMP("GMPLMENU",$J,"LIST",0)=NUM_U_LCNT,VALMCNT=LCNT,GMPLCNT=0,VALMSG=$$MSG
"RTN","GMPLMENU",50,0)
 D KEYS
"RTN","GMPLMENU",51,0)
 Q
"RTN","GMPLMENU",52,0)
 ;
"RTN","GMPLMENU",53,0)
KEYS ; -- setup XQORM("KEY") array for menu
"RTN","GMPLMENU",54,0)
 N I,PROTCL,NUM S NUM=+$G(^TMP("GMPLMENU",$J,"LIST",0))
"RTN","GMPLMENU",55,0)
 S PROTCL=$$PROTKEY^GMPLEXT("GMPL LIST SELECT ITEM")_"^1"
"RTN","GMPLMENU",56,0)
 F I=1:1:NUM S XQORM("KEY",I)=PROTCL
"RTN","GMPLMENU",57,0)
 S VALMSG=$$MSG
"RTN","GMPLMENU",58,0)
 Q
"RTN","GMPLMENU",59,0)
 ;
"RTN","GMPLMENU",60,0)
CK ; -- check whether to stop processing after each problem
"RTN","GMPLMENU",61,0)
 ; Called from exit action of GMPL LIST XXX protocols
"RTN","GMPLMENU",62,0)
 S:$D(GMPQUIT) XQORPOP=1 K GMPQUIT
"RTN","GMPLMENU",63,0)
 I $D(DTOUT)!($G(VALMBCK)="Q") S VALMBCK="Q" Q
"RTN","GMPLMENU",64,0)
 S VALMBCK="R",VALMSG=$$MSG
"RTN","GMPLMENU",65,0)
 Q
"RTN","GMPLMENU",66,0)
 ;
"RTN","GMPLMENU",67,0)
ITEM ; -- select item from menu
"RTN","GMPLMENU",68,0)
 N NUM,GMPROB,GMPTERM,GMPICD,GMPSAVED,LCNT,LINE,DUP,ITEM,CODE,GRP,PROB,GMPINDEX,MSG,PARM
"RTN","GMPLMENU",69,0)
 S NUM=+$P(XQORNOD(0),U,3) Q:NUM'>0
"RTN","GMPLMENU",70,0)
 S GMPINDEX=$G(^TMP("GMPLMENU",$J,"IDX",NUM)),PROB=+GMPINDEX,GRP=$P(GMPINDEX,U,2)
"RTN","GMPLMENU",71,0)
 I 'PROB D  Q  ; expand category
"RTN","GMPLMENU",72,0)
 . S ITEM=$G(^TMP("GMPLMENU",$J,+GRP,0)) S:'$D(GMPLGRP) GMPLGRP=+GRP
"RTN","GMPLMENU",73,0)
 . S ^TMP("GMPLMENU",$J,+GRP,0)=$P(ITEM,U)_"^1"
"RTN","GMPLMENU",74,0)
 S ITEM=$P(GMPINDEX,U,4,6) ; CLU^text^code
"RTN","GMPLMENU",75,0)
 S GMPTERM=$S(+ITEM>1:$P(ITEM,U,1,2),1:""),GMPROB=$P(ITEM,U,2)
"RTN","GMPLMENU",76,0)
 S CODE=$P(ITEM,U,3),GMPICD=$S('$L(CODE):"799.9",1:CODE)
"RTN","GMPLMENU",77,0)
 S PARM(1)=NUM,PARM(2)=GMPROB
"RTN","GMPLMENU",78,0)
 D BLD^DIALOG(1250000.313,.PARM,,"MSG")
"RTN","GMPLMENU",79,0)
 D EN^DDIOL(.MSG)
"RTN","GMPLMENU",80,0)
 N %
"RTN","GMPLMENU",81,0)
 S %=$$DUPL^GMPLAPI2(.DUP,+GMPDFN,+GMPTERM,GMPROB,0)
"RTN","GMPLMENU",82,0)
 I DUP,'$$DUPLOK^GMPLX(DUP) G ITQ
"RTN","GMPLMENU",83,0)
 D ADD1^GMPL1
"RTN","GMPLMENU",84,0)
ITQ I $D(GMPSAVED) D  D HDR
"RTN","GMPLMENU",85,0)
 . S GMPREBLD=1,GMPLCNT=GMPLCNT+1,LCNT=+$P(GMPINDEX,U,3)
"RTN","GMPLMENU",86,0)
 . S LINE=$G(^TMP("GMPLMENU",$J,"LIST",LCNT,0)),^TMP("GMPLMENU",$J,"LIST",LCNT,0)=" X"_$E(LINE,3,999)
"RTN","GMPLMENU",87,0)
 . S ^TMP("GMPLMENU",$J,+GRP,+PROB)=ITEM_"^1" ; problem added
"RTN","GMPLMENU",88,0)
 Q
"RTN","GMPLMENU",89,0)
 ;
"RTN","GMPLMENU",90,0)
CLU ; -- add problem not on menu, from CLU
"RTN","GMPLMENU",91,0)
 N GMPSAVED,MSG
"RTN","GMPLMENU",92,0)
 D BLD^DIALOG(1250000.314,,,"MSG")
"RTN","GMPLMENU",93,0)
 D EN^DDIOL(.MSG)
"RTN","GMPLMENU",94,0)
 W @IOF D FULL^VALM1,ADD^GMPL1 S VALMBCK="R" I $D(GMPSAVED) S GMPREBLD=1,GMPLCNT=GMPLCNT+1 K VALMHDR
"RTN","GMPLMENU",95,0)
 Q
"RTN","GMPLMGR")
0^44^B20220608
"RTN","GMPLMGR",1,0)
GMPLMGR ; SLC/MKB/AJB -- Problem List VALM Utilities ; 03/11/13
"RTN","GMPLMGR",2,0)
 ;;2.0;Problem List;**21,28,260002**;Aug 25, 1994;Build 26
"RTN","GMPLMGR",3,0)
 ; 28 Feb 00 - MA added view comments accross Divisions
"RTN","GMPLMGR",4,0)
INIT ; -- init variables, list array
"RTN","GMPLMGR",5,0)
 S:'$G(GMPDFN) GMPDFN=$$PAT^GMPLX1
"RTN","GMPLMGR",6,0)
 I +GMPDFN'>0 K GMPDFN S VALMQUIT=1 Q
"RTN","GMPLMGR",7,0)
 S GMPROV=$$REQPROV^GMPLX1
"RTN","GMPLMGR",8,0)
 I +GMPROV'>0 K GMPDFN,GMPROV S VALMQUIT=1 Q
"RTN","GMPLMGR",9,0)
IN1 S GMPVA=$S($G(DUZ("AG"))="V":1,1:0),GMPVAMC=+$G(DUZ(2))
"RTN","GMPLMGR",10,0)
 S (GMPSC,GMPAGTOR,GMPION,GMPGULF)=0 D:GMPVA VADPT^GMPLX1(+GMPDFN) ;reset
"RTN","GMPLMGR",11,0)
 S GMPLVIEW("ACT")="A",GMPLVIEW("PROV")=0
"RTN","GMPLMGR",12,0)
 S GMPLVIEW("VIEW")=$$USERVIEW^GMPLEXT(DUZ)
"RTN","GMPLMGR",13,0)
 K GMPARAM
"RTN","GMPLMGR",14,0)
 D GET^GMPLSITE(.GMPARAM)
"RTN","GMPLMGR",15,0)
 D GETPLIST^GMPLMGR1(.GMPLIST,.GMPTOTAL,.GMPLVIEW)
"RTN","GMPLMGR",16,0)
 D BUILD(.GMPLIST)
"RTN","GMPLMGR",17,0)
 D:$E(GMPLVIEW("VIEW"))="S" CHGCAP^VALM("CLINIC",$$EZBLD^DIALOG(1250000.315))
"RTN","GMPLMGR",18,0)
 S VALMSG=$$MSG^GMPLX
"RTN","GMPLMGR",19,0)
 Q
"RTN","GMPLMGR",20,0)
 ;
"RTN","GMPLMGR",21,0)
BUILD(PLIST) ; -- build list array
"RTN","GMPLMGR",22,0)
 N I
"RTN","GMPLMGR",23,0)
 D CLEAN^VALM10
"RTN","GMPLMGR",24,0)
 K ^TMP("GMPLIDX",$J)
"RTN","GMPLMGR",25,0)
 S (I,GMPCOUNT,VALMCNT)=0
"RTN","GMPLMGR",26,0)
 D:$D(XRTL) T0^%ZOSV ; Start RT Monitor
"RTN","GMPLMGR",27,0)
 F  S I=$O(PLIST(I)) Q:I'>0  D:$D(GMPLUSER) BLDPROB(+PLIST(I)) D:'$D(GMPLUSER) BLDPROB^GMPLMGR2(+PLIST(I))
"RTN","GMPLMGR",28,0)
 S ^TMP("GMPL",$J,0)=+$G(GMPCOUNT)_U_+$G(VALMCNT) ; # entries^# lines
"RTN","GMPLMGR",29,0)
 S:$D(XRT0) XRTN=$T(+0) D:$D(XRT0) T1^%ZOSV ; Stop RT Monitor
"RTN","GMPLMGR",30,0)
 I $G(GMPCOUNT)'>0 S ^TMP("GMPL",$J,1,0)="   ",^TMP("GMPL",$J,2,0)=$$EZBLD^DIALOG(1250000.316)
"RTN","GMPLMGR",31,0)
 Q
"RTN","GMPLMGR",32,0)
BLDPROB(IFN) ; Add problem line
"RTN","GMPLMGR",33,0)
 N GMPL,DELETED,STATUS,PROBLEM,LINE,TEXT,NAME,TRANS,I,DATE,%
"RTN","GMPLMGR",34,0)
 S %=$$DETAILX^GMPLAPI2(.GMPL,IFN) Q:'%
"RTN","GMPLMGR",35,0)
 S DELETED=($E(GMPL("CONDITION"))="H")
"RTN","GMPLMGR",36,0)
 S TRANS=($E(GMPL("CONDITION"))="T")
"RTN","GMPLMGR",37,0)
 S STATUS=$E(GMPL("STATUS"))
"RTN","GMPLMGR",38,0)
 S DATE=$J(GMPL("MODIFIED"),8)
"RTN","GMPLMGR",39,0)
 S PROBLEM=$S(DELETED:$$EZBLD^DIALOG(1250000.317),1:GMPL("NARRATIVE"))
"RTN","GMPLMGR",40,0)
 I STATUS="A",GMPL("ONSET"),'DELETED S PROBLEM=PROBLEM_$$EZBLD^DIALOG(1250000.318,GMPL("ONSET"))
"RTN","GMPLMGR",41,0)
 I STATUS="I",GMPL("RESOLVED"),'DELETED S PROBLEM=PROBLEM_$$EZBLD^DIALOG(1250000.155,GMPL("RESOLVED"))
"RTN","GMPLMGR",42,0)
 D WRAP^GMPLX(PROBLEM,40,.TEXT) ; format text to 41 chr
"RTN","GMPLMGR",43,0)
 I $E(GMPLVIEW("VIEW"))="S" S NAME=GMPL("SERVICE")_"/"_$$FMTNAME^GMPLX1(GMPL("PROVIDER"))
"RTN","GMPLMGR",44,0)
 E  S NAME=GMPL("CLINIC")
"RTN","GMPLMGR",45,0)
 ; Build line of text
"RTN","GMPLMGR",46,0)
 S GMPCOUNT=+$G(GMPCOUNT)+1
"RTN","GMPLMGR",47,0)
 S LINE=$$SETFLD^VALM1(GMPCOUNT,"","NUMBER")
"RTN","GMPLMGR",48,0)
 S:STATUS="A" STATUS=$S($E(GMPL("PRIORITY"))="A":"*",1:"") ; reset for priority
"RTN","GMPLMGR",49,0)
 S LINE=$$SETFLD^VALM1(STATUS,LINE,"STATUS")
"RTN","GMPLMGR",50,0)
 S LINE=$$SETFLD^VALM1(TEXT(1),LINE,"PROBLEM")
"RTN","GMPLMGR",51,0)
 S LINE=$$SETFLD^VALM1(DATE,LINE,"DATE")
"RTN","GMPLMGR",52,0)
 S LINE=$$SETFLD^VALM1(NAME,LINE,"CLINIC")
"RTN","GMPLMGR",53,0)
 S VALMCNT=+$G(VALMCNT)+1
"RTN","GMPLMGR",54,0)
 S ^TMP("GMPL",$J,VALMCNT,0)=LINE,^TMP("GMPL",$J,"IDX",VALMCNT,GMPCOUNT)=""
"RTN","GMPLMGR",55,0)
 S ^TMP("GMPLIDX",$J,GMPCOUNT)=VALMCNT_U_IFN
"RTN","GMPLMGR",56,0)
 I GMPARAM("VER"),TRANS D
"RTN","GMPLMGR",57,0)
 . S LINE=$E(LINE,1,4)_"$"_$E(LINE,6,79)
"RTN","GMPLMGR",58,0)
 . S ^TMP("GMPL",$J,VALMCNT,0)=LINE
"RTN","GMPLMGR",59,0)
 . D CNTRL^VALM10(VALMCNT,5,1,IOINHI,IOINORM)
"RTN","GMPLMGR",60,0)
 ; added for Code Set Versioning (CSV) - annotates inactive ICD code with #
"RTN","GMPLMGR",61,0)
 I '$$CODESTS^GMPLX(IFN,DT) D
"RTN","GMPLMGR",62,0)
 . S LINE=$E(LINE,1,4)_"#"_$E(LINE,6,79)
"RTN","GMPLMGR",63,0)
 . S ^TMP("GMPL",$J,VALMCNT,0)=LINE
"RTN","GMPLMGR",64,0)
 . D CNTRL^VALM10(VALMCNT,5,1,IOINHI,IOINORM)
"RTN","GMPLMGR",65,0)
 Q:DELETED
"RTN","GMPLMGR",66,0)
 ; Add text to array
"RTN","GMPLMGR",67,0)
 I TEXT>1 F I=2:1:TEXT D
"RTN","GMPLMGR",68,0)
 . S LINE="",LINE=$$SETFLD^VALM1(TEXT(I),LINE,"PROBLEM")
"RTN","GMPLMGR",69,0)
 . S VALMCNT=VALMCNT+1,^TMP("GMPL",$J,VALMCNT,0)=LINE
"RTN","GMPLMGR",70,0)
 . S ^TMP("GMPL",$J,"IDX",VALMCNT,GMPCOUNT)=""
"RTN","GMPLMGR",71,0)
 F I=1:1:GMPL("COMMENT") D
"RTN","GMPLMGR",72,0)
 . S VALMCNT=VALMCNT+1
"RTN","GMPLMGR",73,0)
 . S ^TMP("GMPL",$J,"IDX",VALMCNT,GMPCOUNT)=""
"RTN","GMPLMGR",74,0)
 . S ^TMP("GMPL",$J,VALMCNT,0)="        "_$P(GMPL("COMMENT",I),U,3)
"RTN","GMPLMGR",75,0)
 Q
"RTN","GMPLMGR",76,0)
 ;
"RTN","GMPLMGR",77,0)
HDR ; -- header code
"RTN","GMPLMGR",78,0)
 N HDR,LNM,FNM,PAT,NUM,MSG,PARAM
"RTN","GMPLMGR",79,0)
 S PAT=$P(GMPDFN,U,2)_"  ("_$P(GMPDFN,U,3)_")"
"RTN","GMPLMGR",80,0)
 S NUM=GMPCOUNT
"RTN","GMPLMGR",81,0)
 S PARAM(1)=NUM,PARAM(2)=GMPTOTAL
"RTN","GMPLMGR",82,0)
 S:GMPTOTAL>GMPCOUNT NUM=$$EZBLD^DIALOG(1250000.507,.PARAM)
"RTN","GMPLMGR",83,0)
 S MSG=$S(GMPLVIEW("ACT")="A":1250000.619,GMPLVIEW("ACT")="I":1250000.620,1:1250000.621)
"RTN","GMPLMGR",84,0)
 S NUM=$$EZBLD^DIALOG(MSG,NUM)
"RTN","GMPLMGR",85,0)
 S VALMHDR(1)=PAT_$J(NUM,79-$L(PAT))
"RTN","GMPLMGR",86,0)
 S HDR=$S(GMPLVIEW("ACT")="I":$$EZBLD^DIALOG(1250000.183),GMPLVIEW("ACT")="A":$$EZBLD^DIALOG(1250000.182),1:$$EZBLD^DIALOG(1250000.320))
"RTN","GMPLMGR",87,0)
 I $L(GMPLVIEW("VIEW"))>2 S HDR=HDR_$S($E(GMPLVIEW("VIEW"))="S":$$EZBLD^DIALOG(1250000.321),1:$$EZBLD^DIALOG(1250000.322)) ; screened
"RTN","GMPLMGR",88,0)
 S HDR=HDR_$$EZBLD^DIALOG(1250000.323)
"RTN","GMPLMGR",89,0)
 S:GMPLVIEW("PROV") LNM=$P($P(GMPLVIEW("PROV"),U,2),","),FNM=$P($P(GMPLVIEW("PROV"),U,2),",",2),HDR=HDR_$$EZBLD^DIALOG(1250000.324,FNM_" "_LNM)
"RTN","GMPLMGR",90,0)
 S VALMHDR(2)=$J(HDR,$L(HDR)\2+41)
"RTN","GMPLMGR",91,0)
 Q
"RTN","GMPLMGR",92,0)
 ;
"RTN","GMPLMGR",93,0)
HELP ; -- help code
"RTN","GMPLMGR",94,0)
 N DIR,MSG
"RTN","GMPLMGR",95,0)
 S DIR(0)="EA"
"RTN","GMPLMGR",96,0)
 S MSG=$S(GMPARAM("VER"):1250000.326,1:1250000.325)
"RTN","GMPLMGR",97,0)
 D BLD^DIALOG(MSG,,,"DIR(""A"")")
"RTN","GMPLMGR",98,0)
 D ^DIR
"RTN","GMPLMGR",99,0)
 S VALMSG=$$MSG^GMPLX,VALMBCK=$S(VALMCC:"",1:"R")
"RTN","GMPLMGR",100,0)
 Q
"RTN","GMPLMGR1")
0^45^B21525748
"RTN","GMPLMGR1",1,0)
GMPLMGR1 ; SLC/MKB -- Problem List VALM Utilities cont ;8/9/13
"RTN","GMPLMGR1",2,0)
 ;;2.0;Problem List;**10,260002**;Aug 25, 1994;Build 26
"RTN","GMPLMGR1",3,0)
NEWPAT ; select new patient
"RTN","GMPLMGR1",4,0)
 N NEWPT S VALMBCK="R"
"RTN","GMPLMGR1",5,0)
 I GMPARAM("PRT"),$D(GMPRINT) D AUTO^GMPLMGR2 I $D(DTOUT) S VALMBCK="Q" Q
"RTN","GMPLMGR1",6,0)
 W ! D FULL^VALM1
"RTN","GMPLMGR1",7,0)
 S NEWPT=$S($D(ORVP)&(+$$VERSION^XPDUTL("OR")<3):$$OEPAT,1:$$PAT^GMPLX1)
"RTN","GMPLMGR1",8,0)
 I (+NEWPT>0),(+NEWPT'=+GMPDFN) D
"RTN","GMPLMGR1",9,0)
 . S GMPDFN=NEWPT,VALMBG=1
"RTN","GMPLMGR1",10,0)
 . S (GMPSC,GMPAGTOR,GMPION,GMPGULF)=0 D:GMPVA VADPT^GMPLX1(+GMPDFN)
"RTN","GMPLMGR1",11,0)
 . D GETPLIST(.GMPLIST,.GMPTOTAL,.GMPLVIEW) K GMPRINT
"RTN","GMPLMGR1",12,0)
 . D BUILD^GMPLMGR(.GMPLIST),HDR^GMPLMGR
"RTN","GMPLMGR1",13,0)
 S VALMSG=$$MSG^GMPLX
"RTN","GMPLMGR1",14,0)
 Q
"RTN","GMPLMGR1",15,0)
 ;
"RTN","GMPLMGR1",16,0)
OEPAT() ; Calls OE/RR to return new patient, or -1
"RTN","GMPLMGR1",17,0)
 N DFN,VADM,Y
"RTN","GMPLMGR1",18,0)
 D IN^OR I +ORVP'>0 Q -1
"RTN","GMPLMGR1",19,0)
 I +ORVP=+GMPDFN Q GMPDFN
"RTN","GMPLMGR1",20,0)
 S DFN=+ORVP D DEM^VADPT
"RTN","GMPLMGR1",21,0)
 S Y=DFN_U_VADM(1)_U_$E(VADM(1))_VA("BID")
"RTN","GMPLMGR1",22,0)
 I VADM(6) S Y=Y_U_+VADM(6) ; date of death
"RTN","GMPLMGR1",23,0)
 Q Y
"RTN","GMPLMGR1",24,0)
 ;
"RTN","GMPLMGR1",25,0)
INACTIVE ; Incl inactive problems
"RTN","GMPLMGR1",26,0)
 N ACTIVE,%
"RTN","GMPLMGR1",27,0)
 S VALMBCK=$S(VALMCC:"",1:"R")
"RTN","GMPLMGR1",28,0)
 I GMPLVIEW("ACT")="" D  Q
"RTN","GMPLMGR1",29,0)
 . D EN^DDIOL($$EZBLD^DIALOG(1250000.327),,"!!") H 1
"RTN","GMPLMGR1",30,0)
 S %=$$HASPRBS^GMPLAPI4(.ACTIVE,+GMPDFN,"I")
"RTN","GMPLMGR1",31,0)
 I 'ACTIVE D  Q
"RTN","GMPLMGR1",32,0)
 . D EN^DDIOL($$EZBLD^DIALOG(1250000.328),,"!!")
"RTN","GMPLMGR1",33,0)
 . D EN^DDIOL("",,"!")
"RTN","GMPLMGR1",34,0)
 . H 1
"RTN","GMPLMGR1",35,0)
 S GMPLVIEW("ACT")="",VALMBCK="R",VALMSG=$$MSG^GMPLX
"RTN","GMPLMGR1",36,0)
 D GETPLIST(.GMPLIST,.GMPTOTAL,.GMPLVIEW),BUILD^GMPLMGR(.GMPLIST),HDR^GMPLMGR
"RTN","GMPLMGR1",37,0)
 Q
"RTN","GMPLMGR1",38,0)
 ;
"RTN","GMPLMGR1",39,0)
NEWSRV ; select new service
"RTN","GMPLMGR1",40,0)
 N DIC,NEWVIEW,VIEW,PROMPT,HELPMSG Q:$D(GMPQUIT)
"RTN","GMPLMGR1",41,0)
 S DIC="^DIC(49,",DIC("S")="I $P(^(0),U,9)=""C"""
"RTN","GMPLMGR1",42,0)
 S VIEW="S",PROMPT=$$EZBLD^DIALOG(1250000.330),HELPMSG="LISTSERV"
"RTN","GMPLMGR1",43,0)
 D NEW Q:$D(GMPQUIT)
"RTN","GMPLMGR1",44,0)
 I NEWVIEW'=$E(GMPLVIEW("VIEW"),2,99) S GMPLVIEW("VIEW")="S"_NEWVIEW,GMPREBLD=1
"RTN","GMPLMGR1",45,0)
 Q
"RTN","GMPLMGR1",46,0)
 ;
"RTN","GMPLMGR1",47,0)
NEWCLIN ; Select new clinic
"RTN","GMPLMGR1",48,0)
 N DIC,NEWVIEW,VIEW,PROMPT,HELPMSG Q:$D(GMPQUIT)
"RTN","GMPLMGR1",49,0)
 S DIC="^SC(",DIC("S")="I $P(^(0),U,3)=""C"""
"RTN","GMPLMGR1",50,0)
 S VIEW="C",PROMPT=$$EZBLD^DIALOG(1250000.332),HELPMSG="LISTCLIN"
"RTN","GMPLMGR1",51,0)
 D NEW Q:$D(GMPQUIT)
"RTN","GMPLMGR1",52,0)
 I NEWVIEW'=$E(GMPLVIEW("VIEW"),2,99) S GMPLVIEW("VIEW")="C"_NEWVIEW,GMPREBLD=1
"RTN","GMPLMGR1",53,0)
 Q
"RTN","GMPLMGR1",54,0)
 ;
"RTN","GMPLMGR1",55,0)
NEW ; prompt, from NEWSRV or NEWCLIN
"RTN","GMPLMGR1",56,0)
 N X,Y,MSG,DIR S NEWVIEW="",DIC(0)="EMQ"
"RTN","GMPLMGR1",57,0)
 S MSG=$S(VIEW="S":1250000.329,1:1250000.331)
"RTN","GMPLMGR1",58,0)
 D EN^DDIOL($$EZBLD^DIALOG(MSG),,"!!")
"RTN","GMPLMGR1",59,0)
 F  D  Q:$D(GMPQUIT)!(X="")
"RTN","GMPLMGR1",60,0)
 . K DIR,DTOUT
"RTN","GMPLMGR1",61,0)
 . S DIR(0)="EA"
"RTN","GMPLMGR1",62,0)
 . S DIR("A")=PROMPT
"RTN","GMPLMGR1",63,0)
 . D ^DIR
"RTN","GMPLMGR1",64,0)
 . I ($D(DTOUT))!(X["^") S GMPQUIT=1 Q
"RTN","GMPLMGR1",65,0)
 . Q:X=""
"RTN","GMPLMGR1",66,0)
 . I X="?" D  Q
"RTN","GMPLMGR1",67,0)
 . . K MSG
"RTN","GMPLMGR1",68,0)
 . . D BLD^DIALOG($S(VIEW="S":1250000.333,1:1250000.334),,,"MSG")
"RTN","GMPLMGR1",69,0)
 . . D EN^DDIOL($$EZBLD^DIALOG(.MSG))
"RTN","GMPLMGR1",70,0)
 . I X["??" D @HELPMSG Q
"RTN","GMPLMGR1",71,0)
 . D ^DIC I Y>0 S NEWVIEW=NEWVIEW_+Y_"/",PROMPT=$$EZBLD^DIALOG(1250000.335)
"RTN","GMPLMGR1",72,0)
 I '$D(GMPQUIT),$L(NEWVIEW) S NEWVIEW="/"_NEWVIEW
"RTN","GMPLMGR1",73,0)
 Q
"RTN","GMPLMGR1",74,0)
 ;
"RTN","GMPLMGR1",75,0)
LISTSERV ; List clinical services
"RTN","GMPLMGR1",76,0)
 N I,CNT,Y,DIR,DTOUT S CNT=0,Y=""
"RTN","GMPLMGR1",77,0)
 D EN^DDIOL($$EZBLD^DIALOG(1250000.244))
"RTN","GMPLMGR1",78,0)
 F I=0:0 S I=$O(^DIC(49,"F","C",I)) Q:I'>0  D  Q:Y'=""
"RTN","GMPLMGR1",79,0)
 . S CNT=CNT+1 I '(CNT#8) D  Q:Y="^"
"RTN","GMPLMGR1",80,0)
 . . K DIR,DTOUT
"RTN","GMPLMGR1",81,0)
 . . S DIR(0)="EA"
"RTN","GMPLMGR1",82,0)
 . . S DIR("A")=$$EZBLD^DIALOG(1250000.245)
"RTN","GMPLMGR1",83,0)
 . . D ^DIR
"RTN","GMPLMGR1",84,0)
 . . S:$D(DTOUT) Y="^"
"RTN","GMPLMGR1",85,0)
 . D EN^DDIOL("   "_$P(^DIC(49,I,0),U))
"RTN","GMPLMGR1",86,0)
 . D:$P(^DIC(49,I,0),U,4) EN^DDIOL("  ("_$P(^DIC(49,$P(^DIC(49,I,0),U,4),0),U)_")",,"?0")
"RTN","GMPLMGR1",87,0)
 D EN^DDIOL("",,"!") Q
"RTN","GMPLMGR1",88,0)
 ;
"RTN","GMPLMGR1",89,0)
LISTCLIN ; List clinics
"RTN","GMPLMGR1",90,0)
 N I,CNT,Y,DIR,DTOUT S CNT=0,Y=""
"RTN","GMPLMGR1",91,0)
 D EN^DDIOL($$EZBLD^DIALOG(1250000.244))
"RTN","GMPLMGR1",92,0)
 F I=0:0 S I=$O(^SC(I)) Q:I'>0  D  Q:Y'=""
"RTN","GMPLMGR1",93,0)
 . Q:$P($G(^SC(I,0)),U,3)'="C"  ; must be a clinic
"RTN","GMPLMGR1",94,0)
 . S CNT=CNT+1 I '(CNT#8) D  Q:Y="^"
"RTN","GMPLMGR1",95,0)
 . . K DIR,DTOUT
"RTN","GMPLMGR1",96,0)
 . . S DIR(0)="EA"
"RTN","GMPLMGR1",97,0)
 . . S DIR("A")=$$EZBLD^DIALOG(1250000.245)
"RTN","GMPLMGR1",98,0)
 . . D ^DIR
"RTN","GMPLMGR1",99,0)
 . . S:$D(DTOUT) Y="^"
"RTN","GMPLMGR1",100,0)
 . D EN^DDIOL("   "_$P($G(^SC(I,0)),U))
"RTN","GMPLMGR1",101,0)
 D EN^DDIOL("",,"!") Q
"RTN","GMPLMGR1",102,0)
 ;
"RTN","GMPLMGR1",103,0)
NEWPROV ; select new provider
"RTN","GMPLMGR1",104,0)
 N X,Y,DIC,NEWPROV,DIR,DTOUT,MSG Q:$D(GMPQUIT)  S NEWPROV=""
"RTN","GMPLMGR1",105,0)
 S DIC="^VA(200,",DIC(0)="EMQ" ; screen on PROVIDER key ??
"RTN","GMPLMGR1",106,0)
 D EN^DDIOL($$EZBLD^DIALOG(1250000.336),,"!!")
"RTN","GMPLMGR1",107,0)
NPRV K DIR,DTOUT
"RTN","GMPLMGR1",108,0)
 S DIR(0)="EA"
"RTN","GMPLMGR1",109,0)
 S DIR("A")=$$EZBLD^DIALOG(1250000.337)
"RTN","GMPLMGR1",110,0)
 D BLD^DIALOG(1250000.338,,,"DIR(""?"")")
"RTN","GMPLMGR1",111,0)
 D ^DIR
"RTN","GMPLMGR1",112,0)
 I $D(DTOUT)!X["^" S GMPQUIT=1 Q
"RTN","GMPLMGR1",113,0)
 Q:X=""
"RTN","GMPLMGR1",114,0)
 I X["??" D NPHELP^GMPLEDT2 G NPRV
"RTN","GMPLMGR1",115,0)
 D ^DIC S:+Y NEWPROV=Y I +Y'>0 G NPRV
"RTN","GMPLMGR1",116,0)
 I +NEWPROV'=+GMPLVIEW("PROV") S GMPLVIEW("PROV")=NEWPROV,GMPREBLD=1
"RTN","GMPLMGR1",117,0)
 Q
"RTN","GMPLMGR1",118,0)
 ;
"RTN","GMPLMGR1",119,0)
KEYS ; adds to XQORM("KEY") array
"RTN","GMPLMGR1",120,0)
 I $G(GMPARAM("VER")) S XQORM("KEY","$")=$$PROTKEY^GMPLEXT("GMPL VERIFY")_"^1"
"RTN","GMPLMGR1",121,0)
KEY S XQORM("KEY","=")=$$PROTKEY^GMPLEXT("VALM NEXT SCREEN")_"^1"
"RTN","GMPLMGR1",122,0)
 Q
"RTN","GMPLMGR1",123,0)
 ;
"RTN","GMPLMGR1",124,0)
GETPLIST(PLIST,TOTAL,VIEW) ; Build PLIST(#)=IFN for view
"RTN","GMPLMGR1",125,0)
 N STBEG,STEND,ST,CNT,IFN,RECORD,DATE,LIST,PROV,%
"RTN","GMPLMGR1",126,0)
 K PLIST
"RTN","GMPLMGR1",127,0)
 D:'$G(GMPARAM("QUIET")) EN^DDIOL($$EZBLD^DIALOG(1250000.339))
"RTN","GMPLMGR1",128,0)
 S PROV=$S(VIEW("PROV"):VIEW("PROV"),1:"")
"RTN","GMPLMGR1",129,0)
 S %=$$GETPLIST^GMPLAPI4(.PLIST,+GMPDFN,VIEW("ACT"),GMPARAM("REV"),PROV,VIEW("VIEW"),1)
"RTN","GMPLMGR1",130,0)
 S TOTAL=PLIST
"RTN","GMPLMGR1",131,0)
 Q
"RTN","GMPLMGR2")
0^46^B21104761
"RTN","GMPLMGR2",1,0)
GMPLMGR2 ; SLC/MKB/KER/AJB -- Problem List VALM Utilities cont ;03/25/13
"RTN","GMPLMGR2",2,0)
 ;;2.0;Problem List;**26,28,260002**;Aug 25, 1994;Build 26
"RTN","GMPLMGR2",3,0)
 ;
"RTN","GMPLMGR2",4,0)
 ; External References
"RTN","GMPLMGR2",5,0)
 ;   DBIA 10082  ^ICD9(
"RTN","GMPLMGR2",6,0)
 ;   DBIA   872  ^ORD(101
"RTN","GMPLMGR2",7,0)
 ;   DBIA 10026  ^DIR
"RTN","GMPLMGR2",8,0)
 ;   DBIA 10116  $$SETFLD^VALM1
"RTN","GMPLMGR2",9,0)
 ;   DBIA 10116  CLEAR^VALM1
"RTN","GMPLMGR2",10,0)
 ;   DBIA 10140  EN^XQORM
"RTN","GMPLMGR2",11,0)
 ;                      
"RTN","GMPLMGR2",12,0)
BLDPROB(IFN) ; Build Line for Problem in List
"RTN","GMPLMGR2",13,0)
 ;   Input INF   Pointer to Problem file 9000011
"RTN","GMPLMGR2",14,0)
 ;   Expects GMPCOUNT
"RTN","GMPLMGR2",15,0)
 N GMPL,RESOLVED,TEXT,I,LINE,STR,SC,SP,ICD,ONSET,PROBLEM,STATUS,DELETED,ICDACTV,%
"RTN","GMPLMGR2",16,0)
 Q:'$D(GMPCOUNT)
"RTN","GMPLMGR2",17,0)
 S %=$$DETAILX^GMPLAPI2(.GMPL,IFN)
"RTN","GMPLMGR2",18,0)
 S DELETED=($E(GMPL("CONDITION"))="H")
"RTN","GMPLMGR2",19,0)
 S STATUS=$E(GMPL("STATUS"))
"RTN","GMPLMGR2",20,0)
 S PROBLEM=$S(DELETED:$$EZBLD^DIALOG(1250000.317),1:GMPL("NARRATIVE"))
"RTN","GMPLMGR2",21,0)
 I 'DELETED,GMPL("ONSET") S PROBLEM=PROBLEM_$$EZBLD^DIALOG(1250000.318,GMPL("ONSET"))
"RTN","GMPLMGR2",22,0)
 S RESOLVED=GMPL("RESOLVED")
"RTN","GMPLMGR2",23,0)
 S ICD=GMPL("DIAGNOSIS")
"RTN","GMPLMGR2",24,0)
 S SC=GMPL("SC")
"RTN","GMPLMGR2",25,0)
 S SP=$S(GMPL("EXPOSURE"):GMPL("EXPOSURE",1),1:"")
"RTN","GMPLMGR2",26,0)
 S GMPCOUNT=GMPCOUNT+1
"RTN","GMPLMGR2",27,0)
 D WRAP^GMPLX(PROBLEM,40,.TEXT)
"RTN","GMPLMGR2",28,0)
 S LINE=$$SETFLD^VALM1(GMPCOUNT,"","NUMBER")
"RTN","GMPLMGR2",29,0)
 S %=$$CODESTS^GMPLAPI2(.ICDACTV,IFN)
"RTN","GMPLMGR2",30,0)
 I 'ICDACTV D
"RTN","GMPLMGR2",31,0)
 . S:STATUS="A" LINE=$$SETFLD^VALM1(" #",LINE,"STATUS")
"RTN","GMPLMGR2",32,0)
 . S:STATUS="I" LINE=$$SETFLD^VALM1(STATUS_"#",LINE,"STATUS")
"RTN","GMPLMGR2",33,0)
 E  S:STATUS="I" LINE=$$SETFLD^VALM1(STATUS,LINE,"STATUS")
"RTN","GMPLMGR2",34,0)
 S LINE=$$SETFLD^VALM1(TEXT(1),LINE,"PROBLEM")
"RTN","GMPLMGR2",35,0)
 S LINE=$$SETFLD^VALM1(ICD,LINE,"ICD")
"RTN","GMPLMGR2",36,0)
 S:$L(SC) LINE=$$SETFLD^VALM1(SC,LINE,"SERV CONNECTED")
"RTN","GMPLMGR2",37,0)
 S:$L(SP) LINE=$$SETFLD^VALM1($$FMTSP(SP),LINE,"EXPOSURE")
"RTN","GMPLMGR2",38,0)
 S LINE=$$SETFLD^VALM1(RESOLVED,LINE,"RESOLVED")
"RTN","GMPLMGR2",39,0)
 S VALMCNT=VALMCNT+1
"RTN","GMPLMGR2",40,0)
 S ^TMP("GMPL",$J,VALMCNT,0)=LINE
"RTN","GMPLMGR2",41,0)
 S ^TMP("GMPLIDX",$J,GMPCOUNT)=VALMCNT_U_IFN
"RTN","GMPLMGR2",42,0)
 I TEXT>1 F I=2:1:TEXT D
"RTN","GMPLMGR2",43,0)
 . S LINE="",LINE=$$SETFLD^VALM1(TEXT(I),LINE,"PROBLEM")
"RTN","GMPLMGR2",44,0)
 . S VALMCNT=VALMCNT+1,^TMP("GMPL",$J,VALMCNT,0)=LINE
"RTN","GMPLMGR2",45,0)
 Q
"RTN","GMPLMGR2",46,0)
 ;
"RTN","GMPLMGR2",47,0)
HELP ; Help Code
"RTN","GMPLMGR2",48,0)
 N DIR
"RTN","GMPLMGR2",49,0)
 S DIR(0)="EA"
"RTN","GMPLMGR2",50,0)
 D BLD^DIALOG(1250000.340,,,"DIR(""A"")")
"RTN","GMPLMGR2",51,0)
 D ^DIR
"RTN","GMPLMGR2",52,0)
 S VALMSG=$$MSG^GMPLX,VALMBCK=$S(VALMCC:"",1:"R")
"RTN","GMPLMGR2",53,0)
 Q
"RTN","GMPLMGR2",54,0)
 ;
"RTN","GMPLMGR2",55,0)
EXIT ; Exit Code
"RTN","GMPLMGR2",56,0)
 I GMPARAM("PRT"),$D(GMPRINT) D AUTO
"RTN","GMPLMGR2",57,0)
 K ^TMP("GMPL",$J),^TMP("GMPLIDX",$J)
"RTN","GMPLMGR2",58,0)
 K XQORM("KEY","="),XQORM("XLATE")
"RTN","GMPLMGR2",59,0)
 K GMPDFN,GMPROV,GMPLVIEW,GMPARAM,VALMBCK,VALMHDR,VALMCNT,GMPCOUNT,GMPLUSER,GMPSC,VALMSG,GMPVAMC,GMPLIST,GMPAGTOR,GMPION,GMPGULF,GMPVA,GMPTOTAL,GMPRINT,AUPNSEX,GMPCLIN
"RTN","GMPLMGR2",60,0)
 K GMPCV,GMPHNC,GMPMST,GMPSHD
"RTN","GMPLMGR2",61,0)
 Q
"RTN","GMPLMGR2",62,0)
 ;
"RTN","GMPLMGR2",63,0)
AUTO ; Print Problem List when Exiting Patient?
"RTN","GMPLMGR2",64,0)
 ;   Called from EXIT,NEWPAT^GMPLMGR1
"RTN","GMPLMGR2",65,0)
 N DIR,X,Y Q:'GMPARAM("PRT")  Q:'$D(GMPRINT)
"RTN","GMPLMGR2",66,0)
 S DIR(0)="YA",DIR("A")=$$EZBLD^DIALOG(1250000.341),DIR("B")="YES"
"RTN","GMPLMGR2",67,0)
 D BLD^DIALOG(1250000.342,,,"DIR(""?"")")
"RTN","GMPLMGR2",68,0)
 D EN^DDIOL($C(7),,"?0")
"RTN","GMPLMGR2",69,0)
 D EN^DDIOL($$EZBLD^DIALOG(1250000.343),,"!!")
"RTN","GMPLMGR2",70,0)
 D ^DIR I $D(DTOUT)!($D(DTOUT)) S GMPQUIT=1 Q
"RTN","GMPLMGR2",71,0)
 Q:'Y  D VAF^GMPLPRNT,DEVICE^GMPLPRNT G:$D(GMPQUIT) AUTQ
"RTN","GMPLMGR2",72,0)
 D CLEAR^VALM1,PRT^GMPLPRNT
"RTN","GMPLMGR2",73,0)
AUTQ ; Quit Auto-Print
"RTN","GMPLMGR2",74,0)
 D KILL^GMPLX
"RTN","GMPLMGR2",75,0)
 Q
"RTN","GMPLMGR2",76,0)
 ;
"RTN","GMPLMGR2",77,0)
SHOW ; Show Current View of List
"RTN","GMPLMGR2",78,0)
 N VIEW,NUM,NAME,MSG S VIEW=$E(GMPLVIEW("VIEW")),NUM=$L(GMPLVIEW("VIEW"),"/")
"RTN","GMPLMGR2",79,0)
 S MSG=$S(VIEW="S":1250000.344,1:1250000.345)
"RTN","GMPLMGR2",80,0)
 D EN^DDIOL($$EZBLD^DIALOG(MSG),,"!!")
"RTN","GMPLMGR2",81,0)
 I '((NUM>2)!($L(GMPLVIEW("ACT")))!(GMPLVIEW("PROV"))) W "all problems" Q
"RTN","GMPLMGR2",82,0)
 W $S(GMPLVIEW("ACT")="A":"active",GMPLVIEW("ACT")="I":"inactive",1:"all")_" problems"
"RTN","GMPLMGR2",83,0)
 I NUM>2 W " from "_$S(GMPLVIEW("VIEW")=$$USERVIEW^GMPLEXT(DUZ):"preferred",1:"selected")_$S(VIEW="S":" services",1:" clinics")
"RTN","GMPLMGR2",84,0)
 I GMPLVIEW("PROV") S NAME=$$NAME^GMPLX1(GMPLVIEW("PROV")) W:($X+$L(NAME)+4>80) ! W " by "_NAME
"RTN","GMPLMGR2",85,0)
 Q
"RTN","GMPLMGR2",86,0)
 ;
"RTN","GMPLMGR2",87,0)
ENVIEW ; Entry Action to Display Appropriate View Menu
"RTN","GMPLMGR2",88,0)
 N XQORM,X,Y,GMPLX,MSG S GMPLX=0 D SHOW S X="GMPL VIEW "_$S($E(GMPLVIEW("VIEW"))="S":"INPAT",1:"OUTPAT")
"RTN","GMPLMGR2",89,0)
 S XQORM=+$$PROTKEY^GMPLEXT(X)_";ORD(101,",XQORM(0)="3AD"
"RTN","GMPLMGR2",90,0)
 D BLD^DIALOG(1250000.351,,,"MSG")
"RTN","GMPLMGR2",91,0)
 D EN^DDIOL(.MSG)
"RTN","GMPLMGR2",92,0)
 D EN^XQORM F  S GMPLX=$O(Y(GMPLX)) Q:GMPLX'>0  X:$$ENACT^GMPLEXT(+$P(Y(GMPLX),U,2))'="" $$ENACT^GMPLEXT(+$P(Y(GMPLX),U,2))
"RTN","GMPLMGR2",93,0)
 Q
"RTN","GMPLMGR2",94,0)
 ;
"RTN","GMPLMGR2",95,0)
EXVIEW ; Exit Action to Rebuild List w/New View
"RTN","GMPLMGR2",96,0)
 S VALMBCK=$S(VALMCC:"",1:"R") I '$D(GMPQUIT),$G(GMPREBLD) D
"RTN","GMPLMGR2",97,0)
 . S VALMBG=1,VALMBCK="R" D GETPLIST^GMPLMGR1(.GMPLIST,.GMPTOTAL,.GMPLVIEW)
"RTN","GMPLMGR2",98,0)
 . D BUILD^GMPLMGR(.GMPLIST),HDR^GMPLMGR
"RTN","GMPLMGR2",99,0)
 K GMPQUIT,GMPREBLD S VALMSG=$$MSG^GMPLX
"RTN","GMPLMGR2",100,0)
 Q
"RTN","GMPLMGR2",101,0)
 ;
"RTN","GMPLMGR2",102,0)
FMTSP(STR) ; Formats SP for display
"RTN","GMPLMGR2",103,0)
 Q:STR="AGENT ORANGE" $$EZBLD^DIALOG(1250000.352)
"RTN","GMPLMGR2",104,0)
 Q:STR="RADIATION" $$EZBLD^DIALOG(1250000.353)
"RTN","GMPLMGR2",105,0)
 Q:STR="ENV CONTAMINANTS" $$EZBLD^DIALOG(1250000.354)
"RTN","GMPLMGR2",106,0)
 Q:STR="HEAD/NECK CANCER" $$EZBLD^DIALOG(1250000.355)
"RTN","GMPLMGR2",107,0)
 Q:STR="MIL SEXUAL TRAUMA" $$EZBLD^DIALOG(1250000.356)
"RTN","GMPLMGR2",108,0)
 Q ""
"RTN","GMPLP37I")
0^49^B5760390
"RTN","GMPLP37I",1,0)
GMPLP37I ; SLC/MKB/KER -- Save Problem List data ;09/21/12
"RTN","GMPLP37I",2,0)
 ;;2.0;Problem List;**37,260002**;Aug 25, 1994;Build 26
"RTN","GMPLP37I",3,0)
 ;
"RTN","GMPLP37I",4,0)
 ; External References
"RTN","GMPLP37I",5,0)
 ;
"RTN","GMPLP37I",6,0)
FIND(ACTION) ;
"RTN","GMPLP37I",7,0)
 N ARRAY
"RTN","GMPLP37I",8,0)
 D LISTPXRM^GMPLEXT(.ARRAY,ACTION)
"RTN","GMPLP37I",9,0)
 I ACTION=1 D UPD(.ARRAY)
"RTN","GMPLP37I",10,0)
 Q ARRAY
"RTN","GMPLP37I",11,0)
 ;
"RTN","GMPLP37I",12,0)
POST ;
"RTN","GMPLP37I",13,0)
 N ZTDESC,ZTDTH,ZTRTN,ZTSAVE,ZTIO,TEXT,ZTSK
"RTN","GMPLP37I",14,0)
 S ZTDESC="Correction to the Priority field in the PROBLEM file"
"RTN","GMPLP37I",15,0)
 S TEXT=ZTDESC_" has been queued, task number "
"RTN","GMPLP37I",16,0)
 S ZTRTN="QUEUED^GMPLP37I"
"RTN","GMPLP37I",17,0)
 S ZTIO=""
"RTN","GMPLP37I",18,0)
 S ZTDTH=$$NOW^XLFDT
"RTN","GMPLP37I",19,0)
 S ZTREQ="@"
"RTN","GMPLP37I",20,0)
 D ^%ZTLOAD
"RTN","GMPLP37I",21,0)
 I $D(ZTSK) S TEXT=TEXT_ZTSK D MES^XPDUTL(.TEXT)
"RTN","GMPLP37I",22,0)
 Q
"RTN","GMPLP37I",23,0)
QUEUED ;
"RTN","GMPLP37I",24,0)
 N ARRAY,AFTER,BEFORE,CHANGE,CNT
"RTN","GMPLP37I",25,0)
 S CNT=0
"RTN","GMPLP37I",26,0)
 S BEFORE=$$FIND(0)
"RTN","GMPLP37I",27,0)
 I BEFORE=0 D  G SEND
"RTN","GMPLP37I",28,0)
 .S CNT=CNT+1,ARRAY(CNT,0)="No invalid entries found in the PROBLEM file."
"RTN","GMPLP37I",29,0)
 S CNT=CNT+1,ARRAY(CNT,0)="Initial count of invalid entries in the PROBLEM file."
"RTN","GMPLP37I",30,0)
 S CNT=CNT+1,ARRAY(CNT,0)="   "_BEFORE_" Invalid entries in the PROBLEM file."
"RTN","GMPLP37I",31,0)
 S CNT=CNT+1,ARRAY(CNT,0)=" "
"RTN","GMPLP37I",32,0)
 S CHANGE=$$FIND(1)
"RTN","GMPLP37I",33,0)
 S CNT=CNT+1,ARRAY(CNT,0)="Number of entries that were change."
"RTN","GMPLP37I",34,0)
 S CNT=CNT+1,ARRAY(CNT,0)="  "_CHANGE_" entries in the PROBLEM file corrected."
"RTN","GMPLP37I",35,0)
 S CNT=CNT+1,ARRAY(CNT,0)=" "
"RTN","GMPLP37I",36,0)
 S AFTER=$$FIND(0)
"RTN","GMPLP37I",37,0)
 S CNT=CNT+1,ARRAY(CNT,0)="Count of entries that are still invalid."
"RTN","GMPLP37I",38,0)
 S CNT=CNT+1,ARRAY(CNT,0)="  "_AFTER_" Invalid entries in the PROBLEM file."
"RTN","GMPLP37I",39,0)
 ;
"RTN","GMPLP37I",40,0)
SEND ;mailman
"RTN","GMPLP37I",41,0)
 N NL,XMDUZ,XMY,XMZ
"RTN","GMPLP37I",42,0)
 S XMSUB="Correction of invalid entries in the PROBLEM file"
"RTN","GMPLP37I",43,0)
 S XMDUZ=0.5
"RTN","GMPLP37I",44,0)
 ;
"RTN","GMPLP37I",45,0)
RETRY ;Get the message number.
"RTN","GMPLP37I",46,0)
 D XMZ^XMA2
"RTN","GMPLP37I",47,0)
 I XMZ<1 G RETRY
"RTN","GMPLP37I",48,0)
 ;
"RTN","GMPLP37I",49,0)
 ;Load the message
"RTN","GMPLP37I",50,0)
 D LDMSG^GMPLEXT(XMZ,.ARRAY)
"RTN","GMPLP37I",51,0)
 ;
"RTN","GMPLP37I",52,0)
 ;Send message to USER
"RTN","GMPLP37I",53,0)
 S XMY(DUZ)="" D ENT1^XMD Q
"RTN","GMPLP37I",54,0)
 Q
"RTN","GMPLP37I",55,0)
 ;
"RTN","GMPLP37I",56,0)
UPD(ARRAY) ;
"RTN","GMPLP37I",57,0)
 N CNT,DA,DIE,DR
"RTN","GMPLP37I",58,0)
 S DIE="^AUPNPROB(",DR="1.14///@"
"RTN","GMPLP37I",59,0)
 S CNT=0 F  S CNT=$O(ARRAY(CNT)) Q:CNT'>0  D
"RTN","GMPLP37I",60,0)
 .S DA=ARRAY(CNT)
"RTN","GMPLP37I",61,0)
 .D ^DIE
"RTN","GMPLP37I",62,0)
 Q
"RTN","GMPLPREF")
0^50^B17221861
"RTN","GMPLPREF",1,0)
GMPLPREF ; SLC/MKB -- Problem List User Preferences ;09/13/12
"RTN","GMPLPREF",2,0)
 ;;2.0;Problem List;**3,5,260002**;Aug 25, 1994;Build 26
"RTN","GMPLPREF",3,0)
EN ; -- main entry point for GMPL USER PREFS
"RTN","GMPLPREF",4,0)
 D CURRENT^GMPLPRF0(DUZ) Q:'$$CHANGE^GMPLPRF0
"RTN","GMPLPREF",5,0)
 D EN^VALM("GMPL USER PREFS")
"RTN","GMPLPREF",6,0)
 Q
"RTN","GMPLPREF",7,0)
 ;
"RTN","GMPLPREF",8,0)
INIT ; -- init variables and list array
"RTN","GMPLPREF",9,0)
 N MSG
"RTN","GMPLPREF",10,0)
 S GMPLVIEW=$$USERVIEW^GMPLEXT(),GMPLMODE=$E(GMPLVIEW) ; 'S' or 'C'
"RTN","GMPLPREF",11,0)
 S GMPLMODE=$$VIEW^GMPLPRF0(GMPLMODE)
"RTN","GMPLPREF",12,0)
 I GMPLMODE="^" K GMPLVIEW,GMPLMODE S VALMQUIT=1 Q
"RTN","GMPLPREF",13,0)
 I $$ALL^GMPLPRF0(GMPLMODE,$L(GMPLVIEW,"/")) D  Q
"RTN","GMPLPREF",14,0)
 . D SAVE^GMPLPRF1
"RTN","GMPLPREF",15,0)
 . D BLD^DIALOG(1250000.357,,,"MSG")
"RTN","GMPLPREF",16,0)
 . D EN^DDIOL(.MSG)
"RTN","GMPLPREF",17,0)
 . H 1
"RTN","GMPLPREF",18,0)
 . S VALMQUIT=1
"RTN","GMPLPREF",19,0)
 D GETSLIST:GMPLMODE="S",GETCLIST:GMPLMODE'="S"
"RTN","GMPLPREF",20,0)
 Q
"RTN","GMPLPREF",21,0)
 ;
"RTN","GMPLPREF",22,0)
GETSLIST ; -- init SERVICE list array
"RTN","GMPLPREF",23,0)
 N LCNT,IFN,NAME,PARENT,CLDRN,SVCD,SVCPD,SVCS,CHILD
"RTN","GMPLPREF",24,0)
 K ^TMP("GMPLIST",$J) S LCNT=0,^TMP("GMPLIST",$J,"VIEW",0)=0
"RTN","GMPLPREF",25,0)
 D EN^DDIOL($$EZBLD^DIALOG(1250000.358),,"!!")
"RTN","GMPLPREF",26,0)
 D SVCLIST^GMPLEXT(.SVCS,"C")
"RTN","GMPLPREF",27,0)
 F IFN=0:0 S IFN=$O(SVCS(IFN)) Q:IFN'>0  D
"RTN","GMPLPREF",28,0)
 . Q:$D(^TMP("GMPLIST",$J,"B",IFN))  ; service already on list
"RTN","GMPLPREF",29,0)
 . D SVCDET^GMPLEXT(.SVCD,IFN)
"RTN","GMPLPREF",30,0)
 . S PARENT=+$G(SVCD("PARENT"))
"RTN","GMPLPREF",31,0)
 . I PARENT D SVCDET^GMPLEXT(.SVCPD,PARENT)
"RTN","GMPLPREF",32,0)
 . I PARENT,PARENT'=IFN,$G(SVCPD("TYPE"))="C" Q  ; child of clin service
"RTN","GMPLPREF",33,0)
 . S NAME=$G(SVCD("NAME"))
"RTN","GMPLPREF",34,0)
 . D ITEM(IFN,NAME,GMPLVIEW,.LCNT)
"RTN","GMPLPREF",35,0)
 . D SVCCHLD^GMPLEXT(IFN,.CLDRN)
"RTN","GMPLPREF",36,0)
 . Q:CLDRN=0  ; service has no 'children'
"RTN","GMPLPREF",37,0)
 . F CHILD=0:0 S CHILD=$O(CLDRN(CHILD)) Q:CHILD'>0  I CHILD'=IFN D
"RTN","GMPLPREF",38,0)
 . . S NAME="  "_CLDRN(CHILD)
"RTN","GMPLPREF",39,0)
 . . D ITEM(CHILD,NAME,GMPLVIEW,.LCNT)
"RTN","GMPLPREF",40,0)
 I LCNT'>0 S ^TMP("GMPLIST",$J,1,0)="   ",^TMP("GMPLIST",$J,2,0)=$$EZBLD^DIALOG(1250000.359)
"RTN","GMPLPREF",41,0)
 D:$P(VALMDDF("SERVICE"),U,4)'="Service" CHGCAP^VALM("SERVICE","Service")
"RTN","GMPLPREF",42,0)
 S VALMCNT=LCNT,^TMP("GMPLIST",$J,0)=VALMCNT,VALMSG=$$MSG
"RTN","GMPLPREF",43,0)
 Q
"RTN","GMPLPREF",44,0)
 ;
"RTN","GMPLPREF",45,0)
GETCLIST ; -- init CLINIC list array
"RTN","GMPLPREF",46,0)
 N LCNT,IFN,NAME,LIST,DET
"RTN","GMPLPREF",47,0)
 K ^TMP("GMPLIST",$J) S LCNT=0,^TMP("GMPLIST",$J,"VIEW",0)=0
"RTN","GMPLPREF",48,0)
 D EN^DDIOL($$EZBLD^DIALOG(1250000.360),"!!")
"RTN","GMPLPREF",49,0)
 D CLINLST^GMPLEXT(.LIST)
"RTN","GMPLPREF",50,0)
 F IFN=0:0 S IFN=$O(LIST(IFN)) Q:IFN'>0  D
"RTN","GMPLPREF",51,0)
 . D CLINDET^GMPLEXT(.DET,IFN)
"RTN","GMPLPREF",52,0)
 . Q:$G(DET("TYPE"))'="C"  ; loc not a clinic
"RTN","GMPLPREF",53,0)
 . S NAME=$G(DET("NAME")) D ITEM(IFN,NAME,GMPLVIEW,.LCNT)
"RTN","GMPLPREF",54,0)
 I LCNT'>0 S ^TMP("GMPLIST",$J,1,0)="   ",^TMP("GMPLIST",$J,2,0)=$$EZBLD^DIALOG(1250000.361)
"RTN","GMPLPREF",55,0)
 D:$P(VALMDDF("SERVICE"),U,4)'="Clinic" CHGCAP^VALM("SERVICE","Clinic")
"RTN","GMPLPREF",56,0)
 S VALMCNT=LCNT,^TMP("GMPLIST",$J,0)=VALMCNT,VALMSG=$$MSG
"RTN","GMPLPREF",57,0)
 Q
"RTN","GMPLPREF",58,0)
 ;
"RTN","GMPLPREF",59,0)
ITEM(IFN,NAME,VIEW,CNT) ;Add item to list display
"RTN","GMPLPREF",60,0)
 N LNG,TMP,LINE,INCL S INCL=VIEW[("/"_IFN_"/")
"RTN","GMPLPREF",61,0)
 S LINE="    . . . . . . . . . . . . . . . . . . . . "
"RTN","GMPLPREF",62,0)
 S CNT=CNT+1,LINE=$$SETFLD^VALM1(CNT,LINE,"NUMBER")
"RTN","GMPLPREF",63,0)
 S LNG=4+$L(NAME),TMP=$E(LINE,1,4)_NAME_$E(LINE,LNG+1,$L(LINE)),LINE=TMP
"RTN","GMPLPREF",64,0)
 I INCL S LINE=$$SETFLD^VALM1(" Y",LINE,"ACCEPT"),^TMP("GMPLIST",$J,"VIEW",IFN)="",^TMP("GMPLIST",$J,"VIEW",0)=^TMP("GMPLIST",$J,"VIEW",0)+1
"RTN","GMPLPREF",65,0)
 S ^TMP("GMPLIST",$J,CNT,0)=LINE,^TMP("GMPLIST",$J,"IDX",CNT)=IFN,^TMP("GMPLIST",$J,"B",IFN)=CNT
"RTN","GMPLPREF",66,0)
 D CNTRL^VALM10(CNT,1,2,IOINHI,IOINORM) ; highlight numbers
"RTN","GMPLPREF",67,0)
 Q
"RTN","GMPLPREF",68,0)
 ;
"RTN","GMPLPREF",69,0)
HDR ; -- header code
"RTN","GMPLPREF",70,0)
 N NUM,USER,X S USER=$$PROVNAME^GMPLEXT(DUZ)
"RTN","GMPLPREF",71,0)
 S X="CLINIC"_$S(GMPLMODE="S":"AL SERVICE",1:"")_"S"
"RTN","GMPLPREF",72,0)
 S NUM=+$G(^TMP("GMPLIST",$J,"VIEW",0))_" "_$S(GMPLMODE="S":"services",1:"clinics")
"RTN","GMPLPREF",73,0)
 S VALMHDR(1)=USER_$J(NUM,79-$L(USER)),VALMHDR(2)=$J(X,$L(X)\2+41)
"RTN","GMPLPREF",74,0)
 Q
"RTN","GMPLPREF",75,0)
 ;
"RTN","GMPLPREF",76,0)
HELP ; -- help code
"RTN","GMPLPREF",77,0)
 N DIR,MSG
"RTN","GMPLPREF",78,0)
 S MSG=$S(GMPLMODE="S":1250000.362,1:1250000.363)
"RTN","GMPLPREF",79,0)
 S DIR(0)="EA"
"RTN","GMPLPREF",80,0)
 D BLD^DIALOG(MSG,,,"DIR(""A"")")
"RTN","GMPLPREF",81,0)
 D ^DIR
"RTN","GMPLPREF",82,0)
 S VALMSG=$$MSG,VALMBCK=$S(VALMCC:"",1:"R")
"RTN","GMPLPREF",83,0)
 Q
"RTN","GMPLPREF",84,0)
 ;
"RTN","GMPLPREF",85,0)
CLEAN ; -- exit code
"RTN","GMPLPREF",86,0)
 I $$DIFFRENT^GMPLPRF1,'$D(GMPSAVED) D
"RTN","GMPLPREF",87,0)
 . N DIR,X,Y,MSG S DIR(0)="Y"
"RTN","GMPLPREF",88,0)
 . D EN^DDIOL($C(7),,"?0")
"RTN","GMPLPREF",89,0)
 . D EN^DDIOL($$EZBLD^DIALOG(1250000.364),,"!!")
"RTN","GMPLPREF",90,0)
 . S DIR("A")=$$EZBLD^DIALOG(1250000.365),DIR("B")="YES"
"RTN","GMPLPREF",91,0)
 . S MSG=$S(GMPLMODE="S":1250000.366,1:1250000.367)
"RTN","GMPLPREF",92,0)
 . D BLD^DIALOG(MSG,,,"DIR(""?"")")
"RTN","GMPLPREF",93,0)
 . D ^DIR D:Y SAVE^GMPLPRF1
"RTN","GMPLPREF",94,0)
 K GMPLVIEW,GMPLIST,GMPLMODE,GMPSAVED
"RTN","GMPLPREF",95,0)
 K ^TMP("GMPLIST",$J)
"RTN","GMPLPREF",96,0)
 K VALMHDR,VALMCNT,VALMSG,VALMBCK
"RTN","GMPLPREF",97,0)
 Q
"RTN","GMPLPREF",98,0)
 ;
"RTN","GMPLPREF",99,0)
MSG() ; -- msg line for more help
"RTN","GMPLPREF",100,0)
 N X,MSG
"RTN","GMPLPREF",101,0)
 S MSG=$S(GMPLMODE="S":1250000.368,1:1250000.369)
"RTN","GMPLPREF",102,0)
 S X=$$EZBLD^DIALOG(MSG)
"RTN","GMPLPREF",103,0)
 Q X
"RTN","GMPLPRF0")
0^51^B2517718
"RTN","GMPLPRF0",1,0)
GMPLPRF0 ; SLC/MKB -- Problem List User Prefs cont ;09/13/12
"RTN","GMPLPRF0",2,0)
 ;;2.0;Problem List;**3,260002**;Aug 25, 1994;Build 26
"RTN","GMPLPRF0",3,0)
CURRENT(USER) ; Show user's current preference
"RTN","GMPLPRF0",4,0)
 N VIEW,NUM,MSGID,MSG
"RTN","GMPLPRF0",5,0)
 D EN^DDIOL($$EZBLD^DIALOG(1250000.370),,"!!")
"RTN","GMPLPRF0",6,0)
 S VIEW=$$USERVIEW^GMPLEXT(USER),NUM=$S($L(VIEW,"/")<3:"all",1:$L(VIEW,"/")-2)
"RTN","GMPLPRF0",7,0)
 S MSGID=$S(VIEW="S":1250000.371,VIEW="C":1250000.372,1:1250000.373)
"RTN","GMPLPRF0",8,0)
 D BLD^DIALOG(MSGID,NUM,,"MSG")
"RTN","GMPLPRF0",9,0)
 D EN^DDIOL(.MSG)
"RTN","GMPLPRF0",10,0)
 Q
"RTN","GMPLPRF0",11,0)
 ;
"RTN","GMPLPRF0",12,0)
CHANGE() ; Want to change preferred view?
"RTN","GMPLPRF0",13,0)
 N DIR,X,Y S DIR(0)="YA",DIR("B")="NO"
"RTN","GMPLPRF0",14,0)
 S DIR("A")=$$EZBLD^DIALOG(1250000.374)
"RTN","GMPLPRF0",15,0)
 D BLD^DIALOG(1250000.375,,,"DIR(""?"")")
"RTN","GMPLPRF0",16,0)
 D ^DIR
"RTN","GMPLPRF0",17,0)
 Q +Y
"RTN","GMPLPRF0",18,0)
 ;
"RTN","GMPLPRF0",19,0)
VIEW(MODE) ; Returns user's preferred view, by 'S'ervice or 'C'linic
"RTN","GMPLPRF0",20,0)
 N DIR,X,Y S DIR("B")=$S(MODE="S":"INPATIENT",1:"OUTPATIENT")
"RTN","GMPLPRF0",21,0)
 S DIR(0)="SAOM^C:OUTPATIENT;S:INPATIENT;",DIR("A")=$$EZBLD^DIALOG(1250000.376)
"RTN","GMPLPRF0",22,0)
 D BLD^DIALOG(1250000.377,,,"DIR(""?"")")
"RTN","GMPLPRF0",23,0)
 D ^DIR S:$D(DTOUT)!($D(DUOUT)) Y="^"
"RTN","GMPLPRF0",24,0)
 Q Y
"RTN","GMPLPRF0",25,0)
 ;
"RTN","GMPLPRF0",26,0)
ALL(MODE,DEFLT) ; Include all problems, or select from clinics/services?
"RTN","GMPLPRF0",27,0)
 N DIR,X,Y,MSG
"RTN","GMPLPRF0",28,0)
 S DIR(0)="SAOM^A:ALL;S:SELECTED;",DIR("B")=$S(DEFLT<3:"ALL",1:"SELECTED")
"RTN","GMPLPRF0",29,0)
 S MSG=$S(MODE="S":1250000.378,1:1250000.379)
"RTN","GMPLPRF0",30,0)
 D BLD^DIALOG(MSG,,,"DIR(""A"")")
"RTN","GMPLPRF0",31,0)
 S MSG=$S(MODE="S":1250000.380,1:1250000.381)
"RTN","GMPLPRF0",32,0)
 D BLD^DIALOG(MSG,,,"DIR(""?"")")
"RTN","GMPLPRF0",33,0)
 D ^DIR S:$D(DTOUT)!($D(DUOUT)) Y="^" S:Y="A" Y=1 S:Y="S" Y=0
"RTN","GMPLPRF0",34,0)
 Q Y
"RTN","GMPLPRF1")
0^52^B20344987
"RTN","GMPLPRF1",1,0)
GMPLPRF1 ; SLC/MKB -- Problem List User Prefs cont ;09/20/12
"RTN","GMPLPRF1",2,0)
 ;;2.0;Problem List;**3,260002**;Aug 25, 1994;Build 26
"RTN","GMPLPRF1",3,0)
ADD ; -- add item(s) to view
"RTN","GMPLPRF1",4,0)
 N GMPLSEL,GMPLNO,IFN,NUM,CNUM,I,J,MSG,PARAM S VALMBCK=$S(VALMCC:"",1:"R")
"RTN","GMPLPRF1",5,0)
ADD1 S GMPLSEL=$$SELECT Q:GMPLSEL="^"
"RTN","GMPLPRF1",6,0)
 S GMPLNO=$L(GMPLSEL,","),I=$S(GMPLMODE="S":1250000.382,1:1250000.383)
"RTN","GMPLPRF1",7,0)
 I (^TMP("GMPLIST",$J,"VIEW",0)+GMPLNO-1)>60 D  G ADD1
"RTN","GMPLPRF1",8,0)
 . K MSG
"RTN","GMPLPRF1",9,0)
 . S PARAM(1)=^TMP("GMPLIST",$J,"VIEW",0),PARAM(2)=60-^TMP("GMPLIST",$J,"VIEW",0)
"RTN","GMPLPRF1",10,0)
 . D BLD^DIALOG(I,.PARAM,,"MSG")
"RTN","GMPLPRF1",11,0)
 . D EN^DDIOL(.MSG)
"RTN","GMPLPRF1",12,0)
ADD2 ;
"RTN","GMPLPRF1",13,0)
 S I=$S(GMPLMODE="S":1250000.387,1:1250000.388)
"RTN","GMPLPRF1",14,0)
 D BLD^DIALOG(I,GMPLNO-1,,"MSG")
"RTN","GMPLPRF1",15,0)
 D EN^DDIOL($$EZBLD^DIALOG(I,GMPLNO-1),,"!!")
"RTN","GMPLPRF1",16,0)
 K I
"RTN","GMPLPRF1",17,0)
 N CHLD
"RTN","GMPLPRF1",18,0)
 F I=1:1:GMPLNO S NUM=$P(GMPLSEL,",",I) I NUM D
"RTN","GMPLPRF1",19,0)
 . S IFN=^TMP("GMPLIST",$J,"IDX",NUM) W "."
"RTN","GMPLPRF1",20,0)
 . S TMP=$E($P(^TMP("GMPLIST",$J,NUM,0),U,1),1,44)_" Y",^TMP("GMPLIST",$J,NUM,0)=TMP
"RTN","GMPLPRF1",21,0)
 . S:'$D(^TMP("GMPLIST",$J,"VIEW",IFN)) ^TMP("GMPLIST",$J,"VIEW",IFN)="",^TMP("GMPLIST",$J,"VIEW",0)=^TMP("GMPLIST",$J,"VIEW",0)+1
"RTN","GMPLPRF1",22,0)
 . Q:GMPLMODE'="S"
"RTN","GMPLPRF1",23,0)
 . D SVCCHLD^GMPLEXT(IFN,.CHLD)
"RTN","GMPLPRF1",24,0)
 . Q:CHLD=0
"RTN","GMPLPRF1",25,0)
 . I $$INCLCHLD(IFN) F J=0:0 S J=$O(CHLD(J)) Q:J'>0  D
"RTN","GMPLPRF1",26,0)
 . . S CNUM=+$G(^TMP("GMPLIST",$J,"B",J)) W "."
"RTN","GMPLPRF1",27,0)
 . . I CNUM S TMP=$E(^TMP("GMPLIST",$J,CNUM,0),1,44)_" Y",^TMP("GMPLIST",$J,CNUM,0)=TMP S:'$D(^TMP("GMPLIST",$J,"VIEW",J)) ^TMP("GMPLIST",$J,"VIEW",J)="",^TMP("GMPLIST",$J,"VIEW",0)=^TMP("GMPLIST",$J,"VIEW",0)+1
"RTN","GMPLPRF1",28,0)
 S VALMBCK="R",VALMSG=$$MSG^GMPLPREF K VALMHDR
"RTN","GMPLPRF1",29,0)
 Q
"RTN","GMPLPRF1",30,0)
 ;
"RTN","GMPLPRF1",31,0)
REMOVE ; -- delete item(s) from view
"RTN","GMPLPRF1",32,0)
 N GMPLSEL,GMPLNO,IFN,NUM,CNUM,I,J,CHLD,MSG S VALMBCK=$S(VALMCC:"",1:"R")
"RTN","GMPLPRF1",33,0)
 S GMPLSEL=$$SELECT Q:GMPLSEL="^"
"RTN","GMPLPRF1",34,0)
 S GMPLNO=$L(GMPLSEL,",")
"RTN","GMPLPRF1",35,0)
 S MSG=$S(GMPLMODE="S":1250000.389,1:1250000.390)
"RTN","GMPLPRF1",36,0)
 D EN^DDIOL($$EZBLD^DIALOG(MSG,GMPLNO-1),,"!!")
"RTN","GMPLPRF1",37,0)
 F I=1:1:GMPLNO S NUM=$P(GMPLSEL,",",I) I NUM D
"RTN","GMPLPRF1",38,0)
 . S IFN=+^TMP("GMPLIST",$J,"IDX",NUM),^TMP("GMPLIST",$J,NUM,0)=$E(^TMP("GMPLIST",$J,NUM,0),1,44)
"RTN","GMPLPRF1",39,0)
 . S:$D(^TMP("GMPLIST",$J,"VIEW",IFN)) ^TMP("GMPLIST",$J,"VIEW",0)=^TMP("GMPLIST",$J,"VIEW",0)-1
"RTN","GMPLPRF1",40,0)
 . K ^TMP("GMPLIST",$J,"VIEW",IFN) W "."
"RTN","GMPLPRF1",41,0)
 . Q:GMPLMODE'="S"
"RTN","GMPLPRF1",42,0)
 . D SVCCHLD^GMPLEXT(IFN,.CHLD)
"RTN","GMPLPRF1",43,0)
 . Q:CHLD=0
"RTN","GMPLPRF1",44,0)
 . I $$INCLCHLD(IFN) F J=0:0 S J=$O(CHLD(J)) Q:J'>0  D
"RTN","GMPLPRF1",45,0)
 . . S CNUM=+$G(^TMP("GMPLIST",$J,"B",J)) W "."
"RTN","GMPLPRF1",46,0)
 . . I CNUM S ^TMP("GMPLIST",$J,CNUM,0)=$E(^TMP("GMPLIST",$J,CNUM,0),1,44) S:$D(^TMP("GMPLIST",$J,"VIEW",J)) ^TMP("GMPLIST",$J,"VIEW",0)=^TMP("GMPLIST",$J,"VIEW",0)-1 K ^TMP("GMPLIST",$J,"VIEW",J)
"RTN","GMPLPRF1",47,0)
 S VALMBCK="R",VALMSG=$$MSG^GMPLPREF K VALMHDR
"RTN","GMPLPRF1",48,0)
 Q
"RTN","GMPLPRF1",49,0)
 ;
"RTN","GMPLPRF1",50,0)
INCLCHLD(IFN) ; Returns 1 or 0, to include 'child' services in selection
"RTN","GMPLPRF1",51,0)
 N DIR,X,Y,NAME S NAME=$$SVCNAME^GMPLEXT(IFN),DIR("B")="YES"
"RTN","GMPLPRF1",52,0)
 S DIR(0)="Y"
"RTN","GMPLPRF1",53,0)
 D BLD^DIALOG(1250000.391,NAME,,"DIR(""A"")")
"RTN","GMPLPRF1",54,0)
 D BLD^DIALOG(1250000.392,,,"DIR(""?"")")
"RTN","GMPLPRF1",55,0)
 D ^DIR S:$D(DTOUT) Y="^"
"RTN","GMPLPRF1",56,0)
 Q Y
"RTN","GMPLPRF1",57,0)
 ;
"RTN","GMPLPRF1",58,0)
SELECT() ; Select item(s) from list
"RTN","GMPLPRF1",59,0)
 N DIR,X,Y,MAX,MSG
"RTN","GMPLPRF1",60,0)
 S MAX=+$G(^TMP("GMPLIST",$J,0)) I MAX'>0 Q "^"
"RTN","GMPLPRF1",61,0)
 S DIR(0)="LAO^1:"_MAX
"RTN","GMPLPRF1",62,0)
 S MSG=$S(GMPLMODE="S":1250000.393,1:1250000.394)
"RTN","GMPLPRF1",63,0)
 D BLD^DIALOG(MSG,,,"DIR(""A"")")
"RTN","GMPLPRF1",64,0)
 S:MAX>1 DIR("A")=DIR("A")_" (1-"_MAX_"): "
"RTN","GMPLPRF1",65,0)
 S:MAX'>1 DIR("A")=DIR("A")_": ",DIR("B")=1
"RTN","GMPLPRF1",66,0)
 S MSG=$S(GMPLMODE="S":1250000.395,1:1250000.396)
"RTN","GMPLPRF1",67,0)
 D BLD^DIALOG(MSG,,,"DIR(""?"")")
"RTN","GMPLPRF1",68,0)
 D ^DIR I $D(DTOUT)!(X="") S Y="^"
"RTN","GMPLPRF1",69,0)
 Q Y
"RTN","GMPLPRF1",70,0)
 ;
"RTN","GMPLPRF1",71,0)
DIFFRENT() ; -- Returns 1 if view has changed, else 0
"RTN","GMPLPRF1",72,0)
 N I,TEMP S TEMP=""
"RTN","GMPLPRF1",73,0)
 F I=0:0 S I=$O(^TMP("GMPLIST",$J,"VIEW",I)) Q:I'>0  S TEMP=TEMP_I_"/"
"RTN","GMPLPRF1",74,0)
 S:$L(TEMP) TEMP=GMPLMODE_"/"_TEMP
"RTN","GMPLPRF1",75,0)
 Q TEMP'=$$USERVIEW^GMPLEXT()
"RTN","GMPLPRF1",76,0)
 ;
"RTN","GMPLPRF1",77,0)
SAVE ; -- save new view in File #200/Field #125
"RTN","GMPLPRF1",78,0)
 N I,TEMP,TMP S TEMP=GMPLMODE,TMP=$$USERLST^GMPLEXT()
"RTN","GMPLPRF1",79,0)
 F I=0:0 S I=$O(^TMP("GMPLIST",$J,"VIEW",I)) Q:I'>0  S TEMP=TEMP_"/"_I
"RTN","GMPLPRF1",80,0)
 S:$L(TEMP)>1 TEMP=TEMP_"/"
"RTN","GMPLPRF1",81,0)
 D UPUSRLST^GMPLEXT(TEMP,TMP)
"RTN","GMPLPRF1",82,0)
 S GMPSAVED=1
"RTN","GMPLPRF1",83,0)
 Q
"RTN","GMPLPRF1",84,0)
 ;
"RTN","GMPLPRF1",85,0)
SWITCH ; -- change preferred views (service <--> clinic)
"RTN","GMPLPRF1",86,0)
 N DIR,X,Y,MSG S Y=1,VALMBCK=$S(VALMCC:"",1:"R")
"RTN","GMPLPRF1",87,0)
 G SW1:'$L($G(GMPLVIEW)) ; no current view
"RTN","GMPLPRF1",88,0)
 S DIR(0)="Y",DIR("B")="NO"
"RTN","GMPLPRF1",89,0)
 D BLD^DIALOG(1250000.397,,,"DIR(""A"")")
"RTN","GMPLPRF1",90,0)
 D BLD^DIALOG(1250000.398,,,"DIR(""?"")")
"RTN","GMPLPRF1",91,0)
 D BLD^DIALOG($S(GMPLMODE="S":1250000.399,1:1250000.400),,,"MSG")
"RTN","GMPLPRF1",92,0)
 D EN^DDIOL(.MSG)
"RTN","GMPLPRF1",93,0)
 D ^DIR
"RTN","GMPLPRF1",94,0)
SW1 I Y D
"RTN","GMPLPRF1",95,0)
 . S VALMBCK="R",GMPLVIEW="",GMPLMODE=$S(GMPLMODE="S":"C",1:"S")
"RTN","GMPLPRF1",96,0)
 . D @("GET"_GMPLMODE_"LIST^GMPLPREF") K VALMHDR
"RTN","GMPLPRF1",97,0)
 Q
"RTN","GMPLPRF1",98,0)
 ;
"RTN","GMPLPRF1",99,0)
DELETE ; -- delete preferred view (no view)
"RTN","GMPLPRF1",100,0)
 N DIR,X,Y,MSG S DIR(0)="Y",DIR("B")="NO",VALMBCK=$S(VALMCC:"",1:"R")
"RTN","GMPLPRF1",101,0)
 D BLD^DIALOG(1250000.401,,,"DIR(""A"")")
"RTN","GMPLPRF1",102,0)
 D BLD^DIALOG(1250000.402,,,"DIR(""?"")")
"RTN","GMPLPRF1",103,0)
 D ^DIR I Y D
"RTN","GMPLPRF1",104,0)
 . S MSG=$S(GMPLMODE="S":1250000.403,1:1250000.404)
"RTN","GMPLPRF1",105,0)
 . D EN^DDIOL(MSG,,"!!")
"RTN","GMPLPRF1",106,0)
 . K ^TMP("GMPLIST",$J,"VIEW") S ^TMP("GMPLIST",$J,"VIEW",0)=0,VALMBCK="Q",GMPLMODE=""
"RTN","GMPLPRF1",107,0)
 . D SAVE D EN^DDIOL($$EZBLD^DIALOG(1250000.095),,"?0")
"RTN","GMPLPRF1",108,0)
 Q
"RTN","GMPLPRNT")
0^53^B29401188
"RTN","GMPLPRNT",1,0)
GMPLPRNT ; SLC/MKB,KER -- Problem List prints/displays; 03/25/13
"RTN","GMPLPRNT",2,0)
 ;;2.0;Problem List;**1,13,26,41,260002**;Aug 25, 1994;Build 26
"RTN","GMPLPRNT",3,0)
 ;
"RTN","GMPLPRNT",4,0)
 ; External References
"RTN","GMPLPRNT",5,0)
 ;   DBIA 10090  ^DIC(4
"RTN","GMPLPRNT",6,0)
 ;   DBIA 10082  ^ICD9(
"RTN","GMPLPRNT",7,0)
 ;   DBIA 10086  ^%ZIS
"RTN","GMPLPRNT",8,0)
 ;   DBIA 10086  HOME^%ZIS
"RTN","GMPLPRNT",9,0)
 ;   DBIA 10089  ^%ZISC
"RTN","GMPLPRNT",10,0)
 ;   DBIA 10063  ^%ZTLOAD
"RTN","GMPLPRNT",11,0)
 ;   DBIA 10026  ^DIR
"RTN","GMPLPRNT",12,0)
 ;   DBIA 10061  OERR^VADPT
"RTN","GMPLPRNT",13,0)
 ;   DBIA 10116  CLEAR^VALM1
"RTN","GMPLPRNT",14,0)
 ;   DBIA 10103  $$FMTE^XLFDT
"RTN","GMPLPRNT",15,0)
 ;   DBIA 10103  $$NOW^XLFDT
"RTN","GMPLPRNT",16,0)
 ;   DBIA 10104  $$REPEAT^XLFSTR
"RTN","GMPLPRNT",17,0)
 ;   DBIA 10112  $$SITE^VASITE
"RTN","GMPLPRNT",18,0)
 ;                   
"RTN","GMPLPRNT",19,0)
EN ; Print/Display (Main)
"RTN","GMPLPRNT",20,0)
 N DIR,X,Y S VALMBCK=$S(VALMCC:"",1:"R") W !
"RTN","GMPLPRNT",21,0)
 I '(($L(GMPLVIEW("ACT")))!(GMPLVIEW("PROV"))!($L(GMPLVIEW("VIEW"),"/")>2)) S Y="A" G EN1
"RTN","GMPLPRNT",22,0)
 S DIR(0)="SAOM^C:CURRENT VIEW;A:ALL PROBLEMS;"
"RTN","GMPLPRNT",23,0)
 D BLD^DIALOG(1250000.407,,,"DIR(""A"")")
"RTN","GMPLPRNT",24,0)
 D BLD^DIALOG(1250000.408,,,"DIR(""?"")")
"RTN","GMPLPRNT",25,0)
 D ^DIR G:$D(DTOUT)!($D(DUOUT))!(Y="") ENQ
"RTN","GMPLPRNT",26,0)
EN1 ;   Print View
"RTN","GMPLPRNT",27,0)
 W ! D @$S(Y="C":"LIST",1:"VAF")
"RTN","GMPLPRNT",28,0)
 I GMPRT'>0 D  G ENQ
"RTN","GMPLPRNT",29,0)
 . D EN^DDIOL($$EZBLD^DIALOG(1250000.409),,"!!")
"RTN","GMPLPRNT",30,0)
 . D EN^DDIOL($C(7))
"RTN","GMPLPRNT",31,0)
 . H 1
"RTN","GMPLPRNT",32,0)
 D DEVICE G:$D(GMPQUIT) ENQ
"RTN","GMPLPRNT",33,0)
 D CLEAR^VALM1,PRT S VALMBCK="R"
"RTN","GMPLPRNT",34,0)
ENQ ;   Quit Print/Display
"RTN","GMPLPRNT",35,0)
 D KILL^GMPLX S VALMSG=$$MSG^GMPLX Q
"RTN","GMPLPRNT",36,0)
 ;             
"RTN","GMPLPRNT",37,0)
VAF ; Build Chart Copy
"RTN","GMPLPRNT",38,0)
 N TOTAL,VIEW,HASPRB,%
"RTN","GMPLPRNT",39,0)
 K GMPLCURR
"RTN","GMPLPRNT",40,0)
 S (TOTAL,GMPRT)=0
"RTN","GMPLPRNT",41,0)
 S (TOTAL,GMPRT)=0
"RTN","GMPLPRNT",42,0)
 S %=$$HASPRBS^GMPLAPI4(.HASPRB,+GMPDFN)
"RTN","GMPLPRNT",43,0)
 S (VIEW("ACT"),VIEW("VIEW"))="",VIEW("PROV")=0
"RTN","GMPLPRNT",44,0)
 D GETPLIST^GMPLMGR1(.GMPRT,.TOTAL,.VIEW)
"RTN","GMPLPRNT",45,0)
 S GMPRT=TOTAL
"RTN","GMPLPRNT",46,0)
 Q
"RTN","GMPLPRNT",47,0)
 ;
"RTN","GMPLPRNT",48,0)
LIST ; Build Current View
"RTN","GMPLPRNT",49,0)
 S GMPLCURR=1,GMPRT=0 Q:+$G(GMPCOUNT)'>0  N I,IFN
"RTN","GMPLPRNT",50,0)
 D EN^DDIOL($$EZBLD^DIALOG(1250000.410))
"RTN","GMPLPRNT",51,0)
 F I=0:0 S I=$O(^TMP("GMPLIDX",$J,I)) Q:I'>0  D
"RTN","GMPLPRNT",52,0)
 . S IFN=$P($G(^TMP("GMPLIDX",$J,I)),U,2) Q:IFN'>0
"RTN","GMPLPRNT",53,0)
 . S GMPRT=GMPRT+1,GMPRT(I)=IFN W "."
"RTN","GMPLPRNT",54,0)
 Q
"RTN","GMPLPRNT",55,0)
 ;
"RTN","GMPLPRNT",56,0)
DEVICE ; Get Device
"RTN","GMPLPRNT",57,0)
 S %ZIS="Q",%ZIS("B")="" D ^%ZIS I POP S GMPQUIT=1 G DQ
"RTN","GMPLPRNT",58,0)
 I '$D(GMPLCURR) K GMPRINT
"RTN","GMPLPRNT",59,0)
 I $D(IO("Q")) D
"RTN","GMPLPRNT",60,0)
 . S ZTRTN="PRT^GMPLPRNT",ZTDESC="PROBLEM LIST OF "_$P(GMPDFN,U,2)
"RTN","GMPLPRNT",61,0)
 . S (ZTSAVE("GMPRT"),ZTSAVE("GMPRT("),ZTSAVE("GMPDFN"),ZTSAVE("GMPVAMC"))=""
"RTN","GMPLPRNT",62,0)
 . S:$D(GMPLCURR) ZTSAVE("GMPLCURR")="" S ZTDTH=$H
"RTN","GMPLPRNT",63,0)
 . D ^%ZTLOAD,HOME^%ZIS S:$D(ZTSK) GMPQUIT=1
"RTN","GMPLPRNT",64,0)
DQ ;   Quit Device
"RTN","GMPLPRNT",65,0)
 K IO("Q"),POP,%ZIS,ZTRTN,ZTDESC,ZTSAVE,ZTSK
"RTN","GMPLPRNT",66,0)
 Q
"RTN","GMPLPRNT",67,0)
 ;
"RTN","GMPLPRNT",68,0)
HDR ; Header Code
"RTN","GMPLPRNT",69,0)
 N PAGE,MSG S PAGE=$$EZBLD^DIALOG(1250000.509,GMPLPAGE),GMPLPAGE=GMPLPAGE+1
"RTN","GMPLPRNT",70,0)
 D EN^DDIOL($$REPEAT^XLFSTR("-",79))
"RTN","GMPLPRNT",71,0)
 I IOST?1"P".E D
"RTN","GMPLPRNT",72,0)
 . S MSG=$S($D(GMPLCURR):1250000.411,1:1250000.412)
"RTN","GMPLPRNT",73,0)
 . D EN^DDIOL($$EZBLD^DIALOG(MSG))
"RTN","GMPLPRNT",74,0)
 I IOST'?1"P".E D EN^DDIOL($P(GMPDFN,U,2)_"  ("_$P(GMPDFN,U,3)_")")
"RTN","GMPLPRNT",75,0)
 S MSG=$S($D(GMPLCURR):1250000.413,1:1250000.414)
"RTN","GMPLPRNT",76,0)
 D EN^DDIOL($$EZBLD^DIALOG(MSG),,"?41")
"RTN","GMPLPRNT",77,0)
 D EN^DDIOL(PAGE,,"?"_(79-$L(PAGE)))
"RTN","GMPLPRNT",78,0)
 D EN^DDIOL($$REPEAT^XLFSTR("-",79))
"RTN","GMPLPRNT",79,0)
 K MSG
"RTN","GMPLPRNT",80,0)
 D BLD^DIALOG(1250000.415,,,"MSG")
"RTN","GMPLPRNT",81,0)
 D EN^DDIOL(.MSG)
"RTN","GMPLPRNT",82,0)
 D EN^DDIOL($$REPEAT^XLFSTR("-",79))
"RTN","GMPLPRNT",83,0)
 Q
"RTN","GMPLPRNT",84,0)
 ;
"RTN","GMPLPRNT",85,0)
FTR ; Footer Code
"RTN","GMPLPRNT",86,0)
 N I,SITE,DFN,VA,VADM,LOC,DATE,FORM,PARAM,MSG
"RTN","GMPLPRNT",87,0)
 F I=1:1:(IOSL-$Y-6) D EN^DDIOL("",,"!")
"RTN","GMPLPRNT",88,0)
 S SITE=$$SITE^VASITE,SITE=$P(SITE,"^",2)
"RTN","GMPLPRNT",89,0)
 S:SITE'["VAMC" SITE=SITE_" VAMC"
"RTN","GMPLPRNT",90,0)
 S DFN=+GMPDFN D OERR^VADPT
"RTN","GMPLPRNT",91,0)
 S PARAM=$S(VAIN(4)]"":$P(VAIN(4),U,2)_"  "_VAIN(5),1:$$EZBLD^DIALOG(1250000.418))
"RTN","GMPLPRNT",92,0)
 S LOC=$$EZBLD^DIALOG(1250000.417,PARAM) K VAIN
"RTN","GMPLPRNT",93,0)
 I $L(LOC)>51 S LOC=$E(LOC,1,51),FORM="VAF10-141"
"RTN","GMPLPRNT",94,0)
 E  S FORM="VA FORM 10-1415"
"RTN","GMPLPRNT",95,0)
 S MSG=$S($D(GMPLFLAG):$$EZBLD^DIALOG(1250000.419),1:"")
"RTN","GMPLPRNT",96,0)
 D EN^DDIOL(MSG)
"RTN","GMPLPRNT",97,0)
 D EN^DDIOL($$REPEAT^XLFSTR("-",79))
"RTN","GMPLPRNT",98,0)
 D EN^DDIOL($P(GMPDFN,U,2))
"RTN","GMPLPRNT",99,0)
 D EN^DDIOL(SITE,,"?"_(79-$L(SITE)\2))
"RTN","GMPLPRNT",100,0)
 S DATE=$$FMTE^XLFDT($E(($$NOW^XLFDT),1,12),2)
"RTN","GMPLPRNT",101,0)
 S DATE=$$EZBLD^DIALOG(1250000.420,$P(DATE,"@")_" "_$P(DATE,"@",2))
"RTN","GMPLPRNT",102,0)
 D EN^DDIOL(DATE,,"?"_(79-$L(DATE)))
"RTN","GMPLPRNT",103,0)
 D EN^DDIOL(VA("PID"))
"RTN","GMPLPRNT",104,0)
 D EN^DDIOL(LOC,,"?"_(79-$L(LOC)))
"RTN","GMPLPRNT",105,0)
 D EN^DDIOL(FORM,,"?"_(79-$L(FORM)))
"RTN","GMPLPRNT",106,0)
 D EN^DDIOL($$REPEAT^XLFSTR("-",79))
"RTN","GMPLPRNT",107,0)
 W @IOF
"RTN","GMPLPRNT",108,0)
 Q
"RTN","GMPLPRNT",109,0)
 ;
"RTN","GMPLPRNT",110,0)
RETURN() ; End of page
"RTN","GMPLPRNT",111,0)
 N X,Y,DIR,I F I=1:1:(IOSL-$Y-3) D EN^DDIOL("",,"!")
"RTN","GMPLPRNT",112,0)
 S DIR(0)="E" D ^DIR
"RTN","GMPLPRNT",113,0)
 Q +Y
"RTN","GMPLPRNT",114,0)
 ;
"RTN","GMPLPRNT",115,0)
PRT ; Body of Problem List
"RTN","GMPLPRNT",116,0)
 U IO N I,IFN,GMPLPAGE,GMPLFLAG S GMPLPAGE=1 D HDR
"RTN","GMPLPRNT",117,0)
 F I=0:0 S I=$O(GMPRT(I)) Q:I'>0  D  Q:$D(GMPQUIT)
"RTN","GMPLPRNT",118,0)
 . S IFN=GMPRT(I) Q:IFN'>0
"RTN","GMPLPRNT",119,0)
 . D PROB(IFN,I)
"RTN","GMPLPRNT",120,0)
 D FTR:IOST?1"P".E I '$D(GMPQUIT),IOST?1"C".E S I=$$RETURN
"RTN","GMPLPRNT",121,0)
 I $D(ZTQUEUED) S ZTREQ="@" K GMPDFN,GMPLCURR,GMPQUIT,GMPRT
"RTN","GMPLPRNT",122,0)
 D ^%ZISC
"RTN","GMPLPRNT",123,0)
 Q
"RTN","GMPLPRNT",124,0)
 ;
"RTN","GMPLPRNT",125,0)
PROB(DA,NUM) ; Get Problem Text Line
"RTN","GMPLPRNT",126,0)
 N GMPL,ONSET,DATE,TEXT,NOTES,J,RESOLVED,X,LINES,PROB,SCS,SP,GMPARAM
"RTN","GMPLPRNT",127,0)
 Q:'$$DETAILX^GMPLAPI2(.GMPL,DA,0)
"RTN","GMPLPRNT",128,0)
 S ONSET=GMPL("ONSET")
"RTN","GMPLPRNT",129,0)
 S DATE=$P(GMPL("RECORDED"),U)
"RTN","GMPLPRNT",130,0)
 S RESOLVED=GMPL("RESOLVED")
"RTN","GMPLPRNT",131,0)
 D SCS^GMPLX1(+DA,.SCS) S SP=$G(SCS(3))
"RTN","GMPLPRNT",132,0)
 I 'DATE S DATE=$P(GMPL("ENTERED"),U)
"RTN","GMPLPRNT",133,0)
 S PROB=GMPL("NARRATIVE")
"RTN","GMPLPRNT",134,0)
 S PROB=PROB_" ("_GMPL("DIAGNOSIS")_")"
"RTN","GMPLPRNT",135,0)
 I $E(GMPL("PRIORITY"))="A" S PROB="*"_PROB
"RTN","GMPLPRNT",136,0)
 E  S PROB=" "_PROB
"RTN","GMPLPRNT",137,0)
 D WRAP^GMPLX(PROB,50,.TEXT)
"RTN","GMPLPRNT",138,0)
 D NOTES(.GMPL,.NOTES) S LINES=TEXT+NOTES+1
"RTN","GMPLPRNT",139,0)
 I ($Y+LINES)>(IOSL-7) D  Q:$D(GMPQUIT)
"RTN","GMPLPRNT",140,0)
 . I IOST?1"P".E D FTR,HDR Q
"RTN","GMPLPRNT",141,0)
 . I $$RETURN W @IOF D HDR Q
"RTN","GMPLPRNT",142,0)
 . S GMPQUIT=1
"RTN","GMPLPRNT",143,0)
PR1 ; Write Problem Text Line
"RTN","GMPLPRNT",144,0)
 W !!,$E("   ",1,3-$L(NUM))_NUM_". "_$J(DATE,8)
"RTN","GMPLPRNT",145,0)
 D GET^GMPLSITE(.GMPARAM)
"RTN","GMPLPRNT",146,0)
 I $E(GMPL("CONDITION"))="T",GMPARAM("VER") W ?14,"$" S GMPLFLAG=1
"RTN","GMPLPRNT",147,0)
 W ?15,TEXT(1),?62,$J(ONSET,8)
"RTN","GMPLPRNT",148,0)
 I $E(GMPL("STATUS"))="I" W ?71,$S(RESOLVED:$J(RESOLVED,8),1:"unknown")
"RTN","GMPLPRNT",149,0)
 I TEXT>1 F J=2:1:TEXT W !?15,TEXT(J)
"RTN","GMPLPRNT",150,0)
 Q:'NOTES
"RTN","GMPLPRNT",151,0)
 F J=1:1:NOTES D
"RTN","GMPLPRNT",152,0)
 . S X=$S(DATE'=$P(NOTES(J),U):$P(NOTES(J),U),1:"")
"RTN","GMPLPRNT",153,0)
 . W !?5,$J(X,8),?17,$P(NOTES(J),U,2)
"RTN","GMPLPRNT",154,0)
 . S DATE=$P(NOTES(J),U)
"RTN","GMPLPRNT",155,0)
 Q
"RTN","GMPLPRNT",156,0)
NOTES(GMPL,NOTES) ; Place Comments in NOTES array
"RTN","GMPLPRNT",157,0)
 N I
"RTN","GMPLPRNT",158,0)
 S NOTES=GMPL("COMMENT")
"RTN","GMPLPRNT",159,0)
 F I=1:1:NOTES D
"RTN","GMPLPRNT",160,0)
 . S NOTES(I)=$P(GMPL("COMMENT",I),U)_U_$P(GMPL("COMMENT",I),U,3)
"RTN","GMPLPRNT",161,0)
 Q
"RTN","GMPLPXRM")
0^54^B10158240
"RTN","GMPLPXRM",1,0)
GMPLPXRM ; SLC/PKR - Build Clinical Reminder indexes for AUPNPROB. ;09/14/12
"RTN","GMPLPXRM",2,0)
 ;;2.0;Problem List;**27,260002**;Aug 25, 1994;Build 26
"RTN","GMPLPXRM",3,0)
 ;DBIA 4113 supports PXRMSXRM entry points. 
"RTN","GMPLPXRM",4,0)
 ;DBIA 4114 supports setting and killing ^PXRMINDX(9000011)
"RTN","GMPLPXRM",5,0)
 ;===============================================================
"RTN","GMPLPXRM",6,0)
INDEX ;Build the indexes for PROBLEM LIST.
"RTN","GMPLPXRM",7,0)
 N COND,DAS,DFN,DIFF,DLM,DONE,END,ENTRIES,ETEXT,GLOBAL,IND,NE,NERROR
"RTN","GMPLPXRM",8,0)
 N PRIO,PROB,START,STATUS,TEMP,TENP,TEXT
"RTN","GMPLPXRM",9,0)
 ;Don't leave any old stuff around.
"RTN","GMPLPXRM",10,0)
 ;DBIA 4114
"RTN","GMPLPXRM",11,0)
 K ^PXRMINDX(9000011)
"RTN","GMPLPXRM",12,0)
 S GLOBAL=$$GET1^DID(9000011,"","","GLOBAL NAME")
"RTN","GMPLPXRM",13,0)
 S ENTRIES=$P(^AUPNPROB(0),U,4)
"RTN","GMPLPXRM",14,0)
 S TENP=ENTRIES/10
"RTN","GMPLPXRM",15,0)
 S TENP=+$P(TENP,".",1)
"RTN","GMPLPXRM",16,0)
 I TENP<1 S TENP=1
"RTN","GMPLPXRM",17,0)
 D BMES^XPDUTL($$EZBLD^DIALOG(1250000.421))
"RTN","GMPLPXRM",18,0)
 S TEXT=$$EZBLD^DIALOG(1250000.422,ENTRIES)
"RTN","GMPLPXRM",19,0)
 D MES^XPDUTL(TEXT)
"RTN","GMPLPXRM",20,0)
 S START=$H
"RTN","GMPLPXRM",21,0)
 S (DAS,DONE,IND,NE,NERROR)=0
"RTN","GMPLPXRM",22,0)
 F  S DAS=$O(^AUPNPROB(DAS)) Q:DONE  D
"RTN","GMPLPXRM",23,0)
 . I +DAS=0 S DONE=1 Q
"RTN","GMPLPXRM",24,0)
 . I +DAS'=DAS D  Q
"RTN","GMPLPXRM",25,0)
 .. S DONE=1
"RTN","GMPLPXRM",26,0)
 .. S ETEXT=$$EZBLD^DIALOG(1250000.423,DAS)
"RTN","GMPLPXRM",27,0)
 .. D ADDERROR^PXRMSXRM(GLOBAL,ETEXT,.NERROR)
"RTN","GMPLPXRM",28,0)
 . S IND=IND+1
"RTN","GMPLPXRM",29,0)
 . I IND#TENP=0 D
"RTN","GMPLPXRM",30,0)
 .. S TEXT=$$EZBLD^DIALOG(1250000.424,IND)
"RTN","GMPLPXRM",31,0)
 .. D MES^XPDUTL(TEXT)
"RTN","GMPLPXRM",32,0)
 . I IND#10000=0 W "."
"RTN","GMPLPXRM",33,0)
 . S TEMP=$G(^AUPNPROB(DAS,1))
"RTN","GMPLPXRM",34,0)
 . S COND=$P(TEMP,U,2)
"RTN","GMPLPXRM",35,0)
 .;Don't index Hidden problems.
"RTN","GMPLPXRM",36,0)
 . I COND="H" Q
"RTN","GMPLPXRM",37,0)
 . S PRIO=$P(TEMP,U,14)
"RTN","GMPLPXRM",38,0)
 .;If there is no priority set it to "U" for undefined.
"RTN","GMPLPXRM",39,0)
 . I PRIO="" S PRIO="U"
"RTN","GMPLPXRM",40,0)
 . S TEMP=^AUPNPROB(DAS,0)
"RTN","GMPLPXRM",41,0)
 . S PROB=$P(TEMP,U,1)
"RTN","GMPLPXRM",42,0)
 . I PROB="" D  Q
"RTN","GMPLPXRM",43,0)
 .. S ETEXT=$$EZBLD^DIALOG(1250000.425,DAS)
"RTN","GMPLPXRM",44,0)
 .. D ADDERROR^PXRMSXRM(GLOBAL,ETEXT,.NERROR)
"RTN","GMPLPXRM",45,0)
 . I $$ICDCODE^GMPLEXT(PROB)="" D  Q
"RTN","GMPLPXRM",46,0)
 .. S ETEXT=$$EZBLD^DIALOG(1250000.426,DAS)
"RTN","GMPLPXRM",47,0)
 .. D ADDERROR^PXRMSXRM(GLOBAL,ETEXT,.NERROR)
"RTN","GMPLPXRM",48,0)
 . S DFN=$P(TEMP,U,2)
"RTN","GMPLPXRM",49,0)
 . I DFN="" D  Q
"RTN","GMPLPXRM",50,0)
 .. S ETEXT=$$EZBLD^DIALOG(1250000.427,DAS)
"RTN","GMPLPXRM",51,0)
 .. D ADDERROR^PXRMSXRM(GLOBAL,ETEXT,.NERROR)
"RTN","GMPLPXRM",52,0)
 . S DLM=$P(TEMP,U,3)
"RTN","GMPLPXRM",53,0)
 . I DLM="" D  Q
"RTN","GMPLPXRM",54,0)
 .. S ETEXT=$$EZBLD^DIALOG(1250000.428,DAS)
"RTN","GMPLPXRM",55,0)
 .. D ADDERROR^PXRMSXRM(GLOBAL,ETEXT,.NERROR)
"RTN","GMPLPXRM",56,0)
 . S STATUS=$P(TEMP,U,12)
"RTN","GMPLPXRM",57,0)
 . I STATUS="" D  Q
"RTN","GMPLPXRM",58,0)
 .. S ETEXT=$$EZBLD^DIALOG(1250000.429,DAS)
"RTN","GMPLPXRM",59,0)
 .. D ADDERROR^PXRMSXRM(GLOBAL,ETEXT,.NERROR) Q
"RTN","GMPLPXRM",60,0)
 . S NE=NE+1
"RTN","GMPLPXRM",61,0)
 . S ^PXRMINDX(9000011,"ISPP",PROB,STATUS,PRIO,DFN,DLM,DAS)=""
"RTN","GMPLPXRM",62,0)
 . S ^PXRMINDX(9000011,"PSPI",DFN,STATUS,PRIO,PROB,DLM,DAS)=""
"RTN","GMPLPXRM",63,0)
 S END=$H
"RTN","GMPLPXRM",64,0)
 S TEXT=$$EZBLD^DIALOG(1250000.430,NE)
"RTN","GMPLPXRM",65,0)
 D MES^XPDUTL(TEXT)
"RTN","GMPLPXRM",66,0)
 D DETIME^PXRMSXRM(START,END)
"RTN","GMPLPXRM",67,0)
 ;If there were errors send a message.
"RTN","GMPLPXRM",68,0)
 I NERROR>0 D ERRMSG^PXRMSXRM(NERROR,GLOBAL)
"RTN","GMPLPXRM",69,0)
 ;Send a MailMan message with the results.
"RTN","GMPLPXRM",70,0)
 D COMMSG^PXRMSXRM(GLOBAL,START,END,NE,NERROR)
"RTN","GMPLPXRM",71,0)
 S ^PXRMINDX(9000011,"GLOBAL NAME")=GLOBAL
"RTN","GMPLPXRM",72,0)
 S ^PXRMINDX(9000011,"BUILT BY")=DUZ
"RTN","GMPLPXRM",73,0)
 S ^PXRMINDX(9000011,"DATE BUILT")=$$NOW^XLFDT
"RTN","GMPLPXRM",74,0)
 Q
"RTN","GMPLPXRM",75,0)
 ;
"RTN","GMPLPXRM",76,0)
 ;===============================================================
"RTN","GMPLPXRM",77,0)
KPROB(X,DA) ;Delete index for Problem List.
"RTN","GMPLPXRM",78,0)
 N PRIO
"RTN","GMPLPXRM",79,0)
 S PRIO=$S(X(5)="":"U",1:X(5))
"RTN","GMPLPXRM",80,0)
 ;DBIA 4114
"RTN","GMPLPXRM",81,0)
 K ^PXRMINDX(9000011,"ISPP",X(1),X(4),PRIO,X(2),X(3),DA)
"RTN","GMPLPXRM",82,0)
 K ^PXRMINDX(9000011,"PSPI",X(2),X(4),PRIO,X(1),X(3),DA)
"RTN","GMPLPXRM",83,0)
 Q
"RTN","GMPLPXRM",84,0)
 ;
"RTN","GMPLPXRM",85,0)
 ;===============================================================
"RTN","GMPLPXRM",86,0)
SPROB(X,DA) ;Set index for Problem List.
"RTN","GMPLPXRM",87,0)
 ;X(1)=DIAGNOSIS, X(2)=DFN, X(3)=DATE LAST MODIFIED, X(4)=STATUS
"RTN","GMPLPXRM",88,0)
 ;X(5)=PRIORITY, X(6)=CONDITION
"RTN","GMPLPXRM",89,0)
 ;Don't index Hidden problems.
"RTN","GMPLPXRM",90,0)
 I X(6)="H" Q
"RTN","GMPLPXRM",91,0)
 N PRIO
"RTN","GMPLPXRM",92,0)
 S PRIO=$S(X(5)="":"U",1:X(5))
"RTN","GMPLPXRM",93,0)
 ;DBIA 4114
"RTN","GMPLPXRM",94,0)
 S ^PXRMINDX(9000011,"ISPP",X(1),X(4),PRIO,X(2),X(3),DA)=""
"RTN","GMPLPXRM",95,0)
 S ^PXRMINDX(9000011,"PSPI",X(2),X(4),PRIO,X(1),X(3),DA)=""
"RTN","GMPLPXRM",96,0)
 Q
"RTN","GMPLPXRM",97,0)
 ;
"RTN","GMPLRPTR")
0^55^B8264324
"RTN","GMPLRPTR",1,0)
GMPLRPTR ; SLC/MKB/AJB -- Problem List Report of Removed Problems ;03/11/13
"RTN","GMPLRPTR",2,0)
 ;;2.0;Problem List;**28,260002**;Aug 25, 1994;Build 26
"RTN","GMPLRPTR",3,0)
EN ; -- main entry point
"RTN","GMPLRPTR",4,0)
 N %
"RTN","GMPLRPTR",5,0)
 S GMPDFN=$$PAT^GMPLX1 Q:+GMPDFN'>0
"RTN","GMPLRPTR",6,0)
 D WAIT^DICD
"RTN","GMPLRPTR",7,0)
 K GMPLIST
"RTN","GMPLRPTR",8,0)
 S %=$$GETPLIST^GMPLAPI4(.GMPLIST,+GMPDFN,"R")
"RTN","GMPLRPTR",9,0)
 I GMPLIST(0)'>0 D  Q
"RTN","GMPLRPTR",10,0)
 . D EN^DDIOL($C(7))
"RTN","GMPLRPTR",11,0)
 . D EN^DDIOL($$EZBLD^DIALOG(1250000.431),,"!?10")
"RTN","GMPLRPTR",12,0)
 . D EN^DDIOL("",,"!")
"RTN","GMPLRPTR",13,0)
 D DISPLAY,REPLACE
"RTN","GMPLRPTR",14,0)
 K GMPDFN,GMPLIST
"RTN","GMPLRPTR",15,0)
 Q
"RTN","GMPLRPTR",16,0)
 ;
"RTN","GMPLRPTR",17,0)
DISPLAY ; -- show list on screen
"RTN","GMPLRPTR",18,0)
 N PROBLEM,DATE,USER,NUM,PROV,IDT,AIFN,NODE,DONE,GMPQUIT,%,RETURN,IFN
"RTN","GMPLRPTR",19,0)
 D HDR
"RTN","GMPLRPTR",20,0)
 F NUM=0:0 S NUM=$O(GMPLIST(NUM)) Q:NUM'>0  D  Q:$D(GMPQUIT)
"RTN","GMPLRPTR",21,0)
 . S IFN=GMPLIST(NUM) Q:'IFN
"RTN","GMPLRPTR",22,0)
 . S PROBLEM=$$PROBTEXT^GMPLX(IFN),(DATE,PROV)="" K DONE
"RTN","GMPLRPTR",23,0)
 . ; added for Code Set Versioning (CSV)
"RTN","GMPLRPTR",24,0)
 . I '$$CODESTS^GMPLX(IFN,DT) S PROBLEM="#"_PROBLEM
"RTN","GMPLRPTR",25,0)
 . S %=$$AUDITX^GMPLHIST(.RETURN,IFN,1.02,"H")
"RTN","GMPLRPTR",26,0)
 . I RETURN>0 D
"RTN","GMPLRPTR",27,0)
 . . S DATE=RETURN(1,"MODIFIED")
"RTN","GMPLRPTR",28,0)
 . . S PROV=RETURN(1,"REQUESTINGBY")
"RTN","GMPLRPTR",29,0)
 . I $Y>(IOSL-4) S:'$$CONTINUE GMPQUIT=1 Q:$D(GMPQUIT)  D HDR
"RTN","GMPLRPTR",30,0)
 . ; added for Code Set Versioning
"RTN","GMPLRPTR",31,0)
 . N GMPLBUF S GMPLBUF=$S(PROBLEM["#":3,1:4)
"RTN","GMPLRPTR",32,0)
 . W !,NUM,?GMPLBUF,PROBLEM,?51,DATE,?60,$$FMTNAME^GMPLX1(PROV)
"RTN","GMPLRPTR",33,0)
 Q
"RTN","GMPLRPTR",34,0)
 ;
"RTN","GMPLRPTR",35,0)
HDR ; -- header code
"RTN","GMPLRPTR",36,0)
 N PARAM
"RTN","GMPLRPTR",37,0)
 W @IOF
"RTN","GMPLRPTR",38,0)
 S PARAM(1)=$P(GMPDFN,U,2),PARAM(2)=$P(GMPDFN,U,3)
"RTN","GMPLRPTR",39,0)
 D EN^DDIOL($$EZBLD^DIALOG(1250000.432,.PARAM),,"?0")
"RTN","GMPLRPTR",40,0)
 D EN^DDIOL($$EZBLD^DIALOG(1250000.433),,"!!")
"RTN","GMPLRPTR",41,0)
 D EN^DDIOL($$EZBLD^DIALOG(1250000.434),,"?51")
"RTN","GMPLRPTR",42,0)
 D EN^DDIOL($$REPEAT^XLFSTR("-",79))
"RTN","GMPLRPTR",43,0)
 Q
"RTN","GMPLRPTR",44,0)
 ;
"RTN","GMPLRPTR",45,0)
CONTINUE() ; -- end of page prompt
"RTN","GMPLRPTR",46,0)
 N DIR,X,Y
"RTN","GMPLRPTR",47,0)
 S DIR(0)="E"
"RTN","GMPLRPTR",48,0)
 D BLD^DIALOG(1250000.435,,,"DIR(""A"")")
"RTN","GMPLRPTR",49,0)
 D ^DIR
"RTN","GMPLRPTR",50,0)
 Q +Y
"RTN","GMPLRPTR",51,0)
 ;
"RTN","GMPLRPTR",52,0)
REPLACE ; -- replace problem on patient's list
"RTN","GMPLRPTR",53,0)
 N GMPLSEL,GMPLNO,NUM,DA,%,RET,MSG,I
"RTN","GMPLRPTR",54,0)
 W !!
"RTN","GMPLRPTR",55,0)
 S GMPLSEL=$$SEL Q:GMPLSEL="^"  Q:'$$SURE
"RTN","GMPLRPTR",56,0)
 D EN^DDIOL($$EZBLD^DIALOG(1250000.436),,"!!")
"RTN","GMPLRPTR",57,0)
 S GMPLNO=$L(GMPLSEL,",")
"RTN","GMPLRPTR",58,0)
 F I=1:1:GMPLNO S NUM=$P(GMPLSEL,",",I) I NUM D
"RTN","GMPLRPTR",59,0)
 . ; added for Code Set Versioning (CSV)
"RTN","GMPLRPTR",60,0)
 . I '$$CODESTS^GMPLX(GMPLIST(NUM),DT) D  Q
"RTN","GMPLRPTR",61,0)
 . . K MSG
"RTN","GMPLRPTR",62,0)
 . . D BLD^DIALOG(1250000.437,$$PROBTEXT^GMPLX(GMPLIST(NUM)),,"MSG")
"RTN","GMPLRPTR",63,0)
 . . D EN^DDIOL(.MSG)
"RTN","GMPLRPTR",64,0)
 . S DA=GMPLIST(NUM)
"RTN","GMPLRPTR",65,0)
 . S %=$$UNDELETE^GMPLAPI4(.RET,DA)
"RTN","GMPLRPTR",66,0)
 . W !,"  "_$$PROBTEXT^GMPLX(DA)
"RTN","GMPLRPTR",67,0)
 D
"RTN","GMPLRPTR",68,0)
 . N DIR S DIR(0)="E" W ! D ^DIR
"RTN","GMPLRPTR",69,0)
 Q
"RTN","GMPLRPTR",70,0)
 ;
"RTN","GMPLRPTR",71,0)
SEL() ; -- select problem(s)
"RTN","GMPLRPTR",72,0)
 N DIR,X,Y,MAX
"RTN","GMPLRPTR",73,0)
 S MAX=+GMPLIST(0) I MAX'>0 Q "^"
"RTN","GMPLRPTR",74,0)
 S DIR(0)="LAO^1:"_MAX
"RTN","GMPLRPTR",75,0)
 D BLD^DIALOG(1250000.438,,,"DIR(""A"")")
"RTN","GMPLRPTR",76,0)
 D BLD^DIALOG(1250000.439,,,"DIR(""?"")")
"RTN","GMPLRPTR",77,0)
 D ^DIR
"RTN","GMPLRPTR",78,0)
 I $D(DTOUT)!(X="") S Y="^"
"RTN","GMPLRPTR",79,0)
 Q Y
"RTN","GMPLRPTR",80,0)
 ;
"RTN","GMPLRPTR",81,0)
SURE() ; -- are you sure you want to do this?
"RTN","GMPLRPTR",82,0)
 N DIR,X,Y
"RTN","GMPLRPTR",83,0)
 S DIR(0)="Y",DIR("B")="NO"
"RTN","GMPLRPTR",84,0)
 D BLD^DIALOG(1250000.440,,,"DIR(""A"")")
"RTN","GMPLRPTR",85,0)
 D BLD^DIALOG(1250000.441,,,"DIR(""?"")")
"RTN","GMPLRPTR",86,0)
 D EN^DDIOL($C(7),,"?0")
"RTN","GMPLRPTR",87,0)
 D ^DIR
"RTN","GMPLRPTR",88,0)
 Q +Y
"RTN","GMPLRPTS")
0^56^B10402447
"RTN","GMPLRPTS",1,0)
GMPLRPTS ; SLC/MKB -- Problem List Mgt Reports ;03/11/13
"RTN","GMPLRPTS",2,0)
 ;;2.0;Problem List;**2,260002**;Aug 25, 1994;Build 26
"RTN","GMPLRPTS",3,0)
FMTPAT(LINE) ; Does formatting for PAT tag
"RTN","GMPLRPTS",4,0)
 N CNTA,CNTI
"RTN","GMPLRPTS",5,0)
 S CNTA=$P(LINE,"^",1)
"RTN","GMPLRPTS",6,0)
 S CNTI=$P(LINE,"^",2)
"RTN","GMPLRPTS",7,0)
 S LINE="  "_CNTA_$E("       ",1,7-$L(CNTA))_+CNTI
"RTN","GMPLRPTS",8,0)
 Q 
"RTN","GMPLRPTS",9,0)
 ;
"RTN","GMPLRPTS",10,0)
PAT ; List patients having data in Problem file #9000011
"RTN","GMPLRPTS",11,0)
 D WAIT^DICD
"RTN","GMPLRPTS",12,0)
 S GMPRT=$$PPROBCNT^GMPLAPI7("^TMP(""GMPRT"","_$J_")")
"RTN","GMPLRPTS",13,0)
 I GMPRT'>0 D  G PATQ
"RTN","GMPLRPTS",14,0)
 . D EN^DDIOL($C(7))
"RTN","GMPLRPTS",15,0)
 . D EN^DDIOL($$EZBLD^DIALOG(1250000.442))
"RTN","GMPLRPTS",16,0)
 . D EN^DDIOL("",,"!")
"RTN","GMPLRPTS",17,0)
 S GMPLHDR=$$EZBLD^DIALOG(1250000.443),GMPLCNT=1
"RTN","GMPLRPTS",18,0)
 D DEVICE G:$D(GMPQUIT) PATQ
"RTN","GMPLRPTS",19,0)
 D PRTFMT("D FMTPAT(.LINE)")
"RTN","GMPLRPTS",20,0)
PATQ D KILL
"RTN","GMPLRPTS",21,0)
 Q
"RTN","GMPLRPTS",22,0)
 ;
"RTN","GMPLRPTS",23,0)
PROB ; Search for/List patients with selected problem
"RTN","GMPLRPTS",24,0)
 N X,Y,GMPTERM,GMPTEXT,STATUS
"RTN","GMPLRPTS",25,0)
PROB1 D SEARCH^GMPLX(.X,.Y) G:Y'>0 PROBQ
"RTN","GMPLRPTS",26,0)
 S GMPTERM=Y,GMPTEXT=$$UP^XLFSTR(X) S:+GMPTERM'>1 GMPTERM="1^"_GMPTEXT
"RTN","GMPLRPTS",27,0)
 S STATUS=$$STATUS G:STATUS="^" PROBQ
"RTN","GMPLRPTS",28,0)
 D WAIT^DICD
"RTN","GMPLRPTS",29,0)
 S GMPRT=$$PPRBSPEC^GMPLAPI7("^TMP(""GMPRT"","_$J_")",+GMPTERM,GMPTEXT,STATUS)
"RTN","GMPLRPTS",30,0)
 I GMPRT'>0 D  D KILL G PROB1
"RTN","GMPLRPTS",31,0)
 . D EN^DDIOL($C(7))
"RTN","GMPLRPTS",32,0)
 . D EN^DDIOL($$EZBLD^DIALOG(1250000.442))
"RTN","GMPLRPTS",33,0)
 . D EN^DDIOL("",,"!")
"RTN","GMPLRPTS",34,0)
 S GMPLHDR=$$EZBLD^DIALOG(1250000.444,$$UP^XLFSTR($P(GMPTERM,U,2))),GMPLCNT=0
"RTN","GMPLRPTS",35,0)
 D DEVICE I $D(GMPQUIT) D KILL G PROB1
"RTN","GMPLRPTS",36,0)
 D PRT D KILL G PROB1
"RTN","GMPLRPTS",37,0)
PROBQ D KILL
"RTN","GMPLRPTS",38,0)
 Q
"RTN","GMPLRPTS",39,0)
 ;
"RTN","GMPLRPTS",40,0)
KILL ; Clean-up after ourselves
"RTN","GMPLRPTS",41,0)
 K GMPRT,GMPLHDR,GMPQUIT,X,Y,^TMP("GMPRT",$J)
"RTN","GMPLRPTS",42,0)
 Q
"RTN","GMPLRPTS",43,0)
 ;
"RTN","GMPLRPTS",44,0)
DEVICE ; Prompt for device to send report to -- Sets GMPQUIT to quit
"RTN","GMPLRPTS",45,0)
 S %ZIS="Q" D ^%ZIS I POP S GMPQUIT=1 G DQ
"RTN","GMPLRPTS",46,0)
 I $D(IO("Q")) D
"RTN","GMPLRPTS",47,0)
 . S ZTRTN="PRT^GMPLRPTS",ZTDESC=GMPLHDR
"RTN","GMPLRPTS",48,0)
 . S (ZTSAVE("GMPRT"),ZTSAVE("^TMP(""GMPRT"",$J,"),ZTSAVE("GMPLHDR"),ZTSAVE("GMPLCNT"))=""
"RTN","GMPLRPTS",49,0)
 . D ^%ZTLOAD,HOME^%ZIS S:$D(ZTSK) GMPQUIT=1
"RTN","GMPLRPTS",50,0)
DQ K IO("Q"),POP,%ZIS,ZTRTN,ZTDESC,ZTSAVE,ZTSK
"RTN","GMPLRPTS",51,0)
 Q
"RTN","GMPLRPTS",52,0)
 ;
"RTN","GMPLRPTS",53,0)
PRT ; Print patient listing from ^TMP("GMPRT",$J,)
"RTN","GMPLRPTS",54,0)
 D PRTFMT("")
"RTN","GMPLRPTS",55,0)
 Q
"RTN","GMPLRPTS",56,0)
 ;
"RTN","GMPLRPTS",57,0)
PRTFMT(FMT) ; FMT formats ^TMP("GMPRT",$J,NAME) 
"RTN","GMPLRPTS",58,0)
 U IO N NAME,PAGE,LINE
"RTN","GMPLRPTS",59,0)
 S NAME="",PAGE=0 D HDR
"RTN","GMPLRPTS",60,0)
 F  S NAME=$O(^TMP("GMPRT",$J,NAME)) Q:NAME=""  D  Q:$D(GMPQUIT)
"RTN","GMPLRPTS",61,0)
 . I $Y>(IOSL-4) D RETURN Q:$D(GMPQUIT)  D HDR
"RTN","GMPLRPTS",62,0)
 . S LINE=^TMP("GMPRT",$J,NAME)
"RTN","GMPLRPTS",63,0)
 . I FMT]"" X FMT
"RTN","GMPLRPTS",64,0)
 . W !,NAME,?60,LINE
"RTN","GMPLRPTS",65,0)
 D:'$D(GMPQUIT) EN^DDIOL($$EZBLD^DIALOG(1250000.445,GMPRT),,"!!?10")
"RTN","GMPLRPTS",66,0)
 W:IOST?1"P".E @IOF I IOST'?1"P".E,'$D(GMPQUIT) D RETURN
"RTN","GMPLRPTS",67,0)
 I $D(ZTQUEUED) S ZTREQ="@" D KILL
"RTN","GMPLRPTS",68,0)
 D ^%ZISC
"RTN","GMPLRPTS",69,0)
 Q
"RTN","GMPLRPTS",70,0)
 ;
"RTN","GMPLRPTS",71,0)
HDR ; Prints report header
"RTN","GMPLRPTS",72,0)
 N MSG
"RTN","GMPLRPTS",73,0)
 W @IOF
"RTN","GMPLRPTS",74,0)
 S PAGE=PAGE+1
"RTN","GMPLRPTS",75,0)
 D EN^DDIOL(GMPLHDR,,"?0")
"RTN","GMPLRPTS",76,0)
 D EN^DDIOL($$EXTDT^GMPLX(DT),,"?60")
"RTN","GMPLRPTS",77,0)
 D EN^DDIOL($$EZBLD^DIALOG(1250000.446,PAGE),,"?70")
"RTN","GMPLRPTS",78,0)
 D EN^DDIOL($$EZBLD^DIALOG(1250000.447),,"!!")
"RTN","GMPLRPTS",79,0)
 S MSG=$S(GMPLCNT:1250000.448,1:1250000.449)
"RTN","GMPLRPTS",80,0)
 D EN^DDIOL($$EZBLD^DIALOG(MSG),,"?60")
"RTN","GMPLRPTS",81,0)
 D EN^DDIOL($$REPEAT^XLFSTR("-",79))
"RTN","GMPLRPTS",82,0)
 D EN^DDIOL("",,"!")
"RTN","GMPLRPTS",83,0)
 Q
"RTN","GMPLRPTS",84,0)
 ;
"RTN","GMPLRPTS",85,0)
RETURN ; Checks for end-of-page, continue
"RTN","GMPLRPTS",86,0)
 Q:IOST?1"P".E  N X,Y,DIR,I
"RTN","GMPLRPTS",87,0)
 F I=1:1:(IOSL-$Y-2) W !
"RTN","GMPLRPTS",88,0)
 S DIR(0)="E" D ^DIR S:'Y GMPQUIT=1
"RTN","GMPLRPTS",89,0)
 Q
"RTN","GMPLRPTS",90,0)
 ;
"RTN","GMPLRPTS",91,0)
STATUS() ; Prompts for problem status to search for
"RTN","GMPLRPTS",92,0)
 N DIR,X,Y
"RTN","GMPLRPTS",93,0)
 S DIR(0)="SA^A:ACTIVE;I:INACTIVE;B:BOTH;"
"RTN","GMPLRPTS",94,0)
 S DIR("B")="ACTIVE"
"RTN","GMPLRPTS",95,0)
 D BLD^DIALOG(1250000.450,,,"DIR(""A"")")
"RTN","GMPLRPTS",96,0)
 D BLD^DIALOG(1250000.451,,,"DIR(""?"")")
"RTN","GMPLRPTS",97,0)
 D ^DIR S:$D(DTOUT)!($D(DUOUT)) Y="^" S:Y="B" Y="AI"
"RTN","GMPLRPTS",98,0)
 Q Y
"RTN","GMPLSAVE")
0^57^B575127
"RTN","GMPLSAVE",1,0)
GMPLSAVE ; SLC/MKB/KER -- Save Problem List data ; 03/12/13
"RTN","GMPLSAVE",2,0)
 ;;2.0;Problem List;**26,31,35,37,38,260002**;Aug 25, 1994;Build 26
"RTN","GMPLSAVE",3,0)
 ;
"RTN","GMPLSAVE",4,0)
 ; External References
"RTN","GMPLSAVE",5,0)
 ;   DBIA 10018  ^DIE
"RTN","GMPLSAVE",6,0)
 ;   DBIA 10013  ^DIK
"RTN","GMPLSAVE",7,0)
 ;   DBIA 10013  IX1^DIK
"RTN","GMPLSAVE",8,0)
 ;   DBIA 10103  $$HTFM^XLFDT
"RTN","GMPLSAVE",9,0)
 ;
"RTN","GMPLSAVE",10,0)
EN ; Save Changes made to Existing Problem
"RTN","GMPLSAVE",11,0)
 N GMPERR
"RTN","GMPLSAVE",12,0)
 S GMPSAVED=$$UPDATE^GMPLAPI2(.GMPERR,GMPIFN,.GMPFLD,$G(GMPLUSER),+$G(GMPROV))
"RTN","GMPLSAVE",13,0)
 Q
"RTN","GMPLSAVE",14,0)
 ;
"RTN","GMPLSAVE",15,0)
NEW ; Save Collected Values in new Problem Entry
"RTN","GMPLSAVE",16,0)
 ;   Output   DA (left defined)
"RTN","GMPLSAVE",17,0)
 S DA=0
"RTN","GMPLSAVE",18,0)
 I '$$NEW^GMPLAPI2(.DA,GMPDFN,+$G(GMPROV),.GMPFLD,.GMPLUSER) D  Q
"RTN","GMPLSAVE",19,0)
 . W !!,$$ERRTXT^GMPLAPIE(.DA)
"RTN","GMPLSAVE",20,0)
 Q
"RTN","GMPLSITE")
0^58^B3497994
"RTN","GMPLSITE",1,0)
GMPLSITE ;RGI -- GMPL Site parameters ;5/15/13
"RTN","GMPLSITE",2,0)
 ;;2.0;Problem List;**260002**;Aug 25, 1994;Build 26
"RTN","GMPLSITE",3,0)
 Q  ;
"RTN","GMPLSITE",4,0)
 ;
"RTN","GMPLSITE",5,0)
GET(RETURN) ;Get site parameters
"RTN","GMPLSITE",6,0)
 ;Input:
"RTN","GMPLSITE",7,0)
 ;  .RETURN [Required,Array] Set to site parameters.
"RTN","GMPLSITE",8,0)
 ;      RETURN("VER") [Boolean] Automatically verify problems
"RTN","GMPLSITE",9,0)
 ;      RETURN("PRT") [Boolean] Prompt to print a chart copy on exit
"RTN","GMPLSITE",10,0)
 ;      RETURN("CLU") [Boolean] Use Clinical Lexicon
"RTN","GMPLSITE",11,0)
 ;      RETURN("REV") [String] Problem display order: C = chronological, R = reverse chronological
"RTN","GMPLSITE",12,0)
 ;      RETURN("SDP") [Boolean] Screen duplicate ICD9 entries.
"RTN","GMPLSITE",13,0)
 N %
"RTN","GMPLSITE",14,0)
 K RETURN
"RTN","GMPLSITE",15,0)
 S %=$$GETPAR(.RETURN)
"RTN","GMPLSITE",16,0)
 S RETURN("REV")=$S(RETURN("REV")="R":1,1:0)
"RTN","GMPLSITE",17,0)
 Q
"RTN","GMPLSITE",18,0)
 ;
"RTN","GMPLSITE",19,0)
VERIFY() ;
"RTN","GMPLSITE",20,0)
 N PARAMS
"RTN","GMPLSITE",21,0)
 D GET(.PARAMS)
"RTN","GMPLSITE",22,0)
 Q PARAMS("VER")
"RTN","GMPLSITE",23,0)
 ;
"RTN","GMPLSITE",24,0)
GETPAR(RETURN) ;
"RTN","GMPLSITE",25,0)
 K RETURN
"RTN","GMPLSITE",26,0)
 D GETPARM^GMPLDAL3(.RETURN)
"RTN","GMPLSITE",27,0)
 Q 1
"RTN","GMPLSITE",28,0)
 ;
"RTN","GMPLSITE",29,0)
SET(RETURN,PARAMS) ; Set site parameters
"RTN","GMPLSITE",30,0)
 ;Input:
"RTN","GMPLSITE",31,0)
 ;  .RETURN [Required,Array] Set to site parameters.
"RTN","GMPLSITE",32,0)
 ;                           Set to Error description if the call fails
"RTN","GMPLSITE",33,0)
 ;      RETURN("VER") [Boolean] Automatically verify problems
"RTN","GMPLSITE",34,0)
 ;      RETURN("PRT") [Boolean] Prompt to print a chart copy on exit
"RTN","GMPLSITE",35,0)
 ;      RETURN("CLU") [Boolean] Use Clinical Lexicon
"RTN","GMPLSITE",36,0)
 ;      RETURN("REV") [String] Problem display order: C = chronological, R = reverse chronological
"RTN","GMPLSITE",37,0)
 ;      RETURN("SDP") [Boolean] Screen duplicate ICD9 entries.
"RTN","GMPLSITE",38,0)
 ;Output:
"RTN","GMPLSITE",39,0)
 ;  1=Success,0=Failure
"RTN","GMPLSITE",40,0)
 N CHOICES,HASERR,HASELEM,I
"RTN","GMPLSITE",41,0)
 S CHOICES=",VER,PRT,CLU,REV,SDP,"
"RTN","GMPLSITE",42,0)
 S HASELEM=0,HASERR=0,I=""
"RTN","GMPLSITE",43,0)
 F  S I=$O(PARAMS(I)) Q:I=""  S HASELEM=1 D
"RTN","GMPLSITE",44,0)
 . I CHOICES'[(","_I_",") S HASERR=1 D ERR^GMPLAPIE("RETURN","INVPARAM",I) Q
"RTN","GMPLSITE",45,0)
 . I PARAMS(I)="" Q
"RTN","GMPLSITE",46,0)
 . I I'="REV",PARAMS(I)'=1,PARAMS(I)'=0,PARAMS(I)'="@" S HASERR=1 D ERR^GMPLAPIE("RETURN","INVPARAM",PARAMS(I)_" @"_I) Q
"RTN","GMPLSITE",47,0)
 . I I="REV",PARAMS(I)'="R",PARAMS(I)'="C",PARAMS(I)'="@" S HASERR=1 D ERR^GMPLAPIE("RETURN","INVPARAM",PARAMS(I)_" @"_I) Q
"RTN","GMPLSITE",48,0)
 I HASERR Q 0
"RTN","GMPLSITE",49,0)
 I 'HASELEM D ERR^GMPLAPIE("RETURN","INVPARAM","NO KEY") Q 0
"RTN","GMPLSITE",50,0)
 D SETPARM^GMPLDAL3(.PARAMS)
"RTN","GMPLSITE",51,0)
 Q 1
"RTN","GMPLSITE",52,0)
 ;
"RTN","GMPLUTL")
0^59^B39075337
"RTN","GMPLUTL",1,0)
GMPLUTL ; SLC/MKB/KER -- PL Utilities                      ; 09/13/12
"RTN","GMPLUTL",2,0)
 ;;2.0;Problem List;**3,6,8,10,16,26,35,39,260002**;Aug 25, 1994;Build 26
"RTN","GMPLUTL",3,0)
 ;
"RTN","GMPLUTL",4,0)
 ; External References
"RTN","GMPLUTL",5,0)
 ;   DBIA    348  ^DPT(
"RTN","GMPLUTL",6,0)
 ;   DBIA  10082  ^ICD9(
"RTN","GMPLUTL",7,0)
 ;   DBIA  10006  ^VA(200
"RTN","GMPLUTL",8,0)
 ;          
"RTN","GMPLUTL",9,0)
ACTIVE(GMPDFN,GMPL) ; Returns list of Active Problems for a Patient
"RTN","GMPLUTL",10,0)
 ;          
"RTN","GMPLUTL",11,0)
 ;   GMPDFN   Pointer to Patient
"RTN","GMPLUTL",12,0)
 ;   GMPL     Array in which the problems will be
"RTN","GMPLUTL",13,0)
 ;            returned, passed by reference
"RTN","GMPLUTL",14,0)
 ;          
"RTN","GMPLUTL",15,0)
 ;   GMPL(#,0)  Problem file (#9000011) IEN
"RTN","GMPLUTL",16,0)
 ;   GMPL(#,1)  Piece 1:  Pointer to Problem (Lexicon file #757.01)
"RTN","GMPLUTL",17,0)
 ;                    2:  Provider Narrative 
"RTN","GMPLUTL",18,0)
 ;                 NOTE:  the provider narrative may be different
"RTN","GMPLUTL",19,0)
 ;                        from the Lexicon term in file 757.01
"RTN","GMPLUTL",20,0)
 ;   GMPL(#,2)  Piece 1:  Pointer to ICD Diagnosis (file #80)
"RTN","GMPLUTL",21,0)
 ;                    2:  ICD-9 Code
"RTN","GMPLUTL",22,0)
 ;   GMPL(#,3)  Piece 1:  Internal Date of Onset
"RTN","GMPLUTL",23,0)
 ;                    2:  External Date of Onset 00/00/00
"RTN","GMPLUTL",24,0)
 ;   GMPL(#,4)  Piece 1:  Abbreviated Service Connection
"RTN","GMPLUTL",25,0)
 ;                            SC^Service Connected
"RTN","GMPLUTL",26,0)
 ;                            NSC^Not Service Connected
"RTN","GMPLUTL",27,0)
 ;                            null
"RTN","GMPLUTL",28,0)
 ;                    2:  Full text Service Connection
"RTN","GMPLUTL",29,0)
 ;   GMPL(#,5)  Piece 1:  Abbreviated Exposure
"RTN","GMPLUTL",30,0)
 ;                        Full text Exposure
"RTN","GMPLUTL",31,0)
 ;                            AO^Agent Orange
"RTN","GMPLUTL",32,0)
 ;                            IR^Radiation
"RTN","GMPLUTL",33,0)
 ;                            EC^Evn Contaminants
"RTN","GMPLUTL",34,0)
 ;                            HNC^Head/Neck Cancer
"RTN","GMPLUTL",35,0)
 ;                            MST^Mil Sexual Trauma
"RTN","GMPLUTL",36,0)
 ;                            CV^Combat Vet
"RTN","GMPLUTL",37,0)
 ;                            SHD^SHAD
"RTN","GMPLUTL",38,0)
 ;                            null
"RTN","GMPLUTL",39,0)
 ;
"RTN","GMPLUTL",40,0)
 N I,IFN,GMPL0,SP,NUM,ONSET,GMPLIST,GMPARAM,%
"RTN","GMPLUTL",41,0)
 Q:$G(GMPDFN)'>0
"RTN","GMPLUTL",42,0)
 S SP=""
"RTN","GMPLUTL",43,0)
 D GET^GMPLSITE(.GMPARAM)
"RTN","GMPLUTL",44,0)
 S %=$$GETPLIST^GMPLAPI4(.GMPLIST,GMPDFN,"A",GMPARAM("REV"),,"",0)
"RTN","GMPLUTL",45,0)
 F NUM=1:1:GMPLIST(0)  D
"RTN","GMPLUTL",46,0)
 . S IFN=+GMPLIST(NUM) Q:IFN'>0
"RTN","GMPLUTL",47,0)
 . S %=$$DETAIL^GMPLAPI2(.GMPL0,IFN)
"RTN","GMPLUTL",48,0)
 . S GMPL(NUM,0)=IFN
"RTN","GMPLUTL",49,0)
 . S GMPL(NUM,1)=+GMPL0(1.01)_U_$$PROBTEXT^GMPLX(IFN)
"RTN","GMPLUTL",50,0)
 . S GMPL(NUM,2)=GMPL0(.01)
"RTN","GMPLUTL",51,0)
 . S ONSET=$P(GMPL0(.13),U)
"RTN","GMPLUTL",52,0)
 . S GMPL(NUM,3)=$S(ONSET:ONSET_U_$$EXTDT^GMPLX(ONSET),1:"")
"RTN","GMPLUTL",53,0)
 . S GMPL(NUM,4)=$S(+$P(GMPL0(1.10),U):"SC^SERVICE-CONNECTED",$P(GMPL0(1.10),U)=0:"NSC^NOT SERVICE-CONNECTED",1:"")
"RTN","GMPLUTL",54,0)
 . F I=1.11,1.12,1.13,1.15,1.16,1.17,1.18 S:+GMPL0(I) SP=$S(I=1.11:"A",I=1.12:"I",I=1.13:"P",I=1.15:"H",1.16:"M",1.17:"C",1:"S")
"RTN","GMPLUTL",55,0)
 . S GMPL(NUM,5)=$S(SP="A":"AO^AGENT ORANGE",SP="I":"IR^RADIATION",SP="P":"EC^ENV CONTAMINANTS",SP="H":"HNC^HEAD AND/OR NECK CANCER",SP="M":"MST^MILIARY SEXUAL TRAUMA",SP="C":"CV^COMBAT VET",SP="S":"SHD^SHAD",1:"")
"RTN","GMPLUTL",56,0)
 S GMPL(0)=GMPLIST(0)
"RTN","GMPLUTL",57,0)
 Q
"RTN","GMPLUTL",58,0)
 ;
"RTN","GMPLUTL",59,0)
CREATE(PL,PLY) ; Creates a new problem
"RTN","GMPLUTL",60,0)
 ;           
"RTN","GMPLUTL",61,0)
 ;  Input array, passed by reference
"RTN","GMPLUTL",62,0)
 ;    Required
"RTN","GMPLUTL",63,0)
 ;      PL("PATIENT")    Pointer to Patient #2
"RTN","GMPLUTL",64,0)
 ;      PL("NARRATIVE")  Text as entered by provider
"RTN","GMPLUTL",65,0)
 ;      PL("PROVIDER")   Pointer to provider #200
"RTN","GMPLUTL",66,0)
 ;    Optional
"RTN","GMPLUTL",67,0)
 ;      PL("DIAGNOSIS")  Pointer to ICD-9 #80
"RTN","GMPLUTL",68,0)
 ;      PL("LEXICON")    Pointer to Lexicon #757.01
"RTN","GMPLUTL",69,0)
 ;      PL("STATUS")     A = Active   I = Inactive
"RTN","GMPLUTL",70,0)
 ;      PL("ONSET")      Internal Date of Onset
"RTN","GMPLUTL",71,0)
 ;      PL("RECORDED")   Internal Date Recorded
"RTN","GMPLUTL",72,0)
 ;      PL("RESOLVED")   Internal Date Problem was Resolved
"RTN","GMPLUTL",73,0)
 ;      PL("COMMENT")    Comment text, up to 60 characters
"RTN","GMPLUTL",74,0)
 ;      PL("LOCATION")   Pointer to Hospital Location
"RTN","GMPLUTL",75,0)
 ;      PL("SC")         Service Connected 1 = Yes 0 = No
"RTN","GMPLUTL",76,0)
 ;      PL("AO")         Agent Orange      1 = Yes 0 = No
"RTN","GMPLUTL",77,0)
 ;      PL("IR")         Radiation         1 = Yes 0 = No
"RTN","GMPLUTL",78,0)
 ;      PL("EC")         Env Contamination 1 = Yes 0 = No
"RTN","GMPLUTL",79,0)
 ;      PL("HNC")        Head/Neck Cancer  1 = Yes 0 = No
"RTN","GMPLUTL",80,0)
 ;      PL("MST")        Mil Sexual Trauma 1 = Yes 0 = No
"RTN","GMPLUTL",81,0)
 ;      PL("CV")         Combat Vet        1 = Yes 0 = No
"RTN","GMPLUTL",82,0)
 ;      PL("SHD")        Shipboard Hazard & Defense 1=Yes  0=No
"RTN","GMPLUTL",83,0)
 ;                   
"RTN","GMPLUTL",84,0)
 ;  Output, passed by reference
"RTN","GMPLUTL",85,0)
 ;      PLY              Equivalent of Fileman Y, DA
"RTN","GMPLUTL",86,0)
 ;      PLY(0)           Equivalent of Fileman Y(0)
"RTN","GMPLUTL",87,0)
 ;               
"RTN","GMPLUTL",88,0)
 N GMPI,GMPQUIT,GMPVAMC,GMPVA,GMPFLD,GMPSC,GMPAGTOR,GMPION,GMPGULF
"RTN","GMPLUTL",89,0)
 N GMPHNC,GMPMST,GMPCV,GMPSHD,DA,GMPDFN,GMPROV,GMPARAM
"RTN","GMPLUTL",90,0)
 K PLY S PLY=-1,PLY(0)=""
"RTN","GMPLUTL",91,0)
 S GMPVAMC=+$G(DUZ(2)),GMPVA=$S($G(DUZ("AG"))="V":1,1:0)
"RTN","GMPLUTL",92,0)
 I '$L($G(PL("NARRATIVE"))) S PLY(0)=$$EZBLD^DIALOG(1250000.452) Q
"RTN","GMPLUTL",93,0)
 I $$PATNAME^GMPLEXT(+$G(PL("PATIENT")))="" S PLY(0)=$$EZBLD^DIALOG(1250000.453) Q
"RTN","GMPLUTL",94,0)
 I $$ACTIVE^XUSER(+$G(PL("PROVIDER")))="" S PLY(0)=$$EZBLD^DIALOG(1250000.454) Q
"RTN","GMPLUTL",95,0)
 S GMPDFN=+PL("PATIENT"),(GMPSC,GMPAGTOR,GMPION,GMPGULF,GMPHNC,GMPMST,GMPCV,GMPSHD)=0
"RTN","GMPLUTL",96,0)
 D:GMPVA VADPT^GMPLX1(GMPDFN)
"RTN","GMPLUTL",97,0)
 F GMPI="DIAGNOSI","LEXICON","DUPLICAT","LOCATION","STATUS" D @(GMPI_"^GMPLUTL1") Q:$D(GMPQUIT)
"RTN","GMPLUTL",98,0)
 Q:$D(GMPQUIT)
"RTN","GMPLUTL",99,0)
 F GMPI="ONSET","RESOLVED","RECORDED","SC","AO","IR","EC","HNC","MST","CV","SHD" D @(GMPI_"^GMPLUTL1") Q:$D(GMPQUIT)
"RTN","GMPLUTL",100,0)
 Q:$D(GMPQUIT)
"RTN","GMPLUTL",101,0)
CR1 ; Ok to Create
"RTN","GMPLUTL",102,0)
 S GMPFLD(.01)=PL("DIAGNOSIS"),GMPFLD(1.01)=PL("LEXICON")
"RTN","GMPLUTL",103,0)
 S GMPFLD(.05)=U_$E(PL("NARRATIVE"),1,80)
"RTN","GMPLUTL",104,0)
 S (GMPROV,GMPFLD(1.04),GMPFLD(1.05))=+PL("PROVIDER")
"RTN","GMPLUTL",105,0)
 S GMPFLD(1.06)=$$SERVICE^GMPLEXT(+PL("PROVIDER"))
"RTN","GMPLUTL",106,0)
 S GMPFLD(.13)=PL("ONSET"),GMPFLD(1.09)=PL("RECORDED")
"RTN","GMPLUTL",107,0)
 D GET^GMPLSITE(.GMPARAM)
"RTN","GMPLUTL",108,0)
 S GMPFLD(1.02)=$S('GMPARAM("VER"):"P",$G(GMPLUSER):"P",1:"T")
"RTN","GMPLUTL",109,0)
 S GMPFLD(.12)=PL("STATUS"),GMPFLD(1.14)="",GMPFLD(1.07)=PL("RESOLVED")
"RTN","GMPLUTL",110,0)
 S GMPFLD(10,0)=0,GMPFLD(1.03)=$G(DUZ),GMPFLD(1.08)=PL("LOCATION")
"RTN","GMPLUTL",111,0)
 S:$L($G(PL("COMMENT"))) GMPFLD(10,"NEW",1)=$E(PL("COMMENT"),1,60)
"RTN","GMPLUTL",112,0)
 S GMPFLD(1.1)=PL("SC"),GMPFLD(1.11)=PL("AO"),GMPFLD(1.12)=PL("IR")
"RTN","GMPLUTL",113,0)
 S GMPFLD(1.13)=PL("EC"),GMPFLD(1.15)=$G(PL("HNC")),GMPFLD(1.16)=$G(PL("MST"))
"RTN","GMPLUTL",114,0)
 S GMPFLD(1.17)=$G(PL("CV")),GMPFLD(1.18)=$G(PL("SHD"))
"RTN","GMPLUTL",115,0)
 D NEW^GMPLSAVE S PLY=DA
"RTN","GMPLUTL",116,0)
CRQ ; Quit Create
"RTN","GMPLUTL",117,0)
 Q
"RTN","GMPLUTL",118,0)
 ;            
"RTN","GMPLUTL",119,0)
UPDATE(PL,PLY) ; Update a Problem/Create if Not Found
"RTN","GMPLUTL",120,0)
 ;            
"RTN","GMPLUTL",121,0)
 ;  Input array, passed by reference
"RTN","GMPLUTL",122,0)
 ;    Required
"RTN","GMPLUTL",123,0)
 ;      PL("PROBLEM")    Pointer to Problem #9000011
"RTN","GMPLUTL",124,0)
 ;      PL("PROVIDER")   Pointer to provider #200
"RTN","GMPLUTL",125,0)
 ;            
"RTN","GMPLUTL",126,0)
 ;    Optional
"RTN","GMPLUTL",127,0)
 ;      PL("NARRATIVE")  Text as entered by provider
"RTN","GMPLUTL",128,0)
 ;      PL("DIAGNOSIS")  Pointer to ICD-9 #80
"RTN","GMPLUTL",129,0)
 ;      PL("LEXICON")    Pointer to Lexicon #757.01
"RTN","GMPLUTL",130,0)
 ;      PL("STATUS")     A = Active   I = Inactive
"RTN","GMPLUTL",131,0)
 ;      PL("ONSET")      Internal Date of Onset
"RTN","GMPLUTL",132,0)
 ;      PL("RECORDED")   Internal Date Recorded
"RTN","GMPLUTL",133,0)
 ;      PL("RESOLVED")   Internal Date Problem was Resolved
"RTN","GMPLUTL",134,0)
 ;      PL("COMMENT")    Comment text, up to 60 characters
"RTN","GMPLUTL",135,0)
 ;      PL("LOCATION")   Pointer to Hospital Location
"RTN","GMPLUTL",136,0)
 ;      PL("SC")         Service Connected 1 = Yes 0 = No
"RTN","GMPLUTL",137,0)
 ;      PL("AO")         Agent Orange      1 = Yes 0 = No
"RTN","GMPLUTL",138,0)
 ;      PL("IR")         Radiation         1 = Yes 0 = No
"RTN","GMPLUTL",139,0)
 ;      PL("EC")         Env Contamination 1 = Yes 0 = No
"RTN","GMPLUTL",140,0)
 ;      PL("HNC")        Head/Neck Cancer  1 = Yes 0 = No
"RTN","GMPLUTL",141,0)
 ;      PL("MST")        Mil Sexual Trauma 1 = Yes 0 = No
"RTN","GMPLUTL",142,0)
 ;      PL("CV")         Combat Veteran    1 = Yes 0 = No
"RTN","GMPLUTL",143,0)
 ;      PL("SHD")        SHAD              1 = Yes 0 = No
"RTN","GMPLUTL",144,0)
 ;            
"RTN","GMPLUTL",145,0)
 ;  Output, passed by reference
"RTN","GMPLUTL",146,0)
 ;      PLY              Equivalent of Fileman Y, DA
"RTN","GMPLUTL",147,0)
 ;      PLY(0)           Equivalent of Fileman Y(0)
"RTN","GMPLUTL",148,0)
 ;            
"RTN","GMPLUTL",149,0)
 N GMPORIG,GMPFLD,FLD,ITEMS,SUB,GMPI,DIFFRENT,GMPIFN,GMPVAMC,GMPVA,GMPROV,GMPQUIT,GMPDFN,%
"RTN","GMPLUTL",150,0)
 N VALID
"RTN","GMPLUTL",151,0)
 S GMPVAMC=+$G(DUZ(2)),GMPVA=$S($G(DUZ("AG"))="V":1,1:0),PLY=-1,PLY(0)=""
"RTN","GMPLUTL",152,0)
 S GMPIFN=$G(PL("PROBLEM")) I GMPIFN="" D CREATE(.PL,.PLY) Q
"RTN","GMPLUTL",153,0)
 S %=$$VALID^GMPLAPI4(.VALID,GMPIFN)
"RTN","GMPLUTL",154,0)
 I 'VALID S PLY(0)=$$EZBLD^DIALOG(1250000.455) Q
"RTN","GMPLUTL",155,0)
 I $$PROVNAME^GMPLEXT(+$G(PL("PROVIDER")))="" S PLY(0)=$$EZBLD^DIALOG(1250000.454) Q
"RTN","GMPLUTL",156,0)
 S GMPROV=+$G(PL("PROVIDER"))
"RTN","GMPLUTL",157,0)
 S %=$$PATIENT^GMPLAPI4(.GMPDFN,GMPIFN)
"RTN","GMPLUTL",158,0)
 D GETFLDS^GMPLEDT3(GMPIFN) I '$D(GMPFLD) S PLY(0)=$$EZBLD^DIALOG(1250000.455) Q
"RTN","GMPLUTL",159,0)
 I +$G(PL("PATIENT")),+PL("PATIENT")'=GMPDFN S PLY(0)=$$EZBLD^DIALOG(1250000.456) Q
"RTN","GMPLUTL",160,0)
 I $L($G(PL("RECORDED"))) S PLY(0)=$$EZBLD^DIALOG(1250000.457) Q
"RTN","GMPLUTL",161,0)
 S (GMPSC,GMPAGTOR,GMPION,GMPGULF)=0 D:GMPVA VADPT^GMPLX1(GMPDFN)
"RTN","GMPLUTL",162,0)
 S ITEMS="LEXICON^DIAGNOSIS^LOCATION^STATUS^ONSET^RESOLVED^SC^AO^IR^EC^HNC^MST^SHD",FLD="1.01^.01^1.08^.12^.13^1.07^1.1^1.11^1.12^1.13^1.15^1.16^1.17^1.18"
"RTN","GMPLUTL",163,0)
 F GMPI=1:1 S SUB=$P(ITEMS,U,GMPI) Q:SUB=""  D  Q:$D(GMPQUIT)
"RTN","GMPLUTL",164,0)
 . I '$L($G(PL(SUB))) S PL(SUB)=$P(GMPFLD($P(FLD,U,GMPI)),U) Q
"RTN","GMPLUTL",165,0)
 . I SUB="STATUS",PL(SUB)="@" S GMPQUIT=1,PLY(0)=$$EZBLD^DIALOG(1250000.458) Q
"RTN","GMPLUTL",166,0)
 . I PL(SUB)'="@" D @($E(SUB,1,8)_"^GMPLUTL1") Q:$D(GMPQUIT)
"RTN","GMPLUTL",167,0)
 . S GMPFLD($P(FLD,U,GMPI))=$S(PL(SUB)="@":"",1:PL(SUB)),DIFFRENT=1
"RTN","GMPLUTL",168,0)
 Q:$D(GMPQUIT)
"RTN","GMPLUTL",169,0)
 I +GMPFLD(1.07),GMPFLD(1.07)<GMPFLD(.13) S PLY(0)=$$EZBLD^DIALOG(1250000.459) Q
"RTN","GMPLUTL",170,0)
 I +GMPFLD(1.09),GMPFLD(1.09)<GMPFLD(.13) S PLY(0)=$$EZBLD^DIALOG(1250000.460) Q
"RTN","GMPLUTL",171,0)
 S:$L($G(PL("NARRATIVE"))) GMPFLD(.05)=U_PL("NARRATIVE"),DIFFRENT=1
"RTN","GMPLUTL",172,0)
 S:$L($G(PL("COMMENT"))) GMPFLD(10,"NEW",1)=$E(PL("COMMENT"),1,60),DIFFRENT=1
"RTN","GMPLUTL",173,0)
 D:$D(DIFFRENT) EN^GMPLSAVE S PLY=GMPIFN,PLY(0)=""
"RTN","GMPLUTL",174,0)
 Q
"RTN","GMPLUTL1")
0^60^B22558845
"RTN","GMPLUTL1",1,0)
GMPLUTL1 ; SLC/MKB/KER -- PL Utilities (cont)               ; 09/14/12
"RTN","GMPLUTL1",2,0)
 ;;2.0;Problem List;**3,8,7,9,26,35,39,260002**;Aug 25, 1994;Build 26
"RTN","GMPLUTL1",3,0)
 ;
"RTN","GMPLUTL1",4,0)
 ; External References
"RTN","GMPLUTL1",5,0)
 ;   DBIA   446  ^AUTNPOV(
"RTN","GMPLUTL1",6,0)
 ;   DBIA 10082  ^ICD9(
"RTN","GMPLUTL1",7,0)
 ;   DBIA  1571  ^LEX(757.01
"RTN","GMPLUTL1",8,0)
 ;   DBIA 10040  ^SC(
"RTN","GMPLUTL1",9,0)
 ;   DBIA 10060  ^VA(200
"RTN","GMPLUTL1",10,0)
 ;   DBIA 10003  ^%DT
"RTN","GMPLUTL1",11,0)
 ;   DBIA 10104  $$UP^XLFSTR
"RTN","GMPLUTL1",12,0)
 ;                   
"RTN","GMPLUTL1",13,0)
 ; All entry points in this routine expect the 
"RTN","GMPLUTL1",14,0)
 ; PL("data item") array from routine ^GMPLUTL.
"RTN","GMPLUTL1",15,0)
 ;                   
"RTN","GMPLUTL1",16,0)
 ;   Entry     Expected Variable
"RTN","GMPLUTL1",17,0)
 ;   Point     From VADPT^GMPLX1
"RTN","GMPLUTL1",18,0)
 ;    AO           GMPAGTOR
"RTN","GMPLUTL1",19,0)
 ;    IR           GMPION
"RTN","GMPLUTL1",20,0)
 ;    EC           GMPGULF
"RTN","GMPLUTL1",21,0)
 ;    HNC          GMPHNC
"RTN","GMPLUTL1",22,0)
 ;    MST          GMPMST
"RTN","GMPLUTL1",23,0)
 ;    CV           GMPCV
"RTN","GMPLUTL1",24,0)
 ;    SHD          GMPSHD
"RTN","GMPLUTL1",25,0)
 ;                   
"RTN","GMPLUTL1",26,0)
 Q
"RTN","GMPLUTL1",27,0)
DIAGNOSI ; ICD Diagnosis Pointer
"RTN","GMPLUTL1",28,0)
 S:'$L($G(PL("DIAGNOSIS"))) PL("DIAGNOSIS")=$$NOS^GMPLEXT()
"RTN","GMPLUTL1",29,0)
 Q:$$ICDCODE^GMPLEXT(+PL("DIAGNOSIS"))'=""
"RTN","GMPLUTL1",30,0)
 S GMPQUIT=1,PLY(0)=$$EZBLD^DIALOG(1250000.461)
"RTN","GMPLUTL1",31,0)
 Q
"RTN","GMPLUTL1",32,0)
 ;
"RTN","GMPLUTL1",33,0)
LEXICON ; Clinical Lexicon Pointer
"RTN","GMPLUTL1",34,0)
 S:'$L($G(PL("LEXICON"))) PL("LEXICON")=1
"RTN","GMPLUTL1",35,0)
 Q:$$CONTEXT^GMPLEXT(+PL("LEXICON"))'=""
"RTN","GMPLUTL1",36,0)
 S GMPQUIT=1,PLY(0)=$$EZBLD^DIALOG(1250000.462)
"RTN","GMPLUTL1",37,0)
 Q
"RTN","GMPLUTL1",38,0)
DUPLICAT ; Problem Already on the List 
"RTN","GMPLUTL1",39,0)
 N DUPL,GMPARAM,%
"RTN","GMPLUTL1",40,0)
 D GET^GMPLSITE(.GMPARAM)
"RTN","GMPLUTL1",41,0)
 Q:GMPARAM("SDP")'=1
"RTN","GMPLUTL1",42,0)
 S:'$L($G(PL("DIAGNOSIS"))) PL("DIAGNOSIS")=$$NOS^GMPLEXT()
"RTN","GMPLUTL1",43,0)
 S %=$$DUPL^GMPLAPI2(.DUPL,GMPDFN,+PL("DIAGNOSIS"),PL("NARRATIVE"),1)
"RTN","GMPLUTL1",44,0)
 I DUPL S GMPQUIT=1,PLY(0)=$$EZBLD^DIALOG(1250000.463)
"RTN","GMPLUTL1",45,0)
 Q
"RTN","GMPLUTL1",46,0)
 ;
"RTN","GMPLUTL1",47,0)
LOCATION ; Hospital Location (Clinic) Pointer
"RTN","GMPLUTL1",48,0)
 S:'$D(PL("LOCATION")) PL("LOCATION")="" Q:'$L(PL("LOCATION"))
"RTN","GMPLUTL1",49,0)
 I $$CLINNAME^GMPLEXT(+PL("LOCATION"))'="" S:$$LOCTYPE^GMPLEXT(+PL("LOCATION"))'="C" PL("LOCATION")="" Q
"RTN","GMPLUTL1",50,0)
 S GMPQUIT=1,PLY(0)=$$EZBLD^DIALOG(1250000.464)
"RTN","GMPLUTL1",51,0)
 Q
"RTN","GMPLUTL1",52,0)
 ;
"RTN","GMPLUTL1",53,0)
PROVIDER ; Responsible Provider
"RTN","GMPLUTL1",54,0)
 S:'$D(PL("PROVIDER")) PL("PROVIDER")=""
"RTN","GMPLUTL1",55,0)
 Q:'$L(PL("PROVIDER"))  Q:$$ACTIVE^XUSER(+PL("PROVIDER"))'=""
"RTN","GMPLUTL1",56,0)
 S GMPQUIT=1,PLY(0)=$$EZBLD^DIALOG(1250000.454)
"RTN","GMPLUTL1",57,0)
 Q
"RTN","GMPLUTL1",58,0)
 ;
"RTN","GMPLUTL1",59,0)
STATUS ; Problem Status
"RTN","GMPLUTL1",60,0)
 S:$G(PL("STATUS"))="" PL("STATUS")="A"
"RTN","GMPLUTL1",61,0)
 I "^A^I^a^i^"[(U_PL("STATUS")_U) S PL("STATUS")=$$UP^XLFSTR(PL("STATUS")) Q
"RTN","GMPLUTL1",62,0)
 S GMPQUIT=1,PLY(0)=$$EZBLD^DIALOG(1250000.467)
"RTN","GMPLUTL1",63,0)
 Q
"RTN","GMPLUTL1",64,0)
 ;
"RTN","GMPLUTL1",65,0)
ONSET ; Date of Onset
"RTN","GMPLUTL1",66,0)
 N %DT,Y,X
"RTN","GMPLUTL1",67,0)
 S:'$D(PL("ONSET")) PL("ONSET")="" Q:'$L(PL("ONSET"))
"RTN","GMPLUTL1",68,0)
 S %DT="P",%DT(0)="-NOW",X=PL("ONSET") D ^%DT
"RTN","GMPLUTL1",69,0)
 I Y>0 S PL("ONSET")=Y Q
"RTN","GMPLUTL1",70,0)
 S GMPQUIT=1,PLY(0)=$$EZBLD^DIALOG(1250000.468)
"RTN","GMPLUTL1",71,0)
 Q
"RTN","GMPLUTL1",72,0)
 ;
"RTN","GMPLUTL1",73,0)
RESOLVED ; Date Resolved (Requires STATUS, ONSET)
"RTN","GMPLUTL1",74,0)
 N %DT,Y,X
"RTN","GMPLUTL1",75,0)
 S:'$D(PL("RESOLVED")) PL("RESOLVED")="" Q:'$L(PL("RESOLVED"))
"RTN","GMPLUTL1",76,0)
 S %DT="P",%DT(0)="-NOW",X=PL("RESOLVED") D ^%DT
"RTN","GMPLUTL1",77,0)
 I Y'>0 S GMPQUIT=1,PLY(0)=$$EZBLD^DIALOG(1250000.469) Q
"RTN","GMPLUTL1",78,0)
 I PL("STATUS")="A" S GMPQUIT=1,PLY(0)=$$EZBLD^DIALOG(1250000.470) Q
"RTN","GMPLUTL1",79,0)
 I Y<PL("ONSET") S GMPQUIT=1,PLY(0)=$$EZBLD^DIALOG(1250000.459) Q
"RTN","GMPLUTL1",80,0)
 S PL("RESOLVED")=Y
"RTN","GMPLUTL1",81,0)
 Q
"RTN","GMPLUTL1",82,0)
 ;
"RTN","GMPLUTL1",83,0)
RECORDED ; Date Recorded (Requires ONSET)
"RTN","GMPLUTL1",84,0)
 N %DT,Y,X
"RTN","GMPLUTL1",85,0)
 S:'$D(PL("RECORDED")) PL("RECORDED")="" Q:'$L(PL("RECORDED"))
"RTN","GMPLUTL1",86,0)
 S %DT="P",%DT(0)="-NOW",X=PL("RECORDED") D ^%DT
"RTN","GMPLUTL1",87,0)
 I Y'>0 S GMPQUIT=1,PLY(0)=$$EZBLD^DIALOG(1250000.472) Q
"RTN","GMPLUTL1",88,0)
 I PL("RECORDED")<PL("ONSET") S GMPQUIT=1,PLY(0)=$$EZBLD^DIALOG(1250000.460) Q
"RTN","GMPLUTL1",89,0)
 S PL("RECORDED")=Y
"RTN","GMPLUTL1",90,0)
 Q
"RTN","GMPLUTL1",91,0)
 ;
"RTN","GMPLUTL1",92,0)
SC ; SC condition flag
"RTN","GMPLUTL1",93,0)
 S:'$D(PL("SC")) PL("SC")=""
"RTN","GMPLUTL1",94,0)
 I "^^1^0^"'[(U_PL("SC")_U) S GMPQUIT=1,PLY(0)=$$EZBLD^DIALOG(1250000.471) Q
"RTN","GMPLUTL1",95,0)
 I 'GMPSC,+PL("SC") S GMPQUIT=1,PLY(0)=$$EZBLD^DIALOG(1250000.471)
"RTN","GMPLUTL1",96,0)
 Q
"RTN","GMPLUTL1",97,0)
 ;
"RTN","GMPLUTL1",98,0)
AO ; AO exposure flag (Requires GMPAGTOR)
"RTN","GMPLUTL1",99,0)
 S:'$D(PL("AO")) PL("AO")=""
"RTN","GMPLUTL1",100,0)
 I "^^1^0^"'[(U_PL("AO")_U) S GMPQUIT=1,PLY(0)=$$EZBLD^DIALOG(1250000.473) Q
"RTN","GMPLUTL1",101,0)
 I 'GMPAGTOR,+PL("AO") S GMPQUIT=1,PLY(0)=$$EZBLD^DIALOG(1250000.473)
"RTN","GMPLUTL1",102,0)
 Q
"RTN","GMPLUTL1",103,0)
 ;
"RTN","GMPLUTL1",104,0)
IR ; IR exposure flag (Requires GMPION)
"RTN","GMPLUTL1",105,0)
 S:'$D(PL("IR")) PL("IR")=""
"RTN","GMPLUTL1",106,0)
 I "^^1^0^"'[(U_PL("IR")_U) S GMPQUIT=1,PLY(0)=$$EZBLD^DIALOG(1250000.474) Q
"RTN","GMPLUTL1",107,0)
 I 'GMPION,+PL("IR") S GMPQUIT=1,PLY(0)=$$EZBLD^DIALOG(1250000.474)
"RTN","GMPLUTL1",108,0)
 Q
"RTN","GMPLUTL1",109,0)
 ;
"RTN","GMPLUTL1",110,0)
EC ; EC exposure flag (Requires GMPGULF)
"RTN","GMPLUTL1",111,0)
 S:'$D(PL("EC")) PL("EC")=""
"RTN","GMPLUTL1",112,0)
 I "^^1^0^"'[(U_PL("EC")_U) S GMPQUIT=1,PLY(0)=$$EZBLD^DIALOG(1250000.475) Q
"RTN","GMPLUTL1",113,0)
 I 'GMPGULF,+PL("EC") S GMPQUIT=1,PLY(0)=$$EZBLD^DIALOG(1250000.475)
"RTN","GMPLUTL1",114,0)
 Q
"RTN","GMPLUTL1",115,0)
HNC ; HNC/NTR exposure flag (Requires GMPHNC)
"RTN","GMPLUTL1",116,0)
 S:'$D(PL("HNC")) PL("HNC")=""
"RTN","GMPLUTL1",117,0)
 I "^^1^0^"'[(U_PL("HNC")_U) S GMPQUIT=1,PLY(0)=$$EZBLD^DIALOG(1250000.476) Q
"RTN","GMPLUTL1",118,0)
 I 'GMPHNC,+PL("HNC") S GMPQUIT=1,PLY(0)=$$EZBLD^DIALOG(1250000.476)
"RTN","GMPLUTL1",119,0)
 Q
"RTN","GMPLUTL1",120,0)
MST ; MST exposure flag (Requires GMPMST)
"RTN","GMPLUTL1",121,0)
 S:'$D(PL("MST")) PL("MST")=""
"RTN","GMPLUTL1",122,0)
 I "^^1^0^"'[(U_PL("MST")_U) S GMPQUIT=1,PLY(0)=$$EZBLD^DIALOG(1250000.477) Q
"RTN","GMPLUTL1",123,0)
 I 'GMPMST,+PL("MST") S GMPQUIT=1,PLY(0)=$$EZBLD^DIALOG(1250000.477)
"RTN","GMPLUTL1",124,0)
 Q
"RTN","GMPLUTL1",125,0)
CV ; CV exposure flag (Requires GMPCV)
"RTN","GMPLUTL1",126,0)
 S:'$D(PL("CV")) PL("CV")=""
"RTN","GMPLUTL1",127,0)
 I "^^1^0^"'[(U_PL("CV")_U) S GMPQUIT=1,PLY(0)=$$EZBLD^DIALOG(1250000.478) Q
"RTN","GMPLUTL1",128,0)
 I 'GMPCV,+PL("CV") S GMPQUIT=1,PLY(0)=$$EZBLD^DIALOG(1250000.478)
"RTN","GMPLUTL1",129,0)
 Q
"RTN","GMPLUTL1",130,0)
SHD ; SHD exposure flag (Requires GMPSHD)
"RTN","GMPLUTL1",131,0)
 S:'$D(PL("SHD")) PL("SHD")=""
"RTN","GMPLUTL1",132,0)
 I "^^1^0^"'[(U_PL("SHD")_U) S GMPQUIT=1,PLY(0)=$$EZBLD^DIALOG(1250000.479) Q
"RTN","GMPLUTL1",133,0)
 I 'GMPSHD,+PL("SHD") S GMPQUIT=1,PLY(0)=$$EZBLD^DIALOG(1250000.479)
"RTN","GMPLUTL1",134,0)
 Q
"RTN","GMPLUTL2")
0^61^B36316249
"RTN","GMPLUTL2",1,0)
GMPLUTL2 ; SLC/MKB/KER -- PL Utilities (OE/TIU)             ; 08/29/13
"RTN","GMPLUTL2",2,0)
 ;;2.0;Problem List;**10,18,21,26,35,260002**;Aug 25, 1994;Build 26
"RTN","GMPLUTL2",3,0)
 ; External References
"RTN","GMPLUTL2",4,0)
 ;   DBIA   348  ^DPT(  file #2
"RTN","GMPLUTL2",5,0)
 ;   DBIA 10082  ^ICD9(  file #80
"RTN","GMPLUTL2",6,0)
 ;   DBIA 10040  ^SC(  file #44
"RTN","GMPLUTL2",7,0)
 ;   DBIA 10060  ^VA(200
"RTN","GMPLUTL2",8,0)
 ;   DBIA  2716  $$GETSTAT^DGMSTAPI
"RTN","GMPLUTL2",9,0)
 ;   DBIA  3457  $$GETCUR^DGNTAPI
"RTN","GMPLUTL2",10,0)
 ;   DBIA 10062  7^VADPT
"RTN","GMPLUTL2",11,0)
 ;   DBIA 10062  DEM^VADPT
"RTN","GMPLUTL2",12,0)
 ;   DBIA 10118  EN^VALM
"RTN","GMPLUTL2",13,0)
 ;   DBIA 10116  CLEAR^VALM1
"RTN","GMPLUTL2",14,0)
 ;   DBIA 10103  $$HTFM^XLFDT
"RTN","GMPLUTL2",15,0)
LIST(GMPL,GMPDFN,GMPSTAT,GMPCOMM) ; Returns list of Prob for Pt.           
"RTN","GMPLUTL2",16,0)
 ;   Input   GMPDFN  Pointer to Patient file #2
"RTN","GMPLUTL2",17,0)
 ;           GMPCOMP Display Comments 1/0
"RTN","GMPLUTL2",18,0)
 ;           GMTSTAT Status A/I/""
"RTN","GMPLUTL2",19,0)
 ;   Output  GMPL    Array, passed by reference
"RTN","GMPLUTL2",20,0)
 ;           GMPL(#)
"RTN","GMPLUTL2",21,0)
 ;             Piece 1:  Pointer to Problem #9000011
"RTN","GMPLUTL2",22,0)
 ;                   2:  Status 
"RTN","GMPLUTL2",23,0)
 ;                   3:  Description
"RTN","GMPLUTL2",24,0)
 ;                   4:  ICD-9 code
"RTN","GMPLUTL2",25,0)
 ;                   5:  Date of Onset
"RTN","GMPLUTL2",26,0)
 ;                   6:  Date Last Modified
"RTN","GMPLUTL2",27,0)
 ;                   7:  Service Connected
"RTN","GMPLUTL2",28,0)
 ;                   8:  Special Exposures
"RTN","GMPLUTL2",29,0)
 ;           GMPL(#,C#)  Comments
"RTN","GMPLUTL2",30,0)
 ;           GMPL(0)     Number of Problems Returned
"RTN","GMPLUTL2",31,0)
 N CNT,SCS,SP,ACT,TRAN,IFN,NCNT,NOTES
"RTN","GMPLUTL2",32,0)
 D GET^GMPLSITE(.GMPARAM) S GMPARAM("QUIET")=1
"RTN","GMPLUTL2",33,0)
 I $G(GMPSTAT)="B" S GMPSTAT="AI"
"RTN","GMPLUTL2",34,0)
 S %=$$LIST^GMPLAPI4(.GMPL,GMPDFN,GMPSTAT,,"",GMPARAM("REV"))
"RTN","GMPLUTL2",35,0)
 F CNT=1:1:GMPL(0) D
"RTN","GMPLUTL2",36,0)
 . S IFN=$P(GMPL(CNT),U)
"RTN","GMPLUTL2",37,0)
 . D SCS^GMPLX1(IFN,.SCS)
"RTN","GMPLUTL2",38,0)
 . S SP=$G(SCS(3))
"RTN","GMPLUTL2",39,0)
 . S ACT=$S($P(GMPL(CNT),U,14)="A":"*",1:"")
"RTN","GMPLUTL2",40,0)
 . S TRAN=$S('GMPARAM("VER"):"",$P(GMPL(CNT),U,9)'="T":"",1:"$")
"RTN","GMPLUTL2",41,0)
 . S GMPL(CNT)=$P(GMPL(CNT),U,1,7)_U_SP_U_ACT_U_TRAN
"RTN","GMPLUTL2",42,0)
 . I $G(GMPCOMM) D
"RTN","GMPLUTL2",43,0)
 . S %=$$NOTES^GMPLAPI3(.NOTES,IFN,0)
"RTN","GMPLUTL2",44,0)
 . F NCNT=1:1:NOTES S GMPL(CNT,NCNT)=NOTES(NCNT)
"RTN","GMPLUTL2",45,0)
 Q
"RTN","GMPLUTL2",46,0)
 ;
"RTN","GMPLUTL2",47,0)
DETAIL(IFN,GMPL) ; Returns Detailed Data for Problem
"RTN","GMPLUTL2",48,0)
 ;                
"RTN","GMPLUTL2",49,0)
 ; Input   IFN  Pointer to Problem file #9000011
"RTN","GMPLUTL2",50,0)
 ;                
"RTN","GMPLUTL2",51,0)
 ; Output  GMPL Array, passed by reference
"RTN","GMPLUTL2",52,0)
 ;         GMPL("DATA NAME") = External Format of Value
"RTN","GMPLUTL2",53,0)
 ;
"RTN","GMPLUTL2",54,0)
 ;         GMPL("DIAGNOSIS")  ICD Code
"RTN","GMPLUTL2",55,0)
 ;         GMPL("PATIENT")    Patient Name
"RTN","GMPLUTL2",56,0)
 ;         GMPL("MODIFIED")   Date Last Modified
"RTN","GMPLUTL2",57,0)
 ;         GMPL("NARRATIVE")  Provider Narrative 
"RTN","GMPLUTL2",58,0)
 ;         GMPL("ENTERED")    Date Entered ^ Entered by
"RTN","GMPLUTL2",59,0)
 ;         GMPL("STATUS")     Status
"RTN","GMPLUTL2",60,0)
 ;         GMPL("PRIORITY")   Priority Acute/Chronic
"RTN","GMPLUTL2",61,0)
 ;         GMPL("ONSET")      Date of Onset
"RTN","GMPLUTL2",62,0)
 ;         GMPL("PROVIDER")   Responsible Provider
"RTN","GMPLUTL2",63,0)
 ;         GMPL("RECORDED")   Date Recorded ^ Recorded by
"RTN","GMPLUTL2",64,0)
 ;         GMPL("CLINIC")     Hospital Location
"RTN","GMPLUTL2",65,0)
 ;         GMPL("SC")         Service Connected SC/NSC/""
"RTN","GMPLUTL2",66,0)
 ;
"RTN","GMPLUTL2",67,0)
 ;         GMPL("EXPOSURE") = #
"RTN","GMPLUTL2",68,0)
 ;         GMPL("EXPOSURE",X)="AGENT ORANGE"
"RTN","GMPLUTL2",69,0)
 ;         GMPL("EXPOSURE",X)="RADIATION"
"RTN","GMPLUTL2",70,0)
 ;         GMPL("EXPOSURE",X)="ENV CONTAMINANTS"
"RTN","GMPLUTL2",71,0)
 ;         GMPL("EXPOSURE",X)="HEAD AND/OR NECK CANCER"
"RTN","GMPLUTL2",72,0)
 ;         GMPL("EXPOSURE",X)="MILITARY SEXUAL TRAUMA"
"RTN","GMPLUTL2",73,0)
 ;         GMPL("EXPOSURE",X)="COMBAT VET"
"RTN","GMPLUTL2",74,0)
 ;         GMPL("EXPOSURE",X)="SHAD"
"RTN","GMPLUTL2",75,0)
 ;
"RTN","GMPLUTL2",76,0)
 ;         GMPL("COMMENT") = #
"RTN","GMPLUTL2",77,0)
 ;         GMPL("COMMENT",CNT) = Date ^ Author ^ Text of Note
"RTN","GMPLUTL2",78,0)
 ;              
"RTN","GMPLUTL2",79,0)
 N VALID
"RTN","GMPLUTL2",80,0)
 S %=$$VALID^GMPLAPI4(.VALID,IFN)
"RTN","GMPLUTL2",81,0)
 Q:'VALID
"RTN","GMPLUTL2",82,0)
 S %=$$DETAILX^GMPLAPI2(.GMPL,IFN)
"RTN","GMPLUTL2",83,0)
 K GMPL("HISTORY")
"RTN","GMPLUTL2",84,0)
 D AUDIT
"RTN","GMPLUTL2",85,0)
 Q
"RTN","GMPLUTL2",86,0)
 ;
"RTN","GMPLUTL2",87,0)
AUDIT ; 14 Sep 99 - MA - Add audit trail to OE Problem List.
"RTN","GMPLUTL2",88,0)
 ; Called from DETAIL, requires IFN and sets GMPL("AUDIT")
"RTN","GMPLUTL2",89,0)
 N IDT,RETURN
"RTN","GMPLUTL2",90,0)
 S GMPL("AUDIT")=0
"RTN","GMPLUTL2",91,0)
 D GETAUDIT^GMPLHIST(.RETURN,IFN)
"RTN","GMPLUTL2",92,0)
 F IDT=0:0 S IDT=$O(RETURN(IDT)) Q:IDT'>0  D
"RTN","GMPLUTL2",93,0)
 . S GMPL("AUDIT",IDT,0)=RETURN(IDT,0)
"RTN","GMPLUTL2",94,0)
 . S:$D(RETURN(IDT,1)) GMPL("AUDIT",IDT,1)=RETURN(IDT,1)
"RTN","GMPLUTL2",95,0)
 S GMPL("AUDIT")=RETURN
"RTN","GMPLUTL2",96,0)
 Q
"RTN","GMPLUTL2",97,0)
 ;
"RTN","GMPLUTL2",98,0)
FLDNAME(NUM)    ; Returns field name for display
"RTN","GMPLUTL2",99,0)
 N NAME,NM1,NM2,I,J S J=0,NAME=""
"RTN","GMPLUTL2",100,0)
 S NM1=".01^.05^.12^.13^1.01^1.02^1.04^1.05^1.06^1.07^1.08^1.09^1.1^1.11^1.12^1.13^1.14^1.17^1.18^1101"
"RTN","GMPLUTL2",101,0)
 F I=1:1:$L(NM1,U) I +$P(NM1,U,I)=+NUM S J=I Q
"RTN","GMPLUTL2",102,0)
 G:J'>0 FNQ
"RTN","GMPLUTL2",103,0)
 S NM2="DIAGNOSIS^PROVIDER NARRATIVE^STATUS^DATE OF ONSET^PROBLEM^CONDITION^RECORDING PROVIDER^RESPONSIBLE PROVIDER"
"RTN","GMPLUTL2",104,0)
 S NM2=NM2_"^SERVICE^DATE RESOLVED^CLINIC^DATE RECORDED^SERVICE CONNECTED^AGENT ORANGE EXP^RADIATION EXP^ENV CONTAMINANTS EXP"
"RTN","GMPLUTL2",105,0)
 S NM2=NM2_"^COMBAT VET^SHIPBOARD HAZARD EXP^PRIORITY^NOTE"
"RTN","GMPLUTL2",106,0)
 S NAME=$P(NM2,U,J)
"RTN","GMPLUTL2",107,0)
FNQ Q NAME
"RTN","GMPLUTL2",108,0)
 ;
"RTN","GMPLUTL2",109,0)
ADD(DFN,LOC,GMPROV) ; -- Interactive LMgr action to add new problem
"RTN","GMPLUTL2",110,0)
 N X,Y,GMPDFN,GMPVA,GMPVAMC,GMPSC,GMPAGTOR,GMPION,GMPGULF,GMPHNC,GMPMST,GMPCV,GMPSHD
"RTN","GMPLUTL2",111,0)
 N GMPARAM,GMPLVIEW,GMPLUSER,GMPCLIN,GMPLSLST,GMPQUIT,VALMCC,GMPSAVED,GMPLIST
"RTN","GMPLUTL2",112,0)
 Q:'DFN  Q:'LOC  D SETVARS
"RTN","GMPLUTL2",113,0)
 S %=$$GETULST^GMPLAPI6(.RETURN,DUZ) S GMPLSLST=RETURN
"RTN","GMPLUTL2",114,0)
 I 'GMPLSLST,GMPCLIN S %=$$GETCLST^GMPLAPI6(.RETURN,+GMPCLIN) S GMPLSLST=RETURN
"RTN","GMPLUTL2",115,0)
 I GMPLSLST D  Q
"RTN","GMPLUTL2",116,0)
 . D EN^VALM("GMPL LIST MENU")
"RTN","GMPLUTL2",117,0)
 F  D ADD^GMPL1 Q:$D(GMPQUIT)  K DUOUT,DTOUT,GMPSAVED W !!,">>>  Please enter another problem, or press <return> to exit."
"RTN","GMPLUTL2",118,0)
 Q
"RTN","GMPLUTL2",119,0)
 ;
"RTN","GMPLUTL2",120,0)
SETVARS ; -- Define GMP* variables used in ADD and EDIT
"RTN","GMPLUTL2",121,0)
 N VA,VADM,VAEL,VASV,X,PD,%
"RTN","GMPLUTL2",122,0)
 Q:'DFN  D DEM^VADPT,7^VADPT
"RTN","GMPLUTL2",123,0)
 S GMPDFN=DFN_U_VADM(1)_U_$E(VADM(1))_VA("BID")_$S(VADM(6):U_+VADM(6),1:"")
"RTN","GMPLUTL2",124,0)
 S AUPNSEX=$P(VADM(5),U),GMPVA=1,GMPSC=VAEL(3),GMPAGTOR=VASV(2),GMPION=VASV(3)
"RTN","GMPLUTL2",125,0)
 S %=$$PATDET^GMPLEXT(.PD,DFN)
"RTN","GMPLUTL2",126,0)
 S X=$P($G(PD("PGSVC")),U),GMPGULF=$S(X="Y":1,X="N":0,1:"")
"RTN","GMPLUTL2",127,0)
 S GMPCV=0 I +$G(VASV(10)) S:DT'>$P($G(VASV(10,1)),U) GMPCV=1 ;CV
"RTN","GMPLUTL2",128,0)
 S GMPSHD=+$G(VASV(14,1)) ;SHAD
"RTN","GMPLUTL2",129,0)
 S X=$$GETCUR^DGNTAPI(DFN,"HNC"),X=+($G(HNC("STAT"))),GMPHNC=$S(X=4:1,X=5:1,X=1:0,X=6:0,1:"")
"RTN","GMPLUTL2",130,0)
 S X=$P($$GETSTAT^DGMSTAPI(DFN),"^",2),GMPMST=$S(X="Y":1,X="N":0,1:"")
"RTN","GMPLUTL2",131,0)
 S GMPLVIEW("VIEW")=$S($$LOCTYPE^GMPLEXT(+$G(LOC))="C":"C",1:"S")
"RTN","GMPLUTL2",132,0)
 S GMPCLIN="" I $G(LOC),GMPLVIEW("VIEW")="C" S GMPCLIN=+LOC_U_$$CLINNAME^GMPLEXT(+LOC)
"RTN","GMPLUTL2",133,0)
 D GET^GMPLSITE(.GMPARAM)
"RTN","GMPLUTL2",134,0)
 S:+GMPROV=DUZ GMPLUSER=1 S GMPVAMC=+$G(DUZ(2)),GMPLIST(0)=0
"RTN","GMPLUTL2",135,0)
 Q
"RTN","GMPLUTL2",136,0)
 ;
"RTN","GMPLUTL2",137,0)
EDIT(DFN,LOC,GMPROV,GMPIFN) ; Interactive LMgr action to edit a problem
"RTN","GMPLUTL2",138,0)
 N GMPARAM,GMPDFN,GMPVA,GMPSC,GMPAGTOR,GMPION,GMPGULF,GMPHNC,GMPMST,GMPCV,GMPSHD
"RTN","GMPLUTL2",139,0)
 N GMPLVIEW,GMPCLIN,GMPLJUMP,GMPQUIT,GMPLUSER,GMPLVAMC,AUPNSEX,GMPLIST
"RTN","GMPLUTL2",140,0)
 I '$$LOCK^GMPLDAL(GMPIFN,0) W $C(7),!!,$$LOCKED^GMPLX,! H 2 Q
"RTN","GMPLUTL2",141,0)
 D SETVARS,EN^VALM("GMPL EDIT PROBLEM")
"RTN","GMPLUTL2",142,0)
 D UNLOCK^GMPLDAL(GMPIFN,0)
"RTN","GMPLUTL2",143,0)
 Q
"RTN","GMPLUTL2",144,0)
 ;
"RTN","GMPLUTL2",145,0)
REMOVE(GMPIFN,GMPROV,TEXT,PLY) ; -- Remove problem GMPIFN
"RTN","GMPLUTL2",146,0)
 N GMPVAMC,CHANGE,VALID
"RTN","GMPLUTL2",147,0)
 S GMPVAMC=+$G(DUZ(2)),PLY=-1,PLY(0)=""
"RTN","GMPLUTL2",148,0)
 S %=$$DELETE^GMPLAPI2(.PLY,$G(GMPIFN),$G(GMPROV),$G(TEXT))
"RTN","GMPLUTL2",149,0)
 I 'PLY D  Q
"RTN","GMPLUTL2",150,0)
 . N ERR
"RTN","GMPLUTL2",151,0)
 . S ERR=$P($G(PLY(0)),U)
"RTN","GMPLUTL2",152,0)
 . I (ERR="INVPARAM")!(ERR="PRBNFND") S PLY(0)="Invalid problem"
"RTN","GMPLUTL2",153,0)
 . I (ERR="PROVNFND") S PLY(0)="Invalid provider"
"RTN","GMPLUTL2",154,0)
 S:PLY PLY=GMPIFN
"RTN","GMPLUTL2",155,0)
 Q
"RTN","GMPLUTL2",156,0)
 ;
"RTN","GMPLUTL2",157,0)
PARAM(GMPARAM) ; -- Returns parameter values from 125.99
"RTN","GMPLUTL2",158,0)
 D GET^GMPLSITE(.GMPARAM)
"RTN","GMPLUTL2",159,0)
 Q
"RTN","GMPLUTL2",160,0)
 ;
"RTN","GMPLUTL2",161,0)
VAF(DFN,SILENT) ; -- print PL VA Form chart copy
"RTN","GMPLUTL2",162,0)
 ;
"RTN","GMPLUTL2",163,0)
 N VA,VADM,VAERR,GMPDFN,GMPVAMC,GMPARAM,GMPRT,GMPQUIT,GMPLCURR
"RTN","GMPLUTL2",164,0)
 Q:'$G(DFN)  D DEM^VADPT S GMPDFN=DFN_U_VADM(1)_U_$E(VADM(1))_VA("BID")
"RTN","GMPLUTL2",165,0)
 S GMPVAMC=+$G(DUZ(2)),GMPARAM("QUIET")=1
"RTN","GMPLUTL2",166,0)
 D PARAM(.GMPARAM)
"RTN","GMPLUTL2",167,0)
 D VAF^GMPLPRNT I '$G(SILENT) D  Q:$G(GMPQUIT)
"RTN","GMPLUTL2",168,0)
 . I GMPRT'>0 W !!,"No problems available." S GMPQUIT=1 Q
"RTN","GMPLUTL2",169,0)
 . D DEVICE^GMPLPRNT Q:$G(GMPQUIT)  D CLEAR^VALM1
"RTN","GMPLUTL2",170,0)
 D PRT^GMPLPRNT
"RTN","GMPLUTL2",171,0)
 Q
"RTN","GMPLUTL3")
0^62^B4689690
"RTN","GMPLUTL3",1,0)
GMPLUTL3 ; SLC/JST/JVS -- PL Utilities (CIRN)           ; 08/29/13
"RTN","GMPLUTL3",2,0)
 ;;2.0;Problem List;**14,15,19,25,26,260002**;Aug 25, 1994;Build 26
"RTN","GMPLUTL3",3,0)
 ;
"RTN","GMPLUTL3",4,0)
 ; External References
"RTN","GMPLUTL3",5,0)
 ;   None
"RTN","GMPLUTL3",6,0)
 ;             
"RTN","GMPLUTL3",7,0)
 ; This routine is primarily called by CIRN for use 
"RTN","GMPLUTL3",8,0)
 ; in HL7 (RGHOPL), and Historical Load (RGHOPLB), 
"RTN","GMPLUTL3",9,0)
 ; record creation.
"RTN","GMPLUTL3",10,0)
 ;             
"RTN","GMPLUTL3",11,0)
 ; NOTE: This routine DOES NOT NEW the variables 
"RTN","GMPLUTL3",12,0)
 ;       that are set below.
"RTN","GMPLUTL3",13,0)
 ;             
"RTN","GMPLUTL3",14,0)
CALL0(GMPLZ) ; Call 0 - Get Node 0
"RTN","GMPLUTL3",15,0)
 N VALID,DELETED,%
"RTN","GMPLUTL3",16,0)
 S %=$$VALID^GMPLAPI4(.VALID,GMPLZ)
"RTN","GMPLUTL3",17,0)
 I 'VALID D CLEAR Q
"RTN","GMPLUTL3",18,0)
 S %=$$DELETED^GMPLAPI2(.DELETED,GMPLZ)
"RTN","GMPLUTL3",19,0)
 I DELETED D CLEAR Q
"RTN","GMPLUTL3",20,0)
 D NODE0
"RTN","GMPLUTL3",21,0)
 Q
"RTN","GMPLUTL3",22,0)
 ;
"RTN","GMPLUTL3",23,0)
CALL1(GMPLZ) ; Call 1 - Get Node 1
"RTN","GMPLUTL3",24,0)
 N VALID,DELETED,%
"RTN","GMPLUTL3",25,0)
 S %=$$VALID^GMPLAPI4(.VALID,GMPLZ)
"RTN","GMPLUTL3",26,0)
 I 'VALID D CLEAR Q
"RTN","GMPLUTL3",27,0)
 S %=$$DELETED^GMPLAPI2(.DELETED,GMPLZ)
"RTN","GMPLUTL3",28,0)
 I DELETED D CLEAR Q
"RTN","GMPLUTL3",29,0)
 D NODE1
"RTN","GMPLUTL3",30,0)
 Q
"RTN","GMPLUTL3",31,0)
 ;
"RTN","GMPLUTL3",32,0)
CALL2(GMPLZ) ; Call 2 - Get both Node 0 and Node 1
"RTN","GMPLUTL3",33,0)
 N VALID,DELETED,%
"RTN","GMPLUTL3",34,0)
 S %=$$VALID^GMPLAPI4(.VALID,GMPLZ)
"RTN","GMPLUTL3",35,0)
 I 'VALID D CLEAR Q
"RTN","GMPLUTL3",36,0)
 S %=$$DELETED^GMPLAPI2(.DELETED,GMPLZ)
"RTN","GMPLUTL3",37,0)
 I DELETED S GMPLCOND="H" D CLEAR Q
"RTN","GMPLUTL3",38,0)
 D NODE0,NODE1
"RTN","GMPLUTL3",39,0)
 Q
"RTN","GMPLUTL3",40,0)
 ;               
"RTN","GMPLUTL3",41,0)
NODE0 ; Set Node 0 data variables
"RTN","GMPLUTL3",42,0)
 N GMPL,%
"RTN","GMPLUTL3",43,0)
 S %=$$DETAIL^GMPLAPI2(.GMPL,GMPLZ)
"RTN","GMPLUTL3",44,0)
 ;   Diagnosis
"RTN","GMPLUTL3",45,0)
 S GMPLICD=$P(GMPL(.01),U)
"RTN","GMPLUTL3",46,0)
 ;   Patient Name
"RTN","GMPLUTL3",47,0)
 S GMPLPNAM=$P(GMPL(.02),U)
"RTN","GMPLUTL3",48,0)
 ;   Date Last Modifed
"RTN","GMPLUTL3",49,0)
 S GMPLDLM=$P(GMPL(.03),U)
"RTN","GMPLUTL3",50,0)
 ;   Provider Narrative
"RTN","GMPLUTL3",51,0)
 S GMPLTXT=$P(GMPL(.05),U)
"RTN","GMPLUTL3",52,0)
 ;   Status
"RTN","GMPLUTL3",53,0)
 S GMPLSTAT=$P(GMPLZ(.12),U)
"RTN","GMPLUTL3",54,0)
 ;   Date of Onset
"RTN","GMPLUTL3",55,0)
 S GMPLODAT=$P(GMPL(.13),U)
"RTN","GMPLUTL3",56,0)
 ;   Date Entered
"RTN","GMPLUTL3",57,0)
 S:'GMPLODAT GMPLODAT=$P(GMPLZ(.08),U)
"RTN","GMPLUTL3",58,0)
 Q
"RTN","GMPLUTL3",59,0)
 ;
"RTN","GMPLUTL3",60,0)
NODE1 ; Set Node 1 data variables
"RTN","GMPLUTL3",61,0)
 N GMPL,%
"RTN","GMPLUTL3",62,0)
 S %=$$DETAIL^GMPLAPI2(.GMPL,GMPLZ)
"RTN","GMPLUTL3",63,0)
 ;   Problem
"RTN","GMPLUTL3",64,0)
 S GMPLLEX=$P(GMPL(1.01),U)
"RTN","GMPLUTL3",65,0)
 ;   Condition
"RTN","GMPLUTL3",66,0)
 S GMPLCOND=$P(GMPL(1.02),U)
"RTN","GMPLUTL3",67,0)
 ;   Recording Provider
"RTN","GMPLUTL3",68,0)
 S GMPLPRV=$P(GMPL(1.04),U)
"RTN","GMPLUTL3",69,0)
 ;   Responsible Provider
"RTN","GMPLUTL3",70,0)
 S:'GMPLPRV GMPLPRV=$P(GMPL(1.05),U)
"RTN","GMPLUTL3",71,0)
 ;   Date Resolved
"RTN","GMPLUTL3",72,0)
 S GMPLXDAT=$P(GMPL(1.07),U)
"RTN","GMPLUTL3",73,0)
 ;   Priority
"RTN","GMPLUTL3",74,0)
 S GMPLPRIO=$P(GMPL(1.14),U)
"RTN","GMPLUTL3",75,0)
 Q
"RTN","GMPLUTL3",76,0)
 ;          
"RTN","GMPLUTL3",77,0)
CLEAR ; Set Variables Equal to Null
"RTN","GMPLUTL3",78,0)
 S (GMPLICD,GMPLPNAM,GMPLDLM,GMPLTXT,GMPLSTAT,GMPLODAT)=""
"RTN","GMPLUTL3",79,0)
 S (GMPLLEX,GMPLPRV,GMPLXDAT,GMPLPRIO,GMPLCOND)=""
"RTN","GMPLUTL3",80,0)
 Q
"RTN","GMPLUTL3",81,0)
MOD(DFN) ; Return the Date the Patients Problem List was Last Modified
"RTN","GMPLUTL3",82,0)
 N MODIFIED,%
"RTN","GMPLUTL3",83,0)
 S %=$$MODIFIED^GMPLAPI4(.MODIFIED,DFN)
"RTN","GMPLUTL3",84,0)
 Q MODIFIED
"RTN","GMPLX")
0^64^B26440267
"RTN","GMPLX",1,0)
GMPLX ; SLC/MKB/AJB -- Problem List Problem Utilities ;3/13/13
"RTN","GMPLX",2,0)
 ;;2.0;Problem List;**7,23,26,28,27,260002**;Aug 25, 1994;Build 26
"RTN","GMPLX",3,0)
 ;
"RTN","GMPLX",4,0)
 ; External References
"RTN","GMPLX",5,0)
 ;   DBIA   446  ^AUTNPOV(
"RTN","GMPLX",6,0)
 ;   DBIA 10082  ^ICD9("BA"
"RTN","GMPLX",7,0)
 ;   DBIA 10060  ^VA(200
"RTN","GMPLX",8,0)
 ;   DBIA 10006  ^DIC
"RTN","GMPLX",9,0)
 ;   DBIA 10009  FILE^DICN
"RTN","GMPLX",10,0)
 ;   DBIA 10013  EN^DIK
"RTN","GMPLX",11,0)
 ;   DBIA 10013  IX1^DIK
"RTN","GMPLX",12,0)
 ;   DBIA 10026  ^DIR
"RTN","GMPLX",13,0)
 ;   DBIA  1609  CONFIG^LEXSET
"RTN","GMPLX",14,0)
 ;   DBIA 10103  $$FMTE^XLFDT
"RTN","GMPLX",15,0)
 ;   DBIA 10104  $$UP^XLFSTR
"RTN","GMPLX",16,0)
 ;   DBIA  2742  GMPLX
"RTN","GMPLX",17,0)
 ;   DBIA  3991  $$STATCHK^ICDAPIU
"RTN","GMPLX",18,0)
 ;
"RTN","GMPLX",19,0)
SEARCH(X,Y,PROMPT,UNRES,VIEW) ; Search Lexicon for Problem X
"RTN","GMPLX",20,0)
 N DIC
"RTN","GMPLX",21,0)
 S:'$L($G(VIEW)) VIEW="PL1"
"RTN","GMPLX",22,0)
 D CONFIG^LEXSET("GMPL",VIEW,DT)
"RTN","GMPLX",23,0)
 S DIC("A")=$S($L($G(PROMPT)):PROMPT,1:$$EZBLD^DIALOG(1250000.482))
"RTN","GMPLX",24,0)
 S DIC="^LEX(757.01,",DIC(0)=$S('$L($G(X)):"A",1:"")_"EQM"
"RTN","GMPLX",25,0)
 S:'$G(UNRES) LEXUN=0 D ^DIC S:+Y>1 X=$P(Y,U,2)
"RTN","GMPLX",26,0)
 Q
"RTN","GMPLX",27,0)
 ;
"RTN","GMPLX",28,0)
PROBTEXT(IFN) ; Returns Display Text
"RTN","GMPLX",29,0)
 N X,Y,GMPLEXP,GMPLPOV,GMPLSO,GMPLTXT,%,PRB
"RTN","GMPLX",30,0)
 S %=$$DETAIL^GMPLAPI2(.PRB,+IFN)
"RTN","GMPLX",31,0)
 S Y=$P($G(PRB(.05)),U),X=$P($G(PRB(.05)),U,2)
"RTN","GMPLX",32,0)
 S GMPLEXP=$$EP(IFN),GMPLSO=$$CS(X),GMPLPOV=$$PT(X,GMPLSO)
"RTN","GMPLX",33,0)
 S GMPLTXT=GMPLPOV S:$L(GMPLEXP) GMPLTXT=GMPLTXT_" ("_GMPLEXP_")"
"RTN","GMPLX",34,0)
 S:$L(GMPLSO) GMPLTXT=GMPLTXT_" "_GMPLSO
"RTN","GMPLX",35,0)
 S:GMPLTXT["*" GMPLTXT=$TR(GMPLTXT,"*","")
"RTN","GMPLX",36,0)
 ;S:$L(GMPLTXT) GMPLTXT=GMPLTXT_" ("_$$HFP^GMPLUTL4_","_$$PTR^GMPLUTL4_")"
"RTN","GMPLX",37,0)
 S:$L(GMPLTXT) X=GMPLTXT Q X
"RTN","GMPLX",38,0)
CS(X) ; Problem Codes
"RTN","GMPLX",39,0)
 N GMPLSAB,GMPLSO S GMPLSO="" S X=$G(X) Q:X'["(" ""
"RTN","GMPLX",40,0)
 F GMPLSAB="ICD-","CPT-","DSM-","HCPCS","NANDA","NIC","NOC","LOINC","SNOMED","OMAHA" S:$G(X)[("("_GMPLSAB) GMPLSO="("_GMPLSAB_$P(X,("("_GMPLSAB),2,299) Q:$L(GMPLSO)
"RTN","GMPLX",41,0)
 I $L(GMPLSO) S X=GMPLSO Q X
"RTN","GMPLX",42,0)
 F GMPLSAB="ACR","AI/RHEUM","CONGRESS","COSTAR","COSTART","CRISP","DODFAC" S:$G(X)[("("_GMPLSAB) GMPLSO="("_GMPLSAB_$P(X,("("_GMPLSAB),2,299) Q:$L(GMPLSO)
"RTN","GMPLX",43,0)
 I $L(GMPLSO) S X=GMPLSO Q X
"RTN","GMPLX",44,0)
 F GMPLSAB="DORLAND","DXPLAIN","HHCC","MCMASTER","META","MTF","MeSH","RVC","TITLE 38","UMDNS","UWA" S:$G(X)[("("_GMPLSAB) GMPLSO="("_GMPLSAB_$P(X,("("_GMPLSAB),2,299) Q:$L(GMPLSO)
"RTN","GMPLX",45,0)
 I $L(GMPLSO) S X=GMPLSO Q X
"RTN","GMPLX",46,0)
 Q ""
"RTN","GMPLX",47,0)
EP(X) ; Exposures
"RTN","GMPLX",48,0)
 N GMPLSC S X=+($G(X)) D SCS^GMPLX1(+X,.GMPLSC) S X=$G(GMPLSC(1)) Q X
"RTN","GMPLX",49,0)
PT(X,C) ; Problem Text (only)
"RTN","GMPLX",50,0)
 N GMPLTERM,GMPLSO S GMPLTERM=$G(X),GMPLSO=$G(C)
"RTN","GMPLX",51,0)
 S:$L(GMPLSO)&(GMPLTERM[GMPLSO) GMPLTERM=$P(GMPLTERM,GMPLSO,1) S GMPLTERM=$$TRIM(GMPLTERM)
"RTN","GMPLX",52,0)
 S:$L(GMPLTERM) X=GMPLTERM Q X
"RTN","GMPLX",53,0)
TRIM(X) ; Trim Spaces and "*"
"RTN","GMPLX",54,0)
 S X=$G(X) F  Q:$E(X,$L(X))'=" "  S X=$E(X,1,($L(X)-1))
"RTN","GMPLX",55,0)
 F  Q:$E(X,$L(X))'="*"  S X=$E(X,1,($L(X)-1))
"RTN","GMPLX",56,0)
 F  Q:$E(X,$L(X))'=" "  S X=$E(X,1,($L(X)-1))
"RTN","GMPLX",57,0)
 F  Q:$E(X,1)'=" "  S X=$E(X,2,$L(X))
"RTN","GMPLX",58,0)
 Q X
"RTN","GMPLX",59,0)
WRAP(PROB,MAX,TEXT) ; Splits Text into TEXT array
"RTN","GMPLX",60,0)
 N I,J S J=0 K TEXT I $L(PROB)'>MAX S J=J+1,TEXT(J)=PROB G WRQ
"RTN","GMPLX",61,0)
WR0 ;   Loop for Remaining Text
"RTN","GMPLX",62,0)
 S I=$F(PROB," ") I ('I)!(I>(MAX+2)) S J=J+1,TEXT(J)=$E(PROB,1,MAX),PROB=$E(PROB,MAX+1,999)
"RTN","GMPLX",63,0)
 I $L(PROB)>MAX F I=(MAX+1):-1:1 I $E(PROB,I)=" " S J=J+1,TEXT(J)=$E(PROB,1,I-1),PROB=$E(PROB,I+1,999) Q
"RTN","GMPLX",64,0)
 G:$L(PROB)>MAX WR0
"RTN","GMPLX",65,0)
 S:$L(PROB) J=J+1,TEXT(J)=PROB
"RTN","GMPLX",66,0)
WRQ ;   Quit Wrap
"RTN","GMPLX",67,0)
 S TEXT=J
"RTN","GMPLX",68,0)
 Q
"RTN","GMPLX",69,0)
 ;
"RTN","GMPLX",70,0)
SEL(HELP) ; Select List of Problems
"RTN","GMPLX",71,0)
 N X,Y,DIR,MAX,MSG S MAX=+$G(^TMP("GMPL",$J,0)) I MAX'>0 Q "^"
"RTN","GMPLX",72,0)
 S DIR(0)="LAO^1:"_MAX,DIR("A")=$$EZBLD^DIALOG(1250000.483)
"RTN","GMPLX",73,0)
 S:MAX>1 DIR("A")=DIR("A")_" (1-"_MAX_"): "
"RTN","GMPLX",74,0)
 S:MAX'>1 DIR("A")=DIR("A")_": ",DIR("B")=1
"RTN","GMPLX",75,0)
 S MSG=$S($L(HELP):1250000.484,1:1250000.485)
"RTN","GMPLX",76,0)
 D BLD^DIALOG(MSG,$G(HELP),,"DIR(""?"")")
"RTN","GMPLX",77,0)
 D ^DIR I $D(DTOUT)!(X="") S Y="^"
"RTN","GMPLX",78,0)
 Q Y
"RTN","GMPLX",79,0)
 ;
"RTN","GMPLX",80,0)
SEL1(HELP) ; Select 1 Problem
"RTN","GMPLX",81,0)
 N X,Y,DIR,MAX,MSG S MAX=+$G(^TMP("GMPL",$J,0)) I MAX'>0 Q "^"
"RTN","GMPLX",82,0)
 S DIR(0)="NAO^1:"_MAX_":0",DIR("A")=$$EZBLD^DIALOG(1250000.486)
"RTN","GMPLX",83,0)
 S:MAX>1 DIR("A")=DIR("A")_" (1-"_MAX_"): "
"RTN","GMPLX",84,0)
 S:MAX'>1 DIR("A")=DIR("A")_": ",DIR("B")=1
"RTN","GMPLX",85,0)
 S MSG=$S($L(HELP):1250000.487,1:1250000.488)
"RTN","GMPLX",86,0)
 D BLD^DIALOG(MSG,$G(HELP),,"DIR(""?"")")
"RTN","GMPLX",87,0)
 D ^DIR I $D(DTOUT)!(X="") S Y="^"
"RTN","GMPLX",88,0)
 Q Y
"RTN","GMPLX",89,0)
 ;
"RTN","GMPLX",90,0)
DUPLOK(IFN) ; Ask to Duplicate Problem
"RTN","GMPLX",91,0)
 N DIR,X,Y,DATE,PRB,%,PROV,MSGID,MSG
"RTN","GMPLX",92,0)
 S DIR(0)="YA"
"RTN","GMPLX",93,0)
 S %=$$DETAIL^GMPLAPI2(.PRB,IFN)
"RTN","GMPLX",94,0)
 S DIR("A")=$$EZBLD^DIALOG(1250000.489),DIR("B")="NO"
"RTN","GMPLX",95,0)
 D BLD^DIALOG(1250000.490,,,"DIR(""?"")")
"RTN","GMPLX",96,0)
 D EN^DDIOL($C(7),,"?0")
"RTN","GMPLX",97,0)
 S MSGID=$S($P(PRB(.12),U)="I":1250000.491,1:1250000.492)
"RTN","GMPLX",98,0)
 D BLD^DIALOG(MSGID,$$PROBTEXT(IFN),,"MSG")
"RTN","GMPLX",99,0)
 D EN^DDIOL(.MSG)
"RTN","GMPLX",100,0)
 D EN^DDIOL("",,"!")
"RTN","GMPLX",101,0)
 S PROV=+PRB(1.05)
"RTN","GMPLX",102,0)
 D:PROV EN^DDIOL($$EZBLD^DIALOG(1250000.165,$P(PRB(1.05),U,2)_" ("_$P($$SERVICE^GMPLEXT(PROV),U,2)_")"),,"!?4")
"RTN","GMPLX",103,0)
 I $P(PRB(.12),U)="A" D EN^DDIOL($$EZBLD^DIALOG(1250000.152),,"!?8") S DATE=$P(PRB(.13),U)
"RTN","GMPLX",104,0)
 I $P(PRB(.12),U)="I" D EN^DDIOL($$EZBLD^DIALOG(1250000.493),,"!?5") S DATE=$P(PRB(1.07),U)
"RTN","GMPLX",105,0)
 D EN^DDIOL($S(DATE>0:$$FMTE^XLFDT(DATE),1:$$EZBLD^DIALOG(1250000.494)),,"?0")
"RTN","GMPLX",106,0)
 D EN^DDIOL("",,"!")
"RTN","GMPLX",107,0)
 D ^DIR W !
"RTN","GMPLX",108,0)
 Q +Y
"RTN","GMPLX",109,0)
 ;
"RTN","GMPLX",110,0)
LOCKED() ; Returns Message that Problem is Locked
"RTN","GMPLX",111,0)
 Q $$EZBLD^DIALOG(1250000.510)
"RTN","GMPLX",112,0)
 ;
"RTN","GMPLX",113,0)
SURE() ; Ask to Delete 
"RTN","GMPLX",114,0)
 ;   Returns 1 if YES, else 0
"RTN","GMPLX",115,0)
 N DIR,X,Y S DIR(0)="YA",DIR("B")="NO"
"RTN","GMPLX",116,0)
 D BLD^DIALOG(1250000.495,,,"DIR(""?"")")
"RTN","GMPLX",117,0)
 D BLD^DIALOG(1250000.496,,,"DIR(""A"")")
"RTN","GMPLX",118,0)
 D ^DIR
"RTN","GMPLX",119,0)
 Q +Y
"RTN","GMPLX",120,0)
 ;
"RTN","GMPLX",121,0)
EXTDT(DATE) ; Formats Date into MM/DD/YY
"RTN","GMPLX",122,0)
 N X,MM,DD,YY,YYY S X="",DATE=$P(DATE,".") Q:'DATE ""
"RTN","GMPLX",123,0)
 S MM=+$E(DATE,4,5),DD=+$E(DATE,6,7),YY=$E(DATE,2,3),YYY=$E(DATE,1,3)
"RTN","GMPLX",124,0)
 S:MM X=MM_"/" S:DD X=X_DD_"/" S X=$S($L(X):X_YY,1:1700+YYY)
"RTN","GMPLX",125,0)
 Q X
"RTN","GMPLX",126,0)
 ;
"RTN","GMPLX",127,0)
MSG() ; List Manager Message Bar
"RTN","GMPLX",128,0)
 Q $$EZBLD^DIALOG(1250000.497)
"RTN","GMPLX",129,0)
 ;
"RTN","GMPLX",130,0)
KILL ; Clean-Up Variables
"RTN","GMPLX",131,0)
 K X,Y,DIC,DIE,DR,DA,DUOUT,DTOUT,GMPQUIT,GMPRT,GMPSAVED,GMPIFN,GMPLNO,GMPLNUM,GMPLSEL,GMPREBLD,GMPI,GMPLSLST,GMPLJUMP
"RTN","GMPLX",132,0)
 Q
"RTN","GMPLX",133,0)
 ;
"RTN","GMPLX",134,0)
CODESTS(PROB,ADATE) ;check status of code associated with a problem
"RTN","GMPLX",135,0)
 ; Input:
"RTN","GMPLX",136,0)
 ;    PROB  = pointer to the PROBLEM (#9000011) file
"RTN","GMPLX",137,0)
 ;    ADATE = FM date on which to check the status of ICD9 code  (opt.) 
"RTN","GMPLX",138,0)
 ;
"RTN","GMPLX",139,0)
 ; Output:
"RTN","GMPLX",140,0)
 ;   1  = ACTIVE on the date passed or current date if not passed
"RTN","GMPLX",141,0)
 ;   0  = INACTIVE on the date passed or current date if not passed
"RTN","GMPLX",142,0)
 ;
"RTN","GMPLX",143,0)
 N %,RET
"RTN","GMPLX",144,0)
 S %=$$CODESTS^GMPLAPI2(.RET,PROB,ADATE)
"RTN","GMPLX",145,0)
 Q RET
"RTN","GMPLX1")
0^65^B37261372
"RTN","GMPLX1",1,0)
GMPLX1 ; SLC/MKB/KER -- Problem List Person Utilities ;8/29/13
"RTN","GMPLX1",2,0)
 ;;2.0;Problem List;**3,26,35,260002**;Aug 25, 1994;Build 26
"RTN","GMPLX1",3,0)
 ;
"RTN","GMPLX1",4,0)
 ; External References
"RTN","GMPLX1",5,0)
 ;   DBIA   348  ^DPT(
"RTN","GMPLX1",6,0)
 ;   DBIA  3106  ^DIC(49
"RTN","GMPLX1",7,0)
 ;   DBIA   872  ^ORD(101
"RTN","GMPLX1",8,0)
 ;   DBIA 10060  ^VA(200
"RTN","GMPLX1",9,0)
 ;   DBIA 10062  7^VADPT
"RTN","GMPLX1",10,0)
 ;   DBIA 10062  DEM^VADPT
"RTN","GMPLX1",11,0)
 ;   DBIA  2716  $$GETSTAT^DGMSTAPI
"RTN","GMPLX1",12,0)
 ;   DBIA  3457  $$GETCUR^DGNTAPI
"RTN","GMPLX1",13,0)
 ;   DBIA 10104  $$REPEAT^XLFSTR
"RTN","GMPLX1",14,0)
 ;   DBIA 10006  ^DIC
"RTN","GMPLX1",15,0)
 ;   DBIA 10018  ^DIE
"RTN","GMPLX1",16,0)
 ;   DBIA 10026  ^DIR
"RTN","GMPLX1",17,0)
 ;
"RTN","GMPLX1",18,0)
PAT() ; Select patient -- returns DFN^NAME^BID
"RTN","GMPLX1",19,0)
 N DIC,X,Y,DFN,VADM,VA,PAT
"RTN","GMPLX1",20,0)
P1 S DIC="^AUPNPAT(",DIC(0)="AEQM" D ^DIC I +Y<1 Q -1
"RTN","GMPLX1",21,0)
 I $P(Y,U,2)'=$$PATNAME^GMPLEXT(+Y) D  G P1
"RTN","GMPLX1",22,0)
 . D EN^DDIOL($C(7))
"RTN","GMPLX1",23,0)
 . D EN^DDIOL($$EZBLD^DIALOG(1250000.498))
"RTN","GMPLX1",24,0)
 S DFN=+Y,PAT=Y D DEM^VADPT
"RTN","GMPLX1",25,0)
 S PAT=PAT_U_$E($P(PAT,U,2))_VA("BID"),AUPNSEX=$P(VADM(5),U)
"RTN","GMPLX1",26,0)
 I VADM(6) S PAT=PAT_U_+VADM(6) ; date of death
"RTN","GMPLX1",27,0)
 Q PAT
"RTN","GMPLX1",28,0)
 ;          
"RTN","GMPLX1",29,0)
VADPT(DFN) ; Get Service/Elig Flags
"RTN","GMPLX1",30,0)
 ;          
"RTN","GMPLX1",31,0)
 ; Returns = 1/0/"" if Y/N/unknown
"RTN","GMPLX1",32,0)
 ;   GMPSC     Service Connected
"RTN","GMPLX1",33,0)
 ;   GMPAGTOR  Agent Orange Exposure
"RTN","GMPLX1",34,0)
 ;   GMPION    Ionizing Radiation Exposure
"RTN","GMPLX1",35,0)
 ;   GMPGULF   Persian Gulf Exposure
"RTN","GMPLX1",36,0)
 ;   GMPMST    Military Sexual Trauma
"RTN","GMPLX1",37,0)
 ;   GMPHNC    Head and/or Neck Cancer
"RTN","GMPLX1",38,0)
 ;   GMPCV     Combat Veteran
"RTN","GMPLX1",39,0)
 ;   GMPSHD    Shipboard Hazard and Defense
"RTN","GMPLX1",40,0)
 ;          
"RTN","GMPLX1",41,0)
 N VAEL,VASV,VAERR,HNC,X,PD,% D 7^VADPT S GMPSC=VAEL(3),GMPAGTOR=VASV(2)
"RTN","GMPLX1",42,0)
 S GMPION=VASV(3)
"RTN","GMPLX1",43,0)
 S %=$$PATDET^GMPLEXT(.PD,DFN)
"RTN","GMPLX1",44,0)
 S X=$P($G(PD("PGSVC")),U),GMPGULF=$S(X="Y":1,X="N":0,1:"")
"RTN","GMPLX1",45,0)
 S GMPCV=0 I +$G(VASV(10)) S:DT'>$P($G(VASV(10,1)),U) GMPCV=1  ;CV
"RTN","GMPLX1",46,0)
 S GMPSHD=+$G(VASV(14,1))  ;SHAD
"RTN","GMPLX1",47,0)
 S X=$P($$GETSTAT^DGMSTAPI(DFN),"^",2),GMPMST=$S(X="Y":1,X="N":0,1:"")
"RTN","GMPLX1",48,0)
 S X=$$GETCUR^DGNTAPI(DFN,"HNC"),X=+($G(HNC("STAT"))),GMPHNC=$S(X=4:1,X=5:1,X=1:0,X=6:0,1:"")
"RTN","GMPLX1",49,0)
 Q
"RTN","GMPLX1",50,0)
SCS(PROB,SC) ; Get Exposure/Conditions Strings
"RTN","GMPLX1",51,0)
 ;                 
"RTN","GMPLX1",52,0)
 ;   Input     PROB  Pointer to Problem #9000011
"RTN","GMPLX1",53,0)
 ;               
"RTN","GMPLX1",54,0)
 ;   Returns   SC Array passed by reference
"RTN","GMPLX1",55,0)
 ;             SC(1)="AO/IR/EC/HNC/MST/CV/SHD"
"RTN","GMPLX1",56,0)
 ;             SC(2)="A/I/E/H/M/C/S"
"RTN","GMPLX1",57,0)
 ;             SC(3)="AIEHMCS"
"RTN","GMPLX1",58,0)
 ;                     
"RTN","GMPLX1",59,0)
 ;   NOTE:  Military Sexual Trauma (MST) is suppressed
"RTN","GMPLX1",60,0)
 ;          if the current device is a printer.
"RTN","GMPLX1",61,0)
 ;                     
"RTN","GMPLX1",62,0)
 N DA,FL,AO,IR,EC,HNC,MST,PTR,%,PRB,CV,SHD
"RTN","GMPLX1",63,0)
 S DA=+($G(PROB)) Q:+DA=0
"RTN","GMPLX1",64,0)
 S %=$$DETAIL^GMPLAPI2(.PRB,DA)
"RTN","GMPLX1",65,0)
 S AO=+($P(PRB(1.11),U)),IR=+($P(PRB(1.12),U))
"RTN","GMPLX1",66,0)
 S EC=+($P(PRB(1.13),U)),HNC=+($P(PRB(1.15),U)),MST=+($P(PRB(1.16),U))
"RTN","GMPLX1",67,0)
 S CV=+($P(PRB(1.17),U)),SHD=+($P(PRB(1.18),U))
"RTN","GMPLX1",68,0)
 S PTR=$$PTR^GMPLUTL4
"RTN","GMPLX1",69,0)
 I +AO>0 D
"RTN","GMPLX1",70,0)
 . S:$G(SC(1))'["AO" SC(1)=$G(SC(1))_"/AO" S:$G(SC(2))'["A" SC(2)=$G(SC(2))_"/A" S:$G(SC(3))'["A" SC(3)=$G(SC(3))_"A"
"RTN","GMPLX1",71,0)
 I +IR>0 D
"RTN","GMPLX1",72,0)
 . S:$G(SC(1))'["IR" SC(1)=$G(SC(1))_"/IR" S:$G(SC(2))'["I" SC(2)=$G(SC(2))_"/I" S:$G(SC(3))'["I" SC(3)=$G(SC(3))_"I"
"RTN","GMPLX1",73,0)
 I +EC>0 D
"RTN","GMPLX1",74,0)
 . S:$G(SC(1))'["EC" SC(1)=$G(SC(1))_"/EC" S:$G(SC(2))'["E" SC(2)=$G(SC(2))_"/E" S:$G(SC(3))'["E" SC(3)=$G(SC(3))_"E"
"RTN","GMPLX1",75,0)
 I +HNC>0 D
"RTN","GMPLX1",76,0)
 . S:$G(SC(1))'["HNC" SC(1)=$G(SC(1))_"/HNC" S:$G(SC(2))'["H" SC(2)=$G(SC(2))_"/H" S:$G(SC(3))'["H" SC(3)=$G(SC(3))_"H"
"RTN","GMPLX1",77,0)
 I +MST>0 D
"RTN","GMPLX1",78,0)
 . S:$G(SC(1))'["MST" SC(1)=$G(SC(1))_"/MST" S:$G(SC(2))'["M" SC(2)=$G(SC(2))_"/M" S:$G(SC(3))'["M" SC(3)=$G(SC(3))_"M"
"RTN","GMPLX1",79,0)
 I +CV>0 D
"RTN","GMPLX1",80,0)
 . S:$G(SC(1))'["CV" SC(1)=$G(SC(1))_"/CV" S:$G(SC(2))'["C" SC(2)=$G(SC(2))_"/C" S:$G(SC(3))'["C" SC(3)=$G(SC(3))_"C"
"RTN","GMPLX1",81,0)
 I +PTR'>0 D
"RTN","GMPLX1",82,0)
 . I +SHD>0 S:$G(SC(1))'["SHD" SC(1)=$G(SC(1))_"/SHD" S:$G(SC(2))'["D" SC(2)=$G(SC(2))_"/S" S:$G(SC(3))'["S" SC(3)=$G(SC(3))_"S"
"RTN","GMPLX1",83,0)
 S:$D(SC(1)) SC(1)=$$RS(SC(1)) S:$D(SC(2)) SC(2)=$$RS(SC(2))
"RTN","GMPLX1",84,0)
 Q
"RTN","GMPLX1",85,0)
SCCOND(DFN,SC) ; Get Service/Elig Flags (array)
"RTN","GMPLX1",86,0)
 ; Returns local array .SC passed by value
"RTN","GMPLX1",87,0)
 N HNC,VAEL,VASV,VAERR,X,PD,% D 7^VADPT
"RTN","GMPLX1",88,0)
 S SC("DFN")=$G(DFN),SC("SC")=$P(VAEL(3),"^",1)
"RTN","GMPLX1",89,0)
 S SC("AO")=$P(VASV(2),"^",1)
"RTN","GMPLX1",90,0)
 S SC("IR")=$P(VASV(3),"^",1)
"RTN","GMPLX1",91,0)
 S %=$$PATDET^GMPLEXT(.PD,DFN)
"RTN","GMPLX1",92,0)
 S X=$P($G(PD("PGSVC")),U),SC("PG")=$S(X="Y":1,X="N":0,1:"")
"RTN","GMPLX1",93,0)
 S SC("CV")=0 I +$G(VASV(10)) S:DT'>$P($G(VASV(10,1)),U) SC("CV")=1  ;CV
"RTN","GMPLX1",94,0)
 S SC("SHD")=+$G(VASV(14,1))  ;SHAD
"RTN","GMPLX1",95,0)
 S X=$P($$GETSTAT^DGMSTAPI(DFN),"^",2),SC("MST")=$S(X="Y":1,X="N":0,1:"")
"RTN","GMPLX1",96,0)
 S X=$$GETCUR^DGNTAPI(DFN,"HNC"),X=+($G(HNC("STAT"))),SC("HNC")=$S(X=4:1,X=5:1,X=1:0,X=6:0,1:"")
"RTN","GMPLX1",97,0)
 Q
"RTN","GMPLX1",98,0)
 ;
"RTN","GMPLX1",99,0)
CKDEAD(DATE) ; Dead patient ... continue?  Returns 1 if YES, 0 otherwise
"RTN","GMPLX1",100,0)
 N DIR,X,Y S DIR(0)="YA",DIR("B")="NO"
"RTN","GMPLX1",101,0)
 D BLD^DIALOG(1250000.489,,,"DIR(""A"")")
"RTN","GMPLX1",102,0)
 D BLD^DIALOG(1250000.499,,,"DIR(""?"")")
"RTN","GMPLX1",103,0)
 D EN^DDIOL($C(7))
"RTN","GMPLX1",104,0)
 D EN^DDIOL($$EZBLD^DIALOG(1250000.500,$$EXTDT^GMPLX(DATE)))
"RTN","GMPLX1",105,0)
 D ^DIR
"RTN","GMPLX1",106,0)
 Q +Y
"RTN","GMPLX1",107,0)
 ;
"RTN","GMPLX1",108,0)
REQPROV() ; Returns requesting provider
"RTN","GMPLX1",109,0)
 N DIR,X,Y
"RTN","GMPLX1",110,0)
 I +$G(GMPLUSER) S Y=DUZ_U_$$PROVNAME^GMPLEXT(DUZ) Q Y
"RTN","GMPLX1",111,0)
 D BLD^DIALOG(1250000.501,,,"DIR(""?"")")
"RTN","GMPLX1",112,0)
 S DIR(0)="PA^200:AEQM",DIR("A")=$$EZBLD^DIALOG(1250000.508)
"RTN","GMPLX1",113,0)
 S:$G(GMPROV) DIR("B")=$P(GMPROV,U,2) W ! D ^DIR
"RTN","GMPLX1",114,0)
 I $D(DUOUT)!($D(DTOUT))!(+Y'>0) Q -1
"RTN","GMPLX1",115,0)
 Q Y
"RTN","GMPLX1",116,0)
 ;
"RTN","GMPLX1",117,0)
NAME(USER) ; Formats user name into "Lastname,F"
"RTN","GMPLX1",118,0)
 N NAME,LAST,FIRST
"RTN","GMPLX1",119,0)
 S NAME=$$PROVNAME^GMPLEXT(+USER) I '$L(NAME) Q ""
"RTN","GMPLX1",120,0)
 S LAST=$P(NAME,","),FIRST=$P(NAME,",",2)
"RTN","GMPLX1",121,0)
 S:$E(FIRST)=" " FIRST=$E(FIRST,2,99)
"RTN","GMPLX1",122,0)
 Q $E(LAST,1,15)_","_$E(FIRST)
"RTN","GMPLX1",123,0)
 ;
"RTN","GMPLX1",124,0)
SERV(X) ; Return service name abbreviation
"RTN","GMPLX1",125,0)
 N NAME,ABBREV
"RTN","GMPLX1",126,0)
 S NAME=$$SVCNAME^GMPLEXT(+X)
"RTN","GMPLX1",127,0)
 I NAME="" Q ""
"RTN","GMPLX1",128,0)
 S ABBREV=$$SVCABBV^GMPLEXT(+X)
"RTN","GMPLX1",129,0)
 I ABBREV="" S ABBREV=$E($P(NAME,U),1,4)
"RTN","GMPLX1",130,0)
 Q ABBREV_"/"
"RTN","GMPLX1",131,0)
 ;
"RTN","GMPLX1",132,0)
CLINIC(LAST) ; Returns clinic from file #44
"RTN","GMPLX1",133,0)
 N X,Y,DIC,DIR S Y="" G:$E(GMPLVIEW("VIEW"))="S" CLINQ
"RTN","GMPLX1",134,0)
 S DIR(0)="FAO^1:30",DIR("A")=$$EZBLD^DIALOG(1250000.502) S:$L(LAST) DIR("B")=$P(LAST,U,2)
"RTN","GMPLX1",135,0)
 D BLD^DIALOG(1250000.503,,,"DIR(""?"")")
"RTN","GMPLX1",136,0)
 S DIR("??")="^D LISTCLIN^GMPLMGR1 W !,DIR(""?"")_""."""
"RTN","GMPLX1",137,0)
CLIN1 ; Ask Clinic
"RTN","GMPLX1",138,0)
 D ^DIR S:$D(DUOUT)!($D(DTOUT)) Y="^" S:Y="@" Y="" G:("^"[Y) CLINQ
"RTN","GMPLX1",139,0)
 S DIC="^SC(",DIC(0)="EMQ",DIC("S")="I $P(^(0),U,3)=""C"""
"RTN","GMPLX1",140,0)
 D ^DIC I Y'>0 D  G CLIN1
"RTN","GMPLX1",141,0)
 . D EN^DDIOL($$EZBLD^DIALOG(1250000.504),,"!?5")
"RTN","GMPLX1",142,0)
 . D EN^DDIOL("",,"!")
"RTN","GMPLX1",143,0)
CLINQ ; Quit Asking
"RTN","GMPLX1",144,0)
 Q Y
"RTN","GMPLX1",145,0)
 ;
"RTN","GMPLX1",146,0)
VOCAB() ; Select search vocabulary
"RTN","GMPLX1",147,0)
 N DIR,X,Y S DIR(0)="SAOM^N:NURSING;I:IMMUNOLOGIC;D:DENTAL;S:SOCIAL WORK;P:GENERAL PROBLEM"
"RTN","GMPLX1",148,0)
 S DIR("A")=$$EZBLD^DIALOG(1250000.505),DIR("B")="GENERAL PROBLEM"
"RTN","GMPLX1",149,0)
 D BLD^DIALOG(1250000.506,,,"DIR(""?"")")
"RTN","GMPLX1",150,0)
 D ^DIR S X=$S(Y="N":"NUR",Y="I":"IMM",Y="D":"DEN",Y="S":"SOC",Y="P":"PL1",1:"^")
"RTN","GMPLX1",151,0)
 Q X
"RTN","GMPLX1",152,0)
 ;
"RTN","GMPLX1",153,0)
PARAMS ; Edit pkg parameters in file #125.99
"RTN","GMPLX1",154,0)
 N DIE,DA,DR,OLDVERFY,VERFY,BLANK,MN,NAME,OLD,NEW
"RTN","GMPLX1",155,0)
 S BLANK="       "
"RTN","GMPLX1",156,0)
 S %=$$GETPAR^GMPLSITE(.OLD),OLDVERFY=OLD("VER")
"RTN","GMPLX1",157,0)
 S DIE="^GMPL(125.99,",DA=1,DR="1:6" D ^DIE
"RTN","GMPLX1",158,0)
 S %=$$GETPAR^GMPLSITE(.NEW)
"RTN","GMPLX1",159,0)
 Q:OLDVERFY=NEW("VER")
"RTN","GMPLX1",160,0)
 S DA(1)=$$PROTKEY^GMPLEXT("GMPL PROBLEM LIST") Q:'DA(1)
"RTN","GMPLX1",161,0)
 S VERFY=$$PROTKEY^GMPLEXT("GMPL VERIFY") W "."
"RTN","GMPLX1",162,0)
 S MN=$S(OLDVERFY:"@",1:"$")
"RTN","GMPLX1",163,0)
 S NAME=$S(OLDVERFY:BLANK,1:"@")
"RTN","GMPLX1",164,0)
 W "."
"RTN","GMPLX1",165,0)
 D UPDITEM^GMPLEXT(DA(1),VERFY,MN,NAME)
"RTN","GMPLX1",166,0)
 W "."
"RTN","GMPLX1",167,0)
 Q
"RTN","GMPLX1",168,0)
 ;
"RTN","GMPLX1",169,0)
RS(X) ; Remove Slashes
"RTN","GMPLX1",170,0)
 S X=$G(X) F  Q:$E(X,1)'="/"  S X=$E(X,2,$L(X))
"RTN","GMPLX1",171,0)
 F  Q:$E(X,$L(X))'="/"  S X=$E(X,1,($L(X)-1))
"RTN","GMPLX1",172,0)
 Q X
"RTN","GMPLX1",173,0)
 ;
"RTN","GMPLX1",174,0)
FMTNAME(NAME) ; Formats name into "Lastname,F"
"RTN","GMPLX1",175,0)
 N LAST,FIRST
"RTN","GMPLX1",176,0)
 Q:$G(NAME)="" ""
"RTN","GMPLX1",177,0)
 S LAST=$P(NAME,","),FIRST=$P(NAME,",",2)
"RTN","GMPLX1",178,0)
 S:$E(FIRST)=" " FIRST=$E(FIRST,2,99)
"RTN","GMPLX1",179,0)
 Q $E(LAST,1,15)_","_$E(FIRST)
"VER")
8.0^22.0
**INSTALL NAME**
ACKQ*3.0*260002
"BLD",9044,0)
ACKQ*3.0*260002^QUASAR^0^3130902^y
"BLD",9044,1,0)
^^1^1^3130328^
"BLD",9044,1,1,0)
PROBLEM LIST REFACTORING
"BLD",9044,4,0)
^9.64PA^^
"BLD",9044,6.3)
16
"BLD",9044,"KRN",0)
^9.67PA^779.2^20
"BLD",9044,"KRN",.4,0)
.4
"BLD",9044,"KRN",.401,0)
.401
"BLD",9044,"KRN",.402,0)
.402
"BLD",9044,"KRN",.403,0)
.403
"BLD",9044,"KRN",.5,0)
.5
"BLD",9044,"KRN",.84,0)
.84
"BLD",9044,"KRN",3.6,0)
3.6
"BLD",9044,"KRN",3.8,0)
3.8
"BLD",9044,"KRN",9.2,0)
9.2
"BLD",9044,"KRN",9.8,0)
9.8
"BLD",9044,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",9044,"KRN",9.8,"NM",1,0)
ACKQUTL6^^0^B74016927
"BLD",9044,"KRN",9.8,"NM","B","ACKQUTL6",1)

"BLD",9044,"KRN",19,0)
19
"BLD",9044,"KRN",19.1,0)
19.1
"BLD",9044,"KRN",101,0)
101
"BLD",9044,"KRN",409.61,0)
409.61
"BLD",9044,"KRN",771,0)
771
"BLD",9044,"KRN",779.2,0)
779.2
"BLD",9044,"KRN",870,0)
870
"BLD",9044,"KRN",8989.51,0)
8989.51
"BLD",9044,"KRN",8989.52,0)
8989.52
"BLD",9044,"KRN",8994,0)
8994
"BLD",9044,"KRN","B",.4,.4)

"BLD",9044,"KRN","B",.401,.401)

"BLD",9044,"KRN","B",.402,.402)

"BLD",9044,"KRN","B",.403,.403)

"BLD",9044,"KRN","B",.5,.5)

"BLD",9044,"KRN","B",.84,.84)

"BLD",9044,"KRN","B",3.6,3.6)

"BLD",9044,"KRN","B",3.8,3.8)

"BLD",9044,"KRN","B",9.2,9.2)

"BLD",9044,"KRN","B",9.8,9.8)

"BLD",9044,"KRN","B",19,19)

"BLD",9044,"KRN","B",19.1,19.1)

"BLD",9044,"KRN","B",101,101)

"BLD",9044,"KRN","B",409.61,409.61)

"BLD",9044,"KRN","B",771,771)

"BLD",9044,"KRN","B",779.2,779.2)

"BLD",9044,"KRN","B",870,870)

"BLD",9044,"KRN","B",8989.51,8989.51)

"BLD",9044,"KRN","B",8989.52,8989.52)

"BLD",9044,"KRN","B",8994,8994)

"BLD",9044,"QUES",0)
^9.62^^
"BLD",9044,"REQB",0)
^9.611^^
"MBREQ")
0
"PKG",150,-1)
1^1
"PKG",150,0)
QUASAR^ACKQ^Quality: Audiology and Speech Pathology Audit and Review
"PKG",150,20,0)
^9.402P^^
"PKG",150,22,0)
^9.49I^1^1
"PKG",150,22,1,0)
3.0^3051119^3000626^1
"PKG",150,22,1,"PAH",1,0)
260002^3130902
"PKG",150,22,1,"PAH",1,1,0)
^^1^1^3130902
"PKG",150,22,1,"PAH",1,1,1,0)
PROBLEM LIST REFACTORING
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","ACKQUTL6")
0^1^B74016927
"RTN","ACKQUTL6",1,0)
ACKQUTL6 ;HCIOFO/BH-A&SP Utilities routine ; 08/09/13
"RTN","ACKQUTL6",2,0)
 ;;3.0;QUASAR;**1,7,17,260002**;Feb 11, 2000;Build 16
"RTN","ACKQUTL6",3,0)
 ;Per VHA Directive 10-93-142, this routine SHOULD NOT be modified.
"RTN","ACKQUTL6",4,0)
 ;
"RTN","ACKQUTL6",5,0)
DATACHEK(X,ACKVIEN) ;  Checks that the input (X) is a valid time also checks that 
"RTN","ACKQUTL6",6,0)
 ;          current user has supervisor status
"RTN","ACKQUTL6",7,0)
 ;
"RTN","ACKQUTL6",8,0)
 I $$TIMECHEK^ACKQASU5(ACKVIEN,"") Q 0
"RTN","ACKQUTL6",9,0)
 S X=$$TTIME(X) Q X
"RTN","ACKQUTL6",10,0)
 ;
"RTN","ACKQUTL6",11,0)
 ;
"RTN","ACKQUTL6",12,0)
SUPER(DUZ) ;  Function passes back true if DUZ belongs to a supervisor
"RTN","ACKQUTL6",13,0)
 N ACKDUZ
"RTN","ACKQUTL6",14,0)
 S ACKDUZ=$$PROVCHK^ACKQASU4(DUZ)
"RTN","ACKQUTL6",15,0)
 I 'ACKDUZ Q 0
"RTN","ACKQUTL6",16,0)
 I $D(^ACK(509850.3,ACKDUZ,0)),$P(^ACK(509850.3,ACKDUZ,0),"^",6)=1 Q 1
"RTN","ACKQUTL6",17,0)
 Q 0
"RTN","ACKQUTL6",18,0)
 ;
"RTN","ACKQUTL6",19,0)
 ;
"RTN","ACKQUTL6",20,0)
TTIME(X) ;   Time input validation used within input transform of
"RTN","ACKQUTL6",21,0)
 ;           the Appointment time field (#55) of the visit file.
"RTN","ACKQUTL6",22,0)
 ;
"RTN","ACKQUTL6",23,0)
 ;           X=Time entered by the user
"RTN","ACKQUTL6",24,0)
 ;           Return value either O if input was invalid or formatted
"RTN","ACKQUTL6",25,0)
 ;           time.
"RTN","ACKQUTL6",26,0)
 ;
"RTN","ACKQUTL6",27,0)
 N Y,ACKFMT,ACKAMPM
"RTN","ACKQUTL6",28,0)
 I X="NOW"!(X="now") D NOW^%DTC S X=$P(%,".",2)
"RTN","ACKQUTL6",29,0)
 I X="NOO" S X="NOON"
"RTN","ACKQUTL6",30,0)
 ;
"RTN","ACKQUTL6",31,0)
 S %DT="%DTS"
"RTN","ACKQUTL6",32,0)
 ; S DIR(0)="D^::%DT"
"RTN","ACKQUTL6",33,0)
 S X="2990303@"_X
"RTN","ACKQUTL6",34,0)
 K Y
"RTN","ACKQUTL6",35,0)
 D ^%DT
"RTN","ACKQUTL6",36,0)
 ;
"RTN","ACKQUTL6",37,0)
 I Y="-1" Q 0
"RTN","ACKQUTL6",38,0)
 S Y=$P(Y,".",2)
"RTN","ACKQUTL6",39,0)
 S ACKT="."_Y
"RTN","ACKQUTL6",40,0)
 ;
"RTN","ACKQUTL6",41,0)
 S ACKFMT=Y
"RTN","ACKQUTL6",42,0)
 ;. D AMPM
"RTN","ACKQUTL6",43,0)
 ;. W ?30,"("_+$E(ACKFMT,1,2)_":"_$E(ACKFMT,3,4)_":"_$E(ACKFMT,5,6)_ACKAMPM_")"
"RTN","ACKQUTL6",44,0)
 ;. D AMPM
"RTN","ACKQUTL6",45,0)
 ;. W ?30,"("_+$E(ACKFMT,1,2)_":"_$E(ACKFMT,3,4)_ACKAMPM_")"
"RTN","ACKQUTL6",46,0)
 W ?30,"("_$$FMT(ACKFMT)_")"
"RTN","ACKQUTL6",47,0)
 Q ACKT
"RTN","ACKQUTL6",48,0)
 ;
"RTN","ACKQUTL6",49,0)
FMT(ACKFMT,ACKSTYL) ; convert Quasar Time to external format
"RTN","ACKQUTL6",50,0)
 ; inputs:- ACKFMT - fileman time (internal)  (reqd)
"RTN","ACKQUTL6",51,0)
 ;            can be passed in as 'date.time','.time' or just 'time'
"RTN","ACKQUTL6",52,0)
 ;          ACKSTYL - style of output (optional)
"RTN","ACKQUTL6",53,0)
 ;                    where 0 = 12:mm[:ss] am/pm (no lead space)
"RTN","ACKQUTL6",54,0)
 ;                          1 = 12:mm[:ss] am/pm (lead space)
"RTN","ACKQUTL6",55,0)
 ;                          2 = 12:mm am/pm
"RTN","ACKQUTL6",56,0)
 N ACKHH,ACKAMPM
"RTN","ACKQUTL6",57,0)
 S ACKSTYL=+$G(ACKSTYL)
"RTN","ACKQUTL6",58,0)
 I ACKFMT["." S ACKFMT=$P(ACKFMT,".",2)
"RTN","ACKQUTL6",59,0)
 S ACKFMT=ACKFMT_"00000"
"RTN","ACKQUTL6",60,0)
 S ACKHH=+$E(ACKFMT,1,2)
"RTN","ACKQUTL6",61,0)
 G:ACKSTYL=1 FMT1
"RTN","ACKQUTL6",62,0)
 G:ACKSTYL=2 FMT2
"RTN","ACKQUTL6",63,0)
FMT0 ; style 0 - 12:mm[:ss] am/pm  (the default)
"RTN","ACKQUTL6",64,0)
 S ACKAMPM=" AM" I ACKHH>11,ACKHH<24 S ACKAMPM=" PM"
"RTN","ACKQUTL6",65,0)
 I ACKHH<1 S ACKHH=12
"RTN","ACKQUTL6",66,0)
 I ACKHH>12 S ACKHH=ACKHH-12
"RTN","ACKQUTL6",67,0)
 S ACKFMT=ACKHH_":"_$E(ACKFMT,3,4)_$S(+$E(ACKFMT,5,6)>0:":"_$E(ACKFMT,5,6),1:"")_ACKAMPM
"RTN","ACKQUTL6",68,0)
 Q ACKFMT
"RTN","ACKQUTL6",69,0)
FMT1 ; style 1 - 12:mm[:ss] am/pm  (with lead space if hour<10)
"RTN","ACKQUTL6",70,0)
 S ACKAMPM=" AM" I ACKHH>11,ACKHH<24 S ACKAMPM=" PM"
"RTN","ACKQUTL6",71,0)
 I ACKHH<1 S ACKHH=12
"RTN","ACKQUTL6",72,0)
 I ACKHH>12 S ACKHH=ACKHH-12
"RTN","ACKQUTL6",73,0)
 S ACKFMT=$J(ACKHH,2)_":"_$E(ACKFMT,3,4)_$S(+$E(ACKFMT,5,6)>0:":"_$E(ACKFMT,5,6),1:"")_ACKAMPM
"RTN","ACKQUTL6",74,0)
 Q ACKFMT
"RTN","ACKQUTL6",75,0)
FMT2 ; style 2 - 12:mm am/pm
"RTN","ACKQUTL6",76,0)
 S ACKAMPM=" AM" I ACKHH>11,ACKHH<24 S ACKAMPM=" PM"
"RTN","ACKQUTL6",77,0)
 I ACKHH<1 S ACKHH=12
"RTN","ACKQUTL6",78,0)
 I ACKHH>12 S ACKHH=ACKHH-12
"RTN","ACKQUTL6",79,0)
 S ACKFMT=$J(ACKHH,2)_":"_$E(ACKFMT,3,4)_ACKAMPM
"RTN","ACKQUTL6",80,0)
 Q ACKFMT
"RTN","ACKQUTL6",81,0)
 ;
"RTN","ACKQUTL6",82,0)
DUPECHK(X,DA,ACKP) ;  Check there are no previous duplicate entries
"RTN","ACKQUTL6",83,0)
 N ACKTGT,ACKCLIN,ACKVD,ACKPAT
"RTN","ACKQUTL6",84,0)
 S ACKPAT=ACKP
"RTN","ACKQUTL6",85,0)
 D GETS^DIQ(509850.6,DA_",",".01;1;2.6","I","ACKTGT")
"RTN","ACKQUTL6",86,0)
 S ACKVD=$G(ACKTGT(509850.6,DA_",",.01,"I")) I ACKVD="" Q 1
"RTN","ACKQUTL6",87,0)
 I ACKPAT="" S ACKPAT=$G(ACKTGT(509850.6,DA_",",1,"I")) I ACKPAT="" Q 1
"RTN","ACKQUTL6",88,0)
 S ACKCLIN=$G(ACKTGT(509850.6,DA_",",2.6,"I")) I ACKCLIN="" Q 1
"RTN","ACKQUTL6",89,0)
 I $D(^ACK(509850.6,"APCE",ACKPAT,ACKCLIN,ACKVD,X)) Q 0
"RTN","ACKQUTL6",90,0)
 Q 1
"RTN","ACKQUTL6",91,0)
 ;
"RTN","ACKQUTL6",92,0)
DUPCHK ;  Called from xecutable help of Appointment Time field when ACKITME is
"RTN","ACKQUTL6",93,0)
 ;  defined.  This will only be defined if DUPECHK returned false
"RTN","ACKQUTL6",94,0)
 W !!,"Quasar already has a Visit entry for this Patient, within the same Clinic,"
"RTN","ACKQUTL6",95,0)
 W !,"on the same date at the same time."
"RTN","ACKQUTL6",96,0)
 W !!,"Please re-enter a new Appointment Time.",!!
"RTN","ACKQUTL6",97,0)
 K ACKITME Q
"RTN","ACKQUTL6",98,0)
 ;
"RTN","ACKQUTL6",99,0)
 ;
"RTN","ACKQUTL6",100,0)
CDR() ;  COMPUTE SUGGESTED CDR BASED ON TREATING SPECIALTY
"RTN","ACKQUTL6",101,0)
 S VAIP("D")=ACKVD D IN5^VADPT S ACKTS=+$$GET1^DIQ(45.7,+VAIP(8),1,"I"),ACKCDN=$$GET1^DIQ(42.4,ACKTS,6)_".00"
"RTN","ACKQUTL6",102,0)
 S ACKCDP=$S($O(^ACK(509850,"B",ACKCDN,0)):$O(^ACK(509850,"B",ACKCDN,0)),1:0) I 'ACKCDP S ACKCDP=$O(^ACK(509850,"B","2611.00",0))
"RTN","ACKQUTL6",103,0)
 S ACKCDN=$P(^ACK(509850,ACKCDP,0),U),ACKCD=$P(^ACK(509850,ACKCDP,0),U,2)
"RTN","ACKQUTL6",104,0)
 K %,%H,%I,ACKTS,ACKCDP,VAIP,VAERR
"RTN","ACKQUTL6",105,0)
 W !!,"Suggested CDR Account :",ACKCDN,"  ",ACKCD,!
"RTN","ACKQUTL6",106,0)
 Q ACKCDN
"RTN","ACKQUTL6",107,0)
 ;
"RTN","ACKQUTL6",108,0)
 ;----------------------------------------------------------------
"RTN","ACKQUTL6",109,0)
 ;  Routines and Utilities used within the Clinician Template
"RTN","ACKQUTL6",110,0)
 ;
"RTN","ACKQUTL6",111,0)
 ;
"RTN","ACKQUTL6",112,0)
STAFFNO(X) ;  Finds valid staff No. to be used when allocating next time
"RTN","ACKQUTL6",113,0)
 ;
"RTN","ACKQUTL6",114,0)
 N ACKFIRST,ACKFIND,ACKX
"RTN","ACKQUTL6",115,0)
 S ACKFIRST=1
"RTN","ACKQUTL6",116,0)
 I X=9999 S X="0000" S ACKFIRST=0
"RTN","ACKQUTL6",117,0)
 D GETNEXT,FILE
"RTN","ACKQUTL6",118,0)
 Q
"RTN","ACKQUTL6",119,0)
 ;
"RTN","ACKQUTL6",120,0)
GETNEXT ;
"RTN","ACKQUTL6",121,0)
 S ACKFIND=0
"RTN","ACKQUTL6",122,0)
 F  Q:ACKFIND  D
"RTN","ACKQUTL6",123,0)
 . S ACKX=+X
"RTN","ACKQUTL6",124,0)
 . S X=X+1
"RTN","ACKQUTL6",125,0)
 . I X=9999,ACKFIRST S ACKFIRST=0 S X=0 Q
"RTN","ACKQUTL6",126,0)
 . I X=9999,'ACKFIRST S ACKFIND=1 Q
"RTN","ACKQUTL6",127,0)
 . S X=$E("0000",$L(X)+1,4)_X
"RTN","ACKQUTL6",128,0)
 . I '$D(^ACK(509850.3,"C",X)) S ACKFIND=1,X=ACKX Q
"RTN","ACKQUTL6",129,0)
 Q
"RTN","ACKQUTL6",130,0)
 ;
"RTN","ACKQUTL6",131,0)
FILE ;
"RTN","ACKQUTL6",132,0)
 S ^ACK(509850.3,"ALID")=$E("0000",$L(X)+1,4)_X
"RTN","ACKQUTL6",133,0)
 Q
"RTN","ACKQUTL6",134,0)
 ;
"RTN","ACKQUTL6",135,0)
 ;
"RTN","ACKQUTL6",136,0)
IDATE(D0,Y) ;  Checks that the entered Inactive date falls after the
"RTN","ACKQUTL6",137,0)
 ;          Active date (if one has been entered).
"RTN","ACKQUTL6",138,0)
 I Y="" Q 1  ;  Its valid to not enter an inactivation date. 
"RTN","ACKQUTL6",139,0)
 N ACKACT
"RTN","ACKQUTL6",140,0)
 S ACKACT=$$GET1^DIQ(509850.3,D0,.03,"I") I ACKACT="" Q 1
"RTN","ACKQUTL6",141,0)
 I Y<ACKACT Q 0
"RTN","ACKQUTL6",142,0)
 Q 1
"RTN","ACKQUTL6",143,0)
 ;
"RTN","ACKQUTL6",144,0)
ADATE(D0,Y) ;  Checks that the entered Active date falls before the
"RTN","ACKQUTL6",145,0)
 ;          Inactive date (if one has been entered).
"RTN","ACKQUTL6",146,0)
 N ACKINA
"RTN","ACKQUTL6",147,0)
 S ACKINA=$$GET1^DIQ(509850.3,D0,.04,"I") I ACKINA="" Q 1
"RTN","ACKQUTL6",148,0)
 I Y>ACKINA Q 0
"RTN","ACKQUTL6",149,0)
 Q 1
"RTN","ACKQUTL6",150,0)
 ;
"RTN","ACKQUTL6",151,0)
STAFFREF(X,DA) ;    Cross Reference called from Cross Reference 'Logic'
"RTN","ACKQUTL6",152,0)
 Q  ;Disabled With the removal of "D" X-ref ACKQ*3*17
"RTN","ACKQUTL6",153,0)
 ;
"RTN","ACKQUTL6",154,0)
 N ACKNAME
"RTN","ACKQUTL6",155,0)
 ;ACKQ*3*17
"RTN","ACKQUTL6",156,0)
 ;S ACKNAME=$$GET1^DIQ(8930.3,X_",",.01)
"RTN","ACKQUTL6",157,0)
 S ACKNAME=$$GET1^DIQ(200,X_",",.01)
"RTN","ACKQUTL6",158,0)
 S ^ACK(509850.3,"D",ACKNAME,DA)=""
"RTN","ACKQUTL6",159,0)
 Q
"RTN","ACKQUTL6",160,0)
 ;
"RTN","ACKQUTL6",161,0)
REINDEX() ;   Re-Indexes 'D' Cross Reference of Staff file
"RTN","ACKQUTL6",162,0)
 Q  ;Disabled With the removal of "D" X-ref ACKQ*3*17
"RTN","ACKQUTL6",163,0)
 ;   First checks that all ^USR(8930.3 entries that 509850.3 points to
"RTN","ACKQUTL6",164,0)
 ;   still exist
"RTN","ACKQUTL6",165,0)
 N ACK01,ACK,ACKARR,ACKCNT
"RTN","ACKQUTL6",166,0)
 K ACKARR
"RTN","ACKQUTL6",167,0)
 S ACK=0,ACKCNT=0
"RTN","ACKQUTL6",168,0)
 F  S ACK=$O(^ACK(509850.3,ACK)) Q:'ACK  D
"RTN","ACKQUTL6",169,0)
 . S ACK01=$P(^ACK(509850.3,ACK,0),"^",1)
"RTN","ACKQUTL6",170,0)
 . I '$D(^USR(8930.3,ACK01,0)) D SETARR(ACK)
"RTN","ACKQUTL6",171,0)
 ;
"RTN","ACKQUTL6",172,0)
 I $D(ACKARR) D  Q 0
"RTN","ACKQUTL6",173,0)
 . W !!,"Warning - The following user(s) have been deleted from the USR Class Membership"
"RTN","ACKQUTL6",174,0)
 . W !,"file (#8930.3)."
"RTN","ACKQUTL6",175,0)
 . W !,"Quasar's A&SP Staff file (#509850.3) points to this file."
"RTN","ACKQUTL6",176,0)
 . W !,"The Quasar staff member(s) need to be re-entered into the USR Class Membership"
"RTN","ACKQUTL6",177,0)
 . W !,"file (8930.3) and the associated Quasar staff record amended to point to this"
"RTN","ACKQUTL6",178,0)
 . W !,"new entry.",!!
"RTN","ACKQUTL6",179,0)
 . N ACK1
"RTN","ACKQUTL6",180,0)
 . S ACK1=""
"RTN","ACKQUTL6",181,0)
 . F  S ACK1=$O(ACKARR(ACK1)) Q:ACK1=""  D
"RTN","ACKQUTL6",182,0)
 . . W "     "_ACKARR(ACK1),!
"RTN","ACKQUTL6",183,0)
 . W !!
"RTN","ACKQUTL6",184,0)
 . W "Please inform IRM/National VistA Support of this problem.  This error"
"RTN","ACKQUTL6",185,0)
 . W !,"can be re-created by running this option again."
"RTN","ACKQUTL6",186,0)
 . W !!
"RTN","ACKQUTL6",187,0)
 ;
"RTN","ACKQUTL6",188,0)
 N DA,D0,X,Y
"RTN","ACKQUTL6",189,0)
 K ^ACK(509850.3,"D")
"RTN","ACKQUTL6",190,0)
 S DIK="^ACK(509850.3,"
"RTN","ACKQUTL6",191,0)
 S DIK(1)=".07^D"
"RTN","ACKQUTL6",192,0)
 D ENALL^DIK
"RTN","ACKQUTL6",193,0)
 Q 1
"RTN","ACKQUTL6",194,0)
 ;
"RTN","ACKQUTL6",195,0)
SETARR(ACK) ;
"RTN","ACKQUTL6",196,0)
 Q  ;Disabled With the removal of "D" X-ref ACKQ*3*17
"RTN","ACKQUTL6",197,0)
 ;
"RTN","ACKQUTL6",198,0)
 N ACKNAME
"RTN","ACKQUTL6",199,0)
 S ACKNAME=""
"RTN","ACKQUTL6",200,0)
 F  S ACKNAME=$O(^ACK(509850.3,"D",ACKNAME)) Q:ACKNAME=""  D
"RTN","ACKQUTL6",201,0)
 . I $D(^ACK(509850.3,"D",ACKNAME,ACK)) S ACKCNT=ACKCNT+1 S ACKARR(ACKCNT)=ACKNAME
"RTN","ACKQUTL6",202,0)
 Q
"RTN","ACKQUTL6",203,0)
 ;
"RTN","ACKQUTL6",204,0)
LONG(ACKPC,ACKQPR) ;  Displays Long Description of Procedure Code
"RTN","ACKQUTL6",205,0)
 ;
"RTN","ACKQUTL6",206,0)
 Q
"RTN","ACKQUTL6",207,0)
 N ACKQ,ACKRES,ACKNEW,ACKSTR,ACK1,ACKQARR,ACKLEN,ACKCNT S ACKSTR="",ACKCNT=0
"RTN","ACKQUTL6",208,0)
 S ACK1=0
"RTN","ACKQUTL6",209,0)
 F  S ACK1=$O(^ICPT(ACKPC,"D",ACK1)) Q:'ACK1  D
"RTN","ACKQUTL6",210,0)
 . S ACKNEW=^ICPT(ACKPC,"D",ACK1,0)
"RTN","ACKQUTL6",211,0)
 . S ACKNEW=$$STRIP(ACKNEW)
"RTN","ACKQUTL6",212,0)
 . I $G(ACKSTR)'="" S ACKNEW=ACKSTR_" "_ACKNEW
"RTN","ACKQUTL6",213,0)
 . S ACKLEN=$L(ACKNEW)
"RTN","ACKQUTL6",214,0)
 . I ACKLEN>54 D
"RTN","ACKQUTL6",215,0)
 . . I ACKLEN=55 S ACKCNT=ACKCNT+1,ACKQARR(ACKCNT)=ACKNEW S ACKSTR="" Q
"RTN","ACKQUTL6",216,0)
 . . S ACKRES=$$FORMAT(ACKNEW) S ACKNEW=$P(ACKRES,"^",1),ACKSTR=$P(ACKRES,"^",2),ACKCNT=ACKCNT+1,ACKQARR(ACKCNT)=ACKNEW
"RTN","ACKQUTL6",217,0)
 . I ACKLEN<55 S ACKSTR=ACKNEW
"RTN","ACKQUTL6",218,0)
 I $G(ACKSTR)'="" D
"RTN","ACKQUTL6",219,0)
 . S ACKQ=1
"RTN","ACKQUTL6",220,0)
 . F  Q:'ACKQ  D
"RTN","ACKQUTL6",221,0)
 . . S ACKNEW=ACKSTR S ACKRES=$$FORMAT(ACKNEW)
"RTN","ACKQUTL6",222,0)
 . . S ACKNEW=$P(ACKRES,"^",1),ACKSTR=$P(ACKRES,"^",2)
"RTN","ACKQUTL6",223,0)
 . . S ACKCNT=ACKCNT+1,ACKQARR(ACKCNT)=ACKNEW
"RTN","ACKQUTL6",224,0)
 . . I $G(ACKSTR)="" S ACKQ=0
"RTN","ACKQUTL6",225,0)
 ;
"RTN","ACKQUTL6",226,0)
 ;  Display Array
"RTN","ACKQUTL6",227,0)
 ;
"RTN","ACKQUTL6",228,0)
 I '$D(ACKQARR) Q
"RTN","ACKQUTL6",229,0)
 N ACKK1,ACKQUIT
"RTN","ACKQUTL6",230,0)
 S ACKK1="",ACKQUIT=0
"RTN","ACKQUTL6",231,0)
 W !!," Long Description: "
"RTN","ACKQUTL6",232,0)
 F  S ACKK1=$O(ACKQARR(ACKK1)) Q:'ACKK1!(ACKQUIT)  D
"RTN","ACKQUTL6",233,0)
 . I ACKK1'=1 W !,"                   "
"RTN","ACKQUTL6",234,0)
 . W ACKQARR(ACKK1) I ACKQPR=1,ACKK1=3 W "..." S ACKQUIT=1
"RTN","ACKQUTL6",235,0)
 W !
"RTN","ACKQUTL6",236,0)
 ;
"RTN","ACKQUTL6",237,0)
 Q
"RTN","ACKQUTL6",238,0)
 ;
"RTN","ACKQUTL6",239,0)
FORMAT(ACKNEW) ;
"RTN","ACKQUTL6",240,0)
 ;
"RTN","ACKQUTL6",241,0)
 N ACKRES,ACKCCT,ACKEND,ACKN
"RTN","ACKQUTL6",242,0)
 I $L(ACKNEW)<56 S ACKRES=ACKNEW_"^"_"" Q ACKRES
"RTN","ACKQUTL6",243,0)
 S ACKCCT=0,ACKEND=0
"RTN","ACKQUTL6",244,0)
 F  Q:ACKEND  D
"RTN","ACKQUTL6",245,0)
 . S ACKCCT=ACKCCT+1
"RTN","ACKQUTL6",246,0)
 . I $L($P(ACKNEW," ",1,ACKCCT))<56 S ACKN=ACKCCT
"RTN","ACKQUTL6",247,0)
 . I $L($P(ACKNEW," ",1,ACKCCT))'<56 S ACKEND=1
"RTN","ACKQUTL6",248,0)
 S ACKRES=$P(ACKNEW," ",1,ACKN)_"^"_$P(ACKNEW," ",ACKN+1,999)
"RTN","ACKQUTL6",249,0)
 Q ACKRES
"RTN","ACKQUTL6",250,0)
 ;
"RTN","ACKQUTL6",251,0)
STRIP(ACKNEW) ;
"RTN","ACKQUTL6",252,0)
 N ACKARRAY,ACKCT,ACKLEN,ACKX,ACKY,ACKI
"RTN","ACKQUTL6",253,0)
 S ACKY="",ACKCT=0
"RTN","ACKQUTL6",254,0)
 S ACKLEN=$L(ACKNEW)
"RTN","ACKQUTL6",255,0)
 F ACKI=1:1:ACKLEN D
"RTN","ACKQUTL6",256,0)
 . S ACKX=$E(ACKNEW,ACKI,ACKI)
"RTN","ACKQUTL6",257,0)
 . I ACKX'=" " S ACKY=ACKY_ACKX
"RTN","ACKQUTL6",258,0)
 . I ACKX=" ",ACKY'="" S ACKCT=ACKCT+1 S ACKARRAY(ACKCT)=ACKY S ACKY=""
"RTN","ACKQUTL6",259,0)
 . I ACKI=ACKLEN,ACKY'="" S ACKCT=ACKCT+1 S ACKARRAY(ACKCT)=ACKY S ACKY=""
"RTN","ACKQUTL6",260,0)
 ;
"RTN","ACKQUTL6",261,0)
 N ACKLOOP,ACKSTRG
"RTN","ACKQUTL6",262,0)
 S ACKLOOP=0,ACKSTRG=""
"RTN","ACKQUTL6",263,0)
 F  S ACKLOOP=$O(ACKARRAY(ACKLOOP)) Q:ACKLOOP=""  D
"RTN","ACKQUTL6",264,0)
 . S ACKSTRG=ACKSTRG_ACKARRAY(ACKLOOP)_" "
"RTN","ACKQUTL6",265,0)
 ;
"RTN","ACKQUTL6",266,0)
 S ACKLEN=$L(ACKSTRG)
"RTN","ACKQUTL6",267,0)
 I $E(ACKSTRG,ACKLEN,ACKLEN)=" " S ACKSTRG=$E(ACKSTRG,1,ACKLEN-1)
"RTN","ACKQUTL6",268,0)
 ;
"RTN","ACKQUTL6",269,0)
 Q ACKSTRG
"RTN","ACKQUTL6",270,0)
PLIST(ACKPAT,ACKDC) ; Determines if an entry exists in the Problem file
"RTN","ACKQUTL6",271,0)
 ; returns Status as first piece, Problem List IEN as second piece
"RTN","ACKQUTL6",272,0)
 ; (Status^IEN)
"RTN","ACKQUTL6",273,0)
 ; Status values -  1=Inactive, 2=Active
"RTN","ACKQUTL6",274,0)
 N ACKIFN,ACKPLQT,PLIST,PRB,I,%
"RTN","ACKQUTL6",275,0)
 Q:'$D(ACKPAT) 0
"RTN","ACKQUTL6",276,0)
 Q:'$D(ACKDC) 0
"RTN","ACKQUTL6",277,0)
 S (ACKIFN,ACKPLQT)=0
"RTN","ACKQUTL6",278,0)
 S %=$$GETPLIST^GMPLAPI4(.PLIST,ACKPAT,"AIR")
"RTN","ACKQUTL6",279,0)
 Q:PLIST=0 0
"RTN","ACKQUTL6",280,0)
 F I=1:1:PLIST(0) D  Q:ACKPLQT
"RTN","ACKQUTL6",281,0)
 . K PRB
"RTN","ACKQUTL6",282,0)
 . S ACKIFN=PLIST(I)
"RTN","ACKQUTL6",283,0)
 . S %=$$DETAIL^GMPLAPI2(.PRB,ACKIFN)
"RTN","ACKQUTL6",284,0)
 . I $P(PRB(.01),U,1)=ACKDC S ACKPLQT=$S($P(PRB(.12),U,1)="A":2,1:1)_U_ACKIFN
"RTN","ACKQUTL6",285,0)
 Q ACKPLQT
"VER")
8.0^22.0
**INSTALL NAME**
IBD*3.0*260002
"BLD",9046,0)
IBD*3.0*260002^AUTOMATED INFO COLLECTION SYS^0^3130902^y
"BLD",9046,1,0)
^^1^1^3130328^
"BLD",9046,1,1,0)
PROBLEM LIST REFACTORING
"BLD",9046,4,0)
^9.64PA^^
"BLD",9046,6.3)
16
"BLD",9046,"KRN",0)
^9.67PA^779.2^20
"BLD",9046,"KRN",.4,0)
.4
"BLD",9046,"KRN",.401,0)
.401
"BLD",9046,"KRN",.402,0)
.402
"BLD",9046,"KRN",.403,0)
.403
"BLD",9046,"KRN",.5,0)
.5
"BLD",9046,"KRN",.84,0)
.84
"BLD",9046,"KRN",3.6,0)
3.6
"BLD",9046,"KRN",3.8,0)
3.8
"BLD",9046,"KRN",9.2,0)
9.2
"BLD",9046,"KRN",9.8,0)
9.8
"BLD",9046,"KRN",9.8,"NM",0)
^9.68A^2^2
"BLD",9046,"KRN",9.8,"NM",1,0)
IBDFBK3^^0^B40588252
"BLD",9046,"KRN",9.8,"NM",2,0)
IBDFN11^^0^B4085016
"BLD",9046,"KRN",9.8,"NM","B","IBDFBK3",1)

"BLD",9046,"KRN",9.8,"NM","B","IBDFN11",2)

"BLD",9046,"KRN",19,0)
19
"BLD",9046,"KRN",19.1,0)
19.1
"BLD",9046,"KRN",101,0)
101
"BLD",9046,"KRN",409.61,0)
409.61
"BLD",9046,"KRN",771,0)
771
"BLD",9046,"KRN",779.2,0)
779.2
"BLD",9046,"KRN",870,0)
870
"BLD",9046,"KRN",8989.51,0)
8989.51
"BLD",9046,"KRN",8989.52,0)
8989.52
"BLD",9046,"KRN",8994,0)
8994
"BLD",9046,"KRN","B",.4,.4)

"BLD",9046,"KRN","B",.401,.401)

"BLD",9046,"KRN","B",.402,.402)

"BLD",9046,"KRN","B",.403,.403)

"BLD",9046,"KRN","B",.5,.5)

"BLD",9046,"KRN","B",.84,.84)

"BLD",9046,"KRN","B",3.6,3.6)

"BLD",9046,"KRN","B",3.8,3.8)

"BLD",9046,"KRN","B",9.2,9.2)

"BLD",9046,"KRN","B",9.8,9.8)

"BLD",9046,"KRN","B",19,19)

"BLD",9046,"KRN","B",19.1,19.1)

"BLD",9046,"KRN","B",101,101)

"BLD",9046,"KRN","B",409.61,409.61)

"BLD",9046,"KRN","B",771,771)

"BLD",9046,"KRN","B",779.2,779.2)

"BLD",9046,"KRN","B",870,870)

"BLD",9046,"KRN","B",8989.51,8989.51)

"BLD",9046,"KRN","B",8989.52,8989.52)

"BLD",9046,"KRN","B",8994,8994)

"MBREQ")
0
"PKG",76,-1)
1^1
"PKG",76,0)
AUTOMATED INFO COLLECTION SYS^IBD^The utilities for generating a paper encounter form.
"PKG",76,22,0)
^9.49I^1^1
"PKG",76,22,1,0)
3.0^3051119^2970501^1
"PKG",76,22,1,"PAH",1,0)
260002^3130902
"PKG",76,22,1,"PAH",1,1,0)
^^1^1^3130902
"PKG",76,22,1,"PAH",1,1,1,0)
PROBLEM LIST REFACTORING
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
2
"RTN","IBDFBK3")
0^1^B40588252
"RTN","IBDFBK3",1,0)
IBDFBK3 ;ALB/AAS - AICS broker Utilities ; 03/27/12
"RTN","IBDFBK3",2,0)
 ;;3.0;AUTOMATED INFO COLLECTION SYS;**12,38,36,260002**;APR 24, 1997;Build 16
"RTN","IBDFBK3",3,0)
 ;
"RTN","IBDFBK3",4,0)
LSTDATA(RESULT,PXCA,LCNT) ;
"RTN","IBDFBK3",5,0)
 ; -- expand the PXCA array data into human readable terms for
"RTN","IBDFBK3",6,0)
 ;    display on the workstation
"RTN","IBDFBK3",7,0)
 ;
"RTN","IBDFBK3",8,0)
 ;    Input : Result - (called by reference, see output)
"RTN","IBDFBK3",9,0)
 ;            PXCA   - (by referencethe array of data formated to
"RTN","IBDFBK3",10,0)
 ;                      the PCE device interface specification
"RTN","IBDFBK3",11,0)
 ;            lcnt   - (by reference) a counter for the result array
"RTN","IBDFBK3",12,0)
 ;    Output: RESULT - a new array element result(lcnt) will be
"RTN","IBDFBK3",13,0)
 ;                     created for each piece of data received
"RTN","IBDFBK3",14,0)
 ;
"RTN","IBDFBK3",15,0)
 N I,J,M,X,IBX
"RTN","IBDFBK3",16,0)
 ;
"RTN","IBDFBK3",17,0)
 ; -- noshow, cancel or reschedule checked
"RTN","IBDFBK3",18,0)
 I $D(PXCA("IBD-ABORT")) D
"RTN","IBDFBK3",19,0)
 .S I="" F  S I=$O(PXCA("IBD-ABORT",I)) Q:I=""  S J="" F  S J=$O(PXCA("IBD-ABORT",I,J)) Q:J=""  D
"RTN","IBDFBK3",20,0)
 ..S IBX=PXCA("IBD-ABORT",I,J)
"RTN","IBDFBK3",21,0)
 ..S X="The following Data was NOT Sent to PCE because "_$P(IBX,"^",2)_" was marked!"
"RTN","IBDFBK3",22,0)
 ..D NEWLINE(.RESULT,X,.LCNT)
"RTN","IBDFBK3",23,0)
 .Q
"RTN","IBDFBK3",24,0)
 ;
"RTN","IBDFBK3",25,0)
 ; -- expand the encounter node
"RTN","IBDFBK3",26,0)
 I $D(PXCA("ENCOUNTER")) S IBX=PXCA("ENCOUNTER") D
"RTN","IBDFBK3",27,0)
 .I $P(IBX,"^",14) S X="Checkout Date/Time: "_$$FMTE^XLFDT($P(IBX,"^",14)) D NEWLINE(.RESULT,X,.LCNT)
"RTN","IBDFBK3",28,0)
 .I $P(IBX,"^",4) S X=$S($P(IBX,"^",15)="P":"Primary ",$P(IBX,"^",15)="S":"Secondary ",1:"")_"Provider: "_$P($G(^VA(200,+$P(IBX,"^",4),0)),"^") D NEWLINE(.RESULT,X,.LCNT)
"RTN","IBDFBK3",29,0)
 .;; --change to api cpt ; dhh
"RTN","IBDFBK3",30,0)
 .I $P(IBX,"^",5) S X=$P(IBX,"^",5) D
"RTN","IBDFBK3",31,0)
 .. I X'="" D
"RTN","IBDFBK3",32,0)
 ... N IBVST
"RTN","IBDFBK3",33,0)
 ... S X=$$CPT^ICPTCOD(X)
"RTN","IBDFBK3",34,0)
 ... S (X,IBVST)=$S(+X=-1:"",1:$P(X,"^",2))
"RTN","IBDFBK3",35,0)
 ... S X="Visit Type CPT: "_X D NEWLINE(.RESULT,X,.LCNT)
"RTN","IBDFBK3",36,0)
 ... I $D(PXCA("ENCOUNTER","MODIFIER")) D
"RTN","IBDFBK3",37,0)
 .... S X="    Modifier(s): " D NEWLINE(.RESULT,X,.LCNT)
"RTN","IBDFBK3",38,0)
 .... N IBM S IBM=0
"RTN","IBDFBK3",39,0)
 .... F  S IBM=$O(PXCA("ENCOUNTER","MODIFIER",IBM)) Q:IBM']""  D
"RTN","IBDFBK3",40,0)
 ..... N IBMDESC S IBMDESC=$$MODP^ICPTMOD(IBVST,IBM,"E") Q:+IBMDESC<0
"RTN","IBDFBK3",41,0)
 ..... S X="         "_IBM_"-"_$P(IBMDESC,"^",2)
"RTN","IBDFBK3",42,0)
 ..... D NEWLINE(.RESULT,X,.LCNT)
"RTN","IBDFBK3",43,0)
 .; add sc,ao,ir,ec,mst,eligibility,credit stop (pieces 6-10,13,17)
"RTN","IBDFBK3",44,0)
 .I $P(IBX,"^",6) D NEWLINE(.RESULT,"Visit for SC Condition",.LCNT)
"RTN","IBDFBK3",45,0)
 .I $P(IBX,"^",7) D NEWLINE(.RESULT,"Visit for Agent Orange Condition",.LCNT)
"RTN","IBDFBK3",46,0)
 .I $P(IBX,"^",8) D NEWLINE(.RESULT,"Visit for Ionizing Radiation Condition",.LCNT)
"RTN","IBDFBK3",47,0)
 .I $P(IBX,"^",9) D NEWLINE(.RESULT,"Visit for Environmental Contaminates Condition",.LCNT)
"RTN","IBDFBK3",48,0)
 .I $P(IBX,"^",10) D NEWLINE(.RESULT,"Visit for MST",.LCNT)
"RTN","IBDFBK3",49,0)
 .I $P(IBX,"^",13) D NEWLINE(.RESULT,"Eligibility for Visit: "_$P($G(^DIC(8,+$P(IBX,"^",13),0)),"^"),.LCNT)
"RTN","IBDFBK3",50,0)
 .I $P(IBX,"^",17) D NEWLINE(.RESULT,"Additional Credit Stop: "_$P($G(^DIC(40.7,+$P(IBX,"^",17),0)),"^"),.LCNT)
"RTN","IBDFBK3",51,0)
 ;
"RTN","IBDFBK3",52,0)
 ; -- expand the other nodes
"RTN","IBDFBK3",53,0)
 F M="DIAGNOSIS/PROBLEM","PROVIDER","DIAGNOSIS","PROCEDURE","VITALS","PROBLEM","EXAM","IMMUNIZATION","HEALTH FACTORS","SKIN TEST","PATIENT ED","LOCAL" I $D(PXCA(M)) D
"RTN","IBDFBK3",54,0)
 .S I="" F  S I=$O(PXCA(M,I)) Q:I=""  D:M="PROVIDER" PROV S J="" F  S J=$O(PXCA(M,I,J)) Q:J=""  D
"RTN","IBDFBK3",55,0)
 ..K X S IBX=PXCA(M,I,J) D  D:$D(X) NEWLINE(.RESULT,X,.LCNT)
"RTN","IBDFBK3",56,0)
 ...;
"RTN","IBDFBK3",57,0)
 ...I M="DIAGNOSIS" S X=$S($P(IBX,"^",2)="P":"Primary",$P(IBX,"^",2)="S":"Secondary",1:"")_" Diagnosis: "_$P($G(^ICD9(+$P($G(IBX),"^"),0)),"^")_" - "_$P(IBX,"^",9)_" - "_$P(IBX,"^",8) Q
"RTN","IBDFBK3",58,0)
 ...;
"RTN","IBDFBK3",59,0)
 ...I M="PROCEDURE" D
"RTN","IBDFBK3",60,0)
 ....I +IBX D
"RTN","IBDFBK3",61,0)
 ..... S X=$$CPT^ICPTCOD(+IBX)
"RTN","IBDFBK3",62,0)
 ..... S X=$S(X=-1:"",1:$P(X,"^",2))
"RTN","IBDFBK3",63,0)
 ..... S X="Procedure: "_X_" - "_$P(IBX,"^",7)_" - "_$P(IBX,"^",6)_" - "_$S($P(IBX,"^",2)="P":"Primary ",$P(IBX,"^",2)="S":"Secondary ",1:"Quantity: "_+$P(IBX,"^",2))
"RTN","IBDFBK3",64,0)
 ..... Q
"RTN","IBDFBK3",65,0)
 ....I 'IBX S X="Treatment: "_$P(IBX,"^",6)
"RTN","IBDFBK3",66,0)
 ...;
"RTN","IBDFBK3",67,0)
 ...I M="VITALS" S X="Vital Sign: "_$$VTYPE($P(IBX,"^"))_": "_$P(IBX,"^",2) Q
"RTN","IBDFBK3",68,0)
 ...;
"RTN","IBDFBK3",69,0)
 ...I M="IMMUNIZATION" S X="Immunization: "_$$DSPLYIM^PXAPIIB(+IBX) I $P(IBX,"^",5) S X=X_" - Contraindicated" Q
"RTN","IBDFBK3",70,0)
 ...;
"RTN","IBDFBK3",71,0)
 ...I M="EXAM" S X="Exam: "_$$DSPLYEX^PXAPIIB(+IBX)_$S($P(IBX,"^",2)="A":" Abnormal",$P(IBX,"^",2)="N":" Normal",1:"") Q
"RTN","IBDFBK3",72,0)
 ...;
"RTN","IBDFBK3",73,0)
 ...I M="PROBLEM" S X="Problem List: "_$P(IBX,"^") Q
"RTN","IBDFBK3",74,0)
 ...;
"RTN","IBDFBK3",75,0)
 ...I M="HEALTH FACTORS" S X="Health Factor: "_$$DSPLYHF^PXAPIIB(+IBX) N Y S Y=$P(IBX,"^",2) I Y'="" S X=X_" Level/Severity: "_$S(Y="M":"Minimal",Y="MO":"Moderate",Y="H":"Heavy/Severe",1:"") Q
"RTN","IBDFBK3",76,0)
 ...;
"RTN","IBDFBK3",77,0)
 ...I M="SKIN TEST" S X="Skin Tests: "_$$DSPLYSK^PXAPIIB(+IBX) Q
"RTN","IBDFBK3",78,0)
 ...;
"RTN","IBDFBK3",79,0)
 ...I M="PATIENT ED" S X="Patient Eduction: "_$$DSPLYED^PXAPIIB(+IBX) I $P(IBX,"^",2) S X=X_" , Level of Understanding: "_$S(IBX=1:"Poor",IBX=2:"Fair",IBX=3:"Good",IBX=4:"N/A",IBX=5:"Refused",1:"") Q
"RTN","IBDFBK3",80,0)
 ...;
"RTN","IBDFBK3",81,0)
 ...I M="DIAGNOSIS/PROBLEM" D  S:X="" X="Diagnosis/Problem: unspecified"
"RTN","IBDFBK3",82,0)
 ....N Y S X=""
"RTN","IBDFBK3",83,0)
 ....S Y=$P(IBX,"^",2) S X=$S(Y="P":"Primary ",Y="S":"Secondary ",1:"")_"Diagnosis/Problem"
"RTN","IBDFBK3",84,0)
 ....;I $P(IBX,"^",4) S X=X_$S($P(IBX,"^",6)="I":", Inactive",1:", Active")
"RTN","IBDFBK3",85,0)
 ....I $P(IBX,"^",13)'="" S X=X_" '"_$P(IBX,"^",14)_$S($P(IBX,"^",14)'="":" ",1:"")_$P(IBX,"^",13)_"'"
"RTN","IBDFBK3",86,0)
 ....;I +$P(IBX,"^",3) S X=X_", Clinical Lexicon term: "_$P($G(^GMP(757.01,+$P(IBX,"^",3),0)),"^") ;clinical lexicon term passed
"RTN","IBDFBK3",87,0)
 ....I +$P(IBX,"^",3) S X=X_", Clinical Lexicon term: " D
"RTN","IBDFBK3",88,0)
 .....I $D(^LEX) S X=X_$P($G(^LEX(757.01,+$P(IBX,"^",3),0)),"^") Q
"RTN","IBDFBK3",89,0)
 .....S X=X_$P($G(^GMP(757.01,+$P(IBX,"^",3),0)),"^")
"RTN","IBDFBK3",90,0)
 ....I $P(IBX,"^",5) S X=X_", Added to Problem List "
"RTN","IBDFBK3",91,0)
 ....I +$P(IBX,"^",4) S X=X_", Patient Active Problem: "_$$PROBNAR($P(IBX,"^",4)) ;problem entry passed
"RTN","IBDFBK3",92,0)
 ....I +IBX S IBY=$P($G(^ICD9(+IBX,0)),"^") I IBX'[IBY S X=X_", ICD9: "_IBY
"RTN","IBDFBK3",93,0)
 ....I $P(IBX,"^",9) S X=X_" SC Condition "
"RTN","IBDFBK3",94,0)
 ....I $P(IBX,"^",10) S X=X_" AO Condition "
"RTN","IBDFBK3",95,0)
 ....I $P(IBX,"^",11) S X=X_" IR Condition "
"RTN","IBDFBK3",96,0)
 ....I $P(IBX,"^",12) S X=X_" EC Condition "
"RTN","IBDFBK3",97,0)
 ...I M="LOCAL" S X="Local Data Received: "_IBX Q
"RTN","IBDFBK3",98,0)
 ..I M="PROCEDURE",$D(PXCA(M,I,J)) D MODLIST
"RTN","IBDFBK3",99,0)
LSTQ Q
"RTN","IBDFBK3",100,0)
 ;
"RTN","IBDFBK3",101,0)
MODLIST ; -- expand the modifiers filed
"RTN","IBDFBK3",102,0)
 N IBM,X S IBM=0
"RTN","IBDFBK3",103,0)
 S X="    Modifier(s): " D NEWLINE(.RESULT,X,.LCNT)
"RTN","IBDFBK3",104,0)
 F  S IBM=$O(PXCA(M,I,J,IBM)) Q:IBM']""  D
"RTN","IBDFBK3",105,0)
 . S X="         "_IBM_"-"_$P(PXCA(M,I,J,IBM),"^",3)
"RTN","IBDFBK3",106,0)
 . D NEWLINE(.RESULT,X,.LCNT)
"RTN","IBDFBK3",107,0)
 Q
"RTN","IBDFBK3",108,0)
PROV ; -- expand the additional provider node
"RTN","IBDFBK3",109,0)
 S IBX=$G(PXCA(M,I))
"RTN","IBDFBK3",110,0)
 S X=$S($E(IBX,1)="P":"Primary ",$E(IBX,1)="S":"Secondary ",1:"")_"Provider: "_$P($G(^VA(200,I,0)),"^")_$S($P(IBX,"^",2)=1:" Attending",1:"")
"RTN","IBDFBK3",111,0)
 D NEWLINE(.RESULT,X,.LCNT)
"RTN","IBDFBK3",112,0)
 Q
"RTN","IBDFBK3",113,0)
 ;
"RTN","IBDFBK3",114,0)
NEWLINE(RESULT,X,LCNT) ;
"RTN","IBDFBK3",115,0)
 ; -- increment count and add new line to results array.
"RTN","IBDFBK3",116,0)
 S LCNT=LCNT+1
"RTN","IBDFBK3",117,0)
 S RESULT(LCNT)=X
"RTN","IBDFBK3",118,0)
 Q
"RTN","IBDFBK3",119,0)
 ;
"RTN","IBDFBK3",120,0)
VTYPE(X) ;
"RTN","IBDFBK3",121,0)
 ; -- Vital sign type from codes
"RTN","IBDFBK3",122,0)
 S X=$G(X)
"RTN","IBDFBK3",123,0)
 Q $S(X="BP":"Blood Pressure",X="HT":"Height",X="WT":"Weight",X="TMP":"Temperature",X="PU":"Pulse",1:"Other Vital")
"RTN","IBDFBK3",124,0)
 ;
"RTN","IBDFBK3",125,0)
PROBNAR(IEN) ; -- display problem narrative
"RTN","IBDFBK3",126,0)
 N NARR,%
"RTN","IBDFBK3",127,0)
 S %=$$PROBNARR^GMPLAPI4(.NARR,IEN)
"RTN","IBDFBK3",128,0)
 Q $P(NARR,"^",2)
"RTN","IBDFBK3",129,0)
 ;
"RTN","IBDFBK3",130,0)
PROBDIA(IEN) ; -- return problem diagnosis code pointer
"RTN","IBDFBK3",131,0)
 N ICD
"RTN","IBDFBK3",132,0)
 S %=$$DIAG^GMPLAPI4(.ICD,IEN)
"RTN","IBDFBK3",133,0)
 Q +ICD
"RTN","IBDFN11")
0^2^B4085016
"RTN","IBDFN11",1,0)
IBDFN11 ;ALB/CMR - ENCOUNTER FORM - (entry points for reprint of dynamic data) ; 08/07/13
"RTN","IBDFN11",2,0)
 ;;3.0;AUTOMATED INFO COLLECTION SYS;**260002**;APR 24, 1997;Build 16
"RTN","IBDFN11",3,0)
 ;
"RTN","IBDFN11",4,0)
REPRINT(IBPFID,LIST,ARY) ; -- returns dynamic lists previously printed on a form
"RTN","IBDFN11",5,0)
 ; -- input    IBPFID = ien of forms tracking file
"RTN","IBDFN11",6,0)
 ;             LIST = ien of selection list file
"RTN","IBDFN11",7,0)
 ;             ARY = name of array to return list in
"RTN","IBDFN11",8,0)
 ;
"RTN","IBDFN11",9,0)
 ; -- output   The format of the returned array is as follows:
"RTN","IBDFN11",10,0)
 ;            @ARY(0) = count of array element (0 if nothing found)
"RTN","IBDFN11",11,0)
 ;            @ARY(1) = provider ien^provider
"RTN","IBDFN11",12,0)
 ;         or @ARY(1) = problem ien^problem text^ICD code
"RTN","IBDFN11",13,0)
 ;         or @ARY(1) = classification question
"RTN","IBDFN11",14,0)
 ;
"RTN","IBDFN11",15,0)
 Q:'IBPFID!('LIST)
"RTN","IBDFN11",16,0)
 N FID,ITEM,IBDIEN,NODE,COUNT,ICD,%
"RTN","IBDFN11",17,0)
 ; -- initialize counter
"RTN","IBDFN11",18,0)
 S COUNT=0
"RTN","IBDFN11",19,0)
 ; -- clean out storage area
"RTN","IBDFN11",20,0)
 K @ARY
"RTN","IBDFN11",21,0)
 ; -- get field ids associated with this list
"RTN","IBDFN11",22,0)
 S FID="S"_LIST
"RTN","IBDFN11",23,0)
 S XREF=$S($O(^IBD(357.96,IBPFID,"AD",FID))[LIST:"AD",$O(^IBD(357.96,IBPFID,"AC",FID))[LIST:"AC",1:"") Q:XREF']""
"RTN","IBDFN11",24,0)
 S FID=$O(^IBD(357.96,IBPFID,XREF,FID)) Q:FID'[LIST  D
"RTN","IBDFN11",25,0)
 .; -- get all items for the field id
"RTN","IBDFN11",26,0)
 .S ITEM=0 F  S ITEM=$O(^IBD(357.96,IBPFID,XREF,FID,ITEM)) Q:'ITEM  D
"RTN","IBDFN11",27,0)
 ..; -- get ien for dynamic data entry
"RTN","IBDFN11",28,0)
 ..S IBDIEN=0 F  S IBDIEN=$O(^IBD(357.96,IBPFID,XREF,FID,ITEM,IBDIEN)) Q:'IBDIEN  S NODE=$S(XREF="AD":$G(^IBD(357.96,IBPFID,2,IBDIEN,0)),1:$G(^IBD(357.96,IBPFID,1,IBDIEN,0))) I NODE]"" D
"RTN","IBDFN11",29,0)
 ...; -- set output array with dynamic data previously printed
"RTN","IBDFN11",30,0)
 ...S COUNT=COUNT+1
"RTN","IBDFN11",31,0)
 ...S %=$$DIAG^GMPLAPI4(.ICD,+$P(NODE,"^",4))
"RTN","IBDFN11",32,0)
 ...S @ARY@(COUNT)=$P(NODE,"^",4)_"^"_$P(NODE,"^",8)_"^"_$S(ARY["GMP SELECT PATIENT ACTIVE PROBLEMS":$P(ICD,"^",2),1:"")
"RTN","IBDFN11",33,0)
 S @ARY@(0)=COUNT
"RTN","IBDFN11",34,0)
 Q
"VER")
8.0^22.0
**INSTALL NAME**
OR*3.0*260002
"BLD",9047,0)
OR*3.0*260002^ORDER ENTRY/RESULTS REPORTING^0^3130902^y
"BLD",9047,1,0)
^^1^1^3130328^
"BLD",9047,1,1,0)
PROBLEM LIST REFACTORING
"BLD",9047,4,0)
^9.64PA^^
"BLD",9047,6.3)
16
"BLD",9047,"KRN",0)
^9.67PA^779.2^20
"BLD",9047,"KRN",.4,0)
.4
"BLD",9047,"KRN",.401,0)
.401
"BLD",9047,"KRN",.402,0)
.402
"BLD",9047,"KRN",.403,0)
.403
"BLD",9047,"KRN",.5,0)
.5
"BLD",9047,"KRN",.84,0)
.84
"BLD",9047,"KRN",3.6,0)
3.6
"BLD",9047,"KRN",3.8,0)
3.8
"BLD",9047,"KRN",9.2,0)
9.2
"BLD",9047,"KRN",9.8,0)
9.8
"BLD",9047,"KRN",9.8,"NM",0)
^9.68A^4^4
"BLD",9047,"KRN",9.8,"NM",1,0)
ORCPROB^^0^B26680555
"BLD",9047,"KRN",9.8,"NM",2,0)
ORQQPL1^^0^B59097448
"BLD",9047,"KRN",9.8,"NM",3,0)
ORQQPL2^^0^B8467707
"BLD",9047,"KRN",9.8,"NM",4,0)
ORQQPL3^^0^B18738041
"BLD",9047,"KRN",9.8,"NM","B","ORCPROB",1)

"BLD",9047,"KRN",9.8,"NM","B","ORQQPL1",2)

"BLD",9047,"KRN",9.8,"NM","B","ORQQPL2",3)

"BLD",9047,"KRN",9.8,"NM","B","ORQQPL3",4)

"BLD",9047,"KRN",19,0)
19
"BLD",9047,"KRN",19.1,0)
19.1
"BLD",9047,"KRN",101,0)
101
"BLD",9047,"KRN",409.61,0)
409.61
"BLD",9047,"KRN",771,0)
771
"BLD",9047,"KRN",779.2,0)
779.2
"BLD",9047,"KRN",870,0)
870
"BLD",9047,"KRN",8989.51,0)
8989.51
"BLD",9047,"KRN",8989.52,0)
8989.52
"BLD",9047,"KRN",8994,0)
8994
"BLD",9047,"KRN","B",.4,.4)

"BLD",9047,"KRN","B",.401,.401)

"BLD",9047,"KRN","B",.402,.402)

"BLD",9047,"KRN","B",.403,.403)

"BLD",9047,"KRN","B",.5,.5)

"BLD",9047,"KRN","B",.84,.84)

"BLD",9047,"KRN","B",3.6,3.6)

"BLD",9047,"KRN","B",3.8,3.8)

"BLD",9047,"KRN","B",9.2,9.2)

"BLD",9047,"KRN","B",9.8,9.8)

"BLD",9047,"KRN","B",19,19)

"BLD",9047,"KRN","B",19.1,19.1)

"BLD",9047,"KRN","B",101,101)

"BLD",9047,"KRN","B",409.61,409.61)

"BLD",9047,"KRN","B",771,771)

"BLD",9047,"KRN","B",779.2,779.2)

"BLD",9047,"KRN","B",870,870)

"BLD",9047,"KRN","B",8989.51,8989.51)

"BLD",9047,"KRN","B",8989.52,8989.52)

"BLD",9047,"KRN","B",8994,8994)

"MBREQ")
0
"PKG",35,-1)
1^1
"PKG",35,0)
ORDER ENTRY/RESULTS REPORTING^OR^Order Entry/Results Reporting
"PKG",35,22,0)
^9.49I^1^1
"PKG",35,22,1,0)
3.0^3051119^2990416^1
"PKG",35,22,1,"PAH",1,0)
260002^3130902
"PKG",35,22,1,"PAH",1,1,0)
^^1^1^3130902
"PKG",35,22,1,"PAH",1,1,1,0)
PROBLEM LIST REFACTORING
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
4
"RTN","ORCPROB")
0^1^B26680555
"RTN","ORCPROB",1,0)
ORCPROB ; SLC/MKB/REV - Problem List interface ; 08/09/13
"RTN","ORCPROB",2,0)
 ;;3.0;ORDER ENTRY/RESULTS REPORTING;**27,48,181,260002**;Dec 17, 1997;Build 16
"RTN","ORCPROB",3,0)
ADD ; -- add new problem
"RTN","ORCPROB",4,0)
 N GMPLIST,ORPROV
"RTN","ORCPROB",5,0)
 D FULL^VALM1 S VALMBCK="R",ORPROV=$$PROVIDER Q:ORPROV="^"
"RTN","ORCPROB",6,0)
 S:'$G(ORL) ORL=$$LOCATION^ORCMENU1 Q:'ORL
"RTN","ORCPROB",7,0)
 D ADD^GMPLUTL2(+ORVP,+ORL,ORPROV)
"RTN","ORCPROB",8,0)
 D:$O(GMPLIST(0)) TAB^ORCHART(ORTAB,1)
"RTN","ORCPROB",9,0)
 Q
"RTN","ORCPROB",10,0)
 ;
"RTN","ORCPROB",11,0)
EDIT ; -- edit problem
"RTN","ORCPROB",12,0)
 N GMPLIST,ORPROV,PIECE,NMBR,IFN S VALMBCK=""
"RTN","ORCPROB",13,0)
 I '$G(ORNMBR) S ORNMBR=$$ORDERS^ORCHART("edit") Q:'ORNMBR
"RTN","ORCPROB",14,0)
 D FULL^VALM1 S VALMBCK="R",ORPROV=$$PROVIDER Q:ORPROV="^"
"RTN","ORCPROB",15,0)
 S:'$G(ORL) ORL=$$LOCATION^ORCMENU1 Q:'ORL
"RTN","ORCPROB",16,0)
 F PIECE=1:1:$L(ORNMBR,",") S NMBR=$P(ORNMBR,",",PIECE) I NMBR D
"RTN","ORCPROB",17,0)
 . S IFN=+$G(^TMP("OR",$J,"CURRENT","IDX",NMBR))
"RTN","ORCPROB",18,0)
 . I 'IFN W !,"Problem #"_NMBR_" has been removed!",! H 1 Q
"RTN","ORCPROB",19,0)
 . K GMPLIST D EDIT^GMPLUTL2(+ORVP,+ORL,ORPROV,IFN)
"RTN","ORCPROB",20,0)
 . S:$D(GMPLIST) OREBUILD=1
"RTN","ORCPROB",21,0)
 Q
"RTN","ORCPROB",22,0)
 ;
"RTN","ORCPROB",23,0)
INACT ; -- inactivate a problem
"RTN","ORCPROB",24,0)
 N ORPROV,ORPL,ORY,NUM,NMBR,PIECE,IFN,STS S VALMBCK=""
"RTN","ORCPROB",25,0)
 I '$G(ORNMBR) S ORNMBR=$$ORDERS^ORCHART("inactivate") Q:'ORNMBR
"RTN","ORCPROB",26,0)
 S NUM=$L(ORNMBR,",")-1 Q:'$$OK("inactivate",NUM)
"RTN","ORCPROB",27,0)
 S ORPROV=$$PROVIDER Q:ORPROV="^"
"RTN","ORCPROB",28,0)
 F PIECE=1:1:$L(ORNMBR,",") S NMBR=$P(ORNMBR,",",PIECE) I NMBR D
"RTN","ORCPROB",29,0)
 . S IFN=$G(^TMP("OR",$J,"CURRENT","IDX",NMBR)),STS=$P(IFN,U,4),IFN=+IFN
"RTN","ORCPROB",30,0)
 . I 'IFN W !,"Problem #"_NMBR_" has been removed!",! H 1 Q
"RTN","ORCPROB",31,0)
 . I STS="I" W !,"Problem #"_NMBR_" is already inactive!",! H 1 Q
"RTN","ORCPROB",32,0)
 . S ORPL("PROVIDER")=ORPROV,ORPL("STATUS")="I",ORPL("PROBLEM")=IFN
"RTN","ORCPROB",33,0)
 . W !,$$PROBTEXT^GMPLX(IFN)
"RTN","ORCPROB",34,0)
 . D UPDATE^GMPLUTL(.ORPL,.ORY) I ORY'>0 W !?5,"ERROR - "_ORY(0) H 1 Q
"RTN","ORCPROB",35,0)
 . W:$X>64 !?5 W " ... inactivated" H 1 S OREBUILD=1
"RTN","ORCPROB",36,0)
 . S $P(^TMP("OR",$J,"CURRENT","IDX",NMBR),U,4)="I"
"RTN","ORCPROB",37,0)
 Q
"RTN","ORCPROB",38,0)
 ;
"RTN","ORCPROB",39,0)
CMMT ; -- comment problem
"RTN","ORCPROB",40,0)
 N DIR,X,Y,ORPL,ORY,NMBR,PIECE,QUIT,TEXT,ORPROV,CMMT S VALMBCK=""
"RTN","ORCPROB",41,0)
 I '$G(ORNMBR) S ORNMBR=$$ORDERS^ORCHART("") Q:'ORNMBR
"RTN","ORCPROB",42,0)
 D FULL^VALM1 S VALMBCK="R",ORPROV=$$PROVIDER Q:ORPROV="^"
"RTN","ORCPROB",43,0)
 S CMMT=+$P($P($G(^TMP("OR",$J,ORTAB,0)),U,3),";",4) ;show comments
"RTN","ORCPROB",44,0)
 F PIECE=1:1:$L(ORNMBR,",") S NMBR=$P(ORNMBR,",",PIECE) I NMBR D  Q:$D(QUIT)
"RTN","ORCPROB",45,0)
 . S IFN=+$G(^TMP("OR",$J,"CURRENT","IDX",NMBR))
"RTN","ORCPROB",46,0)
 . I 'IFN W !,"Problem #"_NMBR_" has been removed!",! H 2 Q
"RTN","ORCPROB",47,0)
 . I '$$CODESTS^GMPLX(IFN,DT) D  Q
"RTN","ORCPROB",48,0)
 . . W !,"Problem #"_NMBR_" has an inactive code.  Please use the EDIT action instead",! H 2 S QUIT=1
"RTN","ORCPROB",49,0)
 . S DIR(0)="FAO^1:60",DIR("A")="COMMENT (<60 char): "
"RTN","ORCPROB",50,0)
 . S DIR("A",1)=$$UP^XLFSTR($$PROBTEXT^GMPLX(IFN))
"RTN","ORCPROB",51,0)
 . S DIR("?")="Enter up to 60 characters of additional text to be appended to this problem" S:$D(TEXT) DIR("B")=TEXT
"RTN","ORCPROB",52,0)
 . W ! D ^DIR I $D(DTOUT)!("^"[Y) S QUIT=1 Q
"RTN","ORCPROB",53,0)
 . S (TEXT,ORPL("COMMENT"))=Y,ORPL("PROBLEM")=IFN
"RTN","ORCPROB",54,0)
 . S ORPL("PROVIDER")=ORPROV
"RTN","ORCPROB",55,0)
 . D UPDATE^GMPLUTL(.ORPL,.ORY) S:CMMT&(ORY>0) OREBUILD=1
"RTN","ORCPROB",56,0)
 . W !?5,$S(ORY>0:"... 1 comment added",1:"ERROR - "_ORY(0)) H 1
"RTN","ORCPROB",57,0)
 Q
"RTN","ORCPROB",58,0)
 ;
"RTN","ORCPROB",59,0)
REMOVE ; -- remove problem
"RTN","ORCPROB",60,0)
 N DIR,X,Y,IFN,TEXT,ORY,SUB,NUM,NMBR,PIECE,QUIT,ORPROV,%
"RTN","ORCPROB",61,0)
 S VALMBCK=""
"RTN","ORCPROB",62,0)
 I '$G(ORNMBR) S ORNMBR=$$ORDERS^ORCHART("remove") Q:'ORNMBR
"RTN","ORCPROB",63,0)
 S NUM=$L(ORNMBR,",")-1 Q:'$$OK("remove",NUM)
"RTN","ORCPROB",64,0)
 D FULL^VALM1 S VALMBCK="R",ORPROV=$$PROVIDER Q:ORPROV="^"
"RTN","ORCPROB",65,0)
 F PIECE=1:1:$L(ORNMBR,",") S NMBR=$P(ORNMBR,",",PIECE) I NMBR D  Q:$D(QUIT)
"RTN","ORCPROB",66,0)
 . S IFN=+$G(^TMP("OR",$J,"CURRENT","IDX",NMBR))
"RTN","ORCPROB",67,0)
 . I 'IFN W !,"Problem #"_NMBR_" has already been removed!",! H 1 Q
"RTN","ORCPROB",68,0)
 . S DIR(0)="FAO^1:60",DIR("A")="REASON FOR REMOVAL: "
"RTN","ORCPROB",69,0)
 . S DIR("A",1)=$$UP^XLFSTR($$PROBTEXT^GMPLX(IFN))
"RTN","ORCPROB",70,0)
 . S:$D(TEXT) DIR("B")=TEXT
"RTN","ORCPROB",71,0)
 . S DIR("?")="Enter up to 60 characters of additional text to be appended to this problem"
"RTN","ORCPROB",72,0)
 . W ! D ^DIR I $D(DTOUT)!($D(DUOUT)) S QUIT=1 Q
"RTN","ORCPROB",73,0)
 . S TEXT=Y S %=$$DELETE^GMPLAPI2(.ORY,IFN,+ORPROV,TEXT)
"RTN","ORCPROB",74,0)
 . I ORY'>0 W !?5,"ERROR - "_ORY(0) H 1 Q
"RTN","ORCPROB",75,0)
 . W !?5,"... removed" H 1 S OREBUILD=1
"RTN","ORCPROB",76,0)
 Q
"RTN","ORCPROB",77,0)
 ;
"RTN","ORCPROB",78,0)
VERIFY ; -- verify problem
"RTN","ORCPROB",79,0)
 N GMPARAM
"RTN","ORCPROB",80,0)
 D PARAM^GMPLUTL2(.GMPARAM)
"RTN","ORCPROB",81,0)
 I 'GMPARAM("VER") W !,"This action is not in use.",! H 1 Q
"RTN","ORCPROB",82,0)
 I '$D(^XUSEC("ORES",DUZ)),'$D(^XUSEC("ORELSE",DUZ)) W !,"You must have either the ORES or ORELSE key to verify these problems!",! H 1 Q
"RTN","ORCPROB",83,0)
 N NUM,PIECE,GMPIFN,OROLD,GMPSAVED
"RTN","ORCPROB",84,0)
 S GMPSAVED=0
"RTN","ORCPROB",85,0)
 S VALMBCK=""
"RTN","ORCPROB",86,0)
 I '$G(ORNMBR) S ORNMBR=$$ORDERS^ORCHART("verify") Q:'ORNMBR
"RTN","ORCPROB",87,0)
 S VALMBCK="",NUM=$L(ORNMBR,",")-1 Q:'$$OK("verify",NUM)
"RTN","ORCPROB",88,0)
 F PIECE=1:1:$L(ORNMBR,",") S NUM=$P(ORNMBR,",",PIECE) I NUM D
"RTN","ORCPROB",89,0)
 . S GMPIFN=+$G(^TMP("OR",$J,"CURRENT","IDX",NUM))
"RTN","ORCPROB",90,0)
 . I 'GMPIFN W !,"Problem #"_NUM_" has already been removed!",! H 1 Q
"RTN","ORCPROB",91,0)
 . D VERIFY^GMPL1
"RTN","ORCPROB",92,0)
 . S:GMPSAVED OREBUILD=1
"RTN","ORCPROB",93,0)
 Q
"RTN","ORCPROB",94,0)
 ;
"RTN","ORCPROB",95,0)
OK(ACTION,NUM) ; -- Are you sure?
"RTN","ORCPROB",96,0)
 N DIR,X,Y
"RTN","ORCPROB",97,0)
 S DIR(0)="YA",DIR("B")="NO",DIR("A")="Are you sure you want to "_ACTION_" "_$S(NUM>1:"these problems? ",1:"this problem? ")
"RTN","ORCPROB",98,0)
 S DIR("?")="Enter YES to continue with this action, or NO to cancel"
"RTN","ORCPROB",99,0)
 D ^DIR
"RTN","ORCPROB",100,0)
 Q +Y
"RTN","ORCPROB",101,0)
 ;
"RTN","ORCPROB",102,0)
PROVIDER() ; --Return Responsible Provider
"RTN","ORCPROB",103,0)
 N X,Y,DIC
"RTN","ORCPROB",104,0)
 I '$D(^XUSEC("OREMAS",DUZ)),'$G(ORNP)!($G(ORNP)=DUZ) S Y=DUZ_U_$P($G(^VA(200,DUZ,0)),U) G PVQ
"RTN","ORCPROB",105,0)
 S DIC=200,DIC(0)="AEQM",DIC("A")="Requesting Clinician: "
"RTN","ORCPROB",106,0)
 S:$G(ORNP) DIC("B")=ORNP D ^DIC S:Y'>0 Y="^"
"RTN","ORCPROB",107,0)
PVQ Q Y
"RTN","ORCPROB",108,0)
 ;
"RTN","ORCPROB",109,0)
EX ; -- exit action
"RTN","ORCPROB",110,0)
 D:$G(OREBUILD) TAB^ORCHART(ORTAB,1)
"RTN","ORCPROB",111,0)
 S:$D(^TMP("OR",$J,"CURRENT","MENU")) XQORM("HIJACK")=^TMP("OR",$J,"CURRENT","MENU")
"RTN","ORCPROB",112,0)
 Q
"RTN","ORQQPL1")
0^2^B59097448
"RTN","ORQQPL1",1,0)
ORQQPL1 ; ALB/PDR/REV - PROBLEM LIST FOR CPRS GUI ; 08/09/13
"RTN","ORQQPL1",2,0)
 ;;3.0;ORDER ENTRY/RESULTS REPORTING;**10,85,148,173,203,206,249,243,280,260002**;Dec 17, 1997;Build 16
"RTN","ORQQPL1",3,0)
 ;
"RTN","ORQQPL1",4,0)
 ;------------------------- GET PROBLEM FROM LEXICON -------------------
"RTN","ORQQPL1",5,0)
 ;
"RTN","ORQQPL1",6,0)
LEXSRCH(LIST,FROM,N,VIEW,ORDATE) ; Get candidate Problems from LEX file
"RTN","ORQQPL1",7,0)
 N LEX,VAL,VAL1,COD,CIEN,SYS,MAX,NAME
"RTN","ORQQPL1",8,0)
 S:'+$G(ORDATE) ORDATE=DT
"RTN","ORQQPL1",9,0)
 S:'$G(N) N=100
"RTN","ORQQPL1",10,0)
 S:'$L($G(VIEW)) VIEW="PL1"
"RTN","ORQQPL1",11,0)
 D CONFIG^LEXSET("GMPL",VIEW,ORDATE)
"RTN","ORQQPL1",12,0)
 D LOOK^LEXA(FROM,"GMPL",N,"",ORDATE)
"RTN","ORQQPL1",13,0)
 S S=0
"RTN","ORQQPL1",14,0)
 F  S S=$O(LEX("LIST",S)) Q:S<1  D
"RTN","ORQQPL1",15,0)
 . S VAL1=LEX("LIST",S)
"RTN","ORQQPL1",16,0)
 . S COD="",CIEN="",SYS="",NAME=""
"RTN","ORQQPL1",17,0)
 . I $L(VAL1,"CPT-4 ")>1 D
"RTN","ORQQPL1",18,0)
 .. S SYS="ICD-9-CM "
"RTN","ORQQPL1",19,0)
 .. S COD="799.9"
"RTN","ORQQPL1",20,0)
 .. S CIEN=""
"RTN","ORQQPL1",21,0)
 .. S NAME=$P(VAL1," (CPT-4")
"RTN","ORQQPL1",22,0)
 . I $L(VAL1,"DSM-IV ")>1 D
"RTN","ORQQPL1",23,0)
 .. S SYS="DSM-IV "
"RTN","ORQQPL1",24,0)
 .. S COD=$P($P(VAL1,SYS,2),")")
"RTN","ORQQPL1",25,0)
 .. S:COD["/" COD=$P(COD,"/",1)
"RTN","ORQQPL1",26,0)
 .. S CIEN=$$CODEN^ICDCODE($$ICDONE^LEXU($P(VAL1,U,1),ORDATE),80)
"RTN","ORQQPL1",27,0)
 .. S NAME=$P(VAL1," (DSM-IV")
"RTN","ORQQPL1",28,0)
 .. ;
"RTN","ORQQPL1",29,0)
 . I $L(VAL1,"(TITLE 38 ")>1 D
"RTN","ORQQPL1",30,0)
 .. S SYS="TITLE 38 "
"RTN","ORQQPL1",31,0)
 .. S COD=$P($P(VAL1,SYS,2),")")
"RTN","ORQQPL1",32,0)
 .. S:COD["/" COD=$P(COD,"/",1)
"RTN","ORQQPL1",33,0)
 .. S CIEN=$$CODEN^ICDCODE($$ICDONE^LEXU($P(VAL1,U,1),ORDATE),80)
"RTN","ORQQPL1",34,0)
 .. S NAME=$P(VAL1,"(TITLE 38 ")
"RTN","ORQQPL1",35,0)
 .. ;
"RTN","ORQQPL1",36,0)
 . I $L(VAL1,"ICD-9-CM ")>1 D
"RTN","ORQQPL1",37,0)
 .. S SYS="ICD-9-CM "
"RTN","ORQQPL1",38,0)
 .. S COD=$P($P(VAL1,SYS,2),")")
"RTN","ORQQPL1",39,0)
 .. S:COD["/" COD=$P(COD,"/",1)
"RTN","ORQQPL1",40,0)
 .. S CIEN=+$$CODEN^ICDCODE(COD,80)
"RTN","ORQQPL1",41,0)
 .. S NAME=$P(VAL1," (ICD-9-CM")
"RTN","ORQQPL1",42,0)
 . I $L(NAME)=0 S NAME=$P($P(VAL1," (")," *")
"RTN","ORQQPL1",43,0)
 . ;
"RTN","ORQQPL1",44,0)
 . ; jeh Clean left over codes
"RTN","ORQQPL1",45,0)
 . S NAME=$P(NAME," (CPT-4")
"RTN","ORQQPL1",46,0)
 . S NAME=$P(NAME," (DSM-IV")
"RTN","ORQQPL1",47,0)
 . S NAME=$P(NAME,"(TITLE 38 ")
"RTN","ORQQPL1",48,0)
 . S NAME=$P(NAME," (ICD-9-CM")
"RTN","ORQQPL1",49,0)
 . ;
"RTN","ORQQPL1",50,0)
 . S VAL=NAME_U_COD_U_CIEN_U_SYS ; ien^.01^icd^icdifn^system
"RTN","ORQQPL1",51,0)
 . S LIST(S)=VAL
"RTN","ORQQPL1",52,0)
 . S MAX=S
"RTN","ORQQPL1",53,0)
 I $G(MAX)'="" S LIST(MAX+1)=$G(LEX("MAT"))
"RTN","ORQQPL1",54,0)
 K ^TMP("LEXSCH",$J)
"RTN","ORQQPL1",55,0)
 Q
"RTN","ORQQPL1",56,0)
 ;
"RTN","ORQQPL1",57,0)
ICDREC(COD) ;
"RTN","ORQQPL1",58,0)
 N CODIEN
"RTN","ORQQPL1",59,0)
 I COD="" Q ""
"RTN","ORQQPL1",60,0)
 S COD=$P($P(COD,U),"/")
"RTN","ORQQPL1",61,0)
 S CODIEN=$$CODEN^ICDCODE(COD,80) ;ICR #3990
"RTN","ORQQPL1",62,0)
 Q CODIEN
"RTN","ORQQPL1",63,0)
 ;
"RTN","ORQQPL1",64,0)
CPTREC(COD) ;
"RTN","ORQQPL1",65,0)
 I COD="" Q ""
"RTN","ORQQPL1",66,0)
 Q $$CODEN^ICPTCOD(COD) ;ICR #1995
"RTN","ORQQPL1",67,0)
 ;
"RTN","ORQQPL1",68,0)
EDLOAD(RETURN,DA,GMPROV,GMPVAMC) ; LOAD  EDIT ARRAYS
"RTN","ORQQPL1",69,0)
 ; DA=problem IFN
"RTN","ORQQPL1",70,0)
 N I,GMPL,%
"RTN","ORQQPL1",71,0)
 S %=$$DETAIL^GMPLAPI2(.GMPL,DA,+GMPROV)
"RTN","ORQQPL1",72,0)
 S I=0
"RTN","ORQQPL1",73,0)
 D LOADFLDS(.RETURN,"GMPL","NEW",.I)
"RTN","ORQQPL1",74,0)
 D LOADFLDS(.RETURN,"GMPL","ORG",.I)
"RTN","ORQQPL1",75,0)
 Q
"RTN","ORQQPL1",76,0)
 ;
"RTN","ORQQPL1",77,0)
LOADFLDS(RETURN,NAM,TYP,I) ; LOAD FIELDS FOR TYPE OF ARRAY
"RTN","ORQQPL1",78,0)
 N S,V,CVP,PN,PID
"RTN","ORQQPL1",79,0)
 S S="",V=$C(254)
"RTN","ORQQPL1",80,0)
 F  S S=$O(@NAM@(S)) Q:S=10  D
"RTN","ORQQPL1",81,0)
 . S RETURN(I)=TYP_V_S_V_@NAM@(S)
"RTN","ORQQPL1",82,0)
 . S I=I+1
"RTN","ORQQPL1",83,0)
 S S=""
"RTN","ORQQPL1",84,0)
 F  S S=$O(@NAM@(10,S)) Q:S=""  D
"RTN","ORQQPL1",85,0)
 . S CVP=@NAM@(10,S)
"RTN","ORQQPL1",86,0)
 . S PN="" ; provider name
"RTN","ORQQPL1",87,0)
 . S PID=$P(CVP,U,6) ; provider id
"RTN","ORQQPL1",88,0)
 . I PID'=""  S PN=$$GET1^DIQ(200,PID,.01) ; get provider name
"RTN","ORQQPL1",89,0)
 . S RETURN(I)=TYP_V_"10,"_S_V_CVP_U_PN
"RTN","ORQQPL1",90,0)
 . S I=I+1
"RTN","ORQQPL1",91,0)
 Q
"RTN","ORQQPL1",92,0)
 ;
"RTN","ORQQPL1",93,0)
EDSAVE(RETURN,GMPIFN,GMPROV,GMPVAMC,UT,EDARRAY) ; SAVE EDITED RES
"RTN","ORQQPL1",94,0)
 ; RETURN - boolean, 1 success, 0 failure
"RTN","ORQQPL1",95,0)
 ; EDARRAY - array used for indirect sets of GMPORIG() and GMPFLDS()
"RTN","ORQQPL1",96,0)
 ;
"RTN","ORQQPL1",97,0)
 N ERR,GMPLUSER,S
"RTN","ORQQPL1",98,0)
 S GMPLUSER=$S(UT:1,1:0)
"RTN","ORQQPL1",99,0)
 S S="",RETURN=1
"RTN","ORQQPL1",100,0)
 F  S S=$O(EDARRAY(S)) Q:S=""  D
"RTN","ORQQPL1",101,0)
 . S @EDARRAY(S)
"RTN","ORQQPL1",102,0)
 I $D(GMPFLD(10,"NEW"))>9 D  I 'RETURN Q  ; Bail Out if no lock
"RTN","ORQQPL1",103,0)
 . I '$$LOCK^GMPLDAL(GMPIFN,11,,10) S RETURN=0 ; given bogus nature of this lock, should be able to get
"RTN","ORQQPL1",104,0)
 S RETURN=$$UPDATE^GMPLAPI2(.ERR,GMPIFN,.GMPFLD,GMPLUSER,GMPROV)
"RTN","ORQQPL1",105,0)
 K GMPFLD,GMPORIG
"RTN","ORQQPL1",106,0)
 D UNLOCK^GMPLDAL(GMPIFN,11) ; free this instance of lock (in case it was set)
"RTN","ORQQPL1",107,0)
 Q
"RTN","ORQQPL1",108,0)
 ;
"RTN","ORQQPL1",109,0)
UPDATE(ORRETURN,UPDARRAY) ; UPDATE A PROBLEM RECORD
"RTN","ORQQPL1",110,0)
 ; Does essentially same job as EDSAVE above, however does not handle edits to comments
"RTN","ORQQPL1",111,0)
 ; or addition of multiple comments.
"RTN","ORQQPL1",112,0)
 ; Use initially just for status updates.
"RTN","ORQQPL1",113,0)
 ;
"RTN","ORQQPL1",114,0)
 N S,GMPL,GMPORIG ; last 2 vars created in nested call
"RTN","ORQQPL1",115,0)
 S S=""
"RTN","ORQQPL1",116,0)
 F  S S=$O(UPDARRAY(S)) Q:S=""  D
"RTN","ORQQPL1",117,0)
 . S @UPDARRAY(S)
"RTN","ORQQPL1",118,0)
 D UPDATE^GMPLUTL(.ORARRAY,.ORRETURN)
"RTN","ORQQPL1",119,0)
 K ORARRAY
"RTN","ORQQPL1",120,0)
 ; broker wont pick up root node RETURN
"RTN","ORQQPL1",121,0)
 S ORRETURN(1)=ORRETURN(0) ; error text
"RTN","ORQQPL1",122,0)
 S ORRETURN(0)=ORRETURN ; gmpdfn
"RTN","ORQQPL1",123,0)
 I ORRETURN(0)=""  S ORRETURN=1 ; insurance ? need
"RTN","ORQQPL1",124,0)
 Q
"RTN","ORQQPL1",125,0)
 ;
"RTN","ORQQPL1",126,0)
ADDSAVE(RETURN,GMPDFN,GMPROV,GMPVAMC,ADDARRAY) ; SAVE NEW RECORD
"RTN","ORQQPL1",127,0)
 ; RETURN - Problem IFN if success, 0 otherwise
"RTN","ORQQPL1",128,0)
 ; ADDARRAY - array used for indirect sets of  GMPFLDS()
"RTN","ORQQPL1",129,0)
 ;
"RTN","ORQQPL1",130,0)
 N S,GMPFLD,GMPORIG,%
"RTN","ORQQPL1",131,0)
 S S="",RETURN=0
"RTN","ORQQPL1",132,0)
 Q:'$$LOCK^GMPLDAL(0,,,10)
"RTN","ORQQPL1",133,0)
 F  S S=$O(ADDARRAY(S)) Q:S=""  D
"RTN","ORQQPL1",134,0)
 . S @ADDARRAY(S)
"RTN","ORQQPL1",135,0)
 S %=$$NEW^GMPLAPI2(.RETURN,GMPDFN,GMPROV,.GMPFLD,$$CLINUSER(DUZ))
"RTN","ORQQPL1",136,0)
 S:$G(RETURN)>0 RETURN=1
"RTN","ORQQPL1",137,0)
 D UNLOCK^GMPLDAL(0)
"RTN","ORQQPL1",138,0)
 Q
"RTN","ORQQPL1",139,0)
 ;
"RTN","ORQQPL1",140,0)
INITUSER(RETURN,ORDUZ) ; INITIALIZE FOR NEW USER
"RTN","ORQQPL1",141,0)
 ; taken from INIT^GMPLMGR
"RTN","ORQQPL1",142,0)
 ; leave GMPLUSER on symbol table - is evaluated in EDITSAVE
"RTN","ORQQPL1",143,0)
 ;
"RTN","ORQQPL1",144,0)
 N GMPARAM,PV,CTXT,GMPLPROV
"RTN","ORQQPL1",145,0)
 S GMPLUSER=$$CLINUSER(DUZ)
"RTN","ORQQPL1",146,0)
 S CTXT=$$GET^XPAR("ALL","ORCH CONTEXT PROBLEMS",1)
"RTN","ORQQPL1",147,0)
 D GET^GMPLSITE(.GMPARAM)
"RTN","ORQQPL1",148,0)
 S RETURN(0)=GMPLUSER ;  problem list user, or other user
"RTN","ORQQPL1",149,0)
 S RETURN(1)=$$USERVIEW^GMPLEXT ; GMPLVIEW("VIEW") - users default view
"RTN","ORQQPL1",150,0)
 S RETURN(2)=GMPARAM("VER") ; verify transcribed problems
"RTN","ORQQPL1",151,0)
 S RETURN(3)=GMPARAM("PRT") ; prompt for chart copy
"RTN","ORQQPL1",152,0)
 S RETURN(4)=GMPARAM("CLU") ; use lexicon
"RTN","ORQQPL1",153,0)
 S RETURN(5)=GMPARAM("REV") ; chron or reverse chron listing
"RTN","ORQQPL1",154,0)
 S RETURN(6)=$S($P($G(CTXT),";",3)'="":$P($G(CTXT),";",3),1:"A")
"RTN","ORQQPL1",155,0)
 S GMPLPROV=$P($G(CTXT),";",5)
"RTN","ORQQPL1",156,0)
 I +GMPLPROV>0,$D(^VA(200,GMPLPROV)) D
"RTN","ORQQPL1",157,0)
 . S RETURN(7)=GMPLPROV_U_$P(^VA(200,GMPLPROV,0),U)
"RTN","ORQQPL1",158,0)
 E  S RETURN(7)="0^All"
"RTN","ORQQPL1",159,0)
 S RETURN(8)=$$SERVICE^GMPLEXT ; user's service/section
"RTN","ORQQPL1",160,0)
 ; Guessing from what I see in the data that $$VIEW^GMPLX1 actually returns a composite
"RTN","ORQQPL1",161,0)
 ; of default view (in/out patient)/(c1/c2... if out patient i.e. GMPLVIEW("CLIN")) or
"RTN","ORQQPL1",162,0)
 ;                                 /(s1/s2... if in patient i.e. GMPLVIEW("SERV"))
"RTN","ORQQPL1",163,0)
 ; Going with this assumption for now:
"RTN","ORQQPL1",164,0)
 I $L(RETURN(1),"/")>1 D
"RTN","ORQQPL1",165,0)
 . S PV=RETURN(1)
"RTN","ORQQPL1",166,0)
 . S RETURN(1)=$P(PV,"/")
"RTN","ORQQPL1",167,0)
 . I RETURN(1)="C" S GMPLVIEW("CLIN")=$P(PV,"/",2,99)
"RTN","ORQQPL1",168,0)
 . I RETURN(1)="S" S GMPLVIEW("SERV")=$P(PV,"/",2,99)
"RTN","ORQQPL1",169,0)
 S RETURN(9)=$G(GMPLVIEW("SERV")) ; ??? Where from - see tech doc
"RTN","ORQQPL1",170,0)
 S RETURN(10)=$G(GMPLVIEW("CLIN")) ; ??? Where from - see tech doc
"RTN","ORQQPL1",171,0)
 S RETURN(11)=""
"RTN","ORQQPL1",172,0)
 S RETURN(12)=+$P($G(CTXT),";",4)    ; should comments display?
"RTN","ORQQPL1",173,0)
 K GMPLVIEW,GMPARAM
"RTN","ORQQPL1",174,0)
 Q
"RTN","ORQQPL1",175,0)
 ;
"RTN","ORQQPL1",176,0)
CLINUSER(ORDUZ) ;is this a clinical user?
"RTN","ORQQPL1",177,0)
 N ORUSER
"RTN","ORQQPL1",178,0)
 S ORUSER=0
"RTN","ORQQPL1",179,0)
 I $D(^XUSEC("ORES",ORDUZ)) S ORUSER=1
"RTN","ORQQPL1",180,0)
 I $D(^XUSEC("ORELSE",ORDUZ)) S ORUSER=1
"RTN","ORQQPL1",181,0)
 I $D(^XUSEC("PROVIDER",ORDUZ)) S ORUSER=1
"RTN","ORQQPL1",182,0)
 Q ORUSER
"RTN","ORQQPL1",183,0)
 ;
"RTN","ORQQPL1",184,0)
INITPT(RETURN,DFN) ; GET PATIENT PARAMETERS
"RTN","ORQQPL1",185,0)
 Q:+$G(DFN)=0
"RTN","ORQQPL1",186,0)
 N GMPSC,GMPAGTOR,GMPION,GMPGULF,GMPHNC,GMPMST,GMPCV,GMPSHD
"RTN","ORQQPL1",187,0)
 ;
"RTN","ORQQPL1",188,0)
 S RETURN(0)=DUZ(2) ; facility #
"RTN","ORQQPL1",189,0)
 D DEM^VADPT ; get death indicator
"RTN","ORQQPL1",190,0)
 S RETURN(1)=$G(VADM(6)) ; death indicator
"RTN","ORQQPL1",191,0)
 D VADPT^GMPLX1(DFN) ; get eligibilities
"RTN","ORQQPL1",192,0)
 S RETURN(2)=$P(GMPSC,U) ; service connected
"RTN","ORQQPL1",193,0)
 S RETURN(3)=$G(GMPAGTOR) ; agent orange exposure
"RTN","ORQQPL1",194,0)
 S RETURN(4)=$G(GMPION) ; ionizing radiation exposure
"RTN","ORQQPL1",195,0)
 S RETURN(5)=$G(GMPGULF) ; gulf war exposure
"RTN","ORQQPL1",196,0)
 S RETURN(6)=VA("BID") ; need this to reconstitute GMPDFN on return
"RTN","ORQQPL1",197,0)
 S RETURN(7)=$G(GMPHNC) ; head/neck cancer
"RTN","ORQQPL1",198,0)
 S RETURN(8)=$G(GMPMST) ; MST
"RTN","ORQQPL1",199,0)
 S RETURN(9)=$G(GMPCV) ; CV
"RTN","ORQQPL1",200,0)
 S RETURN(10)=$G(GMPSHD) ; SHAD
"RTN","ORQQPL1",201,0)
 Q
"RTN","ORQQPL1",202,0)
 ;
"RTN","ORQQPL1",203,0)
PROVSRCH(LST,FLAG,N,FROM,PART) ; Get candidate Rroviders from person file
"RTN","ORQQPL1",204,0)
 N LV,NS,RV,IEN
"RTN","ORQQPL1",205,0)
 S RV=$NAME(LV("DILIST","ID"))
"RTN","ORQQPL1",206,0)
 IF +$G(N)=0 S N=50
"RTN","ORQQPL1",207,0)
 S FLAG=$G(FLAG),N=$G(N),FROM=$G(FROM),PART=$G(PART)
"RTN","ORQQPL1",208,0)
 D LIST^DIC(200,"",".01;1",FLAG,N,FROM,PART,"","","","LV")
"RTN","ORQQPL1",209,0)
 S NS=""
"RTN","ORQQPL1",210,0)
 F  S NS=$O(LV("DILIST",1,NS)) Q:NS=""  D
"RTN","ORQQPL1",211,0)
 . S IEN=""
"RTN","ORQQPL1",212,0)
 . S IEN=$O(^VA(200,"B",@RV@(NS,.01),IEN)) ; compliments of PROV^ORQPTQ
"RTN","ORQQPL1",213,0)
 . S LST(NS)=IEN_U_@RV@(NS,.01)  ; initials_U_@RV@(NS,1)
"RTN","ORQQPL1",214,0)
 Q
"RTN","ORQQPL1",215,0)
 ;
"RTN","ORQQPL1",216,0)
CLINSRCH(Y,X) ; Get LIST OF CLINICS
"RTN","ORQQPL1",217,0)
 ; Note: This comes from CLIN^ORQPTQ2, where it was commented out in place of
"RTN","ORQQPL1",218,0)
 ; a call to ^XPAR. I would have just used CLIN^ORQPTQ2, but it didn't work - at
"RTN","ORQQPL1",219,0)
 ; least on SLC OEX directory.
"RTN","ORQQPL1",220,0)
 ; X has no purpose other than to satisfy apparent rpc and tcallv requirement for args
"RTN","ORQQPL1",221,0)
 N I,NAME,IEN
"RTN","ORQQPL1",222,0)
 S I=1,IEN=0,NAME=""
"RTN","ORQQPL1",223,0)
 ;access to SC global granted under DBIA #518:
"RTN","ORQQPL1",224,0)
 F  S NAME=$O(^SC("B",NAME)) Q:NAME=""  S IEN=$O(^SC("B",NAME,0)) D
"RTN","ORQQPL1",225,0)
 . I $P(^SC(IEN,0),"^",3)="C" S Y(I)=IEN_"^"_NAME,I=I+1
"RTN","ORQQPL1",226,0)
 Q
"RTN","ORQQPL1",227,0)
 ;
"RTN","ORQQPL1",228,0)
SRVCSRCH(Y,FROM,DIR,ALL) ; GET LIST OF SERVICES
"RTN","ORQQPL1",229,0)
 N I,IEN,CNT S I=0,CNT=44
"RTN","ORQQPL1",230,0)
 F  Q:I=CNT  S FROM=$O(^DIC(49,"B",FROM),DIR) Q:FROM=""  D
"RTN","ORQQPL1",231,0)
 . S IEN=$O(^DIC(49,"B",FROM,0)) I '$G(ALL),$P(^DIC(49,IEN,0),U,9)'="C" Q
"RTN","ORQQPL1",232,0)
 . S I=I+1,Y(I)=IEN_"^"_FROM
"RTN","ORQQPL1",233,0)
 Q
"RTN","ORQQPL1",234,0)
 ;
"RTN","ORQQPL1",235,0)
DUP(Y,DFN,TERM,TEXT) ;Check for duplicate problem
"RTN","ORQQPL1",236,0)
 N ACTIVE,%
"RTN","ORQQPL1",237,0)
 S %=$$DUPL^GMPLAPI2(.Y,DFN,TERM,TEXT,0)
"RTN","ORQQPL1",238,0)
 Q:Y=0 
"RTN","ORQQPL1",239,0)
 S %=$$ACTIVE^GMPLAPI2(.ACTIVE,Y)
"RTN","ORQQPL1",240,0)
 S Y=Y_U_$S(ACTIVE:"A",1:"I")
"RTN","ORQQPL1",241,0)
 Q
"RTN","ORQQPL2")
0^3^B8467707
"RTN","ORQQPL2",1,0)
ORQQPL2 ; ALB/PDR/REV - RPCs FOR CPRS GUI IMPLEMENTATION ; 03/18/13
"RTN","ORQQPL2",2,0)
 ;;3.0;ORDER ENTRY/RESULTS REPORTING;**10,260002**;Dec 17, 1997;Build 16
"RTN","ORQQPL2",3,0)
 ;
"RTN","ORQQPL2",4,0)
 ; -------------- GET HISTORY FOR DETAIL DISPLAY ----------------------
"RTN","ORQQPL2",5,0)
 ;
"RTN","ORQQPL2",6,0)
HIST(RETURN,GMPIFN) ; GET AUDIT HISTORY
"RTN","ORQQPL2",7,0)
 ; taken from EN^GMPLDISP
"RTN","ORQQPL2",8,0)
 N S,ORDT,TXT,I,L,GMPDT,RET,AUDIT,LCNT,%,AID
"RTN","ORQQPL2",9,0)
 S LCNT=0,AID=0
"RTN","ORQQPL2",10,0)
 S %=$$GETHIST^GMPLHIST(.RET,GMPIFN)
"RTN","ORQQPL2",11,0)
 F  S AID=$O(RET(AID)) Q:AID'>0  D
"RTN","ORQQPL2",12,0)
 . S %=$$AUDET^GMPLHIST(.AUDIT,RET(AID))
"RTN","ORQQPL2",13,0)
 . D DT^GMPLDISP(.GMPDT,.LCNT,.AUDIT)
"RTN","ORQQPL2",14,0)
 I '$D(GMPDT) D  Q  ;BAIL OUT - NO CHANGES
"RTN","ORQQPL2",15,0)
 . S RETURN(0)="NONE"
"RTN","ORQQPL2",16,0)
 ;         Transfer data and clean up for return to GUI
"RTN","ORQQPL2",17,0)
 S S="",I=0,TXT=""
"RTN","ORQQPL2",18,0)
 F  S S=$O(GMPDT(S)) Q:S=""  D
"RTN","ORQQPL2",19,0)
 . S L=GMPDT(S,0)
"RTN","ORQQPL2",20,0)
 . I $L(L,": ")>1 D  Q  ; does line begin with date? (hope ": " can't be part of text)
"RTN","ORQQPL2",21,0)
 .. D FLUSH(.RETURN,.I)
"RTN","ORQQPL2",22,0)
 .. S ORDT=$P(L,": ") ; get new date
"RTN","ORQQPL2",23,0)
 .. S TXT=$$STRIP($P(L,": ",2,999)) ; start new text string
"RTN","ORQQPL2",24,0)
 . S TXT=TXT_" "_$$STRIP(L)  ; line does not begin with date, so add to existing text line
"RTN","ORQQPL2",25,0)
 I '$D(RETURN(0)) S RETURN(0)=I
"RTN","ORQQPL2",26,0)
 D FLUSH(.RETURN,.I)
"RTN","ORQQPL2",27,0)
 Q 
"RTN","ORQQPL2",28,0)
 ;
"RTN","ORQQPL2",29,0)
FLUSH(RETURN,I) ; FLUSH FORMATTED AUDIT STRING
"RTN","ORQQPL2",30,0)
  I I'=0 D  ; do we have a text string built?
"RTN","ORQQPL2",31,0)
 . S RETURN(I)=$$STRIP(ORDT)_U_TXT  ; return date and text
"RTN","ORQQPL2",32,0)
  S I=I+1
"RTN","ORQQPL2",33,0)
 Q
"RTN","ORQQPL2",34,0)
 ;
"RTN","ORQQPL2",35,0)
STRIP(VAL) ; STRIP LEADING SPACES FROM VALUES
"RTN","ORQQPL2",36,0)
 N J
"RTN","ORQQPL2",37,0)
 F J=1:1 Q:$E(VAL,J)'=" "
"RTN","ORQQPL2",38,0)
 Q $E(VAL,J,9999)
"RTN","ORQQPL2",39,0)
 ;
"RTN","ORQQPL2",40,0)
 ; ------------------- DELETE A PROBLEM FROM LIST ---------------------
"RTN","ORQQPL2",41,0)
 ;
"RTN","ORQQPL2",42,0)
DELETE(RESULT,GMPIFN,GMPROV,GMPVAMC,REASON) ; DELETE A PROBLEM
"RTN","ORQQPL2",43,0)
 S %=$$DELETE^GMPLAPI2(.RESULT,GMPIFN,GMPROV,REASON)
"RTN","ORQQPL2",44,0)
 Q
"RTN","ORQQPL2",45,0)
 ; ------------------ REPLACE REMOVED PROBLEM ----------------------
"RTN","ORQQPL2",46,0)
 ;
"RTN","ORQQPL2",47,0)
REPLACE(RETURN,DA) ; -- replace problem on patient's list
"RTN","ORQQPL2",48,0)
 S %=$$UNDELETE^GMPLAPI4(.RETURN,DA)
"RTN","ORQQPL2",49,0)
 Q
"RTN","ORQQPL2",50,0)
 ;
"RTN","ORQQPL2",51,0)
 ; -------------------  VERIFY A PROBLEM ------------------------
"RTN","ORQQPL2",52,0)
 ;
"RTN","ORQQPL2",53,0)
VERIFY(RETURN,GMPIFN) ; -- verify a transcribed problem
"RTN","ORQQPL2",54,0)
 ; RETURN:  ;(consistent with UPDATE function)
"RTN","ORQQPL2",55,0)
 ;   SUCCESS:
"RTN","ORQQPL2",56,0)
 ;     RETURN>0, RETURN(0)=""
"RTN","ORQQPL2",57,0)
 ;   FAILURE:
"RTN","ORQQPL2",58,0)
 ;      RETURN<0, RETURN(0)=verbose error message
"RTN","ORQQPL2",59,0)
 S %=$$VERIFY^GMPLAPI2(.RETURN,GMPIFN)
"RTN","ORQQPL2",60,0)
 I RETURN=1 S RETURN(0)=""
"RTN","ORQQPL2",61,0)
 E  S RETURN=-1,RETURN(0)=$P(RETURN(0),"^",2)
"RTN","ORQQPL2",62,0)
 Q
"RTN","ORQQPL2",63,0)
INACT(RETURN,GMPIFN) ; -- inactivate a problem
"RTN","ORQQPL2",64,0)
 ; RETURN:  ;(consistent with UPDATE function)
"RTN","ORQQPL2",65,0)
 ;   SUCCESS:
"RTN","ORQQPL2",66,0)
 ;     RETURN>0, RETURN(0)=""
"RTN","ORQQPL2",67,0)
 ;   FAILURE:
"RTN","ORQQPL2",68,0)
 ;      RETURN<0, RETURN(0)=verbose error message
"RTN","ORQQPL2",69,0)
 S %=$$INACTV^GMPLAPI2(.RETURN,GMPIFN,DUZ,"","")
"RTN","ORQQPL2",70,0)
 I RETURN=1 S RETURN(0)=""
"RTN","ORQQPL2",71,0)
 E  S RETURN=-1,RETURN(0)=$P(RETURN(0),"^",2)
"RTN","ORQQPL2",72,0)
 Q
"RTN","ORQQPL2",73,0)
OLDCOMM(ORY,PIFN) ; Return comments for a problem - SINGLE DIVISION!
"RTN","ORQQPL2",74,0)
 ;N FAC,NIFN,NOTE,NOTECNT
"RTN","ORQQPL2",75,0)
 ;S NOTECNT=0
"RTN","ORQQPL2",76,0)
 ;S FAC=$O(^AUPNPROB(PIFN,11,"B",+$G(DUZ(2)),0)) Q:'FAC
"RTN","ORQQPL2",77,0)
 ;F NIFN=0:0 S NIFN=$O(^AUPNPROB(PIFN,11,FAC,11,"B",NIFN)) Q:NIFN'>0  D
"RTN","ORQQPL2",78,0)
 ;. Q:$P($G(^AUPNPROB(PIFN,11,FAC,11,NIFN,0)),U,4)'="A"
"RTN","ORQQPL2",79,0)
 ;. S NOTE=$P($G(^AUPNPROB(PIFN,11,FAC,11,NIFN,0)),U,3)
"RTN","ORQQPL2",80,0)
 ;. S NOTECNT=NOTECNT+1,ORY(NOTECNT)=NOTE
"RTN","ORQQPL2",81,0)
 Q
"RTN","ORQQPL2",82,0)
GETCOMM(ORY,PIFN)       ; Return comments for a problem - MULTI-DIVISIONAL
"RTN","ORQQPL2",83,0)
 S %=$$NOTES^GMPLAPI3(.ORY,PIFN)
"RTN","ORQQPL2",84,0)
 Q
"RTN","ORQQPL2",85,0)
SAVEVIEW(Y,GMPLVIEW) ; -- save new view in File #200/Field #125
"RTN","ORQQPL2",86,0)
 N TMP
"RTN","ORQQPL2",87,0)
 Q:'$D(GMPLVIEW)
"RTN","ORQQPL2",88,0)
 S TMP=$P($G(^VA(200,DUZ,125)),U,2,999)
"RTN","ORQQPL2",89,0)
 S ^VA(200,DUZ,125)=$P(GMPLVIEW,U,1)_U_TMP
"RTN","ORQQPL2",90,0)
 S TMP=$$GET^XPAR(DUZ_";VA(200,","ORCH CONTEXT PROBLEMS",1)
"RTN","ORQQPL2",91,0)
 I TMP'="" D  Q
"RTN","ORQQPL2",92,0)
 . D CHG^XPAR(DUZ_";VA(200,","ORCH CONTEXT PROBLEMS",1,$P(GMPLVIEW,U,2))
"RTN","ORQQPL2",93,0)
 D ADD^XPAR(DUZ_";VA(200,","ORCH CONTEXT PROBLEMS",1,$P(GMPLVIEW,U,2))
"RTN","ORQQPL2",94,0)
 Q
"RTN","ORQQPL2",95,0)
 ;
"RTN","ORQQPL3")
0^4^B18738041
"RTN","ORQQPL3",1,0)
ORQQPL3 ; ALB/PDR/REV - Problem List RPCs ; 8/9/13
"RTN","ORQQPL3",2,0)
 ;;3.0;ORDER ENTRY/RESULTS REPORTING;**10,148,173,243,280,260002**;Dec 17, 1997;Build 16
"RTN","ORQQPL3",3,0)
 ;
"RTN","ORQQPL3",4,0)
 ;---------------- LIST PATIENT PROBLEMS ------------------------
"RTN","ORQQPL3",5,0)
 ;
"RTN","ORQQPL3",6,0)
PROBL(ROOT,DFN,CONTEXT)        ;  GET LIST OF PATIENT PROBLEMS
"RTN","ORQQPL3",7,0)
 N DIWL,DIWR,DIWF
"RTN","ORQQPL3",8,0)
 N ST,ORI,ORX,LCNT,NUM
"RTN","ORQQPL3",9,0)
 S (LCNT,NUM)=0
"RTN","ORQQPL3",10,0)
 S DIWL=1,DIWR=48,DIWF="C48"
"RTN","ORQQPL3",11,0)
 S CONTEXT=";;"_$G(CONTEXT)
"RTN","ORQQPL3",12,0)
 I CONTEXT=";;" S CONTEXT=";;A"
"RTN","ORQQPL3",13,0)
 S ST=$P(CONTEXT,";",3)
"RTN","ORQQPL3",14,0)
 ;
"RTN","ORQQPL3",15,0)
 I ST="R" D DELLIST(.ROOT,+DFN) ; show deleted only
"RTN","ORQQPL3",16,0)
 I ST'="R"  D LIST(.ROOT,+DFN,ST) ; show others - don't trust ELSE here
"RTN","ORQQPL3",17,0)
 ;
"RTN","ORQQPL3",18,0)
 I ROOT(0)<1 D
"RTN","ORQQPL3",19,0)
 . S LCNT=1
"RTN","ORQQPL3",20,0)
 . S ROOT(1)="     "_$$PAD^ORCHTAB("No data available.",49)_"|"
"RTN","ORQQPL3",21,0)
 Q
"RTN","ORQQPL3",22,0)
 ;
"RTN","ORQQPL3",23,0)
 ;
"RTN","ORQQPL3",24,0)
LIST(GMPL,GMPDFN,GMPSTAT)       ; -- Returns list of problems for patient GMPDFN
"RTN","ORQQPL3",25,0)
 ;    in GMPL(#)=ifn^status^description^ICD^onset^last modified^SC^SpExp^Condition^Loc^
"RTN","ORQQPL3",26,0)
 ;                          loc.type^prov^service
"RTN","ORQQPL3",27,0)
 ;     & GMPL(0)=number of problems returned
"RTN","ORQQPL3",28,0)
 ; This is virtually same as LIST^GMPLUTL2 except that it appends the
"RTN","ORQQPL3",29,0)
 ; condition - T)ranscribed or P)ermanent,location,loc type,provider, service.
"RTN","ORQQPL3",30,0)
 ;
"RTN","ORQQPL3",31,0)
 N GMPREV,GMPARAM,%
"RTN","ORQQPL3",32,0)
 Q:$G(GMPDFN)'>0
"RTN","ORQQPL3",33,0)
 D GET^GMPLSITE(.GMPARAM)
"RTN","ORQQPL3",34,0)
 S %=$$LIST^GMPLAPI4(.GMPL,GMPDFN,GMPSTAT,"","",GMPARAM("REV"),0)
"RTN","ORQQPL3",35,0)
 Q
"RTN","ORQQPL3",36,0)
 ;
"RTN","ORQQPL3",37,0)
 ;
"RTN","ORQQPL3",38,0)
 ;------------------------------------- GET LIST OF DELETED PROBLEMS -----------------------------
"RTN","ORQQPL3",39,0)
 ;
"RTN","ORQQPL3",40,0)
DELLIST(RETURN,GMPDFN) ; GET LIST OF DELETED PROBLEMS
"RTN","ORQQPL3",41,0)
 ; see GETPLIST^GMPLMGR1 and LIST^GMPUTL2
"RTN","ORQQPL3",42,0)
 N %
"RTN","ORQQPL3",43,0)
 K RETURN
"RTN","ORQQPL3",44,0)
 S %=$$LIST^GMPLAPI4(.GMPL,GMPDFN,"R","","",0,0)
"RTN","ORQQPL3",45,0)
 F I=1:1:GMPL D
"RTN","ORQQPL3",46,0)
 . S $P(GMPL(I),"^",10)=$P($P(GMPL(I),"^",10),";")
"RTN","ORQQPL3",47,0)
 . S $P(GMPL(I),"^",12)=$P($P(GMPL(I),"^",12),";")
"RTN","ORQQPL3",48,0)
 M RETURN=GMPL
"RTN","ORQQPL3",49,0)
 Q
"RTN","ORQQPL3",50,0)
 ;
"RTN","ORQQPL3",51,0)
 ;
"RTN","ORQQPL3",52,0)
 ; ----------------------- GET USER PROBLEM CATEGORIES --------------
"RTN","ORQQPL3",53,0)
 ;
"RTN","ORQQPL3",54,0)
CAT(TMP,ORDUZ,CLIN) ; Get user category list
"RTN","ORQQPL3",55,0)
 N GSEQ,GCNT,IFN,TG,GMPLSLST,RETURN,%
"RTN","ORQQPL3",56,0)
 ; S TG=$NAME(^TMP("GMPLMENU",$J)) ; put list in global for testing
"RTN","ORQQPL3",57,0)
 S TG=$NAME(TMP) ; put list in local
"RTN","ORQQPL3",58,0)
 K @TG
"RTN","ORQQPL3",59,0)
 S (GSEQ,GCNT)=0
"RTN","ORQQPL3",60,0)
 ;
"RTN","ORQQPL3",61,0)
 S GMPLSLST=$$GETUSLST(DUZ,CLIN)  ; get approp list for user
"RTN","ORQQPL3",62,0)
 ; Build multiple of category\problems
"RTN","ORQQPL3",63,0)
 ; Iterate categories
"RTN","ORQQPL3",64,0)
 S %=$$GETLIST^GMPLAPI1(.RETURN,+GMPLSLST)
"RTN","ORQQPL3",65,0)
 F  S GSEQ=$O(RETURN("SEQ",GSEQ)) Q:GSEQ'>0  D
"RTN","ORQQPL3",66,0)
 . S IFN=RETURN("SEQ",GSEQ)
"RTN","ORQQPL3",67,0)
 . S GCNT=GCNT+1
"RTN","ORQQPL3",68,0)
 . S @TG@(GCNT)=$P(RETURN(IFN),U,2,4) ; put category into temp global
"RTN","ORQQPL3",69,0)
 Q
"RTN","ORQQPL3",70,0)
 ;
"RTN","ORQQPL3",71,0)
GETUSLST(ORDUZ,CLIN) ; GET AN APPROPRIATE CATEGORY LIST FOR THE USER
"RTN","ORQQPL3",72,0)
 N GMPLSLST,RETURN,%
"RTN","ORQQPL3",73,0)
 S %=$$GETULST^GMPLAPI6(.RETURN,DUZ)
"RTN","ORQQPL3",74,0)
 S GMPLSLST=RETURN
"RTN","ORQQPL3",75,0)
 I 'GMPLSLST,CLIN S %=$$GETCLST^GMPLAPI6(.RETURN,+CLIN) S GMPLSLST=RETURN
"RTN","ORQQPL3",76,0)
 Q +GMPLSLST
"RTN","ORQQPL3",77,0)
 ;
"RTN","ORQQPL3",78,0)
 ;----------------------- USER PROBLEM LIST --------------------------
"RTN","ORQQPL3",79,0)
 ;
"RTN","ORQQPL3",80,0)
PROB(TMP,GROUP) ; Get user problem list for given group
"RTN","ORQQPL3",81,0)
 N PSEQ,PCNT,IFN,TG,CODE,ORICD186,RETURN,%
"RTN","ORQQPL3",82,0)
 ; S TG=$NAME(^TMP("GMPLMENU",$J)) ; put list in global for testing
"RTN","ORQQPL3",83,0)
 S TG=$NAME(TMP) ; put list in local
"RTN","ORQQPL3",84,0)
 K @TG
"RTN","ORQQPL3",85,0)
 S ORICD186=$$PATCH^XPDUTL("ICD*18.0*6")
"RTN","ORQQPL3",86,0)
 ;
"RTN","ORQQPL3",87,0)
 ; iterate through problems in category
"RTN","ORQQPL3",88,0)
 S %=$$GETCAT^GMPLAPI1(.RETURN,+GROUP)
"RTN","ORQQPL3",89,0)
 S (PSEQ,PCNT)=0
"RTN","ORQQPL3",90,0)
 F  S PSEQ=$O(RETURN("SEQ",PSEQ)) Q:PSEQ'>0  D
"RTN","ORQQPL3",91,0)
 . S IFN=RETURN("SEQ",PSEQ)
"RTN","ORQQPL3",92,0)
 . ; SEE DD for GMPL(125.12,4 :
"RTN","ORQQPL3",93,0)
 . ; "...code which is to be displayed... generally assumed to be ICD"
"RTN","ORQQPL3",94,0)
 . I +ORICD186,$D(RETURN(IFN,"CODE"))'>0 Q
"RTN","ORQQPL3",95,0)
 . S CODE=RETURN(IFN,"CODE")
"RTN","ORQQPL3",96,0)
 . I $P(CODE,U,2)=1 Q
"RTN","ORQQPL3",97,0)
 . S PCNT=PCNT+1
"RTN","ORQQPL3",98,0)
 . ; RETURN:
"RTN","ORQQPL3",99,0)
 . ; PROBLEM^DISPLAY TEXT^CODE^CODE IFN
"RTN","ORQQPL3",100,0)
 . I +ORICD186 D
"RTN","ORQQPL3",101,0)
 . . S @TG@(PCNT)=$P(RETURN(IFN),U,2,4)_U_$$CODEN^ICDCODE($P(CODE,U,1),80)
"RTN","ORQQPL3",102,0)
 . E  D
"RTN","ORQQPL3",103,0)
 . . S @TG@(PCNT)=$P(RETURN(IFN),U,2,4)_U_$$ICDCODE($P(CODE,U,1))
"RTN","ORQQPL3",104,0)
 Q
"RTN","ORQQPL3",105,0)
 ;
"RTN","ORQQPL3",106,0)
ICDCODE(COD)    ; RETURN INTERNAL ICD FOR EXTERNAL CODE  (obsolete after CSV patches released - RV)
"RTN","ORQQPL3",107,0)
 N CODIEN
"RTN","ORQQPL3",108,0)
 I COD="" Q ""
"RTN","ORQQPL3",109,0)
 S CODIEN=$$CODEN^ICDCODE($P(COD,U),80) ;ICR #3990
"RTN","ORQQPL3",110,0)
 Q CODIEN
"RTN","ORQQPL3",111,0)
 ;
"RTN","ORQQPL3",112,0)
 ;------------------ Filter Providers ---------------------
"RTN","ORQQPL3",113,0)
 ;
"RTN","ORQQPL3",114,0)
GETRPRV(RETURN,INP) ; GET LIST OF RESPONSIBLE PROVIDERS FROM PRBLM LIST
"RTN","ORQQPL3",115,0)
 ; RETURN - aa list of responsible providers from which to select for filtering
"RTN","ORQQPL3",116,0)
 ; INP - array of problem list providers to select from
"RTN","ORQQPL3",117,0)
 ;
"RTN","ORQQPL3",118,0)
 N S
"RTN","ORQQPL3",119,0)
 S S=""
"RTN","ORQQPL3",120,0)
 F I=1:1 S S=$O(INP(S)) Q:S=""  D
"RTN","ORQQPL3",121,0)
 . I INP(S)'="",$G(^VA(200,INP(S),0))'="" D  Q  ; get next
"RTN","ORQQPL3",122,0)
 .. S RETURN(I)=INP(S)_U_$P(^VA(200,INP(S),0),U)
"RTN","ORQQPL3",123,0)
 S RETURN(0)="-1"_U_"<None recorded>" ; return empty provider
"RTN","ORQQPL3",124,0)
 Q
"RTN","ORQQPL3",125,0)
 ;
"RTN","ORQQPL3",126,0)
 ;---------------------------------------------------- GET FILTERED CLINIC LIST ------------------------
"RTN","ORQQPL3",127,0)
 ;
"RTN","ORQQPL3",128,0)
GETCLIN(RETURN,INP) ; Get FILTERED LIST OF CLINICS
"RTN","ORQQPL3",129,0)
 ; RETURN NAMES FOR LIST OF CLINICS PASSED IN
"RTN","ORQQPL3",130,0)
 N I,S
"RTN","ORQQPL3",131,0)
 S S=""
"RTN","ORQQPL3",132,0)
 F I=1:1 S S=$O(INP(S)) Q:S=""  D
"RTN","ORQQPL3",133,0)
 . I INP(S)'="",$G(^SC(INP(S),0))'="" D  Q  ; get next
"RTN","ORQQPL3",134,0)
 .. S RETURN(I)=INP(S)_U_$P(^SC(INP(S),0),U,1)
"RTN","ORQQPL3",135,0)
 ;. S RETURN(I)="-1"_U_"None" ; return empty location
"RTN","ORQQPL3",136,0)
 Q
"RTN","ORQQPL3",137,0)
 ;
"RTN","ORQQPL3",138,0)
GETSRVC(RETURN,INP) ; GET FILTERED LIST OF INPATIENT SERVICES
"RTN","ORQQPL3",139,0)
 ; RETURN NAMES FOR LIST OF IEN PASSED IN
"RTN","ORQQPL3",140,0)
 N I,S
"RTN","ORQQPL3",141,0)
 S S=""
"RTN","ORQQPL3",142,0)
 F I=1:1 S S=$O(INP(S)) Q:S=""  D
"RTN","ORQQPL3",143,0)
 . I INP(S)'="",$G(^DIC(49,INP(S),0))'="" D  Q  ; get next
"RTN","ORQQPL3",144,0)
 .. S RETURN(I)=INP(S)_U_$P(^DIC(49,INP(S),0),U,1)
"RTN","ORQQPL3",145,0)
 ;. S RETURN(I)="-1"_U_"None" ; return empty service
"RTN","ORQQPL3",146,0)
 Q
"VER")
8.0^22.0
**INSTALL NAME**
PX*1.0*260002
"BLD",9048,0)
PX*1.0*260002^PCE PATIENT CARE ENCOUNTER^0^3130902^y
"BLD",9048,1,0)
^^1^1^3130328^
"BLD",9048,1,1,0)
PROBLEM LIST REFACTORING
"BLD",9048,4,0)
^9.64PA^^
"BLD",9048,6.3)
16
"BLD",9048,"KRN",0)
^9.67PA^779.2^20
"BLD",9048,"KRN",.4,0)
.4
"BLD",9048,"KRN",.401,0)
.401
"BLD",9048,"KRN",.402,0)
.402
"BLD",9048,"KRN",.403,0)
.403
"BLD",9048,"KRN",.5,0)
.5
"BLD",9048,"KRN",.84,0)
.84
"BLD",9048,"KRN",3.6,0)
3.6
"BLD",9048,"KRN",3.8,0)
3.8
"BLD",9048,"KRN",9.2,0)
9.2
"BLD",9048,"KRN",9.8,0)
9.8
"BLD",9048,"KRN",9.8,"NM",0)
^9.68A^4^4
"BLD",9048,"KRN",9.8,"NM",1,0)
PXCAPL^^0^B33533378
"BLD",9048,"KRN",9.8,"NM",2,0)
PXCAPL1^^0^B6027875
"BLD",9048,"KRN",9.8,"NM",3,0)
PXCAPL2^^0^B8925718
"BLD",9048,"KRN",9.8,"NM",4,0)
PXCAPOV^^0^B38051436
"BLD",9048,"KRN",9.8,"NM","B","PXCAPL",1)

"BLD",9048,"KRN",9.8,"NM","B","PXCAPL1",2)

"BLD",9048,"KRN",9.8,"NM","B","PXCAPL2",3)

"BLD",9048,"KRN",9.8,"NM","B","PXCAPOV",4)

"BLD",9048,"KRN",19,0)
19
"BLD",9048,"KRN",19.1,0)
19.1
"BLD",9048,"KRN",101,0)
101
"BLD",9048,"KRN",409.61,0)
409.61
"BLD",9048,"KRN",771,0)
771
"BLD",9048,"KRN",779.2,0)
779.2
"BLD",9048,"KRN",870,0)
870
"BLD",9048,"KRN",8989.51,0)
8989.51
"BLD",9048,"KRN",8989.52,0)
8989.52
"BLD",9048,"KRN",8994,0)
8994
"BLD",9048,"KRN","B",.4,.4)

"BLD",9048,"KRN","B",.401,.401)

"BLD",9048,"KRN","B",.402,.402)

"BLD",9048,"KRN","B",.403,.403)

"BLD",9048,"KRN","B",.5,.5)

"BLD",9048,"KRN","B",.84,.84)

"BLD",9048,"KRN","B",3.6,3.6)

"BLD",9048,"KRN","B",3.8,3.8)

"BLD",9048,"KRN","B",9.2,9.2)

"BLD",9048,"KRN","B",9.8,9.8)

"BLD",9048,"KRN","B",19,19)

"BLD",9048,"KRN","B",19.1,19.1)

"BLD",9048,"KRN","B",101,101)

"BLD",9048,"KRN","B",409.61,409.61)

"BLD",9048,"KRN","B",771,771)

"BLD",9048,"KRN","B",779.2,779.2)

"BLD",9048,"KRN","B",870,870)

"BLD",9048,"KRN","B",8989.51,8989.51)

"BLD",9048,"KRN","B",8989.52,8989.52)

"BLD",9048,"KRN","B",8994,8994)

"MBREQ")
0
"PKG",111,-1)
1^1
"PKG",111,0)
PCE PATIENT CARE ENCOUNTER^PX^Patient Care Encounter
"PKG",111,22,0)
^9.49I^1^1
"PKG",111,22,1,0)
1.0^3051119^2960822^1
"PKG",111,22,1,"PAH",1,0)
260002^3130902
"PKG",111,22,1,"PAH",1,1,0)
^^1^1^3130902
"PKG",111,22,1,"PAH",1,1,1,0)
PROBLEM LIST REFACTORING
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
4
"RTN","PXCAPL")
0^1^B33533378
"RTN","PXCAPL",1,0)
PXCAPL ;ISL/dee & LEA/Chylton,SCK - Validates data from the PCE Device Interface into a call to update Problem List ;09/21/12
"RTN","PXCAPL",2,0)
 ;;1.0;PCE PATIENT CARE ENCOUNTER;**24,27,115,130,168,194,260002**;Aug 12, 1996;Build 16
"RTN","PXCAPL",3,0)
 Q
"RTN","PXCAPL",4,0)
 ;   PXCAPROB  Copy of a Problem node of the PXCA array
"RTN","PXCAPL",5,0)
 ;   PXCAPRV   Pointer to the provider (200)
"RTN","PXCAPL",6,0)
 ;   PXCAINDX  Count of the number of problems for one provider
"RTN","PXCAPL",7,0)
 ;   PXCAPL    The parameter array passed to Problem List
"RTN","PXCAPL",8,0)
 ;   PXCARES   The result back from Problem List
"RTN","PXCAPL",9,0)
 ;   PXCANUMB  Count of the total number of problems
"RTN","PXCAPL",10,0)
 ;
"RTN","PXCAPL",11,0)
 ;
"RTN","PXCAPL",12,0)
PROBLEM(PXCA,PXCABULD,PXCAERRS) ;
"RTN","PXCAPL",13,0)
 Q:'$D(PXCA("PROBLEM"))
"RTN","PXCAPL",14,0)
 I ($T(^GMPLAPI2)="")!($T(UPDATE^GMPLUTL)="") S PXCA("WARNING","PROBLEM",0,0,0)="Problem List Package is not installed" Q
"RTN","PXCAPL",15,0)
 N PXCAPROB,PXCAPRV,PXCAINDX,%
"RTN","PXCAPL",16,0)
 N PXCAITEM,PXCAITM2,VALID,PAT
"RTN","PXCAPL",17,0)
 S PXCAPRV=""
"RTN","PXCAPL",18,0)
 F  S PXCAPRV=$O(PXCA("PROBLEM",PXCAPRV)) Q:PXCAPRV']""  D
"RTN","PXCAPL",19,0)
 . I '$$ACTIVPRV^PXAPI(PXCAPRV,PXCADT) S PXCA("ERROR","PROBLEM",PXCAPRV,0,0)="Provider is not active or valid^"_PXCAPRV
"RTN","PXCAPL",20,0)
 . E  I PXCABULD!PXCAERRS D ANOTHPRV^PXCAPRV(PXCAPRV)
"RTN","PXCAPL",21,0)
 . S PXCAINDX=0
"RTN","PXCAPL",22,0)
 . F  S PXCAINDX=$O(PXCA("PROBLEM",PXCAPRV,PXCAINDX)) Q:PXCAINDX']""  D
"RTN","PXCAPL",23,0)
 .. S PXCAPROB=$G(PXCA("PROBLEM",PXCAPRV,PXCAINDX))
"RTN","PXCAPL",24,0)
 .. I PXCAPROB="" S PXCA("ERROR","PROBLEM",PXCAPRV,PXCAINDX,0)="PROBLEM data missing" Q
"RTN","PXCAPL",25,0)
 .. S PXCAITEM=$P(PXCAPROB,U,1),PXCAITM2=$L(PXCAITEM)
"RTN","PXCAPL",26,0)
 .. I PXCAITEM]"",PXCAITM2<2!(PXCAITM2>80) S PXCA("ERROR","PROBLEM",PXCAPRV,PXCAINDX,1)="Problem Name must be 2-80 Characters^"_PXCAITEM
"RTN","PXCAPL",27,0)
 .. S PXCAITEM=$P(PXCAPROB,U,2)
"RTN","PXCAPL",28,0)
 .. I PXCAITEM]"",PXCAITEM>DT!(PXCAITEM<1800000)!($P(+PXCAITEM,".")'=PXCAITEM)!(PXCAITEM>+$P($P(PXCA("ENCOUNTER"),"^"),".")) S PXCA("ERROR","PROBLEM",PXCAPRV,PXCAINDX,7)="Problem Onset Date is bad^"_PXCAITEM
"RTN","PXCAPL",29,0)
 .. S PXCAITEM=$P(PXCAPROB,U,3)
"RTN","PXCAPL",30,0)
 .. I '(PXCAITEM=1!(PXCAITEM=0)!(PXCAITEM="")) S PXCA("ERROR","PROBLEM",PXCAPRV,PXCAINDX,3)="Problem Active flag bad^"_PXCAITEM
"RTN","PXCAPL",31,0)
 .. E  I PXCAITEM="" S $P(PXCA("PROBLEM",PXCAPRV,PXCAINDX),U,3)=1
"RTN","PXCAPL",32,0)
 .. S PXCAITEM=$P(PXCAPROB,U,4)
"RTN","PXCAPL",33,0)
 .. I PXCAITEM]"",PXCAITEM>DT!(PXCAITEM<1800000)!($P(+PXCAITEM,".")'=PXCAITEM)!(PXCAITEM>+$P($P(PXCA("ENCOUNTER"),"^"),".")) S PXCA("ERROR","PROBLEM",PXCAPRV,PXCAINDX,7)="Problem Resolved Date is bad^"_PXCAITEM
"RTN","PXCAPL",34,0)
 .. S PXCAITEM=$P(PXCAPROB,U,5)
"RTN","PXCAPL",35,0)
 .. I '(PXCAITEM=1!(PXCAITEM=0)!(PXCAITEM="")) S PXCA("ERROR","PROBLEM",PXCAPRV,PXCAINDX,5)="SC flag bad^"_PXCAITEM
"RTN","PXCAPL",36,0)
 .. S PXCAITEM=$P(PXCAPROB,U,6)
"RTN","PXCAPL",37,0)
 .. I '(PXCAITEM=1!(PXCAITEM=0)!(PXCAITEM="")) S PXCA("ERROR","PROBLEM",PXCAPRV,PXCAINDX,6)="AO flag bad^"_PXCAITEM
"RTN","PXCAPL",38,0)
 .. S PXCAITEM=$P(PXCAPROB,U,7)
"RTN","PXCAPL",39,0)
 .. I '(PXCAITEM=1!(PXCAITEM=0)!(PXCAITEM="")) S PXCA("ERROR","PROBLEM",PXCAPRV,PXCAINDX,7)="IR flag bad^"_PXCAITEM
"RTN","PXCAPL",40,0)
 .. S PXCAITEM=$P(PXCAPROB,U,8)
"RTN","PXCAPL",41,0)
 .. I '(PXCAITEM=1!(PXCAITEM=0)!(PXCAITEM="")) S PXCA("ERROR","PROBLEM",PXCAPRV,PXCAINDX,8)="EC flag bad^"_PXCAITEM
"RTN","PXCAPL",42,0)
 .. ;PX*1*115 - ADD MST & HNC
"RTN","PXCAPL",43,0)
 .. S PXCAITEM=$P(PXCAPROB,U,13)
"RTN","PXCAPL",44,0)
 .. I '(PXCAITEM=1!(PXCAITEM=0)!(PXCAITEM="")) S PXCA("ERROR","PROBLEM",PXCAPRV,PXCAINDX,13)="MST flag bad^"_PXCAITEM
"RTN","PXCAPL",45,0)
 .. S PXCAITEM=$P(PXCAPROB,U,14)
"RTN","PXCAPL",46,0)
 .. I '(PXCAITEM=1!(PXCAITEM=0)!(PXCAITEM="")) S PXCA("ERROR","PROBLEM",PXCAPRV,PXCAINDX,14)="HNC flag bad^"_PXCAITEM
"RTN","PXCAPL",47,0)
 .. S PXCAITEM=$P(PXCAPROB,U,15)
"RTN","PXCAPL",48,0)
 .. I '(PXCAITEM=1!(PXCAITEM=0)!(PXCAITEM="")) S PXCA("ERROR","PROBLEM",PXCAPRV,PXCAINDX,14)="CV flag bad^"_PXCAITEM
"RTN","PXCAPL",49,0)
 .. S PXCAITEM=$P(PXCAPROB,U,16)
"RTN","PXCAPL",50,0)
 .. I '(PXCAITEM=1!(PXCAITEM=0)!(PXCAITEM="")) S PXCA("ERROR","PROBLEM",PXCAPRV,PXCAINDX,16)="PROJ 112/SHAD flag bad^"_PXCAITEM
"RTN","PXCAPL",51,0)
 .. S PXCAITEM=$P(PXCAPROB,U,9)
"RTN","PXCAPL",52,0)
 .. I PXCAITEM>0 D
"RTN","PXCAPL",53,0)
 ... S PXCADIQ1=$$ICDDX^ICDCODE(PXCAITEM)
"RTN","PXCAPL",54,0)
 ... I PXCADIQ1<0 S PXCA("ERROR","PROBLEM",PXCAPRV,PXCAINDX,9)="ICD9 Code not in file 80^"_PXCAITEM
"RTN","PXCAPL",55,0)
 ... E  I $P(PXCADIQ1,U,12),$P(PXCADIQ1,U,12)'>+PXCADT S PXCA("ERROR","PROBLEM",PXCAPRV,PXCAINDX,9)="ICD9 Code is INACTIVE^"_PXCAITEM
"RTN","PXCAPL",56,0)
 ... ;N DIC,DR,DA,DIQ,PXCADIQ1
"RTN","PXCAPL",57,0)
 ... ;S DIC=80
"RTN","PXCAPL",58,0)
 ... ;S DR=".01;102"
"RTN","PXCAPL",59,0)
 ... ;S DA=PXCAITEM
"RTN","PXCAPL",60,0)
 ... ;S DIQ="PXCADIQ1("
"RTN","PXCAPL",61,0)
 ... ;S DIQ(0)="I"
"RTN","PXCAPL",62,0)
 ... ;D EN^DIQ1
"RTN","PXCAPL",63,0)
 ... ;I $G(PXCADIQ1(80,DA,.01,"I"))="" S PXCA("ERROR","PROBLEM",PXCAPRV,PXCAINDX,9)="ICD9 Code not in file 80^"_PXCAITEM
"RTN","PXCAPL",64,0)
 ... ;E  I $G(PXCADIQ1(80,DA,102,"I")),PXCADIQ1(80,DA,102,"I")'>+PXCADT S PXCA("ERROR","PROBLEM",PXCAPRV,PXCAINDX,9)="ICD9 Code is INACTIVE^"_PXCAITEM
"RTN","PXCAPL",65,0)
 .. S PXCAITEM=$P(PXCAPROB,U,10)
"RTN","PXCAPL",66,0)
 .. I PXCAITEM]"" D
"RTN","PXCAPL",67,0)
 ... S %=$$VALID^GMPLAPI4(.VALID,PXCAITEM)
"RTN","PXCAPL",68,0)
 ... S %=$$PATIENT^GMPLAPI4(.PAT,PXCAITEM)
"RTN","PXCAPL",69,0)
 ... I 'VALID S PXCA("ERROR","PROBLEM",PXCAPRV,PXCAINDX,10)="Problem not in file 9000011^"_PXCAITEM
"RTN","PXCAPL",70,0)
 ... E  I PXCAPAT'=PAT S PXCA("ERROR","PROBLEM",PXCAPRV,PXCAINDX,10)="Problem in file 9000011 is for a different Patient^"_PXCAITEM
"RTN","PXCAPL",71,0)
 .. E  S PXCAITEM=$P(PXCAPROB,U,1) I PXCAITEM']"" S PXCA("ERROR","PROBLEM",PXCAPRV,PXCAINDX,1)="Problem Name required for a new Problem List entry^"_PXCAITEM
"RTN","PXCAPL",72,0)
 .. S PXCAITEM=$P(PXCAPROB,U,11),PXCAITM2=$L(PXCAITEM)
"RTN","PXCAPL",73,0)
 .. I PXCAITM2>60 S PXCA("ERROR","PROBLEM",PXCAPRV,PXCAINDX,11)="PROBLEM comment must be 1-60 Characters^"_PXCAITEM
"RTN","PXCAPL",74,0)
 .. ;
"RTN","PXCAPL",75,0)
 .. ;Clinical Lexicon Term
"RTN","PXCAPL",76,0)
 .. S PXCAITEM=$P(PXCAPROB,"^",12)
"RTN","PXCAPL",77,0)
 .. I PXCAITEM]"" D
"RTN","PXCAPL",78,0)
 ... I $D(^LEX(757.01)) D
"RTN","PXCAPL",79,0)
 .... I $D(^LEX(757.01,PXCAITEM,0))#2'=1 S PXCA("ERROR","PROBLEM",PXCAPRV,PXCAINDX,12)="Lexicon Utility term is not in file 757.01^"_PXCAITEM
"RTN","PXCAPL",80,0)
 .... E  S PXCACLEX=PXCAITEM
"RTN","PXCAPL",81,0)
 ... E  I $D(^GMP(757.01)) D
"RTN","PXCAPL",82,0)
 .... I $D(^GMP(757.01,PXCAITEM,0))#2'=1 S PXCA("ERROR","PROBLEM",PXCAPRV,PXCAINDX,12)="Clinical Lexicon Utility term is not in file 757.01^"_PXCAITEM
"RTN","PXCAPL",83,0)
 .... E  S PXCACLEX=PXCAITEM
"RTN","PXCAPL",84,0)
 ... E  S PXCA("ERROR","PROBLEM",PXCAPRV,PXCAINDX,12)="Lexicon Utility is not installed^"_PXCAITEM
"RTN","PXCAPL",85,0)
 ;
"RTN","PXCAPL",86,0)
 Q
"RTN","PXCAPL",87,0)
 ;
"RTN","PXCAPL1")
0^2^B6027875
"RTN","PXCAPL1",1,0)
PXCAPL1 ;ISL/dee & LEA/Chylton - Translates data from the PCE Device Interface into a call to update Problem List ;09/21/12
"RTN","PXCAPL1",2,0)
 ;;1.0;PCE PATIENT CARE ENCOUNTER;**33,115,130,168,260002**;Aug 12, 1996;Build 16
"RTN","PXCAPL1",3,0)
 Q
"RTN","PXCAPL1",4,0)
 ;   PXCAPROB  Copy of a Problem node of the PXCA array
"RTN","PXCAPL1",5,0)
 ;   PXCAPRV   Pointer to the provider (200)
"RTN","PXCAPL1",6,0)
 ;   PXCAINDX  Count of the number of problems for one provider
"RTN","PXCAPL1",7,0)
 ;   PXCAPL    The parameter array passed to Problem List
"RTN","PXCAPL1",8,0)
 ;   PXCARES   The result back from Problem List
"RTN","PXCAPL1",9,0)
 ;   PXCANUMB  Count of the total number of problems
"RTN","PXCAPL1",10,0)
 ;
"RTN","PXCAPL1",11,0)
PROBLIST ;Problem List
"RTN","PXCAPL1",12,0)
 Q:($T(^GMPLAPI2)="")!($T(UPDATE^GMPLUTL)="")
"RTN","PXCAPL1",13,0)
 N PXCAPRV,PXCAINDX,PXCANUMB
"RTN","PXCAPL1",14,0)
 S PXCANUMB=0
"RTN","PXCAPL1",15,0)
 S PXCAPRV=""
"RTN","PXCAPL1",16,0)
 F  S PXCAPRV=$O(PXCA("PROBLEM",PXCAPRV)) Q:PXCAPRV'>0  D
"RTN","PXCAPL1",17,0)
 . S PXCAINDX=0
"RTN","PXCAPL1",18,0)
 . F  S PXCAINDX=$O(PXCA("PROBLEM",PXCAPRV,PXCAINDX)) Q:PXCAINDX']""  D
"RTN","PXCAPL1",19,0)
 .. S PXCANUMB=PXCANUMB+1
"RTN","PXCAPL1",20,0)
 .. Q:$D(PXCA("ERROR","PROBLEM",PXCAPRV,PXCAINDX))
"RTN","PXCAPL1",21,0)
 .. N PXCAPROB,PXCAPL,PXCARES
"RTN","PXCAPL1",22,0)
 .. S PXCAPROB=PXCA("PROBLEM",PXCAPRV,PXCAINDX)
"RTN","PXCAPL1",23,0)
 .. S PXCAPL("PROBLEM")=$P(PXCAPROB,"^",10)
"RTN","PXCAPL1",24,0)
 .. S PXCAPL("NARRATIVE")=$P(PXCAPROB,"^",1)
"RTN","PXCAPL1",25,0)
 .. S PXCAPL("PATIENT")=PXCAPAT
"RTN","PXCAPL1",26,0)
 .. S PXCAPL("STATUS")=$S($P(PXCAPROB,"^",3)="1":"A",$P(PXCAPROB,"^",3)="0":"I",1:"A")
"RTN","PXCAPL1",27,0)
 .. S PXCAPL("PROVIDER")=PXCAPRV
"RTN","PXCAPL1",28,0)
 .. S PXCAPL("LOCATION")=PXCAHLOC
"RTN","PXCAPL1",29,0)
 .. S PXCAPL("SC")=$P(PXCAPROB,"^",5)
"RTN","PXCAPL1",30,0)
 .. S PXCAPL("AO")=$P(PXCAPROB,"^",6)
"RTN","PXCAPL1",31,0)
 .. S PXCAPL("IR")=$P(PXCAPROB,"^",7)
"RTN","PXCAPL1",32,0)
 .. S PXCAPL("EC")=$P(PXCAPROB,"^",8)
"RTN","PXCAPL1",33,0)
 .. ;PX*1*115 Add MST & HNC
"RTN","PXCAPL1",34,0)
 .. S PXCAPL("MST")=$P(PXCAPROB,"^",13)
"RTN","PXCAPL1",35,0)
 .. S PXCAPL("HNC")=$P(PXCAPROB,"^",14)
"RTN","PXCAPL1",36,0)
 .. S PXCAPL("CV")=$P(PXCAPROB,"^",15)
"RTN","PXCAPL1",37,0)
 .. S PXCAPL("SHAD")=$P(PXCAPROB,"^",16)
"RTN","PXCAPL1",38,0)
 .. S PXCAPL("DIAGNOSIS")=$P(PXCAPROB,"^",9)
"RTN","PXCAPL1",39,0)
 .. S PXCAPL("RESOLVED")=$P(PXCAPROB,"^",4)
"RTN","PXCAPL1",40,0)
 .. S PXCAPL("ONSET")=$P(PXCAPROB,"^",2)
"RTN","PXCAPL1",41,0)
 .. S PXCAPL("COMMENT")=$P(PXCAPROB,"^",11)
"RTN","PXCAPL1",42,0)
 .. S PXCAPL("LEXICON")=$P(PXCAPROB,"^",12)
"RTN","PXCAPL1",43,0)
 .. D UPDATE^GMPLUTL(.PXCAPL,.PXCARES)
"RTN","PXCAPL1",44,0)
 .. I $G(PXCARES)'>0 D
"RTN","PXCAPL1",45,0)
 ... I PXCARES(0)'="Duplicate problem" S PXKERROR("PL",PXCANUMB,0,0)="Problem Not Stored = "_$G(PXCARES(0))_"  For Provider = "_PXCAPRV_"  and index = "_PXCAINDX
"RTN","PXCAPL1",46,0)
 ... S PXCA("WARNING","PROBLEM",PXCAPRV,PXCAINDX,0)="PROBLEM Not Stored^"_$G(PXCARES(0))
"RTN","PXCAPL1",47,0)
 Q
"RTN","PXCAPL1",48,0)
 ;
"RTN","PXCAPL2")
0^3^B8925718
"RTN","PXCAPL2",1,0)
PXCAPL2 ;ISL/dee & LEA/Chylton - Translates data from the PCE Device Interface for "DIAGNOSIS/PROBLEM" into a call to update Problem List ;08/09/13
"RTN","PXCAPL2",2,0)
 ;;1.0;PCE PATIENT CARE ENCOUNTER;**33,115,130,168,260002**;Aug 12, 1996;Build 16
"RTN","PXCAPL2",3,0)
 Q
"RTN","PXCAPL2",4,0)
 ;   PXCADXPL  Copy of a Problem node of the PXCA array
"RTN","PXCAPL2",5,0)
 ;   PXCAPRV   Pointer to the provider (200)
"RTN","PXCAPL2",6,0)
 ;   PXCAINDX  Count of the number of problems for one provider
"RTN","PXCAPL2",7,0)
 ;   PXCAPL    The parameter array passed to Problem List
"RTN","PXCAPL2",8,0)
 ;   PXCARES   The result back from Problem List
"RTN","PXCAPL2",9,0)
 ;   PXCANUMB  Count of the total number of problems
"RTN","PXCAPL2",10,0)
 ;
"RTN","PXCAPL2",11,0)
PROBLIST ;Problem List
"RTN","PXCAPL2",12,0)
 Q:($T(^GMPLAPI2)="")!($T(UPDATE^GMPLUTL)="")
"RTN","PXCAPL2",13,0)
 N PXCAPRV,PXCAINDX,PXCANUMB
"RTN","PXCAPL2",14,0)
 S PXCANUMB=0
"RTN","PXCAPL2",15,0)
 S PXCAPRV=""
"RTN","PXCAPL2",16,0)
 F  S PXCAPRV=$O(PXCA("DIAGNOSIS/PROBLEM",PXCAPRV)) Q:PXCAPRV'>0  D
"RTN","PXCAPL2",17,0)
 . S PXCAINDX=0
"RTN","PXCAPL2",18,0)
 . F  S PXCAINDX=$O(PXCA("DIAGNOSIS/PROBLEM",PXCAPRV,PXCAINDX)) Q:PXCAINDX']""  D
"RTN","PXCAPL2",19,0)
 .. S PXCANUMB=PXCANUMB+1
"RTN","PXCAPL2",20,0)
 .. ;Quit if there is an error in this node
"RTN","PXCAPL2",21,0)
 .. Q:$D(PXCA("ERROR","DIAGNOSIS/PROBLEM",PXCAPRV,PXCAINDX))
"RTN","PXCAPL2",22,0)
 .. N PXCADXPL,PXCAPL,PXCARES
"RTN","PXCAPL2",23,0)
 .. S PXCADXPL=PXCA("DIAGNOSIS/PROBLEM",PXCAPRV,PXCAINDX)
"RTN","PXCAPL2",24,0)
 .. S PXCAPL("COMMENT")=$P($G(PXCA("DIAGNOSIS/PROBLEM",PXCAPRV,PXCAINDX,"NOTE")),"^",1)
"RTN","PXCAPL2",25,0)
 .. ;Quit if this is not a problem
"RTN","PXCAPL2",26,0)
 .. Q:"^^^"[$P(PXCADXPL,"^",5,8)&(PXCAPL("COMMENT")="")
"RTN","PXCAPL2",27,0)
 .. S PXCAPL("PATIENT")=PXCAPAT
"RTN","PXCAPL2",28,0)
 .. S PXCAPL("PROVIDER")=PXCAPRV
"RTN","PXCAPL2",29,0)
 .. S PXCAPL("LOCATION")=PXCAHLOC
"RTN","PXCAPL2",30,0)
 .. S PXCAPL("DIAGNOSIS")=$P(PXCADXPL,"^",1)
"RTN","PXCAPL2",31,0)
 .. S PXCAPL("LEXICON")=$P(PXCADXPL,"^",3)
"RTN","PXCAPL2",32,0)
 .. S PXCAPL("PROBLEM")=$P(PXCADXPL,"^",4)
"RTN","PXCAPL2",33,0)
 .. S PXCAPL("STATUS")=$P(PXCADXPL,"^",6)
"RTN","PXCAPL2",34,0)
 .. S PXCAPL("ONSET")=$P(PXCADXPL,"^",7)
"RTN","PXCAPL2",35,0)
 .. S PXCAPL("RESOLVED")=$P(PXCADXPL,"^",8)
"RTN","PXCAPL2",36,0)
 .. S PXCAPL("SC")=$P(PXCADXPL,"^",9)
"RTN","PXCAPL2",37,0)
 .. S PXCAPL("AO")=$P(PXCADXPL,"^",10)
"RTN","PXCAPL2",38,0)
 .. S PXCAPL("IR")=$P(PXCADXPL,"^",11)
"RTN","PXCAPL2",39,0)
 .. S PXCAPL("EC")=$P(PXCADXPL,"^",12)
"RTN","PXCAPL2",40,0)
 .. ;Add MST & HNC
"RTN","PXCAPL2",41,0)
 .. S PXCAPL("MST")=$P(PXCADXPL,"^",15)
"RTN","PXCAPL2",42,0)
 .. S PXCAPL("HNC")=$P(PXCADXPL,"^",16)
"RTN","PXCAPL2",43,0)
 .. S PXCAPL("CV")=$P(PXCADXPL,"^",17)
"RTN","PXCAPL2",44,0)
 .. S PXCAPL("SHAD")=$P(PXCADXPL,"^",18)
"RTN","PXCAPL2",45,0)
 .. S PXCAPL("NARRATIVE")=$P(PXCADXPL,"^",13)
"RTN","PXCAPL2",46,0)
 .. S:'PXCAPL("PROBLEM") PXCAPL("RECORDED")=$P($P(PXCA("ENCOUNTER"),"^"),".") ;Only if new problem
"RTN","PXCAPL2",47,0)
 .. D UPDATE^GMPLUTL(.PXCAPL,.PXCARES)
"RTN","PXCAPL2",48,0)
 .. I $G(PXCARES)'>0 D
"RTN","PXCAPL2",49,0)
 ... I PXCARES(0)'="Duplicate problem" S PXKERROR("PL",PXCANUMB,0,0)="Problem Not Stored = "_$G(PXCARES(0))_"  For Provider = "_PXCAPRV_"  and index = "_PXCAINDX
"RTN","PXCAPL2",50,0)
 ... S PXCA("WARNING","DIAGNOSIS/PROBLEM",PXCAPRV,PXCAINDX,0)="PROBLEM Not Stored^"_$G(PXCARES(0))
"RTN","PXCAPL2",51,0)
 .. E  I $D(^TMP("PXK",$J,"POV",PXCADNUM(PXCAPRV,PXCAINDX),0,"AFTER"))#2 S $P(^TMP("PXK",$J,"POV",PXCADNUM(PXCAPRV,PXCAINDX),0,"AFTER"),"^",16)=PXCARES
"RTN","PXCAPL2",52,0)
 Q
"RTN","PXCAPL2",53,0)
 ;
"RTN","PXCAPOV")
0^4^B38051436
"RTN","PXCAPOV",1,0)
PXCAPOV ;ISL/dee & LEA/Chylton - Validates data from the PCE Device Interface into PCE's PXK format for POV ;03/27/12
"RTN","PXCAPOV",2,0)
 ;;1.0;PCE PATIENT CARE ENCOUNTER;**24,27,33,121,130,124,168,260002**;Aug 12, 1996;Build 16
"RTN","PXCAPOV",3,0)
 Q
"RTN","PXCAPOV",4,0)
 ; Variables
"RTN","PXCAPOV",5,0)
 ;   PXCADIAG  Copy of a Diagnosis node of the PXCA array
"RTN","PXCAPOV",6,0)
 ;   PXCAPRV   Pointer to the provider (200)
"RTN","PXCAPOV",7,0)
 ;   ;   PXCANPOV  Count of the number of POVs
"RTN","PXCAPOV",8,0)
 ;   PXCANUMB  Count of the number if POVs
"RTN","PXCAPOV",9,0)
 ;   PXCAINDX  Count of the number of Diagnoses for one provider
"RTN","PXCAPOV",10,0)
 ;
"RTN","PXCAPOV",11,0)
DIAG(PXCA,PXCABULD,PXCAERRS) ;Validation routine for POV
"RTN","PXCAPOV",12,0)
 N PXCADIAG,PXCAPRV,PXCAINDX,VALID,PAT,%
"RTN","PXCAPOV",13,0)
 S PXCAPRV=""
"RTN","PXCAPOV",14,0)
 F  S PXCAPRV=$O(PXCA("DIAGNOSIS",PXCAPRV)) Q:PXCAPRV']""  D
"RTN","PXCAPOV",15,0)
 . I PXCAPRV>0 D
"RTN","PXCAPOV",16,0)
 .. I '$$ACTIVPRV^PXAPI(PXCAPRV,PXCADT) S PXCA("ERROR","DIAGNOSIS",PXCAPRV,0,0)="Provider is not active or valid^"_PXCAPRV
"RTN","PXCAPOV",17,0)
 .. E  I PXCABULD!PXCAERRS D ANOTHPRV^PXCAPRV(PXCAPRV)
"RTN","PXCAPOV",18,0)
 . S PXCAINDX=0
"RTN","PXCAPOV",19,0)
 . F  S PXCAINDX=$O(PXCA("DIAGNOSIS",PXCAPRV,PXCAINDX)) Q:PXCAINDX']""  D
"RTN","PXCAPOV",20,0)
 .. S PXCADIAG=$G(PXCA("DIAGNOSIS",PXCAPRV,PXCAINDX))
"RTN","PXCAPOV",21,0)
 .. I PXCADIAG="" S PXCA("ERROR","DIAGNOSIS",PXCAPRV,PXCAINDX,0)="DIAGNOSIS data missing" Q
"RTN","PXCAPOV",22,0)
 .. S PXCANPOV=PXCANPOV+1
"RTN","PXCAPOV",23,0)
 .. N PXCAITEM,PXCAITM2,PXCAPNAR,PXCANARC,PXCACLEX
"RTN","PXCAPOV",24,0)
 .. ;
"RTN","PXCAPOV",25,0)
 .. S PXCAITEM=$P(PXCADIAG,"^",1)
"RTN","PXCAPOV",26,0)
 .. D
"RTN","PXCAPOV",27,0)
 ... ;N DIC,DR,DA,DIQ,PXCADIQ1
"RTN","PXCAPOV",28,0)
 ... ;S DIC=80
"RTN","PXCAPOV",29,0)
 ... ;S DR=".01;102"
"RTN","PXCAPOV",30,0)
 ... ;S DA=$S(PXCAITEM'="":PXCAITEM,1:-1)
"RTN","PXCAPOV",31,0)
 ... ;S DIQ="PXCADIQ1("
"RTN","PXCAPOV",32,0)
 ... ;S DIQ(0)="I"
"RTN","PXCAPOV",33,0)
 ... ;D EN^DIQ1
"RTN","PXCAPOV",34,0)
 ... ;I $G(PXCADIQ1(80,DA,.01,"I"))="" S PXCA("ERROR","DIAGNOSIS",PXCAPRV,PXCAINDX,1)="ICD9 Code not in file 80^"_PXCAITEM
"RTN","PXCAPOV",35,0)
 ... ;E  I $G(PXCADIQ1(80,DA,102,"I")),PXCADIQ1(80,DA,102,"I")'>+PXCADT S PXCA("ERROR","DIAGNOSIS",PXCAPRV,PXCAINDX,1)="ICD9 Code is INACTIVE^"_PXCAITEM
"RTN","PXCAPOV",36,0)
 ... N ICDSTR,ICDCN,ICDID
"RTN","PXCAPOV",37,0)
 ... S ICDSTR=$$ICDDX^ICDCODE($S(PXCAITEM'="":PXCAITEM,1:-1),+PXCADT)
"RTN","PXCAPOV",38,0)
 ... S ICDCN=$P(ICDSTR,"^",2)
"RTN","PXCAPOV",39,0)
 ... S ICDID=$P(ICDSTR,"^",12)
"RTN","PXCAPOV",40,0)
 ... I +ICDSTR=-1 S PXCA("ERROR","DIAGNOSIS",PXCAPRV,PXCAINDX,1)="ICD9 Code not in file 80^"_PXCAITEM
"RTN","PXCAPOV",41,0)
 ... E  I '$P(ICDSTR,"^",10) S PXCA("ERROR","DIAGNOSIS",PXCAPRV,PXCAINDX,1)="ICD9 Code is INACTIVE^"_PXCAITEM
"RTN","PXCAPOV",42,0)
 ...;
"RTN","PXCAPOV",43,0)
 .. S PXCAITEM=$P(PXCADIAG,"^",2)
"RTN","PXCAPOV",44,0)
 .. I '(PXCAITEM=""!(PXCAITEM="P")!(PXCAITEM="S")) S PXCA("ERROR","DIAGNOSIS",PXCAPRV,PXCAINDX,2)="Diagnosis specification code must be P|S^"_PXCAITEM
"RTN","PXCAPOV",45,0)
 .. E  I PXCAITEM="P" D
"RTN","PXCAPOV",46,0)
 ... I 'PXCAPDX S PXCAPDX=$P(PXCADIAG,"^",1)
"RTN","PXCAPOV",47,0)
 ... E  I $P($G(^PX(815,1,"DI")),"^",2) S PXCA("ERROR","DIAGNOSIS",PXCAPRV,PXCAINDX,2)="There is already a Primary Diagnosis for this encounter^"_PXCAITEM
"RTN","PXCAPOV",48,0)
 ... E  D
"RTN","PXCAPOV",49,0)
 .... S PXCA("WARNING","DIAGNOSIS",PXCAPRV,PXCAINDX,2)="There is already a Primary Diagnosis. This one is changed to Secondary^"_PXCAITEM
"RTN","PXCAPOV",50,0)
 .... S $P(PXCADIAG,"^",2)="S"
"RTN","PXCAPOV",51,0)
 .. S PXCAITEM=$P(PXCADIAG,"^",3)
"RTN","PXCAPOV",52,0)
 .. I '(PXCAITEM=1!(PXCAITEM=0)!(PXCAITEM="")) S PXCA("ERROR","DIAGNOSIS",PXCAPRV,PXCAINDX,3)="SC flag bad^"_PXCAITEM
"RTN","PXCAPOV",53,0)
 .. S PXCAITEM=$P(PXCADIAG,"^",4)
"RTN","PXCAPOV",54,0)
 .. I '(PXCAITEM=1!(PXCAITEM=0)!(PXCAITEM="")) S PXCA("ERROR","DIAGNOSIS",PXCAPRV,PXCAINDX,4)="AO flag bad^"_PXCAITEM
"RTN","PXCAPOV",55,0)
 .. S PXCAITEM=$P(PXCADIAG,"^",5)
"RTN","PXCAPOV",56,0)
 .. I '(PXCAITEM=1!(PXCAITEM=0)!(PXCAITEM="")) S PXCA("ERROR","DIAGNOSIS",PXCAPRV,PXCAINDX,5)="IR flag bad^"_PXCAITEM
"RTN","PXCAPOV",57,0)
 .. S PXCAITEM=$P(PXCADIAG,"^",6)
"RTN","PXCAPOV",58,0)
 .. I '(PXCAITEM=1!(PXCAITEM=0)!(PXCAITEM="")) S PXCA("ERROR","DIAGNOSIS",PXCAPRV,PXCAINDX,6)="EC flag bad^"_PXCAITEM
"RTN","PXCAPOV",59,0)
 .. S PXCAITEM=$P(PXCADIAG,"^",11)
"RTN","PXCAPOV",60,0)
 .. I '(PXCAITEM=1!(PXCAITEM=0)!(PXCAITEM="")) S PXCA("ERROR","DIAGNOSIS",PXCAPRV,PXCAINDX,11)="MST flag bad^"_PXCAITEM
"RTN","PXCAPOV",61,0)
 .. S PXCAITEM=$P(PXCADIAG,"^",12)
"RTN","PXCAPOV",62,0)
 .. I '(PXCAITEM=1!(PXCAITEM=0)!(PXCAITEM="")) S PXCA("ERROR","DIAGNOSIS",PXCAPRV,PXCAINDX,12)="HNC flag bad^"_PXCAITEM
"RTN","PXCAPOV",63,0)
 .. S PXCAITEM=$P(PXCADIAG,"^",13)
"RTN","PXCAPOV",64,0)
 .. I '(PXCAITEM=1!(PXCAITEM=0)!(PXCAITEM="")) S PXCA("ERROR","DIAGNOSIS",PXCAPRV,PXCAINDX,13)="CV flag bad^"_PXCAITEM ;CV
"RTN","PXCAPOV",65,0)
 .. S PXCAITEM=$P(PXCADIAG,"^",14)
"RTN","PXCAPOV",66,0)
 .. I '(PXCAITEM="R"!(PXCAITEM="O")!(PXCAITEM="RO")!(PXCAITEM="")) S PXCA("ERROR","DIAGNOSIS",PXCAPRV,PXCAINDX,14)="Ordering/Resulting field bad^"_PXCAITEM
"RTN","PXCAPOV",67,0)
 .. S PXCAITEM=$P(PXCADIAG,"^",14)
"RTN","PXCAPOV",68,0)
 .. I '(PXCAITEM=1!(PXCAITEM=0)!(PXCAITEM="")) S PXCA("ERROR","DIAGNOSIS",PXCAPRV,PXCAINDX,15)="PROJ 112/SHAD flag bad^"_PXCAITEM
"RTN","PXCAPOV",69,0)
 .. S PXCAITEM=$P(PXCADIAG,"^",7)
"RTN","PXCAPOV",70,0)
 .. I PXCAITEM]"" D
"RTN","PXCAPOV",71,0)
 ... S %=$$VALID^GMPLAPI4(.VALID,PXCAITEM)
"RTN","PXCAPOV",72,0)
 ... S %=$$PATIENT^GMPLAPI4(.PAT,PXCAITEM)
"RTN","PXCAPOV",73,0)
 ... I 'VALID S PXCA("ERROR","DIAGNOSIS",PXCAPRV,PXCAINDX,7)="Problem not in file 9000011^"_PXCAITEM
"RTN","PXCAPOV",74,0)
 ... E  I PXCAPAT'=PAT S PXCA("ERROR","DIAGNOSIS",PXCAPRV,PXCAINDX,7)="Problem in file 9000011 is for a different Patient^"_PXCAITEM
"RTN","PXCAPOV",75,0)
 .. ;
"RTN","PXCAPOV",76,0)
 .. ;Clinical Lexicon Term
"RTN","PXCAPOV",77,0)
 .. S PXCAITEM=$P(PXCADIAG,"^",10)
"RTN","PXCAPOV",78,0)
 .. I PXCAITEM]"" D
"RTN","PXCAPOV",79,0)
 ... I $D(^LEX(757.01)) D
"RTN","PXCAPOV",80,0)
 .... I $D(^LEX(757.01,PXCAITEM,0))#2'=1 S PXCA("ERROR","DIAGNOSIS",PXCAPRV,PXCAINDX,10)="Lexicon Utility term is not in file 757.01^"_PXCAITEM
"RTN","PXCAPOV",81,0)
 .... E  S PXCACLEX=PXCAITEM
"RTN","PXCAPOV",82,0)
 ... E  I $D(^GMP(757.01)) D
"RTN","PXCAPOV",83,0)
 .... I $D(^GMP(757.01,PXCAITEM,0))#2'=1 S PXCA("ERROR","DIAGNOSIS",PXCAPRV,PXCAINDX,10)="Clinical Lexicon Utility term is not in file 757.01^"_PXCAITEM
"RTN","PXCAPOV",84,0)
 .... E  S PXCACLEX=PXCAITEM
"RTN","PXCAPOV",85,0)
 ... E  S PXCA("ERROR","DIAGNOSIS",PXCAPRV,PXCAINDX,10)="Lexicon Utility is not installed^"_PXCAITEM
"RTN","PXCAPOV",86,0)
 .. ;
"RTN","PXCAPOV",87,0)
 .. D PART1^PXCAPOV1
"RTN","PXCAPOV",88,0)
 .. ;
"RTN","PXCAPOV",89,0)
 .. I PXCABULD&'$D(PXCA("ERROR","DIAGNOSIS",PXCAPRV,PXCAINDX))!PXCAERRS D POV^PXCADX(PXCADIAG,PXCANPOV,PXCAPRV,PXCAERRS)
"RTN","PXCAPOV",90,0)
 Q
"RTN","PXCAPOV",91,0)
 ;
"RTN","PXCAPOV",92,0)
ANOTHPOV(PXCAAPOV) ; 
"RTN","PXCAPOV",93,0)
 ;Add the diagnosis to V POV if they are not there.
"RTN","PXCAPOV",94,0)
 ;Quit if the provider subscript is zero
"RTN","PXCAPOV",95,0)
 ; Variables
"RTN","PXCAPOV",96,0)
 ;   PXCAAPOV  Pointer to the DIAGNOSIS (80)
"RTN","PXCAPOV",97,0)
 ;   PXCAINDX  Subscript of the diagnosis in the temp array used to
"RTN","PXCAPOV",98,0)
 ;               look to see if the above diagnosis is already know.
"RTN","PXCAPOV",99,0)
 Q:PXCAAPOV'>0
"RTN","PXCAPOV",100,0)
 N PXCAINDX
"RTN","PXCAPOV",101,0)
 ;See if this diagnosis is in the ^TMP(PXCAGLB,$J,
"RTN","PXCAPOV",102,0)
 F PXCAINDX=1:1:PXCANPOV I PXCAAPOV=+$G(^TMP(PXCAGLB,$J,"POV",PXCAINDX,0,"AFTER")) S PXCAINDX=0 Q
"RTN","PXCAPOV",103,0)
 Q:PXCAINDX'>0
"RTN","PXCAPOV",104,0)
 S PXCAINDX=0
"RTN","PXCAPOV",105,0)
 ;See if this diagnosis is already in V POV for this Encounter
"RTN","PXCAPOV",106,0)
 F  S PXCAINDX=$O(^AUPNVPOV("AD",PXCAVSIT,PXCAAPOV)) Q:PXCAINDX'>0  I PXCAAPOV=$P(^AUPNVPOV(PXCAINDX,0),"^",1) Q
"RTN","PXCAPOV",107,0)
 Q:PXCAINDX>0
"RTN","PXCAPOV",108,0)
 S PXCANPOV=PXCANPOV+1
"RTN","PXCAPOV",109,0)
 S ^TMP(PXCAGLB,$J,"POV",PXCANPOV,"IEN")=""
"RTN","PXCAPOV",110,0)
 S ^TMP(PXCAGLB,$J,"POV",PXCANPOV,0,"BEFORE")=""
"RTN","PXCAPOV",111,0)
 S ^TMP(PXCAGLB,$J,"POV",PXCANPOV,0,"AFTER")=PXCAAPOV_"^"_PXCAPAT_"^"_PXCAVSIT_"^^^^^^^^^S"
"RTN","PXCAPOV",112,0)
 S ^TMP(PXCAGLB,$J,"POV",PXCANPOV,812,"BEFORE")=""
"RTN","PXCAPOV",113,0)
 S ^TMP(PXCAGLB,$J,"POV",PXCANPOV,812,"AFTER")="^"_PXCAPKG_"^"_PXCASOR
"RTN","PXCAPOV",114,0)
 Q
"RTN","PXCAPOV",115,0)
 ;
"VER")
8.0^22.0
**INSTALL NAME**
PXRM*2.0*260002
"BLD",9049,0)
PXRM*2.0*260002^CLINICAL REMINDERS^0^3130902^y
"BLD",9049,1,0)
^^1^1^3130328^
"BLD",9049,1,1,0)
PROBLEM LIST REFACTORING
"BLD",9049,4,0)
^9.64PA^^
"BLD",9049,6.3)
15
"BLD",9049,"KRN",0)
^9.67PA^779.2^20
"BLD",9049,"KRN",.4,0)
.4
"BLD",9049,"KRN",.401,0)
.401
"BLD",9049,"KRN",.402,0)
.402
"BLD",9049,"KRN",.403,0)
.403
"BLD",9049,"KRN",.5,0)
.5
"BLD",9049,"KRN",.84,0)
.84
"BLD",9049,"KRN",3.6,0)
3.6
"BLD",9049,"KRN",3.8,0)
3.8
"BLD",9049,"KRN",9.2,0)
9.2
"BLD",9049,"KRN",9.8,0)
9.8
"BLD",9049,"KRN",9.8,"NM",0)
^9.68A^2^2
"BLD",9049,"KRN",9.8,"NM",1,0)
PXRMISE^^0^B62014385
"BLD",9049,"KRN",9.8,"NM",2,0)
PXRMPROB^^0^B44424531
"BLD",9049,"KRN",9.8,"NM","B","PXRMISE",1)

"BLD",9049,"KRN",9.8,"NM","B","PXRMPROB",2)

"BLD",9049,"KRN",19,0)
19
"BLD",9049,"KRN",19.1,0)
19.1
"BLD",9049,"KRN",101,0)
101
"BLD",9049,"KRN",409.61,0)
409.61
"BLD",9049,"KRN",771,0)
771
"BLD",9049,"KRN",779.2,0)
779.2
"BLD",9049,"KRN",870,0)
870
"BLD",9049,"KRN",8989.51,0)
8989.51
"BLD",9049,"KRN",8989.52,0)
8989.52
"BLD",9049,"KRN",8994,0)
8994
"BLD",9049,"KRN","B",.4,.4)

"BLD",9049,"KRN","B",.401,.401)

"BLD",9049,"KRN","B",.402,.402)

"BLD",9049,"KRN","B",.403,.403)

"BLD",9049,"KRN","B",.5,.5)

"BLD",9049,"KRN","B",.84,.84)

"BLD",9049,"KRN","B",3.6,3.6)

"BLD",9049,"KRN","B",3.8,3.8)

"BLD",9049,"KRN","B",9.2,9.2)

"BLD",9049,"KRN","B",9.8,9.8)

"BLD",9049,"KRN","B",19,19)

"BLD",9049,"KRN","B",19.1,19.1)

"BLD",9049,"KRN","B",101,101)

"BLD",9049,"KRN","B",409.61,409.61)

"BLD",9049,"KRN","B",771,771)

"BLD",9049,"KRN","B",779.2,779.2)

"BLD",9049,"KRN","B",870,870)

"BLD",9049,"KRN","B",8989.51,8989.51)

"BLD",9049,"KRN","B",8989.52,8989.52)

"BLD",9049,"KRN","B",8994,8994)

"MBREQ")
0
"PKG",180,-1)
1^1
"PKG",180,0)
CLINICAL REMINDERS^PXRM^Clinical Reminders^^^3000614
"PKG",180,22,0)
^9.49I^1^1
"PKG",180,22,1,0)
2.0^3051119^3050311^1
"PKG",180,22,1,"PAH",1,0)
260002^3130902
"PKG",180,22,1,"PAH",1,1,0)
^^1^1^3130902
"PKG",180,22,1,"PAH",1,1,1,0)
PROBLEM LIST REFACTORING
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
2
"RTN","PXRMISE")
0^1^B62014385
"RTN","PXRMISE",1,0)
PXRMISE ; SLC/PKR - Index size estimating routines. ;03/27/12
"RTN","PXRMISE",2,0)
 ;;2.0;CLINICAL REMINDERS;**6,12,17,260002**;Feb 04, 2005;Build 15
"RTN","PXRMISE",3,0)
 ;
"RTN","PXRMISE",4,0)
 ;========================================================
"RTN","PXRMISE",5,0)
EST ;Driver for making index counts.
"RTN","PXRMISE",6,0)
 N BLOCKS,FROM,FUNCTION,GBL,GLIST,IND,NE,NL,NUMGBL,RTN
"RTN","PXRMISE",7,0)
 N SF,TASKIT,TBLOCKS,TO,XMSUB
"RTN","PXRMISE",8,0)
 D SETDATA(.GBL,.GLIST,.NUMGBL,.RTN,.SF)
"RTN","PXRMISE",9,0)
 I +SF=-1 D ERRORMSG^PXRMISF(SF)  Q
"RTN","PXRMISE",10,0)
 S (NL,TBLOCKS)=0
"RTN","PXRMISE",11,0)
 S NL=NL+1,^TMP("PXRMXMZ",$J,NL,0)="Start time "_$$FMTE^XLFDT($$NOW^XLFDT,"5Z")
"RTN","PXRMISE",12,0)
 S NL=NL+1,^TMP("PXRMXMZ",$J,NL,0)=""
"RTN","PXRMISE",13,0)
 S NL=NL+1,^TMP("PXRMXMZ",$J,NL,0)="Size Estimate for ^PXRMINDX"
"RTN","PXRMISE",14,0)
 F IND=1:1:NUMGBL D
"RTN","PXRMISE",15,0)
 . S FUNCTION="S NE=$$"_RTN(GBL(IND))
"RTN","PXRMISE",16,0)
 . X FUNCTION
"RTN","PXRMISE",17,0)
 . S BLOCKS=NE*SF(GBL(IND))
"RTN","PXRMISE",18,0)
 . S BLOCKS=$FN(BLOCKS,"","")+1
"RTN","PXRMISE",19,0)
 . S TBLOCKS=TBLOCKS+BLOCKS
"RTN","PXRMISE",20,0)
 . S NL=NL+1,^TMP("PXRMXMZ",$J,NL,0)=""
"RTN","PXRMISE",21,0)
 . S NL=NL+1,^TMP("PXRMXMZ",$J,NL,0)="Estimates for "_GLIST(IND)
"RTN","PXRMISE",22,0)
 . S NL=NL+1,^TMP("PXRMXMZ",$J,NL,0)=" Number of entries: "_NE
"RTN","PXRMISE",23,0)
 . S NL=NL+1,^TMP("PXRMXMZ",$J,NL,0)=" Number of blocks: "_BLOCKS
"RTN","PXRMISE",24,0)
 S NL=NL+1,^TMP("PXRMXMZ",$J,NL,0)=""
"RTN","PXRMISE",25,0)
 S NL=NL+1,^TMP("PXRMXMZ",$J,NL,0)="Total estimated blocks: "_TBLOCKS
"RTN","PXRMISE",26,0)
 S NL=NL+1,^TMP("PXRMXMZ",$J,NL,0)=""
"RTN","PXRMISE",27,0)
 S NL=NL+1,^TMP("PXRMXMZ",$J,NL,0)="End time "_$$FMTE^XLFDT($$NOW^XLFDT,"5Z")
"RTN","PXRMISE",28,0)
 S XMSUB="Size estimate for index global"
"RTN","PXRMISE",29,0)
 S FROM=$$GET1^DIQ(200,DUZ,.01)
"RTN","PXRMISE",30,0)
 S TO(DUZ)=""
"RTN","PXRMISE",31,0)
 D SEND^PXRMMSG("PXRMXMZ",XMSUB,.TO,FROM)
"RTN","PXRMISE",32,0)
 S ZTREQ="@"
"RTN","PXRMISE",33,0)
 Q
"RTN","PXRMISE",34,0)
 ;
"RTN","PXRMISE",35,0)
 ;===============================================================
"RTN","PXRMISE",36,0)
ESTTASK ;Task the index size estimation.
"RTN","PXRMISE",37,0)
 N DIR,DTOUT,DUOUT,MINDT,SDTIME,X,Y
"RTN","PXRMISE",38,0)
 S MINDT=$$NOW^XLFDT
"RTN","PXRMISE",39,0)
 W !,"Queue the Clinical Reminders index size estimation."
"RTN","PXRMISE",40,0)
 S DIR("A",1)="Enter the date and time you want the job to start."
"RTN","PXRMISE",41,0)
 S DIR("A",2)="It must be after "_$$FMTE^XLFDT(MINDT,"5Z")
"RTN","PXRMISE",42,0)
 S DIR("A")="Start the task at: "
"RTN","PXRMISE",43,0)
 S DIR(0)="DAU"_U_MINDT_"::RSX"
"RTN","PXRMISE",44,0)
 D ^DIR
"RTN","PXRMISE",45,0)
 I $D(DTOUT)!$D(DUOUT) Q
"RTN","PXRMISE",46,0)
 S SDTIME=Y
"RTN","PXRMISE",47,0)
 K DIR
"RTN","PXRMISE",48,0)
 ;Put the task into the queue.
"RTN","PXRMISE",49,0)
 S ZTRTN="EST^PXRMISE"
"RTN","PXRMISE",50,0)
 S ZTDESC="Clinical Reminders index size estimation"
"RTN","PXRMISE",51,0)
 S ZTDTH=SDTIME
"RTN","PXRMISE",52,0)
 S ZTIO=""
"RTN","PXRMISE",53,0)
 D ^%ZTLOAD
"RTN","PXRMISE",54,0)
 W !,"Task number ",ZTSK," queued."
"RTN","PXRMISE",55,0)
 Q
"RTN","PXRMISE",56,0)
 ;
"RTN","PXRMISE",57,0)
 ;===============================================================
"RTN","PXRMISE",58,0)
NEOR() ;Return number of entries in OR.
"RTN","PXRMISE",59,0)
 ;DBIA #4180
"RTN","PXRMISE",60,0)
 Q $P(^OR(100,0),U,4)
"RTN","PXRMISE",61,0)
 ;
"RTN","PXRMISE",62,0)
 ;===============================================================
"RTN","PXRMISE",63,0)
NEPROB() ;Return number of entries in PROBLEM LIST.
"RTN","PXRMISE",64,0)
 ;DBIA #3837
"RTN","PXRMISE",65,0)
 N CNT,%
"RTN","PXRMISE",66,0)
 S %=$$PRBCNT^GMPLAPI4(.CNT)
"RTN","PXRMISE",67,0)
 Q CNT
"RTN","PXRMISE",68,0)
 ;
"RTN","PXRMISE",69,0)
 ;===============================================================
"RTN","PXRMISE",70,0)
NEPS() ;Return number of entries in PS(55).
"RTN","PXRMISE",71,0)
 N ADD,DA,DA1,DFN,DRUG,IND,NE,SDATE,SOL,STARTD,TEMP
"RTN","PXRMISE",72,0)
 ;DBIA #4181
"RTN","PXRMISE",73,0)
 S (DFN,IND,NE)=0
"RTN","PXRMISE",74,0)
 F  S DFN=+$O(^PS(55,DFN)) Q:DFN=0  D
"RTN","PXRMISE",75,0)
 .;Process Unit Dose.
"RTN","PXRMISE",76,0)
 . S DA=0
"RTN","PXRMISE",77,0)
 . F  S DA=+$O(^PS(55,DFN,5,DA)) Q:DA=0  D
"RTN","PXRMISE",78,0)
 .. S TEMP=$G(^PS(55,DFN,5,DA,2))
"RTN","PXRMISE",79,0)
 .. S STARTD=$P(TEMP,U,2)
"RTN","PXRMISE",80,0)
 .. I STARTD="" Q
"RTN","PXRMISE",81,0)
 ..;If the order is purged then SDATE is 1.
"RTN","PXRMISE",82,0)
 .. S SDATE=$P(TEMP,U,4)
"RTN","PXRMISE",83,0)
 .. I SDATE=1 Q
"RTN","PXRMISE",84,0)
 .. S DA1=0
"RTN","PXRMISE",85,0)
 .. F  S DA1=+$O(^PS(55,DFN,5,DA,1,DA1)) Q:DA1=0  D
"RTN","PXRMISE",86,0)
 ... S DRUG=$P(^PS(55,DFN,5,DA,1,DA1,0),U,1)
"RTN","PXRMISE",87,0)
 ... I DRUG="" Q
"RTN","PXRMISE",88,0)
 ... S NE=NE+1
"RTN","PXRMISE",89,0)
 .;Process the IV mutiple.
"RTN","PXRMISE",90,0)
 . S DA=0
"RTN","PXRMISE",91,0)
 . F  S DA=+$O(^PS(55,DFN,"IV",DA)) Q:DA=0  D
"RTN","PXRMISE",92,0)
 .. S TEMP=$G(^PS(55,DFN,"IV",DA,0))
"RTN","PXRMISE",93,0)
 .. S STARTD=$P(TEMP,U,2)
"RTN","PXRMISE",94,0)
 .. I STARTD="" Q
"RTN","PXRMISE",95,0)
 .. S SDATE=$P(TEMP,U,3)
"RTN","PXRMISE",96,0)
 .. I SDATE=1 Q
"RTN","PXRMISE",97,0)
 ..;Process Additives
"RTN","PXRMISE",98,0)
 .. S DA1=0
"RTN","PXRMISE",99,0)
 .. F  S DA1=+$O(^PS(55,DFN,"IV",DA,"AD",DA1)) Q:DA1=0  D
"RTN","PXRMISE",100,0)
 ... S ADD=$P(^PS(55,DFN,"IV",DA,"AD",DA1,0),U,1)
"RTN","PXRMISE",101,0)
 ... I ADD="" Q
"RTN","PXRMISE",102,0)
 ... S DRUG=$P($G(^PS(52.6,ADD,0)),U,2)
"RTN","PXRMISE",103,0)
 ... I DRUG="" Q
"RTN","PXRMISE",104,0)
 ... S NE=NE+1
"RTN","PXRMISE",105,0)
 ..;Process Solutions
"RTN","PXRMISE",106,0)
 .. S DA1=0
"RTN","PXRMISE",107,0)
 .. F  S DA1=+$O(^PS(55,DFN,"IV",DA,"SOL",DA1)) Q:DA1=0  D
"RTN","PXRMISE",108,0)
 ... S SOL=$P(^PS(55,DFN,"IV",DA,"SOL",DA1,0),U,1)
"RTN","PXRMISE",109,0)
 ... I SOL="" Q
"RTN","PXRMISE",110,0)
 ... S DRUG=$P($G(^PS(52.7,SOL,0)),U,2)
"RTN","PXRMISE",111,0)
 ... I DRUG="" Q
"RTN","PXRMISE",112,0)
 ... S NE=NE+1
"RTN","PXRMISE",113,0)
 Q NE
"RTN","PXRMISE",114,0)
 ;
"RTN","PXRMISE",115,0)
 ;===============================================================
"RTN","PXRMISE",116,0)
NEPSRX() ;Return number of entries in PSRX
"RTN","PXRMISE",117,0)
 N DA,DA1,DATE,DSUP,DFN,DRUG,NE,RDATE,TEMP
"RTN","PXRMISE",118,0)
 ;DBIA #4182
"RTN","PXRMISE",119,0)
 S (DA,NE)=0
"RTN","PXRMISE",120,0)
 F  S DA=+$O(^PSRX(DA)) Q:DA=0  D
"RTN","PXRMISE",121,0)
 . S TEMP=$G(^PSRX(DA,0))
"RTN","PXRMISE",122,0)
 . S DFN=$P(TEMP,U,2)
"RTN","PXRMISE",123,0)
 . I DFN="" Q
"RTN","PXRMISE",124,0)
 . S DRUG=$P(TEMP,U,6)
"RTN","PXRMISE",125,0)
 . I DRUG="" Q
"RTN","PXRMISE",126,0)
 . S DSUP=$P(TEMP,U,8)
"RTN","PXRMISE",127,0)
 . I DSUP="" Q
"RTN","PXRMISE",128,0)
 . S RDATE=+$P($G(^PSRX(DA,2)),U,13)
"RTN","PXRMISE",129,0)
 . I RDATE>0 S NE=NE+1
"RTN","PXRMISE",130,0)
 .;Process the refill mutiple.
"RTN","PXRMISE",131,0)
 . S DA1=0
"RTN","PXRMISE",132,0)
 . F  S DA1=+$O(^PSRX(DA,1,DA1)) Q:DA1=0  D
"RTN","PXRMISE",133,0)
 .. S TEMP=$G(^PSRX(DA,1,DA1,0))
"RTN","PXRMISE",134,0)
 .. S DSUP=+$P(TEMP,U,10)
"RTN","PXRMISE",135,0)
 .. S RDATE=+$P(TEMP,U,18)
"RTN","PXRMISE",136,0)
 .. I RDATE>0 S NE=NE+1
"RTN","PXRMISE",137,0)
 .;Process the partial fill multiple.
"RTN","PXRMISE",138,0)
 . S DA1=0
"RTN","PXRMISE",139,0)
 . F  S DA1=+$O(^PSRX(DA,"P",DA1)) Q:DA1=0  D
"RTN","PXRMISE",140,0)
 .. S TEMP=$G(^PSRX(DA,"P",DA1,0))
"RTN","PXRMISE",141,0)
 .. S DSUP=+$P(TEMP,U,10)
"RTN","PXRMISE",142,0)
 .. S RDATE=+$P(TEMP,U,19)
"RTN","PXRMISE",143,0)
 .. I RDATE>0 S NE=NE+1
"RTN","PXRMISE",144,0)
 Q NE
"RTN","PXRMISE",145,0)
 ;
"RTN","PXRMISE",146,0)
 ;===============================================================
"RTN","PXRMISE",147,0)
NEPTF() ;Return number of entries in PTF.
"RTN","PXRMISE",148,0)
 N D1,DA,DATE,DFN,ICD0,ICD9,JND,NE0,NE9,TEMP70,TEMP0,TEMPP,TEMPS
"RTN","PXRMISE",149,0)
 ;DBIA #4177
"RTN","PXRMISE",150,0)
 S (DA,NE0,NE9)=0
"RTN","PXRMISE",151,0)
 F  S DA=+$O(^DGPT(DA)) Q:DA=0  D
"RTN","PXRMISE",152,0)
 . S TEMP0=$G(^DGPT(DA,0))
"RTN","PXRMISE",153,0)
 . S DFN=$P(TEMP0,U,1)
"RTN","PXRMISE",154,0)
 . I DFN="" Q
"RTN","PXRMISE",155,0)
 . S D1=0
"RTN","PXRMISE",156,0)
 . F  S D1=+$O(^DGPT(DA,"S",D1)) Q:D1=0  D
"RTN","PXRMISE",157,0)
 .. S TEMPS=$G(^DGPT(DA,"S",D1,0))
"RTN","PXRMISE",158,0)
 .. S DATE=$P(TEMPS,U,1)
"RTN","PXRMISE",159,0)
 .. I DATE="" Q
"RTN","PXRMISE",160,0)
 .. F JND=8,9,10,11,12 D
"RTN","PXRMISE",161,0)
 ... S ICD0=$P(TEMPS,U,JND)
"RTN","PXRMISE",162,0)
 ... I (ICD0'=""),$D(^ICD0(ICD0)) S NE0=NE0+1
"RTN","PXRMISE",163,0)
 .;
"RTN","PXRMISE",164,0)
 . S D1=0
"RTN","PXRMISE",165,0)
 . F  S D1=+$O(^DGPT(DA,"P",D1)) Q:D1=0  D
"RTN","PXRMISE",166,0)
 .. S TEMPP=$G(^DGPT(DA,"P",D1,0))
"RTN","PXRMISE",167,0)
 .. S DATE=$P(TEMPP,U,1)
"RTN","PXRMISE",168,0)
 .. I DATE="" Q
"RTN","PXRMISE",169,0)
 .. F JND=5,6,7,8,9 D
"RTN","PXRMISE",170,0)
 ... S ICD0=$P(TEMPP,U,JND)
"RTN","PXRMISE",171,0)
 ... I (ICD0'=""),$D(^ICD0(ICD0)) S NE0=NE0+1
"RTN","PXRMISE",172,0)
 .;
"RTN","PXRMISE",173,0)
 .;Discharge ICD9 codes
"RTN","PXRMISE",174,0)
 . I $D(^DGPT(DA,70)) D
"RTN","PXRMISE",175,0)
 .. S TEMP70=$G(^DGPT(DA,70))
"RTN","PXRMISE",176,0)
 .. F JND=10,11,16,17,18,19,20,21,22,23,24 D
"RTN","PXRMISE",177,0)
 ... S ICD9=$P(TEMP70,U,JND)
"RTN","PXRMISE",178,0)
 ... I (ICD9'=""),$D(^ICD9(ICD9)) S NE9=NE9+1
"RTN","PXRMISE",179,0)
 .;
"RTN","PXRMISE",180,0)
 .;Movement ICD9 codes
"RTN","PXRMISE",181,0)
 . I '$D(^DGPT(DA,"M")) Q
"RTN","PXRMISE",182,0)
 . S D1=0
"RTN","PXRMISE",183,0)
 . F  S D1=$O(^DGPT(DA,"M",D1)) Q:+D1=0  D
"RTN","PXRMISE",184,0)
 .. S TEMPS=$G(^DGPT(DA,"M",D1,0))
"RTN","PXRMISE",185,0)
 .. S DATE=$P(TEMPS,U,10)
"RTN","PXRMISE",186,0)
 .. I DATE="" Q
"RTN","PXRMISE",187,0)
 .. F JND=5,6,7,8,9,11,12,13,14,15 D
"RTN","PXRMISE",188,0)
 ... S ICD9=$P(TEMPS,U,JND)
"RTN","PXRMISE",189,0)
 ... I (ICD9'=""),$D(^ICD9(ICD9)) S NE9=NE9+1
"RTN","PXRMISE",190,0)
 Q NE0+NE9
"RTN","PXRMISE",191,0)
 ;
"RTN","PXRMISE",192,0)
 ;===============================================================
"RTN","PXRMISE",193,0)
NERAD() ;Return number of entries in RAD/NUC MED PATIENT.
"RTN","PXRMISE",194,0)
 N IEN,NE
"RTN","PXRMISE",195,0)
 ;DBIA #4183
"RTN","PXRMISE",196,0)
 S (IEN,NE)=0
"RTN","PXRMISE",197,0)
 F  S IEN=$O(^RADPT(IEN)) Q:+IEN=0  S NE=NE+$P($G(^RADPT(IEN,"DT",0)),U,4)
"RTN","PXRMISE",198,0)
 Q NE
"RTN","PXRMISE",199,0)
 ;
"RTN","PXRMISE",200,0)
 ;===============================================================
"RTN","PXRMISE",201,0)
NEVCPT() ;Return number of entries in V CPT.
"RTN","PXRMISE",202,0)
 ;DBIA #4176
"RTN","PXRMISE",203,0)
 Q $P(^AUPNVCPT(0),U,4)
"RTN","PXRMISE",204,0)
 ;
"RTN","PXRMISE",205,0)
 ;===============================================================
"RTN","PXRMISE",206,0)
NEVHF() ;Return number of entries in V HEALTH FACTORS.
"RTN","PXRMISE",207,0)
 ;DBIA #4176
"RTN","PXRMISE",208,0)
 Q $P(^AUPNVHF(0),U,4)
"RTN","PXRMISE",209,0)
 ;
"RTN","PXRMISE",210,0)
 ;===============================================================
"RTN","PXRMISE",211,0)
NEVIMM() ;Return number of entries in V IMMUNIZATION
"RTN","PXRMISE",212,0)
 ;DBIA #4176
"RTN","PXRMISE",213,0)
 Q $P(^AUPNVIMM(0),U,4)
"RTN","PXRMISE",214,0)
 ;
"RTN","PXRMISE",215,0)
 ;===============================================================
"RTN","PXRMISE",216,0)
NEVIT() ;Return number of entries in GMRV VITAL MEASUREMENT
"RTN","PXRMISE",217,0)
 ;DBIA #4178
"RTN","PXRMISE",218,0)
 Q $P(^GMR(120.5,0),U,4)
"RTN","PXRMISE",219,0)
 ;
"RTN","PXRMISE",220,0)
 ;===============================================================
"RTN","PXRMISE",221,0)
NEVPED() ;Return number of entries in V PATIENT ED.
"RTN","PXRMISE",222,0)
 ;DBIA #4176
"RTN","PXRMISE",223,0)
 Q $P(^AUPNVPED(0),U,4)
"RTN","PXRMISE",224,0)
 ;
"RTN","PXRMISE",225,0)
 ;===============================================================
"RTN","PXRMISE",226,0)
NEVPOV() ;Return number of entries in V POV.
"RTN","PXRMISE",227,0)
 ;DBIA #4176
"RTN","PXRMISE",228,0)
 Q $P(^AUPNVPOV(0),U,4)
"RTN","PXRMISE",229,0)
 ;
"RTN","PXRMISE",230,0)
 ;===============================================================
"RTN","PXRMISE",231,0)
NEVSK() ;Return number of entries in V SKIN TEST.
"RTN","PXRMISE",232,0)
 ;DBIA #4176
"RTN","PXRMISE",233,0)
 Q $P(^AUPNVSK(0),U,4)
"RTN","PXRMISE",234,0)
 ;
"RTN","PXRMISE",235,0)
 ;===============================================================
"RTN","PXRMISE",236,0)
NEVXAM() ;Return number of entries in V EXAM.
"RTN","PXRMISE",237,0)
 ;DBIA #4176
"RTN","PXRMISE",238,0)
 Q $P(^AUPNVXAM(0),U,4)
"RTN","PXRMISE",239,0)
 ;
"RTN","PXRMISE",240,0)
 ;===============================================================
"RTN","PXRMISE",241,0)
NEYTD() ;Return number of entries in PSYCH INSTRUMENT PATIENT
"RTN","PXRMISE",242,0)
 N DATE,DFN,NE,TEST
"RTN","PXRMISE",243,0)
 ;DBIA #4184
"RTN","PXRMISE",244,0)
 S (DFN,NE)=0
"RTN","PXRMISE",245,0)
 F  S DFN=$O(^YTD(601.2,DFN)) Q:+DFN=0  D
"RTN","PXRMISE",246,0)
 . S TEST=0
"RTN","PXRMISE",247,0)
 . F  S TEST=$O(^YTD(601.2,DFN,1,TEST)) Q:+TEST=0  D
"RTN","PXRMISE",248,0)
 .. S DATE=0
"RTN","PXRMISE",249,0)
 .. F  S DATE=$O(^YTD(601.2,DFN,1,TEST,1,DATE)) Q:+DATE=0  S NE=NE+1
"RTN","PXRMISE",250,0)
 Q NE
"RTN","PXRMISE",251,0)
 ;
"RTN","PXRMISE",252,0)
 ;===============================================================
"RTN","PXRMISE",253,0)
SETDATA(GBL,GLIST,NUMGBL,RTN,SF) ;
"RTN","PXRMISE",254,0)
 S NUMGBL=16
"RTN","PXRMISE",255,0)
 S GLIST(1)="LABORATORY TEST (CH, Anatomic Path, Micro)",GBL(1)=63
"RTN","PXRMISE",256,0)
 S GLIST(2)="MENTAL HEALTH",GBL(2)=601.2
"RTN","PXRMISE",257,0)
 S GLIST(3)="ORDER",GBL(3)=100
"RTN","PXRMISE",258,0)
 S GLIST(4)="PTF",GBL(4)=45
"RTN","PXRMISE",259,0)
 S GLIST(5)="PHARMACY PATIENT",GBL(5)=55
"RTN","PXRMISE",260,0)
 S GLIST(6)="PRESCRIPTION",GBL(6)=52
"RTN","PXRMISE",261,0)
 S GLIST(7)="PROBLEM LIST",GBL(7)=9000011
"RTN","PXRMISE",262,0)
 S GLIST(8)="RADIOLOGY",GBL(8)=70
"RTN","PXRMISE",263,0)
 S GLIST(9)="V CPT",GBL(9)=9000010.18
"RTN","PXRMISE",264,0)
 S GLIST(10)="V EXAM",GBL(10)=9000010.13
"RTN","PXRMISE",265,0)
 S GLIST(11)="V HEALTH FACTORS",GBL(11)=9000010.23
"RTN","PXRMISE",266,0)
 S GLIST(12)="V IMMUNIZATION",GBL(12)=9000010.11
"RTN","PXRMISE",267,0)
 S GLIST(13)="V PATIENT ED",GBL(13)=9000010.16
"RTN","PXRMISE",268,0)
 S GLIST(14)="V POV",GBL(14)=9000010.07
"RTN","PXRMISE",269,0)
 S GLIST(15)="V SKIN TEST",GBL(15)=9000010.12
"RTN","PXRMISE",270,0)
 S GLIST(16)="VITAL MEASUREMENT",GBL(16)=120.5
"RTN","PXRMISE",271,0)
 S RTN(45)="NEPTF^PXRMISE"
"RTN","PXRMISE",272,0)
 S RTN(52)="NEPSRX^PSO52CLR"
"RTN","PXRMISE",273,0)
 S RTN(55)="NEPS^PSSCLINR"
"RTN","PXRMISE",274,0)
 S RTN(63)="NELR^PXRMLABS"
"RTN","PXRMISE",275,0)
 S RTN(70)="NERAD^PXRMISE"
"RTN","PXRMISE",276,0)
 S RTN(100)="NEOR^PXRMISE"
"RTN","PXRMISE",277,0)
 S RTN(120.5)="NEVIT^PXRMISE"
"RTN","PXRMISE",278,0)
 S RTN(601.2)="NEYTD^PXRMISE"
"RTN","PXRMISE",279,0)
 S RTN(9000011)="NEPROB^PXRMISE"
"RTN","PXRMISE",280,0)
 S RTN(9000010.07)="NEVPOV^PXRMISE"
"RTN","PXRMISE",281,0)
 S RTN(9000010.11)="NEVIMM^PXRMISE"
"RTN","PXRMISE",282,0)
 S RTN(9000010.12)="NEVSK^PXRMISE"
"RTN","PXRMISE",283,0)
 S RTN(9000010.13)="NEVXAM^PXRMISE"
"RTN","PXRMISE",284,0)
 S RTN(9000010.16)="NEVPED^PXRMISE"
"RTN","PXRMISE",285,0)
 S RTN(9000010.18)="NEVCPT^PXRMISE"
"RTN","PXRMISE",286,0)
 S RTN(9000010.23)="NEVHF^PXRMISE"
"RTN","PXRMISE",287,0)
 D LSF^PXRMISF(.SF)
"RTN","PXRMISE",288,0)
 Q
"RTN","PXRMISE",289,0)
 ;
"RTN","PXRMPROB")
0^2^B44424531
"RTN","PXRMPROB",1,0)
PXRMPROB ; SLC/PKR - Code for Problem List. ;03/27/12
"RTN","PXRMPROB",2,0)
 ;;2.0;CLINICAL REMINDERS;**4,260002**;Feb 04, 2005;Build 15
"RTN","PXRMPROB",3,0)
 ;
"RTN","PXRMPROB",4,0)
 ;===================================================
"RTN","PXRMPROB",5,0)
FPDAT(DFN,TAXARR,NGET,SDIR,BDT,EDT,STATUSA,FLIST) ;Find data for a
"RTN","PXRMPROB",6,0)
 ;patient. STATUSA is an array containing a list of status to search
"RTN","PXRMPROB",7,0)
 ;for. A status can be "A" for active or "I" for inactive. If STATUSA=""
"RTN","PXRMPROB",8,0)
 ;it will search for all with data.
"RTN","PXRMPROB",9,0)
 N BDTT,DAS,DATE,DEND,DS,DSAVE,DTT,EDATE,EDTT,ICDP,IND,JND,LGT,LLT
"RTN","PXRMPROB",10,0)
 N NFOUND,NPRIO,NSTAT,PRIO,PRIOA,STAT,STATUSAT,TDATE,TE,TIND,TLIST,TS
"RTN","PXRMPROB",11,0)
 I $G(^PXRMINDX(9000011,"DATE BUILT"))="" D  Q
"RTN","PXRMPROB",12,0)
 . D NOINDEX^PXRMERRH("TX",TAXARR("IEN"),9000011)
"RTN","PXRMPROB",13,0)
 I '$D(^PXRMINDX(9000011,"PSPI",DFN)) Q
"RTN","PXRMPROB",14,0)
 S NSTAT=STATUSA(0)
"RTN","PXRMPROB",15,0)
 I NSTAT=0 Q
"RTN","PXRMPROB",16,0)
 ;EDATE is the evaluation date.
"RTN","PXRMPROB",17,0)
 S EDATE=$$NOW^PXRMDATE
"RTN","PXRMPROB",18,0)
 S BDTT=BDT-.0000001
"RTN","PXRMPROB",19,0)
 S EDTT=$S(EDT[".":EDT+.0000001,1:EDT+.240001)
"RTN","PXRMPROB",20,0)
 S DEND=$S(EDT[".":EDT,1:EDT+.240001)
"RTN","PXRMPROB",21,0)
 S DTT=EDATE+.240001
"RTN","PXRMPROB",22,0)
 ;Get the start and end of the taxonomy.
"RTN","PXRMPROB",23,0)
 S TS=$O(TAXARR(80,""))-1
"RTN","PXRMPROB",24,0)
 S TE=$O(TAXARR(80,""),-1)
"RTN","PXRMPROB",25,0)
 ;For chronic problems we use today's date so only search for chronic
"RTN","PXRMPROB",26,0)
 ;problems if today's datelies in the date range.
"RTN","PXRMPROB",27,0)
 I EDATE'<BDT,EDATE'>DEND S NPRIO=3,PRIOA(1)="C",PRIOA(2)="A",PRIOA(3)="U"
"RTN","PXRMPROB",28,0)
 E  S NPRIO=2,PRIOA(1)="A",PRIOA(2)="U"
"RTN","PXRMPROB",29,0)
 S NFOUND=0
"RTN","PXRMPROB",30,0)
 F IND=1:1:NSTAT D
"RTN","PXRMPROB",31,0)
 . S STAT=STATUSA(IND)
"RTN","PXRMPROB",32,0)
 . F JND=1:1:NPRIO D
"RTN","PXRMPROB",33,0)
 .. S PRIO=PRIOA(JND)
"RTN","PXRMPROB",34,0)
 .. I '$D(^PXRMINDX(9000011,"PSPI",DFN,STAT,PRIO)) Q
"RTN","PXRMPROB",35,0)
 .. I SDIR=-1,PRIO'="C" S DS=EDTT,LLT=BDT,LGT=EDT
"RTN","PXRMPROB",36,0)
 .. I SDIR=-1,PRIO="C" S DS=DTT,LLT=0,LGT=EDATE
"RTN","PXRMPROB",37,0)
 .. I SDIR=1,PRIO'="C" S DS=BDTT,LLT=0,LGT=EDT
"RTN","PXRMPROB",38,0)
 .. I SDIR=1,PRIO="C" S DS=0,LLT=0,LGT=EDATE
"RTN","PXRMPROB",39,0)
 .. S ICDP=TS
"RTN","PXRMPROB",40,0)
 .. F  S ICDP=$O(^PXRMINDX(9000011,"PSPI",DFN,STAT,PRIO,ICDP)) Q:(ICDP>TE)!(ICDP="")  D
"RTN","PXRMPROB",41,0)
 ... I '$D(TAXARR(80,ICDP)) Q
"RTN","PXRMPROB",42,0)
 ... S DATE=DS
"RTN","PXRMPROB",43,0)
 ... F  S DATE=+$O(^PXRMINDX(9000011,"PSPI",DFN,STAT,PRIO,ICDP,DATE),SDIR) Q:$S(DATE=0:1,DATE<LLT:1,DATE>LGT:1,1:0)  D
"RTN","PXRMPROB",44,0)
 .... S DAS=$O(^PXRMINDX(9000011,"PSPI",DFN,STAT,PRIO,ICDP,DATE,""))
"RTN","PXRMPROB",45,0)
 .... S DSAVE=$S(PRIO="C":EDATE,1:DATE)
"RTN","PXRMPROB",46,0)
 .... I DSAVE'<BDT,DSAVE'>DEND D
"RTN","PXRMPROB",47,0)
 ..... S NFOUND=NFOUND+1
"RTN","PXRMPROB",48,0)
 ..... S TLIST(DSAVE,NFOUND)=DAS_U_ICDP_U_STAT_U_PRIO
"RTN","PXRMPROB",49,0)
 ..... I NFOUND>NGET D
"RTN","PXRMPROB",50,0)
 ...... S TDATE=$O(TLIST(""),-SDIR),TIND=$O(TLIST(TDATE,""))
"RTN","PXRMPROB",51,0)
 ...... K TLIST(TDATE,TIND)
"RTN","PXRMPROB",52,0)
 ;Return up to NGET of the most recent entries.
"RTN","PXRMPROB",53,0)
 S NFOUND=0
"RTN","PXRMPROB",54,0)
 S DATE=""
"RTN","PXRMPROB",55,0)
 F  S DATE=$O(TLIST(DATE),SDIR) Q:(DATE="")!(NFOUND=NGET)  D
"RTN","PXRMPROB",56,0)
 . S IND=0
"RTN","PXRMPROB",57,0)
 . F  S IND=$O(TLIST(DATE,IND)) Q:(IND="")!(NFOUND=NGET)  D
"RTN","PXRMPROB",58,0)
 .. S NFOUND=NFOUND+1
"RTN","PXRMPROB",59,0)
 .. S FLIST(DATE,NFOUND,9000011)=TLIST(DATE,IND)_U_"ICD9"
"RTN","PXRMPROB",60,0)
 Q
"RTN","PXRMPROB",61,0)
 ;
"RTN","PXRMPROB",62,0)
 ;===================================================
"RTN","PXRMPROB",63,0)
GETDATA(DA,FIEVT) ;Return data for a specified Problem List entry.
"RTN","PXRMPROB",64,0)
 N GMPLCOND,GMPLDLM,GMPLICD,GMPLLEX,GMPLODAT,GMPLPNAM,GMPLPRIO,GMPLPRV
"RTN","PXRMPROB",65,0)
 N GMPLSTAT,GMPLTXT,GMPLXDAT
"RTN","PXRMPROB",66,0)
 ;DBIA #2644
"RTN","PXRMPROB",67,0)
 D CALL2^GMPLUTL3(DA)
"RTN","PXRMPROB",68,0)
 S FIEVT("PROVIDER NARRATIVE")=GMPLTXT
"RTN","PXRMPROB",69,0)
 S FIEVT("DATE ENTERED")=GMPLODAT
"RTN","PXRMPROB",70,0)
 S FIEVT("DATE LAST MODIFIED")=GMPLDLM
"RTN","PXRMPROB",71,0)
 S FIEVT("STATUS")=GMPLSTAT
"RTN","PXRMPROB",72,0)
 S FIEVT("PRIORITY")=GMPLPRIO
"RTN","PXRMPROB",73,0)
 Q
"RTN","PXRMPROB",74,0)
 ;
"RTN","PXRMPROB",75,0)
 ;===================================================
"RTN","PXRMPROB",76,0)
GPLIST(TAXARR,NOCC,BDT,EDT,STATUSA,PLIST) ;Build patient list for
"RTN","PXRMPROB",77,0)
 ;Problem List entries.
"RTN","PXRMPROB",78,0)
 ;STATUSA is an array containing a list of status to search for. A
"RTN","PXRMPROB",79,0)
 ;status can be "A" for active or "I" for inactive. If STATUSA=""
"RTN","PXRMPROB",80,0)
 ;it will search for all with data.
"RTN","PXRMPROB",81,0)
 N DAS,DATE,DEND,DFN,DSAVE,ICDP,IND,JND,NFOUND,NPRIO,NSTAT,PRIO,PRIOA
"RTN","PXRMPROB",82,0)
 N STAT,TEMP,TLIST
"RTN","PXRMPROB",83,0)
 I $G(^PXRMINDX(9000011,"DATE BUILT"))="" D  Q
"RTN","PXRMPROB",84,0)
 . D NOINDEX^PXRMERRH("TX",TAXARR("IEN"),9000011)
"RTN","PXRMPROB",85,0)
 S TLIST="GPLIST_PXRMPROB"
"RTN","PXRMPROB",86,0)
 S DEND=$S(EDT[".":EDT,1:EDT+.240001)
"RTN","PXRMPROB",87,0)
 K ^TMP($J,TLIST)
"RTN","PXRMPROB",88,0)
 S NSTAT=STATUSA(0)
"RTN","PXRMPROB",89,0)
 I NSTAT=0 Q
"RTN","PXRMPROB",90,0)
 ;EDATE is the evaluation date.
"RTN","PXRMPROB",91,0)
 S EDATE=$$NOW^PXRMDATE
"RTN","PXRMPROB",92,0)
 ;For chronic problems we use today's date so only search for chronic
"RTN","PXRMPROB",93,0)
 ;problems if EDATE lies in the date range.
"RTN","PXRMPROB",94,0)
 I EDATE'<BDT,EDATE'>DEND D
"RTN","PXRMPROB",95,0)
 . S NPRIO=3
"RTN","PXRMPROB",96,0)
 . S PRIOA(1)="C",PRIOA(2)="A",PRIOA(3)="U"
"RTN","PXRMPROB",97,0)
 E  D
"RTN","PXRMPROB",98,0)
 . S NPRIO=2
"RTN","PXRMPROB",99,0)
 . S PRIOA(1)="A",PRIOA(2)="U"
"RTN","PXRMPROB",100,0)
 S NFOUND=0
"RTN","PXRMPROB",101,0)
 S ICDP=""
"RTN","PXRMPROB",102,0)
 F  S ICDP=$O(TAXARR(80,ICDP)) Q:(ICDP="")  D
"RTN","PXRMPROB",103,0)
 .;Since chronic problems will have today's date find those first.
"RTN","PXRMPROB",104,0)
 . I '$D(^PXRMINDX(9000011,"ISPP",ICDP)) Q
"RTN","PXRMPROB",105,0)
 . F IND=1:1:NSTAT D
"RTN","PXRMPROB",106,0)
 .. S STAT=STATUSA(IND)
"RTN","PXRMPROB",107,0)
 .. I '$D(^PXRMINDX(9000011,"ISPP",ICDP,STAT)) Q
"RTN","PXRMPROB",108,0)
 .. F JND=1:1:NPRIO D
"RTN","PXRMPROB",109,0)
 ... S PRIO=PRIOA(JND)
"RTN","PXRMPROB",110,0)
 ... I '$D(^PXRMINDX(9000011,"ISPP",ICDP,STAT,PRIO)) Q
"RTN","PXRMPROB",111,0)
 ... S DFN=""
"RTN","PXRMPROB",112,0)
 ... F  S DFN=$O(^PXRMINDX(9000011,"ISPP",ICDP,STAT,PRIO,DFN)) Q:DFN=""  D
"RTN","PXRMPROB",113,0)
 .... S DATE=""
"RTN","PXRMPROB",114,0)
 .... F  S DATE=$O(^PXRMINDX(9000011,"ISPP",ICDP,STAT,PRIO,DFN,DATE)) Q:DATE=""  D
"RTN","PXRMPROB",115,0)
 ..... S DAS=$O(^PXRMINDX(9000011,"ISPP",ICDP,STAT,PRIO,DFN,DATE,""))
"RTN","PXRMPROB",116,0)
 ..... S NFOUND=NFOUND+1
"RTN","PXRMPROB",117,0)
 ..... S DSAVE=$S(PRIO="C":EDATE,1:DATE)
"RTN","PXRMPROB",118,0)
 ..... I DSAVE'<BDT,DSAVE'>DEND S ^TMP($J,TLIST,DFN,DSAVE,DAS)=ICDP_U_"ICD9"_U_STAT_U_PRIO
"RTN","PXRMPROB",119,0)
 ;Return up to NOCC of the most recent entries.
"RTN","PXRMPROB",120,0)
 S DFN=0
"RTN","PXRMPROB",121,0)
 F  S DFN=$O(^TMP($J,TLIST,DFN)) Q:DFN=""  D
"RTN","PXRMPROB",122,0)
 . S NFOUND=0
"RTN","PXRMPROB",123,0)
 . S DATE=""
"RTN","PXRMPROB",124,0)
 . F  S DATE=$O(^TMP($J,TLIST,DFN,DATE),-1) Q:(DATE="")!(NFOUND=NOCC)  D
"RTN","PXRMPROB",125,0)
 .. S DAS=""
"RTN","PXRMPROB",126,0)
 .. F  S DAS=$O(^TMP($J,TLIST,DFN,DATE,DAS)) Q:DAS=""  D
"RTN","PXRMPROB",127,0)
 ... S NFOUND=NFOUND+1
"RTN","PXRMPROB",128,0)
 ... S TEMP=^TMP($J,TLIST,DFN,DATE,DAS)
"RTN","PXRMPROB",129,0)
 ... S ^TMP($J,PLIST,1,DFN,NFOUND,9000011)=DAS_U_DATE_U_TEMP
"RTN","PXRMPROB",130,0)
 K ^TMP($J,TLIST)
"RTN","PXRMPROB",131,0)
 Q
"RTN","PXRMPROB",132,0)
 ;
"RTN","PXRMPROB",133,0)
 ;===================================================
"RTN","PXRMPROB",134,0)
MHVOUT(INDENT,OCCLIST,IFIEVAL,NLINES,TEXT) ;Produce the MHV output.
"RTN","PXRMPROB",135,0)
 N CODE,EM,D0,DIAG,EM,ICD9P,ICD9ZN,IND,JND,NAME,NIN,NOUT,PN,PRIORITY
"RTN","PXRMPROB",136,0)
 N STATUS,TEMP,TEXTIN,TEXTOUT,VDATE
"RTN","PXRMPROB",137,0)
 S NAME="Problem Diagnosis = "
"RTN","PXRMPROB",138,0)
 S IND=0
"RTN","PXRMPROB",139,0)
 F  S IND=$O(OCCLIST(IND)) Q:IND=""  D
"RTN","PXRMPROB",140,0)
 . S VDATE=IFIEVAL(IND,"DATE")
"RTN","PXRMPROB",141,0)
 . S TEMP=$$EDATE^PXRMDATE(VDATE)
"RTN","PXRMPROB",142,0)
 . S ICD9P=IFIEVAL(IND,"CODEP")
"RTN","PXRMPROB",143,0)
 . S ICD9ZN=$$ICDDX^ICDCODE(ICD9P,VDATE)
"RTN","PXRMPROB",144,0)
 . S CODE=$P(ICD9ZN,U,2)
"RTN","PXRMPROB",145,0)
 . S DIAG=$P(ICD9ZN,U,4)
"RTN","PXRMPROB",146,0)
 . S TEMP=NAME_DIAG
"RTN","PXRMPROB",147,0)
 . S TEMP=TEMP_" ("_$$EDATE^PXRMDATE(VDATE)_")"
"RTN","PXRMPROB",148,0)
 . D FORMATS^PXRMTEXT(INDENT+2,PXRMRM,TEMP,.NOUT,.TEXTOUT)
"RTN","PXRMPROB",149,0)
 . F JND=1:1:NOUT S NLINES=NLINES+1,TEXT(NLINES)=TEXTOUT(JND)
"RTN","PXRMPROB",150,0)
 S NLINES=NLINES+1,TEXT(NLINES)=""
"RTN","PXRMPROB",151,0)
 Q
"RTN","PXRMPROB",152,0)
 ;
"RTN","PXRMPROB",153,0)
 ;===================================================
"RTN","PXRMPROB",154,0)
OUTPUT(INDENT,OCCLIST,IFIEVAL,NLINES,TEXT) ;Produce the clinical
"RTN","PXRMPROB",155,0)
 ;maintenance output. The Problem List information is:  DATE, ICD9 IEN, 
"RTN","PXRMPROB",156,0)
 ;ICD9 CODE, PROVIDER NARRATIVE.
"RTN","PXRMPROB",157,0)
 N CODE,EM,DIAG,EM,ICD9P,ICD9ZN,IND,JND,NIN,NOUT,PN,PRIORITY
"RTN","PXRMPROB",158,0)
 N STATUS,TEMP,TEXTIN,TEXTOUT,VDATE,PRB,%
"RTN","PXRMPROB",159,0)
 S NLINES=NLINES+1
"RTN","PXRMPROB",160,0)
 S TEXT(NLINES)=$$INSCHR^PXRMEXLC(INDENT," ")_"Problem Diagnosis:"
"RTN","PXRMPROB",161,0)
 S IND=0
"RTN","PXRMPROB",162,0)
 F  S IND=$O(OCCLIST(IND)) Q:IND=""  D
"RTN","PXRMPROB",163,0)
 . S VDATE=IFIEVAL(IND,"DATE")
"RTN","PXRMPROB",164,0)
 . S TEMP=$$EDATE^PXRMDATE(VDATE)
"RTN","PXRMPROB",165,0)
 . S ICD9P=IFIEVAL(IND,"CODEP")
"RTN","PXRMPROB",166,0)
 . S ICD9ZN=$$ICDDX^ICDCODE(ICD9P,VDATE)
"RTN","PXRMPROB",167,0)
 . S CODE=$P(ICD9ZN,U,2)
"RTN","PXRMPROB",168,0)
 . S DIAG=$P(ICD9ZN,U,4)
"RTN","PXRMPROB",169,0)
 . S TEMP=TEMP_" "_CODE_" "_DIAG
"RTN","PXRMPROB",170,0)
 . S PRIORITY=$G(IFIEVAL(IND,"PRIORITY"))
"RTN","PXRMPROB",171,0)
 . S PRIORITY=$S(PRIORITY'="":$$EXTERNAL^DILFD(9000011,1.14,"",PRIORITY,.EM),1:"UNDEFINED")
"RTN","PXRMPROB",172,0)
 . S TEMP=TEMP_" Priority: "_PRIORITY
"RTN","PXRMPROB",173,0)
 .;If the Problem is inactive mark it as such.
"RTN","PXRMPROB",174,0)
 . S STATUS=$G(IFIEVAL(IND,"STATUS"))
"RTN","PXRMPROB",175,0)
 . S STATUS=$S(STATUS'="":$$EXTERNAL^DILFD(9000011,.12,"",STATUS,.EM),1:"UNDEFINED")
"RTN","PXRMPROB",176,0)
 . S TEMP=TEMP_" Status: "_STATUS
"RTN","PXRMPROB",177,0)
 . S TEXTIN(1)=TEMP_"\\",NIN=1
"RTN","PXRMPROB",178,0)
 . S %=$$PROBNARR^GMPLAPI4(.PRB,IFIEVAL(IND,"DAS"))
"RTN","PXRMPROB",179,0)
 . S PN=$P(PRB,U,2)
"RTN","PXRMPROB",180,0)
 . I PN="" S PN="MISSING"
"RTN","PXRMPROB",181,0)
 . I PN'=DIAG S TEXTIN(2)="Prov. Narr. - "_PN,NIN=2
"RTN","PXRMPROB",182,0)
 . D FORMAT^PXRMTEXT(INDENT+2,PXRMRM,NIN,.TEXTIN,.NOUT,.TEXTOUT)
"RTN","PXRMPROB",183,0)
 . F JND=1:1:NOUT S NLINES=NLINES+1,TEXT(NLINES)=TEXTOUT(JND)
"RTN","PXRMPROB",184,0)
 S NLINES=NLINES+1,TEXT(NLINES)=""
"RTN","PXRMPROB",185,0)
 Q
"RTN","PXRMPROB",186,0)
 ;
"VER")
8.0^22.0
**INSTALL NAME**
ROR*1.5*260002
"BLD",9050,0)
ROR*1.5*260002^CLINICAL CASE REGISTRIES^0^3130902^y
"BLD",9050,1,0)
^^1^1^3130328^
"BLD",9050,1,1,0)
PROBLEM LIST REFACTORING
"BLD",9050,4,0)
^9.64PA^^
"BLD",9050,6.3)
15
"BLD",9050,"KRN",0)
^9.67PA^779.2^20
"BLD",9050,"KRN",.4,0)
.4
"BLD",9050,"KRN",.401,0)
.401
"BLD",9050,"KRN",.402,0)
.402
"BLD",9050,"KRN",.403,0)
.403
"BLD",9050,"KRN",.5,0)
.5
"BLD",9050,"KRN",.84,0)
.84
"BLD",9050,"KRN",3.6,0)
3.6
"BLD",9050,"KRN",3.8,0)
3.8
"BLD",9050,"KRN",9.2,0)
9.2
"BLD",9050,"KRN",9.8,0)
9.8
"BLD",9050,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",9050,"KRN",9.8,"NM",1,0)
RORHL17^^0^B28069584
"BLD",9050,"KRN",9.8,"NM","B","RORHL17",1)

"BLD",9050,"KRN",19,0)
19
"BLD",9050,"KRN",19.1,0)
19.1
"BLD",9050,"KRN",101,0)
101
"BLD",9050,"KRN",409.61,0)
409.61
"BLD",9050,"KRN",771,0)
771
"BLD",9050,"KRN",779.2,0)
779.2
"BLD",9050,"KRN",870,0)
870
"BLD",9050,"KRN",8989.51,0)
8989.51
"BLD",9050,"KRN",8989.52,0)
8989.52
"BLD",9050,"KRN",8994,0)
8994
"BLD",9050,"KRN","B",.4,.4)

"BLD",9050,"KRN","B",.401,.401)

"BLD",9050,"KRN","B",.402,.402)

"BLD",9050,"KRN","B",.403,.403)

"BLD",9050,"KRN","B",.5,.5)

"BLD",9050,"KRN","B",.84,.84)

"BLD",9050,"KRN","B",3.6,3.6)

"BLD",9050,"KRN","B",3.8,3.8)

"BLD",9050,"KRN","B",9.2,9.2)

"BLD",9050,"KRN","B",9.8,9.8)

"BLD",9050,"KRN","B",19,19)

"BLD",9050,"KRN","B",19.1,19.1)

"BLD",9050,"KRN","B",101,101)

"BLD",9050,"KRN","B",409.61,409.61)

"BLD",9050,"KRN","B",771,771)

"BLD",9050,"KRN","B",779.2,779.2)

"BLD",9050,"KRN","B",870,870)

"BLD",9050,"KRN","B",8989.51,8989.51)

"BLD",9050,"KRN","B",8989.52,8989.52)

"BLD",9050,"KRN","B",8994,8994)

"MBREQ")
0
"PKG",186,-1)
1^1
"PKG",186,0)
CLINICAL CASE REGISTRIES^ROR^CLINICAL REGISTRIES
"PKG",186,20,0)
^9.402P^^
"PKG",186,22,0)
^9.49I^1^1
"PKG",186,22,1,0)
1.5^3060208^3060308^1
"PKG",186,22,1,"PAH",1,0)
260002^3130902
"PKG",186,22,1,"PAH",1,1,0)
^^1^1^3130902
"PKG",186,22,1,"PAH",1,1,1,0)
PROBLEM LIST REFACTORING
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","RORHL17")
0^1^B28069584
"RTN","RORHL17",1,0)
RORHL17 ;HOIFO/BH,SG - HL7 PROBLEM LIST: OBR,OBX ;09/20/12
"RTN","RORHL17",2,0)
 ;;1.5;CLINICAL CASE REGISTRIES;**10,260002**;Feb 17, 2006;Build 15
"RTN","RORHL17",3,0)
 ;
"RTN","RORHL17",4,0)
 ; This routine uses the following IAs:
"RTN","RORHL17",5,0)
 ;
"RTN","RORHL17",6,0)
 ; #2308         ^AUPNPROB - PROBLEM file #9000011 (controlled)
"RTN","RORHL17",7,0)
 ; #2644         $$MOD^GMPLUTL3 (controlled)
"RTN","RORHL17",8,0)
 ; #3990         $$CODEC^ICDCODE (supported)
"RTN","RORHL17",9,0)
 ; #2056         $$GET1^DIQ
"RTN","RORHL17",10,0)
 ; #10103        FMTHL7^XLFDT (supported)
"RTN","RORHL17",11,0)
 ;
"RTN","RORHL17",12,0)
 Q
"RTN","RORHL17",13,0)
 ;
"RTN","RORHL17",14,0)
 ;***** SEARCHES FOR Problem List DATA
"RTN","RORHL17",15,0)
 ;
"RTN","RORHL17",16,0)
 ; RORDFN        IEN of the patient in the PATIENT file (#2)
"RTN","RORHL17",17,0)
 ;
"RTN","RORHL17",18,0)
 ; .DXDTS        Reference to a local variable where the
"RTN","RORHL17",19,0)
 ;               data extraction time frames are stored.
"RTN","RORHL17",20,0)
 ;
"RTN","RORHL17",21,0)
 ; Return Values:
"RTN","RORHL17",22,0)
 ;       <0  Error code
"RTN","RORHL17",23,0)
 ;        0  Ok
"RTN","RORHL17",24,0)
 ;       >0  Non-fatal error(s)
"RTN","RORHL17",25,0)
 ;
"RTN","RORHL17",26,0)
 ;
"RTN","RORHL17",27,0)
EN1(RORDFN,DXDTS) ;
"RTN","RORHL17",28,0)
 N CS,DFN,GMRVSTR,IDX,PROBIEN,RC,RORARR,RORBUF,RORENDT,RORMSG,RORSTDT,RORTMP,TMP,PRBS,%,I
"RTN","RORHL17",29,0)
 S (ERRCNT,RC)=0
"RTN","RORHL17",30,0)
 D ECH^RORHL7(.CS)
"RTN","RORHL17",31,0)
 S RORTMP=$$ALLOC^RORTMP()
"RTN","RORHL17",32,0)
 ;
"RTN","RORHL17",33,0)
 S IDX=0
"RTN","RORHL17",34,0)
 F  S IDX=$O(DXDTS(16,IDX))  Q:IDX'>0  D  Q:RC<0
"RTN","RORHL17",35,0)
 . S RORSTDT=$P(DXDTS(16,IDX),U),RORENDT=$P(DXDTS(16,IDX),U,2)
"RTN","RORHL17",36,0)
 . ;--- Check to see is any problems have been entered/modified
"RTN","RORHL17",37,0)
 . ;--- during the data extraction time frame
"RTN","RORHL17",38,0)
 . S MDATE=$$MOD^GMPLUTL3(RORDFN)
"RTN","RORHL17",39,0)
 . Q:(MDATE<RORSTDT)!(MDATE'<RORENDT)
"RTN","RORHL17",40,0)
 . ;--- Find newly entered problems or modified problems
"RTN","RORHL17",41,0)
 . S PROBIEN=""
"RTN","RORHL17",42,0)
 . S %=$$GETPLIST^GMPLAPI4(.PRBS,RORDFN,"AIR")
"RTN","RORHL17",43,0)
 . F I=1:1:PRBS D
"RTN","RORHL17",44,0)
 . . S PROBIEN=PRBS(I)
"RTN","RORHL17",45,0)
 . . S TMP=$$LOAD(.RORARR,PROBIEN)  Q:TMP="S"
"RTN","RORHL17",46,0)
 . . S:TMP>0 ERRCNT=ERRCNT+TMP
"RTN","RORHL17",47,0)
 . . ;---
"RTN","RORHL17",48,0)
 . . S TMP=$$OBR(.RORARR)
"RTN","RORHL17",49,0)
 . . I TMP  Q:TMP<0  S ERRCNT=ERRCNT+TMP
"RTN","RORHL17",50,0)
 . . S TMP=$$OBX(.RORARR)
"RTN","RORHL17",51,0)
 . . I TMP  Q:TMP<0  S ERRCNT=ERRCNT+TMP
"RTN","RORHL17",52,0)
 ;
"RTN","RORHL17",53,0)
 D FREE^RORTMP(RORTMP)
"RTN","RORHL17",54,0)
 Q $S(RC<0:RC,1:ERRCNT)
"RTN","RORHL17",55,0)
 ;
"RTN","RORHL17",56,0)
 ;***** VALIDATES THE DATE
"RTN","RORHL17",57,0)
CHECK(DATE) ;
"RTN","RORHL17",58,0)
 Q:DATE'>0 ""
"RTN","RORHL17",59,0)
 Q:$E(DATE,1,3)>$E(DT,1,3) ""
"RTN","RORHL17",60,0)
 S:$E(DATE,4,5)="00" $E(DATE,4,5)="01"
"RTN","RORHL17",61,0)
 S:$E(DATE,6,7)="00" $E(DATE,6,7)="01"
"RTN","RORHL17",62,0)
 Q $$FM2HL^RORHL7(DATE)
"RTN","RORHL17",63,0)
 ;
"RTN","RORHL17",64,0)
 ;I $E(DATE,1,2)="20",$E(DATE,3,4)>$E(DT,2,3) Q ""
"RTN","RORHL17",65,0)
 ;
"RTN","RORHL17",66,0)
 ;*****
"RTN","RORHL17",67,0)
LOAD(RORARR,PROBIEN) ;
"RTN","RORHL17",68,0)
 N CNT,ERRCNT,IENS,MDATE,NOTE,SUB3,SUB5,STAT,%,PRB,DIAG
"RTN","RORHL17",69,0)
 K RORARR,@RORTMP  S ERRCNT=0
"RTN","RORHL17",70,0)
 ;
"RTN","RORHL17",71,0)
 S %=$$DETAIL^GMPLAPI2(.PRB,PROBIEN)
"RTN","RORHL17",72,0)
 S MDATE=$P(PRB(.03),U)
"RTN","RORHL17",73,0)
 Q:(MDATE<RORSTDT)!(MDATE'<RORENDT) "S"
"RTN","RORHL17",74,0)
 ;
"RTN","RORHL17",75,0)
 S RORARR("OBR","FACIL")=$P(PRB(.06),U)
"RTN","RORHL17",76,0)
 S RORARR("OBR","NMBR")=$P(PRB(.07),U)
"RTN","RORHL17",77,0)
 S RORARR("OBR","COND")=$P(PRB(1.02),U)
"RTN","RORHL17",78,0)
 S RORARR("OBR","DE")=$$FMTHL7^XLFDT($P(PRB(.08),U))
"RTN","RORHL17",79,0)
 S RORARR("OBR","DOO")=$$CHECK($P(PRB(.13),U))
"RTN","RORHL17",80,0)
 S RORARR("OBR","DRES")=$$CHECK($P(PRB(1.07),U)) ;date resolved
"RTN","RORHL17",81,0)
 ;
"RTN","RORHL17",82,0)
 S DIAG=$$CODEC^ICDCODE(+$P(PRB(.01),U))
"RTN","RORHL17",83,0)
 S:DIAG<0 DIAG=""
"RTN","RORHL17",84,0)
 ;
"RTN","RORHL17",85,0)
 S RORARR("OBR","DIAG")=DIAG
"RTN","RORHL17",86,0)
 S RORARR("OBR","DREC")=$$FMTHL7^XLFDT($P(PRB(1.09),U)) ;date recorded
"RTN","RORHL17",87,0)
 S RORARR("OBR","RP")=$P(PRB(1.04),U)
"RTN","RORHL17",88,0)
 S RORARR("OBR","DLM")=$$FMTHL7^XLFDT(MDATE)
"RTN","RORHL17",89,0)
 S RORARR("OBR","ST")=$P(PRB(.12),U)
"RTN","RORHL17",90,0)
 ;
"RTN","RORHL17",91,0)
 S RORARR("OBX","PR")=$P(PRB(.05),U,2)
"RTN","RORHL17",92,0)
 S RORARR("OBX","PROB")=$P(PRB(1.01),U,2)
"RTN","RORHL17",93,0)
 ;
"RTN","RORHL17",94,0)
 I PRB(10)>0  D
"RTN","RORHL17",95,0)
 . S SUB3=0,CNT=0
"RTN","RORHL17",96,0)
 . F  S SUB3=$O(PRB(10,SUB3))  Q:'SUB3  D
"RTN","RORHL17",97,0)
 . . S SUB5=0
"RTN","RORHL17",98,0)
 . . F  S SUB5=$O(PRB(10,SUB3,SUB5))  Q:'SUB5  D
"RTN","RORHL17",99,0)
 . . . S CNT=CNT+1
"RTN","RORHL17",100,0)
 . . . S @RORTMP@(CNT)=$P(PRB(10,SUB3,SUB5),U,3)
"RTN","RORHL17",101,0)
 ;
"RTN","RORHL17",102,0)
 Q ERRCNT
"RTN","RORHL17",103,0)
 ;
"RTN","RORHL17",104,0)
 ;***** PROBLEM LIST OBR SEGMENT BUILDER
"RTN","RORHL17",105,0)
 ;
"RTN","RORHL17",106,0)
 ; Return Values:
"RTN","RORHL17",107,0)
 ;       <0  Error code
"RTN","RORHL17",108,0)
 ;        0  Ok
"RTN","RORHL17",109,0)
 ;       >0  Non-fatal error(s)
"RTN","RORHL17",110,0)
 ;
"RTN","RORHL17",111,0)
OBR(RORARR) ;
"RTN","RORHL17",112,0)
 N CLASS,CS,ERRCNT,PRV,RC,RORMSG,RORSEG,TMP,TMP1
"RTN","RORHL17",113,0)
 S (ERRCNT,RC)=0
"RTN","RORHL17",114,0)
 D ECH^RORHL7(.CS)
"RTN","RORHL17",115,0)
 ;
"RTN","RORHL17",116,0)
 ;--- Initialize the segment
"RTN","RORHL17",117,0)
 S RORSEG(0)="OBR"
"RTN","RORHL17",118,0)
 ;
"RTN","RORHL17",119,0)
 ;--- OBR-3 - Filler Order Number
"RTN","RORHL17",120,0)
 S RORSEG(3)=RORARR("OBR","FACIL")_RORARR("OBR","NMBR")
"RTN","RORHL17",121,0)
 ;
"RTN","RORHL17",122,0)
 ;--- OBR-4 - Problem List CPT Code
"RTN","RORHL17",123,0)
 S RORSEG(4)="90125"_CS_"HOSPITAL CARE,NEW, INTERMED."_CS_"C4"
"RTN","RORHL17",124,0)
 ;
"RTN","RORHL17",125,0)
 ;--- OBR-6 - Requested Date/time (Date Entered)
"RTN","RORHL17",126,0)
 S RORSEG(6)=RORARR("OBR","DE")
"RTN","RORHL17",127,0)
 ;
"RTN","RORHL17",128,0)
 ;--- OBR-7 - Observation Date/Time (Date Appeared)
"RTN","RORHL17",129,0)
 S RORSEG(7)=RORARR("OBR","DOO")
"RTN","RORHL17",130,0)
 ;
"RTN","RORHL17",131,0)
 ;--- OBR-8 - Observation End Date/Time (Date Resolved/Inactivated)
"RTN","RORHL17",132,0)
 S RORSEG(8)=RORARR("OBR","DRES")
"RTN","RORHL17",133,0)
 ;
"RTN","RORHL17",134,0)
 ;--- OBR-13 -  Relevant Clinical Info. (Diagnosis Code)
"RTN","RORHL17",135,0)
 S RORSEG(13)=RORARR("OBR","DIAG")
"RTN","RORHL17",136,0)
 ;
"RTN","RORHL17",137,0)
 ;--- OBR-14 - Specimen Received Date/time (Date Recorded)
"RTN","RORHL17",138,0)
 S RORSEG(14)=RORARR("OBR","DREC")
"RTN","RORHL17",139,0)
 ;
"RTN","RORHL17",140,0)
 ;--- OBR-16 - Ordering Provider
"RTN","RORHL17",141,0)
 S PRV=RORARR("OBR","RP")
"RTN","RORHL17",142,0)
 S TMP=$$GET1^DIQ(200,PRV_",",53.5,"E",,"RORMSG")
"RTN","RORHL17",143,0)
 I $G(DIERR)  D  S ERRCNT=ERRCNT+1
"RTN","RORHL17",144,0)
 . D DBS^RORERR("RORMSG",-99,,RORDFN,200,PRV_",")
"RTN","RORHL17",145,0)
 E  S $P(PRV,CS,13)=$$ESCAPE^RORHL7(TMP)
"RTN","RORHL17",146,0)
 S RORSEG(16)=PRV
"RTN","RORHL17",147,0)
 ;
"RTN","RORHL17",148,0)
 ;--- OBR-20 - Filler Field 1 (Condition of the Record)
"RTN","RORHL17",149,0)
 S RORSEG(20)=RORARR("OBR","COND")
"RTN","RORHL17",150,0)
 ;
"RTN","RORHL17",151,0)
 ;--- OBR-22 - Results Rpt/Status Change Date/time  (Last Modified)
"RTN","RORHL17",152,0)
 S RORSEG(22)=RORARR("OBR","DLM")
"RTN","RORHL17",153,0)
 ;
"RTN","RORHL17",154,0)
 ;--- OBR-24 - Diagnostic Service ID
"RTN","RORHL17",155,0)
 S RORSEG(24)="TX"
"RTN","RORHL17",156,0)
 ;
"RTN","RORHL17",157,0)
 ;--- OBR-25 - Result Status (Status of the Problem)
"RTN","RORHL17",158,0)
 S TMP1=RORARR("OBR","ST")
"RTN","RORHL17",159,0)
 S TMP=$S(TMP1="A":"F",TMP1="I":"R",1:"")
"RTN","RORHL17",160,0)
 S RORSEG(25)=TMP
"RTN","RORHL17",161,0)
 ;
"RTN","RORHL17",162,0)
 ;--- OBR-44 - Division
"RTN","RORHL17",163,0)
 S RORSEG(44)=$$SITE^RORUTL03(CS)
"RTN","RORHL17",164,0)
 ;
"RTN","RORHL17",165,0)
 ;--- Store the segment
"RTN","RORHL17",166,0)
 D ADDSEG^RORHL7(.RORSEG)
"RTN","RORHL17",167,0)
 Q ERRCNT
"RTN","RORHL17",168,0)
 ;
"RTN","RORHL17",169,0)
 ;***** PROBLEM LIST OBX SEGMENT(S) BUILDER
"RTN","RORHL17",170,0)
 ;
"RTN","RORHL17",171,0)
 ; Return Values:
"RTN","RORHL17",172,0)
 ;       <0  Error code
"RTN","RORHL17",173,0)
 ;        0  Ok
"RTN","RORHL17",174,0)
 ;       >0  Non-fatal error(s)
"RTN","RORHL17",175,0)
 ;
"RTN","RORHL17",176,0)
OBX(RORARR) ;
"RTN","RORHL17",177,0)
 N BR,CS,ERRCNT,NDX,OBX3,RC
"RTN","RORHL17",178,0)
 S (ERRCNT,RC)=0
"RTN","RORHL17",179,0)
 D ECH^RORHL7(.CS)
"RTN","RORHL17",180,0)
 S BR=$E(HLECH,3)_".br"_$E(HLECH,3)
"RTN","RORHL17",181,0)
 ;
"RTN","RORHL17",182,0)
 I $D(RORARR("OBX","PR")) D
"RTN","RORHL17",183,0)
 . S OBX3="PRVN"_CS_"Provider Narrative"_CS_"VA080"
"RTN","RORHL17",184,0)
 . D SETOBX(OBX3,"",$$ESCAPE^RORHL7(RORARR("OBX","PR")))
"RTN","RORHL17",185,0)
 ;
"RTN","RORHL17",186,0)
 I $D(RORARR("OBX","PROB")) D
"RTN","RORHL17",187,0)
 . S OBX3="EXPR"_CS_"Expression"_CS_"VA080"
"RTN","RORHL17",188,0)
 . D SETOBX(OBX3,"",$$ESCAPE^RORHL7(RORARR("OBX","PROB")))
"RTN","RORHL17",189,0)
 ;
"RTN","RORHL17",190,0)
 S OBX3="NOTE"_CS_"Note Narrative"_CS_"VA080"
"RTN","RORHL17",191,0)
 D SETOBXWP^RORHLUT1(RORTMP,OBX3)
"RTN","RORHL17",192,0)
 ;
"RTN","RORHL17",193,0)
 Q ERRCNT
"RTN","RORHL17",194,0)
 ;
"RTN","RORHL17",195,0)
 ;*** CREATES AND STORES THE OBX SEGMENT
"RTN","RORHL17",196,0)
SETOBX(OBX3,OBX4,OBX5) ;
"RTN","RORHL17",197,0)
 N RORSEG
"RTN","RORHL17",198,0)
 ;--- Initialize the segment
"RTN","RORHL17",199,0)
 S RORSEG(0)="OBX"
"RTN","RORHL17",200,0)
 ;--- OBX-2
"RTN","RORHL17",201,0)
 S RORSEG(2)="FT"
"RTN","RORHL17",202,0)
 ;--- OBX-3
"RTN","RORHL17",203,0)
 S RORSEG(3)=OBX3
"RTN","RORHL17",204,0)
 ;--- OBX-4
"RTN","RORHL17",205,0)
 S:$G(OBX4)'="" RORSEG(4)=OBX4
"RTN","RORHL17",206,0)
 ;--- OBX-5
"RTN","RORHL17",207,0)
 S RORSEG(5)=OBX5
"RTN","RORHL17",208,0)
 ;--- OBX-11
"RTN","RORHL17",209,0)
 S RORSEG(11)="F"
"RTN","RORHL17",210,0)
 ;--- Store the segment
"RTN","RORHL17",211,0)
 D ADDSEG^RORHL7(.RORSEG)
"RTN","RORHL17",212,0)
 Q
"VER")
8.0^22.0
**INSTALL NAME**
XU*8.0*260002
"BLD",9051,0)
XU*8.0*260002^KERNEL^0^3130902^y
"BLD",9051,1,0)
^^1^1^3130129^
"BLD",9051,1,1,0)
PROBLEM LIST REFACTORING
"BLD",9051,4,0)
^9.64PA^101^1
"BLD",9051,4,101,0)
101
"BLD",9051,4,101,222)
y^y^f^^^^n
"BLD",9051,4,"B",101,101)

"BLD",9051,6.3)
15
"BLD",9051,"KRN",0)
^9.67PA^779.2^20
"BLD",9051,"KRN",.4,0)
.4
"BLD",9051,"KRN",.401,0)
.401
"BLD",9051,"KRN",.402,0)
.402
"BLD",9051,"KRN",.403,0)
.403
"BLD",9051,"KRN",.5,0)
.5
"BLD",9051,"KRN",.84,0)
.84
"BLD",9051,"KRN",3.6,0)
3.6
"BLD",9051,"KRN",3.8,0)
3.8
"BLD",9051,"KRN",9.2,0)
9.2
"BLD",9051,"KRN",9.8,0)
9.8
"BLD",9051,"KRN",9.8,"NM",0)
^9.68A^2^2
"BLD",9051,"KRN",9.8,"NM",1,0)
XQOR3^^0^B8726600
"BLD",9051,"KRN",9.8,"NM",2,0)
XQORM1^^0^B7822377
"BLD",9051,"KRN",9.8,"NM","B","XQOR3",1)

"BLD",9051,"KRN",9.8,"NM","B","XQORM1",2)

"BLD",9051,"KRN",19,0)
19
"BLD",9051,"KRN",19.1,0)
19.1
"BLD",9051,"KRN",101,0)
101
"BLD",9051,"KRN",409.61,0)
409.61
"BLD",9051,"KRN",771,0)
771
"BLD",9051,"KRN",779.2,0)
779.2
"BLD",9051,"KRN",870,0)
870
"BLD",9051,"KRN",8989.51,0)
8989.51
"BLD",9051,"KRN",8989.52,0)
8989.52
"BLD",9051,"KRN",8994,0)
8994
"BLD",9051,"KRN","B",.4,.4)

"BLD",9051,"KRN","B",.401,.401)

"BLD",9051,"KRN","B",.402,.402)

"BLD",9051,"KRN","B",.403,.403)

"BLD",9051,"KRN","B",.5,.5)

"BLD",9051,"KRN","B",.84,.84)

"BLD",9051,"KRN","B",3.6,3.6)

"BLD",9051,"KRN","B",3.8,3.8)

"BLD",9051,"KRN","B",9.2,9.2)

"BLD",9051,"KRN","B",9.8,9.8)

"BLD",9051,"KRN","B",19,19)

"BLD",9051,"KRN","B",19.1,19.1)

"BLD",9051,"KRN","B",101,101)

"BLD",9051,"KRN","B",409.61,409.61)

"BLD",9051,"KRN","B",771,771)

"BLD",9051,"KRN","B",779.2,779.2)

"BLD",9051,"KRN","B",870,870)

"BLD",9051,"KRN","B",8989.51,8989.51)

"BLD",9051,"KRN","B",8989.52,8989.52)

"BLD",9051,"KRN","B",8994,8994)

"BLD",9051,"QUES",0)
^9.62^^0
"FIA",101)
PROTOCOL
"FIA",101,0)
^ORD(101,
"FIA",101,0,0)
101I
"FIA",101,0,1)
y^y^f^^^^n
"FIA",101,0,10)

"FIA",101,0,11)

"FIA",101,0,"RLRO")

"FIA",101,0,"VR")
8.0^XU
"FIA",101,101)
0
"FIA",101,101.01)
0
"FIA",101,101.02)
0
"FIA",101,101.021)
0
"FIA",101,101.03)
0
"FIA",101,101.0431)
0
"FIA",101,101.05)
0
"FIA",101,101.06)
0
"FIA",101,101.07)
0
"FIA",101,101.0775)
0
"MBREQ")
0
"PKG",3,-1)
1^1
"PKG",3,0)
KERNEL^XU^SIGN-ON, SECURITY, MENU DRIVER, DEVICES, TASKMAN^
"PKG",3,20,0)
^9.402P^2^2
"PKG",3,20,1,0)
2^^RGDRM03
"PKG",3,20,1,1)

"PKG",3,20,2,0)
200^^XDRM200N
"PKG",3,20,2,1)

"PKG",3,20,"B",2,1)

"PKG",3,20,"B",200,2)

"PKG",3,22,0)
^9.49I^1^1
"PKG",3,22,1,0)
8.0^3051119^2960606^1
"PKG",3,22,1,"PAH",1,0)
260002^3130902^1
"PKG",3,22,1,"PAH",1,1,0)
^^1^1^3130902
"PKG",3,22,1,"PAH",1,1,1,0)
PROBLEM LIST REFACTORING
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
2
"RTN","XQOR3")
0^1^B8726600
"RTN","XQOR3",1,0)
XQOR3 ; SLC/KCM - Process Menus, Protocol Menus ;2/27/12;
"RTN","XQOR3",2,0)
 ;;8.0;KERNEL;**260002**;Jul 10, 1995;Build 15
"RTN","XQOR3",3,0)
MENU ;From: XQOR1
"RTN","XQOR3",4,0)
 S ^TMP("XQORS",$J,XQORS,"ITM")=0,XQORM=^TMP("XQORS",$J,XQORS,"VPT") S:$D(XQORM(0))[0 XQORM(0)="AD" I $D(XQORM("S")),'$L(XQORM("S")) K XQORM("S")
"RTN","XQOR3",5,0)
 D:^TMP("XQORS",$J,0,"FILE")=";ORD(101," MENU1 S:'$D(XQORM("H")) XQORM("H")="W @IOF I $D(@(^TMP(""XQORS"",$J,XQORS,""REF"")_""0)"")) S X=$P(^(0),""^"",2) W ?(36-($L(X)\2)),""--- ""_X_"" ---"",!"
"RTN","XQOR3",6,0)
 S X=$P(^TMP("XQORS",$J,XQORS,"INP"),"^",4) I X[";" D EAT^XQORM1 I $E(X)'=";" S X=$P(X,";",2,99),ORNSV=XQORM(0) S XQORM(0)=$S(+XQORM(0):+XQORM(0),1:"")_$S(XQORM(0)["F":"F",1:"") S XQORM("H")="" D ^XQORM
"RTN","XQOR3",7,0)
 S:$D(^TMP("XQORS",$J,XQORS,"X")) X=^TMP("XQORS",$J,XQORS,"X")
"RTN","XQOR3",8,0)
 I $S($D(ORNSV):Y<1,1:1) S:$D(ORNSV) XQORM(0)=ORNSV D ^XQORM
"RTN","XQOR3",9,0)
 S I=0
"RTN","XQOR3",10,0)
SET S I=$O(Y(I)) G:I'>0 EX
"RTN","XQOR3",11,0)
 S ^TMP("XQORS",$J,XQORS,"ITM")=^TMP("XQORS",$J,XQORS,"ITM")+1
"RTN","XQOR3",12,0)
 S ^TMP("XQORS",$J,XQORS,"ITM",^TMP("XQORS",$J,XQORS,"ITM"))=$P(Y(I),"^",2)_^TMP("XQORS",$J,0,"FILE")
"RTN","XQOR3",13,0)
 S ^TMP("XQORS",$J,XQORS,"ITM",^TMP("XQORS",$J,XQORS,"ITM"),"IN")=Y(I)
"RTN","XQOR3",14,0)
 I ^TMP("XQORS",$J,0,"FILE")=";ORD(101,",$D(^ORD(101,+^TMP("XQORS",$J,XQORS,"VPT"),10,+Y(I),0)),+$P(^(0),"^",4) S J=$P(^(0),"^",4),^TMP("XQORS",$J,XQORS,"ITM",^TMP("XQORS",$J,XQORS,"ITM"),"MA")=J_^TMP("XQORS",$J,0,"FILE")
"RTN","XQOR3",15,0)
 G SET
"RTN","XQOR3",16,0)
EX K J,ORNSV,XQORM Q
"RTN","XQOR3",17,0)
MENU1 ;Get Protocol file specific XQORM fields
"RTN","XQOR3",18,0)
 I '$D(XQORM("H")),$D(^ORD(101,+^TMP("XQORS",$J,XQORS,"VPT"),26))'[0,$L(^(26)) S XQORM("H")=^(26)
"RTN","XQOR3",19,0)
 I '$D(XQORM("S")),$D(^ORD(101,+^TMP("XQORS",$J,XQORS,"VPT"),24))'[0,$L(^(24)) S XQORM("S")=^(24)
"RTN","XQOR3",20,0)
 I '$D(XQORM("?")),$D(^ORD(101,+^TMP("XQORS",$J,XQORS,"VPT"),27))'[0,$L(^(27)) S XQORM("?")=^(27)
"RTN","XQOR3",21,0)
 I '$D(XQORM("A")),$D(^ORD(101,+^TMP("XQORS",$J,XQORS,"VPT"),28))'[0,$L(^(28)) S XQORM("A")=^(28)
"RTN","XQOR3",22,0)
 I '$D(XQORM("B")),$D(^ORD(101,+^TMP("XQORS",$J,XQORS,"VPT"),29))'[0,$L(^(29)) S XQORM("B")=^(29)
"RTN","XQOR3",23,0)
 I '$D(XQORM("M")),$D(^ORD(101,+^TMP("XQORS",$J,XQORS,"VPT"),4))'[0,+$P(^(4),"^",2) S XQORM("M")=$P(^(4),"^",2)
"RTN","XQOR3",24,0)
 I '$D(XQORM("R")),$D(^ORD(101,+^TMP("XQORS",$J,XQORS,"VPT"),54))'[0,$L(^(54)) S XQORM("R")=^(54)
"RTN","XQOR3",25,0)
 Q
"RTN","XQORM1")
0^2^B7822377
"RTN","XQORM1",1,0)
XQORM1 ; SLC/KCM - Display selections & prompt ;2/27/12
"RTN","XQORM1",2,0)
 ;;8.0;KERNEL;**260002**;Jul 10, 1995;Build 15
"RTN","XQORM1",3,0)
DISP ;From: XQORM
"RTN","XQORM1",4,0)
 N L,M,N,T
"RTN","XQORM1",5,0)
 I $E(X)="?" W ! S (DX,DY)=0 X ^%ZOSF("XY")
"RTN","XQORM1",6,0)
 S T=1 S:$D(^XUTL("XQORM",XQORM,"COL")) T=^("COL") S:'T T=1 S T=IOM\T
"RTN","XQORM1",7,0)
 S M=5 I $D(XQORM("M")),+XQORM("M"),XQORM("M")'>T S M=XQORM("M")
"RTN","XQORM1",8,0)
 N X S L=0 F I=0:0 S I=$O(^XUTL("XQORM",XQORM,I)) Q:I'>0  I $D(^(I,0)) S X=^(0),J=($P(I,".",2)-1)*T D:$P(I,".")>L RD Q:N  D
"RTN","XQORM1",9,0)
 . D:$D(XQORM("S")) SCRN
"RTN","XQORM1",10,0)
 . D:$D(XQORM("R")) HIDE(.XQORM,.X)
"RTN","XQORM1",11,0)
 . W ?(J),$P(X,"^",4),?(J+M)
"RTN","XQORM1",12,0)
 . I '$D(XQORM("W")) W $P(X,"^",3)
"RTN","XQORM1",13,0)
 . E  X XQORM("W")
"RTN","XQORM1",14,0)
 . S L=$P(I,".")
"RTN","XQORM1",15,0)
 Q
"RTN","XQORM1",16,0)
SCRN Q:$D(XQORM("S"))[0  Q:'$L(XQORM("S"))  Q:'+X  D SCRN1
"RTN","XQORM1",17,0)
 Q:$T  S $P(X,"^",3)="("_$P(X,"^",3)_")"
"RTN","XQORM1",18,0)
 Q
"RTN","XQORM1",19,0)
SCRN1 N DA S DA=+X,DA(1)=+XQORM N I,J,L,M,T,X,Y X XQORM("S") Q
"RTN","XQORM1",20,0)
 ;
"RTN","XQORM1",21,0)
HIDE(XQORM,X)  ;
"RTN","XQORM1",22,0)
 N DA
"RTN","XQORM1",23,0)
 S DA=+X,DA(1)=+XQORM
"RTN","XQORM1",24,0)
 Q:$D(XQORM("R"))[0  Q:'$L(XQORM("R"))  Q:'+X
"RTN","XQORM1",25,0)
 I 0
"RTN","XQORM1",26,0)
 X XQORM("R")
"RTN","XQORM1",27,0)
 I $T D
"RTN","XQORM1",28,0)
 . S $P(X,"^",3)=""
"RTN","XQORM1",29,0)
 . S $P(X,"^",4)=""
"RTN","XQORM1",30,0)
 Q
"RTN","XQORM1",31,0)
 ;
"RTN","XQORM1",32,0)
PRMT ;From: XQORM
"RTN","XQORM1",33,0)
 S ORUPRMT=$S($D(XQORM("A"))[0:"Select Item(s): ",1:XQORM("A"))
"RTN","XQORM1",34,0)
 F ORU=0:0 D PRMT1 I Y D:(X'=" ")&(X?.ANP) EAT S:X="^^" DIROUT=1 D:X'?.ANP CC^XQORM4 D:$L(X)>80 LL^XQORM4 Q:($E(X)'="?")&(X?.ANP)&($L(X)'>80)  D:$E(X)="?" HELP^XQORM4 I $D(DIROUT) S X="^^" Q
"RTN","XQORM1",35,0)
 K ORUPRMT Q
"RTN","XQORM1",36,0)
PRMT1 S Y=0 W:XQORM(0)'["\" ! W ORUPRMT,$S($D(XQORM("B"))'[0:XQORM("B")_"// ",1:"")
"RTN","XQORM1",37,0)
 I '$L($T(INITKB^XGF)) D
"RTN","XQORM1",38,0)
 . R X:$S($D(DTIME):DTIME,1:300) S:'$T DTOUT=1,X="^"
"RTN","XQORM1",39,0)
 E  D  ; allow function key use
"RTN","XQORM1",40,0)
 . D INITKB^XGF()
"RTN","XQORM1",41,0)
 . S X=$$READ^XGF()
"RTN","XQORM1",42,0)
 . I $L(XGRT),XGRT'="CR" S X=XGRT S:$D(XQORM("XLATE",X)) X=XQORM("XLATE",X)
"RTN","XQORM1",43,0)
 . D RESETKB^XGF
"RTN","XQORM1",44,0)
 S:'$L(X)&($D(XQORM("B"))'[0) X=XQORM("B")
"RTN","XQORM1",45,0)
 I $D(XQORM("NO^")),X["^"!(X=""),X'?1"^^"1E.E D NU^XQORM4 Q
"RTN","XQORM1",46,0)
 S Y=1 Q
"RTN","XQORM1",47,0)
UP S X=$TR(X,"abcdefghijklmnopqrstuvwxyz","ABCDEFGHIJKLMNOPQRSTUVWXYZ")
"RTN","XQORM1",48,0)
 Q
"RTN","XQORM1",49,0)
EAT F I=0:0 Q:$E(X)]" "  Q:'$L(X)  S X=$E(X,2,999)
"RTN","XQORM1",50,0)
 F I=0:0 Q:$E(X,$L(X))]" "  Q:'$L(X)  S X=$E(X,1,$L(X)-1)
"RTN","XQORM1",51,0)
 Q
"RTN","XQORM1",52,0)
RD S N=0 W ! Q:$Y<(IOSL-2)  W !,"Press RETURN to continue or '^' to exit: "
"RTN","XQORM1",53,0)
 N X R X:$S($D(DTIME):DTIME,1:300) S:'$T X="^" S:$E(X)="^" N=1
"RTN","XQORM1",54,0)
 S (DX,DY)=0 X ^%ZOSF("XY") W !!
"RTN","XQORM1",55,0)
 Q
"RTN","XQORM1",56,0)
INHI() ; Switch to highlighted video (IOINHI must be defined by caller)
"RTN","XQORM1",57,0)
 S DX=$X#81,DY=$Y#25 W IOINHI X ^%ZOSF("XY")
"RTN","XQORM1",58,0)
 Q ""
"RTN","XQORM1",59,0)
INLO() ; Switch to lowlighted video (IOINLOW must be defined by caller)
"RTN","XQORM1",60,0)
 S DX=$X#81,DY=$Y#25 W IOINLOW X ^%ZOSF("XY")
"RTN","XQORM1",61,0)
 Q ""
"VER")
8.0^22.0
"^DD",101,101,0)
FIELD^^775^63
"^DD",101,101,0,"DDA")
N
"^DD",101,101,0,"DIK")
XQORC
"^DD",101,101,0,"DIKOLD")
XQORC
"^DD",101,101,0,"DT")
2991207
"^DD",101,101,0,"ID",1)
W "   ",$P(^(0),U,2)
"^DD",101,101,0,"ID",44)
W:$D(^(4)) "   ",$P(^(4),U,4)
"^DD",101,101,0,"IX","AB",101.0775,.01)

"^DD",101,101,0,"IX","AD",101.01,.01)

"^DD",101,101,0,"IX","AE",101,6)

"^DD",101,101,0,"IX","AHL1",101,770.1)

"^DD",101,101,0,"IX","AHL1A",101,770.3)

"^DD",101,101,0,"IX","AHL1B",101,770.4)

"^DD",101,101,0,"IX","AHL1C",101,770.95)

"^DD",101,101,0,"IX","AHL2",101,770.2)

"^DD",101,101,0,"IX","AHL21",101,770.1)

"^DD",101,101,0,"IX","AHL21A",101,770.3)

"^DD",101,101,0,"IX","AHL21C",101,770.95)

"^DD",101,101,0,"IX","AM",101,99)

"^DD",101,101,0,"IX","AM1",101,1)

"^DD",101,101,0,"IX","AM41",101,41)

"^DD",101,101,0,"IX","B",101,.01)

"^DD",101,101,0,"IX","B",101.02,.01)

"^DD",101,101,0,"IX","C",101,1)

"^DD",101,101,0,"IX","K",101.03,.01)

"^DD",101,101,0,"IX","K1",101,1)

"^DD",101,101,0,"IX","K2",101.02,.01)

"^DD",101,101,0,"IX","S",101.07,.01)

"^DD",101,101,0,"NM","PROTOCOL")

"^DD",101,101,0,"PT",1.1,4.2)

"^DD",101,101,0,"PT",57.1,1)

"^DD",101,101,0,"PT",69.4,.01)

"^DD",101,101,0,"PT",100,2)

"^DD",101,101,0,"PT",100.1,.01)

"^DD",101,101,0,"PT",100.99,4)

"^DD",101,101,0,"PT",100.99101,.01)

"^DD",101,101,0,"PT",100.99141,.01)

"^DD",101,101,0,"PT",100.9951,.01)

"^DD",101,101,0,"PT",100.99511,.01)

"^DD",101,101,0,"PT",100.9955,.03)

"^DD",101,101,0,"PT",101.01,.01)

"^DD",101,101,0,"PT",101.01,4)

"^DD",101,101,0,"PT",101.0775,.01)

"^DD",101,101,0,"PT",123,4)

"^DD",101,101,0,"PT",123,5)

"^DD",101,101,0,"PT",123,6)

"^DD",101,101,0,"PT",123.5,123.02)

"^DD",101,101,0,"PT",123.5,123.03)

"^DD",101,101,0,"PT",123.5,123.04)

"^DD",101,101,0,"PT",123.5101,.01)

"^DD",101,101,0,"PT",123.99,.01)

"^DD",101,101,0,"PT",577,.07)

"^DD",101,101,0,"PT",704.006,.01)

"^DD",101,101,0,"PT",772,10)

"^DD",101,101,0,"PT",773,8)

"^DD",101,101,0,"PT",798.1,13)

"^DD",101,101,0,"PT",995,1)

"^DD",101,101,0,"PT",8930.8,.04)

"^DD",101,101,0,"PT",9000010,.25)

"^DD",101,101,0,"VRPK")
XU
"^DD",101,101,.01,0)
NAME^FX^^0;1^K:X[""""!($A(X)=45) X I $D(X) D CHKNAME^XQORD101 I $D(X) K:$L(X)>63!($L(X)<3) X
"^DD",101,101,.01,1,0)
^.1
"^DD",101,101,.01,1,1,0)
101^B
"^DD",101,101,.01,1,1,1)
S ^ORD(101,"B",$E(X,1,63),DA)=""
"^DD",101,101,.01,1,1,2)
K ^ORD(101,"B",$E(X,1,63),DA)
"^DD",101,101,.01,1,2,0)
^^TRIGGER^101^5
"^DD",101,101,.01,1,2,1)
K DIV S DIV=X,D0=DA,DIV(0)=D0 S Y(1)=$S($D(^ORD(101,D0,0)):^(0),1:"") S X=$P(Y(1),U,5),X=X S DIU=X K Y S X=DIV S X=DUZ X ^DD(101,.01,1,2,1.4)
"^DD",101,101,.01,1,2,1.4)
S DIH=$S($D(^ORD(101,DIV(0),0)):^(0),1:""),DIV=X S $P(^(0),U,5)=DIV,DIH=101,DIG=5 D ^DICR:$N(^DD(DIH,DIG,1,0))>0
"^DD",101,101,.01,1,2,2)
Q
"^DD",101,101,.01,1,2,"CREATE VALUE")
S X=DUZ
"^DD",101,101,.01,1,2,"DELETE VALUE")
NO EFFECT
"^DD",101,101,.01,1,2,"FIELD")
CREATOR
"^DD",101,101,.01,3)
Enter a name that is preceded by the package namespace.
"^DD",101,101,.01,21,0)
^^1^1^2920731^^^^
"^DD",101,101,.01,21,1,0)
A unique name, which is preceded by the package namespace.
"^DD",101,101,.01,"DT")
2920617
"^DD",101,101,.01,"V",0)
^.12P^1^1
"^DD",101,101,.01,"V",1,0)
60^LABORATORY TEST^1^LAB^^n
"^DD",101,101,1,0)
ITEM TEXT^FX^^0;2^K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>63!($L(X)<3) X
"^DD",101,101,1,1,0)
^.1
"^DD",101,101,1,1,1,0)
101^C
"^DD",101,101,1,1,1,1)
S ORKX=X D UP^XQORDD1 S ^ORD(101,"C",$E(X,1,63),DA)="",X=ORKX K ORKX
"^DD",101,101,1,1,1,2)
S ORKX=X D UP^XQORDD1 K ^ORD(101,"C",$E(X,1,63),DA) S X=ORKX K ORKX
"^DD",101,101,1,1,2,0)
101^AM1^MUMPS
"^DD",101,101,1,1,2,1)
D REDO^XQORD101
"^DD",101,101,1,1,2,2)
D REDO^XQORD101
"^DD",101,101,1,1,3,0)
101^K1^MUMPS
"^DD",101,101,1,1,3,1)
D K11^XQORDD1
"^DD",101,101,1,1,3,2)
D K12^XQORDD1
"^DD",101,101,1,3)
ANSWER MUST BE 3-63 CHARACTERS IN LENGTH
"^DD",101,101,1,21,0)
^^1^1^2920224^^^^
"^DD",101,101,1,21,1,0)
The protocol's text as it appears to the user on the menu or subheader.
"^DD",101,101,1,"DT")
2890303
"^DD",101,101,1.1,0)
SYNONYM^101.02A^^2;0
"^DD",101,101,1.1,3)
Enter a synonym for this protocol
"^DD",101,101,1.1,21,0)
^^1^1^2920224^^^^
"^DD",101,101,1.1,21,1,0)
This is another name for the protocol that may be used on lookup.
"^DD",101,101,1.11,0)
PRINT NAME^F^^.1;1^K:$L(X)>7!($L(X)<1) X
"^DD",101,101,1.11,3)
Answer must be 1-7 characters in length.
"^DD",101,101,1.11,21,0)
^^2^2^2920224^
"^DD",101,101,1.11,21,1,0)
This is a shortened version of the item text to be used on print-outs
"^DD",101,101,1.11,21,2,0)
where the name must be abbreviated.
"^DD",101,101,1.11,"DT")
2910808
"^DD",101,101,2,0)
DISABLE^F^^0;3^K:$L(X)>40!($L(X)<1) X
"^DD",101,101,2,3)
Enter text to disable this protocol (1-40 characters).
"^DD",101,101,2,21,0)
^^3^3^2920224^^
"^DD",101,101,2,21,1,0)
This field disables use of the protocol when there is text in it.  The
"^DD",101,101,2,21,2,0)
text should be a short message explaining why use of the protocol has
"^DD",101,101,2,21,3,0)
been disabled, as it will be displayed if the protocol is selected.
"^DD",101,101,2,"DT")
2881207
"^DD",101,101,3,0)
LOCK^FX^^0;6^K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>30!($L(X)<1) X I $D(X) Q:$D(^DIC(19.1,"B",X))  W !,*7,"Key name must match exactly with a key in SECURITY KEY file." K X
"^DD",101,101,3,.1)
The name of the key required of the user to access this option
"^DD",101,101,3,1,0)
^.1^^0
"^DD",101,101,3,3)
Enter the exact name of the key required to access this option.
"^DD",101,101,3,4)
S X="??",DIC=19.1,DIC(0)="E" I $D(^DIC(19.1,0)),$P(^(0),U,3) W "CURRENT LOCKS:" D ^DIC W !
"^DD",101,101,3,21,0)
^^3^3^2920224^^^^
"^DD",101,101,3,21,1,0)
This field is used to deny access to users who have this option
"^DD",101,101,3,21,2,0)
as part of their menu. If an option has a lock, then only users
"^DD",101,101,3,21,3,0)
who hold the matching key can access it.
"^DD",101,101,3,"DT")
2900327
"^DD",101,101,3.5,0)
DESCRIPTION^101.06^^1;0
"^DD",101,101,3.5,3)
Enter a description for this protocol
"^DD",101,101,3.5,21,0)
^^1^1^2920224^^^
"^DD",101,101,3.5,21,1,0)
This field contains a brief explanation of the protocol.
"^DD",101,101,3.9,0)
PROHIBITED TIMES^F^^0;9^K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>9!($L(X)<9)!'(X?4N1"-"4N) X
"^DD",101,101,3.9,1,0)
^.1^^0
"^DD",101,101,3.9,3)
Enter the times in military format that this protocol cannot be used.
"^DD",101,101,3.9,21,0)
^^3^3^2920423^^^^
"^DD",101,101,3.9,21,1,0)
This specifies a time range during which this option cannot be accessed.
"^DD",101,101,3.9,21,2,0)
The time should be entered in military format. For example, to
"^DD",101,101,3.9,21,3,0)
prohibit an option from running between 9 AM and 2 PM, enter 0900-1400.
"^DD",101,101,3.9,"DT")
2900327
"^DD",101,101,4,0)
TYPE^RS^A:action;M:menu;O:protocol;Q:protocol menu;L:limited protocol;X:extended action;D:dialog;T:term;E:event driver;S:subscriber;^0;4^Q
"^DD",101,101,4,1,0)
^.1^^0
"^DD",101,101,4,3)
Specify a type for this protocol.
"^DD",101,101,4,21,0)
^^16^16^2920224^^^^
"^DD",101,101,4,21,1,0)
This field defines the type of protocol to be executed.  Types Q, O, and
"^DD",101,101,4,21,2,0)
L are strictly related to the 'Add orders' function.
"^DD",101,101,4,21,3,0)
  Q = Protocol menu - used for displaying and selecting orderable items
"^DD",101,101,4,21,4,0)
during the add sequence. When this type of protocol is encountered
"^DD",101,101,4,21,5,0)
OE/RR will ask the 'Select PATIENT:,' 'LOCATION:,' 'Provider:'
"^DD",101,101,4,21,6,0)
prompts and execute the transaction logic for the new orders
"^DD",101,101,4,21,7,0)
screen.  This is also true for type O and L.
"^DD",101,101,4,21,8,0)
O = Protocol - same as Q but the protocol is the item selected.
"^DD",101,101,4,21,9,0)
Protocols are directly executed when encountered.
"^DD",101,101,4,21,10,0)
L = Limited protocol - same as O but any existing sub-items are
"^DD",101,101,4,21,11,0)
not executed.
"^DD",101,101,4,21,12,0)
M = Menu - used for displaying and selecting items.
"^DD",101,101,4,21,13,0)
X = Extended action - protocols of this type execute the entry action
"^DD",101,101,4,21,14,0)
plus all sub-items.
"^DD",101,101,4,21,15,0)
  A = Action - same as X but any existing sub-items are
"^DD",101,101,4,21,16,0)
not executed.
"^DD",101,101,4,21,17,0)
  X = Extended action - protocols of this type execute the entry action
"^DD",101,101,4,21,18,0)
      plus all sub-items.
"^DD",101,101,4,21,19,0)
 
"^DD",101,101,4,21,20,0)
  A = Action - same as X but any existing sub-items are
"^DD",101,101,4,21,21,0)
      not executed.
"^DD",101,101,4,"DT")
2940722
"^DD",101,101,5,0)
CREATOR^RP200'^VA(200,^0;5^Q
"^DD",101,101,5,3)
Enter the creator of this protocol.
"^DD",101,101,5,5,1,0)
101^.01^2
"^DD",101,101,5,9)
^
"^DD",101,101,5,21,0)
^^1^1^2920224^^^
"^DD",101,101,5,21,1,0)
This field identifies who created the protocol.
"^DD",101,101,5,"DT")
2900820
"^DD",101,101,6,0)
FILE LINK^V^^5;1^Q
"^DD",101,101,6,1,0)
^.1^^-1
"^DD",101,101,6,1,1,0)
101^AE
"^DD",101,101,6,1,1,1)
S ^ORD(101,"AE",$E(X,1,30),DA)=""
"^DD",101,101,6,1,1,2)
K ^ORD(101,"AE",$E(X,1,30),DA)
"^DD",101,101,6,3)
Enter the file, if any, that this protocol is linked to.
"^DD",101,101,6,21,0)
^^2^2^2920224^^^^
"^DD",101,101,6,21,1,0)
This field is a variable pointer which may point to the entry in a file
"^DD",101,101,6,21,2,0)
to which a protocol is linked.
"^DD",101,101,6,21,3,0)

"^DD",101,101,6,"DT")
2910419
"^DD",101,101,6,"V",0)
^.12P^9^9
"^DD",101,101,6,"V",1,0)
19^OPTION^1^OPT^^n
"^DD",101,101,6,"V",2,0)
60^LAB^2^LAB^^n
"^DD",101,101,6,"V",3,0)
62^SAMPLE^3^SAM^^n
"^DD",101,101,6,"V",4,0)
61^SPECIMEN^4^SPEC^^n
"^DD",101,101,6,"V",5,0)
71^RADIOLOGY PROCEDURE^5^RAD^^n
"^DD",101,101,6,"V",6,0)
62.05^URGENCY^6^URG^^n
"^DD",101,101,6,"V",7,0)
62.07^EXECUTE CODE^7^EXE^^n
"^DD",101,101,6,"V",8,0)
123.5^SERVICE^8^S^n^n
"^DD",101,101,6,"V",9,0)
123.1^ACTION TYPES^9^A^^n
"^DD",101,101,8,0)
COST^NJ10,2^^5;2^S:X["$" X=$P(X,"$",2) K:X'?.N.1".".2N!(X>9999999)!(X<0) X
"^DD",101,101,8,3)
Type a Dollar Amount between 0 and 9999999, 2 Decimal Digits
"^DD",101,101,8,21,0)
^^1^1^2920224^^
"^DD",101,101,8,21,1,0)
This is the cost of filling the order associated with this protocol.
"^DD",101,101,8,"DT")
2890426
"^DD",101,101,10,0)
ITEM^101.01PA^^10;0
"^DD",101,101,10,3)
Enter items for this protocol.
"^DD",101,101,10,21,0)
^^1^1^2920731^^^^
"^DD",101,101,10,21,1,0)
This is the item multiple for a protocol
"^DD",101,101,12,0)
PACKAGE^P9.4'^DIC(9.4,^0;12^Q
"^DD",101,101,12,3)
Enter the package for this protocol.
"^DD",101,101,12,21,0)
^^1^1^2920224^^
"^DD",101,101,12,21,1,0)
Pointer to Package File (#9.4).
"^DD",101,101,12,"DT")
2881128
"^DD",101,101,15,0)
EXIT ACTION^K^^15;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",101,101,15,3)
ENTER STANDARD MUMPS CODE
"^DD",101,101,15,8.5)
@
"^DD",101,101,15,9)
@
"^DD",101,101,15,21,0)
^^2^2^2920224^^^
"^DD",101,101,15,21,1,0)
This field contains MUMPS code which will be executed on leaving
"^DD",101,101,15,21,2,0)
this option.  It is only applicable to Menu types.
"^DD",101,101,15,"DT")
2881121
"^DD",101,101,20,0)
ENTRY ACTION^K^^20;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",101,101,20,3)
ENTER STANDARD MUMPS CODE
"^DD",101,101,20,8.5)
@
"^DD",101,101,20,9)
@
"^DD",101,101,20,21,0)
^^2^2^2920224^^
"^DD",101,101,20,21,1,0)
This field contains MUMPS code which will be executed on entering
"^DD",101,101,20,21,2,0)
this option.  It is applicable to Menu and Action types.
"^DD",101,101,20,"DT")
2881121
"^DD",101,101,21,0)
REQUIRED VARIABLES^101.021A^^21;0
"^DD",101,101,21,3)
Enter the required variables for this protocol.
"^DD",101,101,21,21,0)
^^4^4^2920224^^
"^DD",101,101,21,21,1,0)
This lists the variables that must be defined for the proper execution of
"^DD",101,101,21,21,2,0)
this protocol.  This aids in documenting the protocol.  Also, in the case
"^DD",101,101,21,21,3,0)
of ';' jumping, the variables defined as required may be newed before
"^DD",101,101,21,21,4,0)
jumping, thus preserving the context when returning from the jump.
"^DD",101,101,24,0)
SCREEN^K^^24;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",101,101,24,3)
This is standard MUMPS code to screen an item from processing.
"^DD",101,101,24,8.5)
@
"^DD",101,101,24,9)
@
"^DD",101,101,24,21,0)
^^4^4^2920224^^
"^DD",101,101,24,21,1,0)
This field contains MUMPS code that screens out menu items or the
"^DD",101,101,24,21,2,0)
execution of particular items in a protocol.  Before each item is
"^DD",101,101,24,21,3,0)
displayed or executed, the screen is executed and the item is only
"^DD",101,101,24,21,4,0)
processed if $T is true.
"^DD",101,101,24,"DT")
2890426
"^DD",101,101,26,0)
HEADER^K^^26;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",101,101,26,3)
Enter standard MUMPS code that will used to replace the header on the menu.
"^DD",101,101,26,9)
@
"^DD",101,101,26,21,0)
^^2^2^2920224^^
"^DD",101,101,26,21,1,0)
In the case of menus (type M or Q), this contains MUMPS code that is 
"^DD",101,101,26,21,2,0)
executed to display a header for the menu.
"^DD",101,101,26,"DT")
2881205
"^DD",101,101,27,0)
MENU HELP^K^^27;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",101,101,27,3)
Enter standard MUMPS code that will be used to supplement the standard help prompt for this entry.
"^DD",101,101,27,9)
@
"^DD",101,101,27,21,0)
^^2^2^2920224^^
"^DD",101,101,27,21,1,0)
This contains MUMPS code that displays additional help to that already
"^DD",101,101,27,21,2,0)
given with the menu.
"^DD",101,101,27,"DT")
2881207
"^DD",101,101,28,0)
MENU PROMPT^F^^28;E1,245^K:$L(X)>245!($L(X)<1) X
"^DD",101,101,28,3)
Enter a replacement prompt for selecting items on this menu.
"^DD",101,101,28,21,0)
^^2^2^2920224^^
"^DD",101,101,28,21,1,0)
This contains text to replace the standard "Select Item: " prompt normally
"^DD",101,101,28,21,2,0)
given with a menu.
"^DD",101,101,28,"DT")
2881207
"^DD",101,101,29,0)
MENU DEFAULT^F^^29;E1,245^K:$L(X)>245!($L(X)<1) X
"^DD",101,101,29,3)
Enter a default for the menu prompt.
"^DD",101,101,29,21,0)
^^2^2^2920224^^
"^DD",101,101,29,21,1,0)
This field contains a default response (i.e., default selection from the
"^DD",101,101,29,21,2,0)
menu), if desired.
"^DD",101,101,29,"DT")
2920210
"^DD",101,101,30,0)
DIC {DIC}^F^^30;E1,64^K:$L(X)>64!($L(X)<1) X
"^DD",101,101,30,3)
Answer must be 1-64 characters in length.
"^DD",101,101,30,21,0)
^^3^3^2920224^^
"^DD",101,101,30,21,1,0)
This field is used as the global reference passed to ^DIC for a file
"^DD",101,101,30,21,2,0)
look-up.  The entry should be in the regular format for a call to ^DIC
"^DD",101,101,30,21,3,0)
i.e. ^GL(41,
"^DD",101,101,30,"DT")
2910312
"^DD",101,101,41,0)
COLUMN WIDTH^NJ3,0^^4;1^K:+X'=X!(X>132)!(X<25)!(X?.E1"."1N.N) X
"^DD",101,101,41,1,0)
^.1
"^DD",101,101,41,1,1,0)
101^AM41^MUMPS
"^DD",101,101,41,1,1,1)
D REDO^XQORD101
"^DD",101,101,41,1,1,2)
D REDO^XQORD101
"^DD",101,101,41,3)
Type a Number between 25 and 132, 0 Decimal Digits
"^DD",101,101,41,21,0)
^^2^2^2920224^^
"^DD",101,101,41,21,1,0)
This is the width, in characters, for each column on a menu.  For example,
"^DD",101,101,41,21,2,0)
to have 3 columns on an 80 character device, enter a column width of 26.
"^DD",101,101,41,"DT")
2881207
"^DD",101,101,42,0)
MNEMONIC WIDTH^NJ1,0^^4;2^K:+X'=X!(X>9)!(X<1)!(X?.E1"."1N.N) X
"^DD",101,101,42,1,0)
^.1^^0
"^DD",101,101,42,3)
Type a Number between 1 and 9, 0 Decimal Digits
"^DD",101,101,42,21,0)
^^2^2^2920224^^
"^DD",101,101,42,21,1,0)
This field allows the width allowed for mnemonics to be varied.  The
"^DD",101,101,42,21,2,0)
default width is 5.
"^DD",101,101,42,"DT")
2890211
"^DD",101,101,43,0)
PATH SWITCH^S^Y:YES;N:NO;^4;3^Q
"^DD",101,101,43,3)
Enter Y for YES, N for NO, ?? for detailed description.
"^DD",101,101,43,21,0)
^^5^5^2920224^^
"^DD",101,101,43,21,1,0)
This allows the user, when traversing back UP the tree of protocols, to
"^DD",101,101,43,21,2,0)
select a new path back down the tree.  In other words, the menu is
"^DD",101,101,43,21,3,0)
redisplayed when returning to that menu's level in the tree, and processing
"^DD",101,101,43,21,4,0)
back down the tree is possible from that point.  If nothing is selected
"^DD",101,101,43,21,5,0)
from the menu, the path continues back up the tree.
"^DD",101,101,43,"DT")
2881207
"^DD",101,101,44,0)
IDENTIFIER^F^^4;4^K:$L(X)>63!($L(X)<1) X
"^DD",101,101,44,3)
Answer must be 1-63 characters in length.
"^DD",101,101,44,21,0)
3^^3^3^2920224^^^
"^DD",101,101,44,21,1,0)
Entries into this file can be given identifiers to show context, function
"^DD",101,101,44,21,2,0)
and/or relationships.  For example, Digoxin may exist in the file as three
"^DD",101,101,44,21,3,0)
different entries with identifiers of SERUM, PLASMA and Drug.
"^DD",101,101,44,"DT")
2891130
"^DD",101,101,54,0)
HIDE^K^^24;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",101,101,54,3)
This is standard MUMPS code.
"^DD",101,101,54,8.5)
@
"^DD",101,101,54,9)
@
"^DD",101,101,54,21,0)
^.001^2^2^3120224^^^^
"^DD",101,101,54,21,1,0)
This field contain MUMPS code to hide this protocol. This code is
"^DD",101,101,54,21,2,0)
executed and the item is hidden if $T is true.
"^DD",101,101,54,"DT")
3120224
"^DD",101,101,99,0)
TIMESTAMP^F^^99;1^K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>15!($L(X)<1) X
"^DD",101,101,99,1,0)
^.1
"^DD",101,101,99,1,1,0)
101^AM^MUMPS
"^DD",101,101,99,1,1,1)
D SET^XQORD101
"^DD",101,101,99,1,1,2)
D KILL^XQORD101
"^DD",101,101,99,3)
ANSWER MUST BE 1-15 CHARACTERS IN LENGTH
"^DD",101,101,99,21,0)
^^2^2^2920224^^^^
"^DD",101,101,99,21,1,0)
This contains the $H time that fields which are necessary to menu display
"^DD",101,101,99,21,2,0)
were last changed.
"^DD",101,101,99,"DT")
2881122
"^DD",101,101,100,0)
*ORDER PRINT ACTION^K^^100;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",101,101,100,3)
ENTER STANDARD MUMPS CODE
"^DD",101,101,100,9)
@
"^DD",101,101,100,21,0)
^^4^4^2920224^^^^
"^DD",101,101,100,21,1,0)
***NOTICE- THIS FIELD WILL BE REMOVED IN A FUTURE VERSION***
"^DD",101,101,100,21,2,0)
Package action when a detailed listing of an order is requested.
"^DD",101,101,100,21,3,0)
Included in this file for backward compatability with earlier versions
"^DD",101,101,100,21,4,0)
of OE/RR.
"^DD",101,101,100,"DT")
2881209
"^DD",101,101,100.1,0)
*ORDER CANCEL ACTION^K^^100.1;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",101,101,100.1,3)
ENTER STANDARD MUMPS CODE
"^DD",101,101,100.1,9)
@
"^DD",101,101,100.1,21,0)
^^3^3^2920224^^^^
"^DD",101,101,100.1,21,1,0)
***NOTICE- THIS FIELD WILL BE REMOVED IN A FUTURE VERSION***
"^DD",101,101,100.1,21,2,0)
Package action when an order is cancelled or discontinued.  Included in
"^DD",101,101,100.1,21,3,0)
this file for backward compatability with earlier versions of OE/RR.
"^DD",101,101,100.1,"DT")
2881209
"^DD",101,101,100.2,0)
*ORDER PURGE ACTION^K^^100.2;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",101,101,100.2,3)
ENTER STANDARD MUMPS CODE
"^DD",101,101,100.2,9)
@
"^DD",101,101,100.2,21,0)
^^3^3^2920224^^^^
"^DD",101,101,100.2,21,1,0)
***NOTICE- THIS FIELD WILL BE REMOVED IN A FUTURE VERSION***
"^DD",101,101,100.2,21,2,0)
Package action when an order is to be purged from file 100.  Included in
"^DD",101,101,100.2,21,3,0)
this file for backward compatability with earlier versions of OE/RR.
"^DD",101,101,100.2,"DT")
2881209
"^DD",101,101,100.3,0)
ACCESS^101.03P^^3;0
"^DD",101,101,100.3,3)
Enter a security key to limit access to this protocol.
"^DD",101,101,100.3,21,0)
^^2^2^2920224^^^
"^DD",101,101,100.3,21,1,0)
This multiple contains the list of security keys which allow access to
"^DD",101,101,100.3,21,2,0)
the protocol.  If there are no keys, all users have access.
"^DD",101,101,101.01,0)
REQUIRES SIGNATURE^S^0:PHYSICIAN SIGNATURE;1:NO SIGNATURE REQUIRED;^101.01;1^Q
"^DD",101,101,101.01,3)
Enter a '1' if this protocol does not require a physician signature.
"^DD",101,101,101.01,21,0)
^^4^4^2920225^
"^DD",101,101,101.01,21,1,0)
This field is used to specify an orderable/protocol that does not
"^DD",101,101,101.01,21,2,0)
require a physician signature in OE/RR.  Some of the things entered
"^DD",101,101,101.01,21,3,0)
in OE/RR are considered instructions and don't require physician
"^DD",101,101,101.01,21,4,0)
signature.  An example of this might be an entry for an Early/Late tray.
"^DD",101,101,101.01,"DT")
2910809
"^DD",101,101,101.041,0)
DOMAIN (DATA TYPE)^S^D:date/time;F:free text;L:list or range;N:numeric;S:set of codes;Y:yes/no;P:pointer;M:menu;W:word processing;^101.04;1^Q
"^DD",101,101,101.041,3)
Enter the appropriate type for this prompt.
"^DD",101,101,101.041,21,0)
^^2^2^2920225^
"^DD",101,101,101.041,21,1,0)
This is the data type of a term (i.e. protocol of type term) used in a
"^DD",101,101,101.041,21,2,0)
dialog.
"^DD",101,101,101.041,"DT")
2910819
"^DD",101,101,101.042,0)
DEFAULT PROMPT^F^^101.04;2^K:$L(X)>30!($L(X)<1) X
"^DD",101,101,101.042,3)
Answer must be 1-30 characters in length.
"^DD",101,101,101.042,21,0)
^^3^3^2920225^
"^DD",101,101,101.042,21,1,0)
For this term, this is the prompt that is automatically used when the
"^DD",101,101,101.042,21,2,0)
term is used as an item in a dialog.  The prompt may be modified at the
"^DD",101,101,101.042,21,3,0)
item level.
"^DD",101,101,101.042,"DT")
2910819
"^DD",101,101,101.043,0)
DEFAULT ANSWER^F^^101.04;3^K:$L(X)>80!($L(X)<1) X
"^DD",101,101,101.043,3)
Answer must be 1-80 characters in length.
"^DD",101,101,101.043,21,0)
^^3^3^2920225^
"^DD",101,101,101.043,21,1,0)
For a term protocol, this is the default answer that is automatically used
"^DD",101,101,101.043,21,2,0)
when the term is used as an item in a dialog.  The default may be modified
"^DD",101,101,101.043,21,3,0)
at the item level.
"^DD",101,101,101.043,"DT")
2910819
"^DD",101,101,101.0431,0)
DEFAULT WORD PROCESSING ANSWER^101.0431^^101.0431;0
"^DD",101,101,101.0431,21,0)
^^2^2^2920225^
"^DD",101,101,101.0431,21,1,0)
This is text used as a template for an item in a dialog that is a word
"^DD",101,101,101.0431,21,2,0)
processing type.
"^DD",101,101,101.044,0)
DEFAULT HELP^F^^101.04;4^K:$L(X)>80!($L(X)<1) X
"^DD",101,101,101.044,3)
Answer must be 1-80 characters in length.
"^DD",101,101,101.044,21,0)
^^3^3^2920225^
"^DD",101,101,101.044,21,1,0)
For a term protocol, this is the help text that is automatically used when
"^DD",101,101,101.044,21,2,0)
the term is used as an item in a dialog.  The help text may be replaced at
"^DD",101,101,101.044,21,3,0)
the item level.
"^DD",101,101,101.044,"DT")
2910819
"^DD",101,101,101.045,0)
DOMAIN PARAMETER^F^^101.04;5^K:$L(X)>56!($L(X)<1) X
"^DD",101,101,101.045,3)
Answer must be 1-56 characters in length.
"^DD",101,101,101.045,21,0)
^^3^3^2920225^
"^DD",101,101,101.045,21,1,0)
This is a parameter that may be used to further specify the data type
"^DD",101,101,101.045,21,2,0)
(i.e. input transform) for a term protocol.  The parameter is what would
"^DD",101,101,101.045,21,3,0)
be placed in the second up-arrow piece of DIR(0) when calling the reader.
"^DD",101,101,101.045,"DT")
2911126
"^DD",101,101,101.05,0)
METHOD^101.05I^^101.05;0
"^DD",101,101,101.05,21,0)
^^2^2^2920224^^
"^DD",101,101,101.05,21,1,0)
This number identifies individual methods (actions) that may be invoked
"^DD",101,101,101.05,21,2,0)
for this protocol.
"^DD",101,101,101.05,23,0)
^^1^1^2920224^^
"^DD",101,101,101.05,23,1,0)
Method numbers correspond to ORACTION numbers.
"^DD",101,101,101.07,0)
SET MEMBERSHIP^101.07^^101.07;0
"^DD",101,101,101.07,21,0)
^^3^3^2920224^^
"^DD",101,101,101.07,21,1,0)
This is a namespaced name of a set.  If this is entered, a cross reference
"^DD",101,101,101.07,21,2,0)
of the format "S.set membership" is created.  This allows rapid lookups on
"^DD",101,101,101.07,21,3,0)
subsets of the Protocol file.
"^DD",101,101,770.1,0)
SENDING APPLICATION^P771^HL(771,^770;1^Q
"^DD",101,101,770.1,.1)

"^DD",101,101,770.1,1,0)
^.1
"^DD",101,101,770.1,1,1,0)
101^AHL1^MUMPS
"^DD",101,101,770.1,1,1,1)
N HL770 S HL770=$G(^ORD(101,DA,770)) S:$P(HL770,"^",3)&($P(HL770,"^",4))&($P(HL770,"^",10)) ^ORD(101,"AHL1",X,$P(HL770,"^",3),$P(HL770,"^",4),$P(HL770,"^",10),DA)=""
"^DD",101,101,770.1,1,1,2)
N HL770 S HL770=$G(^ORD(101,DA,770)) K:$P(HL770,"^",3)&($P(HL770,"^",4))&($P(HL770,"^",10)) ^ORD(101,"AHL1",X,$P(HL770,"^",3),$P(HL770,"^",4),$P(HL770,"^",10),DA)
"^DD",101,101,770.1,1,1,3)
This cross reference is required to look up the protocol related to an incoming message.
"^DD",101,101,770.1,1,1,"%D",0)
^^5^5^2990714^
"^DD",101,101,770.1,1,1,"%D",1,0)
This cross reference is used to look up the protocol related to an incoming 
"^DD",101,101,770.1,1,1,"%D",2,0)
message at the time the incoming message is received.  This cross reference
"^DD",101,101,770.1,1,1,"%D",3,0)
is composed of values from the Server Application, Message Type, Event
"^DD",101,101,770.1,1,1,"%D",4,0)
Type and Version ID fields. This cross reference works in conjunction with
"^DD",101,101,770.1,1,1,"%D",5,0)
the AHL1A, AHL1B and AHL1C cross references.
"^DD",101,101,770.1,1,1,"DT")
2990714
"^DD",101,101,770.1,1,2,0)
101^AHL21^MUMPS
"^DD",101,101,770.1,1,2,1)
N HL770 S HL770=$G(^ORD(101,DA,770)) S:$P(HL770,"^",3)&($P(HL770,"^",10)) ^ORD(101,"AHL21",X,$P(HL770,"^",3),$P(HL770,"^",10),DA)=""
"^DD",101,101,770.1,1,2,2)
N HL770 S HL770=$G(^ORD(101,DA,770)) K:$P(HL770,"^",3)&($P(HL770,"^",10)) ^ORD(101,"AHL21",X,$P(HL770,"^",3),$P(HL770,"^",10),DA)
"^DD",101,101,770.1,1,2,3)
This cross reference is required to look up the protocol related to an incoming message without an event type.
"^DD",101,101,770.1,1,2,"%D",0)
^^5^5^2990714^
"^DD",101,101,770.1,1,2,"%D",1,0)
This cross reference is used to look up the protocol related to an
"^DD",101,101,770.1,1,2,"%D",2,0)
incoming message without an event type at the time the incoming message is
"^DD",101,101,770.1,1,2,"%D",3,0)
received.  This cross reference is composed of values from the Server
"^DD",101,101,770.1,1,2,"%D",4,0)
Application, Message Type, and Version ID fields.  This cross reference
"^DD",101,101,770.1,1,2,"%D",5,0)
works in conjunction with the AHL21A and AHL21C cross references.
"^DD",101,101,770.1,1,2,"DT")
2990714
"^DD",101,101,770.1,3)
Enter the application that initiates the transaction.
"^DD",101,101,770.1,21,0)
^^2^2^2990707^^^
"^DD",101,101,770.1,21,1,0)
Enter the name of the application that initiates a transaction. It
"^DD",101,101,770.1,21,2,0)
is required only when defining an EVENT POINT protocol.
"^DD",101,101,770.1,"DT")
2990714
"^DD",101,101,770.11,0)
RESPONSE MESSAGE TYPE^P771.2'^HL(771.2,^770;11^Q
"^DD",101,101,770.11,3)
Enter the message type of the expected response.
"^DD",101,101,770.11,21,0)
^^11^11^2990713^
"^DD",101,101,770.11,21,1,0)
Enter the message type of the expected RESPONSE. It should only be defined
"^DD",101,101,770.11,21,2,0)
on a SUBSCRIBER PROTOCOL.
"^DD",101,101,770.11,21,3,0)
 
"^DD",101,101,770.11,21,4,0)
NOTE:
"^DD",101,101,770.11,21,5,0)
In a contract between the initiating system and the responding system, the
"^DD",101,101,770.11,21,6,0)
Event Driver protocol defines the characteristics of the INITIATING
"^DD",101,101,770.11,21,7,0)
SYSTEM. The Initiating System initiates either queries or unsolicited
"^DD",101,101,770.11,21,8,0)
update messages. A Subscriber Protocol defines the characteristics of the
"^DD",101,101,770.11,21,9,0)
RESPONDING SYSTEM. The responding system completes a transaction by
"^DD",101,101,770.11,21,10,0)
returning either an acknowledgement and/or a response to the specific
"^DD",101,101,770.11,21,11,0)
query message.
"^DD",101,101,770.11,"DT")
2990617
"^DD",101,101,770.14,0)
BATCH/FILE MESSAGE COMMIT ACK^S^1:YES;0:NO;^770;14^Q
"^DD",101,101,770.14,21,0)
^^6^6^2980923^^
"^DD",101,101,770.14,21,1,0)
In a bi-directional interface, this field will be used 
"^DD",101,101,770.14,21,2,0)
to determine whether or not a Batch or File message should
"^DD",101,101,770.14,21,3,0)
send or receive a Commit Acknowledgement.  A Batch or File
"^DD",101,101,770.14,21,4,0)
message will always send/receive an Application Ack. This
"^DD",101,101,770.14,21,5,0)
feature is non-standard according to HL7.  It is needed to
"^DD",101,101,770.14,21,6,0)
insure the receipt of a message.
"^DD",101,101,770.14,"DT")
2980728
"^DD",101,101,770.2,0)
RECEIVING APPLICATION^P771^HL(771,^770;2^Q
"^DD",101,101,770.2,.1)

"^DD",101,101,770.2,1,0)
^.1
"^DD",101,101,770.2,1,1,0)
101^AHL2
"^DD",101,101,770.2,1,1,1)
S ^ORD(101,"AHL2",$E(X,1,30),DA)=""
"^DD",101,101,770.2,1,1,2)
K ^ORD(101,"AHL2",$E(X,1,30),DA)
"^DD",101,101,770.2,1,1,3)
This cross reference is needed to provide a list of Client (Subscriber) protocols.
"^DD",101,101,770.2,1,1,"%D",0)
^^2^2^2950223^
"^DD",101,101,770.2,1,1,"%D",1,0)
This cross reference is used to provide a list of Client (Subscriber)
"^DD",101,101,770.2,1,1,"%D",2,0)
protocols.
"^DD",101,101,770.2,1,1,"DT")
2950223
"^DD",101,101,770.2,3)
The application that will receive the message.
"^DD",101,101,770.2,21,0)
^^3^3^2990706^
"^DD",101,101,770.2,21,1,0)
This is the application that receives a message. It is otherwise known as
"^DD",101,101,770.2,21,2,0)
the "responding" application when a transaction takes place. This
"^DD",101,101,770.2,21,3,0)
information is required for SUBSCRIBER protocols only.
"^DD",101,101,770.2,"DT")
2990713
"^DD",101,101,770.3,0)
TRANSACTION MESSAGE TYPE^P771.2'^HL(771.2,^770;3^Q
"^DD",101,101,770.3,.1)

"^DD",101,101,770.3,1,0)
^.1
"^DD",101,101,770.3,1,1,0)
101^AHL1A^MUMPS
"^DD",101,101,770.3,1,1,1)
N HL770 S HL770=$G(^ORD(101,DA,770)) S:$P(HL770,"^")&($P(HL770,"^",4))&($P(HL770,"^",10)) ^ORD(101,"AHL1",$P(HL770,"^"),X,$P(HL770,"^",4),$P(HL770,"^",10),DA)=""
"^DD",101,101,770.3,1,1,2)
N HL770 S HL770=$G(^ORD(101,DA,770)) K:$P(HL770,"^")&($P(HL770,"^",4))&($P(HL770,"^",10)) ^ORD(101,"AHL1",$P(HL770,"^"),X,$P(HL770,"^",4),$P(HL770,"^",10),DA)
"^DD",101,101,770.3,1,1,3)
This cross reference is required to look up the protocol related to an incoming message.
"^DD",101,101,770.3,1,1,"%D",0)
^^5^5^2990714^
"^DD",101,101,770.3,1,1,"%D",1,0)
This cross reference is used to look up the protocol related to an incoming 
"^DD",101,101,770.3,1,1,"%D",2,0)
message at the time the incoming message is received.  This cross reference
"^DD",101,101,770.3,1,1,"%D",3,0)
is composed of values from the Server Application, Message Type, Event
"^DD",101,101,770.3,1,1,"%D",4,0)
Type and Version ID fields. This cross reference works in conjunction with
"^DD",101,101,770.3,1,1,"%D",5,0)
the AHL1, AHL1B and AHL1C cross references.
"^DD",101,101,770.3,1,1,"DT")
2990714
"^DD",101,101,770.3,1,2,0)
101^AHL21A^MUMPS
"^DD",101,101,770.3,1,2,1)
N HL770 S HL770=$G(^ORD(101,DA,770)) S:$P(HL770,"^")&($P(HL770,"^",10)) ^ORD(101,"AHL21",$P(HL770,"^"),X,$P(HL770,"^",10),DA)=""
"^DD",101,101,770.3,1,2,2)
N HL770 S HL770=$G(^ORD(101,DA,770)) K:$P(HL770,"^")&($P(HL770,"^",10)) ^ORD(101,"AHL21",$P(HL770,"^"),X,$P(HL770,"^",10),DA)
"^DD",101,101,770.3,1,2,3)
This cross reference is required to look up the protocol related to an incoming message without an event type.
"^DD",101,101,770.3,1,2,"%D",0)
^^5^5^2990714^
"^DD",101,101,770.3,1,2,"%D",1,0)
This cross reference is used to look up the protocol related to an
"^DD",101,101,770.3,1,2,"%D",2,0)
incoming message without an event type at the time the incoming message is
"^DD",101,101,770.3,1,2,"%D",3,0)
received.  This cross reference is composed of values from the Server
"^DD",101,101,770.3,1,2,"%D",4,0)
Application, Message Type and Version ID fields. This cross reference
"^DD",101,101,770.3,1,2,"%D",5,0)
works in conjunction with the AHL21 and AHL21C cross references.
"^DD",101,101,770.3,1,2,"DT")
2990714
"^DD",101,101,770.3,3)
Enter the HL7 MESSAGE TYPE that is sent by the initiating system.
"^DD",101,101,770.3,21,0)
^^12^12^2990713^^
"^DD",101,101,770.3,21,1,0)
Enter the name of the message type for the the message that is sent from
"^DD",101,101,770.3,21,2,0)
the initiating system. When initiating a new transaction, this field is
"^DD",101,101,770.3,21,3,0)
referenced when generating the header for the outbound message.
"^DD",101,101,770.3,21,4,0)
 
"^DD",101,101,770.3,21,5,0)
NOTE:
"^DD",101,101,770.3,21,6,0)
In a contract between the initiating system and the responding system, the
"^DD",101,101,770.3,21,7,0)
Event Driver protocol defines the characteristics of the INITIATING
"^DD",101,101,770.3,21,8,0)
SYSTEM. The Initiating System initiates either queries or unsolicited
"^DD",101,101,770.3,21,9,0)
update messages. A Subscriber Protocol defines the characteristics of the
"^DD",101,101,770.3,21,10,0)
RESPONDING SYSTEM. The responding system completes a transaction by
"^DD",101,101,770.3,21,11,0)
returning either an acknowledgement and/or a response to the specific
"^DD",101,101,770.3,21,12,0)
query message.
"^DD",101,101,770.3,"DT")
2990714
"^DD",101,101,770.4,0)
EVENT TYPE^P779.001'^HL(779.001,^770;4^Q
"^DD",101,101,770.4,1,0)
^.1^^-1
"^DD",101,101,770.4,1,1,0)
101^AHL1B^MUMPS
"^DD",101,101,770.4,1,1,1)
N HL770 S HL770=$G(^ORD(101,DA,770)) S:$P(HL770,"^")&($P(HL770,"^",3))&($P(HL770,"^",10)) ^ORD(101,"AHL1",$P(HL770,"^"),$P(HL770,"^",3),X,$P(HL770,"^",10),DA)=""
"^DD",101,101,770.4,1,1,2)
N HL770 S HL770=$G(^ORD(101,DA,770)) K:$P(HL770,"^")&($P(HL770,"^",3))&($P(HL770,"^",10)) ^ORD(101,"AHL1",$P(HL770,"^"),$P(HL770,"^",3),X,$P(HL770,"^",10),DA)
"^DD",101,101,770.4,1,1,3)
This cross reference is required to look up the protocol related to an incoming message.
"^DD",101,101,770.4,1,1,"%D",0)
^^5^5^2990714^
"^DD",101,101,770.4,1,1,"%D",1,0)
This cross reference is used to look up the protocol related to an incoming 
"^DD",101,101,770.4,1,1,"%D",2,0)
message at the time the incoming message is received.  This cross reference
"^DD",101,101,770.4,1,1,"%D",3,0)
is composed of values from the Server Application, Message Type, Event
"^DD",101,101,770.4,1,1,"%D",4,0)
Type, and Version ID fields.  This cross reference works in conjunction
"^DD",101,101,770.4,1,1,"%D",5,0)
with the AHL1, AHL1A, and AHL1C cross references.
"^DD",101,101,770.4,1,1,"DT")
2990714
"^DD",101,101,770.4,3)
The event type associated with the message to be generated.
"^DD",101,101,770.4,21,0)
^^27^27^2990712^
"^DD",101,101,770.4,21,1,0)
This is the HL7 Event Type code for the message represented by this
"^DD",101,101,770.4,21,2,0)
protocol. In HL7, the message type and event type of an application
"^DD",101,101,770.4,21,3,0)
response message may be different from the original message.
"^DD",101,101,770.4,21,4,0)
 
"^DD",101,101,770.4,21,5,0)
If this is an event point protocol, enter the event type
"^DD",101,101,770.4,21,6,0)
corresponding to the initial message generated by the SENDING APPLICATION.
"^DD",101,101,770.4,21,7,0)
 
"^DD",101,101,770.4,21,8,0)
 
"^DD",101,101,770.4,21,9,0)
If this is a subscriber protocol, then enter the event type corresponding
"^DD",101,101,770.4,21,10,0)
to the RECEIVING APPLICATION response. Note that an event type is not
"^DD",101,101,770.4,21,11,0)
required when responding with a general acknowledgement (ACK) and the
"^DD",101,101,770.4,21,12,0)
receiving application does not always need to generate a response.
"^DD",101,101,770.4,21,13,0)
 
"^DD",101,101,770.4,21,14,0)
NOTE:
"^DD",101,101,770.4,21,15,0)
 
"^DD",101,101,770.4,21,16,0)
1. In "original acknowledgement mode" the receiving application always
"^DD",101,101,770.4,21,17,0)
generates the response.
"^DD",101,101,770.4,21,18,0)
2. In "enhanced acknowledgement mode" the HL7 package may be configured to
"^DD",101,101,770.4,21,19,0)
produce a "commit ack" before the application receives the message. If the
"^DD",101,101,770.4,21,20,0)
receiving application does not need to generate a response in addition to
"^DD",101,101,770.4,21,21,0)
the ack, then the event type is the same as the original message (and the
"^DD",101,101,770.4,21,22,0)
message type would be ACK)
"^DD",101,101,770.4,21,23,0)
3. In "enhanced acknowledgement mode with two-phase commit" the HL7
"^DD",101,101,770.4,21,24,0)
package generates a commit ack, and passes the message to the application.
"^DD",101,101,770.4,21,25,0)
The second phase of the transaction occurs when the application is ready
"^DD",101,101,770.4,21,26,0)
to initiate a response. This is interpreted as the start of a new
"^DD",101,101,770.4,21,27,0)
transaction and may require a commit ack itself.
"^DD",101,101,770.4,"DT")
2990714
"^DD",101,101,770.5,0)
MESSAGE STRUCTURE^P779.005'^HL(779.005,^770;5^Q
"^DD",101,101,770.5,3)
Enter the HL7 message structure code.
"^DD",101,101,770.5,21,0)
^^1^1^3000119^
"^DD",101,101,770.5,21,1,0)
The message structure is associated with the message type and event type defined by HL7 v2.3.1 and beyond.
"^DD",101,101,770.5,"DT")
3000119
"^DD",101,101,770.6,0)
PROCESSING ID^S^D:debug;^770;6^Q
"^DD",101,101,770.6,3)
Set this only for DEBUG MODE. Use HL7 site params for Test or Production
"^DD",101,101,770.6,21,0)
^^13^13^3000509^
"^DD",101,101,770.6,21,1,0)
This field describes how a message should be processed once it is handed
"^DD",101,101,770.6,21,2,0)
off to the receiving application. 
"^DD",101,101,770.6,21,3,0)
 
"^DD",101,101,770.6,21,4,0)
PROCESSING ID is a required field in the HL7 message header. However, the
"^DD",101,101,770.6,21,5,0)
Event Driver protocol entry is only used whenset to DEBUG. Data for the
"^DD",101,101,770.6,21,6,0)
header is normally derived from the HL COMMUNICATION SERVER FILE. If
"^DD",101,101,770.6,21,7,0)
testing a transaction in Debug mode, make sure it is changed on both the
"^DD",101,101,770.6,21,8,0)
sending and receiving system.
"^DD",101,101,770.6,21,9,0)
 
"^DD",101,101,770.6,21,10,0)
 
"^DD",101,101,770.6,21,11,0)
The receiving application developer should consider checking this portion
"^DD",101,101,770.6,21,12,0)
of the header before filing data on a production system. Training and
"^DD",101,101,770.6,21,13,0)
Debug messages may not be suitable for filing.
"^DD",101,101,770.6,"DT")
3000509
"^DD",101,101,770.7,0)
LOGICAL LINK^P870'^HLCS(870,^770;7^Q
"^DD",101,101,770.7,3)
This field should be left blank for internal DHCP to DHCP communications.  Otherwise, this field associates the event protocol with the communication information needed to transmit a message.
"^DD",101,101,770.7,21,0)
^^5^5^2990712^
"^DD",101,101,770.7,21,1,0)
This field is used with a SUBSCRIBER PROTOCOL to describe the network path
"^DD",101,101,770.7,21,2,0)
to the subscriber. It is most often used with a fixed point-to-point
"^DD",101,101,770.7,21,3,0)
interface between Vista and another system, e.g., a local COTS application
"^DD",101,101,770.7,21,4,0)
or another Vista facility. See the documentation on use of the ROUTING
"^DD",101,101,770.7,21,5,0)
LOGIC field and "dynamic addressing" for more complex routing scenarios.
"^DD",101,101,770.7,"DT")
2941017
"^DD",101,101,770.8,0)
ACCEPT ACK CODE^P779.003'^HL(779.003,^770;8^Q
"^DD",101,101,770.8,3)
This field specifies the method for handling accept acknowledgements to a message.
"^DD",101,101,770.8,21,0)
^^4^4^2990712^
"^DD",101,101,770.8,21,1,0)
This field defines whether or not a COMMIT ACK will be generated by the
"^DD",101,101,770.8,21,2,0)
HL7 package. This only applies to transactions using version 2.2 and
"^DD",101,101,770.8,21,3,0)
higher of the HL7 Standard. See Chapter 2 of the HL7 Standard for details
"^DD",101,101,770.8,21,4,0)
of Enhanced Mode Acknowledgements.
"^DD",101,101,770.8,"DT")
2940928
"^DD",101,101,770.9,0)
APPLICATION ACK TYPE^P779.003'^HL(779.003,^770;9^Q
"^DD",101,101,770.9,3)
This field specifies the method for handling application acknowledgements to a message.
"^DD",101,101,770.9,21,0)
^^27^27^2990712^
"^DD",101,101,770.9,21,1,0)
For transactions using versions 2.2 and higher of the HL7 standard, this
"^DD",101,101,770.9,21,2,0)
field defines whether or not the receiving application is expected to
"^DD",101,101,770.9,21,3,0)
return an acknowledgement. Enhanced Mode Application Acks are always
"^DD",101,101,770.9,21,4,0)
initiated as a new transaction. The following is an example of a 2-phased
"^DD",101,101,770.9,21,5,0)
acknowledgement over a tcp connection.
"^DD",101,101,770.9,21,6,0)
 
"^DD",101,101,770.9,21,7,0)
 
"^DD",101,101,770.9,21,8,0)
(A)INITIATING SYSTEM         (B)RESPONDING SYSTEM
"^DD",101,101,770.9,21,9,0)
 
"^DD",101,101,770.9,21,10,0)
PHASE I
"^DD",101,101,770.9,21,11,0)
Open connection to B
"^DD",101,101,770.9,21,12,0)
send ADT/A04----------------->receive ADT/A04
"^DD",101,101,770.9,21,13,0)
                              validate header
"^DD",101,101,770.9,21,14,0)
                              commit to safe storage
"^DD",101,101,770.9,21,15,0)
receive CA<-------------------send CA to A
"^DD",101,101,770.9,21,16,0)
Close connection
"^DD",101,101,770.9,21,17,0)
 
"^DD",101,101,770.9,21,18,0)
PHASE II
"^DD",101,101,770.9,21,19,0)
                              handoff to receiving Application
"^DD",101,101,770.9,21,20,0)
                              parse and validate message content
"^DD",101,101,770.9,21,21,0)
                              generate APPLICATION ACCEPT ACK
"^DD",101,101,770.9,21,22,0)
                              Open connection to A
"^DD",101,101,770.9,21,23,0)
receive AA<-------------------send AA
"^DD",101,101,770.9,21,24,0)
validate header
"^DD",101,101,770.9,21,25,0)
commit to safe storage
"^DD",101,101,770.9,21,26,0)
send CA to B------------------>receive CA
"^DD",101,101,770.9,21,27,0)
                               close connection
"^DD",101,101,770.9,"DT")
2940928
"^DD",101,101,770.95,0)
VERSION ID^P771.5'^HL(771.5,^770;10^Q
"^DD",101,101,770.95,1,0)
^.1
"^DD",101,101,770.95,1,1,0)
101^AHL1C^MUMPS
"^DD",101,101,770.95,1,1,1)
N HL770 S HL770=$G(^ORD(101,DA,770)) S:$P(HL770,"^")&($P(HL770,"^",3))&($P(HL770,"^",4)) ^ORD(101,"AHL1",$P(HL770,"^"),$P(HL770,"^",3),$P(HL770,"^",4),X,DA)=""
"^DD",101,101,770.95,1,1,2)
N HL770 S HL770=$G(^ORD(101,DA,770)) K:$P(HL770,"^")&($P(HL770,"^",3))&($P(HL770,"^",4)) ^ORD(101,"AHL1",$P(HL770,"^"),$P(HL770,"^",3),$P(HL770,"^",4),X,DA)
"^DD",101,101,770.95,1,1,3)
This cross reference is required to look up the protocol related to an incoming message.
"^DD",101,101,770.95,1,1,"%D",0)
^^5^5^2990714^^^^
"^DD",101,101,770.95,1,1,"%D",1,0)
This cross reference is used to look up the protocol related to an
"^DD",101,101,770.95,1,1,"%D",2,0)
incoming message at the time the incoming message is received.  This cross
"^DD",101,101,770.95,1,1,"%D",3,0)
reference is composed of values from the Server Application, Message Type,
"^DD",101,101,770.95,1,1,"%D",4,0)
Event Type, and Version ID fields.  This cross reference works in
"^DD",101,101,770.95,1,1,"%D",5,0)
conjunction with the AHL1, AHL1A, and AHL1B cross references.
"^DD",101,101,770.95,1,1,"DT")
2990714
"^DD",101,101,770.95,1,2,0)
101^AHL21C^MUMPS
"^DD",101,101,770.95,1,2,1)
N HL770 S HL770=$G(^ORD(101,DA,770)) S:$P(HL770,"^")&($P(HL770,"^",3)) ^ORD(101,"AHL21",$P(HL770,"^"),$P(HL770,"^",3),X,DA)=""
"^DD",101,101,770.95,1,2,2)
N HL770 S HL770=$G(^ORD(101,DA,770)) K:$P(HL770,"^")&($P(HL770,"^",3)) ^ORD(101,"AHL21",$P(HL770,"^"),$P(HL770,"^",3),X,DA)
"^DD",101,101,770.95,1,2,3)
This cross reference is required to look up the protocol related to an incoming message without an event type.
"^DD",101,101,770.95,1,2,"%D",0)
^^5^5^2990714^^^^
"^DD",101,101,770.95,1,2,"%D",1,0)
This cross reference is used to look up the protocol related to an
"^DD",101,101,770.95,1,2,"%D",2,0)
incoming message without an event type at the time the incoming message is
"^DD",101,101,770.95,1,2,"%D",3,0)
received.  This cross reference is composed of values from the Server
"^DD",101,101,770.95,1,2,"%D",4,0)
Application, Message Type, and Version ID fields.  This cross reference
"^DD",101,101,770.95,1,2,"%D",5,0)
works in conjunction with the AHL21 and AHL21A cross references.
"^DD",101,101,770.95,1,2,"DT")
2990714
"^DD",101,101,770.95,3)
Enter the version of the HL7 Standard used to implement this transaction
"^DD",101,101,770.95,12)
Only version IDs assigned to the Message Type selected are applicable.
"^DD",101,101,770.95,12.1)
S DIC("S")="N HLX S HLX=+$P(^ORD(101,DA,770),U,3) I $S('HLX:0,'$O(^HL(771.2,HLX,""V"",0)):0,1:$D(^HL(771.2,HLX,""V"",""B"",+$O(^HL(771.5,""B"",X,0)))))"
"^DD",101,101,770.95,21,0)
^^4^4^2990712^
"^DD",101,101,770.95,21,1,0)
Enter the version of the HL7 standard used to implement this transaction.
"^DD",101,101,770.95,21,2,0)
 
"^DD",101,101,770.95,21,3,0)
Note that a screen has been added to insure that the version selected
"^DD",101,101,770.95,21,4,0)
corresponds to the appropriate version of the Message Type defined.
"^DD",101,101,770.95,"DT")
2990824
"^DD",101,101,771,0)
PROCESSING ROUTINE^K^^771;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",101,101,771,3)
  This is Standard MUMPS code.
"^DD",101,101,771,9)
@
"^DD",101,101,771,21,0)
^^4^4^2990712^
"^DD",101,101,771,21,1,0)
This field is executed on the receiving system. It defines the routine
"^DD",101,101,771,21,2,0)
used to process the original inbound message in a transaction and to
"^DD",101,101,771,21,3,0)
GENERATE and APPLICATION response/ACK back to the sending system using the
"^DD",101,101,771,21,4,0)
entry point, GENACK^HLMA1.
"^DD",101,101,771,"DT")
2990712
"^DD",101,101,772,0)
RESPONSE PROCESSING ROUTINE^K^^772;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",101,101,772,3)
Code that executes the routine to generate an acknowledgement message (for a subscriber application) or to process an acknowledgement message (for a server application).  This is Standard MUMPS code.
"^DD",101,101,772,9)
@
"^DD",101,101,772,21,0)
^^7^7^2990712^
"^DD",101,101,772,21,1,0)
This field is executed on the sending system when an Acknowledgement or
"^DD",101,101,772,21,2,0)
Query response is received. The message ID of the original message is
"^DD",101,101,772,21,3,0)
always contained within the response. This is used to identify the
"^DD",101,101,772,21,4,0)
location of the original message and the corresponding event point
"^DD",101,101,772,21,5,0)
protocol. Note that this pertains to Original and Enhanced Mode
"^DD",101,101,772,21,6,0)
Application Acks only. The HL7 package generates and processes
"^DD",101,101,772,21,7,0)
Enhanced mode Commit Accepts internally.
"^DD",101,101,772,"DT")
2990712
"^DD",101,101,773.1,0)
SENDING FACILITY REQUIRED?^S^1:YES;0:NO;^773;1^Q
"^DD",101,101,773.1,3)
Enter 'Y' for 'YES' if the sending facility field is required in the message header segment.
"^DD",101,101,773.1,"DT")
2940928
"^DD",101,101,773.2,0)
RECEIVING FACILITY REQUIRED?^S^1:YES;0:NO;^773;2^Q
"^DD",101,101,773.2,3)
Enter 'Y' for 'YES' if the receiving facility field is required in the message header segment.
"^DD",101,101,773.2,"DT")
2940928
"^DD",101,101,773.3,0)
SECURITY REQUIRED?^S^1:YES;0:NO;^773;3^Q
"^DD",101,101,773.3,3)
Enter 'Y' for 'YES' if the security field is required in the message header segment.
"^DD",101,101,773.3,"DT")
2940928
"^DD",101,101,773.4,0)
DATE/TIME OF MESSAGE REQUIRED?^S^1:YES;0:NO;^773;4^Q
"^DD",101,101,773.4,3)
Enter 'Y' for 'YES' if the date/time of message field is required in the message header segment.
"^DD",101,101,773.4,"DT")
2990712
"^DD",101,101,773.5,0)
ACK MODE SET IN SUBSCRIBER^S^1:YES;0:NO;^773;5^Q
"^DD",101,101,773.5,3)
Enter 'Y' for 'YES' for setting the MSH-15 and MSH-16 from subscriber protocol instead of Event driver protocol.
"^DD",101,101,773.5,21,0)
^^3^3^3070417^
"^DD",101,101,773.5,21,1,0)
A 'YES' of this field will indicate that MSH-15 and MSH-16 will be taken
"^DD",101,101,773.5,21,2,0)
from Subscriber protocol instead of the value(s) defined in Event driver 
"^DD",101,101,773.5,21,3,0)
protocol.
"^DD",101,101,773.5,"DT")
3070417
"^DD",101,101,774,0)
ROUTING LOGIC^K^^774;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",101,101,774,3)
This is Standard MUMPS code.
"^DD",101,101,774,9)
@
"^DD",101,101,774,21,0)
^^11^11^2990712^
"^DD",101,101,774,21,1,0)
M code in this field is executed only when a message is in an OUTBOUND
"^DD",101,101,774,21,2,0)
state. Normally, Vista HL7 'broadcasts' a message to all subscribers
"^DD",101,101,774,21,3,0)
whenever a message is generated. However, in some cases, a client may need
"^DD",101,101,774,21,4,0)
to receive the message only if it matches a particular condition. This
"^DD",101,101,774,21,5,0)
field allows you to set up screening logic to interpret the message and
"^DD",101,101,774,21,6,0)
dynamically address the message to those interested in the data when it
"^DD",101,101,774,21,7,0)
meets these conditions. The output of your routing logic routine should be
"^DD",101,101,774,21,8,0)
the creation of a list of additional message recipients set into the
"^DD",101,101,774,21,9,0)
HLL("LINKS") array.
"^DD",101,101,774,21,10,0)
 
"^DD",101,101,774,21,11,0)
For details on dynamic addressing, see the documentation for HL*1.6*14.
"^DD",101,101,774,"DT")
2960924
"^DD",101,101,775,0)
SUBSCRIBERS^101.0775PA^^775;0
"^DD",101,101,775,12)
Type field must be a Subscriber
"^DD",101,101,775,12.1)
S DIC("S")="I $P(^(0),U,4)=""S"""
"^DD",101,101.01,0)
ITEM SUB-FIELD^^14^10
"^DD",101,101.01,0,"DIK")
XQORC
"^DD",101,101.01,0,"DT")
2910911
"^DD",101,101.01,0,"IX","AMM",101.01,.01)

"^DD",101,101.01,0,"IX","AMM2",101.01,2)

"^DD",101,101.01,0,"IX","AMM3",101.01,3)

"^DD",101,101.01,0,"IX","AMM5",101.01,5)

"^DD",101,101.01,0,"IX","AMM6",101.01,6)

"^DD",101,101.01,0,"IX","B",101.01,.01)

"^DD",101,101.01,0,"NM","ITEM")

"^DD",101,101.01,0,"UP")
101
"^DD",101,101.01,.01,0)
ITEM^MP101'X^ORD(101,^0;1^S ORDDF=101 D TREE^XQORD101
"^DD",101,101.01,.01,1,0)
^.1
"^DD",101,101.01,.01,1,1,0)
101.01^B
"^DD",101,101.01,.01,1,1,1)
S ^ORD(101,DA(1),10,"B",$E(X,1,30),DA)=""
"^DD",101,101.01,.01,1,1,2)
K ^ORD(101,DA(1),10,"B",$E(X,1,30),DA)
"^DD",101,101.01,.01,1,2,0)
101.01^AMM^MUMPS
"^DD",101,101.01,.01,1,2,1)
D REDOX^XQORD101
"^DD",101,101.01,.01,1,2,2)
D REDOX^XQORD101
"^DD",101,101.01,.01,1,3,0)
101^AD
"^DD",101,101.01,.01,1,3,1)
S ^ORD(101,"AD",$E(X,1,30),DA(1),DA)=""
"^DD",101,101.01,.01,1,3,2)
K ^ORD(101,"AD",$E(X,1,30),DA(1),DA)
"^DD",101,101.01,.01,1,4,0)
^^TRIGGER^101.01^11
"^DD",101,101.01,.01,1,4,1)
X ^DD(101.01,.01,1,4,1.3) I X S X=DIV S Y(1)=$S($D(^ORD(101,D0,10,D1,1)):^(1),1:"") S X=$P(Y(1),U,1),X=X S DIU=X K Y X ^DD(101.01,.01,1,4,1.1) X ^DD(101.01,.01,1,4,1.4)
"^DD",101,101.01,.01,1,4,1.1)
S X=DIV S I(1,0)=$S($D(D1):D1,1:""),I(0,0)=$S($D(D0):D0,1:""),D0=DIV S:'$D(^ORD(101,+D0,0)) D0=-1 S Y(101)=$S($D(^ORD(101,D0,101.04)):^(101.04),1:"") S X=$P(Y(101),U,2) S D0=I(0,0) S D1=I(1,0)
"^DD",101,101.01,.01,1,4,1.3)
K DIV S DIV=X,D0=DA(1),DIV(0)=D0,D1=DA,DIV(1)=D1 S Y(0)=X X ^DD(101.01,.01,1,4,69.3) S Y(101)=$S($D(^ORD(101,D0,0)):^(0),1:"") S X=$P(Y(101),U,4),X=X S X=X="T",Y=X,X=Y(5),X=X&Y S D0=I(0,0) S D1=I(1,0)
"^DD",101,101.01,.01,1,4,1.4)
S DIH=$S($D(^ORD(101,DIV(0),10,DIV(1),1)):^(1),1:""),DIV=X S $P(^(1),U,1)=DIV,DIH=101.01,DIG=11 D ^DICR:$N(^DD(DIH,DIG,1,0))>0
"^DD",101,101.01,.01,1,4,2)
Q
"^DD",101,101.01,.01,1,4,69.2)
S I(1,0)=$S($D(D1):D1,1:""),I(0,0)=$S($D(D0):D0,1:""),Y(4)=$S($D(^ORD(101,D0,0)):^(0),1:""),Y(1)=$S($D(^ORD(101,D0,10,D1,1)):^(1),1:"") S X=$P(Y(1),U,1)
"^DD",101,101.01,.01,1,4,69.3)
X ^DD(101.01,.01,1,4,69.2) S X=X="",Y(2)=X,Y(3)=X S X=$P(Y(4),U,4),X=X S X=X="D",Y=X,X=Y(2),X=X&Y,Y(5)=X,Y(6)=X,D0=Y(0) S:'$D(^ORD(101,+D0,0)) D0=-1
"^DD",101,101.01,.01,1,4,"%D",0)
^^2^2^2910911^
"^DD",101,101.01,.01,1,4,"%D",1,0)
On adding an item initially, stuff the prompt field with the default prompt
"^DD",101,101.01,.01,1,4,"%D",2,0)
if the item is a term.
"^DD",101,101.01,.01,1,4,"CREATE CONDITION")
(PROMPT="")&(INTERNAL(TYPE)="D")&(INTERNAL(ITEM:TYPE)="T")
"^DD",101,101.01,.01,1,4,"CREATE VALUE")
ITEM:DEFAULT PROMPT
"^DD",101,101.01,.01,1,4,"DELETE VALUE")
NO EFFECT
"^DD",101,101.01,.01,1,4,"DT")
2910911
"^DD",101,101.01,.01,1,4,"FIELD")
PROMPT
"^DD",101,101.01,.01,1,5,0)
^^TRIGGER^101.01^12
"^DD",101,101.01,.01,1,5,1)
X ^DD(101.01,.01,1,5,1.3) I X S X=DIV S Y(1)=$S($D(^ORD(101,D0,10,D1,1)):^(1),1:"") S X=$P(Y(1),U,2),X=X S DIU=X K Y X ^DD(101.01,.01,1,5,1.1) X ^DD(101.01,.01,1,5,1.4)
"^DD",101,101.01,.01,1,5,1.1)
S X=DIV S I(1,0)=$S($D(D1):D1,1:""),I(0,0)=$S($D(D0):D0,1:""),D0=DIV S:'$D(^ORD(101,+D0,0)) D0=-1 S Y(101)=$S($D(^ORD(101,D0,101.04)):^(101.04),1:"") S X=$P(Y(101),U,3) S D0=I(0,0) S D1=I(1,0)
"^DD",101,101.01,.01,1,5,1.3)
K DIV S DIV=X,D0=DA(1),DIV(0)=D0,D1=DA,DIV(1)=D1 S Y(0)=X X ^DD(101.01,.01,1,5,69.3) S Y(101)=$S($D(^ORD(101,D0,0)):^(0),1:"") S X=$P(Y(101),U,4),X=X S X=X="T",Y=X,X=Y(5),X=X&Y S D0=I(0,0) S D1=I(1,0)
"^DD",101,101.01,.01,1,5,1.4)
S DIH=$S($D(^ORD(101,DIV(0),10,DIV(1),1)):^(1),1:""),DIV=X S $P(^(1),U,2)=DIV,DIH=101.01,DIG=12 D ^DICR:$N(^DD(DIH,DIG,1,0))>0
"^DD",101,101.01,.01,1,5,2)
Q
"^DD",101,101.01,.01,1,5,69.2)
S I(1,0)=$S($D(D1):D1,1:""),I(0,0)=$S($D(D0):D0,1:""),Y(4)=$S($D(^ORD(101,D0,0)):^(0),1:""),Y(1)=$S($D(^ORD(101,D0,10,D1,1)):^(1),1:"") S X=$P(Y(1),U,2)
"^DD",101,101.01,.01,1,5,69.3)
X ^DD(101.01,.01,1,5,69.2) S X=X="",Y(2)=X,Y(3)=X S X=$P(Y(4),U,4),X=X S X=X="D",Y=X,X=Y(2),X=X&Y,Y(5)=X,Y(6)=X,D0=Y(0) S:'$D(^ORD(101,+D0,0)) D0=-1
"^DD",101,101.01,.01,1,5,"%D",0)
^^2^2^2910911^
"^DD",101,101.01,.01,1,5,"%D",1,0)
On adding an item initially, stuff the default field with the default
"^DD",101,101.01,.01,1,5,"%D",2,0)
answer if the item is a term.
"^DD",101,101.01,.01,1,5,"CREATE CONDITION")
(DEFAULT="")&(INTERNAL(TYPE)="D")&(INTERNAL(ITEM:TYPE)="T")
"^DD",101,101.01,.01,1,5,"CREATE VALUE")
ITEM:DEFAULT ANSWER
"^DD",101,101.01,.01,1,5,"DELETE VALUE")
NO EFFECT
"^DD",101,101.01,.01,1,5,"DT")
2910911
"^DD",101,101.01,.01,1,5,"FIELD")
DEFAULT
"^DD",101,101.01,.01,1,6,0)
^^TRIGGER^101.01^13
"^DD",101,101.01,.01,1,6,1)
X ^DD(101.01,.01,1,6,1.3) I X S X=DIV S Y(1)=$S($D(^ORD(101,D0,10,D1,1)):^(1),1:"") S X=$P(Y(1),U,3),X=X S DIU=X K Y X ^DD(101.01,.01,1,6,1.1) X ^DD(101.01,.01,1,6,1.4)
"^DD",101,101.01,.01,1,6,1.1)
S X=DIV S I(1,0)=$S($D(D1):D1,1:""),I(0,0)=$S($D(D0):D0,1:""),D0=DIV S:'$D(^ORD(101,+D0,0)) D0=-1 S Y(101)=$S($D(^ORD(101,D0,101.04)):^(101.04),1:"") S X=$P(Y(101),U,4) S D0=I(0,0) S D1=I(1,0)
"^DD",101,101.01,.01,1,6,1.3)
K DIV S DIV=X,D0=DA(1),DIV(0)=D0,D1=DA,DIV(1)=D1 S Y(0)=X X ^DD(101.01,.01,1,6,69.3) S Y(101)=$S($D(^ORD(101,D0,0)):^(0),1:"") S X=$P(Y(101),U,4),X=X S X=X="T",Y=X,X=Y(5),X=X&Y S D0=I(0,0) S D1=I(1,0)
"^DD",101,101.01,.01,1,6,1.4)
S DIH=$S($D(^ORD(101,DIV(0),10,DIV(1),1)):^(1),1:""),DIV=X S $P(^(1),U,3)=DIV,DIH=101.01,DIG=13 D ^DICR:$N(^DD(DIH,DIG,1,0))>0
"^DD",101,101.01,.01,1,6,2)
Q
"^DD",101,101.01,.01,1,6,69.2)
S I(1,0)=$S($D(D1):D1,1:""),I(0,0)=$S($D(D0):D0,1:""),Y(4)=$S($D(^ORD(101,D0,0)):^(0),1:""),Y(1)=$S($D(^ORD(101,D0,10,D1,1)):^(1),1:"") S X=$P(Y(1),U,3)
"^DD",101,101.01,.01,1,6,69.3)
X ^DD(101.01,.01,1,6,69.2) S X=X="",Y(2)=X,Y(3)=X S X=$P(Y(4),U,4),X=X S X=X="D",Y=X,X=Y(2),X=X&Y,Y(5)=X,Y(6)=X,D0=Y(0) S:'$D(^ORD(101,+D0,0)) D0=-1
"^DD",101,101.01,.01,1,6,"%D",0)
^^2^2^2910911^
"^DD",101,101.01,.01,1,6,"%D",1,0)
On adding an item initially, stuff the help field with the default help
"^DD",101,101.01,.01,1,6,"%D",2,0)
if the item is a term.
"^DD",101,101.01,.01,1,6,"CREATE CONDITION")
(HELP="")&(INTERNAL(TYPE)="D")&(INTERNAL(ITEM:TYPE)="T")
"^DD",101,101.01,.01,1,6,"CREATE VALUE")
ITEM:DEFAULT HELP
"^DD",101,101.01,.01,1,6,"DELETE VALUE")
NO EFFECT
"^DD",101,101.01,.01,1,6,"DT")
2910911
"^DD",101,101.01,.01,1,6,"FIELD")
HELP
"^DD",101,101.01,.01,3)
Enter a protocol.  A protocol that is an ancestor may not also be a sub-item.
"^DD",101,101.01,.01,21,0)
^^3^3^2920731^^^^
"^DD",101,101.01,.01,21,1,0)
This points to a protocol which is subordinate to this protocol.
"^DD",101,101.01,.01,21,2,0)
NOTE:  The parent protocol or one of its ancestors may not be entered
"^DD",101,101.01,.01,21,3,0)
as an item.
"^DD",101,101.01,.01,"DT")
2910911
"^DD",101,101.01,2,0)
MNEMONIC^FX^^0;2^I $D(X) K:$L(X)>4!($L(X)<1) X
"^DD",101,101.01,2,1,0)
^.1
"^DD",101,101.01,2,1,1,0)
101.01^AMM2^MUMPS
"^DD",101,101.01,2,1,1,1)
D REDOX^XQORD101
"^DD",101,101.01,2,1,1,2)
D REDOX^XQORD101
"^DD",101,101.01,2,3)
Enter a Mnemonic to be used when this protocol is displayed for selection (1-4 characters).
"^DD",101,101.01,2,21,0)
^^1^1^2920224^^
"^DD",101,101.01,2,21,1,0)
This is a short abbreviation for the item.
"^DD",101,101.01,2,"DT")
2890104
"^DD",101,101.01,3,0)
SEQUENCE^NJ6,2^^0;3^K:+X'=X!(X>999)!(X<1)!(X?.E1"."3N.N) X
"^DD",101,101.01,3,1,0)
^.1
"^DD",101,101.01,3,1,1,0)
101.01^AMM3^MUMPS
"^DD",101,101.01,3,1,1,1)
D REDOX^XQORD101
"^DD",101,101.01,3,1,1,2)
D REDOX^XQORD101
"^DD",101,101.01,3,3)
Enter a number for sequencing this item with other items when displayed.
"^DD",101,101.01,3,21,0)
^^4^4^2920224^^
"^DD",101,101.01,3,21,1,0)
This is the order in which items in the list should be processed.  In the
"^DD",101,101.01,3,21,2,0)
case of menus, the items are displayed in the order derived from this
"^DD",101,101.01,3,21,3,0)
field.  In the case of protocols and extended actions, the items are
"^DD",101,101.01,3,21,4,0)
executed in the order derived from this field.
"^DD",101,101.01,3,"DT")
2910911
"^DD",101,101.01,4,0)
MODIFYING ACTION^P101X^ORD(101,^0;4^S ORDDF=101 D TREE^XQORD101
"^DD",101,101.01,4,21,0)
^^5^5^2920224^^^
"^DD",101,101.01,4,21,1,0)
This points to a protocol which is executed before the item for this same
"^DD",101,101.01,4,21,2,0)
entry is executed.  This allows the possibility of creating protocols
"^DD",101,101.01,4,21,3,0)
which set up special variables, etc., according to the context of the
"^DD",101,101.01,4,21,4,0)
protocol.  It also allows screens at the item level if the variables
"^DD",101,101.01,4,21,5,0)
ORQUIT or ORABORT are used to prevent execution of the item.
"^DD",101,101.01,4,"DT")
2890502
"^DD",101,101.01,5,0)
FORMAT CODE^S^O:output only;H:header;^0;5^Q
"^DD",101,101.01,5,1,0)
^.1
"^DD",101,101.01,5,1,1,0)
101.01^AMM5^MUMPS
"^DD",101,101.01,5,1,1,1)
D REDOX^XQORD101
"^DD",101,101.01,5,1,1,2)
D REDOX^XQORD101
"^DD",101,101.01,5,1,1,"%D",0)
^^1^1^2910911^
"^DD",101,101.01,5,1,1,"%D",1,0)
Update protocol timestamp when FORMAT CODE changed.
"^DD",101,101.01,5,1,1,"DT")
2910911
"^DD",101,101.01,5,3)
Enter OUTPUT ONLY if this item should be displayed only, HEADER if this item should start printing over the mnemonic.
"^DD",101,101.01,5,21,0)
^^2^2^2920225^
"^DD",101,101.01,5,21,1,0)
This allows items used on menus for formatting purposes to be made
"^DD",101,101.01,5,21,2,0)
unselectable (sub-headers, blank lines, etc.).
"^DD",101,101.01,5,"DT")
2910911
"^DD",101,101.01,6,0)
DISPLAY NAME^F^^0;6^K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>40!($L(X)<1) X
"^DD",101,101.01,6,1,0)
^.1
"^DD",101,101.01,6,1,1,0)
101.01^AMM6^MUMPS
"^DD",101,101.01,6,1,1,1)
D REDOX^XQORD101
"^DD",101,101.01,6,1,1,2)
D REDOX^XQORD101
"^DD",101,101.01,6,1,1,"%D",0)
^^1^1^2910911^
"^DD",101,101.01,6,1,1,"%D",1,0)
Update protocol timestamp whenever DISPLAY NAME is changed.
"^DD",101,101.01,6,1,1,"DT")
2910911
"^DD",101,101.01,6,3)
Answer must be 1-40 characters in length.
"^DD",101,101.01,6,21,0)
^^4^4^2920225^
"^DD",101,101.01,6,21,1,0)
This allows the item text that normally appears on the menu to be
"^DD",101,101.01,6,21,2,0)
displayed.  For example, this field may be used to set up menus so
"^DD",101,101.01,6,21,3,0)
that items are displayed in mixed case, even though the item text may
"^DD",101,101.01,6,21,4,0)
all be in upper case.
"^DD",101,101.01,6,"DT")
2910911
"^DD",101,101.01,11,0)
PROMPT^F^^1;1^K:$L(X)>30!($L(X)<1) X
"^DD",101,101.01,11,3)
Answer must be 1-30 characters in length.
"^DD",101,101.01,11,5,1,0)
101.01^.01^4
"^DD",101,101.01,11,21,0)
^^1^1^2920225^
"^DD",101,101.01,11,21,1,0)
This is the actual prompt displayed for this item in the dialog.
"^DD",101,101.01,11,"DT")
2910819
"^DD",101,101.01,12,0)
DEFAULT^F^^1;2^K:$L(X)>80!($L(X)<1) X
"^DD",101,101.01,12,3)
Answer must be 1-80 characters in length.
"^DD",101,101.01,12,5,1,0)
101.01^.01^5
"^DD",101,101.01,12,21,0)
^^1^1^2920225^
"^DD",101,101.01,12,21,1,0)
This is the default response for this item in the dialog.
"^DD",101,101.01,12,"DT")
2910819
"^DD",101,101.01,13,0)
HELP^F^^1;3^K:$L(X)>80!($L(X)<1) X
"^DD",101,101.01,13,3)
Answer must be 1-80 characters in length.
"^DD",101,101.01,13,5,1,0)
101.01^.01^6
"^DD",101,101.01,13,21,0)
^^1^1^2920225^
"^DD",101,101.01,13,21,1,0)
This is the help text displayed for this item in the dialog.
"^DD",101,101.01,13,"DT")
2910819
"^DD",101,101.01,14,0)
MODE^F^^1;4^K:$L(X)>5!($L(X)<1) X
"^DD",101,101.01,14,3)
Answer must be 1-5 characters in length.
"^DD",101,101.01,14,21,0)
^^6^6^2920225^
"^DD",101,101.01,14,21,1,0)
This tells how this item should be treated when processing the dialog.
"^DD",101,101.01,14,21,2,0)
  S - suppresses inclusion of the prompt when creating the text generated
"^DD",101,101.01,14,21,3,0)
      by the dialog.
"^DD",101,101.01,14,21,4,0)
  E - allows the item to only be presented when editing an existing
"^DD",101,101.01,14,21,5,0)
      response.
"^DD",101,101.01,14,21,6,0)
  R - identifies the field as required.
"^DD",101,101.01,14,"DT")
2910906
"^DD",101,101.02,0)
SYNONYM SUB-FIELD^^.01^1
"^DD",101,101.02,0,"DIK")
XQORC
"^DD",101,101.02,0,"IX","AM1V1",101.02,.01)

"^DD",101,101.02,0,"IX","B",101.02,.01)

"^DD",101,101.02,0,"NM","SYNONYM")

"^DD",101,101.02,0,"UP")
101
"^DD",101,101.02,.01,0)
SYNONYM^MF^^0;1^K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>65!($L(X)<1) X
"^DD",101,101.02,.01,1,0)
^.1
"^DD",101,101.02,.01,1,1,0)
101.02^B
"^DD",101,101.02,.01,1,1,1)
S ^ORD(101,DA(1),2,"B",$E(X,1,30),DA)=""
"^DD",101,101.02,.01,1,1,2)
K ^ORD(101,DA(1),2,"B",$E(X,1,30),DA)
"^DD",101,101.02,.01,1,2,0)
101^B^MNEMONIC
"^DD",101,101.02,.01,1,2,1)
S:'$D(^ORD(101,"B",$E(X,1,30),DA(1),DA)) ^(DA)=1
"^DD",101,101.02,.01,1,2,2)
I $D(^ORD(101,"B",$E(X,1,30),DA(1),DA)),^(DA) K ^(DA)
"^DD",101,101.02,.01,1,3,0)
101^K2^MUMPS
"^DD",101,101.02,.01,1,3,1)
D K21^XQORDD1
"^DD",101,101.02,.01,1,3,2)
D K22^XQORDD1
"^DD",101,101.02,.01,1,4,0)
101.02^AM1V1^MUMPS
"^DD",101,101.02,.01,1,4,1)
D REDOM^XQORD101
"^DD",101,101.02,.01,1,4,2)
D REDOM^XQORD101
"^DD",101,101.02,.01,1,4,"%D",0)
^^1^1^2911031^
"^DD",101,101.02,.01,1,4,"%D",1,0)
Updates timestamps on menus containing this item.
"^DD",101,101.02,.01,1,4,"DT")
2911031
"^DD",101,101.02,.01,3)
Enter a synonym for this protocol (1-65 characters)
"^DD",101,101.02,.01,"DT")
2911031
"^DD",101,101.021,0)
REQUIRED VARIABLES SUB-FIELD^^.01^1
"^DD",101,101.021,0,"DIK")
XQORC
"^DD",101,101.021,0,"IX","B",101.021,.01)

"^DD",101,101.021,0,"NM","REQUIRED VARIABLES")

"^DD",101,101.021,0,"UP")
101
"^DD",101,101.021,.01,0)
REQUIRED VARIABLES^MF^^0;1^K:$L(X)>30!($L(X)<1)!'(X?1A.E) X
"^DD",101,101.021,.01,1,0)
^.1
"^DD",101,101.021,.01,1,1,0)
101.021^B
"^DD",101,101.021,.01,1,1,1)
S ^ORD(101,DA(1),21,"B",$E(X,1,30),DA)=""
"^DD",101,101.021,.01,1,1,2)
K ^ORD(101,DA(1),21,"B",$E(X,1,30),DA)
"^DD",101,101.021,.01,3)
Enter the required variable.
"^DD",101,101.021,.01,"DT")
2881209
"^DD",101,101.03,0)
ACCESS SUB-FIELD^^.01^1
"^DD",101,101.03,0,"DIK")
XQORC
"^DD",101,101.03,0,"IX","B",101.03,.01)

"^DD",101,101.03,0,"IX","K",101.03,.01)

"^DD",101,101.03,0,"NM","ACCESS")

"^DD",101,101.03,0,"UP")
101
"^DD",101,101.03,.01,0)
ACCESS^MP19.1'^DIC(19.1,^0;1^Q
"^DD",101,101.03,.01,1,0)
^.1
"^DD",101,101.03,.01,1,1,0)
101.03^B
"^DD",101,101.03,.01,1,1,1)
S ^ORD(101,DA(1),3,"B",$E(X,1,30),DA)=""
"^DD",101,101.03,.01,1,1,2)
K ^ORD(101,DA(1),3,"B",$E(X,1,30),DA)
"^DD",101,101.03,.01,1,2,0)
101.03^K^MUMPS
"^DD",101,101.03,.01,1,2,1)
D K31^XQORDD1
"^DD",101,101.03,.01,1,2,2)
D K32^XQORDD1
"^DD",101,101.03,.01,3)
Enter a security key to limit access to this protocol.
"^DD",101,101.03,.01,"DT")
2900327
"^DD",101,101.0431,0)
DEFAULT WORD PROCESSING ANSWER SUB-FIELD^^.01^1
"^DD",101,101.0431,0,"DT")
2911212
"^DD",101,101.0431,0,"NM","DEFAULT WORD PROCESSING ANSWER")

"^DD",101,101.0431,0,"UP")
101
"^DD",101,101.0431,.01,0)
DEFAULT WORD PROCESSING ANSWER^WL^^0;1^Q
"^DD",101,101.0431,.01,3)
Enter the text that should be the template for this word processing item.
"^DD",101,101.0431,.01,"DT")
2911212
"^DD",101,101.05,0)
METHOD SUB-FIELD^^.02^2
"^DD",101,101.05,0,"DT")
2910401
"^DD",101,101.05,0,"ID",.02)
W:$D(^(1)) "   ",$E(^(1),1,245)
"^DD",101,101.05,0,"NM","METHOD")

"^DD",101,101.05,0,"UP")
101
"^DD",101,101.05,.01,0)
METHOD^MNJ2,0X^^0;1^K:+X'=X!(X>20)!(X<1)!(X?.E1"."1N.N) X S:$D(X) DINUM=X
"^DD",101,101.05,.01,1,0)
^.1^^0
"^DD",101,101.05,.01,3)
Type a Number between 1 and 20, 0 Decimal Digits
"^DD",101,101.05,.01,21,0)
^^2^2^2920225^
"^DD",101,101.05,.01,21,1,0)
This is reserved for future use.  The numeric values of this field
"^DD",101,101.05,.01,21,2,0)
currently correspond to OE/RR actions.
"^DD",101,101.05,.01,"DT")
2910614
"^DD",101,101.05,.02,0)
METHOD ACTION^K^^1;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",101,101.05,.02,3)
This is Standard MUMPS code.
"^DD",101,101.05,.02,21,0)
^^1^1^2920225^
"^DD",101,101.05,.02,21,1,0)
This is the code necessary to implement the method.
"^DD",101,101.05,.02,"DT")
2910401
"^DD",101,101.06,0)
DESCRIPTION SUB-FIELD^^.01^1
"^DD",101,101.06,0,"IX","B",101.06,.01)

"^DD",101,101.06,0,"NM","DESCRIPTION")

"^DD",101,101.06,0,"UP")
101
"^DD",101,101.06,.01,0)
DESCRIPTION^W^^0;1^Q
"^DD",101,101.06,.01,1,0)
^.1
"^DD",101,101.06,.01,1,1,0)
101.06^B
"^DD",101,101.06,.01,1,1,1)
S ^ORD(101,DA(1),1,"B",$E(X,1,30),DA)=""
"^DD",101,101.06,.01,1,1,2)
K ^ORD(101,DA(1),1,"B",$E(X,1,30),DA)
"^DD",101,101.06,.01,3)
Enter a description for this protocol
"^DD",101,101.06,.01,21,0)
^^1^1^2920224^
"^DD",101,101.06,.01,21,1,0)
This is the protocol description.
"^DD",101,101.06,.01,"DT")
2881121
"^DD",101,101.07,0)
SET MEMBERSHIP SUB-FIELD^^.01^1
"^DD",101,101.07,0,"DIK")
XQORC
"^DD",101,101.07,0,"DT")
2910401
"^DD",101,101.07,0,"IX","B",101.07,.01)

"^DD",101,101.07,0,"NM","SET MEMBERSHIP")

"^DD",101,101.07,0,"UP")
101
"^DD",101,101.07,.01,0)
SET MEMBERSHIP^F^^0;1^K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>8!($L(X)<2) X
"^DD",101,101.07,.01,1,0)
^.1
"^DD",101,101.07,.01,1,1,0)
101.07^B
"^DD",101,101.07,.01,1,1,1)
S ^ORD(101,DA(1),101.07,"B",$E(X,1,30),DA)=""
"^DD",101,101.07,.01,1,1,2)
K ^ORD(101,DA(1),101.07,"B",$E(X,1,30),DA)
"^DD",101,101.07,.01,1,2,0)
101^S^MUMPS
"^DD",101,101.07,.01,1,2,1)
I $L($P(^ORD(101,DA(1),0),"^",2)) S ^ORD(101,"S."_X,$P(^ORD(101,DA(1),0),"^",2),DA(1))=""
"^DD",101,101.07,.01,1,2,2)
I $L($P(^ORD(101,DA(1),0),"^",2)) K ^ORD(101,"S."_X,$P(^ORD(101,DA(1),0),"^",2),DA(1))
"^DD",101,101.07,.01,1,2,"DT")
2910401
"^DD",101,101.07,.01,3)
Answer must be 2-8 characters in length.
"^DD",101,101.07,.01,"DT")
2910401
"^DD",101,101.0775,0)
SUBSCRIBERS SUB-FIELD^^.01^1
"^DD",101,101.0775,0,"DIK")
XQORC
"^DD",101,101.0775,0,"DT")
2990722
"^DD",101,101.0775,0,"IX","B",101.0775,.01)

"^DD",101,101.0775,0,"NM","SUBSCRIBERS")

"^DD",101,101.0775,0,"UP")
101
"^DD",101,101.0775,.01,0)
SUBSCRIBERS^M*P101^ORD(101,^0;1^S DIC("S")="I $P(^(0),U,4)=""S""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",101,101.0775,.01,1,0)
^.1
"^DD",101,101.0775,.01,1,1,0)
101.0775^B
"^DD",101,101.0775,.01,1,1,1)
S ^ORD(101,DA(1),775,"B",$E(X,1,30),DA)=""
"^DD",101,101.0775,.01,1,1,2)
K ^ORD(101,DA(1),775,"B",$E(X,1,30),DA)
"^DD",101,101.0775,.01,1,2,0)
101^AB
"^DD",101,101.0775,.01,1,2,1)
S ^ORD(101,"AB",$E(X,1,30),DA(1),DA)=""
"^DD",101,101.0775,.01,1,2,2)
K ^ORD(101,"AB",$E(X,1,30),DA(1),DA)
"^DD",101,101.0775,.01,1,2,"DT")
2990722
"^DD",101,101.0775,.01,12)
Type must be Subscriber
"^DD",101,101.0775,.01,12.1)
S DIC("S")="I $P(^(0),U,4)=""S"""
"^DD",101,101.0775,.01,21,0)
^^2^2^2990722^
"^DD",101,101.0775,.01,21,1,0)
This contains Protocols of Type, Subscribers, who are subscribing to this Event
"^DD",101,101.0775,.01,21,2,0)
Drivers.
"^DD",101,101.0775,.01,"DT")
2990722
"^DIC",101,101,0)
PROTOCOL^101I
"^DIC",101,101,0,"GL")
^ORD(101,
"^DIC",101,101,"%D",0)
^^2^2^2940929^^^^
"^DIC",101,101,"%D",1,0)
This file contains the orderables and methods for accomplishing orders
"^DIC",101,101,"%D",2,0)
(protocols) within OE/RR.
"^DIC",101,"B","PROTOCOL",101)

**END**
**END**
