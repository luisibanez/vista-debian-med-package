Released GMTS*2.7*106 SEQ #97
Extracted from mail message
**KIDS**:GMTS*2.7*106^

**INSTALL NAME**
GMTS*2.7*106
"BLD",9141,0)
GMTS*2.7*106^HEALTH SUMMARY^0^3121211^y
"BLD",9141,4,0)
^9.64PA^^
"BLD",9141,6.3)
11
"BLD",9141,"ABPKG")
n
"BLD",9141,"INID")
^y
"BLD",9141,"INIT")
EN^GMTSP106
"BLD",9141,"KRN",0)
^9.67PA^779.2^20
"BLD",9141,"KRN",.4,0)
.4
"BLD",9141,"KRN",.401,0)
.401
"BLD",9141,"KRN",.402,0)
.402
"BLD",9141,"KRN",.403,0)
.403
"BLD",9141,"KRN",.5,0)
.5
"BLD",9141,"KRN",.84,0)
.84
"BLD",9141,"KRN",3.6,0)
3.6
"BLD",9141,"KRN",3.8,0)
3.8
"BLD",9141,"KRN",9.2,0)
9.2
"BLD",9141,"KRN",9.8,0)
9.8
"BLD",9141,"KRN",9.8,"NM",0)
^9.68A^2^2
"BLD",9141,"KRN",9.8,"NM",1,0)
GMTSOBA2^^0^B52416135
"BLD",9141,"KRN",9.8,"NM",2,0)
GMTSRON^^0^B25074680
"BLD",9141,"KRN",9.8,"NM","B","GMTSOBA2",1)

"BLD",9141,"KRN",9.8,"NM","B","GMTSRON",2)

"BLD",9141,"KRN",19,0)
19
"BLD",9141,"KRN",19.1,0)
19.1
"BLD",9141,"KRN",101,0)
101
"BLD",9141,"KRN",409.61,0)
409.61
"BLD",9141,"KRN",771,0)
771
"BLD",9141,"KRN",779.2,0)
779.2
"BLD",9141,"KRN",870,0)
870
"BLD",9141,"KRN",8989.51,0)
8989.51
"BLD",9141,"KRN",8989.52,0)
8989.52
"BLD",9141,"KRN",8989.52,"NM",0)
^9.68A^^
"BLD",9141,"KRN",8994,0)
8994
"BLD",9141,"KRN","B",.4,.4)

"BLD",9141,"KRN","B",.401,.401)

"BLD",9141,"KRN","B",.402,.402)

"BLD",9141,"KRN","B",.403,.403)

"BLD",9141,"KRN","B",.5,.5)

"BLD",9141,"KRN","B",.84,.84)

"BLD",9141,"KRN","B",3.6,3.6)

"BLD",9141,"KRN","B",3.8,3.8)

"BLD",9141,"KRN","B",9.2,9.2)

"BLD",9141,"KRN","B",9.8,9.8)

"BLD",9141,"KRN","B",19,19)

"BLD",9141,"KRN","B",19.1,19.1)

"BLD",9141,"KRN","B",101,101)

"BLD",9141,"KRN","B",409.61,409.61)

"BLD",9141,"KRN","B",771,771)

"BLD",9141,"KRN","B",779.2,779.2)

"BLD",9141,"KRN","B",870,870)

"BLD",9141,"KRN","B",8989.51,8989.51)

"BLD",9141,"KRN","B",8989.52,8989.52)

"BLD",9141,"KRN","B",8994,8994)

"BLD",9141,"QDEF")
^^^^NO^^^^NO^^NO
"BLD",9141,"QUES",0)
^9.62^^
"BLD",9141,"REQB",0)
^9.611^2^2
"BLD",9141,"REQB",1,0)
GMTS*2.7*57^1
"BLD",9141,"REQB",2,0)
GMTS*2.7*89^1
"BLD",9141,"REQB","B","GMTS*2.7*57",1)

"BLD",9141,"REQB","B","GMTS*2.7*89",2)

"INIT")
EN^GMTSP106
"MBREQ")
0
"PKG",229,-1)
1^1
"PKG",229,0)
HEALTH SUMMARY^GMTS^Integrated Health Summary Tools
"PKG",229,20,0)
^9.402P^^
"PKG",229,22,0)
^9.49I^1^1
"PKG",229,22,1,0)
2.7^2951020^2960805
"PKG",229,22,1,"PAH",1,0)
106^3121211
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
3
"RTN","GMTSOBA2")
0^1^B52416135^B50336646
"RTN","GMTSOBA2",1,0)
GMTSOBA2 ; SLC/KER - HS Object - Ask               ; 05/22/2008
"RTN","GMTSOBA2",2,0)
 ;;2.7;Health Summary;**58,89,106**;Oct 20, 1995;Build 11
"RTN","GMTSOBA2",3,0)
 ;
"RTN","GMTSOBA2",4,0)
 ; External References
"RTN","GMTSOBA2",5,0)
 ;   DBIA  10018  ^DIE  (file #142)
"RTN","GMTSOBA2",6,0)
 ;   DBIA  10026  ^DIR        
"RTN","GMTSOBA2",7,0)
 ;   DBIA  10006  ^DIC  (file #142)
"RTN","GMTSOBA2",8,0)
 ;   DBIA  10010  EN1^DIP
"RTN","GMTSOBA2",9,0)
 ;   DBIA  10076  ^XUSEC(
"RTN","GMTSOBA2",10,0)
 ;   DBIA  10076  ^XUSEC("GMTSMGR")
"RTN","GMTSOBA2",11,0)
 ;             
"RTN","GMTSOBA2",12,0)
CH ;   Component Header
"RTN","GMTSOBA2",13,0)
 Q:+($G(GMTSQ))>0  N X,Y,DIR,DIROUT,DUOUT,DTOUT,GMTSDEF,GMTSE
"RTN","GMTSOBA2",14,0)
 S GMTSOBJ("COMPONENT HEADER")="",DIR("A")="   Print the standard Component Header?  "
"RTN","GMTSOBA2",15,0)
 S GMTSDEF=$P($G(^GMT(142.5,+($G(GMTSDA)),0)),U,12),GMTSE=0
"RTN","GMTSOBA2",16,0)
 S GMTSDEF=$S(+GMTSDEF>0:"Y",GMTSDEF="":"Y",1:"N")
"RTN","GMTSOBA2",17,0)
 S DIR("B")=GMTSDEF,DIR(0)="YAO",(DIR("?"),DIR("??"))="^D CH^GMTSOBH"
"RTN","GMTSOBA2",18,0)
 D ^DIR S:$D(DIROUT)!($D(DTOUT)) GMTSQ=1
"RTN","GMTSOBA2",19,0)
 S:Y["^"!(X["^") GMTSE=1,GMTSQ=1,GMTSDES=0
"RTN","GMTSOBA2",20,0)
 K:+($G(GMTSQ))>0 GMTSOBJ("COMPONENT HEADER") Q:+($G(GMTSQ))>0
"RTN","GMTSOBA2",21,0)
 S X=+($G(Y)) K:+X'>0 GMTSOBJ("COMPONENT HEADER")
"RTN","GMTSOBA2",22,0)
 D:$D(GMTSOBJ("COMPONENT HEADER"))&(GMTSE'>0) LM Q:+($G(GMTSQ))>0  Q:+($G(GMTSE))>0
"RTN","GMTSOBA2",23,0)
 D:$D(GMTSOBJ("COMPONENT HEADER"))&(GMTSE'>0) UD Q:+($G(GMTSQ))>0  Q:+($G(GMTSE))>0
"RTN","GMTSOBA2",24,0)
 D:$D(GMTSOBJ("COMPONENT HEADER"))&(GMTSE'>0) BL Q:+($G(GMTSQ))>0  Q:+($G(GMTSE))>0
"RTN","GMTSOBA2",25,0)
 Q
"RTN","GMTSOBA2",26,0)
LM ;     Time/Occurence Limits
"RTN","GMTSOBA2",27,0)
 Q:+($G(GMTSQ))>0  Q:+($G(GMTSE))>0  N X,Y,DIR,DIROUT,DUOUT,DTOUT,GMTSDEF
"RTN","GMTSOBA2",28,0)
 S GMTSOBJ("LIMITS")="",DIR("A")="     Use report time/occurence limits?  "
"RTN","GMTSOBA2",29,0)
 S GMTSDEF=$P($G(^GMT(142.5,+($G(GMTSDA)),0)),U,14)
"RTN","GMTSOBA2",30,0)
 S GMTSDEF=$S(+GMTSDEF>0:"Y",1:"N")
"RTN","GMTSOBA2",31,0)
 S (DIR("?"),DIR("??"))="^D LM^GMTSOBH",DIR("B")=GMTSDEF,DIR(0)="YAO"
"RTN","GMTSOBA2",32,0)
 D ^DIR S:$D(DIROUT)!($D(DTOUT)) GMTSE=1
"RTN","GMTSOBA2",33,0)
 S:Y["^"!(X["^") GMTSE=1,GMTSQ=1,GMTSDES=0
"RTN","GMTSOBA2",34,0)
 K:+($G(GMTSE))>0 GMTSOBJ("LIMITS") Q:+($G(GMTSE))>0
"RTN","GMTSOBA2",35,0)
 S X=+($G(Y)) K:+X'>0 GMTSOBJ("LIMITS") Q
"RTN","GMTSOBA2",36,0)
UD ;     Underline Header
"RTN","GMTSOBA2",37,0)
 Q:+($G(GMTSQ))>0  Q:+($G(GMTSE))>0
"RTN","GMTSOBA2",38,0)
 N X,Y,DIR,DIROUT,DUOUT,DTOUT,GMTSDEF
"RTN","GMTSOBA2",39,0)
 S GMTSOBJ("UNDERLINE")="",DIR("A")="     Underline Component Header?  "
"RTN","GMTSOBA2",40,0)
 S GMTSDEF=$P($G(^GMT(142.5,+($G(GMTSDA)),0)),U,13)
"RTN","GMTSOBA2",41,0)
 S GMTSDEF=$S(+GMTSDEF>0:"Y",1:"N")
"RTN","GMTSOBA2",42,0)
 S (DIR("?"),DIR("??"))="^D CHU^GMTSOBH",DIR("B")=GMTSDEF,DIR(0)="YAO"
"RTN","GMTSOBA2",43,0)
 D ^DIR S:$D(DIROUT)!($D(DTOUT)) GMTSE=1
"RTN","GMTSOBA2",44,0)
 S:Y["^"!(X["^") GMTSE=1,GMTSQ=1,GMTSDES=0
"RTN","GMTSOBA2",45,0)
 K:+($G(GMTSE))>0 GMTSOBJ("UNDERLINE") Q:+($G(GMTSE))>0
"RTN","GMTSOBA2",46,0)
 S X=+($G(Y)) K:+X'>0 GMTSOBJ("UNDERLINE") Q
"RTN","GMTSOBA2",47,0)
BL ;     Blank Line after Header
"RTN","GMTSOBA2",48,0)
 Q:+($G(GMTSQ))>0  N X,Y,DIR,DIROUT,DUOUT,DTOUT,GMTSDEF
"RTN","GMTSOBA2",49,0)
 S GMTSOBJ("BLANK LINE")="",DIR("A")="     Add a Blank Line after the Component Header?  "
"RTN","GMTSOBA2",50,0)
 S GMTSDEF=$P($G(^GMT(142.5,+($G(GMTSDA)),0)),U,15)
"RTN","GMTSOBA2",51,0)
 S GMTSDEF=$S(+GMTSDEF>0:"Y",1:"N")
"RTN","GMTSOBA2",52,0)
 S (DIR("?"),DIR("??"))="^D BL^GMTSOBH",DIR("B")=GMTSDEF,DIR(0)="YAO"
"RTN","GMTSOBA2",53,0)
 D ^DIR S:$D(DIROUT)!($D(DTOUT)) GMTSQ=1
"RTN","GMTSOBA2",54,0)
 K:+($G(GMTSQ))>0 GMTSOBJ("BLANK LINE") Q:+($G(GMTSQ))>0
"RTN","GMTSOBA2",55,0)
 S X=+($G(Y)) K:+X'>0 GMTSOBJ("BLANK LINE") Q
"RTN","GMTSOBA2",56,0)
DE ;   Deceased
"RTN","GMTSOBA2",57,0)
 Q:+($G(GMTSQ))>0  N X,Y,DIR,DIROUT,DUOUT,DTOUT,GMTSDEF
"RTN","GMTSOBA2",58,0)
 S GMTSOBJ("DECEASED")="",DIR("A")="   Print the date a patient was deceased?  "
"RTN","GMTSOBA2",59,0)
 S GMTSDEF=$P($G(^GMT(142.5,+($G(GMTSDA)),0)),U,16)
"RTN","GMTSOBA2",60,0)
 S GMTSDEF=$S(+GMTSDEF>0:"Y",1:"N")
"RTN","GMTSOBA2",61,0)
 S (DIR("?"),DIR("??"))="^D DE^GMTSOBH",DIR("B")=GMTSDEF,DIR(0)="YAO"
"RTN","GMTSOBA2",62,0)
 D ^DIR S:$D(DIROUT)!($D(DTOUT)) GMTSQ=1
"RTN","GMTSOBA2",63,0)
 K:+($G(GMTSQ))>0 GMTSOBJ("DECEASED") Q:+($G(GMTSQ))>0
"RTN","GMTSOBA2",64,0)
 S X=+($G(Y)) K:+X'>0 GMTSOBJ("DECEASED") Q
"RTN","GMTSOBA2",65,0)
LBL ; Label
"RTN","GMTSOBA2",66,0)
 Q:+($G(GMTSQ))>0  N X,Y,DIR,DIROUT,DUOUT,DTOUT,GMTSDLD,GMTSDEF
"RTN","GMTSOBA2",67,0)
 K GMTSOBJ("USE LABEL"),GMTSOBJ("LABEL"),GMTSOBJ("LABEL BLANK LINE")
"RTN","GMTSOBA2",68,0)
 S DIR("A")=" Print a LABEL before the Health Summary Object?  "
"RTN","GMTSOBA2",69,0)
 S GMTSDEF=$S(+($G(GMTSDA))>0:$P($G(^GMT(142.5,+($G(GMTSDA)),0)),"^",7),1:0)
"RTN","GMTSOBA2",70,0)
 S GMTSDEF=$S(+GMTSDEF>0:"Y",1:"N"),(DIR("?"),DIR("??"))="^D PLB^GMTSOBH",DIR("B")=GMTSDEF,DIR(0)="YAO"
"RTN","GMTSOBA2",71,0)
 D ^DIR S:$D(DIROUT)!($D(DTOUT)) GMTSQ=1 S:Y["^"!(X["^") GMTSQ=1
"RTN","GMTSOBA2",72,0)
 K:+($G(GMTSQ))>0 GMTSOBJ("USE LABEL") Q:+($G(GMTSQ))>0
"RTN","GMTSOBA2",73,0)
 S GMTSOBJ("USE LABEL")=$S(+Y>0:1,1:0)
"RTN","GMTSOBA2",74,0)
 S X=+($G(Y)) D:+X LB Q
"RTN","GMTSOBA2",75,0)
LB ;   Object Label
"RTN","GMTSOBA2",76,0)
 Q:+($G(GMTSQ))>0  N X,Y,DIR,DIROUT,DUOUT,DTOUT,GMTSDEF,GMTSE
"RTN","GMTSOBA2",77,0)
 S GMTSOBJ("LABEL")="",DIR("A")="   Enter LABEL:  "
"RTN","GMTSOBA2",78,0)
 S GMTSDEF=$P($G(^GMT(142.5,+($G(DA)),0)),"^",2) S:$L(GMTSDEF) DIR("B")=GMTSDEF
"RTN","GMTSOBA2",79,0)
 S (DIR("?"),DIR("??"))="^D LBH^GMTSOBH",DIR(0)="FAO^3:60"
"RTN","GMTSOBA2",80,0)
 D ^DIR S:$D(DIROUT)!($D(DTOUT)) GMTSE=1 S:Y["^"!(X["^") GMTSE=1
"RTN","GMTSOBA2",81,0)
 K:+($G(GMTSE))>0 GMTSOBJ("USE LABEL"),GMTSOBJ("LABEL"),GMTSOBJ("LABEL BLANK LINE")
"RTN","GMTSOBA2",82,0)
 Q:+($G(GMTSE))>0  S X=$G(Y) K:'$L(X) GMTSOBJ("USE LABEL"),GMTSOBJ("LABEL"),GMTSOBJ("LABEL BLANK LINE")
"RTN","GMTSOBA2",83,0)
 S:$L(X) GMTSOBJ("LABEL")=X_" " D:$L($G(GMTSOBJ("LABEL"))) LBB Q
"RTN","GMTSOBA2",84,0)
LBB ;   Label Blank Line
"RTN","GMTSOBA2",85,0)
 Q:+($G(GMTSE))>0  Q:+($G(GMTSQ))>0  N X,Y,DIR,DIROUT,DUOUT,DTOUT,GMTSDEF,GMTSE
"RTN","GMTSOBA2",86,0)
 S GMTSOBJ("LABEL BLANK LINE")="",DIR("A")="   Print a blank line after the Object Label?  "
"RTN","GMTSOBA2",87,0)
 S GMTSDEF=$P($G(^GMT(142.5,+($G(DA)),0)),"^",8)
"RTN","GMTSOBA2",88,0)
 S GMTSDEF=$S(+GMTSDEF>0:"Y",1:"N") S DIR("B")=GMTSDEF
"RTN","GMTSOBA2",89,0)
 S (DIR("?"),DIR("??"))="^D LBLH^GMTSOBH",DIR(0)="YAO"
"RTN","GMTSOBA2",90,0)
 D ^DIR S:$D(DIROUT)!($D(DTOUT)) GMTSE=1 S:Y["^"!(X["^") GMTSE=1
"RTN","GMTSOBA2",91,0)
 K:+($G(GMTSE))>0 GMTSOBJ("LABEL BLANK LINE") Q:+($G(GMTSE))>0
"RTN","GMTSOBA2",92,0)
 S X=+($G(Y)) K:+X'>0 GMTSOBJ("LABEL BLANK LINE") Q
"RTN","GMTSOBA2",93,0)
SC ; Suppress Components w/o Data
"RTN","GMTSOBA2",94,0)
 Q:+($G(GMTSQ))>0  N X,Y,DIR,DIROUT,DUOUT,DTOUT,GMTSDLD,GMTSDEF
"RTN","GMTSOBA2",95,0)
 S GMTSOBJ("SUPPRESS COMPONENTS")="",DIR("A")=" Suppress Components without Data?  "
"RTN","GMTSOBA2",96,0)
 S GMTSDEF=$P($G(^GMT(142.5,+($G(GMTSDA)),0)),U,5)
"RTN","GMTSOBA2",97,0)
 S GMTSDEF=$S(+GMTSDEF>0:"Y",1:"N")
"RTN","GMTSOBA2",98,0)
 S (DIR("?"),DIR("??"))="^D SC^GMTSOBH",DIR("B")=GMTSDEF,DIR(0)="YAO"
"RTN","GMTSOBA2",99,0)
 D ^DIR S:$D(DIROUT)!($D(DTOUT)) GMTSQ=1
"RTN","GMTSOBA2",100,0)
 K:+($G(GMTSQ))>0 GMTSOBJ("SUPPRESS COMPONENTS") Q:+($G(GMTSQ))>0
"RTN","GMTSOBA2",101,0)
 S X=+($G(Y)) K:+X'>0 GMTSOBJ("SUPPRESS COMPONENTS")
"RTN","GMTSOBA2",102,0)
 Q
"RTN","GMTSOBA2",103,0)
NODATA ; Override No Data Available output
"RTN","GMTSOBA2",104,0)
 Q:+($G(GMTSQ))>0  N X,Y,DIR,DIROUT,DUOUT,DTOUT,GMTSDLD,GMTSDEF
"RTN","GMTSOBA2",105,0)
 S GMTSOBJ("NO DATA")="",DIR("A")=" Overwrite No Data Available Message  "
"RTN","GMTSOBA2",106,0)
 S GMTSDEF=$G(^GMT(142.5,+($G(GMTSDA)),2))
"RTN","GMTSOBA2",107,0)
 S (DIR("?"),DIR("??"))="^D NODATA^GMTSOBH",DIR("B")=GMTSDEF,DIR(0)="FO^3:60"
"RTN","GMTSOBA2",108,0)
 S DIR("PRE")="S:X[""^"" X=""^^""" ; p.106 stops error caused by user using "^TEXT" at prompt
"RTN","GMTSOBA2",109,0)
 D ^DIR S:$D(DIROUT)!($D(DTOUT)) GMTSQ=1
"RTN","GMTSOBA2",110,0)
 I +($G(GMTSQ))>0 S GMTSOBJ("NO DATA")="" Q
"RTN","GMTSOBA2",111,0)
 S GMTSOBJ("NO DATA")=$S(X="@":"@",1:Y) ; p.106 allows deletion of current field text 
"RTN","GMTSOBA2",112,0)
 Q
"RTN","GMTSOBA2",113,0)
 ;
"RTN","GMTSOBA2",114,0)
ET(X) ; Edit Type X
"RTN","GMTSOBA2",115,0)
 Q:+($G(DUZ))'>0  N ADEL,B,BY,CHANGE,CNT,DA,DHD,DIC,DIE,DIK,DIR,DIROUT,DLAYGO,DR,DTOUT
"RTN","GMTSOBA2",116,0)
 N DUOUT,EXISTS,FLDS,FR,GMTSEG,GMTSIEN,GMTSDEF,GMTSIFN,GMTSMGR,GNTSN
"RTN","GMTSOBA2",117,0)
 N GMTSNEW,GMTSQIT,GMTSUM,GMTSV,GMTSAL,D,D0,D1,DQ,Y,L,LCNT,LI
"RTN","GMTSOBA2",118,0)
 N NXTCMP,SELCNT,SOACTION,TO,TWEENER S EXISTS=0,U="^",GMTSAL=1,GMTSQIT=0,X=$G(X) Q:'$L(X)  Q:$L(X)>30
"RTN","GMTSOBA2",119,0)
 S DIC="^GMT(142,",DIC(0)="XMZ" K DLAYGO D ^DIC
"RTN","GMTSOBA2",120,0)
 S GMTSN=$P($G(^GMT(142,+Y,0)),"^",1) Q:'$L(GMTSN)
"RTN","GMTSOBA2",121,0)
 S GMTSUM=$P(Y,U,2) Q:'$L(GMTSUM)  S:$D(DIROUT)!($D(DTOUT)) Y=-1 Q:+Y'>0
"RTN","GMTSOBA2",122,0)
 S GMTSNEW=+($P(Y,"^",3)),GMTSV=$$VTE^GMTSOBV(+Y) Q:+GMTSV'>0
"RTN","GMTSOBA2",123,0)
 S GMTSMGR=$S($D(^XUSEC("GMTSMGR",DUZ)):1,1:0)
"RTN","GMTSOBA2",124,0)
 S DIE="^GMT(142,",(GMTSIFN,DA)=+Y
"RTN","GMTSOBA2",125,0)
 S DR="[GMTS EDIT EXIST HS TYPE]"
"RTN","GMTSOBA2",126,0)
 W !!,"Editing Health Summary Type '",GMTSN,"'",!
"RTN","GMTSOBA2",127,0)
 D ^DIE
"RTN","GMTSOBA2",128,0)
 S EXISTS=0 S:($O(^GMT(142,+GMTSIFN,1,0))) EXISTS=1
"RTN","GMTSOBA2",129,0)
 D LIST:EXISTS,EXISTS
"RTN","GMTSOBA2",130,0)
 Q
"RTN","GMTSOBA2",131,0)
EXISTS ;   Edit an existing health summary type
"RTN","GMTSOBA2",132,0)
 N GMTSAL,CNT,NXTCMP Q:$D(DUOUT)  S NXTCMP=0,NXTCMP(0)=0,GMTSAL=0
"RTN","GMTSOBA2",133,0)
 F CNT=$$GETCNT(GMTSIFN):0 D NXTCMP^GMTSRM1,LIST:GMTSQIT Q:GMTSQIT!($D(DUOUT))  K GMTSQIT,GMTSNEW,TWEENER,SOACTION
"RTN","GMTSOBA2",134,0)
 I NXTCMP>0 W !,"Please hold on while I resequence the summary order" D COPY^GMTSRN,RNMBR^GMTSRN:CHANGE
"RTN","GMTSOBA2",135,0)
 Q
"RTN","GMTSOBA2",136,0)
LIST ;   Lists existing summary parameters
"RTN","GMTSOBA2",137,0)
 N B,DIC,DIR,IOP,Y,FR,TO,BY,DHD,FLDS,L I GMTSQIT'=2 Q:($D(DUOUT)!(GMTSQIT=1))
"RTN","GMTSOBA2",138,0)
 I GMTSQIT=2,(NXTCMP=0) S GMTSQIT=0 Q
"RTN","GMTSOBA2",139,0)
 I 'GMTSNEW,'GMTSAL W ! S DIC=142,DIR(0)="Y",DIR("A")="Do you wish to review the Summary Type structure before continuing",DIR("B")="NO" D ^DIR K DIR I 'Y S:GMTSQIT=2 DUOUT="" S:GMTSQIT=2 GMTSQIT="D" S:$D(DUOUT) GMTSQIT=1 Q
"RTN","GMTSOBA2",140,0)
 I $D(GMTSQIT),GMTSQIT=2 S GMTSQIT=0
"RTN","GMTSOBA2",141,0)
 S IOP="HOME",DIC=142,(FR,TO)=GMTSUM,BY=".01",DHD="[GMTS TYPE INQ HEADER]-[GMTS TYPE INQ FOOTER]",FLDS="[GMTS TYPE INQ]",L=0 D EN1^DIP
"RTN","GMTSOBA2",142,0)
 Q
"RTN","GMTSOBA2",143,0)
GETCNT(GMTSIFN) ;   Determine default summary order for new component
"RTN","GMTSOBA2",144,0)
 N LI,LCNT S LI=0,LCNT=5 F  S LI=$O(^GMT(142,+GMTSIFN,1,LI)) Q:+LI'>0  S LCNT=$P(LI,".")+5
"RTN","GMTSOBA2",145,0)
 Q LCNT
"RTN","GMTSP106")
0^^B2071523^n/a
"RTN","GMTSP106",1,0)
GMTSP106 ; MWA/VMP - Post install GMTS*2.7*106 ; 12/4/12 9:25am
"RTN","GMTSP106",2,0)
 ;;2.7;Health Summary;**106**;;Build 11
"RTN","GMTSP106",3,0)
 ;
"RTN","GMTSP106",4,0)
 ;
"RTN","GMTSP106",5,0)
 Q
"RTN","GMTSP106",6,0)
EN ; main entry point
"RTN","GMTSP106",7,0)
 N GMTSIEN,GMTSMCNT,GMTSMSG
"RTN","GMTSP106",8,0)
 S GMTSIEN=0,GMTSMCNT=4 F  S GMTSIEN=$O(^GMT(142.5,GMTSIEN)) Q:'GMTSIEN  D
"RTN","GMTSP106",9,0)
 .Q:'$D(^GMT(142.5,GMTSIEN,2))!($G(^GMT(142.5,GMTSIEN,2))'["^")
"RTN","GMTSP106",10,0)
 .N GMTSPC1 S GMTSPC1=$P($G(^GMT(142.5,GMTSIEN,2)),U)
"RTN","GMTSP106",11,0)
 .S ^GMT(142.5,GMTSIEN,2)=GMTSPC1,GMTSMSG(GMTSMCNT)=$P($G(^GMT(142.5,GMTSIEN,0)),U),GMTSMCNT=GMTSMCNT+1
"RTN","GMTSP106",12,0)
 D SENDMAIL
"RTN","GMTSP106",13,0)
 Q
"RTN","GMTSP106",14,0)
SENDMAIL ; sends mailman message to inform that routine has run
"RTN","GMTSP106",15,0)
 N XMSUB,XMDUZ,XMTEXT,XMY,DIFROM
"RTN","GMTSP106",16,0)
 S GMTSMSG(1)="GMTS*2.7*106 Post install routine has completed"
"RTN","GMTSP106",17,0)
 S GMTSMSG(2)="Bad records corrected:"
"RTN","GMTSP106",18,0)
 S GMTSMSG(3)=" "
"RTN","GMTSP106",19,0)
 I '$D(GMTSMSG(4)) S GMTSMSG(4)="No bad records found"
"RTN","GMTSP106",20,0)
 S XMSUB="GMTS*2.7*106 Post install routine has completed"
"RTN","GMTSP106",21,0)
 S XMDUZ="HEALTH SUMMARY PACKAGE"
"RTN","GMTSP106",22,0)
 S XMTEXT="GMTSMSG("
"RTN","GMTSP106",23,0)
 S XMY(DUZ)=""
"RTN","GMTSP106",24,0)
 D ^XMD
"RTN","GMTSP106",25,0)
 Q
"RTN","GMTSRON")
0^2^B25074680^B24443367
"RTN","GMTSRON",1,0)
GMTSRON ; SLC/JER,KER - Surgery Reports ; 06/24/2002 [7/27/04 9:00am]
"RTN","GMTSRON",2,0)
 ;;2.7;Health Summary;**11,28,37,57,106**;Oct 20, 1995;Build 11
"RTN","GMTSRON",3,0)
 ;
"RTN","GMTSRON",4,0)
 ; External References
"RTN","GMTSRON",5,0)
 ;   DBIA  3590  HS^SROGMTS
"RTN","GMTSRON",6,0)
 ;   DBIA  2056/4872  $$GET1^DIQ (file #136)
"RTN","GMTSRON",7,0)
 ;                     
"RTN","GMTSRON",8,0)
ENSR ; Entry point for component
"RTN","GMTSRON",9,0)
 N REC,GMTSMX,GMCOUNT,GMIDT,GMJ,GMN,SURG,GMTSGL
"RTN","GMTSRON",10,0)
 S GMTSGL=$$GL^GMTSROE Q:'$L(GMTSGL)  Q:'$D(@(GMTSGL_"""B"","_DFN_")"))
"RTN","GMTSRON",11,0)
 S GMTSMX=999 I $D(GMTSNDM),(GMTSNDM>0) S GMTSMX=GMTSNDM
"RTN","GMTSRON",12,0)
 S GMN=0 F  S GMN=$O(@(GMTSGL_"""B"","_DFN_","_GMN_")")) Q:GMN'>0  D SORT
"RTN","GMTSRON",13,0)
 Q:'$D(SURG)  S (GMCOUNT,GMIDT)=0 F  S GMIDT=$O(SURG(GMIDT)) Q:GMIDT'>0!(GMCOUNT'<GMTSMX)  D
"RTN","GMTSRON",14,0)
 . S GMN=SURG(GMIDT) K REC I $$CHK D WRT
"RTN","GMTSRON",15,0)
 K REC
"RTN","GMTSRON",16,0)
 Q
"RTN","GMTSRON",17,0)
 ;                               
"RTN","GMTSRON",18,0)
SORT ; Sort surgeries by inverted date
"RTN","GMTSRON",19,0)
 N GMDT S GMDT=$P($G(@(GMTSGL_GMN_",0)")),U,9) I GMDT>GMTSBEG&(GMDT<GMTSEND) D
"RTN","GMTSRON",20,0)
 . F  Q:'$D(SURG(9999999-GMDT))  S GMDT=GMDT+.0001
"RTN","GMTSRON",21,0)
 . S SURG(9999999-GMDT)=GMN
"RTN","GMTSRON",22,0)
 Q
"RTN","GMTSRON",23,0)
 ;                               
"RTN","GMTSRON",24,0)
WRT ; Write surgical case record
"RTN","GMTSRON",25,0)
 S GMN=+($G(GMN))
"RTN","GMTSRON",26,0)
 D:+($$PROK^GMTSU("SROGMTS",100))>0 HS^SROGMTS(GMN)
"RTN","GMTSRON",27,0)
 D:+($$PROK^GMTSU("SROGMTS",100))'>0 ONE^GMTSROE(GMN)
"RTN","GMTSRON",28,0)
 N X,Y,GMI,GMDT,GMTSTR
"RTN","GMTSRON",29,0)
 ;-------------------------------------------------------
"RTN","GMTSRON",30,0)
 Q:$G(REC(130,GMN,118,"I"))'="Y"  S GMCOUNT=GMCOUNT+1
"RTN","GMTSRON",31,0)
NONOR ; NON-OR information
"RTN","GMTSRON",32,0)
SP ;     Date/Specialty/Provider
"RTN","GMTSRON",33,0)
 D CKP^GMTSUP Q:$D(GMTSQIT)
"RTN","GMTSRON",34,0)
 S GMDT=$G(REC(130,GMN,.09,"S")) S:'$L(GMDT) GMDT=$$ED^GMTSU($G(REC(130,GMN,.09,"I")))
"RTN","GMTSRON",35,0)
 S GMTSTR=$G(REC(130,GMN,125,"S")) S:$L($G(GMTSTR))>25 GMTSTR=$$WRAP^GMTSORC(GMTSTR,25)
"RTN","GMTSRON",36,0)
 D CKP^GMTSUP Q:$D(GMTSQIT)
"RTN","GMTSRON",37,0)
 W GMDT,?21,$P($G(GMTSTR),"|"),?47,"Provider: ",?56,$G(REC(130,GMN,123,"E")),!
"RTN","GMTSRON",38,0)
 F GMI=2:1:$L($G(GMTSTR),"|") D CKP^GMTSUP Q:$D(GMTSQIT)  W ?23,$P($G(GMTSTR),"|",GMI),!
"RTN","GMTSRON",39,0)
 ;
"RTN","GMTSRON",40,0)
SA ;     Status/Attending
"RTN","GMTSRON",41,0)
 D CKP^GMTSUP Q:$D(GMTSQIT)
"RTN","GMTSRON",42,0)
 W ?13,"Status:",?21,$G(REC(130,GMN,"STATUS"))
"RTN","GMTSRON",43,0)
 W ?46,"Attending: ",?56,$G(REC(130,GMN,124,"E")),!
"RTN","GMTSRON",44,0)
PA ;     Principal Anesthetist
"RTN","GMTSRON",45,0)
 D CKP^GMTSUP Q:$D(GMTSQIT)
"RTN","GMTSRON",46,0)
 W ?45,"Prin Anest: ",?56,$G(REC(130,GMN,.31,"E")),!
"RTN","GMTSRON",47,0)
PD ;     Principle Diagnosis
"RTN","GMTSRON",48,0)
 S GMTSTR=$G(REC(130,GMN,33,"S")) S:'$L(GMTSTR) GMTSTR=$G(REC(130,GMN,33,"E"))
"RTN","GMTSRON",49,0)
 S:$L($G(GMTSTR))>39 GMTSTR=$$WRAP^GMTSORC(GMTSTR,39)
"RTN","GMTSRON",50,0)
 D CKP^GMTSUP Q:$D(GMTSQIT)  W ?9,"Princ Diag: ",$P($G(GMTSTR),"|"),!
"RTN","GMTSRON",51,0)
 F GMI=2:1:$L($G(GMTSTR),"|") D CKP^GMTSUP Q:$D(GMTSQIT)  W ?21,$P($G(GMTSTR),"|",GMI),!
"RTN","GMTSRON",52,0)
PP ;     Principal Procedure
"RTN","GMTSRON",53,0)
 D CKP^GMTSUP Q:$D(GMTSQIT)  W ?5,"Proc Performed: "
"RTN","GMTSRON",54,0)
 S GMTSTR=$G(REC(130,GMN,26,"S"))
"RTN","GMTSRON",55,0)
 S:GMTSTR="" GMTSTR=$G(REC(130,GMN,26,"E"))
"RTN","GMTSRON",56,0)
 S:$L(GMTSTR)>58 GMTSTR=$$WRAP^GMTSORC(GMTSTR,58)
"RTN","GMTSRON",57,0)
 F GMJ=1:1:$L(GMTSTR,"|") D  Q:$D(GMTSQIT)
"RTN","GMTSRON",58,0)
 . D CKP^GMTSUP Q:$D(GMTSQIT)  W ?$S(GMJ=1:21,1:22),$P(GMTSTR,"|",GMJ),!
"RTN","GMTSRON",59,0)
 Q:$D(GMTSQIT)
"RTN","GMTSRON",60,0)
PPM ;     Principal Procedure (Modifiers)
"RTN","GMTSRON",61,0)
 S GMI=0 F  S GMI=$O(REC(130,GMN,130.028,GMI)) Q:GMI'>0  D  Q:$D(GMTSQIT)
"RTN","GMTSRON",62,0)
 . S GMTSTR=$G(REC(130,GMN,130.028,GMI,.01,"S")) S:GMTSTR="" GMTSTR=$G(REC(130,GMN,130.028,GMI,.01,"E")) S:$L(GMTSTR)>54 GMTSTR=$$WRAP^GMTSORC(GMTSTR,54)
"RTN","GMTSRON",63,0)
 . F GMJ=1:1:$L(GMTSTR,"|") D  Q:$D(GMTSQIT)
"RTN","GMTSRON",64,0)
 . . D CKP^GMTSUP Q:$D(GMTSQIT)  W ?$S(GMJ=1:25,1:26),$P(GMTSTR,"|",GMJ),!
"RTN","GMTSRON",65,0)
 Q:$D(GMTSQIT)
"RTN","GMTSRON",66,0)
OPP ;     Other Procedure Performed
"RTN","GMTSRON",67,0)
 S GMI=0 F  S GMI=$O(REC(130,GMN,130.16,GMI)) Q:GMI'>0  D
"RTN","GMTSRON",68,0)
 . S GMTSTR=$G(REC(130,GMN,130.16,GMI,.01,"S")) S:GMTSTR="" GMTSTR=$G(REC(130,GMN,130.16,GMI,.01,"E")) S:$L(GMTSTR)>58 GMTSTR=$$WRAP^GMTSORC(GMTSTR,58)
"RTN","GMTSRON",69,0)
 . F GMJ=1:1:$L(GMTSTR,"|") D  Q:$D(GMTSQIT)
"RTN","GMTSRON",70,0)
 . . D CKP^GMTSUP Q:$D(GMTSQIT)
"RTN","GMTSRON",71,0)
 . . W ?$S(GMJ=1:21,1:22),$P(GMTSTR,"|",GMJ),!
"RTN","GMTSRON",72,0)
OPPM . ;       Other Procedure Performed (Modifiers)
"RTN","GMTSRON",73,0)
 . N GMM S GMM=0
"RTN","GMTSRON",74,0)
 . F  S GMM=$O(REC(130,GMN,130.16,GMI,130.164,GMM)) Q:+GMM=0  D
"RTN","GMTSRON",75,0)
 . . S GMTSTR=$G(REC(130,GMN,130.16,GMI,130.164,GMM,.01,"S")) S:'$L(GMTSTR) GMTSTR=$G(REC(130,GMN,130.16,GMI,130.164,GMM,.01,"E")) S:$L(GMTSTR)>54 GMTSTR=$$WRAP^GMTSORC(GMTSTR,54)
"RTN","GMTSRON",76,0)
 . . F GMJ=1:1:$L(GMTSTR,"|") D  Q:$D(GMTSQIT)
"RTN","GMTSRON",77,0)
 . . . D CKP^GMTSUP Q:$D(GMTSQIT)  W ?$S(GMJ=1:25,1:26),$P(GMTSTR,"|",GMJ),!
"RTN","GMTSRON",78,0)
 . Q:$D(GMTSQIT)
"RTN","GMTSRON",79,0)
 Q:$D(GMTSQIT)
"RTN","GMTSRON",80,0)
IND ;     Indications for Surgery
"RTN","GMTSRON",81,0)
 I $G(REC(130,GMN,55,"S",0))>0 D  Q:$D(GMTSQIT)
"RTN","GMTSRON",82,0)
 . N GMI,GMC S (GMI,GMC)=0 F  S GMI=$O(REC(130,GMN,55,"S",GMI)) Q:+GMI=0  D  Q:$D(GMTSQIT)
"RTN","GMTSRON",83,0)
 . . S GMC=+GMC+1 D CKP^GMTSUP Q:$D(GMTSQIT)  W:GMC=1 "Indication for Proc:" W ?21,$G(REC(130,GMN,55,"S",GMI)),!
"RTN","GMTSRON",84,0)
FIND ;     Findings
"RTN","GMTSRON",85,0)
 I $G(REC(130,GMN,59,"S",0))>0 D  Q:$D(GMTSQIT)
"RTN","GMTSRON",86,0)
 . N GMI,GMC S (GMI,GMC)=0 F  S GMI=$O(REC(130,GMN,59,"S",GMI)) Q:+GMI=0  D  Q:$D(GMTSQIT)
"RTN","GMTSRON",87,0)
 . . S GMC=+GMC+1 D CKP^GMTSUP Q:$D(GMTSQIT)  W:GMC=1 " Operative Findings:" W ?21,$G(REC(130,GMN,59,"S",GMI)),!
"RTN","GMTSRON",88,0)
DICT ;     Dictation
"RTN","GMTSRON",89,0)
 I $O(REC(130,GMN,1.15,0))>0 D
"RTN","GMTSRON",90,0)
 . N GMI D CKP^GMTSUP Q:$D(GMTSQIT)  W "Surgeon's Dictation:",!
"RTN","GMTSRON",91,0)
 . S GMI=0 F  S GMI=$O(REC(130,GMN,1.15,GMI)) Q:+GMI=0  D  Q:$D(GMTSQIT)
"RTN","GMTSRON",92,0)
 . . D CKP^GMTSUP Q:$D(GMTSQIT)  W ?2,$G(REC(130,GMN,1.15,GMI)),!
"RTN","GMTSRON",93,0)
 Q
"RTN","GMTSRON",94,0)
 ;--------------------------------------------------------------------
"RTN","GMTSRON",95,0)
CHK() ; For selected procedures see if you have a match
"RTN","GMTSRON",96,0)
 N GMTSI,GMTSF,GMTSC
"RTN","GMTSRON",97,0)
 S GMTSC=$$GET1^DIQ(136,+($G(GMN)),.02,"I") Q:'$D(GMTSEG(GMTSEGN,81)) 1 ; p.106 $$GET1^DIQ call changed to file 136 
"RTN","GMTSRON",98,0)
 S GMTSF=0 F GMTSI=0:0 S GMTSI=$O(GMTSEG(GMTSEGN,81,GMTSI)) Q:'+GMTSI!GMTSF  S:GMTSEG(GMTSEGN,81,GMTSI)=GMTSC GMTSF=1 Q:GMTSF
"RTN","GMTSRON",99,0)
 Q GMTSF
"VER")
8.0^22.0
"BLD",9141,6)
^97
**END**
**END**
