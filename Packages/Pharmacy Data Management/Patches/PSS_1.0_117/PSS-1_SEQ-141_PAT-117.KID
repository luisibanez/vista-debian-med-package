Released PSS*1*117 SEQ #141
Extracted from mail message
**KIDS**:PSS*1.0*117^

**INSTALL NAME**
PSS*1.0*117
"BLD",7149,0)
PSS*1.0*117^PHARMACY DATA MANAGEMENT^0^3110113^y
"BLD",7149,1,0)
^^60^60^3100820^
"BLD",7149,1,1,0)
This patch is part of a set of patches that make up Pharmacy
"BLD",7149,1,2,0)
Re-engineering version 0.5. Version 0.5 will replace the current
"BLD",7149,1,3,0)
medication order checking system with a new system that uses data from
"BLD",7149,1,4,0)
First DataBank (FDB). In addition to replacing the current Drug
"BLD",7149,1,5,0)
Interaction and Duplicate Class checks with the FDB equivalent of these
"BLD",7149,1,6,0)
checks, Maximum Single Dose and Daily Dose Range Checks will now also
"BLD",7149,1,7,0)
occur in Outpatient Pharmacy, Inpatient Medications, and Computerized
"BLD",7149,1,8,0)
Patient Record System (CPRS).
"BLD",7149,1,9,0)
 
"BLD",7149,1,10,0)
 
"BLD",7149,1,11,0)
This patch addresses the following New Service Request (NSR):
"BLD",7149,1,12,0)
-------------------------------------------------------------
"BLD",7149,1,13,0)
There is no NSR associated with this patch. 
"BLD",7149,1,14,0)
 
"BLD",7149,1,15,0)
 
"BLD",7149,1,16,0)
This patch addresses the following Remedy Ticket(s):
"BLD",7149,1,17,0)
----------------------------------------------------
"BLD",7149,1,18,0)
There are no Remedy tickets associated with this patch.
"BLD",7149,1,19,0)
 
"BLD",7149,1,20,0)
 
"BLD",7149,1,21,0)
Overview of Remedy Ticket(s):
"BLD",7149,1,22,0)
-----------------------------
"BLD",7149,1,23,0)
There are no Remedy tickets associated with this patch. 
"BLD",7149,1,24,0)
 
"BLD",7149,1,25,0)
 
"BLD",7149,1,26,0)
Components Exported With Patch: 
"BLD",7149,1,27,0)
-------------------------------
"BLD",7149,1,28,0)
 
"BLD",7149,1,29,0)
 
"BLD",7149,1,30,0)
The following is a list of fields included in this patch:
"BLD",7149,1,31,0)
 
"BLD",7149,1,32,0)
Field Name                 (Number)     File Name             (Number)
"BLD",7149,1,33,0)
-----------------------------------     ------------------------------
"BLD",7149,1,34,0)
DISPLAY STATUS                  157     IV Subfile               55.01
"BLD",7149,1,35,0)
                                        of PHARMACY PATIENT         55
"BLD",7149,1,36,0)
DISPLAY STATUS                  136     UNIT DOSE Subfile        55.06
"BLD",7149,1,37,0)
                                        of PHARMACY PATIENT         55
"BLD",7149,1,38,0)
HOURS OF RECENTLY DC/EXPIRED   26.8     PHARMACY SYSTEM           59.7
"BLD",7149,1,39,0)
 
"BLD",7149,1,40,0)
 
"BLD",7149,1,41,0)
The following is a list of options exported in this patch:
"BLD",7149,1,42,0)
 
"BLD",7149,1,43,0)
Option Name                      Type      Action
"BLD",7149,1,44,0)
-----------                      ----      ----------------------
"BLD",7149,1,45,0)
PSS ADDITIVE/SOLUTIONS           Menu      Send to Site
"BLD",7149,1,46,0)
PSS ADDITIVE/SOLUTION REPORTS    Menu      Delete at Site
"BLD",7149,1,47,0)
PSS DRG INTER MANAGEMENT         Menu      Delete at Site
"BLD",7149,1,48,0)
PSS ENHANCED ORDER CHECKS        Menu      Delete at Site 
"BLD",7149,1,49,0)
PSS INTERACTION LOCAL ADD        Run       Delete at Site
"BLD",7149,1,50,0)
PSS INTERACTION SEVERITY         Action    Delete at Site
"BLD",7149,1,51,0)
PSS INTERFACE SCHEDULER          Run       Send to Site
"BLD",7149,1,52,0)
PSS LOCAL DOSAGES EDIT           Run       Delete at Site
"BLD",7149,1,53,0)
PSS LOCAL DOSAGES EDIT ALL       Run       Delete at Site
"BLD",7149,1,54,0)
PSS MAP ONE MED ROUTE            Run       Delete at Site
"BLD",7149,1,55,0)
PSS MARK PREMIX SOLUTIONS        Run       Send to Site
"BLD",7149,1,56,0)
PSS MED ROUTES INITIAL MAPPING   Run       Delete at Site
"BLD",7149,1,57,0)
PSS ORDER CHECK CHANGES          Run       Send to Site
"BLD",7149,1,58,0)
PSS ORDER CHECK MANAGEMENT       Menu      Send to site
"BLD",7149,1,59,0)
PSS SCHEDULE PEPS INTERFACE CK   Run       Send to Site
"BLD",7149,1,60,0)
PSS STRENGTH MISMATCH            Run       Delete at Site
"BLD",7149,4,0)
^9.64PA^55^2
"BLD",7149,4,55,0)
55
"BLD",7149,4,55,2,0)
^9.641^55.06^2
"BLD",7149,4,55,2,55.01,0)
IV  (sub-file)
"BLD",7149,4,55,2,55.01,1,0)
^9.6411^157^1
"BLD",7149,4,55,2,55.01,1,157,0)
DISPLAY STATUS
"BLD",7149,4,55,2,55.06,0)
UNIT DOSE  (sub-file)
"BLD",7149,4,55,2,55.06,1,0)
^9.6411^136^1
"BLD",7149,4,55,2,55.06,1,136,0)
DISPLAY STATUS
"BLD",7149,4,55,222)
y^y^p^^^^n^^n
"BLD",7149,4,55,224)

"BLD",7149,4,59.7,0)
59.7
"BLD",7149,4,59.7,2,0)
^9.641^59.7^1
"BLD",7149,4,59.7,2,59.7,0)
PHARMACY SYSTEM  (File-top level)
"BLD",7149,4,59.7,2,59.7,1,0)
^9.6411^26.8^1
"BLD",7149,4,59.7,2,59.7,1,26.8,0)
HOURS OF RECENTLY DC/EXPIRED
"BLD",7149,4,59.7,222)
y^y^p^^^^n^^n
"BLD",7149,4,59.7,224)

"BLD",7149,4,"APDD",55,55.01)

"BLD",7149,4,"APDD",55,55.01,157)

"BLD",7149,4,"APDD",55,55.06)

"BLD",7149,4,"APDD",55,55.06,136)

"BLD",7149,4,"APDD",59.7,59.7)

"BLD",7149,4,"APDD",59.7,59.7,26.8)

"BLD",7149,4,"B",55,55)

"BLD",7149,4,"B",59.7,59.7)

"BLD",7149,6.3)
101
"BLD",7149,"ABPKG")
n
"BLD",7149,"INID")
^
"BLD",7149,"INIT")
PSS117PO
"BLD",7149,"KRN",0)
^9.67PA^8989.52^19
"BLD",7149,"KRN",.4,0)
.4
"BLD",7149,"KRN",.401,0)
.401
"BLD",7149,"KRN",.402,0)
.402
"BLD",7149,"KRN",.403,0)
.403
"BLD",7149,"KRN",.5,0)
.5
"BLD",7149,"KRN",.84,0)
.84
"BLD",7149,"KRN",3.6,0)
3.6
"BLD",7149,"KRN",3.8,0)
3.8
"BLD",7149,"KRN",9.2,0)
9.2
"BLD",7149,"KRN",9.2,"NM",0)
^9.68A^^
"BLD",7149,"KRN",9.8,0)
9.8
"BLD",7149,"KRN",9.8,"NM",0)
^9.68A^29^16
"BLD",7149,"KRN",9.8,"NM",1,0)
PSSDSAPI^^0^B115672717
"BLD",7149,"KRN",9.8,"NM",3,0)
PSS117EN^^0^B180968609
"BLD",7149,"KRN",9.8,"NM",4,0)
PSS117PO^^0^B57871045
"BLD",7149,"KRN",9.8,"NM",15,0)
PSSCUSRQ^^0^B82903624
"BLD",7149,"KRN",9.8,"NM",18,0)
PSSDSAPD^^0^B200359258
"BLD",7149,"KRN",9.8,"NM",19,0)
PSSDSBBP^^0^B74998032
"BLD",7149,"KRN",9.8,"NM",20,0)
PSSDSBDA^^0^B108168713
"BLD",7149,"KRN",9.8,"NM",21,0)
PSSDSBDB^^0^B76752781
"BLD",7149,"KRN",9.8,"NM",22,0)
PSSDSBPA^^0^B112434613
"BLD",7149,"KRN",9.8,"NM",23,0)
PSSDSBPB^^0^B55713776
"BLD",7149,"KRN",9.8,"NM",24,0)
PSSDSEXC^^0^B219828459
"BLD",7149,"KRN",9.8,"NM",25,0)
PSSDSAPK^^0^B182688846
"BLD",7149,"KRN",9.8,"NM",26,0)
PSSDSAPL^^0^B89599463
"BLD",7149,"KRN",9.8,"NM",27,0)
PSSDSAPM^^0^B211863558
"BLD",7149,"KRN",9.8,"NM",28,0)
PSSDSBPC^^0^B32747800
"BLD",7149,"KRN",9.8,"NM",29,0)
PSSDSBPD^^0^B58003875
"BLD",7149,"KRN",9.8,"NM","B","PSS117EN",3)

"BLD",7149,"KRN",9.8,"NM","B","PSS117PO",4)

"BLD",7149,"KRN",9.8,"NM","B","PSSCUSRQ",15)

"BLD",7149,"KRN",9.8,"NM","B","PSSDSAPD",18)

"BLD",7149,"KRN",9.8,"NM","B","PSSDSAPI",1)

"BLD",7149,"KRN",9.8,"NM","B","PSSDSAPK",25)

"BLD",7149,"KRN",9.8,"NM","B","PSSDSAPL",26)

"BLD",7149,"KRN",9.8,"NM","B","PSSDSAPM",27)

"BLD",7149,"KRN",9.8,"NM","B","PSSDSBBP",19)

"BLD",7149,"KRN",9.8,"NM","B","PSSDSBDA",20)

"BLD",7149,"KRN",9.8,"NM","B","PSSDSBDB",21)

"BLD",7149,"KRN",9.8,"NM","B","PSSDSBPA",22)

"BLD",7149,"KRN",9.8,"NM","B","PSSDSBPB",23)

"BLD",7149,"KRN",9.8,"NM","B","PSSDSBPC",28)

"BLD",7149,"KRN",9.8,"NM","B","PSSDSBPD",29)

"BLD",7149,"KRN",9.8,"NM","B","PSSDSEXC",24)

"BLD",7149,"KRN",19,0)
19
"BLD",7149,"KRN",19,"NM",0)
^9.68A^17^16
"BLD",7149,"KRN",19,"NM",1,0)
PSS INTERACTION SEVERITY^^1^
"BLD",7149,"KRN",19,"NM",3,0)
PSS DRG INTER MANAGEMENT^^1^
"BLD",7149,"KRN",19,"NM",4,0)
PSS INTERACTION LOCAL ADD^^1^
"BLD",7149,"KRN",19,"NM",5,0)
PSS ORDER CHECK MANAGEMENT^^0
"BLD",7149,"KRN",19,"NM",6,0)
PSS ORDER CHECK CHANGES^^0
"BLD",7149,"KRN",19,"NM",7,0)
PSS INTERFACE SCHEDULER^^0
"BLD",7149,"KRN",19,"NM",8,0)
PSS SCHEDULE PEPS INTERFACE CK^^0
"BLD",7149,"KRN",19,"NM",9,0)
PSS MED ROUTES INITIAL MAPPING^^1^
"BLD",7149,"KRN",19,"NM",10,0)
PSS MAP ONE MED ROUTE^^1^
"BLD",7149,"KRN",19,"NM",11,0)
PSS STRENGTH MISMATCH^^1^
"BLD",7149,"KRN",19,"NM",12,0)
PSS LOCAL DOSAGES EDIT^^1^
"BLD",7149,"KRN",19,"NM",13,0)
PSS LOCAL DOSAGES EDIT ALL^^1^
"BLD",7149,"KRN",19,"NM",14,0)
PSS MARK PREMIX SOLUTIONS^^0^
"BLD",7149,"KRN",19,"NM",15,0)
PSS ENHANCED ORDER CHECKS^^1^
"BLD",7149,"KRN",19,"NM",16,0)
PSS ADDITIVE/SOLUTION^^0
"BLD",7149,"KRN",19,"NM",17,0)
PSS ADDITIVE/SOLUTION REPORTS^^1^
"BLD",7149,"KRN",19,"NM","B","PSS ADDITIVE/SOLUTION",16)

"BLD",7149,"KRN",19,"NM","B","PSS ADDITIVE/SOLUTION REPORTS",17)

"BLD",7149,"KRN",19,"NM","B","PSS DRG INTER MANAGEMENT",3)

"BLD",7149,"KRN",19,"NM","B","PSS ENHANCED ORDER CHECKS",15)

"BLD",7149,"KRN",19,"NM","B","PSS INTERACTION LOCAL ADD",4)

"BLD",7149,"KRN",19,"NM","B","PSS INTERACTION SEVERITY",1)

"BLD",7149,"KRN",19,"NM","B","PSS INTERFACE SCHEDULER",7)

"BLD",7149,"KRN",19,"NM","B","PSS LOCAL DOSAGES EDIT",12)

"BLD",7149,"KRN",19,"NM","B","PSS LOCAL DOSAGES EDIT ALL",13)

"BLD",7149,"KRN",19,"NM","B","PSS MAP ONE MED ROUTE",10)

"BLD",7149,"KRN",19,"NM","B","PSS MARK PREMIX SOLUTIONS",14)

"BLD",7149,"KRN",19,"NM","B","PSS MED ROUTES INITIAL MAPPING",9)

"BLD",7149,"KRN",19,"NM","B","PSS ORDER CHECK CHANGES",6)

"BLD",7149,"KRN",19,"NM","B","PSS ORDER CHECK MANAGEMENT",5)

"BLD",7149,"KRN",19,"NM","B","PSS SCHEDULE PEPS INTERFACE CK",8)

"BLD",7149,"KRN",19,"NM","B","PSS STRENGTH MISMATCH",11)

"BLD",7149,"KRN",19.1,0)
19.1
"BLD",7149,"KRN",19.1,"NM",0)
^9.68A^^
"BLD",7149,"KRN",101,0)
101
"BLD",7149,"KRN",101,"NM",0)
^9.68A^^0
"BLD",7149,"KRN",409.61,0)
409.61
"BLD",7149,"KRN",771,0)
771
"BLD",7149,"KRN",870,0)
870
"BLD",7149,"KRN",8989.51,0)
8989.51
"BLD",7149,"KRN",8989.52,0)
8989.52
"BLD",7149,"KRN",8994,0)
8994
"BLD",7149,"KRN",8994,"NM",0)
^9.68A^^
"BLD",7149,"KRN","B",.4,.4)

"BLD",7149,"KRN","B",.401,.401)

"BLD",7149,"KRN","B",.402,.402)

"BLD",7149,"KRN","B",.403,.403)

"BLD",7149,"KRN","B",.5,.5)

"BLD",7149,"KRN","B",.84,.84)

"BLD",7149,"KRN","B",3.6,3.6)

"BLD",7149,"KRN","B",3.8,3.8)

"BLD",7149,"KRN","B",9.2,9.2)

"BLD",7149,"KRN","B",9.8,9.8)

"BLD",7149,"KRN","B",19,19)

"BLD",7149,"KRN","B",19.1,19.1)

"BLD",7149,"KRN","B",101,101)

"BLD",7149,"KRN","B",409.61,409.61)

"BLD",7149,"KRN","B",771,771)

"BLD",7149,"KRN","B",870,870)

"BLD",7149,"KRN","B",8989.51,8989.51)

"BLD",7149,"KRN","B",8989.52,8989.52)

"BLD",7149,"KRN","B",8994,8994)

"BLD",7149,"PRE")
PSS117EN
"BLD",7149,"QUES",0)
^9.62^^
"BLD",7149,"REQB",0)
^9.611^2^1
"BLD",7149,"REQB",2,0)
PSS*1.0*136^2
"BLD",7149,"REQB","B","PSS*1.0*136",2)

"FIA",55)
PHARMACY PATIENT
"FIA",55,0)
^PS(55,
"FIA",55,0,0)
55P
"FIA",55,0,1)
y^y^p^^^^n^^n
"FIA",55,0,10)

"FIA",55,0,11)

"FIA",55,0,"RLRO")

"FIA",55,0,"VR")
1.0^PSS
"FIA",55,55)
1
"FIA",55,55.01)
1
"FIA",55,55.01,157)

"FIA",55,55.06)
1
"FIA",55,55.06,136)

"FIA",59.7)
PHARMACY SYSTEM
"FIA",59.7,0)
^PS(59.7,
"FIA",59.7,0,0)
59.7
"FIA",59.7,0,1)
y^y^p^^^^n^^n
"FIA",59.7,0,10)

"FIA",59.7,0,11)

"FIA",59.7,0,"RLRO")

"FIA",59.7,0,"VR")
1.0^PSS
"FIA",59.7,59.7)
1
"FIA",59.7,59.7,26.8)

"INIT")
PSS117PO
"KRN",19,13596,-1)
0^14
"KRN",19,13596,0)
PSS MARK PREMIX SOLUTIONS^Mark PreMix Solutions^^R^^^^^^^^PHARMACY DATA MANAGEMENT
"KRN",19,13596,1,0)
^19.06^2^2^3080419^^
"KRN",19,13596,1,1,0)
This option will be used to mark entries from the IV SOLUTIONS (#52.7) 
"KRN",19,13596,1,2,0)
File as PreMixes, by allowing editing of the PREMIX (#18) Field.
"KRN",19,13596,25)
EDIT^PSSPRUTL
"KRN",19,13596,"U")
MARK PREMIX SOLUTIONS
"KRN",19,13713,-1)
0^8
"KRN",19,13713,0)
PSS SCHEDULE PEPS INTERFACE CK^Schedule/Reschedule Check PEPS Interface^^R^^^^^^^^PHARMACY DATA MANAGEMENT
"KRN",19,13713,1,0)
^^4^4^3090515^
"KRN",19,13713,1,1,0)
This option allows you to schedule the Interface Scheduler [PSS INTERFACE
"KRN",19,13713,1,2,0)
SCHEDULER] option, which tests the PEPS interface by sending a PING
"KRN",19,13713,1,3,0)
request. If the PEPS Interface is not available, a mail message will be 
"KRN",19,13713,1,4,0)
sent to the G.PSS ORDER CHECKS mail group.
"KRN",19,13713,25)
SCHDOPT^PSSHRIT
"KRN",19,13713,99)
61493,49257
"KRN",19,13713,"U")
SCHEDULE/RESCHEDULE CHECK PEPS
"KRN",19,13719,-1)
0^5
"KRN",19,13719,0)
PSS ORDER CHECK MANAGEMENT^Order Check Management^^M^^^^^^^^PHARMACY DATA MANAGEMENT
"KRN",19,13719,1,0)
^19.06^2^2^3090408^^
"KRN",19,13719,1,1,0)
This is the sub-menu for functionality related to managing medication 
"KRN",19,13719,1,2,0)
order checks.
"KRN",19,13719,10,0)
^19.01IP^^0
"KRN",19,13719,99)
61459,36289
"KRN",19,13719,"U")
ORDER CHECK MANAGEMENT
"KRN",19,13720,-1)
0^6
"KRN",19,13720,0)
PSS ORDER CHECK CHANGES^Request Changes to Enhanced Order Check Database^^R^^^^^^^^PHARMACY DATA MANAGEMENT
"KRN",19,13720,1,0)
^^2^2^3090416^
"KRN",19,13720,1,1,0)
This option can be used to request custom changes to the Enhanced Order 
"KRN",19,13720,1,2,0)
Check Database.
"KRN",19,13720,25)
PSSCUSRQ
"KRN",19,13720,"U")
REQUEST CHANGES TO ENHANCED OR
"KRN",19,13729,-1)
0^7
"KRN",19,13729,0)
PSS INTERFACE SCHEDULER^Interface Scheduler^^R^^^^^^^^PHARMACY DATA MANAGEMENT
"KRN",19,13729,1,0)
^^3^3^3090515^
"KRN",19,13729,1,1,0)
This scheduled option tests the PEPS interface by sending a PING request.
"KRN",19,13729,1,2,0)
If the PEPS interface is not available, a mail message will be sent to the
"KRN",19,13729,1,3,0)
G.PSS ORDER CHECKS mail group.
"KRN",19,13729,25)
PINGCHK^PSSHRIT
"KRN",19,13729,"U")
INTERFACE SCHEDULER
"KRN",19,13907,-1)
0^16
"KRN",19,13907,0)
PSS ADDITIVE/SOLUTION^IV Additive/Solution^^M^^^^^^^^PHARMACY DATA MANAGEMENT
"KRN",19,13907,1,0)
^19.06^3^3^3100712^^
"KRN",19,13907,1,1,0)
This Sub-Menu contains options that can be used to run reports from the IV
"KRN",19,13907,1,2,0)
ADDITIVES (#52.6) File and the IV SOLUTIONS (#52.7) File. It also provides
"KRN",19,13907,1,3,0)
an option to edit the PREMIX (#18) Field in the IV SOLUTIONS (#52.7) File.
"KRN",19,13907,"U")
IV ADDITIVE/SOLUTION
"KRN",19,13936,-1)
1^1
"KRN",19,13936,0)
PSS INTERACTION SEVERITY
"KRN",19,13937,-1)
1^3
"KRN",19,13937,0)
PSS DRG INTER MANAGEMENT
"KRN",19,13938,-1)
1^4
"KRN",19,13938,0)
PSS INTERACTION LOCAL ADD
"KRN",19,13939,-1)
1^9
"KRN",19,13939,0)
PSS MED ROUTES INITIAL MAPPING
"KRN",19,13940,-1)
1^10
"KRN",19,13940,0)
PSS MAP ONE MED ROUTE
"KRN",19,13941,-1)
1^11
"KRN",19,13941,0)
PSS STRENGTH MISMATCH
"KRN",19,13942,-1)
1^12
"KRN",19,13942,0)
PSS LOCAL DOSAGES EDIT
"KRN",19,13943,-1)
1^13
"KRN",19,13943,0)
PSS LOCAL DOSAGES EDIT ALL
"KRN",19,13944,-1)
1^15
"KRN",19,13944,0)
PSS ENHANCED ORDER CHECKS
"KRN",19,13945,-1)
1^17
"KRN",19,13945,0)
PSS ADDITIVE/SOLUTION REPORTS
"MBREQ")
0
"ORD",18,19)
19;18;;;OPT^XPDTA;OPTF1^XPDIA;OPTE1^XPDIA;OPTF2^XPDIA;;OPTDEL^XPDIA
"ORD",18,19,0)
OPTION
"PKG",517,-1)
1^1
"PKG",517,0)
PHARMACY DATA MANAGEMENT^PSS^Maintenance of Pharmacy files.
"PKG",517,20,0)
^9.402P^^
"PKG",517,22,0)
^9.49I^1^1
"PKG",517,22,1,0)
1.0^2970930^2971014^11595
"PKG",517,22,1,"PAH",1,0)
117^3110113^20131
"PKG",517,22,1,"PAH",1,1,0)
^^60^60^3110113
"PKG",517,22,1,"PAH",1,1,1,0)
This patch is part of a set of patches that make up Pharmacy
"PKG",517,22,1,"PAH",1,1,2,0)
Re-engineering version 0.5. Version 0.5 will replace the current
"PKG",517,22,1,"PAH",1,1,3,0)
medication order checking system with a new system that uses data from
"PKG",517,22,1,"PAH",1,1,4,0)
First DataBank (FDB). In addition to replacing the current Drug
"PKG",517,22,1,"PAH",1,1,5,0)
Interaction and Duplicate Class checks with the FDB equivalent of these
"PKG",517,22,1,"PAH",1,1,6,0)
checks, Maximum Single Dose and Daily Dose Range Checks will now also
"PKG",517,22,1,"PAH",1,1,7,0)
occur in Outpatient Pharmacy, Inpatient Medications, and Computerized
"PKG",517,22,1,"PAH",1,1,8,0)
Patient Record System (CPRS).
"PKG",517,22,1,"PAH",1,1,9,0)
 
"PKG",517,22,1,"PAH",1,1,10,0)
 
"PKG",517,22,1,"PAH",1,1,11,0)
This patch addresses the following New Service Request (NSR):
"PKG",517,22,1,"PAH",1,1,12,0)
-------------------------------------------------------------
"PKG",517,22,1,"PAH",1,1,13,0)
There is no NSR associated with this patch. 
"PKG",517,22,1,"PAH",1,1,14,0)
 
"PKG",517,22,1,"PAH",1,1,15,0)
 
"PKG",517,22,1,"PAH",1,1,16,0)
This patch addresses the following Remedy Ticket(s):
"PKG",517,22,1,"PAH",1,1,17,0)
----------------------------------------------------
"PKG",517,22,1,"PAH",1,1,18,0)
There are no Remedy tickets associated with this patch.
"PKG",517,22,1,"PAH",1,1,19,0)
 
"PKG",517,22,1,"PAH",1,1,20,0)
 
"PKG",517,22,1,"PAH",1,1,21,0)
Overview of Remedy Ticket(s):
"PKG",517,22,1,"PAH",1,1,22,0)
-----------------------------
"PKG",517,22,1,"PAH",1,1,23,0)
There are no Remedy tickets associated with this patch. 
"PKG",517,22,1,"PAH",1,1,24,0)
 
"PKG",517,22,1,"PAH",1,1,25,0)
 
"PKG",517,22,1,"PAH",1,1,26,0)
Components Exported With Patch: 
"PKG",517,22,1,"PAH",1,1,27,0)
-------------------------------
"PKG",517,22,1,"PAH",1,1,28,0)
 
"PKG",517,22,1,"PAH",1,1,29,0)
 
"PKG",517,22,1,"PAH",1,1,30,0)
The following is a list of fields included in this patch:
"PKG",517,22,1,"PAH",1,1,31,0)
 
"PKG",517,22,1,"PAH",1,1,32,0)
Field Name                 (Number)     File Name             (Number)
"PKG",517,22,1,"PAH",1,1,33,0)
-----------------------------------     ------------------------------
"PKG",517,22,1,"PAH",1,1,34,0)
DISPLAY STATUS                  157     IV Subfile               55.01
"PKG",517,22,1,"PAH",1,1,35,0)
                                        of PHARMACY PATIENT         55
"PKG",517,22,1,"PAH",1,1,36,0)
DISPLAY STATUS                  136     UNIT DOSE Subfile        55.06
"PKG",517,22,1,"PAH",1,1,37,0)
                                        of PHARMACY PATIENT         55
"PKG",517,22,1,"PAH",1,1,38,0)
HOURS OF RECENTLY DC/EXPIRED   26.8     PHARMACY SYSTEM           59.7
"PKG",517,22,1,"PAH",1,1,39,0)
 
"PKG",517,22,1,"PAH",1,1,40,0)
 
"PKG",517,22,1,"PAH",1,1,41,0)
The following is a list of options exported in this patch:
"PKG",517,22,1,"PAH",1,1,42,0)
 
"PKG",517,22,1,"PAH",1,1,43,0)
Option Name                      Type      Action
"PKG",517,22,1,"PAH",1,1,44,0)
-----------                      ----      ----------------------
"PKG",517,22,1,"PAH",1,1,45,0)
PSS ADDITIVE/SOLUTIONS           Menu      Send to Site
"PKG",517,22,1,"PAH",1,1,46,0)
PSS ADDITIVE/SOLUTION REPORTS    Menu      Delete at Site
"PKG",517,22,1,"PAH",1,1,47,0)
PSS DRG INTER MANAGEMENT         Menu      Delete at Site
"PKG",517,22,1,"PAH",1,1,48,0)
PSS ENHANCED ORDER CHECKS        Menu      Delete at Site 
"PKG",517,22,1,"PAH",1,1,49,0)
PSS INTERACTION LOCAL ADD        Run       Delete at Site
"PKG",517,22,1,"PAH",1,1,50,0)
PSS INTERACTION SEVERITY         Action    Delete at Site
"PKG",517,22,1,"PAH",1,1,51,0)
PSS INTERFACE SCHEDULER          Run       Send to Site
"PKG",517,22,1,"PAH",1,1,52,0)
PSS LOCAL DOSAGES EDIT           Run       Delete at Site
"PKG",517,22,1,"PAH",1,1,53,0)
PSS LOCAL DOSAGES EDIT ALL       Run       Delete at Site
"PKG",517,22,1,"PAH",1,1,54,0)
PSS MAP ONE MED ROUTE            Run       Delete at Site
"PKG",517,22,1,"PAH",1,1,55,0)
PSS MARK PREMIX SOLUTIONS        Run       Send to Site
"PKG",517,22,1,"PAH",1,1,56,0)
PSS MED ROUTES INITIAL MAPPING   Run       Delete at Site
"PKG",517,22,1,"PAH",1,1,57,0)
PSS ORDER CHECK CHANGES          Run       Send to Site
"PKG",517,22,1,"PAH",1,1,58,0)
PSS ORDER CHECK MANAGEMENT       Menu      Send to site
"PKG",517,22,1,"PAH",1,1,59,0)
PSS SCHEDULE PEPS INTERFACE CK   Run       Send to Site
"PKG",517,22,1,"PAH",1,1,60,0)
PSS STRENGTH MISMATCH            Run       Delete at Site
"PRE")
PSS117EN
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
16
"RTN","PSS117EN")
0^3^B180968609^n/a
"RTN","PSS117EN",1,0)
PSS117EN ;BIR/RTR-Environment check routine for patch PSS*1*117 ;11/20/08
"RTN","PSS117EN",2,0)
 ;;1.0;PHARMACY DATA MANAGEMENT;**117**;9/30/97;Build 101
"RTN","PSS117EN",3,0)
 ;
"RTN","PSS117EN",4,0)
 Q:'$G(XPDENV)
"RTN","PSS117EN",5,0)
 ;
"RTN","PSS117EN",6,0)
 ;USE PSSMRM,PSSMLM,PSSMGP
"RTN","PSS117EN",7,0)
EN ;Check to see if all Local Med Routes are mapped
"RTN","PSS117EN",8,0)
 N PSSMRMFM,PSSMRMLP,PSSMRMNM,PSSMRMFD,PSSMRMAR,DIR,X,Y,DTOUT,DUOUT,DIRUT,DIROUT,DIC,DA,DLAYGO
"RTN","PSS117EN",9,0)
 N PSSMRMCT,PSSMRMXX,PSSMRMIN,PSSMRMZR,PSSMRMN1,PSSMRMN3,PSSMRMOK,PSSMRM22,PSSMRMBB,PSSMRMT1,PSSMRMD1,PSSMRMD2,PSSMRMTC
"RTN","PSS117EN",10,0)
 N PSSMGPNM,PSSMGPTP,PSSMGPOR,PSSMGPSL,PSSMGPMY,PSSMGPDS,PSSMGPQT,PSSMGPAR,PSSMGPRS,PSSMRMPF,PSSMRMER
"RTN","PSS117EN",11,0)
 ;
"RTN","PSS117EN",12,0)
 ;
"RTN","PSS117EN",13,0)
 ;This Mail Group should have been added with PSS*1*136, so this code should be bypasses by the FIND1 check
"RTN","PSS117EN",14,0)
 ;
"RTN","PSS117EN",15,0)
 I $$FIND1^DIC(3.8,"","X","PSS ORDER CHECKS","B") D KTM G AIT
"RTN","PSS117EN",16,0)
 D KTM K PSSMGPAR
"RTN","PSS117EN",17,0)
 S PSSMGPAR(1)="A 'PSS ORDER CHECKS' Mail Group is now being created. Mail Group members will"
"RTN","PSS117EN",18,0)
 S PSSMGPAR(2)="receive various notifications that impact Enhanced Order Checks (drug-drug"
"RTN","PSS117EN",19,0)
 S PSSMGPAR(3)="interactions, duplicate therapy and dosing) introduced with PRE V. 0.5. Please"
"RTN","PSS117EN",20,0)
 S PSSMGPAR(4)="enter the Pharmacy ADPAC or a designee to be the Mail Group Organizer."
"RTN","PSS117EN",21,0)
 S PSSMGPAR(5)=" "
"RTN","PSS117EN",22,0)
 S PSSMGPAR(6)="To continue this install, you must now enter a Mail Group organizer."
"RTN","PSS117EN",23,0)
 S PSSMGPAR(7)=" "
"RTN","PSS117EN",24,0)
 D MES^XPDUTL(.PSSMGPAR)
"RTN","PSS117EN",25,0)
 K DIC S DIC=200,DIC(0)="QEAMZ",DIC("A")="Enter Mail Group Organizer: "
"RTN","PSS117EN",26,0)
 D ^DIC K DIC I $D(DTOUT)!($D(DUOUT))!(+Y'>0) S XPDABORT=2 Q
"RTN","PSS117EN",27,0)
 S PSSMGPOR=+Y,PSSMGPMY(+Y)=""
"RTN","PSS117EN",28,0)
 S PSSMGPNM="PSS ORDER CHECKS",PSSMGPTP=0,PSSMGPSL=0,PSSMGPQT=1
"RTN","PSS117EN",29,0)
 S PSSMGPDS(1)="Members of this mail group will receive various notifications that impact"
"RTN","PSS117EN",30,0)
 S PSSMGPDS(2)="Enhanced Order Checks (drug-drug interactions, duplicate therapy and dosing"
"RTN","PSS117EN",31,0)
 S PSSMGPDS(3)="checks) introduced with PRE V. 0.5 utilizing a COTS database."
"RTN","PSS117EN",32,0)
 S PSSMGPRS=$$MG^XMBGRP(PSSMGPNM,PSSMGPTP,PSSMGPOR,PSSMGPSL,.PSSMGPMY,.PSSMGPDS,PSSMGPQT)
"RTN","PSS117EN",33,0)
 I 'PSSMGPRS D BMES^XPDUTL(" ") D BMES^XPDUTL("Unable to create PSS ORDER CHECKS Mail Group, aborting install.") S XPDABORT=2 Q
"RTN","PSS117EN",34,0)
 D BMES^XPDUTL("PSS ORDER CHECKS Mail Group successfully created.")
"RTN","PSS117EN",35,0)
 ;
"RTN","PSS117EN",36,0)
 ;D TASKIT^PSSHRIT(15) ;Waiting for error code from Steve to abort if unable to task job
"RTN","PSS117EN",37,0)
 ;
"RTN","PSS117EN",38,0)
AIT ;Add Interventions types
"RTN","PSS117EN",39,0)
 ;
"RTN","PSS117EN",40,0)
 ;
"RTN","PSS117EN",41,0)
 ;
"RTN","PSS117EN",42,0)
 ;
"RTN","PSS117EN",43,0)
 D BMES^XPDUTL("Adding new Intervention Types.")
"RTN","PSS117EN",44,0)
 I '$$FIND1^DIC(9009032.3,"","X","MAX SINGLE DOSE","B") D ADDMX I '$$FIND1^DIC(9009032.3,"","X","MAX SINGLE DOSE","B") D AITX(1) S XPDABORT=2 D KTM Q
"RTN","PSS117EN",45,0)
 I '$$FIND1^DIC(9009032.3,"","X","DAILY DOSE RANGE","B") D ADDMXA I '$$FIND1^DIC(9009032.3,"","X","DAILY DOSE RANGE","B") D AITX(2) S XPDABORT=2 D KTM Q
"RTN","PSS117EN",46,0)
 I '$$FIND1^DIC(9009032.3,"","X","MAX SINGLE DOSE & DAILY DOSE RANGE","B") D ADDMXB I '$$FIND1^DIC(9009032.3,"","X","MAX SINGLE DOSE & DAILY DOSE RANGE","B") D AITX(3) S XPDABORT=2 D KTM Q
"RTN","PSS117EN",47,0)
 D KTM D BMES^XPDUTL("New Intervention Types successfully added.")
"RTN","PSS117EN",48,0)
 ;-DOSING - Next line skips Med Route and Numeric Dose/Dose Unit checks, add to Dosing patch
"RTN","PSS117EN",49,0)
 ;G PROT
"RTN","PSS117EN",50,0)
 S (PSSMRMFM,PSSMRMFD)=0
"RTN","PSS117EN",51,0)
 ;Med Route check, using PSSMRMFM as flag
"RTN","PSS117EN",52,0)
 D BMES^XPDUTL("Checking for any remaining unmapped Local Medication Routes...")
"RTN","PSS117EN",53,0)
 S PSSMRMNM="" F  S PSSMRMNM=$O(^PS(51.2,"B",PSSMRMNM)) Q:PSSMRMNM=""!(PSSMRMFM)  D
"RTN","PSS117EN",54,0)
 .F PSSMRMLP=0:0 S PSSMRMLP=$O(^PS(51.2,"B",PSSMRMNM,PSSMRMLP))  Q:'PSSMRMLP!(PSSMRMFM)  D
"RTN","PSS117EN",55,0)
 ..I '$P($G(^PS(51.2,PSSMRMLP,0)),"^",4) Q
"RTN","PSS117EN",56,0)
 ..I '$P($G(^PS(51.2,PSSMRMLP,1)),"^") S PSSMRMFM=1
"RTN","PSS117EN",57,0)
 I 'PSSMRMFM D BMES^XPDUTL("All Local Medication Routes have been mapped!!") G DOS
"RTN","PSS117EN",58,0)
 K PSSMRMAR
"RTN","PSS117EN",59,0)
 S PSSMRMAR(1)=" "
"RTN","PSS117EN",60,0)
 S PSSMRMAR(2)="There are still local Medication Routes marked for 'ALL PACKAGES' not yet"
"RTN","PSS117EN",61,0)
 S PSSMRMAR(3)="mapped. Any orders containing an unmapped medication route will not have"
"RTN","PSS117EN",62,0)
 S PSSMRMAR(4)="dosage checks performed. Please refer to the 'Medication Route Mapping Report'"
"RTN","PSS117EN",63,0)
 S PSSMRMAR(5)="option for more details."
"RTN","PSS117EN",64,0)
 S PSSMRMAR(6)=" "
"RTN","PSS117EN",65,0)
 D MES^XPDUTL(.PSSMRMAR) K PSSMRMAR
"RTN","PSS117EN",66,0)
 ;K DIR,X,Y,DTOUT,DUOUT,DIRUT,DIROUT
"RTN","PSS117EN",67,0)
 ;S DIR(0)="Y",DIR("B")="Y",DIR("A")="Do you want to continue to install this patch" D ^DIR
"RTN","PSS117EN",68,0)
 ;I Y'=1!($D(DUOUT))!($D(DTOUT)) S XPDABORT=2 Q
"RTN","PSS117EN",69,0)
 ;K DIR,X,Y,DTOUT,DUOUT,DIRUT,DIROUT
"RTN","PSS117EN",70,0)
 ;
"RTN","PSS117EN",71,0)
 ;
"RTN","PSS117EN",72,0)
DOS ;Check to see if all Local Possible Dosages are mapped
"RTN","PSS117EN",73,0)
 ;Local Possible Dosage check, using PSSMRMFD as flag
"RTN","PSS117EN",74,0)
 D BMES^XPDUTL("Checking for any remaining Local Possible Dosages missing data...")
"RTN","PSS117EN",75,0)
 ;
"RTN","PSS117EN",76,0)
 S (PSSMRMFD,PSSMRMCT)=0
"RTN","PSS117EN",77,0)
 S PSSMRMXX="" F  S PSSMRMXX=$O(^PSDRUG("B",PSSMRMXX)) Q:PSSMRMXX=""!(PSSMRMFD)  F PSSMRMIN=0:0 S PSSMRMIN=$O(^PSDRUG("B",PSSMRMXX,PSSMRMIN)) Q:'PSSMRMIN!(PSSMRMFD)  D
"RTN","PSS117EN",78,0)
 .K PSSMRMZR,PSSMRMN1,PSSMRMN3
"RTN","PSS117EN",79,0)
 .S PSSMRMZR=$G(^PSDRUG(PSSMRMIN,0)),PSSMRMN1=$P($G(^PSDRUG(PSSMRMIN,"ND")),"^"),PSSMRMN3=$P($G(^PSDRUG(PSSMRMIN,"ND")),"^",3)
"RTN","PSS117EN",80,0)
 .S PSSMRMCT=PSSMRMCT+1 I '(PSSMRMCT#2000) D BMES^XPDUTL("...Still checking Local Possible Dosages...")
"RTN","PSS117EN",81,0)
 .S PSSMRMOK=$$TEST
"RTN","PSS117EN",82,0)
 .Q:'PSSMRMOK
"RTN","PSS117EN",83,0)
 .S PSSMRM22=0 F PSSMRMBB=0:0 S PSSMRMBB=$O(^PSDRUG(PSSMRMIN,"DOS2",PSSMRMBB)) Q:'PSSMRMBB!(PSSMRM22)  S PSSMRMT1=$G(^PSDRUG(PSSMRMIN,"DOS2",PSSMRMBB,0)) I $P(PSSMRMT1,"^")'="" I '$P(PSSMRMT1,"^",5)!($P(PSSMRMT1,"^",6)="") S PSSMRM22=1
"RTN","PSS117EN",84,0)
 .Q:'PSSMRM22
"RTN","PSS117EN",85,0)
 .S PSSMRMFD=1
"RTN","PSS117EN",86,0)
 I 'PSSMRMFD D BMES^XPDUTL("Population of data for eligible Local Possible Dosages has been completed!!") D BMES^XPDUTL(" ") G PRC
"RTN","PSS117EN",87,0)
 K PSSMRMAR
"RTN","PSS117EN",88,0)
 S PSSMRMAR(1)=" "
"RTN","PSS117EN",89,0)
 S PSSMRMAR(2)="There are still local possible dosages eligible for dosage checks that have"
"RTN","PSS117EN",90,0)
 S PSSMRMAR(3)="missing data in the Numeric Dose and Dose Unit fields. Any orders containing"
"RTN","PSS117EN",91,0)
 S PSSMRMAR(4)="such local possible dosages will not have dosage checks performed. Please"
"RTN","PSS117EN",92,0)
 S PSSMRMAR(5)="refer to the 'Local Possible Dosages Report' option for more details."
"RTN","PSS117EN",93,0)
 S PSSMRMAR(6)=" "
"RTN","PSS117EN",94,0)
 D MES^XPDUTL(.PSSMRMAR) K PSSMRMAR
"RTN","PSS117EN",95,0)
 ;
"RTN","PSS117EN",96,0)
 ;
"RTN","PSS117EN",97,0)
PRC ;Ask to continue
"RTN","PSS117EN",98,0)
 I 'PSSMRMFM,'PSSMRMFD G PROT
"RTN","PSS117EN",99,0)
 ;D BMES^XPDUTL(" ")
"RTN","PSS117EN",100,0)
 K DIR,X,Y,DTOUT,DUOUT,DIRUT,DIROUT
"RTN","PSS117EN",101,0)
 S DIR(0)="Y",DIR("B")="Y",DIR("A")="Do you want to continue to install this patch" D ^DIR
"RTN","PSS117EN",102,0)
 I Y'=1!($D(DUOUT))!($D(DTOUT)) S XPDABORT=2 Q
"RTN","PSS117EN",103,0)
 K DIR,X,Y,DTOUT,DUOUT,DIRUT,DIROUT
"RTN","PSS117EN",104,0)
 ;
"RTN","PSS117EN",105,0)
 ;
"RTN","PSS117EN",106,0)
PROT ;
"RTN","PSS117EN",107,0)
 ;D ADDPR
"RTN","PSS117EN",108,0)
 ;
"RTN","PSS117EN",109,0)
 ;
"RTN","PSS117EN",110,0)
MAIL ;prompt for mail group members
"RTN","PSS117EN",111,0)
 ;PROMPT FOR USER
"RTN","PSS117EN",112,0)
 D REC
"RTN","PSS117EN",113,0)
 ;Set up mail message for Post Init
"RTN","PSS117EN",114,0)
 S @XPDGREF@("PSSMLMSG",1)="Installation of Patch PSS*1.0*117 has been successfully completed!"
"RTN","PSS117EN",115,0)
 S @XPDGREF@("PSSMLMSG",2)=" "
"RTN","PSS117EN",116,0)
 S PSSMRMTC=3
"RTN","PSS117EN",117,0)
 ;DOSING - Added next line, for Dosing patch remove PRMAIL calls at +2 and 2 calls in LMESS tag
"RTN","PSS117EN",118,0)
 D MNU
"RTN","PSS117EN",119,0)
 I 'PSSMRMFM S @XPDGREF@("PSSMLMSG",PSSMRMTC)="All Local Medication Routes have been mapped!!" G LMESS
"RTN","PSS117EN",120,0)
 S @XPDGREF@("PSSMLMSG",PSSMRMTC)="There are still local Medication Routes marked for 'ALL PACKAGES' not yet" S PSSMRMTC=PSSMRMTC+1
"RTN","PSS117EN",121,0)
 S @XPDGREF@("PSSMLMSG",PSSMRMTC)="mapped. Any orders containing an unmapped medication route will not have" S PSSMRMTC=PSSMRMTC+1
"RTN","PSS117EN",122,0)
 S @XPDGREF@("PSSMLMSG",PSSMRMTC)="dosage checks performed. Please refer to the 'Medication Route Mapping Report'" S PSSMRMTC=PSSMRMTC+1
"RTN","PSS117EN",123,0)
 S @XPDGREF@("PSSMLMSG",PSSMRMTC)="option for more details."
"RTN","PSS117EN",124,0)
 ;
"RTN","PSS117EN",125,0)
 ;
"RTN","PSS117EN",126,0)
LMESS ;
"RTN","PSS117EN",127,0)
 ;S PSSMRMTC=PSSMRMTC+1
"RTN","PSS117EN",128,0)
 ;S @XPDGREF@("PSSMLMSG",PSSMRMTC)=" "
"RTN","PSS117EN",129,0)
 ;S PSSMRMTC=PSSMRMTC+1
"RTN","PSS117EN",130,0)
 D INC I 'PSSMRMFD S @XPDGREF@("PSSMLMSG",PSSMRMTC)="Population of data for eligible Local Possible Dosages has been completed!!" D INC Q
"RTN","PSS117EN",131,0)
 S @XPDGREF@("PSSMLMSG",PSSMRMTC)="There are still local possible dosages eligible for dosage checks that have" S PSSMRMTC=PSSMRMTC+1
"RTN","PSS117EN",132,0)
 S @XPDGREF@("PSSMLMSG",PSSMRMTC)="missing data in the Numeric Dose and Dose Unit fields. Any orders containing" S PSSMRMTC=PSSMRMTC+1
"RTN","PSS117EN",133,0)
 S @XPDGREF@("PSSMLMSG",PSSMRMTC)="such local possible dosages may not have dosage checks performed. Please" S PSSMRMTC=PSSMRMTC+1
"RTN","PSS117EN",134,0)
 S @XPDGREF@("PSSMLMSG",PSSMRMTC)="refer to the 'Local Possible Dosages Report' option for more details." D INC
"RTN","PSS117EN",135,0)
 Q
"RTN","PSS117EN",136,0)
 ;
"RTN","PSS117EN",137,0)
 ;
"RTN","PSS117EN",138,0)
TEST() ;See if drug need Dose Unit and Numeric Dose defined
"RTN","PSS117EN",139,0)
 I 'PSSMRMN3!('PSSMRMN1) Q 0
"RTN","PSS117EN",140,0)
 I $P($G(^PSDRUG(PSSMRMIN,"I")),"^"),$P($G(^PSDRUG(PSSMRMIN,"I")),"^")<DT Q 0
"RTN","PSS117EN",141,0)
 I '$O(^PSDRUG(PSSMRMIN,"DOS2",0)) Q 0
"RTN","PSS117EN",142,0)
 I $P(PSSMRMZR,"^",3)["S"!($E($P(PSSMRMZR,"^",2),1,2)="XA") Q 0
"RTN","PSS117EN",143,0)
 N PSSMRMVV
"RTN","PSS117EN",144,0)
 S PSSMRMVV=""
"RTN","PSS117EN",145,0)
 I PSSMRMN1,PSSMRMN3,$T(OVRIDE^PSNAPIS)]"" S PSSMRMVV=$$OVRIDE^PSNAPIS(PSSMRMN1,PSSMRMN3)
"RTN","PSS117EN",146,0)
 K PSSMRMD1,PSSMRMD2
"RTN","PSS117EN",147,0)
 I PSSMRMN1,PSSMRMN3 S PSSMRMD1=$$DFSU^PSNAPIS(PSSMRMN1,PSSMRMN3) S PSSMRMD2=$P(PSSMRMD1,"^")
"RTN","PSS117EN",148,0)
 I $G(PSSMRMD2)'>0,$P($G(^PSDRUG(PSSMRMIN,2)),"^") S PSSMRMD2=$P($G(^PS(50.7,+$P($G(^PSDRUG(PSSMRMIN,2)),"^"),0)),"^",2)
"RTN","PSS117EN",149,0)
 I PSSMRMVV=""!('$G(PSSMRMD2))!($P($G(^PS(50.606,+$G(PSSMRMD2),1)),"^")="") Q 1
"RTN","PSS117EN",150,0)
 I $P($G(^PS(50.606,+$G(PSSMRMD2),1)),"^"),'PSSMRMVV Q 0
"RTN","PSS117EN",151,0)
 I '$P($G(^PS(50.606,+$G(PSSMRMD2),1)),"^"),PSSMRMVV Q 0
"RTN","PSS117EN",152,0)
 Q 1
"RTN","PSS117EN",153,0)
 ;
"RTN","PSS117EN",154,0)
 ;
"RTN","PSS117EN",155,0)
REC ;Set up mail message recipients
"RTN","PSS117EN",156,0)
 S @XPDGREF@("PSSMLMDZ",DUZ)=""
"RTN","PSS117EN",157,0)
 S @XPDGREF@("PSSMLMDZ","G.PSS ORDER CHECKS")=""
"RTN","PSS117EN",158,0)
 Q
"RTN","PSS117EN",159,0)
 ;
"RTN","PSS117EN",160,0)
 ;
"RTN","PSS117EN",161,0)
AITX(PSSMRMIT) ;
"RTN","PSS117EN",162,0)
 D BMES^XPDUTL(" ")
"RTN","PSS117EN",163,0)
 I PSSMRMIT=1 D BMES^XPDUTL("Cannot create 'MAX SINGLE DOSE' intervention type, aborting install.") Q
"RTN","PSS117EN",164,0)
 I PSSMRMIT=2 D BMES^XPDUTL("Cannot create 'DAILY DOSE RANGE' intervention type, aborting install.") Q
"RTN","PSS117EN",165,0)
 D BMES^XPDUTL("Cannot create 'MAX SINGLE DOSE & DAILY DOSE RANGE' intervention type,") D BMES^XPDUTL("aborting install.")
"RTN","PSS117EN",166,0)
 Q
"RTN","PSS117EN",167,0)
 ;
"RTN","PSS117EN",168,0)
 ;
"RTN","PSS117EN",169,0)
ADDPR ;Attach protocol
"RTN","PSS117EN",170,0)
 ;Check the +1 and +2 Usage in the FileMan documentation
"RTN","PSS117EN",171,0)
 S PSSMRMPF=0
"RTN","PSS117EN",172,0)
 D BMES^XPDUTL("Attaching PSS MED ROUTE RECEIVE protocol to XUMF MFS EVENTS protocol...")
"RTN","PSS117EN",173,0)
 N PSSMRMPR,PSSMRMDJ,PSSMRMRR,PSSMRMAT
"RTN","PSS117EN",174,0)
 S PSSMRMPR=$$FIND1^DIC(101,"","X","XUMF MFS EVENTS","B") I 'PSSMRMPR D PASE S PSSMRMPF=1 D KTM Q
"RTN","PSS117EN",175,0)
 S PSSMRMDJ=$$FIND1^DIC(101,"","X","PSS MED ROUTE RECEIVE","B") I 'PSSMRMDJ D PASEX S PSSMRMPF=2 D KTM Q
"RTN","PSS117EN",176,0)
 I $$FIND1^DIC(101.01,","_PSSMRMPR_",","X","PSS MED ROUTE RECEIVE","B") G ADDPRX
"RTN","PSS117EN",177,0)
 K PSSMRMER S PSSMRMAT(1,101.01,"+2,"_PSSMRMPR_",",.01)=PSSMRMDJ D UPDATE^DIE("","PSSMRMAT(1)",,"PSSMRMER(1)")
"RTN","PSS117EN",178,0)
 I '$$FIND1^DIC(101.01,","_PSSMRMPR_",","X","PSS MED ROUTE RECEIVE","B") S PSSMRMPF=3 D PACEZ D KTM Q
"RTN","PSS117EN",179,0)
ADDPRX ;
"RTN","PSS117EN",180,0)
 D KTM D BMES^XPDUTL("Protocols attached successfully.")
"RTN","PSS117EN",181,0)
 Q
"RTN","PSS117EN",182,0)
 ;
"RTN","PSS117EN",183,0)
 ;
"RTN","PSS117EN",184,0)
PASE ;
"RTN","PSS117EN",185,0)
 K PSSMRMRR
"RTN","PSS117EN",186,0)
 S PSSMRMRR(1)=" " S PSSMRMRR(2)="Cannot find XUMF MFS EVENTS protocol on system, installation will continue,"
"RTN","PSS117EN",187,0)
 S PSSMRMRR(3)="please see post installation mail message for further instructions."
"RTN","PSS117EN",188,0)
 S PSSMRMRR(4)=" "
"RTN","PSS117EN",189,0)
 D MES^XPDUTL(.PSSMRMRR)
"RTN","PSS117EN",190,0)
 D PRMP
"RTN","PSS117EN",191,0)
 Q
"RTN","PSS117EN",192,0)
 ;
"RTN","PSS117EN",193,0)
 ;
"RTN","PSS117EN",194,0)
PASEX ;
"RTN","PSS117EN",195,0)
 K PSSMRMRR
"RTN","PSS117EN",196,0)
 S PSSMRMRR(1)=" " S PSSMRMRR(2)="Cannot find PSS MED ROUTE RECEIVE protocol on system, installation will"
"RTN","PSS117EN",197,0)
 S PSSMRMRR(3)="continue, please see post installation mail message for further instructions."
"RTN","PSS117EN",198,0)
 S PSSMRMRR(4)=" "
"RTN","PSS117EN",199,0)
 D MES^XPDUTL(.PSSMRMRR)
"RTN","PSS117EN",200,0)
 D PRMP
"RTN","PSS117EN",201,0)
 Q
"RTN","PSS117EN",202,0)
 ;
"RTN","PSS117EN",203,0)
 ;
"RTN","PSS117EN",204,0)
PACEZ ;
"RTN","PSS117EN",205,0)
 K PSSMRMRR
"RTN","PSS117EN",206,0)
 S PSSMRMRR(1)=" " S PSSMRMRR(2)="Unable to attach PSS MED ROUTE RECEIVE protocol to XUMF MFS EVENTS protocol,"
"RTN","PSS117EN",207,0)
 S PSSMRMRR(3)="please see post installation mail message for further instructions."
"RTN","PSS117EN",208,0)
 S PSSMRMRR(4)=" "
"RTN","PSS117EN",209,0)
 D MES^XPDUTL(.PSSMRMRR)
"RTN","PSS117EN",210,0)
 D PRMP
"RTN","PSS117EN",211,0)
 Q
"RTN","PSS117EN",212,0)
 ;
"RTN","PSS117EN",213,0)
 ;
"RTN","PSS117EN",214,0)
PRMP ;
"RTN","PSS117EN",215,0)
 K DIR,X,Y,DTOUT,DUOUT,DIRUT,DIROUT
"RTN","PSS117EN",216,0)
 S DIR(0)="E",DIR("A")="Press Return to Continue" D ^DIR
"RTN","PSS117EN",217,0)
 K DIR,X,Y,DTOUT,DUOUT,DIRUT,DIROUT
"RTN","PSS117EN",218,0)
 Q
"RTN","PSS117EN",219,0)
 ;
"RTN","PSS117EN",220,0)
 ;
"RTN","PSS117EN",221,0)
PRMAIL ;Add protocol message if necessary
"RTN","PSS117EN",222,0)
 I 'PSSMRMPF Q
"RTN","PSS117EN",223,0)
 ;Remove next line for Dosing patch
"RTN","PSS117EN",224,0)
 G PRMAILX
"RTN","PSS117EN",225,0)
 S PSSMRMTC=PSSMRMTC+1
"RTN","PSS117EN",226,0)
 S @XPDGREF@("PSSMLMSG",PSSMRMTC)=" "
"RTN","PSS117EN",227,0)
 S PSSMRMTC=PSSMRMTC+1
"RTN","PSS117EN",228,0)
PRMAILX ;
"RTN","PSS117EN",229,0)
 I PSSMRMPF=1 D  Q
"RTN","PSS117EN",230,0)
 .S @XPDGREF@("PSSMLMSG",PSSMRMTC)="Unable to find the XUMF MFS EVENTS protocol. This protocol was exported in" S PSSMRMTC=PSSMRMTC+1
"RTN","PSS117EN",231,0)
 .S @XPDGREF@("PSSMLMSG",PSSMRMTC)="patch XU*8.0*474. You must have this protocol so the PSS MED ROUTE RECEIVE" S PSSMRMTC=PSSMRMTC+1
"RTN","PSS117EN",232,0)
 .S @XPDGREF@("PSSMLMSG",PSSMRMTC)="protocol can be attached to it, in order to process any Standard Medication" S PSSMRMTC=PSSMRMTC+1
"RTN","PSS117EN",233,0)
 .S @XPDGREF@("PSSMLMSG",PSSMRMTC)="Route updates. Please log a Remedy Ticket and refer to this message."
"RTN","PSS117EN",234,0)
 I PSSMRMPF=2 D  Q
"RTN","PSS117EN",235,0)
 .S @XPDGREF@("PSSMLMSG",PSSMRMTC)="Unable to find the PSS MED ROUTE RECEIVE protocol. This protocol was exported" S PSSMRMTC=PSSMRMTC+1
"RTN","PSS117EN",236,0)
 .S @XPDGREF@("PSSMLMSG",PSSMRMTC)="in patch PSS*1.0*136. You must have this protocol so it can be attached to the" S PSSMRMTC=PSSMRMTC+1
"RTN","PSS117EN",237,0)
 .S @XPDGREF@("PSSMLMSG",PSSMRMTC)="XUMF MFS EVENTS protocol, in order to process any Standard Medication Route" S PSSMRMTC=PSSMRMTC+1
"RTN","PSS117EN",238,0)
 .S @XPDGREF@("PSSMLMSG",PSSMRMTC)="updates. Please log a Remedy Ticket and refer to this message."
"RTN","PSS117EN",239,0)
 I PSSMRMPF=3 D  Q
"RTN","PSS117EN",240,0)
 .S @XPDGREF@("PSSMLMSG",PSSMRMTC)="Unable to attach the PSS MED ROUTE RECEIVE protocol to the XUMF MFS EVENTS" S PSSMRMTC=PSSMRMTC+1
"RTN","PSS117EN",241,0)
 .S @XPDGREF@("PSSMLMSG",PSSMRMTC)="protocol. These protocols must be attached in order to process any Standard" S PSSMRMTC=PSSMRMTC+1
"RTN","PSS117EN",242,0)
 .S @XPDGREF@("PSSMLMSG",PSSMRMTC)="Medication Route updates. Please log a Remedy Ticket and refer to this message."
"RTN","PSS117EN",243,0)
 Q
"RTN","PSS117EN",244,0)
 ;
"RTN","PSS117EN",245,0)
 ;
"RTN","PSS117EN",246,0)
ADDMX ;Add Max Single Dose
"RTN","PSS117EN",247,0)
 N PSSMRMPD K PSSMRMPD
"RTN","PSS117EN",248,0)
 K PSSMRMER S PSSMRMPD(1,9009032.3,"+1,",.01)="MAX SINGLE DOSE" D UPDATE^DIE("","PSSMRMPD(1)",,"PSSMRMER(1)")
"RTN","PSS117EN",249,0)
 Q
"RTN","PSS117EN",250,0)
 ;
"RTN","PSS117EN",251,0)
 ;
"RTN","PSS117EN",252,0)
ADDMXA ;Add Max Daily Dose
"RTN","PSS117EN",253,0)
 N PSSMRMPD K PSSMRMPD
"RTN","PSS117EN",254,0)
 K PSSMRMER S PSSMRMPD(1,9009032.3,"+1,",.01)="DAILY DOSE RANGE" D UPDATE^DIE("","PSSMRMPD(1)",,"PSSMRMER(1)")
"RTN","PSS117EN",255,0)
 Q
"RTN","PSS117EN",256,0)
 ;
"RTN","PSS117EN",257,0)
 ;
"RTN","PSS117EN",258,0)
ADDMXB ;Add Max single and Daily
"RTN","PSS117EN",259,0)
 N PSSMRMPD K PSSMRMPD
"RTN","PSS117EN",260,0)
 K PSSMRMER S PSSMRMPD(1,9009032.3,"+1,",.01)="MAX SINGLE DOSE & DAILY DOSE RANGE" D UPDATE^DIE("","PSSMRMPD(1)",,"PSSMRMER(1)")
"RTN","PSS117EN",261,0)
 Q
"RTN","PSS117EN",262,0)
 ;
"RTN","PSS117EN",263,0)
 ;
"RTN","PSS117EN",264,0)
MNU ;Delete PSS DRG INTER MANAGEMENT option from PSS MGR menu
"RTN","PSS117EN",265,0)
 N PSSMNUXX D BMES^XPDUTL("Removing PSS DRG INTER MANAGEMENT option from PSS MGR Menu option.")
"RTN","PSS117EN",266,0)
 S PSSMNUXX=$$LKOPT^XPDMENU("PSS DRG INTER MANAGEMENT") I $G(PSSMNUXX)'>0 D MNUQ G MNUEN
"RTN","PSS117EN",267,0)
 N PSSMNUR
"RTN","PSS117EN",268,0)
 S PSSMNUR=$$DELETE^XPDMENU("PSS MGR","PSS DRG INTER MANAGEMENT")
"RTN","PSS117EN",269,0)
 I PSSMNUR D MNUQ G MNUEN
"RTN","PSS117EN",270,0)
 D BMES^XPDUTL("Unable to remove PSS DRG INTER MANAGEMENT option from PSS MGR Menu option.")
"RTN","PSS117EN",271,0)
 D PRMP
"RTN","PSS117EN",272,0)
 ;I PSSMRMPF S PSSMRMTC=PSSMRMTC+1 S @XPDGREF@("PSSMLMSG",PSSMRMTC)=" " S PSSMRMTC=PSSMRMTC+1
"RTN","PSS117EN",273,0)
 S @XPDGREF@("PSSMLMSG",PSSMRMTC)="Unable to remove PSS DRG INTER MANAGEMENT option from PSS MGR Menu option." S PSSMRMTC=PSSMRMTC+1
"RTN","PSS117EN",274,0)
 S @XPDGREF@("PSSMLMSG",PSSMRMTC)="Please log a Remedy Ticket and refer to this message." D INC
"RTN","PSS117EN",275,0)
 ;
"RTN","PSS117EN",276,0)
MNUEN ;
"RTN","PSS117EN",277,0)
 D BMES^XPDUTL("Removing PSS ENHANCED ORDER CHECKS option from PSS MGR Menu option.")
"RTN","PSS117EN",278,0)
 S PSSMNUXX=$$LKOPT^XPDMENU("PSS ENHANCED ORDER CHECKS") I $G(PSSMNUXX)'>0 D MNUQQ Q
"RTN","PSS117EN",279,0)
 K PSSMNUR
"RTN","PSS117EN",280,0)
 S PSSMNUR=$$DELETE^XPDMENU("PSS MGR","PSS ENHANCED ORDER CHECKS")
"RTN","PSS117EN",281,0)
 I PSSMNUR D MNUQQ Q
"RTN","PSS117EN",282,0)
 D BMES^XPDUTL("Unable to remove PSS ENHANCED ORDER CHECKS option from PSS MGR Menu option.")
"RTN","PSS117EN",283,0)
 D PRMP
"RTN","PSS117EN",284,0)
 ;I PSSMRMPF S PSSMRMTC=PSSMRMTC+1 S @XPDGREF@("PSSMLMSG",PSSMRMTC)=" " S PSSMRMTC=PSSMRMTC+1
"RTN","PSS117EN",285,0)
 S @XPDGREF@("PSSMLMSG",PSSMRMTC)="Unable to remove PSS ENHANCED ORDER CHECKS option from PSS MGR Menu option." S PSSMRMTC=PSSMRMTC+1
"RTN","PSS117EN",286,0)
 S @XPDGREF@("PSSMLMSG",PSSMRMTC)="Please log a Remedy Ticket and refer to this message." D INC
"RTN","PSS117EN",287,0)
 Q
"RTN","PSS117EN",288,0)
 ;
"RTN","PSS117EN",289,0)
 ;
"RTN","PSS117EN",290,0)
 ;
"RTN","PSS117EN",291,0)
MNUQ ;
"RTN","PSS117EN",292,0)
 D BMES^XPDUTL("Successfully removed PSS DRG INTER MANAGEMENT option.")
"RTN","PSS117EN",293,0)
 Q
"RTN","PSS117EN",294,0)
 ;
"RTN","PSS117EN",295,0)
 ;
"RTN","PSS117EN",296,0)
MNUQQ ;
"RTN","PSS117EN",297,0)
 D BMES^XPDUTL("Successfully removed PSS ENHANCED ORDER CHECKS option.")
"RTN","PSS117EN",298,0)
 Q
"RTN","PSS117EN",299,0)
 ;
"RTN","PSS117EN",300,0)
 ;
"RTN","PSS117EN",301,0)
KTM ;Kill TMP global
"RTN","PSS117EN",302,0)
 K ^TMP("DIERR",$J)
"RTN","PSS117EN",303,0)
 Q
"RTN","PSS117EN",304,0)
 ;
"RTN","PSS117EN",305,0)
 ;
"RTN","PSS117EN",306,0)
INC ;
"RTN","PSS117EN",307,0)
 S PSSMRMTC=PSSMRMTC+1
"RTN","PSS117EN",308,0)
 S @XPDGREF@("PSSMLMSG",PSSMRMTC)=" "
"RTN","PSS117EN",309,0)
 S PSSMRMTC=PSSMRMTC+1
"RTN","PSS117EN",310,0)
 Q
"RTN","PSS117PO")
0^4^B57871045^n/a
"RTN","PSS117PO",1,0)
PSS117PO ;BIR/RTR-Post Install routine for patch PSS*1*117 ;11/22/08
"RTN","PSS117PO",2,0)
 ;;1.0;PHARMACY DATA MANAGEMENT;**117**;9/30/97;Build 101
"RTN","PSS117PO",3,0)
 ;
"RTN","PSS117PO",4,0)
 ;
"RTN","PSS117PO",5,0)
EN ;Do Mail Message
"RTN","PSS117PO",6,0)
 ;
"RTN","PSS117PO",7,0)
 D MNUADD D BMES^XPDUTL("Generating Mail Message....") D MAIL D BMES^XPDUTL("Mail message sent.")
"RTN","PSS117PO",8,0)
 Q
"RTN","PSS117PO",9,0)
 ;
"RTN","PSS117PO",10,0)
 ;
"RTN","PSS117PO",11,0)
MAIL ;Send mail message
"RTN","PSS117PO",12,0)
 N PSS17REC,PSS17PLP,XMTEXT,XMY,XMSUB,XMDUZ,XMMG,XMSTRIP,XMROU,XMYBLOB,XMZ,XMDUN
"RTN","PSS117PO",13,0)
 K ^TMP($J,"PSS17PTX")
"RTN","PSS117PO",14,0)
 F PSS17PLP=0:0 S PSS17PLP=$O(@XPDGREF@("PSSMLMSG",PSS17PLP)) Q:'PSS17PLP  S ^TMP($J,"PSS17PTX",PSS17PLP)=@XPDGREF@("PSSMLMSG",PSS17PLP)
"RTN","PSS117PO",15,0)
 S XMSUB="PSS*1*117 Installation Complete"
"RTN","PSS117PO",16,0)
 S XMDUZ="PSS*1*117 Install"
"RTN","PSS117PO",17,0)
 S XMTEXT="^TMP($J,""PSS17PTX"","
"RTN","PSS117PO",18,0)
 ;F PSSFDS=0:0 S PSSFDS=$O(@XPDGREF@("PSSVJARX",PSSFDS)) Q:'PSSFDS  S XMY(PSSFDS)=""
"RTN","PSS117PO",19,0)
 ;S XMY("G.PSS ORDER CHECKS")=""
"RTN","PSS117PO",20,0)
 S PSS17REC="" F  S PSS17REC=$O(@XPDGREF@("PSSMLMDZ",PSS17REC)) Q:PSS17REC=""  S XMY(PSS17REC)=""
"RTN","PSS117PO",21,0)
 N DIFROM D ^XMD
"RTN","PSS117PO",22,0)
 K ^TMP($J,"PSS17PTX")
"RTN","PSS117PO",23,0)
 Q
"RTN","PSS117PO",24,0)
 ;
"RTN","PSS117PO",25,0)
 ;
"RTN","PSS117PO",26,0)
MNUADD ;Add PSS ORDER CHECK MANAGEMENT Sub-Menu to PSS MGR Menu option
"RTN","PSS117PO",27,0)
 D BMES^XPDUTL("Linking New PSS Menus....")
"RTN","PSS117PO",28,0)
 N PSSMNUA,PSSMNUAF,PSSMNUA1,PSSMNUA2
"RTN","PSS117PO",29,0)
 S PSSMNUA2=0
"RTN","PSS117PO",30,0)
 F PSSMNUA1=0:0 S PSSMNUA1=$O(@XPDGREF@("PSSMLMSG",PSSMNUA1)) Q:'PSSMNUA1  S PSSMNUA2=PSSMNUA2+1
"RTN","PSS117PO",31,0)
 ;I PSSMNUA2>2 S PSSMNUA2=PSSMNUA2+1 S @XPDGREF@("PSSMLMSG",PSSMNUA2)=" "
"RTN","PSS117PO",32,0)
 S PSSMNUA2=PSSMNUA2+1 S PSSMNUAF=1
"RTN","PSS117PO",33,0)
 K PSSMNUA S PSSMNUA=$$ADD^XPDMENU("PSS MGR","PSS ORDER CHECK MANAGEMENT",,4) I 'PSSMNUA D MNUADD1
"RTN","PSS117PO",34,0)
 K PSSMNUA S PSSMNUA=$$ADD^XPDMENU("PSS ORDER CHECK MANAGEMENT","PSS ORDER CHECK CHANGES",,1) I 'PSSMNUA D MNUADD2
"RTN","PSS117PO",35,0)
 K PSSMNUA S PSSMNUA=$$ADD^XPDMENU("PSS ORDER CHECK MANAGEMENT","PSS REPORT LOCAL INTERACTIONS",,2) I 'PSSMNUA D MNUADD3
"RTN","PSS117PO",36,0)
 K PSSMNUA S PSSMNUA=$$ADD^XPDMENU("PSS PEPS SERVICES","PSS SCHEDULE PEPS INTERFACE CK",,3) I 'PSSMNUA D MNUADD4
"RTN","PSS117PO",37,0)
 K PSSMNUA S PSSMNUA=$$ADD^XPDMENU("PSS ADDITIVE/SOLUTION","PSS IV ADDITIVE REPORT",,1) I 'PSSMNUA D MNUADD11
"RTN","PSS117PO",38,0)
 K PSSMNUA S PSSMNUA=$$ADD^XPDMENU("PSS ADDITIVE/SOLUTION","PSS IV SOLUTION REPORT",,2) I 'PSSMNUA D MNUADD12
"RTN","PSS117PO",39,0)
 K PSSMNUA S PSSMNUA=$$ADD^XPDMENU("PSS ADDITIVE/SOLUTION","PSS MARK PREMIX SOLUTIONS",,3) I 'PSSMNUA D MNUADD13
"RTN","PSS117PO",40,0)
 D REB I PSSMNUAF D BMES^XPDUTL("All Menu options linked successfully....")
"RTN","PSS117PO",41,0)
 ;D TASKIT^PSSHRIT(15)
"RTN","PSS117PO",42,0)
 Q
"RTN","PSS117PO",43,0)
 ;
"RTN","PSS117PO",44,0)
 ;
"RTN","PSS117PO",45,0)
MNUADD1 ;
"RTN","PSS117PO",46,0)
 S PSSMNUAF=0
"RTN","PSS117PO",47,0)
 D BMES^XPDUTL("Unable to link PSS ORDER CHECK MANAGEMENT Menu Option....")
"RTN","PSS117PO",48,0)
 S @XPDGREF@("PSSMLMSG",PSSMNUA2)="Unable to link PSS ORDER CHECK MANAGEMENT Menu Option to PSS MGR Menu" S PSSMNUA2=PSSMNUA2+1
"RTN","PSS117PO",49,0)
 S @XPDGREF@("PSSMLMSG",PSSMNUA2)="Please Log a Remedy Ticket and refer to this message." S PSSMNUA2=PSSMNUA2+1
"RTN","PSS117PO",50,0)
 S @XPDGREF@("PSSMLMSG",PSSMNUA2)=" " S PSSMNUA2=PSSMNUA2+1
"RTN","PSS117PO",51,0)
 Q
"RTN","PSS117PO",52,0)
 ;
"RTN","PSS117PO",53,0)
 ;
"RTN","PSS117PO",54,0)
MNUADD2 ;
"RTN","PSS117PO",55,0)
 S PSSMNUAF=0
"RTN","PSS117PO",56,0)
 D BMES^XPDUTL("Unable to link PSS ORDER CHECK CHANGES Option....")
"RTN","PSS117PO",57,0)
 S @XPDGREF@("PSSMLMSG",PSSMNUA2)="Unable to link PSS ORDER CHECK CHANGES to PSS ORDER CHECK MANAGEMENT Menu" S PSSMNUA2=PSSMNUA2+1
"RTN","PSS117PO",58,0)
 S @XPDGREF@("PSSMLMSG",PSSMNUA2)="Please Log a Remedy Ticket and refer to this message." S PSSMNUA2=PSSMNUA2+1
"RTN","PSS117PO",59,0)
 S @XPDGREF@("PSSMLMSG",PSSMNUA2)=" " S PSSMNUA2=PSSMNUA2+1
"RTN","PSS117PO",60,0)
 Q
"RTN","PSS117PO",61,0)
 ;
"RTN","PSS117PO",62,0)
 ;
"RTN","PSS117PO",63,0)
MNUADD3 ;
"RTN","PSS117PO",64,0)
 S PSSMNUAF=0
"RTN","PSS117PO",65,0)
 D BMES^XPDUTL("Unable to link PSS REPORT LOCAL INTERACTIONS Option....")
"RTN","PSS117PO",66,0)
 S @XPDGREF@("PSSMLMSG",PSSMNUA2)="Unable to link PSS REPORT LOCAL INTERACTIONS to PSS ORDER CHECK MANAGEMENT Menu" S PSSMNUA2=PSSMNUA2+1
"RTN","PSS117PO",67,0)
 S @XPDGREF@("PSSMLMSG",PSSMNUA2)="Please Log a Remedy Ticket and refer to this message." S PSSMNUA2=PSSMNUA2+1
"RTN","PSS117PO",68,0)
 S @XPDGREF@("PSSMLMSG",PSSMNUA2)=" " S PSSMNUA2=PSSMNUA2+1
"RTN","PSS117PO",69,0)
 Q
"RTN","PSS117PO",70,0)
MNUADD4 ;
"RTN","PSS117PO",71,0)
 S PSSMNUAF=0
"RTN","PSS117PO",72,0)
 D BMES^XPDUTL("Unable to link PSS SCHEDULE PEPS INTERFACE CK Option....")
"RTN","PSS117PO",73,0)
 S @XPDGREF@("PSSMLMSG",PSSMNUA2)="Unable to link PSS SCHEDULE PEPS INTERFACE CK to PSS PEPS SERVICES Menu" S PSSMNUA2=PSSMNUA2+1
"RTN","PSS117PO",74,0)
 S @XPDGREF@("PSSMLMSG",PSSMNUA2)="Please Log a Remedy Ticket and refer to this message." S PSSMNUA2=PSSMNUA2+1
"RTN","PSS117PO",75,0)
 S @XPDGREF@("PSSMLMSG",PSSMNUA2)=" " S PSSMNUA2=PSSMNUA2+1
"RTN","PSS117PO",76,0)
 Q
"RTN","PSS117PO",77,0)
 ;
"RTN","PSS117PO",78,0)
 ;
"RTN","PSS117PO",79,0)
REB ;Rebuild Menus
"RTN","PSS117PO",80,0)
 N PSSMNUR
"RTN","PSS117PO",81,0)
 ;S PSSMNUR=$$DELETE^XPDMENU("PSS MGR","PSS ADDITIVE/SOLUTION REPORTS")
"RTN","PSS117PO",82,0)
 S PSSMNUR=$$DELETE^XPDMENU("PSS MGR","PSS WARNING BUILDER")
"RTN","PSS117PO",83,0)
 S PSSMNUR=$$DELETE^XPDMENU("PSS MGR","PSS WARNING MAPPING")
"RTN","PSS117PO",84,0)
 S PSSMNUR=$$DELETE^XPDMENU("PSS MGR","PSS PEPS SERVICES")
"RTN","PSS117PO",85,0)
 K PSSMNUA S PSSMNUA=$$ADD^XPDMENU("PSS MGR","PSS ADDITIVE/SOLUTION",,17) I 'PSSMNUA D MNUADD5
"RTN","PSS117PO",86,0)
 K PSSMNUA S PSSMNUA=$$ADD^XPDMENU("PSS MGR","PSS WARNING BUILDER",,18) I 'PSSMNUA D MNUADD6
"RTN","PSS117PO",87,0)
 K PSSMNUA S PSSMNUA=$$ADD^XPDMENU("PSS MGR","PSS WARNING MAPPING",,19) I 'PSSMNUA D MNUADD7
"RTN","PSS117PO",88,0)
 K PSSMNUA S PSSMNUA=$$ADD^XPDMENU("PSS MGR","PSS PEPS SERVICES",,20) I 'PSSMNUA D MNUADD8
"RTN","PSS117PO",89,0)
 Q
"RTN","PSS117PO",90,0)
 ;
"RTN","PSS117PO",91,0)
 ;
"RTN","PSS117PO",92,0)
MNUADD5 ;
"RTN","PSS117PO",93,0)
 S PSSMNUAF=0
"RTN","PSS117PO",94,0)
 D BMES^XPDUTL("Unable to link PSS ADDITIVE/SOLUTION Option....")
"RTN","PSS117PO",95,0)
 S @XPDGREF@("PSSMLMSG",PSSMNUA2)="Unable to link PSS ADDITIVE/SOLUTION to PSS MGR Menu" S PSSMNUA2=PSSMNUA2+1
"RTN","PSS117PO",96,0)
 S @XPDGREF@("PSSMLMSG",PSSMNUA2)="Please Log a Remedy Ticket and refer to this message." S PSSMNUA2=PSSMNUA2+1
"RTN","PSS117PO",97,0)
 S @XPDGREF@("PSSMLMSG",PSSMNUA2)=" " S PSSMNUA2=PSSMNUA2+1
"RTN","PSS117PO",98,0)
 Q
"RTN","PSS117PO",99,0)
 ;
"RTN","PSS117PO",100,0)
 ;
"RTN","PSS117PO",101,0)
MNUADD6 ;
"RTN","PSS117PO",102,0)
 S PSSMNUAF=0
"RTN","PSS117PO",103,0)
 D BMES^XPDUTL("Unable to re-link PSS WARNING BUILDER Option....")
"RTN","PSS117PO",104,0)
 S @XPDGREF@("PSSMLMSG",PSSMNUA2)="Unable to RE-link PSS WARNING BUILDER to PSS MGR Menu" S PSSMNUA2=PSSMNUA2+1
"RTN","PSS117PO",105,0)
 S @XPDGREF@("PSSMLMSG",PSSMNUA2)="Please Log a Remedy Ticket and refer to this message." S PSSMNUA2=PSSMNUA2+1
"RTN","PSS117PO",106,0)
 S @XPDGREF@("PSSMLMSG",PSSMNUA2)=" " S PSSMNUA2=PSSMNUA2+1
"RTN","PSS117PO",107,0)
 Q
"RTN","PSS117PO",108,0)
 ;
"RTN","PSS117PO",109,0)
 ;
"RTN","PSS117PO",110,0)
MNUADD7 ;
"RTN","PSS117PO",111,0)
 S PSSMNUAF=0
"RTN","PSS117PO",112,0)
 D BMES^XPDUTL("Unable to re-link PSS WARNING MAPPING CK Option....")
"RTN","PSS117PO",113,0)
 S @XPDGREF@("PSSMLMSG",PSSMNUA2)="Unable to re-link PSS WARNING MAPPING to PSS MGR Menu" S PSSMNUA2=PSSMNUA2+1
"RTN","PSS117PO",114,0)
 S @XPDGREF@("PSSMLMSG",PSSMNUA2)="Please Log a Remedy Ticket and refer to this message." S PSSMNUA2=PSSMNUA2+1
"RTN","PSS117PO",115,0)
 S @XPDGREF@("PSSMLMSG",PSSMNUA2)=" " S PSSMNUA2=PSSMNUA2+1
"RTN","PSS117PO",116,0)
 Q
"RTN","PSS117PO",117,0)
 ;
"RTN","PSS117PO",118,0)
 ;
"RTN","PSS117PO",119,0)
MNUADD8 ;
"RTN","PSS117PO",120,0)
 S PSSMNUAF=0
"RTN","PSS117PO",121,0)
 D BMES^XPDUTL("Unable to re-link PSS PEPS SERVICES Option....")
"RTN","PSS117PO",122,0)
 S @XPDGREF@("PSSMLMSG",PSSMNUA2)="Unable to re-link PSS PEPS SERVICES to PSS MGR Menu" S PSSMNUA2=PSSMNUA2+1
"RTN","PSS117PO",123,0)
 S @XPDGREF@("PSSMLMSG",PSSMNUA2)="Please Log a Remedy Ticket and refer to this message." S PSSMNUA2=PSSMNUA2+1
"RTN","PSS117PO",124,0)
 Q
"RTN","PSS117PO",125,0)
 ;
"RTN","PSS117PO",126,0)
 ;
"RTN","PSS117PO",127,0)
MNUADD11 ;
"RTN","PSS117PO",128,0)
 S PSSMNUAF=0
"RTN","PSS117PO",129,0)
 D BMES^XPDUTL("Unable to link PSS IV ADDITIVE REPORT Option....")
"RTN","PSS117PO",130,0)
 S @XPDGREF@("PSSMLMSG",PSSMNUA2)="Unable to link PSS IV ADDITIVE REPORT to PSS ADDITIVE/SOLUTION Menu" S PSSMNUA2=PSSMNUA2+1
"RTN","PSS117PO",131,0)
 S @XPDGREF@("PSSMLMSG",PSSMNUA2)="Please Log a Remedy Ticket and refer to this message." S PSSMNUA2=PSSMNUA2+1
"RTN","PSS117PO",132,0)
 S @XPDGREF@("PSSMLMSG",PSSMNUA2)=" " S PSSMNUA2=PSSMNUA2+1
"RTN","PSS117PO",133,0)
 Q
"RTN","PSS117PO",134,0)
 ;
"RTN","PSS117PO",135,0)
 ;
"RTN","PSS117PO",136,0)
MNUADD12 ;
"RTN","PSS117PO",137,0)
 S PSSMNUAF=0
"RTN","PSS117PO",138,0)
 D BMES^XPDUTL("Unable to link PSS IV SOLUTION REPORT Option....")
"RTN","PSS117PO",139,0)
 S @XPDGREF@("PSSMLMSG",PSSMNUA2)="Unable to link PSS IV SOLUTION REPORT to PSS ADDITIVE/SOLUTION Menu" S PSSMNUA2=PSSMNUA2+1
"RTN","PSS117PO",140,0)
 S @XPDGREF@("PSSMLMSG",PSSMNUA2)="Please Log a Remedy Ticket and refer to this message." S PSSMNUA2=PSSMNUA2+1
"RTN","PSS117PO",141,0)
 S @XPDGREF@("PSSMLMSG",PSSMNUA2)=" " S PSSMNUA2=PSSMNUA2+1
"RTN","PSS117PO",142,0)
 Q
"RTN","PSS117PO",143,0)
 ;
"RTN","PSS117PO",144,0)
 ;
"RTN","PSS117PO",145,0)
MNUADD13 ;
"RTN","PSS117PO",146,0)
 S PSSMNUAF=0
"RTN","PSS117PO",147,0)
 D BMES^XPDUTL("Unable to link PSS MARK PREMIX SOLUTIONS Option....")
"RTN","PSS117PO",148,0)
 S @XPDGREF@("PSSMLMSG",PSSMNUA2)="Unable to link PSS MARK PREMIX SOLUTIONS to PSS ADDITIVE/SOLUTION Menu" S PSSMNUA2=PSSMNUA2+1
"RTN","PSS117PO",149,0)
 S @XPDGREF@("PSSMLMSG",PSSMNUA2)="Please Log a Remedy Ticket and refer to this message." S PSSMNUA2=PSSMNUA2+1
"RTN","PSS117PO",150,0)
 S @XPDGREF@("PSSMLMSG",PSSMNUA2)=" " S PSSMNUA2=PSSMNUA2+1
"RTN","PSS117PO",151,0)
 Q
"RTN","PSSCUSRQ")
0^15^B82903624^n/a
"RTN","PSSCUSRQ",1,0)
PSSCUSRQ ;BIR/RTR-Request Customization changes ;04/01/09
"RTN","PSSCUSRQ",2,0)
 ;;1.0;PHARMACY DATA MANAGEMENT;**117**;9/30/97;Build 101
"RTN","PSSCUSRQ",3,0)
 ;
"RTN","PSSCUSRQ",4,0)
 ;Request customization changes
"RTN","PSSCUSRQ",5,0)
 ;
"RTN","PSSCUSRQ",6,0)
EN ;
"RTN","PSSCUSRQ",7,0)
 N DDWAUTO,DDWTAB,DWDISABL,DIWEPSE,DIWETXT,DDWLMAR,DDWRMAR,DDWRW,DDWC,DDWFLAGS,DIWESUB,DWLW,DWPK
"RTN","PSSCUSRQ",8,0)
 N J,%,D0,D1,D2,DG,DIC,DIR,X,Y,DUOUT,DTOUT,DIRUT,DIROUT
"RTN","PSSCUSRQ",9,0)
 N PSSCQOUT,PSSCQANS,PSSCQPRM,PSSCQPMM,PSSCQVIS,PSSCQVAL,PSSCQCCT
"RTN","PSSCUSRQ",10,0)
 S PSSCQOUT=0
"RTN","PSSCUSRQ",11,0)
 K DIR S DIR(0)="SO^N:New Drug Interaction;S:Drug Interaction Severity Change;T:Duplicate Therapy Change;D:Dosing Change",DIR("A")="Select one of the above"
"RTN","PSSCUSRQ",12,0)
 S DIR("?")=" ",DIR("?",1)="Enter 'N' to request that a new Drug/Drug interaction be added, enter 'S' to"
"RTN","PSSCUSRQ",13,0)
 S DIR("?",2)="request a severity change to an existing Drug/Drug interaction, enter 'T' to",DIR("?",3)="request a Duplicate Therapy change, enter 'D' to request a Dosing change."
"RTN","PSSCUSRQ",14,0)
 ;DOSING - When Dosing comes out, uncomment previous 3 lines, delete next 3 lines
"RTN","PSSCUSRQ",15,0)
 ;K DIR S DIR(0)="SO^N:New Drug Interaction;S:Drug Interaction Severity Change;T:Duplicate Therapy Change",DIR("A")="Select one of the above"
"RTN","PSSCUSRQ",16,0)
 ;S DIR("?")=" ",DIR("?",1)="Enter 'N' to request that a new Drug/Drug interaction be added, enter 'S' to"
"RTN","PSSCUSRQ",17,0)
 ;S DIR("?",2)="request a severity change to an existing Drug/Drug interaction, enter 'T' to",DIR("?",3)="request a Duplicate Therapy change."
"RTN","PSSCUSRQ",18,0)
 D ^DIR K DIR I $D(DUOUT)!($D(DTOUT)) D MESS Q
"RTN","PSSCUSRQ",19,0)
 I Y'="N",Y'="S",Y'="T",Y'="D" D MESS Q
"RTN","PSSCUSRQ",20,0)
 ;DOSING - When Dosing comes out, uncomment previous line, delete next line
"RTN","PSSCUSRQ",21,0)
 ;I Y'="N",Y'="S",Y'="T" D MESS Q
"RTN","PSSCUSRQ",22,0)
 S PSSCQANS=Y
"RTN","PSSCUSRQ",23,0)
 D FIN
"RTN","PSSCUSRQ",24,0)
 I PSSCQANS="N" D NDI D FIN D:PSSCQOUT MESS Q
"RTN","PSSCUSRQ",25,0)
 I PSSCQANS="S" D DISC D FIN D:PSSCQOUT MESS Q
"RTN","PSSCUSRQ",26,0)
 I PSSCQANS="T" D DTC D FIN D:PSSCQOUT MESS Q
"RTN","PSSCUSRQ",27,0)
 ;DOSING - Uncomment next line when Dosing comes out
"RTN","PSSCUSRQ",28,0)
 I PSSCQANS="D" D DC D FIN D:PSSCQOUT MESS
"RTN","PSSCUSRQ",29,0)
 Q
"RTN","PSSCUSRQ",30,0)
 ;
"RTN","PSSCUSRQ",31,0)
 ;
"RTN","PSSCUSRQ",32,0)
MESS ;Exit Message
"RTN","PSSCUSRQ",33,0)
 W !!,"No Action Taken.",!
"RTN","PSSCUSRQ",34,0)
 K DIR S DIR(0)="E",DIR("A")="Press Return to continue" D ^DIR K DIR
"RTN","PSSCUSRQ",35,0)
 Q
"RTN","PSSCUSRQ",36,0)
 ;
"RTN","PSSCUSRQ",37,0)
 ;
"RTN","PSSCUSRQ",38,0)
NDI ;New Drug Interaction
"RTN","PSSCUSRQ",39,0)
 N PSSCQNDD,PSSCQNSV
"RTN","PSSCUSRQ",40,0)
 W ! K DIR,Y S DIR(0)="FO^1:78",DIR("A")="Enter Interacting Drug Names (free text)",DIR("?")=" ",DIR("?",1)="Enter the names of the Drugs for the new Drug/Drug Interaction"
"RTN","PSSCUSRQ",41,0)
 S DIR("?",2)="that you are requesting, 1 to 78 characters."
"RTN","PSSCUSRQ",42,0)
 D ^DIR K DIR I $D(DIRUT)!($D(DUOUT))!($D(DTOUT)) S PSSCQOUT=1 Q
"RTN","PSSCUSRQ",43,0)
 S PSSCQNDD=Y
"RTN","PSSCUSRQ",44,0)
 ;
"RTN","PSSCUSRQ",45,0)
 K DIR,Y S DIR(0)="SO^1:Critical;2:Significant",DIR("A")="Enter Severity"
"RTN","PSSCUSRQ",46,0)
 S DIR("?")=" ",DIR("?",1)="Enter '1' to request that this new Drug/Drug interaction be classified"
"RTN","PSSCUSRQ",47,0)
 S DIR("?",2)="as Critical, enter '2' to request it be classified as Significant."
"RTN","PSSCUSRQ",48,0)
 D ^DIR K DIR I $D(DUOUT)!($D(DTOUT)) S PSSCQOUT=1 Q
"RTN","PSSCUSRQ",49,0)
 I Y'=1,Y'=2 S PSSCQOUT=1 Q
"RTN","PSSCUSRQ",50,0)
 S PSSCQNSV=Y
"RTN","PSSCUSRQ",51,0)
 ;
"RTN","PSSCUSRQ",52,0)
 W !!,"You must now enter a reason or references for this request. <word processing>",!
"RTN","PSSCUSRQ",53,0)
 K DIR,Y S DIR(0)="E",DIR("A")="Press Return to continue, '^' to exit" D ^DIR K DIR I 'Y S PSSCQOUT=1 Q
"RTN","PSSCUSRQ",54,0)
 W ! D KLWRD S DIWESUB="References/Reason for Request",DWLW=78,DWPK=1,DIC="^TMP($J,""PSSCQWP""," D EN^DIWE
"RTN","PSSCUSRQ",55,0)
 I '$D(^TMP($J,"PSSCQWP")) W !!,"No data was entered." S PSSCQOUT=1 Q
"RTN","PSSCUSRQ",56,0)
 ;
"RTN","PSSCUSRQ",57,0)
 W ! S PSSCQPRM=1 D TEST(PSSCQPRM)
"RTN","PSSCUSRQ",58,0)
 Q
"RTN","PSSCUSRQ",59,0)
 ;
"RTN","PSSCUSRQ",60,0)
 ;
"RTN","PSSCUSRQ",61,0)
DISC ;Drug Interaction Severity Change
"RTN","PSSCUSRQ",62,0)
 N PSSCQSDD,PSSCQSSV
"RTN","PSSCUSRQ",63,0)
 W ! K DIR,Y S DIR(0)="FO^1:78",DIR("A")="Enter Interacting Drug Names (free text)",DIR("?")=" ",DIR("?",1)="Enter the names of the Drugs of the Drug/Drug Interaction that you"
"RTN","PSSCUSRQ",64,0)
 S DIR("?",2)="would like to see the severity changed for, 1 to 78 characters."
"RTN","PSSCUSRQ",65,0)
 D ^DIR K DIR I $D(DIRUT)!($D(DUOUT))!($D(DTOUT)) S PSSCQOUT=1 Q
"RTN","PSSCUSRQ",66,0)
 S PSSCQSDD=Y
"RTN","PSSCUSRQ",67,0)
 ;
"RTN","PSSCUSRQ",68,0)
 K DIR,Y S DIR(0)="SO^1:Critical;2:Significant",DIR("A")="Change Severity To"
"RTN","PSSCUSRQ",69,0)
 S DIR("?")=" ",DIR("?",1)="Enter '1' to request that this Drug/Drug interaction severity be changed"
"RTN","PSSCUSRQ",70,0)
 S DIR("?",2)="to Critical, enter '2' to request it be changed to Significant."
"RTN","PSSCUSRQ",71,0)
 D ^DIR K DIR I $D(DUOUT)!($D(DTOUT)) S PSSCQOUT=1 Q
"RTN","PSSCUSRQ",72,0)
 I Y'=1,Y'=2 S PSSCQOUT=1 Q
"RTN","PSSCUSRQ",73,0)
 S PSSCQSSV=Y
"RTN","PSSCUSRQ",74,0)
 ;
"RTN","PSSCUSRQ",75,0)
 W !!,"You must now enter a reason or references for this request. <word processing>",!
"RTN","PSSCUSRQ",76,0)
 K DIR,Y S DIR(0)="E",DIR("A")="Press Return to continue, '^' to exit" D ^DIR K DIR I 'Y S PSSCQOUT=1 Q
"RTN","PSSCUSRQ",77,0)
 W ! D KLWRD S DIWESUB="References/Reason for Request",DWLW=78,DWPK=1,DIC="^TMP($J,""PSSCQWP""," D EN^DIWE
"RTN","PSSCUSRQ",78,0)
 I '$D(^TMP($J,"PSSCQWP")) W !!,"No data was entered." S PSSCQOUT=1 Q
"RTN","PSSCUSRQ",79,0)
 ;
"RTN","PSSCUSRQ",80,0)
 W ! S PSSCQPRM=2 D TEST(PSSCQPRM)
"RTN","PSSCUSRQ",81,0)
 Q
"RTN","PSSCUSRQ",82,0)
 ;
"RTN","PSSCUSRQ",83,0)
 ;
"RTN","PSSCUSRQ",84,0)
DTC ;Duplicate Therapy Change
"RTN","PSSCUSRQ",85,0)
 W !!,"You must now enter a description of the change/problem. <word processing>",!
"RTN","PSSCUSRQ",86,0)
 K DIR S DIR(0)="E",DIR("A")="Press Return to continue, '^' to exit" D ^DIR K DIR I 'Y S PSSCQOUT=1 Q
"RTN","PSSCUSRQ",87,0)
 W ! D KLWRD S DIWESUB="Description of change/problem",DWLW=78,DWPK=1,DIC="^TMP($J,""PSSCQWP""," D EN^DIWE
"RTN","PSSCUSRQ",88,0)
 I '$D(^TMP($J,"PSSCQWP")) W !!,"No data was entered." S PSSCQOUT=1 Q
"RTN","PSSCUSRQ",89,0)
 ;
"RTN","PSSCUSRQ",90,0)
 W ! S PSSCQPRM=3 D TEST(PSSCQPRM)
"RTN","PSSCUSRQ",91,0)
 Q
"RTN","PSSCUSRQ",92,0)
 ;
"RTN","PSSCUSRQ",93,0)
 ;
"RTN","PSSCUSRQ",94,0)
DC ;Dosing Change
"RTN","PSSCUSRQ",95,0)
 ;DOSING - This code should never be called until Dosing comes out, when it does remove next line (Quit)
"RTN","PSSCUSRQ",96,0)
 ;Q
"RTN","PSSCUSRQ",97,0)
 W !!,"You must now enter a description of the change/problem. <word processing>",!
"RTN","PSSCUSRQ",98,0)
 K DIR S DIR(0)="E",DIR("A")="Press Return to continue, '^' to exit" D ^DIR K DIR I 'Y S PSSCQOUT=1 Q
"RTN","PSSCUSRQ",99,0)
 W ! D KLWRD S DIWESUB="Description of change/problem",DWLW=78,DWPK=1,DIC="^TMP($J,""PSSCQWP""," D EN^DIWE
"RTN","PSSCUSRQ",100,0)
 I '$D(^TMP($J,"PSSCQWP")) W !!,"No data was entered." S PSSCQOUT=1 Q
"RTN","PSSCUSRQ",101,0)
 ;
"RTN","PSSCUSRQ",102,0)
 W ! S PSSCQPRM=4 D TEST(PSSCQPRM)
"RTN","PSSCUSRQ",103,0)
 Q
"RTN","PSSCUSRQ",104,0)
 ;
"RTN","PSSCUSRQ",105,0)
 ;
"RTN","PSSCUSRQ",106,0)
FIN ;Clean Up
"RTN","PSSCUSRQ",107,0)
 K ^TMP($J,"PSSCQTXT")
"RTN","PSSCUSRQ",108,0)
 K ^TMP($J,"PSSCQWP")
"RTN","PSSCUSRQ",109,0)
 Q
"RTN","PSSCUSRQ",110,0)
 ;
"RTN","PSSCUSRQ",111,0)
 ;
"RTN","PSSCUSRQ",112,0)
TEST(PSSCQPMM) ;Prompt to send Mail Message
"RTN","PSSCUSRQ",113,0)
 ;For Dosing, add a check for 4 in the next line
"RTN","PSSCUSRQ",114,0)
 I PSSCQPMM'=1,PSSCQPMM'=2,PSSCQPMM'=3,PSSCQPMM'=4 W !!,"Problem with option, please enter a Remedy ticket." S PSSCQOUT=1 Q
"RTN","PSSCUSRQ",115,0)
 S PSSCQCCT=1
"RTN","PSSCUSRQ",116,0)
 I '$$PROD^XUPROD S PSSCQCCT=0 W !!,"NOTE: This is a test account. Regardless of your response to the 'Transmit'",!,"prompt, this request will NOT be sent forward for national review.",!
"RTN","PSSCUSRQ",117,0)
 K DIR,Y S DIR(0)="Y",DIR("B")="Y"
"RTN","PSSCUSRQ",118,0)
 S DIR("A")=$S(PSSCQPMM=1:"Transmit New Drug Interaction Request",PSSCQPMM=2:"Transmit Drug Interaction Severity Change Request",PSSCQPMM=3:"Transmit Duplicate Therapy Change Request",PSSCQPMM=4:"Transmit Dosing Change Request",1:"Transmit")
"RTN","PSSCUSRQ",119,0)
 ;DOSING - when dosing comes out, remove next line and uncomment previous line
"RTN","PSSCUSRQ",120,0)
 ;S DIR("A")=$S(PSSCQPMM=1:"Transmit New Drug Interaction Request",PSSCQPMM=2:"Transmit Drug Interaction Severity Change Request",PSSCQPMM=3:"Transmit Duplicate Therapy Change Request",1:"Transmit")
"RTN","PSSCUSRQ",121,0)
 S DIR("?")=" ",DIR("?",1)="Enter 'Y' to transmit this request for review. (For production accounts only)"
"RTN","PSSCUSRQ",122,0)
 S DIR("?",2)="If you enter 'N', the message will sent to you only, in Vista mail.",DIR("?",3)="Enter '^' to exit, and not send the message."
"RTN","PSSCUSRQ",123,0)
 D ^DIR K DIR
"RTN","PSSCUSRQ",124,0)
 I $D(DUOUT)!($D(DTOUT)) S PSSCQOUT=1 Q
"RTN","PSSCUSRQ",125,0)
 S PSSCQVIS=0
"RTN","PSSCUSRQ",126,0)
 I Y'=1 S PSSCQVIS=1 D SEND(PSSCQPMM) W !!,"Mail message only sent to you in Vista Mail.",! K DIR S DIR(0)="E",DIR("A")="Press Return to continue" D ^DIR K DIR Q
"RTN","PSSCUSRQ",127,0)
 D SEND(PSSCQPMM) W !!,"Mail message transmitted for review.",! K DIR S DIR(0)="E",DIR("A")="Press Return to continue" D ^DIR K DIR
"RTN","PSSCUSRQ",128,0)
 Q
"RTN","PSSCUSRQ",129,0)
 ;
"RTN","PSSCUSRQ",130,0)
 ;
"RTN","PSSCUSRQ",131,0)
SEND(PSSCQVAL) ;Send Mail Message
"RTN","PSSCUSRQ",132,0)
 N XMTEXT,XMY,XMSUB,XMDUZ,XMMG,XMSTRIP,XMROU,XMDUN,DIFROM,XMYBLOB,XMZ,PSSCQLP,PSSCQCNT
"RTN","PSSCUSRQ",133,0)
 I PSSCQVAL=1 D NDITXT G PASS
"RTN","PSSCUSRQ",134,0)
 I PSSCQVAL=2 D DISCTXT G PASS
"RTN","PSSCUSRQ",135,0)
 I PSSCQVAL=3 D DTCTXT G PASS
"RTN","PSSCUSRQ",136,0)
 ;DOSING - when Dosing comes out, uncomment next line
"RTN","PSSCUSRQ",137,0)
 I PSSCQVAL=4 D DCTXT
"RTN","PSSCUSRQ",138,0)
PASS ;
"RTN","PSSCUSRQ",139,0)
 S XMSUB=$S(PSSCQVAL=1:"New Drug Interaction Request",PSSCQVAL=2:"Drug Interaction Severity Change Request",PSSCQVAL=3:"Duplicate Therapy Change Request",PSSCQVAL=4:"Dosing Change Request",1:"Unknown Request")
"RTN","PSSCUSRQ",140,0)
 ;DOSING - when Dosing comes out, remove next line and uncomment previous line
"RTN","PSSCUSRQ",141,0)
 ;S XMSUB=$S(PSSCQVAL=1:"New Drug Interaction Request",PSSCQVAL=2:"Drug Interaction Severity Change Request",PSSCQVAL=3:"Duplicate Therapy Change Request",1:"Unknown Request")
"RTN","PSSCUSRQ",142,0)
 S XMDUZ=DUZ
"RTN","PSSCUSRQ",143,0)
 S XMTEXT="^TMP($J,""PSSCQTXT"","
"RTN","PSSCUSRQ",144,0)
 S XMY(DUZ)=""
"RTN","PSSCUSRQ",145,0)
 I 'PSSCQVIS,PSSCQCCT S XMY("VAOITVHITPSCUSTOMREQ@va.gov")=""
"RTN","PSSCUSRQ",146,0)
 D ^XMD
"RTN","PSSCUSRQ",147,0)
 Q
"RTN","PSSCUSRQ",148,0)
 ;
"RTN","PSSCUSRQ",149,0)
 ;
"RTN","PSSCUSRQ",150,0)
NDITXT ;Format text message for New Drug Interaction
"RTN","PSSCUSRQ",151,0)
 S ^TMP($J,"PSSCQTXT",1,0)="Request New Drug Interaction:"
"RTN","PSSCUSRQ",152,0)
 S ^TMP($J,"PSSCQTXT",2,0)=$G(PSSCQNDD)
"RTN","PSSCUSRQ",153,0)
 S ^TMP($J,"PSSCQTXT",3,0)=" "
"RTN","PSSCUSRQ",154,0)
 S ^TMP($J,"PSSCQTXT",4,0)="Severity:"
"RTN","PSSCUSRQ",155,0)
 S ^TMP($J,"PSSCQTXT",5,0)=$S($G(PSSCQNSV)=1:"CRITICAL",$G(PSSCQNSV)=2:"SIGNIFICANT",1:"UNKNOWN")
"RTN","PSSCUSRQ",156,0)
 S ^TMP($J,"PSSCQTXT",6,0)=" "
"RTN","PSSCUSRQ",157,0)
 S PSSCQCNT=7
"RTN","PSSCUSRQ",158,0)
 F PSSCQLP=0:0 S PSSCQLP=$O(^TMP($J,"PSSCQWP",PSSCQLP)) Q:'PSSCQLP  S ^TMP($J,"PSSCQTXT",PSSCQCNT,0)=$G(^TMP($J,"PSSCQWP",PSSCQLP,0)) S PSSCQCNT=PSSCQCNT+1
"RTN","PSSCUSRQ",159,0)
 Q
"RTN","PSSCUSRQ",160,0)
 ;
"RTN","PSSCUSRQ",161,0)
 ;
"RTN","PSSCUSRQ",162,0)
DISCTXT ;Format text message for Drug Interaction Severity Change
"RTN","PSSCUSRQ",163,0)
 S ^TMP($J,"PSSCQTXT",1,0)="Drug-Drug Interaction:"
"RTN","PSSCUSRQ",164,0)
 S ^TMP($J,"PSSCQTXT",2,0)=$G(PSSCQSDD)
"RTN","PSSCUSRQ",165,0)
 S ^TMP($J,"PSSCQTXT",3,0)=" "
"RTN","PSSCUSRQ",166,0)
 S ^TMP($J,"PSSCQTXT",4,0)="Severity Change To:"
"RTN","PSSCUSRQ",167,0)
 S ^TMP($J,"PSSCQTXT",5,0)=$S($G(PSSCQSSV)=1:"CRITICAL",$G(PSSCQSSV)=2:"SIGNIFICANT",1:"UNKNOWN")
"RTN","PSSCUSRQ",168,0)
 S ^TMP($J,"PSSCQTXT",6,0)=" "
"RTN","PSSCUSRQ",169,0)
 S PSSCQCNT=7
"RTN","PSSCUSRQ",170,0)
 F PSSCQLP=0:0 S PSSCQLP=$O(^TMP($J,"PSSCQWP",PSSCQLP)) Q:'PSSCQLP  S ^TMP($J,"PSSCQTXT",PSSCQCNT,0)=$G(^TMP($J,"PSSCQWP",PSSCQLP,0)) S PSSCQCNT=PSSCQCNT+1
"RTN","PSSCUSRQ",171,0)
 Q
"RTN","PSSCUSRQ",172,0)
 ;
"RTN","PSSCUSRQ",173,0)
 ;
"RTN","PSSCUSRQ",174,0)
DTCTXT ;Format text message for Duplicate Therapy Change
"RTN","PSSCUSRQ",175,0)
 S ^TMP($J,"PSSCQTXT",1,0)="Duplicate Therapy Change Description/Problem:"
"RTN","PSSCUSRQ",176,0)
 S ^TMP($J,"PSSCQTXT",2,0)=" "
"RTN","PSSCUSRQ",177,0)
 S PSSCQCNT=3
"RTN","PSSCUSRQ",178,0)
 F PSSCQLP=0:0 S PSSCQLP=$O(^TMP($J,"PSSCQWP",PSSCQLP)) Q:'PSSCQLP  S ^TMP($J,"PSSCQTXT",PSSCQCNT,0)=$G(^TMP($J,"PSSCQWP",PSSCQLP,0)) S PSSCQCNT=PSSCQCNT+1
"RTN","PSSCUSRQ",179,0)
 Q
"RTN","PSSCUSRQ",180,0)
 ;
"RTN","PSSCUSRQ",181,0)
 ;
"RTN","PSSCUSRQ",182,0)
DCTXT ;Format text message for Dosing Change
"RTN","PSSCUSRQ",183,0)
 ;DOSING - Should never be called until Dosing comes out. When Dosing does come out, remove next line (Quit)
"RTN","PSSCUSRQ",184,0)
 ;Q
"RTN","PSSCUSRQ",185,0)
 S ^TMP($J,"PSSCQTXT",1,0)="Dosing Change Description/Problem:"
"RTN","PSSCUSRQ",186,0)
 S ^TMP($J,"PSSCQTXT",2,0)=" "
"RTN","PSSCUSRQ",187,0)
 S PSSCQCNT=3
"RTN","PSSCUSRQ",188,0)
 F PSSCQLP=0:0 S PSSCQLP=$O(^TMP($J,"PSSCQWP",PSSCQLP)) Q:'PSSCQLP  S ^TMP($J,"PSSCQTXT",PSSCQCNT,0)=$G(^TMP($J,"PSSCQWP",PSSCQLP,0)) S PSSCQCNT=PSSCQCNT+1
"RTN","PSSCUSRQ",189,0)
 Q
"RTN","PSSCUSRQ",190,0)
 ;
"RTN","PSSCUSRQ",191,0)
 ;
"RTN","PSSCUSRQ",192,0)
KLWRD ;
"RTN","PSSCUSRQ",193,0)
 K DDWAUTO,DDWTAB,DWDISABL,DIWEPSE,DIWETXT,DDWLMAR,DDWRMAR,DDWRW,DDWC,DDWFLAGS,DIWESUB,DWLW,DWPK,DIC
"RTN","PSSCUSRQ",194,0)
 K ^TMP($J,"PSSCQWP")
"RTN","PSSCUSRQ",195,0)
 Q
"RTN","PSSDSAPD")
0^18^B200359258^n/a
"RTN","PSSDSAPD",1,0)
PSSDSAPD ;BIR/RTR-Main Dose Check API ;09/16/08
"RTN","PSSDSAPD",2,0)
 ;;1.0;PHARMACY DATA MANAGEMENT;**117**;9/30/97;Build 101
"RTN","PSSDSAPD",3,0)
 ;
"RTN","PSSDSAPD",4,0)
 ;Dose Check API
"RTN","PSSDSAPD",5,0)
 ;
"RTN","PSSDSAPD",6,0)
 ;Input
"RTN","PSSDSAPD",7,0)
 ;PSSDBASE = Name of subscript
"RTN","PSSDSAPD",8,0)
 ;PSSDBDFN = Patient Internal Entry Number
"RTN","PSSDSAPD",9,0)
 ;PSSDBDS  = Data to use to build actual Input data, for pieces not sent in PSSDBFDB array
"RTN","PSSDSAPD",10,0)
 ;PSSDBFDB = Array where if the node exists, just set that data (even if null) directly into the corresponding API piece
"RTN","PSSDSAPD",11,0)
 ;
"RTN","PSSDSAPD",12,0)
DOSE(PSSDBASX,PSSDBDFN,PSSDBDS,PSSDBFDB) ;
"RTN","PSSDSAPD",13,0)
 ;PSSDBASE Arrays must NOT be in PSS namespace, just in case you pick the same one
"RTN","PSSDSAPD",14,0)
 ;If a complex order, calling application must use different Order numbers
"RTN","PSSDSAPD",15,0)
 I $G(PSSDBASX(1))="" Q
"RTN","PSSDSAPD",16,0)
 N PSSDBASE,PSSDBASF,PSSDBASG,PSSDBASA,PSSDBASB S PSSDBASE=PSSDBASX(1),PSSDBASF=$G(PSSDBASX(2)),PSSDBASG=$G(PSSDBASX(3)) K ^TMP($J,PSSDBASE) K ^TMP($J,"PSSDOSGL") K ^TMP($J,"PSSCNX")
"RTN","PSSDSAPD",17,0)
 S PSSDBASA=0 I $G(PSSDBASF)'="" K ^TMP($J,PSSDBASF) S PSSDBASA=1
"RTN","PSSDSAPD",18,0)
 S PSSDBASB=0 I $G(PSSDBASG)'="" K ^TMP($J,PSSDBASG) S PSSDBASB=1
"RTN","PSSDSAPD",19,0)
 S ^TMP($J,PSSDBASE,"IN","PING")="" D IN^PSSHRQ2(PSSDBASE)
"RTN","PSSDSAPD",20,0)
 I $P($G(^TMP($J,PSSDBASE,"OUT",0)),"^")=-1 D DOWN^PSSDSAPK Q
"RTN","PSSDSAPD",21,0)
 K ^TMP($J,PSSDBASE)
"RTN","PSSDSAPD",22,0)
 N PSSDBLP,PSSDBND1,PSSDBND3,PSSDBAR,PSSDBFST,PSSDBFLG,PSSDBCOT,PSSDBCAR,PSSDBFRC,PSSDBFRB,PSSDBIFL,PSSDBIFG,PSSDBCAX,PSSDBCAZ,PSSDBFTX,PSSDBADJ
"RTN","PSSDSAPD",23,0)
 I +$G(PSSDBDFN)'>0 Q
"RTN","PSSDSAPD",24,0)
 S PSSDBFLG=0
"RTN","PSSDSAPD",25,0)
 K ^TMP($J,PSSDBASE)
"RTN","PSSDSAPD",26,0)
 F PSSDBLP=0:0 S PSSDBLP=$O(PSSDBFDB(PSSDBLP)) Q:'PSSDBLP  D
"RTN","PSSDSAPD",27,0)
 .K PSSDBAR,PSSDBND1,PSSDBND3 S (PSSDBIFL,PSSDBIFG)=0
"RTN","PSSDSAPD",28,0)
 .I $G(PSSDBFDB(PSSDBLP,"RX_NUM"))="" Q
"RTN","PSSDSAPD",29,0)
 .I $G(PSSDBFDB(PSSDBLP,"DRUG_NM"))="" Q
"RTN","PSSDSAPD",30,0)
 .S:$G(PSSDBFDB(PSSDBLP,"OI"))>0 PSSDBFDB("OI")=PSSDBFDB(PSSDBLP,"OI") I $G(PSSDBFDB(PSSDBLP,"DRUG_IEN"))'>0,$G(PSSDBFDB("OI"))'>0 Q
"RTN","PSSDSAPD",31,0)
 .I $G(PSSDBFDB(PSSDBLP,"DRUG_IEN"))>0,$$EXMT^PSSDSAPI($G(PSSDBFDB(PSSDBLP,"DRUG_IEN"))) Q
"RTN","PSSDSAPD",32,0)
 .D INERR^PSSDSAPM I $G(PSSDBFDB(PSSDBLP,"DRUG_IEN"))'>0 I 'PSSDBIFL!($G(PSSDBFDB("PACKAGE"))="I") D FDRUG^PSSDSAPM
"RTN","PSSDSAPD",33,0)
 .I PSSDBIFL,'PSSDBIFG Q
"RTN","PSSDSAPD",34,0)
 .D NDINFO
"RTN","PSSDSAPD",35,0)
 .I $G(PSSDBND1),$G(PSSDBND3) D
"RTN","PSSDSAPD",36,0)
 ..S PSSDBAR("GCN")=$P($$PROD0^PSNAPIS(PSSDBND1,PSSDBND3),"^",7)
"RTN","PSSDSAPD",37,0)
 ..S PSSDBAR("VUID")=$$GETVUID^XTID(50.68,,+PSSDBND3_",")
"RTN","PSSDSAPD",38,0)
 .S PSSDBAR("NAME")=$G(PSSDBFDB(PSSDBLP,"DRUG_NM"))
"RTN","PSSDSAPD",39,0)
 .D AMT I $G(PSSDBAR("AMN"))'="",$L(PSSDBAR("AMN"))>1,$E(PSSDBAR("AMN"),1)="0" S PSSDBAR("AMN")=$E(PSSDBAR("AMN"),2,$L(PSSDBAR("AMN")))
"RTN","PSSDSAPD",40,0)
 .D DTYPE
"RTN","PSSDSAPD",41,0)
 .;Dose Rate is always DAY for Outpatient and Unit Dose and Outpatient orders
"RTN","PSSDSAPD",42,0)
 .S PSSDBAR("DSE")=$S($D(PSSDBFDB(PSSDBLP,"DOSE_RATE")):$G(PSSDBFDB(PSSDBLP,"DOSE_RATE")),1:"DAY")
"RTN","PSSDSAPD",43,0)
 .D RTE
"RTN","PSSDSAPD",44,0)
 .D SCHD
"RTN","PSSDSAPD",45,0)
 .D DURR
"RTN","PSSDSAPD",46,0)
 .D DURRAT
"RTN","PSSDSAPD",47,0)
 .S PSSDBAR("SPFC")=""
"RTN","PSSDSAPD",48,0)
 .S PSSDBFST=$G(PSSDBAR("GCN"))_"^"_$S($P($G(PSSDBAR("VUID")),"^")'=0:$G(PSSDBAR("VUID")),1:"")_"^"_$S('PSSDBIFL:PSSDBFDB(PSSDBLP,"DRUG_IEN"),PSSDBIFL&(PSSDBIFG):PSSDBIFG,1:"")_"^"_PSSDBAR("NAME")
"RTN","PSSDSAPD",49,0)
 .S PSSDBFLG=1
"RTN","PSSDSAPD",50,0)
 .S ^TMP($J,PSSDBASE,"IN","PROSPECTIVE",PSSDBFDB(PSSDBLP,"RX_NUM"))=PSSDBFST
"RTN","PSSDSAPD",51,0)
 .S ^TMP($J,PSSDBASE,"IN","DOSE",PSSDBFDB(PSSDBLP,"RX_NUM"))=PSSDBFST_"^"_$G(PSSDBAR("AMN"))_"^"_$G(PSSDBAR("UNIT"))_"^"_PSSDBAR("DSE")_"^"_PSSDBAR("FREQ")_"^"_PSSDBAR("DUR")_"^"_PSSDBAR("DRR")_"^"_PSSDBAR("RT")_"^"_PSSDBAR("TYPE")
"RTN","PSSDSAPD",52,0)
 .S ^TMP($J,PSSDBASE,"IN","DOSE",PSSDBFDB(PSSDBLP,"RX_NUM"))=^TMP($J,PSSDBASE,"IN","DOSE",PSSDBFDB(PSSDBLP,"RX_NUM"))_"^"_PSSDBAR("SPFC")_"^"_$$DFM^PSSDSEXC
"RTN","PSSDSAPD",53,0)
 .S PSSDBFRC(PSSDBFDB(PSSDBLP,"RX_NUM"),"CONJ")=$G(PSSDBDS(PSSDBLP,"CONJ")) S PSSDBFRC(PSSDBFDB(PSSDBLP,"RX_NUM"),"SCHEDULE")=$G(PSSDBDS(PSSDBLP,"SCHEDULE"))
"RTN","PSSDSAPD",54,0)
 .I $G(PSSDBDS(PSSDBLP,"DRATE"))'="" I PSSDBDS(PSSDBLP,"DRATE")?.N!(PSSDBDS(PSSDBLP,"DRATE")?.N1".".N) S PSSDBDS(PSSDBLP,"DRATE")=PSSDBDS(PSSDBLP,"DRATE")_"D"
"RTN","PSSDSAPD",55,0)
 .S PSSDBFRB(PSSDBFDB(PSSDBLP,"RX_NUM"),"DRATE")=$G(PSSDBDS(PSSDBLP,"DRATE")) D ADJU^PSSDSEXC
"RTN","PSSDSAPD",56,0)
 .D INFUE^PSSDSAPM
"RTN","PSSDSAPD",57,0)
 .D FRQE^PSSDSAPM
"RTN","PSSDSAPD",58,0)
 .S ^TMP($J,"PSSCNX","IN","DOSE",PSSDBLP,PSSDBFDB(PSSDBLP,"RX_NUM"))=^TMP($J,PSSDBASE,"IN","DOSE",PSSDBFDB(PSSDBLP,"RX_NUM"))
"RTN","PSSDSAPD",59,0)
 ;
"RTN","PSSDSAPD",60,0)
 ;
"RTN","PSSDSAPD",61,0)
 ;I 'PSSDBFLG Q
"RTN","PSSDSAPD",62,0)
 D COMP ;Set up complex Doses
"RTN","PSSDSAPD",63,0)
 S ^TMP($J,PSSDBASE,"IN","IEN")=PSSDBDFN
"RTN","PSSDSAPD",64,0)
 S ^TMP($J,PSSDBASE,"IN","DOSE")=""
"RTN","PSSDSAPD",65,0)
 D PAT^PSSDSAPM K ^TMP($J,"PSSCNX")
"RTN","PSSDSAPD",66,0)
 N PSSDBDGO ; Only go to interace if you have at least one DOse Sequence that needs to go
"RTN","PSSDSAPD",67,0)
 S PSSDBDGO=0 I $D(^TMP($J,PSSDBASE,"IN","EXCEPTIONS")) S PSSDBDGO=1
"RTN","PSSDSAPD",68,0)
 D ERR ;Set up PSSDBCAX error array and default data
"RTN","PSSDSAPD",69,0)
 I PSSDBDGO D:$D(PSSDBFTX) FTX^PSSDSAPK D IN^PSSHRQ2(PSSDBASE) D:$D(PSSDBFTX) FTXRS^PSSDSAPK
"RTN","PSSDSAPD",70,0)
 I PSSDBASA!(PSSDBASB) D FMT^PSSDSEXC,ADDCT^PSSDSAPM
"RTN","PSSDSAPD",71,0)
 Q
"RTN","PSSDSAPD",72,0)
 ;
"RTN","PSSDSAPD",73,0)
 ;
"RTN","PSSDSAPD",74,0)
AMT ;Set Dose Amount and Dose Unit
"RTN","PSSDSAPD",75,0)
 I $D(PSSDBCAZ(PSSDBFDB(PSSDBLP,"RX_NUM"),"NO_DRUG")) D MLTS^PSSDSAPM Q
"RTN","PSSDSAPD",76,0)
 N PSSDBUNT,PSSDBFAL,PSSDBXP,PSSDBNOD,PSSDBNT,PSSDSXTD,PSSDBUNA,PSSDBLPD,PSSDSLCL
"RTN","PSSDSAPD",77,0)
 ;Account for leading zeros
"RTN","PSSDSAPD",78,0)
 S (PSSDBFAL,PSSDBLPD)=0
"RTN","PSSDSAPD",79,0)
 I 'PSSDBIFL,$D(PSSDBFDB(PSSDBLP,"DOSE_AMT")),$D(PSSDBFDB(PSSDBLP,"DOSE_UNIT")) S PSSDBAR("AMN")=PSSDBFDB(PSSDBLP,"DOSE_AMT"),PSSDBAR("UNIT")=PSSDBFDB(PSSDBLP,"DOSE_UNIT") D LDZ Q
"RTN","PSSDSAPD",80,0)
 I 'PSSDBIFL,$G(PSSDBDS(PSSDBLP,"DRG_AMT")),$G(PSSDBDS(PSSDBLP,"DRG_UNIT"))'="" D
"RTN","PSSDSAPD",81,0)
 .;What about Drug Units like MG/ML, can they be passed in like that, and if so, do we take first piece of"/"
"RTN","PSSDSAPD",82,0)
 .S PSSDBUNT=$S(PSSDBDS(PSSDBLP,"DRG_UNIT")["/":$P(PSSDBDS(PSSDBLP,"DRG_UNIT"),"/"),1:PSSDBDS(PSSDBLP,"DRG_UNIT"))
"RTN","PSSDSAPD",83,0)
 .S PSSDBUNT=$$UP^XLFSTR(PSSDBUNT)
"RTN","PSSDSAPD",84,0)
 .S PSSDBUNA=$$UNIT^PSSDSAPI(PSSDBUNT)
"RTN","PSSDSAPD",85,0)
 .;Add validation that dose is numeric?
"RTN","PSSDSAPD",86,0)
 .I PSSDBUNA'="" S PSSDBAR("AMN")=PSSDBDS(PSSDBLP,"DRG_AMT"),PSSDBAR("UNIT")=PSSDBUNA,PSSDBFAL=1 D LDZ
"RTN","PSSDSAPD",87,0)
 I PSSDBFAL Q
"RTN","PSSDSAPD",88,0)
 ;"DOSE" Node should only come from CPRS, for selected Local Possible Dosage
"RTN","PSSDSAPD",89,0)
 S PSSDSLCL=$S($G(PSSDBDS(PSSDBLP,"DOSE"))'="":$P($G(PSSDBDS(PSSDBLP,"DOSE")),"&",5),1:$G(PSSDBDS(PSSDBLP,"DO")))
"RTN","PSSDSAPD",90,0)
 I PSSDBIFL D MLT^PSSDSAPM Q
"RTN","PSSDSAPD",91,0)
 I PSSDSLCL'="" D
"RTN","PSSDSAPD",92,0)
 .F PSSDBXP=0:0 S PSSDBXP=$O(^PSDRUG(PSSDBFDB(PSSDBLP,"DRUG_IEN"),"DOS2",PSSDBXP)) Q:'PSSDBXP!(PSSDBFAL)  D
"RTN","PSSDSAPD",93,0)
 ..S PSSDBNOD=$G(^PSDRUG(PSSDBFDB(PSSDBLP,"DRUG_IEN"),"DOS2",PSSDBXP,0))
"RTN","PSSDSAPD",94,0)
 ..;ignore package of the Local Possible Dose
"RTN","PSSDSAPD",95,0)
 ..;
"RTN","PSSDSAPD",96,0)
 ..I $$MTCH^PSSDSAPK S PSSDBLPD=1 I $P(PSSDBNOD,"^",5),$P(PSSDBNOD,"^",6)'="" D
"RTN","PSSDSAPD",97,0)
 ...;XTID Screening out Inactive Dose Units
"RTN","PSSDSAPD",98,0)
 ...S PSSDSXTD=+$P(PSSDBNOD,"^",5) I PSSDSXTD,$$SCREEN^XTID(51.24,.01,PSSDSXTD_",") Q
"RTN","PSSDSAPD",99,0)
 ...S PSSDBNT=$P($G(^PS(51.24,+$P(PSSDBNOD,"^",5),0)),"^",2)
"RTN","PSSDSAPD",100,0)
 ...I PSSDBNT'="" S PSSDBAR("AMN")=$P(PSSDBNOD,"^",6),PSSDBAR("UNIT")=PSSDBNT,PSSDBFAL=1
"RTN","PSSDSAPD",101,0)
 .;Only do auto-population logic if Local Possible Dosage was not found at all in File 50
"RTN","PSSDSAPD",102,0)
 .I PSSDBFAL Q
"RTN","PSSDSAPD",103,0)
 .I PSSDBLPD D DPOP^PSSDSAPK I PSSDBFAL Q
"RTN","PSSDSAPD",104,0)
 .D ITEM^PSSDSAPK D:'PSSDBFAL NUM^PSSDSAPL
"RTN","PSSDSAPD",105,0)
 Q
"RTN","PSSDSAPD",106,0)
 ;
"RTN","PSSDSAPD",107,0)
 ;
"RTN","PSSDSAPD",108,0)
LDZ ;
"RTN","PSSDSAPD",109,0)
 I $E(PSSDBAR("AMN"))=0,$L(PSSDBAR("AMN"))>1 S PSSDBAR("AMN")=$E(PSSDBAR("AMN"),2,$L(PSSDBAR("AMN")))
"RTN","PSSDSAPD",110,0)
 Q
"RTN","PSSDSAPD",111,0)
 ;
"RTN","PSSDSAPD",112,0)
 ;
"RTN","PSSDSAPD",113,0)
RTE ;Get First DataBank Med Route
"RTN","PSSDSAPD",114,0)
 N PSSDBMRT
"RTN","PSSDSAPD",115,0)
 K PSSDBMRT
"RTN","PSSDSAPD",116,0)
 I $D(PSSDBFDB(PSSDBLP,"ROUTE")) S PSSDBAR("RT")=PSSDBFDB(PSSDBLP,"ROUTE") Q
"RTN","PSSDSAPD",117,0)
 I $G(PSSDBDS(PSSDBLP,"MR_IEN")) S PSSDBMRT=$$MRT^PSSDSAPI(PSSDBDS(PSSDBLP,"MR_IEN")) I $P(PSSDBMRT,"^",2)'="" S PSSDBAR("RT")=$P(PSSDBMRT,"^",2) Q
"RTN","PSSDSAPD",118,0)
 S PSSDBAR("RT")=""
"RTN","PSSDSAPD",119,0)
 Q
"RTN","PSSDSAPD",120,0)
 ;
"RTN","PSSDSAPD",121,0)
 ;
"RTN","PSSDSAPD",122,0)
DFM() ;get Dose Form Indicator
"RTN","PSSDSAPD",123,0)
 ;Go over this code again, you just default to 0, is that OK?
"RTN","PSSDSAPD",124,0)
 ;N PSSDFDFK,PSSDFDFL
"RTN","PSSDSAPD",125,0)
 ;I $G(PSSDBAR("UNIT"))="" Q 0
"RTN","PSSDSAPD",126,0)
 ;S PSSDFDFL=0 F PSSDFDFK=0:0 S PSSDFDFK=$O(^PS(51.24,"C",PSSDBAR("UNIT"),PSSDFDFK)) Q:'PSSDFDFK!(PSSDFDFL)  I '$$SCREEN^XTID(51.24,.01,PSSDFDFK_",") S PSSDFDFL=PSSDFDFK
"RTN","PSSDSAPD",127,0)
 ;I PSSDFDFL,$P($G(^PS(51.24,PSSDFDFL,0)),"^",3) Q 1
"RTN","PSSDSAPD",128,0)
 ;Q 0
"RTN","PSSDSAPD",129,0)
 ;
"RTN","PSSDSAPD",130,0)
 ;
"RTN","PSSDSAPD",131,0)
SCHD ;
"RTN","PSSDSAPD",132,0)
 N PSSDBSCD,PSSDBSCP,PSSDBSCF,PSSDBSCG,PSSDBSCH
"RTN","PSSDSAPD",133,0)
 S PSSDBAR("FREQ")=""
"RTN","PSSDSAPD",134,0)
 ;I $D(PSSDBFDB(PSSDBLP,"FREQ")) S PSSDBAR("FREQ")=PSSDBFDB(PSSDBLP,"FREQ") Q
"RTN","PSSDSAPD",135,0)
 I PSSDBAR("TYPE")="SINGLE DOSE" S PSSDBAR("FREQ")="" Q
"RTN","PSSDSAPD",136,0)
 ;Next Line,  srs 3.7.12.36, AND FOR Inpatient, but where does it apply in the heirarchy
"RTN","PSSDSAPD",137,0)
 ;I $G(PSSDBDS(PSSDBLP,"DRATE"))'="",$$DRT(PSSDBDS(PSSDBLP,"DRATE"))<1440 S PSSDBSDR=1
"RTN","PSSDSAPD",138,0)
 S PSSDBSCD=$G(PSSDBDS(PSSDBLP,"SCHEDULE"))
"RTN","PSSDSAPD",139,0)
 I PSSDBSCD="",'$D(PSSDBFDB(PSSDBLP,"FREQ")) S PSSDBCAZ(PSSDBFDB(PSSDBLP,"RX_NUM"),"FRQ_ERROR")="" Q
"RTN","PSSDSAPD",140,0)
 S (PSSDBSCF,PSSDBSCH)="" S PSSDBSCP=$P(PSSDBFDB(PSSDBLP,"RX_NUM"),";")
"RTN","PSSDSAPD",141,0)
 I $G(PSSDBSCD)'="" F PSSDBSCG=0:0 S PSSDBSCG=$O(^PS(51.1,"APPSJ",PSSDBSCD,PSSDBSCG)) Q:'PSSDBSCG!(PSSDBSCH)  D
"RTN","PSSDSAPD",142,0)
 .I $P($G(^PS(51.1,PSSDBSCG,0)),"^",5)="D" S PSSDBSCF="D"
"RTN","PSSDSAPD",143,0)
 .I $P($G(^PS(51.1,PSSDBSCG,0)),"^",5)="O"!($P($G(^PS(51.1,PSSDBSCG,0)),"^",5)="OC") S PSSDBSCH=1
"RTN","PSSDSAPD",144,0)
 I PSSDBSCH,'$D(PSSDBFDB(PSSDBLP,"FREQ")) S PSSDBAR("FREQ")=1 Q
"RTN","PSSDSAPD",145,0)
 I $G(PSSDBSCD)["@" S PSSDBSCF="D"
"RTN","PSSDSAPD",146,0)
 ;Next line, setting to "O" for anything besides Inpatient (FRQ only accepts O or I), need to see what all the possible packahes can be, like can you get a "U" for Unit Dose? If so, code is wrong
"RTN","PSSDSAPD",147,0)
 I $G(PSSDBSCD)'="" S PSSDBSCP=$S(PSSDBSCP="I":"I",1:"O") S PSSDBAR("FREQZZ")=$$FRQ^PSSDSAPI(PSSDBSCD,PSSDBSCF,PSSDBSCP,$G(PSSDBDS(PSSDBLP,"DRATE"))),PSSDBAR("FREQ")=$P(PSSDBAR("FREQZZ"),"^")
"RTN","PSSDSAPD",148,0)
 I $D(PSSDBFDB(PSSDBLP,"FREQ")) S PSSDBAR("FREQ")=PSSDBFDB(PSSDBLP,"FREQ") Q
"RTN","PSSDSAPD",149,0)
 S:PSSDBAR("FREQ")="" PSSDBCAZ(PSSDBFDB(PSSDBLP,"RX_NUM"),"FRQ_ERROR")=""
"RTN","PSSDSAPD",150,0)
 Q
"RTN","PSSDSAPD",151,0)
 ;
"RTN","PSSDSAPD",152,0)
 ;
"RTN","PSSDSAPD",153,0)
DTYPE ;Find Dose Type
"RTN","PSSDSAPD",154,0)
 ;Inpatient - 'On Call' or 'One Time' = Single Dose, else Maintenance
"RTN","PSSDSAPD",155,0)
 ;Outpatient - Same logic, validate with Requirements on the 'On Call', and validate Maintenance default if no Schedule
"RTN","PSSDSAPD",156,0)
 N PSSDBST1,PSSDBST2,PSSDBST3,PSSDBST4
"RTN","PSSDSAPD",157,0)
 I $D(PSSDBFDB(PSSDBLP,"DOSE_TYPE")) S PSSDBAR("TYPE")=PSSDBFDB(PSSDBLP,"DOSE_TYPE") Q
"RTN","PSSDSAPD",158,0)
 S PSSDBST1=$G(PSSDBDS(PSSDBLP,"SCHEDULE"))
"RTN","PSSDSAPD",159,0)
 I PSSDBST1="" S PSSDBAR("TYPE")="MAINTENANCE" Q
"RTN","PSSDSAPD",160,0)
 S PSSDBST3=0
"RTN","PSSDSAPD",161,0)
 F PSSDBST2=0:0 S PSSDBST2=$O(^PS(51.1,"APPSJ",PSSDBST1,PSSDBST2)) Q:'PSSDBST2!(PSSDBST3)  D
"RTN","PSSDSAPD",162,0)
 .S PSSDBST4=$P($G(^PS(51.1,PSSDBST2,0)),"^",5)
"RTN","PSSDSAPD",163,0)
 .I PSSDBST4="O"!(PSSDBST4="OC") S PSSDBAR("TYPE")="SINGLE DOSE",PSSDBST3=1
"RTN","PSSDSAPD",164,0)
 I 'PSSDBST3 S PSSDBAR("TYPE")="MAINTENANCE"
"RTN","PSSDSAPD",165,0)
 Q
"RTN","PSSDSAPD",166,0)
 ;
"RTN","PSSDSAPD",167,0)
 ;
"RTN","PSSDSAPD",168,0)
DURR ;Set Duration
"RTN","PSSDSAPD",169,0)
 I $D(PSSDBFDB(PSSDBLP,"DURATION")) S PSSDBAR("DUR")=PSSDBFDB(PSSDBLP,"DURATION") Q
"RTN","PSSDSAPD",170,0)
 S PSSDBAR("DUR")=$S($G(PSSDBAR("TYPE"))="SINGLE DOSE":"",1:1)
"RTN","PSSDSAPD",171,0)
 Q
"RTN","PSSDSAPD",172,0)
 ;
"RTN","PSSDSAPD",173,0)
 ;
"RTN","PSSDSAPD",174,0)
DURRAT ;Set Duration Rate
"RTN","PSSDSAPD",175,0)
 I $D(PSSDBFDB(PSSDBLP,"DURATION_RT")) S PSSDBAR("DRR")=PSSDBFDB(PSSDBLP,"DURATION_RT") Q
"RTN","PSSDSAPD",176,0)
 S PSSDBAR("DRR")=$S($G(PSSDBAR("TYPE"))="SINGLE DOSE":"",1:"DAY")
"RTN","PSSDSAPD",177,0)
 Q
"RTN","PSSDSAPD",178,0)
 ;
"RTN","PSSDSAPD",179,0)
 ;
"RTN","PSSDSAPD",180,0)
COMP ;Possible set extra input nodes for complex order, and set array for all inputs, where
"RTN","PSSDSAPD",181,0)
 ;PSSDBCAR  "S" - Only show Single
"RTN","PSSDSAPD",182,0)
 ;PSSDBCAR  "D" - Only show Daily
"RTN","PSSDSAPD",183,0)
 ;PSSDBCAR  "B" - Show Both
"RTN","PSSDSAPD",184,0)
 ;You are assuming Drug is the same and it should be ; Do I need to set additional table flags in PSSDBCAR array
"RTN","PSSDSAPD",185,0)
 ;If last entry has a conjunction of "AND", do NOT do Daily Dose, that may fix the PSOORED3, 4 and 5 issue
"RTN","PSSDSAPD",186,0)
 ;
"RTN","PSSDSAPD",187,0)
 ;
"RTN","PSSDSAPD",188,0)
 ;if you have to add new entries, just add a piece 5 = 1 to the Pharmacy Order Number
"RTN","PSSDSAPD",189,0)
 ;If Conjunction is AND, and Med Route and Dose Units and Schedule type are same, add up
"RTN","PSSDSAPD",190,0)
 ;and interpret the schedule
"RTN","PSSDSAPD",191,0)
 ;if all "ands" are not the same, don't do it.
"RTN","PSSDSAPD",192,0)
 ;Requirement question, if THEN is the conjunction, do we care about duration
"RTN","PSSDSAPD",193,0)
 N PSSDBKLP,PSSDBKUN,PSSDBKMR,PSSDBKND,PSSDBKRF,PSSDBKNW,PSSDBKFL,PSSDBKTM,PSSDBKFQ,PSSDBKGG,PSSCNX1
"RTN","PSSDSAPD",194,0)
 S PSSDBKTM="PSSTTMP"
"RTN","PSSDSAPD",195,0)
 K ^TMP($J,PSSDBKTM)
"RTN","PSSDSAPD",196,0)
 S PSSDBKFL=0
"RTN","PSSDSAPD",197,0)
 F PSSCNX1=0:0 S PSSCNX1=$O(^TMP($J,"PSSCNX","IN","DOSE",PSSCNX1)) Q:'PSSCNX1  S PSSDBKLP=$O(^TMP($J,"PSSCNX","IN","DOSE",PSSCNX1,"")) I PSSDBKLP'=""  D
"RTN","PSSDSAPD",198,0)
 .S PSSDBKND=$G(^TMP($J,PSSDBASE,"IN","DOSE",PSSDBKLP)) S PSSDBKFQ=$S($D(PSSDBCAZ(PSSDBKLP,"FRQ_ERROR")):0,1:1) S PSSDBKGG=$S($P(PSSDBKND,"^",12)="SINGLE DOSE":1,1:0)
"RTN","PSSDSAPD",199,0)
 .;Review next line
"RTN","PSSDSAPD",200,0)
 .S PSSDBCAR(PSSDBKLP)="B"_"^"_$P(PSSDBKND,"^",4)_"^"_$P(PSSDBKND,"^",3)_"^"_PSSDBKFQ_"^"_$S($P(PSSDBKND,"^",12)="SINGLE DOSE":0,1:1) S:$G(PSSDBFRC(PSSDBKLP,"CONJ"))="A" $P(PSSDBCAR(PSSDBKLP),"^",7)=1
"RTN","PSSDSAPD",201,0)
 .S $P(PSSDBCAR(PSSDBKLP),"^",9)=$P(PSSDBKND,"^",11) D MLTNO^PSSDSAPM
"RTN","PSSDSAPD",202,0)
 .I $G(PSSDBFRC(PSSDBKLP,"CONJ"))'="A"!($O(^TMP($J,"PSSCNX","IN","DOSE",PSSCNX1))="") S PSSDBKNW($P(PSSDBKLP,";",4),PSSDBKLP)="" D CRT K PSSDBKNW S PSSDBKFL=0 Q
"RTN","PSSDSAPD",203,0)
 .S PSSDBKFL=PSSDBKFL+1
"RTN","PSSDSAPD",204,0)
 .S PSSDBKNW($P(PSSDBKLP,";",4),PSSDBKLP)=""
"RTN","PSSDSAPD",205,0)
 .S $P(PSSDBCAR(PSSDBKLP),"^")="S",$P(PSSDBCAR(PSSDBKLP),"^",12)=1
"RTN","PSSDSAPD",206,0)
 I $D(^TMP($J,PSSDBKTM)) M ^TMP($J,PSSDBASE)=^TMP($J,PSSDBKTM)
"RTN","PSSDSAPD",207,0)
 K ^TMP($J,PSSDBKTM)
"RTN","PSSDSAPD",208,0)
 Q
"RTN","PSSDSAPD",209,0)
 ;
"RTN","PSSDSAPD",210,0)
 ;
"RTN","PSSDSAPD",211,0)
DRT(PSSDBJV) ;Return number of minutes based on duration, API also called from Inpatient Medications
"RTN","PSSDSAPD",212,0)
 ;If only a numeric is passed in, the API will assume Days
"RTN","PSSDSAPD",213,0)
 ;Return -1 if API cannot resolve data passed in
"RTN","PSSDSAPD",214,0)
 ;
"RTN","PSSDSAPD",215,0)
 I $G(PSSDBJV)="" Q -1
"RTN","PSSDSAPD",216,0)
 I PSSDBJV?.N1".".N1"D"!(PSSDBJV?.N1"D") Q (1440*+PSSDBJV)
"RTN","PSSDSAPD",217,0)
 I PSSDBJV?.N1".".N!(PSSDBJV?.N) Q (1440*+PSSDBJV)
"RTN","PSSDSAPD",218,0)
 I PSSDBJV?.N1".".N1"H"!(PSSDBJV?.N1"H") Q (60*+PSSDBJV)
"RTN","PSSDSAPD",219,0)
 I PSSDBJV?.N1".".N1"M"!(PSSDBJV?.N1"M") Q (+PSSDBJV)
"RTN","PSSDSAPD",220,0)
 I PSSDBJV?.N1".".N1"W"!(PSSDBJV?.N1"W") Q (10080*+PSSDBJV)
"RTN","PSSDSAPD",221,0)
 I PSSDBJV?.N1".".N1"L"!(PSSDBJV?.N1"L") Q (43200*+PSSDBJV)
"RTN","PSSDSAPD",222,0)
 Q -1
"RTN","PSSDSAPD",223,0)
 ;
"RTN","PSSDSAPD",224,0)
 ;
"RTN","PSSDSAPD",225,0)
CRT ;Create new Input Dose Node just for Daily Dose purposes
"RTN","PSSDSAPD",226,0)
 ;Next Line, Then or Except conjunction, or last Dosing Sequence, and in either case nothing previous to add, how do I set exceptions
"RTN","PSSDSAPD",227,0)
 I 'PSSDBKFL!($G(PSSDBFRC(PSSDBKLP,"CONJ"))="A") S $P(PSSDBCAR(PSSDBKLP),"^")=$S($G(PSSDBFRC(PSSDBKLP,"CONJ"))="A":"S",$G(PSSDBKGG):"S",$G(PSSDBFRB(PSSDBKLP,"DRATE"))="":"B",1:"B") D S12 Q
"RTN","PSSDSAPD",228,0)
 N PSSDBR1,PSSDBR2,PSSDBR3,PSSDBR4,PSSDBR5,PSSDBR6,PSSDBR7,PSSDBRCT,PSSDBRNO,PSSDBRLS,PSSDBR9,PSSDBR91,PSSDBEQ2,PSSDBEQ3,PSSDBEQ4,PSSDBR8,PSSDBXAX,PSSDBRLP,PSSDBRLA
"RTN","PSSDSAPD",229,0)
 S (PSSDBRNO,PSSDBRCT,PSSDBR5)=0
"RTN","PSSDSAPD",230,0)
 ;Then or Except, or last Dosing Sequence, with previous dosages to add
"RTN","PSSDSAPD",231,0)
 ;PSSDBKNW array holds all previous dosing sequences and current one
"RTN","PSSDSAPD",232,0)
 S PSSDBRLP="" F  S PSSDBRLP=$O(PSSDBKNW(PSSDBRLP)) Q:PSSDBRLP=""  S PSSDBR1=$O(PSSDBKNW(PSSDBRLP,"")) I PSSDBR1'=""  D
"RTN","PSSDSAPD",233,0)
 .S PSSDBR2=$G(^TMP($J,PSSDBASE,"IN","DOSE",PSSDBR1))
"RTN","PSSDSAPD",234,0)
 .I $O(PSSDBKNW(PSSDBRLP))="" S $P(PSSDBCAR(PSSDBKLP),"^")="S",$P(PSSDBCAR(PSSDBKLP),"^",12)=1
"RTN","PSSDSAPD",235,0)
 .I $P(PSSDBR2,"^",12)'="MAINTENANCE" D NX(4)
"RTN","PSSDSAPD",236,0)
 .S PSSDBRCT=PSSDBRCT+1
"RTN","PSSDSAPD",237,0)
 .;Check for Day of Week Schedule, From back Door Inpatinet,Make sure Schedule variable is always defined coming in, Also if I find just one Day of Week out of all the schedules, then it's invalid, is that OK?
"RTN","PSSDSAPD",238,0)
 .I $G(PSSDBFRC(PSSDBR1,"SCHEDULE"))["@" D NX(10)
"RTN","PSSDSAPD",239,0)
 .I '$D(PSSDBEQ2(10)),$G(PSSDBFRC(PSSDBR1,"SCHEDULE"))'="" F PSSDBEQ4=0:0 S PSSDBEQ4=$O(^PS(51.1,"APPSJ",$G(PSSDBFRC(PSSDBR1,"SCHEDULE")),PSSDBEQ4)) Q:'PSSDBEQ4!($D(PSSDBEQ2(10)))  D
"RTN","PSSDSAPD",240,0)
 ..I $P($G(^PS(51.1,PSSDBEQ4,0)),"^",5)="D" D NX(10)
"RTN","PSSDSAPD",241,0)
 .I PSSDBRCT=1 D  Q
"RTN","PSSDSAPD",242,0)
 ..I '$P(PSSDBR2,"^",5) D NX(11)
"RTN","PSSDSAPD",243,0)
 ..S PSSDBR91=$G(PSSDBFRB(PSSDBR1,"DRATE"))
"RTN","PSSDSAPD",244,0)
 ..S PSSDBR3=$P(PSSDBR2,"^",6),PSSDBR4=$P(PSSDBR2,"^",11) I PSSDBR3=""!(PSSDBR4="") S PSSDBRNO=1 D:PSSDBR3="" NX(5) D:PSSDBR4="" NX(6)
"RTN","PSSDSAPD",245,0)
 ..;Next line, check FRQ API, If you set Text (Q12h), this won't work, may need to do new one
"RTN","PSSDSAPD",246,0)
 ..;May be OK, if number is set when always a day or less
"RTN","PSSDSAPD",247,0)
 ..;
"RTN","PSSDSAPD",248,0)
 ..;
"RTN","PSSDSAPD",249,0)
 ..S PSSDBR5=$P(PSSDBR2,"^",8)
"RTN","PSSDSAPD",250,0)
 ..I $D(PSSDBCAZ(PSSDBR1,"FRQ_ERROR")) D NX(7)
"RTN","PSSDSAPD",251,0)
 ..I 'PSSDBRNO S PSSDBR8=$$FRCON^PSSDSAPK(PSSDBR5) S:PSSDBR8'<1 PSSDBR6=$P(PSSDBR2,"^",5)*PSSDBR8 I PSSDBR8<1 D NX(7)
"RTN","PSSDSAPD",252,0)
 ..;
"RTN","PSSDSAPD",253,0)
 ..;All durations must be the same, and that includes the last duration, not allowed to be null
"RTN","PSSDSAPD",254,0)
 ..I $G(PSSDBFRB(PSSDBR1,"DRATE"))'="" S PSSDBR7=$$DRT(PSSDBFRB(PSSDBR1,"DRATE")) I PSSDBR7<1440 D NX(9)
"RTN","PSSDSAPD",255,0)
 ..I '$O(PSSDBKNW(PSSDBRLP)) S PSSDBRLS=PSSDBR1 ; Get Last entry
"RTN","PSSDSAPD",256,0)
 .I '$P(PSSDBR2,"^",5) D NX(11)
"RTN","PSSDSAPD",257,0)
 .I PSSDBR3'=$P(PSSDBR2,"^",6) D NX(5)
"RTN","PSSDSAPD",258,0)
 .I PSSDBR4'=$P(PSSDBR2,"^",11) D NX(6)
"RTN","PSSDSAPD",259,0)
 .I $G(PSSDBFRB(PSSDBR1,"DRATE"))'=PSSDBR91 D NX(8)
"RTN","PSSDSAPD",260,0)
 .S PSSDBR5=$P(PSSDBR2,"^",8) I $D(PSSDBCAZ(PSSDBR1,"FRQ_ERROR")) D NX(7)
"RTN","PSSDSAPD",261,0)
 .;
"RTN","PSSDSAPD",262,0)
 .I 'PSSDBRNO S PSSDBR8=$$FRCON^PSSDSAPK(PSSDBR5) S:PSSDBR8'<1 PSSDBR6=PSSDBR6+($P(PSSDBR2,"^",5)*PSSDBR8) I PSSDBR8<1 D NX(7)
"RTN","PSSDSAPD",263,0)
 .I $G(PSSDBFRB(PSSDBR1,"DRATE"))'="" S PSSDBR7=$$DRT(PSSDBFRB(PSSDBR1,"DRATE")) I PSSDBR7<1440 D NX(9)
"RTN","PSSDSAPD",264,0)
 .I '$O(PSSDBKNW(PSSDBRLP)) S PSSDBRLS=PSSDBR1 ; Get Last entry
"RTN","PSSDSAPD",265,0)
 I PSSDBRNO D  S $P(PSSDBCAR(PSSDBRLS),"^",8)=1,$P(PSSDBCAR(PSSDBRLS),"^",7)="" D MLTNP^PSSDSAPM Q
"RTN","PSSDSAPD",266,0)
 .S PSSDBRLA="" F  S PSSDBRAL=$O(PSSDBKNW(PSSDBRLA)) Q:PSSDBRLA=""  S PSSDBR9=$O(PSSDBKNW(PSSDBRLA,"")) I PSSDBR9'=""  S $P(PSSDBCAR(PSSDBR9),"^")="S",$P(PSSDBCAR(PSSDBR9),"^",12)=1
"RTN","PSSDSAPD",267,0)
 .;Set error message only for last entry where Daily Dose should have been done
"RTN","PSSDSAPD",268,0)
 .D ERST^PSSDSAPM
"RTN","PSSDSAPD",269,0)
 S ^TMP($J,PSSDBKTM,"IN","DOSE",PSSDBRLS_";1")=^TMP($J,PSSDBASE,"IN","DOSE",PSSDBRLS)
"RTN","PSSDSAPD",270,0)
 ;Change next line to not use pieces like that
"RTN","PSSDSAPD",271,0)
 S ^TMP($J,PSSDBKTM,"IN","PROSPECTIVE",PSSDBRLS_";1")=$P(^TMP($J,PSSDBASE,"IN","DOSE",PSSDBRLS),"^",1,4)
"RTN","PSSDSAPD",272,0)
 S $P(^TMP($J,PSSDBKTM,"IN","DOSE",PSSDBRLS_";1"),"^",8)=1
"RTN","PSSDSAPD",273,0)
 S $P(^TMP($J,PSSDBKTM,"IN","DOSE",PSSDBRLS_";1"),"^",5)=PSSDBR6
"RTN","PSSDSAPD",274,0)
 S PSSDBCAR(PSSDBRLS_";1")="D"_"^"_$P(PSSDBKND,"^",4)_"^"_$P(PSSDBKND,"^",3)_"^"_PSSDBKFQ S $P(PSSDBCAR(PSSDBRLS),"^",11)=1
"RTN","PSSDSAPD",275,0)
 Q
"RTN","PSSDSAPD",276,0)
 ;
"RTN","PSSDSAPD",277,0)
 ;
"RTN","PSSDSAPD",278,0)
NDINFO ;Set National Drug File information
"RTN","PSSDSAPD",279,0)
 I 'PSSDBIFL,$G(PSSDBFDB(PSSDBLP,"DRUG_IEN")) S PSSDBND1=$P($G(^PSDRUG(PSSDBFDB(PSSDBLP,"DRUG_IEN"),"ND")),"^"),PSSDBND3=$P($G(^PSDRUG(PSSDBFDB(PSSDBLP,"DRUG_IEN"),"ND")),"^",3) Q
"RTN","PSSDSAPD",280,0)
 I $G(PSSDBIFG) S PSSDBND1=$P($G(^PSDRUG(PSSDBIFG,"ND")),"^"),PSSDBND3=$P($G(^PSDRUG(PSSDBIFG,"ND")),"^",3)
"RTN","PSSDSAPD",281,0)
 Q
"RTN","PSSDSAPD",282,0)
 ;
"RTN","PSSDSAPD",283,0)
 ;
"RTN","PSSDSAPD",284,0)
ERR ;Loop through PSSDBCAR, set PSSDBCAX error array, probably only need to set for 4 pirce RX Numbers, 5 pieces should be fine
"RTN","PSSDSAPD",285,0)
 N PSSDBEB1,PSSDBEB2,PSSDBEB3
"RTN","PSSDSAPD",286,0)
 ;test what happens is age is not defined
"RTN","PSSDSAPD",287,0)
 S PSSDBEB3=$S($G(^TMP($J,PSSDBASE,"IN","DOSE","AGE")):1,1:0)
"RTN","PSSDSAPD",288,0)
 ;Skip AGE, WT and BSA and newly created Dosages  for complex additions
"RTN","PSSDSAPD",289,0)
 ;Rx_NUM MUST contain a ";", or you will not set PSSDBGO *******
"RTN","PSSDSAPD",290,0)
 S PSSDBEB1="" F  S PSSDBEB1=$O(^TMP($J,PSSDBASE,"IN","DOSE",PSSDBEB1)) Q:PSSDBEB1=""  D:'$P(PSSDBEB1,";",5)&(PSSDBEB1[";")
"RTN","PSSDSAPD",291,0)
 .S PSSDBEB2=$G(^TMP($J,PSSDBASE,"IN","DOSE",PSSDBEB1))
"RTN","PSSDSAPD",292,0)
 .I $D(PSSDBCAZ(PSSDBEB1,"INF_ERROR")) D INRATE S PSSDBDGO=1 Q
"RTN","PSSDSAPD",293,0)
 .I $P(PSSDBEB2,"^",5)=""!($P(PSSDBEB2,"^",6)="") D BDOSE^PSSDSAPK Q
"RTN","PSSDSAPD",294,0)
 .I $D(PSSDBCAZ(PSSDBEB1,"FRQ_ERROR")) D INFRQ S PSSDBDGO=1 Q
"RTN","PSSDSAPD",295,0)
 .I '$P(PSSDBCAR(PSSDBEB1),"^",5) D SING^PSSDSAPK S PSSDBDGO=1 Q
"RTN","PSSDSAPD",296,0)
 .S PSSDBDGO=1
"RTN","PSSDSAPD",297,0)
 Q
"RTN","PSSDSAPD",298,0)
 ;
"RTN","PSSDSAPD",299,0)
 ;
"RTN","PSSDSAPD",300,0)
EXCPS(PSSDBEQ1) ;Set errors
"RTN","PSSDSAPD",301,0)
 I PSSDBEQ1=2,$D(PSSDBCAZ(PSSDBEB1,"FRQD_ERROR")) S PSSDBCAX(PSSDBEB1,15)="" Q
"RTN","PSSDSAPD",302,0)
 S PSSDBCAX(PSSDBEB1,PSSDBEQ1)=""
"RTN","PSSDSAPD",303,0)
 Q
"RTN","PSSDSAPD",304,0)
 ;
"RTN","PSSDSAPD",305,0)
 ;
"RTN","PSSDSAPD",306,0)
INRATE ;Infusion Rate error takes care of 3b and 3c, default data already set in Inpatient
"RTN","PSSDSAPD",307,0)
 ;N PSSDBEC1
"RTN","PSSDSAPD",308,0)
 I 'PSSDBEB3 Q
"RTN","PSSDSAPD",309,0)
 ;S PSSDBEC1=$P(PSSDBEB2,"^",11) S PSSDBEC1=$$UP^XLFSTR(PSSDBEC1) I $E(PSSDBEC1,1,4)'="CONT" Q
"RTN","PSSDSAPD",310,0)
 D EXCPS(3) D INFERRS^PSSDSAPK
"RTN","PSSDSAPD",311,0)
 I $D(PSSDBCAZ(PSSDBEB1,"FRQ_ERROR")) D EXCPS(2)
"RTN","PSSDSAPD",312,0)
 I $P(PSSDBCAR(PSSDBEB1),"^",5) S $P(PSSDBCAR(PSSDBEB1),"^",6)=1 S $P(PSSDBCAR(PSSDBEB1),"^",10)=1 Q  ;Maintenance Dose
"RTN","PSSDSAPD",313,0)
 ;Single Dose, code should never be invoked, because we don't send Continuous infusions
"RTN","PSSDSAPD",314,0)
 S $P(PSSDBCAR(PSSDBEB1),"^")="S"
"RTN","PSSDSAPD",315,0)
 S $P(PSSDBCAR(PSSDBEB1),"^",7)=1
"RTN","PSSDSAPD",316,0)
 Q
"RTN","PSSDSAPD",317,0)
 ;
"RTN","PSSDSAPD",318,0)
 ;
"RTN","PSSDSAPD",319,0)
INFRQ ;Frequency error  WILL DO 4a
"RTN","PSSDSAPD",320,0)
 I 'PSSDBEB3 Q
"RTN","PSSDSAPD",321,0)
 I $P(PSSDBEB2,"^",11)="" Q
"RTN","PSSDSAPD",322,0)
 ;I '$P(PSSDBCAR(PSSDBEB1),"^",5) Q
"RTN","PSSDSAPD",323,0)
 D EXCPS(2)
"RTN","PSSDSAPD",324,0)
 S $P(PSSDBCAR(PSSDBEB1),"^")="S"
"RTN","PSSDSAPD",325,0)
 I $P(PSSDBCAR(PSSDBEB1),"^",5) S $P(PSSDBCAR(PSSDBEB1),"^",8)=1 S $P(PSSDBCAR(PSSDBEB1),"^",10)=1
"RTN","PSSDSAPD",326,0)
 ;Inpatient may already se setting next 3, because this applies to Outpatient and IV
"RTN","PSSDSAPD",327,0)
 S $P(^TMP($J,PSSDBASE,"IN","DOSE",PSSDBEB1),"^",8)=1,$P(^TMP($J,PSSDBASE,"IN","DOSE",PSSDBEB1),"^",9)=1
"RTN","PSSDSAPD",328,0)
 ;S $P(^TMP($J,PSSDBASE,"IN","DOSE",PSSDBEB1),"^",9)=1
"RTN","PSSDSAPD",329,0)
 S $P(^TMP($J,PSSDBASE,"IN","DOSE",PSSDBEB1),"^",10)=$P(^TMP($J,PSSDBASE,"IN","DOSE",PSSDBEB1),"^",7)
"RTN","PSSDSAPD",330,0)
 Q
"RTN","PSSDSAPD",331,0)
 ;
"RTN","PSSDSAPD",332,0)
 ;
"RTN","PSSDSAPD",333,0)
S12 ;
"RTN","PSSDSAPD",334,0)
 S:$P(PSSDBCAR(PSSDBKLP),"^")="S" $P(PSSDBCAR(PSSDBKLP),"^",12)=1
"RTN","PSSDSAPD",335,0)
 Q
"RTN","PSSDSAPD",336,0)
 ;
"RTN","PSSDSAPD",337,0)
 ;
"RTN","PSSDSAPD",338,0)
NX(PSSNX) ;
"RTN","PSSDSAPD",339,0)
 S PSSDBRNO=1
"RTN","PSSDSAPD",340,0)
 S PSSDBEQ2(PSSNX)=""
"RTN","PSSDSAPD",341,0)
 S PSSDBXAX(PSSNX,PSSDBR1)=""
"RTN","PSSDSAPD",342,0)
 Q
"RTN","PSSDSAPI")
0^1^B115672717^n/a
"RTN","PSSDSAPI",1,0)
PSSDSAPI ;BIR/RTR-Dose Check APIs routine ;06/09/08
"RTN","PSSDSAPI",2,0)
 ;;1.0;PHARMACY DATA MANAGEMENT;**117**;9/30/97;Build 101
"RTN","PSSDSAPI",3,0)
 ;
"RTN","PSSDSAPI",4,0)
EXMT(PSSVLIEN) ;Test if Drug should have Dose Call performed on it
"RTN","PSSDSAPI",5,0)
 ;PSSVLIEN=File 50 internal entry number 
"RTN","PSSDSAPI",6,0)
 ;1=exempt from Dose Check, 0=not exempt from Dose check
"RTN","PSSDSAPI",7,0)
 N PSSVLND,PSSVLND1,PSSVLND3,PSSVLNDF,PSSVLDOV,PSSVLZR,PSSVLDF
"RTN","PSSDSAPI",8,0)
 S PSSVLZR=$G(^PSDRUG(PSSVLIEN,0))
"RTN","PSSDSAPI",9,0)
 I $P(PSSVLZR,"^",3)["S"!($E($P(PSSVLZR,"^",2),1,2)="XA") Q 1
"RTN","PSSDSAPI",10,0)
 S PSSVLND=$G(^PSDRUG(PSSVLIEN,"ND"))
"RTN","PSSDSAPI",11,0)
 S PSSVLND1=$P(PSSVLND,"^"),PSSVLND3=$P(PSSVLND,"^",3)
"RTN","PSSDSAPI",12,0)
 S PSSVLDOV="" K PSSVLDF
"RTN","PSSDSAPI",13,0)
 I $T(OVRIDE^PSNAPIS)]"",PSSVLND1,PSSVLND3 S PSSVLDOV=$$OVRIDE^PSNAPIS(PSSVLND1,PSSVLND3)
"RTN","PSSDSAPI",14,0)
 I PSSVLND1,PSSVLND3 S PSSVLNDF=$$DFSU^PSNAPIS(PSSVLND1,PSSVLND3) S PSSVLDF=$P(PSSVLNDF,"^")
"RTN","PSSDSAPI",15,0)
 I $G(PSSVLDF)'>0,$P($G(^PSDRUG(PSSVLIEN,2)),"^") S PSSVLDF=$P($G(^PS(50.7,+$P($G(^PSDRUG(PSSVLIEN,2)),"^"),0)),"^",2)
"RTN","PSSDSAPI",16,0)
 I PSSVLDOV=""!('$G(PSSVLDF))!($P($G(^PS(50.606,+$G(PSSVLDF),1)),"^")="") Q 0
"RTN","PSSDSAPI",17,0)
 I $P($G(^PS(50.606,+$G(PSSVLDF),1)),"^"),'PSSVLDOV Q 1
"RTN","PSSDSAPI",18,0)
 I '$P($G(^PS(50.606,+$G(PSSVLDF),1)),"^"),PSSVLDOV Q 1
"RTN","PSSDSAPI",19,0)
 Q 0
"RTN","PSSDSAPI",20,0)
 ;
"RTN","PSSDSAPI",21,0)
 ;
"RTN","PSSDSAPI",22,0)
SUP(PSSSPLIN) ;Screen for Drug Interaction and Duplicate Therapy
"RTN","PSSDSAPI",23,0)
 ;PSSSPLIN = File 50 internal entry number
"RTN","PSSDSAPI",24,0)
 ;1=exempt, 0=not exempt
"RTN","PSSDSAPI",25,0)
 N PSSSPLZR
"RTN","PSSDSAPI",26,0)
 S PSSSPLZR=$G(^PSDRUG(PSSSPLIN,0))
"RTN","PSSDSAPI",27,0)
 I $P(PSSSPLZR,"^",3)["S"!($E($P(PSSSPLZR,"^",2),1,2)="XA") Q 1
"RTN","PSSDSAPI",28,0)
 Q 0
"RTN","PSSDSAPI",29,0)
 ;
"RTN","PSSDSAPI",30,0)
 ;
"RTN","PSSDSAPI",31,0)
MRT(PSSRS1) ;Return Standard Medication Route and First DataBank Route
"RTN","PSSDSAPI",32,0)
 N PSSRS2,PSSRS3
"RTN","PSSDSAPI",33,0)
 S PSSRS2=""
"RTN","PSSDSAPI",34,0)
 I '$G(PSSRS1) G MRTX
"RTN","PSSDSAPI",35,0)
 I $P($G(^PS(51.2,PSSRS1,0)),"^",4)'=1 G MRTX
"RTN","PSSDSAPI",36,0)
 S PSSRS3=$P($G(^PS(51.2,PSSRS1,1)),"^") I '$G(PSSRS3) G MRTX
"RTN","PSSDSAPI",37,0)
 I '$D(^PS(51.23,+PSSRS3,0)) G MRTX
"RTN","PSSDSAPI",38,0)
 I $$SCREEN^XTID(51.23,.01,+PSSRS3_",") G MRTX
"RTN","PSSDSAPI",39,0)
 S PSSRS2=$G(^PS(51.23,+PSSRS3,0))
"RTN","PSSDSAPI",40,0)
MRTX ;
"RTN","PSSDSAPI",41,0)
 Q $P(PSSRS2,"^")_"^"_$P(PSSRS2,"^",2)
"RTN","PSSDSAPI",42,0)
 ;
"RTN","PSSDSAPI",43,0)
 ;
"RTN","PSSDSAPI",44,0)
UNIT(PSSVUTUN) ;Find First DataBank Unit, can't do DIC Lookup because of exact match check
"RTN","PSSDSAPI",45,0)
 ;Returns Null or First DataBank Unit for text passed in
"RTN","PSSDSAPI",46,0)
 ;Not a true conversion, because if Unit contains "/", we convert only piece 1
"RTN","PSSDSAPI",47,0)
 N PSSVUTX,PSSVUTZ,PSSVUTAA,PSSVUTFL
"RTN","PSSDSAPI",48,0)
 S PSSVUTFL=0 I $G(PSSVUTUN)="" S PSSVUTZ="" G UNITX
"RTN","PSSDSAPI",49,0)
 S PSSVUTAA=$$UP^XLFSTR(PSSVUTUN)
"RTN","PSSDSAPI",50,0)
UNITP ;
"RTN","PSSDSAPI",51,0)
 K PSSVUTZ S PSSVUTX=$O(^PS(51.24,"B",PSSVUTAA,0)) I PSSVUTX,'$$SCREEN^XTID(51.24,.01,PSSVUTX_",") S PSSVUTZ=$P($G(^PS(51.24,PSSVUTX,0)),"^",2) I PSSVUTZ'="" G UNITX
"RTN","PSSDSAPI",52,0)
 K PSSVUTZ S PSSVUTX=$O(^PS(51.24,"C",PSSVUTAA,0)) I PSSVUTX,'$$SCREEN^XTID(51.24,.01,PSSVUTX_",") S PSSVUTZ=$P($G(^PS(51.24,PSSVUTX,0)),"^",2) I PSSVUTZ'="" G UNITX
"RTN","PSSDSAPI",53,0)
 K PSSVUTZ S PSSVUTX=$O(^PS(51.24,"D",PSSVUTAA,0)) I PSSVUTX,'$$SCREEN^XTID(51.24,.01,PSSVUTX_",") S PSSVUTZ=$P($G(^PS(51.24,PSSVUTX,0)),"^",2) I PSSVUTZ'="" G UNITX
"RTN","PSSDSAPI",54,0)
 I 'PSSVUTFL,$G(PSSVUTUN)["/" S PSSVUTFL=1,PSSVUTAA=$P(PSSVUTUN,"/"),PSSVUTAA=$$UP^XLFSTR(PSSVUTAA) G:PSSVUTAA'="" UNITP
"RTN","PSSDSAPI",55,0)
UNITX ;
"RTN","PSSDSAPI",56,0)
 Q $G(PSSVUTZ)
"RTN","PSSDSAPI",57,0)
 ;
"RTN","PSSDSAPI",58,0)
 ;
"RTN","PSSDSAPI",59,0)
FRQ(PSSFWSCC,PSSFWFR,PSSFWPK,PSSFWDRL) ;Return Daily Frequency for Daily Dose Check
"RTN","PSSDSAPI",60,0)
 ;
"RTN","PSSDSAPI",61,0)
 ;Input variables:
"RTN","PSSDSAPI",62,0)
 ;PSSFWSC = Free Text Schedule
"RTN","PSSDSAPI",63,0)
 ;PSSFWFR = Frequency in Minutes
"RTN","PSSDSAPI",64,0)
 ;PSSFWPK = Package  "O" for Outpatient, "I" for Inpatient
"RTN","PSSDSAPI",65,0)
 ;PSSFWDRL = Duration
"RTN","PSSDSAPI",66,0)
 ;Output:
"RTN","PSSDSAPI",67,0)
 ;Input for Frequency Field in API (can be numeric or text), or null
"RTN","PSSDSAPI",68,0)
 ;
"RTN","PSSDSAPI",69,0)
 ;
"RTN","PSSDSAPI",70,0)
 N PSSFWPR1,PSSFWPR2,PSSFWPR3,PSSFWPR4,PSSFWPR5,PSSFWPR6,PSSFWPR7
"RTN","PSSDSAPI",71,0)
 S PSSFWPR1=0
"RTN","PSSDSAPI",72,0)
 S PSSFWPR2=$$FRQZ
"RTN","PSSDSAPI",73,0)
 I PSSFWPR1 Q PSSFWPR2_"^"_$G(PSSFWPR7)
"RTN","PSSDSAPI",74,0)
 S PSSFWPR3=$L(PSSFWSCC) I PSSFWPR3<5 Q PSSFWPR2_"^"_$G(PSSFWPR7)
"RTN","PSSDSAPI",75,0)
 S PSSFWPR4=$E(PSSFWSCC,(PSSFWPR3-3),PSSFWPR3) S PSSFWPR4=$$UP^XLFSTR(PSSFWPR4)
"RTN","PSSDSAPI",76,0)
 I PSSFWPR4'=" PRN" Q PSSFWPR2_"^"_$G(PSSFWPR7)
"RTN","PSSDSAPI",77,0)
 S PSSFWPR5=PSSFWSCC
"RTN","PSSDSAPI",78,0)
 S PSSFWSCC=$E(PSSFWSCC,1,(PSSFWPR3-4)) K PSSFWPR7
"RTN","PSSDSAPI",79,0)
 S PSSFWPR6=$$FRQZ
"RTN","PSSDSAPI",80,0)
 S PSSFWSCC=PSSFWPR5
"RTN","PSSDSAPI",81,0)
 Q PSSFWPR6_"^"_$G(PSSFWPR7)
"RTN","PSSDSAPI",82,0)
 ;
"RTN","PSSDSAPI",83,0)
 ;
"RTN","PSSDSAPI",84,0)
FRQZ() ;
"RTN","PSSDSAPI",85,0)
 N PSSFWRST,PSSFWFLG,PSSFWSC
"RTN","PSSDSAPI",86,0)
 S PSSFWSC=$$UP^XLFSTR(PSSFWSCC)
"RTN","PSSDSAPI",87,0)
 K PSSFWRST
"RTN","PSSDSAPI",88,0)
 I $G(PSSFWPK)'="O",$G(PSSFWPK)'="I" Q ""
"RTN","PSSDSAPI",89,0)
 I $G(PSSFWFR)="D" D DAY Q $G(PSSFWRST)
"RTN","PSSDSAPI",90,0)
 I $G(PSSFWFR) D NUMB I PSSFWFLG Q PSSFWRST
"RTN","PSSDSAPI",91,0)
 D STN I PSSFWFLG Q PSSFWRST
"RTN","PSSDSAPI",92,0)
 I $G(PSSFWPK)="O" D STNO I PSSFWFLG Q PSSFWRST
"RTN","PSSDSAPI",93,0)
 Q ""
"RTN","PSSDSAPI",94,0)
 ;
"RTN","PSSDSAPI",95,0)
 ;
"RTN","PSSDSAPI",96,0)
DAY ;Day of week schedule
"RTN","PSSDSAPI",97,0)
 N PSSFWFND,PSSFWRGH,PSSFWLTH,PSSFWTMP,PSSFWLP,PSSFWLP1,PSSFWCNT,PSSFWQZ,PSSFWDIV,PSSFWNUM,PSSFWKZ1,PSSFWKZ2,PSSFWKZ3,PSSFWKZ4,PSSFWKZ5
"RTN","PSSDSAPI",98,0)
 K PSSFWRST
"RTN","PSSDSAPI",99,0)
 S PSSFWLTH=$L(PSSFWSC)
"RTN","PSSDSAPI",100,0)
 S PSSFWFND=$F(PSSFWSC,"@")
"RTN","PSSDSAPI",101,0)
 S PSSFWRGH=$E(PSSFWSC,PSSFWFND,PSSFWLTH)
"RTN","PSSDSAPI",102,0)
 S PSSFWTMP=$S($E(PSSFWRGH,$L(PSSFWRGH))'="-":PSSFWRGH_"-",1:PSSFWRGH)
"RTN","PSSDSAPI",103,0)
 I PSSFWTMP?.(2N1"-")!(PSSFWTMP?.(4N1"-")) D  S PSSFWRST=PSSFWCNT,PSSFWPR1=1 Q
"RTN","PSSDSAPI",104,0)
 .S PSSFWCNT=0 F PSSFWLP=1:1:$L(PSSFWTMP) I $E(PSSFWTMP,PSSFWLP)="-" S PSSFWCNT=PSSFWCNT+1
"RTN","PSSDSAPI",105,0)
 I PSSFWRGH'="" F PSSFWLP1=0:0 S PSSFWLP1=$O(^PS(51.1,"APPSJ",PSSFWRGH,PSSFWLP1)) Q:'PSSFWLP1!($G(PSSFWRST))  D
"RTN","PSSDSAPI",106,0)
 .I $P($G(^PS(51.1,PSSFWLP1,0)),"^",5)'="D" Q
"RTN","PSSDSAPI",107,0)
 .S PSSFWKZ1=$P($G(^PS(51.1,PSSFWLP1,0)),"^",2)
"RTN","PSSDSAPI",108,0)
 .S PSSFWKZ5=0 I PSSFWKZ1'="" D
"RTN","PSSDSAPI",109,0)
 ..S PSSFWKZ2=$S($E(PSSFWKZ1,$L(PSSFWKZ1))'="-":PSSFWKZ1_"-",1:PSSFWKZ1)
"RTN","PSSDSAPI",110,0)
 ..I PSSFWKZ2?.(2N1"-")!(PSSFWKZ2?.(4N1"-")) D
"RTN","PSSDSAPI",111,0)
 ...S PSSFWKZ3=0 F PSSFWKZ4=1:1:$L(PSSFWKZ2) I $E(PSSFWKZ2,PSSFWKZ4)="-" S PSSFWKZ5=PSSFWKZ5+1
"RTN","PSSDSAPI",112,0)
 .I $G(PSSFWKZ5) S PSSFWRST=PSSFWKZ5
"RTN","PSSDSAPI",113,0)
 I $G(PSSFWRST) S PSSFWPR1=1 Q
"RTN","PSSDSAPI",114,0)
 I PSSFWRGH'="" F PSSFWLP1=0:0 S PSSFWLP1=$O(^PS(51.1,"APPSJ",PSSFWRGH,PSSFWLP1)) Q:'PSSFWLP1!($G(PSSFWRST))  D
"RTN","PSSDSAPI",115,0)
 .K PSSFWQZ,PSSFWDIV
"RTN","PSSDSAPI",116,0)
 .S PSSFWQZ=$P($G(^PS(51.1,PSSFWLP1,0)),"^",3)
"RTN","PSSDSAPI",117,0)
 .Q:'$G(PSSFWQZ)
"RTN","PSSDSAPI",118,0)
 .S PSSFWDIV=1440/PSSFWQZ I PSSFWDIV'>1 S PSSFWRST=1 Q
"RTN","PSSDSAPI",119,0)
 .I PSSFWDIV?.N S PSSFWRST=PSSFWDIV,PSSFWPR1=1
"RTN","PSSDSAPI",120,0)
 I $G(PSSFWRST) Q
"RTN","PSSDSAPI",121,0)
 I PSSFWPK="O" D DAYOUT Q:$G(PSSFWRST)
"RTN","PSSDSAPI",122,0)
 I PSSFWRGH?1"Q"1N.N1"H" S PSSFWRST=PSSFWRGH,PSSFWPR1=1 Q
"RTN","PSSDSAPI",123,0)
 I $G(PSSFWSC)'["@" S PSSFWRST=1 Q
"RTN","PSSDSAPI",124,0)
 I $E(PSSFWSC,$L(PSSFWSC))="@" S PSSFWRST=1 Q
"RTN","PSSDSAPI",125,0)
 ;Else quit null
"RTN","PSSDSAPI",126,0)
 Q
"RTN","PSSDSAPI",127,0)
 ;
"RTN","PSSDSAPI",128,0)
 ;
"RTN","PSSDSAPI",129,0)
DAYOUT ;Day of week for Outpatient orders
"RTN","PSSDSAPI",130,0)
 ;Ignore admin times in 51,different format
"RTN","PSSDSAPI",131,0)
 ;START +8 PSSMIRPT for looping issue in File 51
"RTN","PSSDSAPI",132,0)
 N PSSFWKZ6,PSSFWKZ7,PSSFWKZ8
"RTN","PSSDSAPI",133,0)
 I PSSFWRGH'="" F PSSFWKZ6=0:0 S PSSFWKZ6=$O(^PS(51,"B",PSSFWRGH,PSSFWKZ6)) Q:'PSSFWKZ6!($G(PSSFWRST))  I '$G(^PS(51,"B",PSSFWRGH,PSSFWKZ6)) D
"RTN","PSSDSAPI",134,0)
 .K PSSFWKZ7,PSSFWKZ8
"RTN","PSSDSAPI",135,0)
 .S PSSFWKZ7=$P($G(^PS(51,PSSFWKZ6,0)),"^",8)
"RTN","PSSDSAPI",136,0)
 .Q:'$G(PSSFWKZ7)
"RTN","PSSDSAPI",137,0)
 .S PSSFWKZ8=1440/PSSFWKZ7 I PSSFWKZ8'>1 S PSSFWRST=1 Q
"RTN","PSSDSAPI",138,0)
 .I PSSFWKZ8?.N S PSSFWRST=PSSFWKZ8,PSSFWPR1=1
"RTN","PSSDSAPI",139,0)
 Q
"RTN","PSSDSAPI",140,0)
 ;
"RTN","PSSDSAPI",141,0)
 ;
"RTN","PSSDSAPI",142,0)
NUMB ;Frequency passed in as a number
"RTN","PSSDSAPI",143,0)
 S PSSFWFLG=0 K PSSFWRST
"RTN","PSSDSAPI",144,0)
 N PSSFWDIS,PSSFWGRT,PSSFWMNT,PSSFWEEK,PSSFWXWK,PSSFWXMN
"RTN","PSSDSAPI",145,0)
 S PSSFWDIS=1440/PSSFWFR I PSSFWDIS?.N S PSSFWFLG=1,PSSFWRST=PSSFWDIS,PSSFWPR1=1 Q
"RTN","PSSDSAPI",146,0)
 I PSSFWDIS'<1 Q
"RTN","PSSDSAPI",147,0)
 S PSSFWGRT=PSSFWFR/1440
"RTN","PSSDSAPI",148,0)
 I PSSFWGRT?.N D  Q
"RTN","PSSDSAPI",149,0)
 .S PSSFWMNT=PSSFWGRT/30 I PSSFWMNT?.N S PSSFWFLG=1,PSSFWRST="Q"_PSSFWMNT_"L",PSSFWPR1=1 Q
"RTN","PSSDSAPI",150,0)
 .S PSSFWEEK=PSSFWGRT/7 I PSSFWEEK?.N S PSSFWFLG=1,PSSFWRST="Q"_PSSFWEEK_"W",PSSFWPR1=1 Q
"RTN","PSSDSAPI",151,0)
 .S PSSFWFLG=1,PSSFWRST="Q"_PSSFWGRT_"D",PSSFWPR1=1 Q
"RTN","PSSDSAPI",152,0)
 I PSSFWFR'>10080 S PSSFWXWK=10080/PSSFWFR I PSSFWXWK?.N S PSSFWFLG=1,PSSFWRST="X"_PSSFWXWK_"W",PSSFWPR1=1 Q
"RTN","PSSDSAPI",153,0)
 S PSSFWXMN=43200/PSSFWFR I PSSFWXMN?.N S PSSFWFLG=1,PSSFWRST="X"_PSSFWXMN_"L",PSSFWPR1=1 Q
"RTN","PSSDSAPI",154,0)
 Q
"RTN","PSSDSAPI",155,0)
 ;
"RTN","PSSDSAPI",156,0)
 ;
"RTN","PSSDSAPI",157,0)
STN ;Standard Logic
"RTN","PSSDSAPI",158,0)
 S PSSFWFLG=0 K PSSFWRST I $G(PSSFWSC)="" Q
"RTN","PSSDSAPI",159,0)
 N PSSFWLP2,PSSFWAA,PSSFWAAD,PSSFWAAM,PSSFWAMN,PSSFWAWK,PSSFWAXL,PSSFWAXW
"RTN","PSSDSAPI",160,0)
 F PSSFWLP2=0:0 S PSSFWLP2=$O(^PS(51.1,"APPSJ",PSSFWSC,PSSFWLP2)) Q:'PSSFWLP2!(PSSFWFLG)  D
"RTN","PSSDSAPI",161,0)
 .K PSSFWAA,PSSFWAAD
"RTN","PSSDSAPI",162,0)
 .S PSSFWAA=$P($G(^PS(51.1,PSSFWLP2,0)),"^",3)
"RTN","PSSDSAPI",163,0)
 .Q:'$G(PSSFWAA)
"RTN","PSSDSAPI",164,0)
 .S PSSFWAAD=1440/PSSFWAA
"RTN","PSSDSAPI",165,0)
 .I PSSFWAAD?.N S PSSFWRST=PSSFWAAD,PSSFWFLG=1 Q
"RTN","PSSDSAPI",166,0)
 .I PSSFWAAD>1 Q
"RTN","PSSDSAPI",167,0)
 .S PSSFWAAM=PSSFWAA/1440
"RTN","PSSDSAPI",168,0)
 .I PSSFWAAM?.N D  Q
"RTN","PSSDSAPI",169,0)
 ..S PSSFWAMN=PSSFWAAM/30 I PSSFWAMN?.N S PSSFWFLG=1,PSSFWRST="Q"_PSSFWAMN_"L" Q
"RTN","PSSDSAPI",170,0)
 ..S PSSFWAWK=PSSFWAAM/7 I PSSFWAWK?.N S PSSFWFLG=1,PSSFWRST="Q"_PSSFWAWK_"W" Q
"RTN","PSSDSAPI",171,0)
 ..S PSSFWFLG=1,PSSFWRST="Q"_PSSFWAAM_"D" Q
"RTN","PSSDSAPI",172,0)
 .I PSSFWAA'>10080 S PSSFWAXW=10080/PSSFWAA I PSSFWAXW?.N S PSSFWFLG=1,PSSFWRST="X"_PSSFWAXW_"W" Q
"RTN","PSSDSAPI",173,0)
 .S PSSFWAXL=43200/PSSFWAA I PSSFWAXL?.N S PSSFWFLG=1,PSSFWRST="X"_PSSFWAXL_"L" Q
"RTN","PSSDSAPI",174,0)
 I PSSFWFLG D DURLS I PSSFWFLG S PSSFWPR1=1 Q
"RTN","PSSDSAPI",175,0)
 I PSSFWSC?1"Q"1N.N1"H" S PSSFWRST=PSSFWSC,PSSFWFLG=1 D DURLS I PSSFWFLG S PSSFWPR1=1
"RTN","PSSDSAPI",176,0)
 Q
"RTN","PSSDSAPI",177,0)
 ;
"RTN","PSSDSAPI",178,0)
 ;
"RTN","PSSDSAPI",179,0)
STNO ;Standard Logic part 2, using File 51, For Outpatient Orders only
"RTN","PSSDSAPI",180,0)
 S PSSFWFLG=0 K PSSFWRST I $G(PSSFWSC)="" Q
"RTN","PSSDSAPI",181,0)
 N PSSFWLP3,PSSFWBA,PSSFWBAD,PSSFWBAM,PSSFWBMN,PSSFWBWK,PSSFWBXL,PSSFWBXW
"RTN","PSSDSAPI",182,0)
 F PSSFWLP3=0:0 S PSSFWLP3=$O(^PS(51,"B",PSSFWSC,PSSFWLP3)) Q:'PSSFWLP3!(PSSFWFLG)  I '$G(^PS(51,"B",PSSFWSC,PSSFWLP3)) D
"RTN","PSSDSAPI",183,0)
 .K PSSFWBA,PSSFWBAD
"RTN","PSSDSAPI",184,0)
 .S PSSFWBA=$P($G(^PS(51,PSSFWLP3,0)),"^",8)
"RTN","PSSDSAPI",185,0)
 .Q:'$G(PSSFWBA)
"RTN","PSSDSAPI",186,0)
 .S PSSFWBAD=1440/PSSFWBA
"RTN","PSSDSAPI",187,0)
 .I PSSFWBAD?.N S PSSFWRST=PSSFWBAD,PSSFWFLG=1 Q
"RTN","PSSDSAPI",188,0)
 .I PSSFWBAD>1 Q
"RTN","PSSDSAPI",189,0)
 .S PSSFWBAM=PSSFWBA/1440
"RTN","PSSDSAPI",190,0)
 .I PSSFWBAM?.N D  Q
"RTN","PSSDSAPI",191,0)
 ..S PSSFWBMN=PSSFWBAM/30 I PSSFWBMN?.N S PSSFWFLG=1,PSSFWRST="Q"_PSSFWBMN_"L" Q
"RTN","PSSDSAPI",192,0)
 ..S PSSFWBWK=PSSFWBAM/7 I PSSFWBWK?.N S PSSFWFLG=1,PSSFWRST="Q"_PSSFWBWK_"W" Q
"RTN","PSSDSAPI",193,0)
 ..S PSSFWFLG=1,PSSFWRST="Q"_PSSFWBAM_"D" Q
"RTN","PSSDSAPI",194,0)
 .I PSSFWBA'>10080 S PSSFWBXW=10080/PSSFWBA I PSSFWBXW?.N S PSSFWFLG=1,PSSFWRST="X"_PSSFWBXW_"W" Q
"RTN","PSSDSAPI",195,0)
 .S PSSFWBXL=43200/PSSFWBA I PSSFWBXL?.N S PSSFWFLG=1,PSSFWRST="X"_PSSFWBXL_"L" Q
"RTN","PSSDSAPI",196,0)
 I PSSFWFLG D DURLS I PSSFWFLG S PSSFWPR1=1 Q
"RTN","PSSDSAPI",197,0)
 I PSSFWSC?1"Q"1N.N1"H" S PSSFWRST=PSSFWSC,PSSFWFLG=1 D DURLS I PSSFWFLG S PSSFWPR1=1
"RTN","PSSDSAPI",198,0)
 Q
"RTN","PSSDSAPI",199,0)
 ;
"RTN","PSSDSAPI",200,0)
 ;
"RTN","PSSDSAPI",201,0)
DS() ; Return 1 if Dose Checks are enabled, return 0 if Dose Checks are not enabled
"RTN","PSSDSAPI",202,0)
 Q 0
"RTN","PSSDSAPI",203,0)
 ;
"RTN","PSSDSAPI",204,0)
 ;
"RTN","PSSDSAPI",205,0)
IV(PSSADFOI) ;Return Additive Frequency default to CPRS, Forum DBIA 5425
"RTN","PSSDSAPI",206,0)
 ;PSSADFOI = File 50.7 Internal Entry Number
"RTN","PSSDSAPI",207,0)
 N PSSADFRS,PSSADFIN,PSSADFLP,PSSADFXX,PSSADFHD,PSSADFNN,PSSADFER,PSSADFCT
"RTN","PSSDSAPI",208,0)
 S PSSADFRS="",(PSSADFXX,PSSADFCT)=0
"RTN","PSSDSAPI",209,0)
 I '$G(PSSADFOI) Q PSSADFRS
"RTN","PSSDSAPI",210,0)
 F PSSADFLP=0:0 S PSSADFLP=$O(^PS(52.6,"AOI",PSSADFOI,PSSADFLP)) Q:'PSSADFLP!(PSSADFXX)  D
"RTN","PSSDSAPI",211,0)
 .S PSSADFIN=$P($G(^PS(52.6,PSSADFLP,"I")),"^")
"RTN","PSSDSAPI",212,0)
 .I PSSADFIN,PSSADFIN'>DT Q
"RTN","PSSDSAPI",213,0)
 .S PSSADFNN=PSSADFLP_","
"RTN","PSSDSAPI",214,0)
 .S PSSADFHD=$$GET1^DIQ(52.6,PSSADFNN,18,"I",,"PSSADFER") I PSSADFHD="" S PSSADFXX=1 Q
"RTN","PSSDSAPI",215,0)
 .I 'PSSADFCT S PSSADFRS=PSSADFHD S PSSADFCT=1 Q
"RTN","PSSDSAPI",216,0)
 .I PSSADFHD'=PSSADFRS S PSSADFXX=1
"RTN","PSSDSAPI",217,0)
 I PSSADFXX S PSSADFRS=""
"RTN","PSSDSAPI",218,0)
 Q PSSADFRS
"RTN","PSSDSAPI",219,0)
 ;
"RTN","PSSDSAPI",220,0)
 ;
"RTN","PSSDSAPI",221,0)
BSA(PSSBSADF) ;
"RTN","PSSDSAPI",222,0)
 I '$G(PSSBSADF) Q "0^0"
"RTN","PSSDSAPI",223,0)
 N DFN,VADM,VAPTYP,VAHOW,VAROOT,VAERR,VA,X1,X2,X,%Y,PSSBSAW1,PSSBSAW2,PSSBSAH1,PSSBSAH2,GMRVSTR,PSSBSAB2,PSSBSAH3
"RTN","PSSDSAPI",224,0)
 S DFN=PSSBSADF
"RTN","PSSDSAPI",225,0)
 S (PSSBSAW2,PSSBSAH2,PSSBSAB2,PSSBSAH3)=0
"RTN","PSSDSAPI",226,0)
 S GMRVSTR="WT" K X D EN6^GMRVUTL
"RTN","PSSDSAPI",227,0)
 S PSSBSAW1=$P(X,"^",8) I PSSBSAW1 S PSSBSAW2=PSSBSAW1/2.2
"RTN","PSSDSAPI",228,0)
 S DFN=PSSBSADF
"RTN","PSSDSAPI",229,0)
 S GMRVSTR="HT" K X D EN6^GMRVUTL
"RTN","PSSDSAPI",230,0)
 S PSSBSAH1=$P(X,"^",8) I PSSBSAH1 S PSSBSAH2=.0254*PSSBSAH1,PSSBSAH3=$J(PSSBSAH1*2.54,6,2)
"RTN","PSSDSAPI",231,0)
 ;Using DuBios formula for BSA calculation, and sending in 2 decimal places
"RTN","PSSDSAPI",232,0)
 I $G(PSSBSAW2),$G(PSSBSAH2) S PSSBSAB2=.20247*(PSSBSAH2**.725)*(PSSBSAW2**.425)
"RTN","PSSDSAPI",233,0)
 ;I $G(PSSBSAW2),$G(PSSBSAH2) S PSSBSAB2=$J((((PSSBSAW2*PSSBSAH2)/3600)**.5),0,2)    Mosteller BSA Formula
"RTN","PSSDSAPI",234,0)
 Q PSSBSAH3_"^"_PSSBSAW2_"^"_PSSBSAB2
"RTN","PSSDSAPI",235,0)
 ;
"RTN","PSSDSAPI",236,0)
 ;
"RTN","PSSDSAPI",237,0)
UNITD(PSSVUTUN) ;Find First DataBank Unit, can't do DIC Lookup because of exact match check
"RTN","PSSDSAPI",238,0)
 ;Returns Null or First DataBank Unit for text passed in
"RTN","PSSDSAPI",239,0)
 ;Not a true conversion, because if Unit contains "/", we convert only piece 1
"RTN","PSSDSAPI",240,0)
 ;The difference between UNIT and UNITD tags is UNITD only returns data if DOse Form Infocator is Set to No
"RTN","PSSDSAPI",241,0)
 N PSSVUTX,PSSVUTZ,PSSVUTAA,PSSVUTFL
"RTN","PSSDSAPI",242,0)
 S PSSVUTFL=0 I $G(PSSVUTUN)="" S PSSVUTZ="" G UNITDX
"RTN","PSSDSAPI",243,0)
 S PSSVUTAA=$$UP^XLFSTR(PSSVUTUN)
"RTN","PSSDSAPI",244,0)
UNITDP ;
"RTN","PSSDSAPI",245,0)
 K PSSVUTZ S PSSVUTX=$O(^PS(51.24,"B",PSSVUTAA,0)) I PSSVUTX,'$$SCREEN^XTID(51.24,.01,PSSVUTX_",") S PSSVUTZ=$P($G(^PS(51.24,PSSVUTX,0)),"^",2) I PSSVUTZ'="",$P($G(^PS(51.24,PSSVUTX,0)),"^",3)=0 G UNITDX
"RTN","PSSDSAPI",246,0)
 K PSSVUTZ S PSSVUTX=$O(^PS(51.24,"C",PSSVUTAA,0)) I PSSVUTX,'$$SCREEN^XTID(51.24,.01,PSSVUTX_",") S PSSVUTZ=$P($G(^PS(51.24,PSSVUTX,0)),"^",2) I PSSVUTZ'="",$P($G(^PS(51.24,PSSVUTX,0)),"^",3)=0 G UNITDX
"RTN","PSSDSAPI",247,0)
 K PSSVUTZ S PSSVUTX=$O(^PS(51.24,"D",PSSVUTAA,0)) I PSSVUTX,'$$SCREEN^XTID(51.24,.01,PSSVUTX_",") S PSSVUTZ=$P($G(^PS(51.24,PSSVUTX,0)),"^",2) I PSSVUTZ'="",$P($G(^PS(51.24,PSSVUTX,0)),"^",3)=0 G UNITDX
"RTN","PSSDSAPI",248,0)
 K PSSVUTZ I 'PSSVUTFL,$G(PSSVUTUN)["/" S PSSVUTFL=1,PSSVUTAA=$P(PSSVUTUN,"/"),PSSVUTAA=$$UP^XLFSTR(PSSVUTAA) G:PSSVUTAA'="" UNITDP
"RTN","PSSDSAPI",249,0)
UNITDX ;
"RTN","PSSDSAPI",250,0)
 Q $G(PSSVUTZ)
"RTN","PSSDSAPI",251,0)
 ;
"RTN","PSSDSAPI",252,0)
 ;
"RTN","PSSDSAPI",253,0)
DURLS ;If Duration is less that 24 hours, make Frequency adjustments if applicable
"RTN","PSSDSAPI",254,0)
 ;Only check Frequencies of a whole number or in the format of Q#H
"RTN","PSSDSAPI",255,0)
 N PSSDK1,PSSDK2,PSSDK3,PSSDK4,PSSDK5,PSSDK6
"RTN","PSSDSAPI",256,0)
 S (PSSDK4,PSSFWPR7)=PSSFWRST
"RTN","PSSDSAPI",257,0)
 ;Re-adjust frequency if needed, leave PSSFWFLG flag set to 1
"RTN","PSSDSAPI",258,0)
 ;If Frequency needs to be Killed, also reset PSSFWFLG Flag back to 0
"RTN","PSSDSAPI",259,0)
 I $G(PSSFWDRL)="" Q
"RTN","PSSDSAPI",260,0)
 S PSSDK1=$$DRT^PSSDSAPD(PSSFWDRL) I PSSDK1'<1440!(PSSDK1'>0) Q
"RTN","PSSDSAPI",261,0)
 S PSSDK2=1440/PSSDK1
"RTN","PSSDSAPI",262,0)
 I PSSDK4?.N D  Q
"RTN","PSSDSAPI",263,0)
 .S PSSDK5=PSSDK4/PSSDK2
"RTN","PSSDSAPI",264,0)
 .I PSSDK5<1 K PSSFWRST S PSSFWFLG=0 Q
"RTN","PSSDSAPI",265,0)
 .S PSSDK6=$J(PSSDK5,0,0)
"RTN","PSSDSAPI",266,0)
 .S PSSFWRST=PSSDK6
"RTN","PSSDSAPI",267,0)
 I PSSDK4?1"Q"1N.N1"H" D  Q
"RTN","PSSDSAPI",268,0)
 .S PSSDK3=$$FRCON^PSSDSAPK(PSSDK4)
"RTN","PSSDSAPI",269,0)
 .S PSSDK5=PSSDK3/PSSDK2
"RTN","PSSDSAPI",270,0)
 .I PSSDK5<1 K PSSFWRST S PSSFWFLG=0 Q
"RTN","PSSDSAPI",271,0)
 .S PSSDK6=$J(PSSDK5,0,0)
"RTN","PSSDSAPI",272,0)
 .S PSSFWRST=PSSDK6
"RTN","PSSDSAPI",273,0)
 Q
"RTN","PSSDSAPK")
0^25^B182688846^n/a
"RTN","PSSDSAPK",1,0)
PSSDSAPK ;BIR/RTR-Miscellaneous APIs for Dose Call ;09/02/09
"RTN","PSSDSAPK",2,0)
 ;;1.0;PHARMACY DATA MANAGEMENT;**117**;9/30/97;Build 101
"RTN","PSSDSAPK",3,0)
 ;
"RTN","PSSDSAPK",4,0)
 ;USE PSSGT
"RTN","PSSDSAPK",5,0)
 ;
"RTN","PSSDSAPK",6,0)
 ;Disregard Package Use and Inactive Date in File 50, so you can still get General DOsing
"RTN","PSSDSAPK",7,0)
 ;Guidelines, they are a priority dhen finding a Drug
"RTN","PSSDSAPK",8,0)
 ;
"RTN","PSSDSAPK",9,0)
 ;Return Dispense Drug for Orderable Item
"RTN","PSSDSAPK",10,0)
 ;PSSGTOI = Orderable Item
"RTN","PSSDSAPK",11,0)
 ;PSSGTPK = Package O for Outpatient, N for Non-VA Med, I for Inpatient
"RTN","PSSDSAPK",12,0)
 ;PSSGTRTE = Med Route Internal Entry Number
"RTN","PSSDSAPK",13,0)
 ;PSSGTAB = String containg A for Additive, B for Solution
"RTN","PSSDSAPK",14,0)
 ;PSSGTRES = result - 0 for No Drug found, or File 50 Internal Entry Number
"RTN","PSSDSAPK",15,0)
DRG(PSSGTOI,PSSGTPK,PSSGTRTE,PSSGTAB) ;
"RTN","PSSDSAPK",16,0)
 I '$G(PSSGTOI) Q 0
"RTN","PSSDSAPK",17,0)
 I $P($G(^PS(50.7,PSSGTOI,0)),"^",9)=1 Q 0
"RTN","PSSDSAPK",18,0)
 I $G(PSSGTPK)'="O",$G(PSSGTPK)'="X",$G(PSSGTPK)'="I" Q 0
"RTN","PSSDSAPK",19,0)
 N PSSGTRES,PSSGTPM,PSSGT1,PSSGT2,PSSGT3,PSSGT4,PSSGT5,PSSGTHL1,PSSGTHL2
"RTN","PSSDSAPK",20,0)
 S PSSGTPM=$S(PSSGTPK="I":"U",1:PSSGTPK)
"RTN","PSSDSAPK",21,0)
 S (PSSGTRES,PSSGTHL1,PSSGTHL2)=0
"RTN","PSSDSAPK",22,0)
 ;Next line, check with Lina, where you only go to DRGIMP if it's an Additive or Base
"RTN","PSSDSAPK",23,0)
 I PSSGTPK="I",$G(PSSGTRTE),$P($G(^PS(51.2,PSSGTRTE,0)),"^",6)=1 I $G(PSSGTAB)["A"!($G(PSSGTAB)["B") G DRGINP
"RTN","PSSDSAPK",24,0)
 F PSSGT1=0:0 S PSSGT1=$O(^PSDRUG("ASP",PSSGTOI,PSSGT1)) Q:'PSSGT1!(PSSGTHL2)  D
"RTN","PSSDSAPK",25,0)
 .S PSSGT3=$P($G(^PSDRUG(PSSGT1,"ND")),"^"),PSSGT4=$P($G(^PSDRUG(PSSGT1,"ND")),"^",3)
"RTN","PSSDSAPK",26,0)
 .I 'PSSGT3!('PSSGT4) Q
"RTN","PSSDSAPK",27,0)
 .S PSSGT5=$P($$PROD0^PSNAPIS(PSSGT3,PSSGT4),"^",7) I +$G(PSSGT5)'>0 Q
"RTN","PSSDSAPK",28,0)
 .I $$EXMT^PSSDSAPI(PSSGT1) Q
"RTN","PSSDSAPK",29,0)
 .S:'PSSGTHL1 PSSGTHL1=PSSGT1
"RTN","PSSDSAPK",30,0)
 .I $P($G(^PSDRUG(PSSGT1,2)),"^",3)'[PSSGTPM Q
"RTN","PSSDSAPK",31,0)
 .S PSSGT2=$P($G(^PSDRUG(PSSGT1,"I")),"^") I PSSGT2,PSSGT2<DT Q
"RTN","PSSDSAPK",32,0)
 .S PSSGTHL2=PSSGT1
"RTN","PSSDSAPK",33,0)
 S PSSGTRES=$S(PSSGTHL2:PSSGTHL2,PSSGTHL1:PSSGTHL1,1:0)
"RTN","PSSDSAPK",34,0)
 Q PSSGTRES
"RTN","PSSDSAPK",35,0)
 ;
"RTN","PSSDSAPK",36,0)
 ;
"RTN","PSSDSAPK",37,0)
DRGINP ;Inpatient Order with IV Route
"RTN","PSSDSAPK",38,0)
 N PSSGT6,PSSGT7,PSSGT8,PSSGTN1,PSSGTN3,PSSGTN4
"RTN","PSSDSAPK",39,0)
 I PSSGTAB["A" D
"RTN","PSSDSAPK",40,0)
 .F PSSGT6=0:0 S PSSGT6=$O(^PS(52.6,"AOI",PSSGTOI,PSSGT6)) Q:'PSSGT6!(PSSGTRES)  D
"RTN","PSSDSAPK",41,0)
 ..S PSSGT7=$P($G(^PS(52.6,PSSGT6,"I")),"^") I PSSGT7,PSSGT7'>DT Q
"RTN","PSSDSAPK",42,0)
 ..S PSSGT8=$P($G(^PS(52.6,PSSGT6,0)),"^",2) I 'PSSGT8 Q
"RTN","PSSDSAPK",43,0)
 ..;Dispense Drug can be inactive, and no need to check package use
"RTN","PSSDSAPK",44,0)
 ..S PSSGTN1=$P($G(^PSDRUG(PSSGT8,"ND")),"^"),PSSGTN3=$P($G(^PSDRUG(PSSGT8,"ND")),"^",3)
"RTN","PSSDSAPK",45,0)
 ..I 'PSSGTN1!('PSSGTN3) Q
"RTN","PSSDSAPK",46,0)
 ..S PSSGTN4=$P($$PROD0^PSNAPIS(PSSGTN1,PSSGTN3),"^",7) I +$G(PSSGTN4)'>0 Q
"RTN","PSSDSAPK",47,0)
 ..I $$EXMT^PSSDSAPI(PSSGT8) Q
"RTN","PSSDSAPK",48,0)
 ..S PSSGTRES=PSSGT8
"RTN","PSSDSAPK",49,0)
 I PSSGTRES Q PSSGTRES
"RTN","PSSDSAPK",50,0)
 I PSSGTAB["B" D
"RTN","PSSDSAPK",51,0)
 .F PSSGT6=0:0 S PSSGT6=$O(^PS(52.7,"AOI",PSSGTOI,PSSGT6)) Q:'PSSGT6!(PSSGTRES)  D
"RTN","PSSDSAPK",52,0)
 ..I $P($G(^PS(52.7,PSSGT6,0)),"^",14)'=1 Q
"RTN","PSSDSAPK",53,0)
 ..S PSSGT7=$P($G(^PS(52.7,PSSGT6,"I")),"^") I PSSGT7,PSSGT7'>DT Q
"RTN","PSSDSAPK",54,0)
 ..S PSSGT8=$P($G(^PS(52.7,PSSGT6,0)),"^",2) I 'PSSGT8 Q
"RTN","PSSDSAPK",55,0)
 ..;Dispense Drug can be inactive, and no need to check package use
"RTN","PSSDSAPK",56,0)
 ..S PSSGTN1=$P($G(^PSDRUG(PSSGT8,"ND")),"^"),PSSGTN3=$P($G(^PSDRUG(PSSGT8,"ND")),"^",3)
"RTN","PSSDSAPK",57,0)
 ..I 'PSSGTN1!('PSSGTN3) Q
"RTN","PSSDSAPK",58,0)
 ..S PSSGTN4=$P($$PROD0^PSNAPIS(PSSGTN1,PSSGTN3),"^",7) I +$G(PSSGTN4)'>0 Q
"RTN","PSSDSAPK",59,0)
 ..I $$EXMT^PSSDSAPI(PSSGT8) Q
"RTN","PSSDSAPK",60,0)
 ..S PSSGTRES=PSSGT8
"RTN","PSSDSAPK",61,0)
 Q PSSGTRES
"RTN","PSSDSAPK",62,0)
 ;
"RTN","PSSDSAPK",63,0)
 ;
"RTN","PSSDSAPK",64,0)
PRE(PSSLGTOI) ;Determine PreMix indication for CPRS for Orderable Item, 1 = PreMix, 0 = Not PreMix
"RTN","PSSDSAPK",65,0)
 ;PSSLGTOI = File 50.7 Internal Entry Number
"RTN","PSSDSAPK",66,0)
 N PSSLGT1,PSSLGT2,PSSLGT3
"RTN","PSSDSAPK",67,0)
 I 'PSSLGTOI Q 0
"RTN","PSSDSAPK",68,0)
 S PSSLGT2=0
"RTN","PSSDSAPK",69,0)
 F PSSLGT1=0:0 S PSSLGT1=$O(^PS(52.7,"AOI",PSSLGTOI,PSSLGT1)) Q:'PSSLGT1!(PSSLGT2)  D
"RTN","PSSDSAPK",70,0)
 .S PSSLGT3=$P($G(^PS(52.7,PSSLGT1,"I")),"^") I PSSLGT3,PSSLGT3'>DT Q
"RTN","PSSDSAPK",71,0)
 .I $P($G(^PS(52.7,PSSLGT1,0)),"^",14)=1 S PSSLGT2=1
"RTN","PSSDSAPK",72,0)
 Q PSSLGT2
"RTN","PSSDSAPK",73,0)
 ;
"RTN","PSSDSAPK",74,0)
 ;
"RTN","PSSDSAPK",75,0)
CONV(PSSCVTVL) ;Convert hours into format for Dose API for Inpatient Medications
"RTN","PSSDSAPK",76,0)
 N PSSCVTRS,PSSCVT1,PSSCVT2,PSSCVT3
"RTN","PSSDSAPK",77,0)
 S PSSCVTRS=""
"RTN","PSSDSAPK",78,0)
 I '$G(PSSCVTVL) Q PSSCVTRS
"RTN","PSSDSAPK",79,0)
 S PSSCVT1=+PSSCVTVL
"RTN","PSSDSAPK",80,0)
 I PSSCVT1<1 S PSSCVT2=PSSCVT1*60 S PSSCVT3=1440/PSSCVT2 S PSSCVTRS=$J(PSSCVT3,0,0) S:PSSCVTRS=24 PSSCVTRS="Q1H" Q PSSCVTRS
"RTN","PSSDSAPK",81,0)
 S PSSCVT2=$J(PSSCVT1,0,0) S PSSCVTRS="Q"_PSSCVT2_"H"
"RTN","PSSDSAPK",82,0)
 Q PSSCVTRS
"RTN","PSSDSAPK",83,0)
 ;
"RTN","PSSDSAPK",84,0)
 ;
"RTN","PSSDSAPK",85,0)
ITEM ;Only Orderable Item passed in, no Dispense Drug
"RTN","PSSDSAPK",86,0)
 ;Test Unit containing "/", because that is dropped off in UNIT PSSDSAPI
"RTN","PSSDSAPK",87,0)
 N PSSDBI1,PSSDBI2,PSSDBI3,PSSDBI4,PSSDBI5,PSSDBI6,PSSDBI7,PSSDBI8,PSSDBI9,PSSDBI91,PSSDBI92,PSSDBI93,PSSDBI94
"RTN","PSSDSAPK",88,0)
 S PSSDBI1=$G(PSSDSLCL)
"RTN","PSSDSAPK",89,0)
 I $L(PSSDBI1)'>0 Q
"RTN","PSSDSAPK",90,0)
 S PSSDBI1=$$UP^XLFSTR(PSSDBI1)
"RTN","PSSDSAPK",91,0)
 ;Strip out commas up until first character that's not a number, or a decimal
"RTN","PSSDSAPK",92,0)
 S PSSDBI6=0 F PSSDBI7=1:1:$L(PSSDBI1) Q:PSSDBI6  S PSSDBI8=$E(PSSDBI1,PSSDBI7) I PSSDBI8'?1N,PSSDBI8'?1".",PSSDBI8'?1"," S PSSDBI6=PSSDBI7
"RTN","PSSDSAPK",93,0)
 I PSSDBI6=1 Q
"RTN","PSSDSAPK",94,0)
 S PSSDBI9=$S('PSSDBI6:$L(PSSDBI1),1:(PSSDBI6-1))
"RTN","PSSDSAPK",95,0)
 S PSSDBI91=$E(PSSDBI1,1,PSSDBI9),PSSDBI92=$E(PSSDBI1,(PSSDBI9+1),$L(PSSDBI1))
"RTN","PSSDSAPK",96,0)
 S PSSDBI93=$TR(PSSDBI91,",","")
"RTN","PSSDSAPK",97,0)
 S PSSDBI1=PSSDBI93_PSSDBI92
"RTN","PSSDSAPK",98,0)
 I $E(PSSDBI1)=0 S PSSDBI1=$E(PSSDBI1,2,$L(PSSDBI1))
"RTN","PSSDSAPK",99,0)
 I $L(PSSDBI1)'>0 Q
"RTN","PSSDSAPK",100,0)
 S PSSDBI2=+PSSDBI1
"RTN","PSSDSAPK",101,0)
 I 'PSSDBI2!($L(PSSDBI2)=$L(PSSDBI1)) Q
"RTN","PSSDSAPK",102,0)
 S PSSDBI3=$E(PSSDBI1,($L(PSSDBI2)+1),$L(PSSDBI1))
"RTN","PSSDSAPK",103,0)
 S PSSDBI4=$S($E(PSSDBI3)=" ":$E(PSSDBI3,2,$L(PSSDBI3)),1:PSSDBI3)
"RTN","PSSDSAPK",104,0)
 I PSSDBI4="" Q
"RTN","PSSDSAPK",105,0)
 I PSSDBIFL S PSSDBI5=$$UNITD^PSSDSAPI(PSSDBI4)
"RTN","PSSDSAPK",106,0)
 I 'PSSDBIFL S PSSDBI5=$$UNIT^PSSDSAPI(PSSDBI4)
"RTN","PSSDSAPK",107,0)
 ;Clone UNit to UNITD in PSSDSAPI and only return if Dose Form indicator is set to No
"RTN","PSSDSAPK",108,0)
 I PSSDBI5="" Q
"RTN","PSSDSAPK",109,0)
 S PSSDBAR("AMN")=PSSDBI2,PSSDBAR("UNIT")=PSSDBI5,PSSDBFAL=1
"RTN","PSSDSAPK",110,0)
 Q
"RTN","PSSDSAPK",111,0)
 ;
"RTN","PSSDSAPK",112,0)
 ;
"RTN","PSSDSAPK",113,0)
FRCON(PSSCFQ1) ;Convert frequency into a number for compleX Dose additions
"RTN","PSSDSAPK",114,0)
 ;cODE FRO q#h, JUST IN CASE
"RTN","PSSDSAPK",115,0)
 ;In PSSSDAPI, IF A SCHEDULE IS PASSED IN AN AS SAY Q3D, WE SAID WE CAN'T ASSUME THE SITE MEANS EVERY 3 DAYS, WE
"RTN","PSSDSAPK",116,0)
 ; ONLY SET frq TO Q3D in this rouitne if we find a ftrequence in PSSDSAPI of 4320
"RTN","PSSDSAPK",117,0)
 ;CHECK ROUNDING
"RTN","PSSDSAPK",118,0)
 ;
"RTN","PSSDSAPK",119,0)
 ;gIVE wARFARING 1MG Q12H, SHOW LINA FDB MESSAGE
"RTN","PSSDSAPK",120,0)
 ;GIVE WARF 100MG Q12H AND 900NG ARON TEST (4320) SHOW HER ROUNDING
"RTN","PSSDSAPK",121,0)
 N PSSCFQRS,PSSCFQ2,PSSCFQ3,PSSCFQ4
"RTN","PSSDSAPK",122,0)
 S PSSCFQRS=0
"RTN","PSSDSAPK",123,0)
 I PSSCFQ1?1N.N!(PSSCFQ1?1N.N1"."1N.N) S PSSCFQRS=PSSCFQ1 Q PSSCFQRS
"RTN","PSSDSAPK",124,0)
 I PSSCFQ1?1"Q"1N.N1"H" D  Q PSSCFQRS
"RTN","PSSDSAPK",125,0)
 .S PSSCFQ2=$E(PSSCFQ1,2,($L(PSSCFQ1)-1))
"RTN","PSSDSAPK",126,0)
 .S PSSCFQ3=60*PSSCFQ2
"RTN","PSSDSAPK",127,0)
 .S PSSCFQRS=1440/PSSCFQ3
"RTN","PSSDSAPK",128,0)
 I PSSCFQ1?1"Q"1N.N1"D" D  Q PSSCFQRS
"RTN","PSSDSAPK",129,0)
 .S PSSCFQ2=$E(PSSCFQ1,2,($L(PSSCFQ1)-1))
"RTN","PSSDSAPK",130,0)
 .S PSSCFQRS=1/PSSCFQ2 I PSSCFQRS["." S PSSCFQRS=$J(PSSCFQRS,0,4)
"RTN","PSSDSAPK",131,0)
 I PSSCFQ1?1"Q"1N.N1"W" D  Q PSSCFQRS
"RTN","PSSDSAPK",132,0)
 .S PSSCFQ2=$E(PSSCFQ1,2,($L(PSSCFQ1)-1))
"RTN","PSSDSAPK",133,0)
 .S PSSCFQ3=7*PSSCFQ2
"RTN","PSSDSAPK",134,0)
 .S PSSCFQ4=PSSCFQ3*1440
"RTN","PSSDSAPK",135,0)
 .S PSSCFQRS=1440/PSSCFQ4 I PSSCFQRS["." S PSSCFQRS=$J(PSSCFQRS,0,4)
"RTN","PSSDSAPK",136,0)
 I PSSCFQ1?1"Q"1N.N1"L" D  Q PSSCFQRS
"RTN","PSSDSAPK",137,0)
 .S PSSCFQ2=$E(PSSCFQ1,2,($L(PSSCFQ1)-1))
"RTN","PSSDSAPK",138,0)
 .S PSSCFQ3=30*PSSCFQ2
"RTN","PSSDSAPK",139,0)
 .S PSSCFQ4=PSSCFQ3*1440
"RTN","PSSDSAPK",140,0)
 .S PSSCFQRS=1440/PSSCFQ4 I PSSCFQRS["." S PSSCFQRS=$J(PSSCFQRS,0,4)
"RTN","PSSDSAPK",141,0)
 I PSSCFQ1?1"X"1N.N1"D" D  Q PSSCFQRS
"RTN","PSSDSAPK",142,0)
 .S PSSCFQ2=$E(PSSCFQ1,2,($L(PSSCFQ1)-1))
"RTN","PSSDSAPK",143,0)
 .S PSSCFQRS=PSSCFQ2 I PSSCFQRS["." S PSSCFQRS=$J(PSSCFQRS,0,4)
"RTN","PSSDSAPK",144,0)
 I PSSCFQ1?1"X"1N.N1"W" D  Q PSSCFQRS
"RTN","PSSDSAPK",145,0)
 .S PSSCFQ2=$E(PSSCFQ1,2,($L(PSSCFQ1)-1))
"RTN","PSSDSAPK",146,0)
 .S PSSCFQRS=PSSCFQ2/7
"RTN","PSSDSAPK",147,0)
 .I PSSCFQRS["." S PSSCFQRS=$J(PSSCFQRS,0,4)
"RTN","PSSDSAPK",148,0)
 I PSSCFQ1?1"X"1N.N1"L" D  Q PSSCFQRS
"RTN","PSSDSAPK",149,0)
 .S PSSCFQ2=$E(PSSCFQ1,2,($L(PSSCFQ1)-1))
"RTN","PSSDSAPK",150,0)
 .S PSSCFQ2=$E(PSSCFQ1,2,($L(PSSCFQ1)-1))
"RTN","PSSDSAPK",151,0)
 .S PSSCFQRS=PSSCFQ2/30
"RTN","PSSDSAPK",152,0)
 .I PSSCFQRS["." S PSSCFQRS=$J(PSSCFQRS,0,4)
"RTN","PSSDSAPK",153,0)
 I PSSCFQ1="QOD" S PSSCFQRS=.5 Q PSSCFQRS
"RTN","PSSDSAPK",154,0)
 Q 0
"RTN","PSSDSAPK",155,0)
 ;
"RTN","PSSDSAPK",156,0)
 ;
"RTN","PSSDSAPK",157,0)
SING ;4B AND 5
"RTN","PSSDSAPK",158,0)
 S $P(PSSDBCAR(PSSDBEB1),"^")="S"
"RTN","PSSDSAPK",159,0)
 S $P(^TMP($J,PSSDBASE,"IN","DOSE",PSSDBEB1),"^",8)=1
"RTN","PSSDSAPK",160,0)
 S $P(^TMP($J,PSSDBASE,"IN","DOSE",PSSDBEB1),"^",9)=1
"RTN","PSSDSAPK",161,0)
 S $P(^TMP($J,PSSDBASE,"IN","DOSE",PSSDBEB1),"^",10)=$P(^TMP($J,PSSDBASE,"IN","DOSE",PSSDBEB1),"^",7)
"RTN","PSSDSAPK",162,0)
 S $P(PSSDBCAR(PSSDBEB1),"^",7)=1
"RTN","PSSDSAPK",163,0)
 Q
"RTN","PSSDSAPK",164,0)
 ;
"RTN","PSSDSAPK",165,0)
 ;
"RTN","PSSDSAPK",166,0)
DOWN ;
"RTN","PSSDSAPK",167,0)
 S:PSSDBASA ^TMP($J,PSSDBASF,"OUT",0)=^TMP($J,PSSDBASE,"OUT",0) S:PSSDBASB ^TMP($J,PSSDBASG,"OUT",0)=^TMP($J,PSSDBASE,"OUT",0)
"RTN","PSSDSAPK",168,0)
 Q
"RTN","PSSDSAPK",169,0)
 ;
"RTN","PSSDSAPK",170,0)
 ;
"RTN","PSSDSAPK",171,0)
BDOSE ;Missing Numeric Dose or Dose Unit, Will do 3A and 3D
"RTN","PSSDSAPK",172,0)
 I 'PSSDBEB3!($P(PSSDBEB2,"^",11)="") D EXCPS^PSSDSAPD(1) D:$D(PSSDBCAZ(PSSDBEB1,"FRQ_ERROR")) EXCPS^PSSDSAPD(2) S PSSDBDGO=1 Q
"RTN","PSSDSAPK",173,0)
 I '$P(PSSDBCAR(PSSDBEB1),"^",5) D EXCPS^PSSDSAPD(1) D:$D(PSSDBCAZ(PSSDBEB1,"FRQ_ERROR")) EXCPS^PSSDSAPD(2) S PSSDBFTX(PSSDBEB1,"FTX_ERROR")="" Q
"RTN","PSSDSAPK",174,0)
 S PSSDBDGO=1
"RTN","PSSDSAPK",175,0)
 D EXCPS^PSSDSAPD(1)
"RTN","PSSDSAPK",176,0)
 I $D(PSSDBCAZ(PSSDBEB1,"FRQ_ERROR")) D EXCPS^PSSDSAPD(2)
"RTN","PSSDSAPK",177,0)
 S $P(^TMP($J,PSSDBASE,"IN","DOSE",PSSDBEB1),"^",5)=1
"RTN","PSSDSAPK",178,0)
 S $P(^TMP($J,PSSDBASE,"IN","DOSE",PSSDBEB1),"^",8)=1
"RTN","PSSDSAPK",179,0)
 S $P(^TMP($J,PSSDBASE,"IN","DOSE",PSSDBEB1),"^",9)=1
"RTN","PSSDSAPK",180,0)
 S $P(^TMP($J,PSSDBASE,"IN","DOSE",PSSDBEB1),"^",7)="DAY"
"RTN","PSSDSAPK",181,0)
 S $P(^TMP($J,PSSDBASE,"IN","DOSE",PSSDBEB1),"^",10)="DAY"
"RTN","PSSDSAPK",182,0)
 S $P(^TMP($J,PSSDBASE,"IN","DOSE",PSSDBEB1),"^",6)=$$DUNIT^PSSDSEXC S PSSDBAR("UNIT")=$P(^TMP($J,PSSDBASE,"IN","DOSE",PSSDBEB1),"^",6) S $P(^TMP($J,PSSDBASE,"IN","DOSE",PSSDBEB1),"^",14)=$$DFM^PSSDSEXC
"RTN","PSSDSAPK",183,0)
 S $P(PSSDBCAR(PSSDBEB1),"^",6)=1 S $P(PSSDBCAR(PSSDBEB1),"^",10)=1
"RTN","PSSDSAPK",184,0)
 Q
"RTN","PSSDSAPK",185,0)
 ;
"RTN","PSSDSAPK",186,0)
 ;
"RTN","PSSDSAPK",187,0)
FTX ;Pull Dosing sequences out of Input for complex orders where Free Text Dosage could not be evaluated
"RTN","PSSDSAPK",188,0)
 N PSSDTX1
"RTN","PSSDSAPK",189,0)
 S PSSDTX1="" F  S PSSDTX1=$O(PSSDBFTX(PSSDTX1)) Q:PSSDTX1=""  D
"RTN","PSSDSAPK",190,0)
 .S PSSDBFTX(PSSDTX1,"NODE1")=$G(^TMP($J,PSSDBASE,"IN","DOSE",PSSDTX1))
"RTN","PSSDSAPK",191,0)
 .S PSSDBFTX(PSSDTX1,"NODE2")=$G(^TMP($J,PSSDBASE,"IN","PROSPECTIVE",PSSDTX1))
"RTN","PSSDSAPK",192,0)
 .K ^TMP($J,PSSDBASE,"IN","DOSE",PSSDTX1)
"RTN","PSSDSAPK",193,0)
 .K ^TMP($J,PSSDBASE,"IN","PROSPECTIVE",PSSDTX1)
"RTN","PSSDSAPK",194,0)
 Q
"RTN","PSSDSAPK",195,0)
 ;
"RTN","PSSDSAPK",196,0)
 ;
"RTN","PSSDSAPK",197,0)
FTXRS ;Reset input globals that were pulled because of invalid dosage
"RTN","PSSDSAPK",198,0)
 N PSSDTX2
"RTN","PSSDSAPK",199,0)
 S PSSDTX2="" F  S PSSDTX2=$O(PSSDBFTX(PSSDTX2)) Q:PSSDTX2=""  D
"RTN","PSSDSAPK",200,0)
 .S ^TMP($J,PSSDBASE,"IN","DOSE",PSSDTX2)=PSSDBFTX(PSSDTX2,"NODE1")
"RTN","PSSDSAPK",201,0)
 .S ^TMP($J,PSSDBASE,"IN","PROSPECTIVE",PSSDTX2)=PSSDBFTX(PSSDTX2,"NODE2")
"RTN","PSSDSAPK",202,0)
 Q
"RTN","PSSDSAPK",203,0)
 ;
"RTN","PSSDSAPK",204,0)
 ;
"RTN","PSSDSAPK",205,0)
ERR1() ;Screen out Daily Dose errors for Single Dose Sequences, unless New Daily Dose created based on previous Dosing sequences
"RTN","PSSDSAPK",206,0)
 ;Called from PSSDSEXC
"RTN","PSSDSAPK",207,0)
 N PSSERS,PSSERSU
"RTN","PSSDSAPK",208,0)
 I $P($G(PSSDBCAR(PSSDWLP)),"^")'="S"!($P($G(PSSDBCAR(PSSDWLP)),"^",11)) Q 0
"RTN","PSSDSAPK",209,0)
 S PSSERS=$G(^TMP($J,PSSDBASE,"OUT","DOSE","ERROR",PSSDWLP,PSSDWL1,"MSG"))
"RTN","PSSDSAPK",210,0)
 S PSSERSU=$$UP^XLFSTR(PSSERS)
"RTN","PSSDSAPK",211,0)
 I PSSERSU'["DAILY DOSE" Q 0
"RTN","PSSDSAPK",212,0)
 Q 1
"RTN","PSSDSAPK",213,0)
 ;
"RTN","PSSDSAPK",214,0)
 ;
"RTN","PSSDSAPK",215,0)
ERR2() ;Screen out Frequency errors if Dosing Sequence flagged for Single Dose only 
"RTN","PSSDSAPK",216,0)
 ;Called from PSSDSEXC
"RTN","PSSDSAPK",217,0)
 N PSSERH,PSSERHU,PSSERHRS
"RTN","PSSDSAPK",218,0)
 S PSSERHRS=0
"RTN","PSSDSAPK",219,0)
 I $P($G(PSSDBCAR(PSSDWE1)),"^",12)!($P($G(PSSDBCAR(PSSDWE1)),"^",5)=0) D
"RTN","PSSDSAPK",220,0)
 .S PSSERH=PSSDWEGC
"RTN","PSSDSAPK",221,0)
 .S PSSERHU=$$UP^XLFSTR(PSSERH)
"RTN","PSSDSAPK",222,0)
 .I PSSERHU["UNDEFINED FREQUENCY"!(PSSERHU["FREQUENCY GREATER") S PSSERHRS=1
"RTN","PSSDSAPK",223,0)
 Q PSSERHRS
"RTN","PSSDSAPK",224,0)
 ;
"RTN","PSSDSAPK",225,0)
 ;
"RTN","PSSDSAPK",226,0)
INFERR ;Infusion Rate Height and Weight Errors
"RTN","PSSDSAPK",227,0)
 I $D(PSSDBFDB(PSSDBLP,"HT_ERROR")) S PSSDBCAZ(PSSDBFDB(PSSDBLP,"RX_NUM"),"HT_ERROR")=""
"RTN","PSSDSAPK",228,0)
 I $D(PSSDBFDB(PSSDBLP,"WT_ERROR")) S PSSDBCAZ(PSSDBFDB(PSSDBLP,"RX_NUM"),"WT_ERROR")=""
"RTN","PSSDSAPK",229,0)
 Q
"RTN","PSSDSAPK",230,0)
 ;
"RTN","PSSDSAPK",231,0)
 ;
"RTN","PSSDSAPK",232,0)
INFERRS ;
"RTN","PSSDSAPK",233,0)
 I '$D(PSSDBCAZ(PSSDBEB1,"HT_ERROR")),'$D(PSSDBCAZ(PSSDBEB1,"WT_ERROR")) Q
"RTN","PSSDSAPK",234,0)
 I $D(PSSDBCAZ(PSSDBEB1,"WT_ERROR")),$D(PSSDBCAZ(PSSDBEB1,"HT_ERROR")) D EXCPS^PSSDSAPD(14) Q
"RTN","PSSDSAPK",235,0)
 I '$D(PSSDBCAZ(PSSDBEB1,"HT_ERROR")) D EXCPS^PSSDSAPD(13) Q
"RTN","PSSDSAPK",236,0)
 D EXCPS^PSSDSAPD(12)
"RTN","PSSDSAPK",237,0)
 Q
"RTN","PSSDSAPK",238,0)
 ;
"RTN","PSSDSAPK",239,0)
 ;
"RTN","PSSDSAPK",240,0)
GENERRX ;Set General Dosing Guidelines exception
"RTN","PSSDSAPK",241,0)
 ;This code, not being used, was moved from PSSDSEXC to have a record of old functionality, in case we need it again
"RTN","PSSDSAPK",242,0)
 Q
"RTN","PSSDSAPK",243,0)
 ;Since this is the last one, if no Exceptions exist for the RX_NUM, just set TMPs 1 and 2, like in third Exception
"RTN","PSSDSAPK",244,0)
 ;paragraph above. If Exeptions do exist, just set the one entry after incrementing, because you are just
"RTN","PSSDSAPK",245,0)
 ;adding to the REASON list
"RTN","PSSDSAPK",246,0)
 N PSSDWF1,PSSDWF2,PSSDWF3,PSSDWF4
"RTN","PSSDSAPK",247,0)
 S PSSDWF2=0 F PSSDWF1=0:0 S PSSDWF1=$O(^TMP($J,PSSDBASE,"OUT","EXCEPTIONS","DOSE",PSSDWE5,PSSDWF1)) Q:'PSSDWF1  S PSSDWF2=PSSDWF1
"RTN","PSSDSAPK",248,0)
 I 'PSSDWF2 D  Q
"RTN","PSSDSAPK",249,0)
 .I PSSDBASA S ^TMP($J,PSSDBASF,"OUT","EXCEPTIONS","DOSE",PSSDWE5,1)="Dosing Checks could not be performed for Drug: "_$P(PSSDBCAR(PSSDWE5),"^",2)
"RTN","PSSDSAPK",250,0)
 .I PSSDBASB S ^TMP($J,PSSDBASG,"OUT",PSSDWE5,"EXCEPTIONS",1)="Dosing Checks could not be performed for Drug: "_$P(PSSDBCAR(PSSDWE5),"^",2)
"RTN","PSSDSAPK",251,0)
 .I PSSDBASA S ^TMP($J,PSSDBASF,"OUT","EXCEPTIONS","DOSE",PSSDWE5,2)="  General Dosing guidelines are not available"
"RTN","PSSDSAPK",252,0)
 .I PSSDBASB S ^TMP($J,PSSDBASG,"OUT",PSSDWE5,"EXCEPTIONS",2)="  General Dosing guidelines are not available"
"RTN","PSSDSAPK",253,0)
 .;Need to set exception documented in ICD-OTHER PIECES STILL NEED SET, WHAT IF A DOSE YOU CREATED)
"RTN","PSSDSAPK",254,0)
 .S ^TMP($J,PSSDBASE,"OUT","EXCEPTIONS","DOSE",PSSDWE5,1)="^^^^^^Dosing Checks could not be performed for Drug: "_$P(PSSDBCAR(PSSDWE5),"^",2)_"^^^"_"General Dosing guidelines are not available"
"RTN","PSSDSAPK",255,0)
 S PSSDWF2=PSSDWF2+1
"RTN","PSSDSAPK",256,0)
 S ^TMP($J,PSSDBASE,"OUT","EXCEPTIONS","DOSE",PSSDWE5,PSSDWF2)="^^^^^^Dosing Checks could not be performed for Drug: "_$P(PSSDBCAR(PSSDWE5),"^",2)_"^^^"_"General Dosing guidelines are not available"
"RTN","PSSDSAPK",257,0)
 I PSSDBASA D
"RTN","PSSDSAPK",258,0)
 .S PSSDWF3=0
"RTN","PSSDSAPK",259,0)
 .F PSSDWF4=0:0 S PSSDWF4=$O(^TMP($J,PSSDBASF,"OUT","EXCEPTIONS","DOSE",PSSDWE5,PSSDWF4)) Q:'PSSDWF4  S PSSDWF3=PSSDWF4
"RTN","PSSDSAPK",260,0)
 .S PSSDWF3=PSSDWF3+1
"RTN","PSSDSAPK",261,0)
 .S ^TMP($J,PSSDBASF,"OUT","EXCEPTIONS","DOSE",PSSDWE5,PSSDWF3)="  General Dosing guidelines are not available"
"RTN","PSSDSAPK",262,0)
 I PSSDBASB D
"RTN","PSSDSAPK",263,0)
 .S PSSDWF3=0
"RTN","PSSDSAPK",264,0)
 .F PSSDWF4=0:0 S PSSDWF4=$O(^TMP($J,PSSDBASG,"OUT",PSSDWE5,"EXCEPTIONS",PSSDWF4)) Q:'PSSDWF4  S PSSDWF3=PSSDWF4
"RTN","PSSDSAPK",265,0)
 .S PSSDWF3=PSSDWF3+1
"RTN","PSSDSAPK",266,0)
 .S ^TMP($J,PSSDBASG,"OUT",PSSDWE5,"EXCEPTIONS",PSSDWF3)="  General DOsing guidelines are not available"
"RTN","PSSDSAPK",267,0)
 Q
"RTN","PSSDSAPK",268,0)
 ;
"RTN","PSSDSAPK",269,0)
 ;
"RTN","PSSDSAPK",270,0)
MTCH() ;Called from PSSDSAPD, looking for Local Possible Dosages Match
"RTN","PSSDSAPK",271,0)
 N PSSDSLTM
"RTN","PSSDSAPK",272,0)
 I $P(PSSDBNOD,"^")=PSSDSLCL Q 1
"RTN","PSSDSAPK",273,0)
 I $E(PSSDSLCL)=0 S PSSDSLTM=$E(PSSDSLCL,2,$L(PSSDSLCL)) I $L(PSSDSLTM)>0,PSSDSLTM=$P(PSSDBNOD,"^") Q 1
"RTN","PSSDSAPK",274,0)
 I $E(PSSDSLCL)'=0 S PSSDSLTM=0_PSSDSLCL I PSSDSLTM=$P(PSSDBNOD,"^") Q 1
"RTN","PSSDSAPK",275,0)
 Q 0
"RTN","PSSDSAPK",276,0)
 ;
"RTN","PSSDSAPK",277,0)
 ;
"RTN","PSSDSAPK",278,0)
DPOP ;Use Pre release logic to find Dose unit and Numeric Dose
"RTN","PSSDSAPK",279,0)
 N PSSDDPOP,PSSDSLPO
"RTN","PSSDSAPK",280,0)
 S PSSDDPOP=$$EN^PSSDSBBP(PSSDBFDB(PSSDBLP,"DRUG_IEN"),PSSDSLCL)
"RTN","PSSDSAPK",281,0)
 I PSSDDPOP S PSSDBAR("AMN")=$P(PSSDDPOP,"^",2),PSSDBAR("UNIT")=$P($G(^PS(51.24,+$P(PSSDDPOP,"^"),0)),"^",2) S PSSDBFAL=1 Q
"RTN","PSSDSAPK",282,0)
 I $E(PSSDSLCL)=0 S PSSDSLPO=$E(PSSDSLCL,2,$L(PSSDSLCL)) I $L(PSSDSLPO)>0 D  I PSSDDPOP S PSSDBAR("AMN")=$P(PSSDDPOP,"^",2),PSSDBAR("UNIT")=$P($G(^PS(51.24,+$P(PSSDDPOP,"^"),0)),"^",2) S PSSDBFAL=1 Q
"RTN","PSSDSAPK",283,0)
 .S PSSDDPOP=$$EN^PSSDSBBP(PSSDBFDB(PSSDBLP,"DRUG_IEN"),PSSDSLPO)
"RTN","PSSDSAPK",284,0)
 I $E(PSSDSLCL)'=0 S PSSDSLPO=0_PSSDSLCL D  I PSSDDPOP S PSSDBAR("AMN")=$P(PSSDDPOP,"^",2),PSSDBAR("UNIT")=$P($G(^PS(51.24,+$P(PSSDDPOP,"^"),0)),"^",2) S PSSDBFAL=1 Q
"RTN","PSSDSAPK",285,0)
 .S PSSDDPOP=$$EN^PSSDSBBP(PSSDBFDB(PSSDBLP,"DRUG_IEN"),PSSDSLPO)
"RTN","PSSDSAPK",286,0)
 Q
"RTN","PSSDSAPK",287,0)
 ;
"RTN","PSSDSAPK",288,0)
 ;
"RTN","PSSDSAPK",289,0)
FRDR ;Check if Duration exists, and is less than Duration of Schedule
"RTN","PSSDSAPK",290,0)
 I $G(PSSDBAR("TYPE"))="SINGLE DOSE" Q
"RTN","PSSDSAPK",291,0)
 N PSSDRSC1,PSSDRSC2,PSSDRSC3,PSSDRSC4,PSSDRSC5
"RTN","PSSDSAPK",292,0)
 S PSSDRSC1=PSSDBFRB(PSSDBFDB(PSSDBLP,"RX_NUM"),"DRATE") I PSSDRSC1="" Q
"RTN","PSSDSAPK",293,0)
 S PSSDRSC3=$$DRT^PSSDSAPD(PSSDRSC1) I PSSDRSC3'>0 Q
"RTN","PSSDSAPK",294,0)
 S PSSDRSC4=1440/PSSDRSC3
"RTN","PSSDSAPK",295,0)
 S PSSDRSC5=$S($P($G(PSSDBAR("FREQZZ")),"^",2)'="":$P(PSSDBAR("FREQZZ"),"^",2),1:PSSDBAR("FREQ"))
"RTN","PSSDSAPK",296,0)
 I PSSDRSC5="" Q
"RTN","PSSDSAPK",297,0)
 S PSSDRSC2=$$FRCON(PSSDRSC5)
"RTN","PSSDSAPK",298,0)
 I PSSDRSC2,PSSDRSC4,PSSDRSC4>PSSDRSC2 D
"RTN","PSSDSAPK",299,0)
 .S PSSDBCAZ(PSSDBFDB(PSSDBLP,"RX_NUM"),"FRQD_ERROR")=""
"RTN","PSSDSAPK",300,0)
 .S PSSDBCAZ(PSSDBFDB(PSSDBLP,"RX_NUM"),"FRQ_ERROR")=""
"RTN","PSSDSAPK",301,0)
 Q
"RTN","PSSDSAPK",302,0)
 ;
"RTN","PSSDSAPK",303,0)
 ;
"RTN","PSSDSAPK",304,0)
NOEXP ;Don't show any exceptions for a drug level error
"RTN","PSSDSAPK",305,0)
 N PSSNOE1,PSSNOE2
"RTN","PSSDSAPK",306,0)
 F PSSNOE1=0:0 S PSSNOE1=$O(^TMP($J,PSSDBASE,"OUT","EXCEPTIONS","DOSE",PSSDWE1,PSSNOE1)) Q:'PSSNOE1!($D(PSSNOE9(PSSDWE1)))  D
"RTN","PSSDSAPK",307,0)
 .S PSSNOE2=$P($G(^TMP($J,PSSDBASE,"OUT","EXCEPTIONS","DOSE",PSSDWE1,PSSNOE1)),"^",10) I PSSNOE2="" S PSSNOE9(PSSDWE1)="" D NOEXPG Q
"RTN","PSSDSAPK",308,0)
 .I PSSNOE2["GCNSEQNO"!(PSSNOE2["Drug not matched to NDF")!(PSSNOE2["No active IV Additive/Solution marked for IV fluid order entry") S PSSNOE9(PSSDWE1)="" D NOEXPS
"RTN","PSSDSAPK",309,0)
 Q
"RTN","PSSDSAPK",310,0)
 ;
"RTN","PSSDSAPK",311,0)
 ;
"RTN","PSSDSAPK",312,0)
NOEXPS ;Set Drug level error
"RTN","PSSDSAPK",313,0)
 I PSSDBASA D
"RTN","PSSDSAPK",314,0)
 .S ^TMP($J,PSSDBASF,"OUT","EXCEPTIONS","DOSE",PSSDWE1,1)=$P($G(^TMP($J,PSSDBASE,"OUT","EXCEPTIONS","DOSE",PSSDWE1,PSSNOE1)),"^",7)
"RTN","PSSDSAPK",315,0)
 .S ^TMP($J,PSSDBASF,"OUT","EXCEPTIONS","DOSE",PSSDWE1,2)="  Reason(s): "_$P($G(^TMP($J,PSSDBASE,"OUT","EXCEPTIONS","DOSE",PSSDWE1,PSSNOE1)),"^",10)
"RTN","PSSDSAPK",316,0)
 I PSSDBASB D
"RTN","PSSDSAPK",317,0)
 .S ^TMP($J,PSSDBASG,"OUT",PSSDWE1,"EXCEPTIONS",1)=$P($G(^TMP($J,PSSDBASE,"OUT","EXCEPTIONS","DOSE",PSSDWE1,PSSNOE1)),"^",7)
"RTN","PSSDSAPK",318,0)
 .S ^TMP($J,PSSDBASG,"OUT",PSSDWE1,"EXCEPTIONS",2)="  Reason(s): "_$P($G(^TMP($J,PSSDBASE,"OUT","EXCEPTIONS","DOSE",PSSDWE1,PSSNOE1)),"^",10)
"RTN","PSSDSAPK",319,0)
 Q
"RTN","PSSDSAPK",320,0)
 ;
"RTN","PSSDSAPK",321,0)
 ;
"RTN","PSSDSAPK",322,0)
NOEXPG ;Set GCNSEQNO exception
"RTN","PSSDSAPK",323,0)
 I PSSDBASA D
"RTN","PSSDSAPK",324,0)
 .S ^TMP($J,PSSDBASF,"OUT","EXCEPTIONS","DOSE",PSSDWE1,1)=$P($G(^TMP($J,PSSDBASE,"OUT","EXCEPTIONS","DOSE",PSSDWE1,PSSNOE1)),"^",7)
"RTN","PSSDSAPK",325,0)
 I PSSDBASB D
"RTN","PSSDSAPK",326,0)
 .S ^TMP($J,PSSDBASG,"OUT",PSSDWE1,"EXCEPTIONS",1)=$P($G(^TMP($J,PSSDBASE,"OUT","EXCEPTIONS","DOSE",PSSDWE1,PSSNOE1)),"^",7)
"RTN","PSSDSAPK",327,0)
 Q
"RTN","PSSDSAPL")
0^26^B89599463^n/a
"RTN","PSSDSAPL",1,0)
PSSDSAPL ;BIR/RTR-Free Text Dosage Logic ;06/21/10
"RTN","PSSDSAPL",2,0)
 ;;1.0;PHARMACY DATA MANAGEMENT;**117**;9/30/97;Build 101
"RTN","PSSDSAPL",3,0)
 ;
"RTN","PSSDSAPL",4,0)
 ;
"RTN","PSSDSAPL",5,0)
NUM ;Determine Dose Amount and Dose Unit from Free Text Dose
"RTN","PSSDSAPL",6,0)
 ;
"RTN","PSSDSAPL",7,0)
 ;PSSDBV9 = Free Text Dosage
"RTN","PSSDSAPL",8,0)
 ;
"RTN","PSSDSAPL",9,0)
 N PSSDBV9
"RTN","PSSDSAPL",10,0)
 S PSSDBV9=$G(PSSDSLCL)
"RTN","PSSDSAPL",11,0)
 I $L(PSSDBV9)'>0 Q
"RTN","PSSDSAPL",12,0)
 S PSSDBV9=$$UP^XLFSTR(PSSDBV9)
"RTN","PSSDSAPL",13,0)
 ;
"RTN","PSSDSAPL",14,0)
 ;
"RTN","PSSDSAPL",15,0)
 N PSSDBV1,PSSDBV2,PSSDBV3,PSSDBV7,PSSDBV8
"RTN","PSSDSAPL",16,0)
 S PSSDBV3=""
"RTN","PSSDSAPL",17,0)
 S PSSDBV8=$$NUMF I PSSDBV8 S PSSDBAR("AMN")=PSSDBV8,PSSDBAR("UNIT")=PSSDBV3 Q
"RTN","PSSDSAPL",18,0)
 ;
"RTN","PSSDSAPL",19,0)
 ;
"RTN","PSSDSAPL",20,0)
 I $E(PSSDBV9)="." S PSSDBV9="0"_PSSDBV9 S PSSDBV8=$$NUMF I PSSDBV8 S PSSDBAR("AMN")=PSSDBV8,PSSDBAR("UNIT")=PSSDBV3 Q
"RTN","PSSDSAPL",21,0)
 I $E(PSSDBV9)=0 S PSSDBV9=$E(PSSDBV9,2,$L(PSSDBV9)) S PSSDBV8=$$NUMF I PSSDBV8 S PSSDBAR("AMN")=PSSDBV8,PSSDBAR("UNIT")=PSSDBV3
"RTN","PSSDSAPL",22,0)
 Q
"RTN","PSSDSAPL",23,0)
 ;
"RTN","PSSDSAPL",24,0)
 ;
"RTN","PSSDSAPL",25,0)
NUMF() ;
"RTN","PSSDSAPL",26,0)
 S PSSDBV1=$E(PSSDBV9,1,11) I PSSDBV1="ONE FOURTH ",$$7 S PSSDBV2=$E(PSSDBV9,12,$L(PSSDBV9)) I $$8 Q .25
"RTN","PSSDSAPL",27,0)
 S PSSDBV1=$E(PSSDBV9,1,11) I PSSDBV1="ONE-FOURTH ",$$7 S PSSDBV2=$E(PSSDBV9,12,$L(PSSDBV9)) I $$8 Q .25
"RTN","PSSDSAPL",28,0)
 S PSSDBV1=$E(PSSDBV9,1,4) I PSSDBV1="1/4 ",$$7 S PSSDBV2=$E(PSSDBV9,5,$L(PSSDBV9)) I $$8 Q .25
"RTN","PSSDSAPL",29,0)
 S PSSDBV1=$E(PSSDBV9,1,5) I PSSDBV1="0.25 ",$$7 S PSSDBV2=$E(PSSDBV9,6,$L(PSSDBV9)) I $$8 Q .25
"RTN","PSSDSAPL",30,0)
 ;
"RTN","PSSDSAPL",31,0)
 S PSSDBV1=$E(PSSDBV9,1,10) I PSSDBV1="ONE THIRD ",$$7 S PSSDBV2=$E(PSSDBV9,11,$L(PSSDBV9)) I $$8 Q .33
"RTN","PSSDSAPL",32,0)
 S PSSDBV1=$E(PSSDBV9,1,10) I PSSDBV1="ONE-THIRD ",$$7 S PSSDBV2=$E(PSSDBV9,11,$L(PSSDBV9)) I $$8 Q .33
"RTN","PSSDSAPL",33,0)
 S PSSDBV1=$E(PSSDBV9,1,4) I PSSDBV1="1/3 ",$$7 S PSSDBV2=$E(PSSDBV9,5,$L(PSSDBV9)) I $$8 Q .33
"RTN","PSSDSAPL",34,0)
 S PSSDBV1=$E(PSSDBV9,1,5) I PSSDBV1="0.33 ",$$7 S PSSDBV2=$E(PSSDBV9,6,$L(PSSDBV9)) I $$8 Q .33
"RTN","PSSDSAPL",35,0)
 ;
"RTN","PSSDSAPL",36,0)
 S PSSDBV1=$E(PSSDBV9,1,9) I PSSDBV1="ONE HALF ",$$7 S PSSDBV2=$E(PSSDBV9,10,$L(PSSDBV9)) I $$8 Q .5
"RTN","PSSDSAPL",37,0)
 S PSSDBV1=$E(PSSDBV9,1,9) I PSSDBV1="ONE-HALF ",$$7 S PSSDBV2=$E(PSSDBV9,10,$L(PSSDBV9)) I $$8 Q .5
"RTN","PSSDSAPL",38,0)
 S PSSDBV1=$E(PSSDBV9,1,4) I PSSDBV1="1/2 ",$$7 S PSSDBV2=$E(PSSDBV9,5,$L(PSSDBV9)) I $$8 Q .5
"RTN","PSSDSAPL",39,0)
 S PSSDBV1=$E(PSSDBV9,1,4) I PSSDBV1="0.5 ",$$7 S PSSDBV2=$E(PSSDBV9,5,$L(PSSDBV9)) I $$8 Q .5
"RTN","PSSDSAPL",40,0)
 ;
"RTN","PSSDSAPL",41,0)
 S PSSDBV1=$E(PSSDBV9,1,6) I PSSDBV1="0.5-1 ",$$7 S PSSDBV2=$E(PSSDBV9,7,$L(PSSQDBV9)) I $$8 Q 1
"RTN","PSSDSAPL",42,0)
 S PSSDBV1=$E(PSSDBV9,1,8) I PSSDBV1="0.5 - 1 ",$$7 S PSSDBV2=$E(PSSDBV9,9,$L(PSSDBV9)) I $$8 Q 1
"RTN","PSSDSAPL",43,0)
 S PSSDBV1=$E(PSSDBV9,1,9) I PSSDBV1="0.5 TO 1 ",$$7 S PSSDBV2=$E(PSSDBV9,10,$L(PSSDBV9)) I $$8 Q 1
"RTN","PSSDSAPL",44,0)
 S PSSDBV1=$E(PSSDBV9,1,9) I PSSDBV1="0.5 OR 1 ",$$7 S PSSDBV2=$E(PSSDBV9,10,$L(PSSDBV9)) I $$8 Q 1
"RTN","PSSDSAPL",45,0)
 S PSSDBV1=$E(PSSDBV9,1,6) I PSSDBV1="1/2-1 ",$$7 S PSSDBV2=$E(PSSDBV9,7,$L(PSSDBV9)) I $$8 Q 1
"RTN","PSSDSAPL",46,0)
 S PSSDBV1=$E(PSSDBV9,1,8) I PSSDBV1="1/2 - 1 ",$$7 S PSSDBV2=$E(PSSDBV9,9,$L(PSSDBV9)) I $$8 Q 1
"RTN","PSSDSAPL",47,0)
 S PSSDBV1=$E(PSSDBV9,1,9) I PSSDBV1="1/2 TO 1 ",$$7 S PSSDBV2=$E(PSSDBV9,10,$L(PSSDBV9)) I $$8 Q 1
"RTN","PSSDSAPL",48,0)
 S PSSDBV1=$E(PSSDBV9,1,9) I PSSDBV1="1/2 OR 1 ",$$7 S PSSDBV2=$E(PSSDBV9,10,$L(PSSDBV9)) I $$8 Q 1
"RTN","PSSDSAPL",49,0)
 S PSSDBV1=$E(PSSDBV9,1,16) I PSSDBV1="ONE-HALF TO ONE ",$$7 S PSSDBV2=$E(PSSDBV9,17,$L(PSSDBV9)) I $$8 Q 1
"RTN","PSSDSAPL",50,0)
 S PSSDBV1=$E(PSSDBV9,1,18) I PSSDBV1="ONE - HALF TO ONE ",$$7 S PSSDBV2=$E(PSSDBV9,19,$L(PSSDBV9)) I $$8 Q 1
"RTN","PSSDSAPL",51,0)
 S PSSDBV1=$E(PSSDBV9,1,16) I PSSDBV1="ONE HALF TO ONE ",$$7 S PSSDBV2=$E(PSSDBV9,17,$L(PSSDBV9)) I $$8 Q 1
"RTN","PSSDSAPL",52,0)
 S PSSDBV1=$E(PSSDBV9,1,16) I PSSDBV1="ONE-HALF OR ONE ",$$7 S PSSDBV2=$E(PSSDBV9,17,$L(PSSDBV9)) I $$8 Q 1
"RTN","PSSDSAPL",53,0)
 S PSSDBV1=$E(PSSDBV9,1,18) I PSSDBV1="ONE - HALF OR ONE ",$$7 S PSSDBV2=$E(PSSDBV9,19,$L(PSSDBV9)) I $$8 Q 1
"RTN","PSSDSAPL",54,0)
 S PSSDBV1=$E(PSSDBV9,1,16) I PSSDBV1="ONE HALF OR ONE ",$$7 S PSSDBV2=$E(PSSDBV9,17,$L(PSSDBV9)) I $$8 Q 1
"RTN","PSSDSAPL",55,0)
 ;
"RTN","PSSDSAPL",56,0)
 S PSSDBV1=$E(PSSDBV9,1,10) I PSSDBV1="1 AND 1/4 ",$$7 S PSSDBV2=$E(PSSDBV9,11,$L(PSSDBV9)) I $$8 Q 1.25
"RTN","PSSDSAPL",57,0)
 S PSSDBV1=$E(PSSDBV9,1,19) I PSSDBV1="ONE AND ONE FOURTH ",$$7 S PSSDBV2=$E(PSSDBV9,20,$L(PSSDBV9)) I $$8 Q 1.25
"RTN","PSSDSAPL",58,0)
 S PSSDBV1=$E(PSSDBV9,1,19) I PSSDBV1="ONE AND ONE-FOURTH ",$$7 S PSSDBV2=$E(PSSDBV9,20,$L(PSSDBV9)) I $$8 Q 1.25
"RTN","PSSDSAPL",59,0)
 S PSSDBV1=$E(PSSDBV9,1,17) I PSSDBV1="1 AND ONE FOURTH ",$$7 S PSSDBV2=$E(PSSDBV9,18,$L(PSSDBV9)) I $$8 Q 1.25
"RTN","PSSDSAPL",60,0)
 S PSSDBV1=$E(PSSDBV9,1,17) I PSSDBV1="1 AND ONE-FOURTH ",$$7 S PSSDBV2=$E(PSSDBV9,18,$L(PSSDBV9)) I $$8 Q 1.25
"RTN","PSSDSAPL",61,0)
 S PSSDBV1=$E(PSSDBV9,1,12) I PSSDBV1="ONE AND 1/4 ",$$7 S PSSDBV2=$E(PSSDBV9,13,$L(PSSDBV9)) I $$8 Q 1.25
"RTN","PSSDSAPL",62,0)
 ;
"RTN","PSSDSAPL",63,0)
 S PSSDBV1=$E(PSSDBV9,1,10) I PSSDBV1="1 AND 1/3 ",$$7 S PSSDBV2=$E(PSSDBV9,11,$L(PSSDBV9)) I $$8 Q 1.33
"RTN","PSSDSAPL",64,0)
 S PSSDBV1=$E(PSSDBV9,1,18) I PSSDBV1="ONE AND ONE THIRD ",$$7 S PSSDBV2=$E(PSSDBV9,19,$L(PSSDBV9)) I $$8 Q 1.33
"RTN","PSSDSAPL",65,0)
 S PSSDBV1=$E(PSSDBV9,1,18) I PSSDBV1="ONE AND ONE-THIRD ",$$7 S PSSDBV2=$E(PSSDBV9,19,$L(PSSDBV9)) I $$8 Q 1.33
"RTN","PSSDSAPL",66,0)
 S PSSDBV1=$E(PSSDBV9,1,16) I PSSDBV1="1 AND ONE THIRD ",$$7 S PSSDBV2=$E(PSSDBV9,17,$L(PSSDBV9)) I $$8 Q 1.33
"RTN","PSSDSAPL",67,0)
 S PSSDBV1=$E(PSSDBV9,1,16) I PSSDBV1="1 AND ONE-THIRD ",$$7 S PSSDBV2=$E(PSSDBV9,17,$L(PSSDBV9)) I $$8 Q 1.33
"RTN","PSSDSAPL",68,0)
 S PSSDBV1=$E(PSSDBV9,1,12) I PSSDBV1="ONE AND 1/3 ",$$7 S PSSDBV2=$E(PSSDBV9,13,$L(PSSDBV9)) I $$8 Q 1.33
"RTN","PSSDSAPL",69,0)
 ;
"RTN","PSSDSAPL",70,0)
 S PSSDBV1=$E(PSSDBV9,1,10) I PSSDBV1="1 AND 1/2 ",$$7 S PSSDBV2=$E(PSSDBV9,11,$L(PSSDBV9)) I $$8 Q 1.5
"RTN","PSSDSAPL",71,0)
 S PSSDBV1=$E(PSSDBV9,1,17) I PSSDBV1="ONE AND ONE HALF ",$$7 S PSSDBV2=$E(PSSDBV9,18,$L(PSSDBV9)) I $$8 Q 1.5
"RTN","PSSDSAPL",72,0)
 S PSSDBV1=$E(PSSDBV9,1,17) I PSSDBV1="ONE AND ONE-HALF ",$$7 S PSSDBV2=$E(PSSDBV9,18,$L(PSSDBV9)) I $$8 Q 1.5
"RTN","PSSDSAPL",73,0)
 S PSSDBV1=$E(PSSDBV9,1,15) I PSSDBV1="1 AND ONE HALF ",$$7 S PSSDBV2=$E(PSSDBV9,16,$L(PSSDBV9)) I $$8 Q 1.5
"RTN","PSSDSAPL",74,0)
 S PSSDBV1=$E(PSSDBV9,1,15) I PSSDBV1="1 AND ONE-HALF ",$$7 S PSSDBV2=$E(PSSDBV9,16,$L(PSSDBV9)) I $$8 Q 1.5
"RTN","PSSDSAPL",75,0)
 S PSSDBV1=$E(PSSDBV9,1,12) I PSSDBV1="ONE AND 1/2 ",$$7 S PSSDBV2=$E(PSSDBV9,13,$L(PSSDBV9)) I $$8 Q 1.5
"RTN","PSSDSAPL",76,0)
 ;
"RTN","PSSDSAPL",77,0)
 S PSSDBV1=$E(PSSDBV9,1,4) I PSSDBV1="1-2 ",$$7 S PSSDBV2=$E(PSSDBV9,5,$L(PSSDBV9)) I $$8 Q 2
"RTN","PSSDSAPL",78,0)
 S PSSDBV1=$E(PSSDBV9,1,6) I PSSDBV1="1 - 2 ",$$7 S PSSDBV2=$E(PSSDBV9,7,$L(PSSDBV9)) I $$8 Q 2
"RTN","PSSDSAPL",79,0)
 S PSSDBV1=$E(PSSDBV9,1,7) I PSSDBV1="1 TO 2 ",$$7 S PSSDBV2=$E(PSSDBV9,8,$L(PSSDBV9)) I $$8 Q 2
"RTN","PSSDSAPL",80,0)
 S PSSDBV1=$E(PSSDBV9,1,7) I PSSDBV1="1 OR 2 ",$$7 S PSSDBV2=$E(PSSDBV9,8,$L(PSSDBV9)) I $$8 Q 2
"RTN","PSSDSAPL",81,0)
 S PSSDBV1=$E(PSSDBV9,1,11) I PSSDBV1="ONE TO TWO ",$$7 S PSSDBV2=$E(PSSDBV9,12,$L(PSSDBV9)) I $$8 Q 2
"RTN","PSSDSAPL",82,0)
 S PSSDBV1=$E(PSSDBV9,1,11) I PSSDBV1="ONE OR TWO ",$$7 S PSSDBV2=$E(PSSDBV9,12,$L(PSSDBV9)) I $$8 Q 2
"RTN","PSSDSAPL",83,0)
 S PSSDBV1=$E(PSSDBV9,1,8) I PSSDBV1="ONE-TWO ",$$7 S PSSDBV2=$E(PSSDBV9,9,$L(PSSDBV9)) I $$8 Q 2
"RTN","PSSDSAPL",84,0)
 S PSSDBV1=$E(PSSDBV9,1,10) I PSSDBV1="ONE - TWO ",$$7 S PSSDBV2=$E(PSSDBV9,11,$L(PSSDBV9)) I $$8 Q 2
"RTN","PSSDSAPL",85,0)
 ;
"RTN","PSSDSAPL",86,0)
 S PSSDBV1=$E(PSSDBV9,1,2) I PSSDBV1="2 ",$$7 S PSSDBV2=$E(PSSDBV9,3,$L(PSSDBV9)) I $$8 Q 2
"RTN","PSSDSAPL",87,0)
 S PSSDBV1=$E(PSSDBV9,1,4) I PSSDBV1="TWO ",$$7 S PSSDBV2=$E(PSSDBV9,5,$L(PSSDBV9)) I $$8 Q 2
"RTN","PSSDSAPL",88,0)
 ;
"RTN","PSSDSAPL",89,0)
 S PSSDBV1=$E(PSSDBV9,1,10) I PSSDBV1="2 AND 1/4 ",$$7 S PSSDBV2=$E(PSSDBV9,11,$L(PSSDBV9)) I $$8 Q 2.25
"RTN","PSSDSAPL",90,0)
 S PSSDBV1=$E(PSSDBV9,1,19) I PSSDBV1="TWO AND ONE FOURTH ",$$7 S PSSDBV2=$E(PSSDBV9,20,$L(PSSDBV9)) I $$8 Q 2.25
"RTN","PSSDSAPL",91,0)
 S PSSDBV1=$E(PSSDBV9,1,19) I PSSDBV1="TWO AND ONE-FOURTH ",$$7 S PSSDBV2=$E(PSSDBV9,20,$L(PSSDBV9)) I $$8 Q 2.25
"RTN","PSSDSAPL",92,0)
 S PSSDBV1=$E(PSSDBV9,1,17) I PSSDBV1="2 AND ONE FOURTH ",$$7 S PSSDBV2=$E(PSSDBV9,18,$L(PSSDBV9)) I $$8 Q 2.25
"RTN","PSSDSAPL",93,0)
 S PSSDBV1=$E(PSSDBV9,1,17) I PSSDBV1="2 AND ONE-FOURTH ",$$7 S PSSDBV2=$E(PSSDBV9,18,$L(PSSDBV9)) I $$8 Q 2.25
"RTN","PSSDSAPL",94,0)
 S PSSDBV1=$E(PSSDBV9,1,12) I PSSDBV1="TWO AND 1/4 ",$$7 S PSSDBV2=$E(PSSDBV9,13,$L(PSSDBV9)) I $$8 Q 2.25
"RTN","PSSDSAPL",95,0)
 ;
"RTN","PSSDSAPL",96,0)
 S PSSDBV1=$E(PSSDBV9,1,10) I PSSDBV1="2 AND 1/3 ",$$7 S PSSDBV2=$E(PSSDBV9,11,$L(PSSDBV9)) I $$8 Q 2.33
"RTN","PSSDSAPL",97,0)
 S PSSDBV1=$E(PSSDBV9,1,18) I PSSDBV1="TWO AND ONE THIRD ",$$7 S PSSDBV2=$E(PSSDBV9,19,$L(PSSDBV9)) I $$8 Q 2.33
"RTN","PSSDSAPL",98,0)
 S PSSDBV1=$E(PSSDBV9,1,18) I PSSDBV1="TWO AND ONE-THIRD ",$$7 S PSSDBV2=$E(PSSDBV9,19,$L(PSSDBV9)) I $$8 Q 2.33
"RTN","PSSDSAPL",99,0)
 S PSSDBV1=$E(PSSDBV9,1,16) I PSSDBV1="2 AND ONE THIRD ",$$7 S PSSDBV2=$E(PSSDBV9,17,$L(PSSDBV9)) I $$8 Q 2.33
"RTN","PSSDSAPL",100,0)
 S PSSDBV1=$E(PSSDBV9,1,16) I PSSDBV1="2 AND ONE-THIRD ",$$7 S PSSDBV2=$E(PSSDBV9,17,$L(PSSDBV9)) I $$8 Q 2.33
"RTN","PSSDSAPL",101,0)
 S PSSDBV1=$E(PSSDBV9,1,12) I PSSDBV1="TWO AND 1/3 ",$$7 S PSSDBV2=$E(PSSDBV9,13,$L(PSSDBV9)) I $$8 Q 2.33
"RTN","PSSDSAPL",102,0)
 ;
"RTN","PSSDSAPL",103,0)
 S PSSDBV1=$E(PSSDBV9,1,10) I PSSDBV1="2 AND 1/2 ",$$7 S PSSDBV2=$E(PSSDBV9,11,$L(PSSDBV9)) I $$8 Q 2.5
"RTN","PSSDSAPL",104,0)
 S PSSDBV1=$E(PSSDBV9,1,17) I PSSDBV1="TWO AND ONE HALF ",$$7 S PSSDBV2=$E(PSSDBV9,18,$L(PSSDBV9)) I $$8 Q 2.5
"RTN","PSSDSAPL",105,0)
 S PSSDBV1=$E(PSSDBV9,1,17) I PSSDBV1="TWO AND ONE-HALF ",$$7 S PSSDBV2=$E(PSSDBV9,18,$L(PSSDBV9)) I $$8 Q 2.5
"RTN","PSSDSAPL",106,0)
 S PSSDBV1=$E(PSSDBV9,1,15) I PSSDBV1="2 AND ONE HALF ",$$7 S PSSDBV2=$E(PSSDBV9,16,$L(PSSDBV9)) I $$8 Q 2.5
"RTN","PSSDSAPL",107,0)
 S PSSDBV1=$E(PSSDBV9,1,15) I PSSDBV1="2 AND ONE-HALF ",$$7 S PSSDBV2=$E(PSSDBV9,16,$L(PSSDBV9)) I $$8 Q 2.5
"RTN","PSSDSAPL",108,0)
 S PSSDBV1=$E(PSSDBV9,1,12) I PSSDBV1="TWO AND 1/2 ",$$7 S PSSDBV2=$E(PSSDBV9,13,$L(PSSDBV9)) I $$8 Q 2.5
"RTN","PSSDSAPL",109,0)
 ;
"RTN","PSSDSAPL",110,0)
 S PSSDBV1=$E(PSSDBV9,1,4) I PSSDBV1="2-3 ",$$7 S PSSDBV2=$E(PSSDBV9,5,$L(PSSDBV9)) I $$8 Q 3
"RTN","PSSDSAPL",111,0)
 S PSSDBV1=$E(PSSDBV9,1,6) I PSSDBV1="2 - 3 ",$$7 S PSSDBV2=$E(PSSDBV9,7,$L(PSSDBV9)) I $$8 Q 3
"RTN","PSSDSAPL",112,0)
 S PSSDBV1=$E(PSSDBV9,1,7) I PSSDBV1="2 TO 3 ",$$7 S PSSDBV2=$E(PSSDBV9,8,$L(PSSDBV9)) I $$8 Q 3
"RTN","PSSDSAPL",113,0)
 S PSSDBV1=$E(PSSDBV9,1,7) I PSSDBV1="2 OR 3 ",$$7 S PSSDBV2=$E(PSSDBV9,8,$L(PSSDBV9)) I $$8 Q 3
"RTN","PSSDSAPL",114,0)
 S PSSDBV1=$E(PSSDBV9,1,13) I PSSDBV1="TWO TO THREE ",$$7 S PSSDBV2=$E(PSSDBV9,14,$L(PSSDBV9)) I $$8 Q 3
"RTN","PSSDSAPL",115,0)
 S PSSDBV1=$E(PSSDBV9,1,13) I PSSDBV1="TWO OR THREE ",$$7 S PSSDBV2=$E(PSSDBV9,14,$L(PSSDBV9)) I $$8 Q 3
"RTN","PSSDSAPL",116,0)
 S PSSDBV1=$E(PSSDBV9,1,10) I PSSDBV1="TWO-THREE ",$$7 S PSSDBV2=$E(PSSDBV9,11,$L(PSSDBV9)) I $$8 Q 3
"RTN","PSSDSAPL",117,0)
 S PSSDBV1=$E(PSSDBV9,1,12) I PSSDBV1="TWO - THREE ",$$7 S PSSDBV2=$E(PSSDBV9,13,$L(PSSDBV9)) I $$8 Q 3
"RTN","PSSDSAPL",118,0)
 ;
"RTN","PSSDSAPL",119,0)
 S PSSDBV1=$E(PSSDBV9,1,2) I PSSDBV1="3 ",$$7 S PSSDBV2=$E(PSSDBV9,3,$L(PSSDBV9)) I $$8 Q 3
"RTN","PSSDSAPL",120,0)
 S PSSDBV1=$E(PSSDBV9,1,6) I PSSDBV1="THREE ",$$7 S PSSDBV2=$E(PSSDBV9,7,$L(PSSDBV9)) I $$8 Q 3
"RTN","PSSDSAPL",121,0)
 ;
"RTN","PSSDSAPL",122,0)
 S PSSDBV1=$E(PSSDBV9,1,10) I PSSDBV1="3 AND 1/4 ",$$7 S PSSDBV2=$E(PSSDBV9,11,$L(PSSDBV9)) I $$8 Q 3.25
"RTN","PSSDSAPL",123,0)
 S PSSDBV1=$E(PSSDBV9,1,21) I PSSDBV1="THREE AND ONE FOURTH ",$$7 S PSSDBV2=$E(PSSDBV9,22,$L(PSSDBV9)) I $$8 Q 3.25
"RTN","PSSDSAPL",124,0)
 S PSSDBV1=$E(PSSDBV9,1,21) I PSSDBV1="THREE AND ONE-FOURTH ",$$7 S PSSDBV2=$E(PSSDBV9,22,$L(PSSDBV9)) I $$8 Q 3.25
"RTN","PSSDSAPL",125,0)
 S PSSDBV1=$E(PSSDBV9,1,17) I PSSDBV1="3 AND ONE FOURTH ",$$7 S PSSDBV2=$E(PSSDBV9,18,$L(PSSDBV9)) I $$8 Q 3.25
"RTN","PSSDSAPL",126,0)
 S PSSDBV1=$E(PSSDBV9,1,17) I PSSDBV1="3 AND ONE-FOURTH ",$$7 S PSSDBV2=$E(PSSDBV9,18,$L(PSSDBV9)) I $$8 Q 3.25
"RTN","PSSDSAPL",127,0)
 S PSSDBV1=$E(PSSDBV9,1,14) I PSSDBV1="THREE AND 1/4 ",$$7 S PSSDBV2=$E(PSSDBV9,15,$L(PSSDBV9)) I $$8 Q 3.25
"RTN","PSSDSAPL",128,0)
 ;
"RTN","PSSDSAPL",129,0)
 S PSSDBV1=$E(PSSDBV9,1,10) I PSSDBV1="3 AND 1/3 ",$$7 S PSSDBV2=$E(PSSDBV9,11,$L(PSSDBV9)) I $$8 Q 3.33
"RTN","PSSDSAPL",130,0)
 S PSSDBV1=$E(PSSDBV9,1,20) I PSSDBV1="THREE AND ONE THIRD ",$$7 S PSSDBV2=$E(PSSDBV9,21,$L(PSSDBV9)) I $$8 Q 3.33
"RTN","PSSDSAPL",131,0)
 S PSSDBV1=$E(PSSDBV9,1,20) I PSSDBV1="THREE AND ONE-THIRD ",$$7 S PSSDBV2=$E(PSSDBV9,21,$L(PSSDBV9)) I $$8 Q 3.33
"RTN","PSSDSAPL",132,0)
 S PSSDBV1=$E(PSSDBV9,1,16) I PSSDBV1="3 AND ONE THIRD ",$$7 S PSSDBV2=$E(PSSDBV9,17,$L(PSSDBV9)) I $$8 Q 3.33
"RTN","PSSDSAPL",133,0)
 S PSSDBV1=$E(PSSDBV9,1,16) I PSSDBV1="3 AND ONE-THIRD ",$$7 S PSSDBV2=$E(PSSDBV9,17,$L(PSSDBV9)) I $$8 Q 3.33
"RTN","PSSDSAPL",134,0)
 S PSSDBV1=$E(PSSDBV9,1,14) I PSSDBV1="THREE AND 1/3 ",$$7 S PSSDBV2=$E(PSSDBV9,15,$L(PSSDBV9)) I $$8 Q 3.33
"RTN","PSSDSAPL",135,0)
 ;
"RTN","PSSDSAPL",136,0)
 S PSSDBV1=$E(PSSDBV9,1,10) I PSSDBV1="3 AND 1/2 ",$$7 S PSSDBV2=$E(PSSDBV9,11,$L(PSSDBV9)) I $$8 Q 3.5
"RTN","PSSDSAPL",137,0)
 S PSSDBV1=$E(PSSDBV9,1,19) I PSSDBV1="THREE AND ONE HALF ",$$7 S PSSDBV2=$E(PSSDBV9,20,$L(PSSDBV9)) I $$8 Q 3.5
"RTN","PSSDSAPL",138,0)
 S PSSDBV1=$E(PSSDBV9,1,19) I PSSDBV1="THREE AND ONE-HALF ",$$7 S PSSDBV2=$E(PSSDBV9,20,$L(PSSDBV9)) I $$8 Q 3.5
"RTN","PSSDSAPL",139,0)
 S PSSDBV1=$E(PSSDBV9,1,15) I PSSDBV1="3 AND ONE HALF ",$$7 S PSSDBV2=$E(PSSDBV9,16,$L(PSSDBV9)) I $$8 Q 3.5
"RTN","PSSDSAPL",140,0)
 S PSSDBV1=$E(PSSDBV9,1,15) I PSSDBV1="3 AND ONE-HALF ",$$7 S PSSDBV2=$E(PSSDBV9,16,$L(PSSDBV9)) I $$8 Q 3.5
"RTN","PSSDSAPL",141,0)
 S PSSDBV1=$E(PSSDBV9,1,14) I PSSDBV1="THREE AND 1/2 ",$$7 S PSSDBV2=$E(PSSDBV9,15,$L(PSSDBV9)) I $$8 Q 3.5
"RTN","PSSDSAPL",142,0)
 ;
"RTN","PSSDSAPL",143,0)
 ;
"RTN","PSSDSAPL",144,0)
 S PSSDBV7=$$NUMC^PSSDSBPB Q:PSSDBV7>0 PSSDBV7
"RTN","PSSDSAPL",145,0)
 S PSSDBV7=$$NUMC^PSSDSBPC Q:PSSDBV7>0 PSSDBV7
"RTN","PSSDSAPL",146,0)
 S PSSDBV7=$$NUMC^PSSDSBPD Q PSSDBV7
"RTN","PSSDSAPL",147,0)
 ;
"RTN","PSSDSAPL",148,0)
 ;
"RTN","PSSDSAPL",149,0)
8() ;Look for Unit - PSSDBIFL set in PSSSAPD, indicates if Order has a Dispense Drug, or just an Orderable Item
"RTN","PSSDSAPL",150,0)
 S PSSDBV3="" D
"RTN","PSSDSAPL",151,0)
 .I PSSDBIFL S PSSDBV3=$$UNITD^PSSDSAPI(PSSDBV2) Q
"RTN","PSSDSAPL",152,0)
 .S PSSDBV3=$$UNIT^PSSDSAPI(PSSDBV2)
"RTN","PSSDSAPL",153,0)
 Q $S(PSSDBV3="":0,1:1)
"RTN","PSSDSAPL",154,0)
 ;
"RTN","PSSDSAPL",155,0)
 ;
"RTN","PSSDSAPL",156,0)
7() ;Validate text follow the numeric part of the text
"RTN","PSSDSAPL",157,0)
 I $L(PSSDBV9)'>$L(PSSDBV1) Q 0
"RTN","PSSDSAPL",158,0)
 Q 1
"RTN","PSSDSAPM")
0^27^B211863558^n/a
"RTN","PSSDSAPM",1,0)
PSSDSAPM ;BIR/RTR-Dose Check utilities routine ;09/13/10
"RTN","PSSDSAPM",2,0)
 ;;1.0;PHARMACY DATA MANAGEMENT;**117**;9/30/97;Build 101
"RTN","PSSDSAPM",3,0)
 ;
"RTN","PSSDSAPM",4,0)
 ;
"RTN","PSSDSAPM",5,0)
 ;DRG - returns best Dispense Drug to use for Order Checks when only the Orderable Item is available
"RTN","PSSDSAPM",6,0)
 ;Input:
"RTN","PSSDSAPM",7,0)
 ;   PSSNBOI - Pharmacy orderable Item from #50.7
"RTN","PSSDSAPM",8,0)
 ;   PSSNBPK - package Use,  I for Inpatient, O for Outpatient, X for Non-VA Meds
"RTN","PSSDSAPM",9,0)
 ;Output:
"RTN","PSSDSAPM",10,0)
 ;   nnn;nnn;nnnn - First piece is File 50 Internal Number, Second piece is VA Generic Internal number, Third piece
"RTN","PSSDSAPM",11,0)
 ;   will be the GCNSEQNO number                              
"RTN","PSSDSAPM",12,0)
 ;   Peice 2 will be null if drug not matched to National Drug File
"RTN","PSSDSAPM",13,0)
 ;   Peice 3 will be the GCNSEQNO number, if the NDF match has a GCNSEQNO number
"RTN","PSSDSAPM",14,0)
 ;   0 will be returned if no drug found
"RTN","PSSDSAPM",15,0)
 ;
"RTN","PSSDSAPM",16,0)
 ;heirarcy: (Drug must be active)
"RTN","PSSDSAPM",17,0)
 ;1 - Exact Package Match, matched to NDF with GCNSEQNO
"RTN","PSSDSAPM",18,0)
 ;2 - No package match, but second choice package exists, matched to NDF with GCNSEQNO
"RTN","PSSDSAPM",19,0)
 ;3 - No package match, but third choice package exists, matched to NDF with GCNSEQNO
"RTN","PSSDSAPM",20,0)
 ;4 - No package match, matched to NDF with GCNSEQNO
"RTN","PSSDSAPM",21,0)
 ;5 - Exact Package Match, matched to NDF with no GCNSEQNO
"RTN","PSSDSAPM",22,0)
 ;6 - No package match, but second choice package exists, matched to NDF with no GCNSEQNO
"RTN","PSSDSAPM",23,0)
 ;7 - No package match, but third choice package exists, matched to NDF with no GCNSEQNO
"RTN","PSSDSAPM",24,0)
 ;8 - No package match, matched to NDF with no GCNSEQNO
"RTN","PSSDSAPM",25,0)
 ;9 - Exact Package Match, not matched to NDF
"RTN","PSSDSAPM",26,0)
 ;10 - No package match, but second choice package exists, not matched to NDF
"RTN","PSSDSAPM",27,0)
 ;11 - No package match, but third choice package exists, not matched to NDF
"RTN","PSSDSAPM",28,0)
 ;12 - No package match, not matched to NDF
"RTN","PSSDSAPM",29,0)
 ;
"RTN","PSSDSAPM",30,0)
 ;Second/Third Choice packages:
"RTN","PSSDSAPM",31,0)
 ;Outpatient - U or I, the X
"RTN","PSSDSAPM",32,0)
 ;Inpatient - O, then X
"RTN","PSSDSAPM",33,0)
 ;Non-VA Meds - O, then U or I
"RTN","PSSDSAPM",34,0)
 ;
"RTN","PSSDSAPM",35,0)
 ;PSNBLOW holds current number in array, only reset arrar entry if lower number is found
"RTN","PSSDSAPM",36,0)
 ;PSSNBSTP stops the loop because you found the best possible drug, no need to set PSSNBLOW in this case
"RTN","PSSDSAPM",37,0)
 ;
"RTN","PSSDSAPM",38,0)
DRG(PSSNBOI,PSSNBPK) ;
"RTN","PSSDSAPM",39,0)
 I '$G(PSSNBOI) Q "0;;"
"RTN","PSSDSAPM",40,0)
 I $G(PSSNBPK)'="O",$G(PSSNBPK)'="I",$G(PSSNBPK)'="X" Q "0;;"
"RTN","PSSDSAPM",41,0)
 I '$D(^PS(50.7,PSSNBOI,0)) Q "0;;"
"RTN","PSSDSAPM",42,0)
 I $P($G(^PS(50.7,PSSNBOI,0)),"^",9)=1 Q "0;;"
"RTN","PSSDSAPM",43,0)
 N PSSNB1,PSSNBRS,PSSNBSTP,PSSNBIN,PSSNBAPP,PSSNBLOW,PSSNBARR,PSSNBAP1,PSSNBARX
"RTN","PSSDSAPM",44,0)
 S PSSNBSTP=0,PSSNBLOW=13
"RTN","PSSDSAPM",45,0)
 S PSSNBRS="0;;"
"RTN","PSSDSAPM",46,0)
 F PSSNB1=0:0 S PSSNB1=$O(^PSDRUG("ASP",PSSNBOI,PSSNB1)) Q:'PSSNB1!(PSSNBSTP)  D:'$$DREX
"RTN","PSSDSAPM",47,0)
 .S PSSNBIN=$P($G(^PSDRUG(PSSNB1,"I")),"^") I PSSNBIN,PSSNBIN<DT Q
"RTN","PSSDSAPM",48,0)
 .S PSSNBAPP=$P($G(^PSDRUG(PSSNB1,2)),"^",3)
"RTN","PSSDSAPM",49,0)
 .S PSSNBAP1=$$GCN
"RTN","PSSDSAPM",50,0)
 .I PSSNBPK="O" D APPO Q
"RTN","PSSDSAPM",51,0)
 .I PSSNBPK="I" D APPI Q
"RTN","PSSDSAPM",52,0)
 .I PSSNBPK="X" D APPX
"RTN","PSSDSAPM",53,0)
 S PSSNBARX=$O(PSSNBARR(0))
"RTN","PSSDSAPM",54,0)
 I PSSNBARX S PSSNBRS=$G(PSSNBARR(PSSNBARX))
"RTN","PSSDSAPM",55,0)
 Q PSSNBRS
"RTN","PSSDSAPM",56,0)
 ;
"RTN","PSSDSAPM",57,0)
 ;
"RTN","PSSDSAPM",58,0)
DREX() ;Quit if drug is exempt from order check
"RTN","PSSDSAPM",59,0)
 I $G(PSSINCFO) Q $$EXMT^PSSDSAPI(PSSNB1)
"RTN","PSSDSAPM",60,0)
 Q $$SUP^PSSDSAPI(PSSNB1)
"RTN","PSSDSAPM",61,0)
 ;
"RTN","PSSDSAPM",62,0)
 ;
"RTN","PSSDSAPM",63,0)
APPO ;Outpatient order
"RTN","PSSDSAPM",64,0)
 I PSSNBAPP["O",$P(PSSNBAP1,"^",3) S PSSNBARR(1)=PSSNBAP1,PSSNBSTP=1 Q
"RTN","PSSDSAPM",65,0)
 Q:PSSNBLOW<3
"RTN","PSSDSAPM",66,0)
 I PSSNBAPP["I"!(PSSNBAPP["U") I $P(PSSNBAP1,"^",3) S PSSNBARR(2)=PSSNBAP1,PSSNBLOW=2 Q
"RTN","PSSDSAPM",67,0)
 Q:PSSNBLOW<4
"RTN","PSSDSAPM",68,0)
 I PSSNBAPP["X",$P(PSSNBAP1,"^",3) S PSSNBARR(3)=PSSNBAP1,PSSNBLOW=3 Q
"RTN","PSSDSAPM",69,0)
 Q:PSSNBLOW<5
"RTN","PSSDSAPM",70,0)
 I $P(PSSNBAP1,"^",3) S PSSNBARR(4)=PSSNBAP1,PSSNBLOW=4 Q
"RTN","PSSDSAPM",71,0)
 Q:PSSNBLOW<6
"RTN","PSSDSAPM",72,0)
 I PSSNBAPP["O",PSSNBAP1 S PSSNBARR(5)=PSSNBAP1,PSSNBLOW=5 Q
"RTN","PSSDSAPM",73,0)
 Q:PSSNBLOW<7
"RTN","PSSDSAPM",74,0)
 I PSSNBAPP["I"!(PSSNBAPP["U") I PSSNBAP1 S PSSNBARR(6)=PSSNBAP1,PSSNBLOW=6 Q
"RTN","PSSDSAPM",75,0)
 Q:PSSNBLOW<8
"RTN","PSSDSAPM",76,0)
 I PSSNBAPP["X",PSSNBAP1 S PSSNBARR(7)=PSSNBAP1,PSSNBLOW=7 Q
"RTN","PSSDSAPM",77,0)
 Q:PSSNBLOW<9
"RTN","PSSDSAPM",78,0)
 I PSSNBAP1 S PSSNBARR(8)=PSSNBAP1,PSSNBLOW=8 Q
"RTN","PSSDSAPM",79,0)
 Q:PSSNBLOW<10
"RTN","PSSDSAPM",80,0)
 I PSSNBAPP["O" S PSSNBARR(9)=PSSNB1_";;",PSSNBLOW=9 Q
"RTN","PSSDSAPM",81,0)
 Q:PSSNBLOW<11
"RTN","PSSDSAPM",82,0)
 I PSSNBAPP["I"!(PSSNBAPP["U") S PSSNBARR(10)=PSSNB1_";;",PSSNBLOW=10 Q
"RTN","PSSDSAPM",83,0)
 Q:PSSNBLOW<12
"RTN","PSSDSAPM",84,0)
 I PSSNBAPP["X" S PSSNBARR(11)=PSSNB1_";;",PSSNBLOW=11 Q
"RTN","PSSDSAPM",85,0)
 Q:PSSNBLOW<13
"RTN","PSSDSAPM",86,0)
 S PSSNBARR(12)=PSSNB1_";;",PSSNBLOW=12
"RTN","PSSDSAPM",87,0)
 Q
"RTN","PSSDSAPM",88,0)
 ;
"RTN","PSSDSAPM",89,0)
APPI ;Inpatient Order
"RTN","PSSDSAPM",90,0)
 I PSSNBAPP["I"!(PSSNBAPP["U") I $P(PSSNBAP1,"^",3) S PSSNBARR(1)=PSSNBAP1,PSSNBSTP=1 Q
"RTN","PSSDSAPM",91,0)
 Q:PSSNBLOW<3
"RTN","PSSDSAPM",92,0)
 I PSSNBAPP["O" I $P(PSSNBAP1,"^",3) S PSSNBARR(2)=PSSNBAP1,PSSNBLOW=2 Q
"RTN","PSSDSAPM",93,0)
 Q:PSSNBLOW<4
"RTN","PSSDSAPM",94,0)
 I PSSNBAPP["X" I $P(PSSNBAP1,"^",3) S PSSNBARR(3)=PSSNBAP1,PSSNBLOW=3 Q
"RTN","PSSDSAPM",95,0)
 Q:PSSNBLOW<5
"RTN","PSSDSAPM",96,0)
 I $P(PSSNBAP1,"^",3) S PSSNBARR(4)=PSSNBAP1,PSSNBLOW=4 Q
"RTN","PSSDSAPM",97,0)
 Q:PSSNBLOW<6
"RTN","PSSDSAPM",98,0)
 I PSSNBAPP["I"!(PSSNBAPP["U") I PSSNBAP1 S PSSNBARR(5)=PSSNBAP1,PSSNBLOW=5 Q
"RTN","PSSDSAPM",99,0)
 Q:PSSNBLOW<7
"RTN","PSSDSAPM",100,0)
 I PSSNBAPP["O" I PSSNBAP1 S PSSNBARR(6)=PSSNBAP1,PSSNBLOW=6 Q
"RTN","PSSDSAPM",101,0)
 Q:PSSNBLOW<8
"RTN","PSSDSAPM",102,0)
 I PSSNBAPP["X" I PSSNBAP1 S PSSNBARR(7)=PSSNBAP1,PSSNBLOW=7 Q
"RTN","PSSDSAPM",103,0)
 Q:PSSNBLOW<9
"RTN","PSSDSAPM",104,0)
 I PSSNBAP1 S PSSNBARR(8)=PSSNBAP1,PSSNBLOW=8 Q
"RTN","PSSDSAPM",105,0)
 Q:PSSNBLOW<10
"RTN","PSSDSAPM",106,0)
 I PSSNBAPP["I"!(PSSNBAPP["U") S PSSNBARR(9)=PSSNB1_";;",PSSNBLOW=9 Q
"RTN","PSSDSAPM",107,0)
 Q:PSSNBLOW<11
"RTN","PSSDSAPM",108,0)
 I PSSNBAPP["O" S PSSNBARR(10)=PSSNB1_";;",PSSNBLOW=10 Q
"RTN","PSSDSAPM",109,0)
 Q:PSSNBLOW<12
"RTN","PSSDSAPM",110,0)
 I PSSNBAPP["X" S PSSNBARR(11)=PSSNB1_";;",PSSNBLOW=11 Q
"RTN","PSSDSAPM",111,0)
 Q:PSSNBLOW<13
"RTN","PSSDSAPM",112,0)
 S PSSNBARR(12)=PSSNB1_";;",PSSNBLOW=12
"RTN","PSSDSAPM",113,0)
 Q
"RTN","PSSDSAPM",114,0)
 ;
"RTN","PSSDSAPM",115,0)
APPX ;Non-VA Meds Order
"RTN","PSSDSAPM",116,0)
 I PSSNBAPP["X",$P(PSSNBAP1,"^",3) S PSSNBARR(1)=PSSNBAP1,PSSNBSTP=1 Q
"RTN","PSSDSAPM",117,0)
 Q:PSSNBLOW<3
"RTN","PSSDSAPM",118,0)
 I PSSNBAPP["O" I $P(PSSNBAP1,"^",3) S PSSNBARR(2)=PSSNBAP1,PSSNBLOW=2 Q
"RTN","PSSDSAPM",119,0)
 Q:PSSNBLOW<4
"RTN","PSSDSAPM",120,0)
 I PSSNBAPP["I"!PSSNBAPP["U" I $P(PSSNBAP1,"^",3) S PSSNBARR(3)=PSSNBAP1,PSSNBLOW=3 Q
"RTN","PSSDSAPM",121,0)
 Q:PSSNBLOW<5
"RTN","PSSDSAPM",122,0)
 I $P(PSSNBAP1,"^",3) S PSSNBARR(4)=PSSNBAP1,PSSNBLOW=4 Q
"RTN","PSSDSAPM",123,0)
 Q:PSSNBLOW<6
"RTN","PSSDSAPM",124,0)
 I PSSNBAPP["X",PSSNBAP1 S PSSNBARR(5)=PSSNBAP1,PSSNBLOW=5 Q
"RTN","PSSDSAPM",125,0)
 Q:PSSNBLOW<7
"RTN","PSSDSAPM",126,0)
 I PSSNBAPP["O" I PSSNBAP1 S PSSNBARR(6)=PSSNBAP1,PSSNBLOW=6 Q
"RTN","PSSDSAPM",127,0)
 Q:PSSNBLOW<8
"RTN","PSSDSAPM",128,0)
 I PSSNBAPP["I"!(PSSNBAPP["U") I PSSNBAP1 S PSSNBARR(7)=PSSNBAP1,PSSNBLOW=7 Q
"RTN","PSSDSAPM",129,0)
 Q:PSSNBLOW<9
"RTN","PSSDSAPM",130,0)
 I PSSNBAP1 S PSSNBARR(8)=PSSNBAP1,PSSNBLOW=8 Q
"RTN","PSSDSAPM",131,0)
 Q:PSSNBLOW<10
"RTN","PSSDSAPM",132,0)
 I PSSNBAPP["X" S PSSNBARR(9)=PSSNB1_";;",PSSNBLOW=9 Q
"RTN","PSSDSAPM",133,0)
 Q:PSSNBLOW<11
"RTN","PSSDSAPM",134,0)
 I PSSNBAPP["O" S PSSNBARR(10)=PSSNB1_";;",PSSNBLOW=10 Q
"RTN","PSSDSAPM",135,0)
 Q:PSSNBLOW<12
"RTN","PSSDSAPM",136,0)
 I PSSNBAPP["I"!(PSSNBAPP["U") S PSSNBARR(11)=PSSNB1_";;",PSSNBLOW=11 Q
"RTN","PSSDSAPM",137,0)
 Q:PSSNBLOW<13
"RTN","PSSDSAPM",138,0)
 S PSSNBARR(12)=PSSNB1_";;",PSSNBLOW=12
"RTN","PSSDSAPM",139,0)
 Q
"RTN","PSSDSAPM",140,0)
 ;
"RTN","PSSDSAPM",141,0)
GCN() ;Return 0 for not matched, 1 for matched with no GCNSEQNO, 1^1 for matched with a GCNSEQNO
"RTN","PSSDSAPM",142,0)
 N PSSNBGC1,PSSNBGC3,PSSNBGRS
"RTN","PSSDSAPM",143,0)
 S PSSNBGC1=$P($G(^PSDRUG(PSSNB1,"ND")),"^"),PSSNBGC3=$P($G(^PSDRUG(PSSNB1,"ND")),"^",3)
"RTN","PSSDSAPM",144,0)
 I 'PSSNBGC1!('PSSNBGC3) Q 0
"RTN","PSSDSAPM",145,0)
 S PSSNBGRS=$$PROD0^PSNAPIS(PSSNBGC1,PSSNBGC3)
"RTN","PSSDSAPM",146,0)
 I $P(PSSNBGRS,"^",7) Q PSSNB1_";"_PSSNBGC1_";"_$P(PSSNBGRS,"^",7)
"RTN","PSSDSAPM",147,0)
 Q PSSNB1_";"_PSSNBGC1
"RTN","PSSDSAPM",148,0)
 ;
"RTN","PSSDSAPM",149,0)
 ;
"RTN","PSSDSAPM",150,0)
MLT ;Multi Ingredient check called from PSSDSAPD
"RTN","PSSDSAPM",151,0)
 D ITEM^PSSDSAPK D:'PSSDBFAL NUM^PSSDSAPL
"RTN","PSSDSAPM",152,0)
 I '$G(PSSDBIFG) Q
"RTN","PSSDSAPM",153,0)
 N PSSMLT1,PSSMLT2,PSSMLT3,PSSMLG4,DA
"RTN","PSSDSAPM",154,0)
 S PSSMLT1=$P($G(^PSDRUG(PSSDBIFG,"ND")),"^"),PSSMLT3=$P($G(^PSDRUG(PSSDBIFG,"ND")),"^",3)
"RTN","PSSDSAPM",155,0)
 I 'PSSMLT1!('PSSMLT3) D MLTS Q
"RTN","PSSDSAPM",156,0)
 S PSSMLT2=$$PSJING^PSNAPIS(PSSMLT1,PSSMLT3,.PSSMLG4) I +PSSMLT2>1 D MLTS Q
"RTN","PSSDSAPM",157,0)
 I $$MLTSU D MLTS
"RTN","PSSDSAPM",158,0)
 Q
"RTN","PSSDSAPM",159,0)
 ;
"RTN","PSSDSAPM",160,0)
 ;
"RTN","PSSDSAPM",161,0)
MLTS ;
"RTN","PSSDSAPM",162,0)
 K PSSDBAR("AMN"),PSSDBAR("UNIT")
"RTN","PSSDSAPM",163,0)
 S PSSDBCAZ(PSSDBFDB(PSSDBLP,"RX_NUM"),"MUING")=""
"RTN","PSSDSAPM",164,0)
 Q
"RTN","PSSDSAPM",165,0)
 ;
"RTN","PSSDSAPM",166,0)
 ;
"RTN","PSSDSAPM",167,0)
MLTSU() ;
"RTN","PSSDSAPM",168,0)
 N X,Y,PSSMKT2,PSSMKT5,PSSMKT6,PSSMKT7
"RTN","PSSDSAPM",169,0)
 S PSSMKT2=$$DFSU^PSNAPIS(PSSMLT1,PSSMLT3)
"RTN","PSSDSAPM",170,0)
 S PSSMKT5=$P(PSSMKT2,"^",6) I PSSMKT5="" Q 1
"RTN","PSSDSAPM",171,0)
 S PSSMKT6=$$UNITM(PSSMKT5) I PSSMKT6'="" Q 1
"RTN","PSSDSAPM",172,0)
 S PSSMKT7=$$UNIT^PSSDSAPI(PSSMKT5) I PSSMKT7="" Q 1
"RTN","PSSDSAPM",173,0)
 Q 0
"RTN","PSSDSAPM",174,0)
 ;
"RTN","PSSDSAPM",175,0)
 ;
"RTN","PSSDSAPM",176,0)
UNITM(PSSXUTUN) ;Find First DataBank Unit, can't do DIC Lookup because of exact match check
"RTN","PSSDSAPM",177,0)
 ;Returns Null or First DataBank Unit for text passed in
"RTN","PSSDSAPM",178,0)
 ;Not a true conversion, because if Unit contains "/", we convert only piece 1
"RTN","PSSDSAPM",179,0)
 ;Only returns data if Dose Form Indicator is Set to Yes
"RTN","PSSDSAPM",180,0)
 N PSSXUTX,PSSXUTZ,PSSXUTAA,PSSXUTFL
"RTN","PSSDSAPM",181,0)
 S PSSXUTFL=0 I $G(PSSXUTUN)="" S PSSXUTZ="" G UNITDX
"RTN","PSSDSAPM",182,0)
 S PSSXUTAA=$$UP^XLFSTR(PSSXUTUN)
"RTN","PSSDSAPM",183,0)
UNITDP ;
"RTN","PSSDSAPM",184,0)
 K PSSXUTZ S PSSXUTX=$O(^PS(51.24,"B",PSSXUTAA,0)) I PSSXUTX,'$$SCREEN^XTID(51.24,.01,PSSXUTX_",") S PSSXUTZ=$P($G(^PS(51.24,PSSXUTX,0)),"^") I PSSXUTZ'="",$P($G(^PS(51.24,PSSXUTX,0)),"^",3) G UNITDX
"RTN","PSSDSAPM",185,0)
 K PSSXUTZ S PSSXUTX=$O(^PS(51.24,"C",PSSXUTAA,0)) I PSSXUTX,'$$SCREEN^XTID(51.24,.01,PSSXUTX_",") S PSSXUTZ=$P($G(^PS(51.24,PSSXUTX,0)),"^") I PSSXUTZ'="",$P($G(^PS(51.24,PSSXUTX,0)),"^",3) G UNITDX
"RTN","PSSDSAPM",186,0)
 K PSSXUTZ S PSSXUTX=$O(^PS(51.24,"D",PSSXUTAA,0)) I PSSXUTX,'$$SCREEN^XTID(51.24,.01,PSSXUTX_",") S PSSXUTZ=$P($G(^PS(51.24,PSSXUTX,0)),"^") I PSSXUTZ'="",$P($G(^PS(51.24,PSSXUTX,0)),"^",3) G UNITDX
"RTN","PSSDSAPM",187,0)
 K PSSXUTZ I 'PSSXUTFL,$G(PSSXUTUN)["/" S PSSXUTFL=1,PSSXUTAA=$P(PSSXUTUN,"/"),PSSXUTAA=$$UP^XLFSTR(PSSXUTAA) G:PSSXUTAA'="" UNITDP
"RTN","PSSDSAPM",188,0)
UNITDX ;
"RTN","PSSDSAPM",189,0)
 Q $G(PSSXUTZ)
"RTN","PSSDSAPM",190,0)
 ;
"RTN","PSSDSAPM",191,0)
 ;
"RTN","PSSDSAPM",192,0)
MLTNO ;
"RTN","PSSDSAPM",193,0)
 I $D(PSSDBCAZ(PSSDBKLP,"MUING")) S $P(PSSDBCAR(PSSDBKLP),"^",7)=1
"RTN","PSSDSAPM",194,0)
 Q
"RTN","PSSDSAPM",195,0)
 ;
"RTN","PSSDSAPM",196,0)
 ;
"RTN","PSSDSAPM",197,0)
MLTNP ;
"RTN","PSSDSAPM",198,0)
 I $D(PSSDBCAZ(PSSDBRLS,"MUING")) S $P(PSSDBCAR(PSSDBRLS),"^",7)=1
"RTN","PSSDSAPM",199,0)
 Q
"RTN","PSSDSAPM",200,0)
 ;
"RTN","PSSDSAPM",201,0)
 ;
"RTN","PSSDSAPM",202,0)
FDRUG ; Find drug, called from PSSDSAPD
"RTN","PSSDSAPM",203,0)
 N PSSINCFO S PSSINCFO=1
"RTN","PSSDSAPM",204,0)
 S PSSDBIFL=1,PSSDBIFG=$$DRG^PSSDSAPK(PSSDBFDB("OI"),$G(PSSDBFDB("PACKAGE")),$G(PSSDBDS(PSSDBLP,"MR_IEN")),$G(PSSDBFDB("OI_USAGE")))
"RTN","PSSDSAPM",205,0)
 I 'PSSDBIFG S PSSDBIFG=$$DRG(PSSDBFDB("OI"),$G(PSSDBFDB("PACKAGE"))) S PSSDBCAZ(PSSDBFDB(PSSDBLP,"RX_NUM"),"NO_DRUG")="" S PSSDBIFG=$P(PSSDBIFG,";")
"RTN","PSSDSAPM",206,0)
 Q
"RTN","PSSDSAPM",207,0)
 ;
"RTN","PSSDSAPM",208,0)
 ;
"RTN","PSSDSAPM",209,0)
INERR ;Set OI error
"RTN","PSSDSAPM",210,0)
 N PSSNOOIX
"RTN","PSSDSAPM",211,0)
 S PSSNOOIX=$G(PSSDBFDB(PSSDBLP,"OI_ERROR",PSSDBFDB(PSSDBLP,"DRUG_NM")))
"RTN","PSSDSAPM",212,0)
 I PSSNOOIX'="" S ^TMP($J,PSSDBASE,"IN","EXCEPTIONS","OI",PSSDBFDB(PSSDBLP,"RX_NUM"))=$P(PSSNOOIX,"^")_"^"_$P(PSSNOOIX,"^",2)
"RTN","PSSDSAPM",213,0)
 Q
"RTN","PSSDSAPM",214,0)
 ;
"RTN","PSSDSAPM",215,0)
 ;
"RTN","PSSDSAPM",216,0)
FRQE ;Set Frequency error called from PSSDSAPD
"RTN","PSSDSAPM",217,0)
 D INFERR^PSSDSAPK,FRDR^PSSDSAPK I $D(PSSDBFDB(PSSDBLP,"FRQ_ERROR")) S PSSDBCAZ(PSSDBFDB(PSSDBLP,"RX_NUM"),"FRQ_ERROR")=""
"RTN","PSSDSAPM",218,0)
 Q
"RTN","PSSDSAPM",219,0)
 ;
"RTN","PSSDSAPM",220,0)
 ;
"RTN","PSSDSAPM",221,0)
INFUE ;Set Infusion rate error from PSSDSAPD
"RTN","PSSDSAPM",222,0)
 I $D(PSSDBFDB(PSSDBLP,"INF_ERROR")) S PSSDBCAZ(PSSDBFDB(PSSDBLP,"RX_NUM"),"INF_ERROR")=""
"RTN","PSSDSAPM",223,0)
 Q
"RTN","PSSDSAPM",224,0)
 ;
"RTN","PSSDSAPM",225,0)
 ;
"RTN","PSSDSAPM",226,0)
ERST ;Set Dosing Sequences into error summary list
"RTN","PSSDSAPM",227,0)
 N PSSWSB1,PSSWSB2
"RTN","PSSDSAPM",228,0)
 F PSSDBEQ3=0:0 S PSSDBEQ3=$O(PSSDBEQ2(PSSDBEQ3)) Q:'PSSDBEQ3  S PSSDBCAX(PSSDBRLS,PSSDBEQ3)="" I $O(PSSDBXAX(PSSDBEQ3,""))'="",$E(PSSDBASE,1,3)'="PSJ" D
"RTN","PSSDSAPM",229,0)
 .S PSSWSB1="",PSSWSB2=0 F  S PSSWSB1=$O(PSSDBXAX(PSSDBEQ3,PSSWSB1)) Q:PSSWSB1=""!($G(PSSDBCAX(PSSDBRLS,PSSDBEQ3))["All")  S PSSWSB2=PSSWSB2+1 D
"RTN","PSSDSAPM",230,0)
 ..I PSSDBEQ3=5!(PSSDBEQ3=6)!(PSSDBEQ3=8) S PSSDBCAX(PSSDBRLS,PSSDBEQ3)=" (All" Q
"RTN","PSSDSAPM",231,0)
 ..I PSSWSB2=1 S PSSDBCAX(PSSDBRLS,PSSDBEQ3)=" (DOSE SEQ "_$P(PSSWSB1,";",4) Q
"RTN","PSSDSAPM",232,0)
 ..S PSSDBCAX(PSSDBRLS,PSSDBEQ3)=PSSDBCAX(PSSDBRLS,PSSDBEQ3)_", "_$P(PSSWSB1,";",4)
"RTN","PSSDSAPM",233,0)
 .S PSSDBCAX(PSSDBRLS,PSSDBEQ3)=PSSDBCAX(PSSDBRLS,PSSDBEQ3)_")"
"RTN","PSSDSAPM",234,0)
 Q
"RTN","PSSDSAPM",235,0)
 ;
"RTN","PSSDSAPM",236,0)
 ;
"RTN","PSSDSAPM",237,0)
PAT ;
"RTN","PSSDSAPM",238,0)
 N DFN,VADM,VAPTYP,VAHOW,VAROOT,VAERR,VA,X1,X2,X,%Y,PSSDBWT,PSSDBWTX,PSSDBHT,PSSDBHTX,GMRVSTR,PSSDBBSA,PSSDBATX
"RTN","PSSDSAPM",239,0)
 S DFN=PSSDBDFN,PSSDBATX=0
"RTN","PSSDSAPM",240,0)
 D DEM^VADPT
"RTN","PSSDSAPM",241,0)
 K X S X2=$P(VADM(3),"^"),X1=DT I X1,X2 D ^%DTC S PSSDBATX=X
"RTN","PSSDSAPM",242,0)
 S ^TMP($J,PSSDBASE,"IN","DOSE","AGE")=PSSDBATX
"RTN","PSSDSAPM",243,0)
 S DFN=PSSDBDFN
"RTN","PSSDSAPM",244,0)
 S (PSSDBWTX,PSSDBHTX,PSSDBBSA)=0
"RTN","PSSDSAPM",245,0)
 S GMRVSTR="WT" K X D EN6^GMRVUTL
"RTN","PSSDSAPM",246,0)
 S PSSDBWT=$P(X,"^",8) I PSSDBWT S PSSDBWTX=PSSDBWT/2.2
"RTN","PSSDSAPM",247,0)
 S ^TMP($J,PSSDBASE,"IN","DOSE","WT")=$G(PSSDBWTX)
"RTN","PSSDSAPM",248,0)
 S DFN=PSSDBDFN
"RTN","PSSDSAPM",249,0)
 S GMRVSTR="HT" K X D EN6^GMRVUTL
"RTN","PSSDSAPM",250,0)
 S PSSDBHT=$P(X,"^",8) I PSSDBHT S PSSDBHTX=.0254*PSSDBHT
"RTN","PSSDSAPM",251,0)
 ;Using DuBios formula for BSA calculation, and sending in 2 decimal places
"RTN","PSSDSAPM",252,0)
 I $G(PSSDBWTX),$G(PSSDBHTX) S PSSDBBSA=.20247*(PSSDBHTX**.725)*(PSSDBWTX**.425)
"RTN","PSSDSAPM",253,0)
 ;I $G(PSSDBWTX),$G(PSSDBHTX) S PSSDBBSA=$J((((PSSDBWTX*PSSDBHTX)/3600)**.5),0,2)    Mosteller BSA Formula
"RTN","PSSDSAPM",254,0)
 S ^TMP($J,PSSDBASE,"IN","DOSE","BSA")=$G(PSSDBBSA)
"RTN","PSSDSAPM",255,0)
 Q
"RTN","PSSDSAPM",256,0)
 ;
"RTN","PSSDSAPM",257,0)
 ;
"RTN","PSSDSAPM",258,0)
ADDCT ;Add counter to output globals so data appears in correct order for more than 9 Dosing Sequences
"RTN","PSSDSAPM",259,0)
 ;I PSSDBASA D ADDCTA  ;Remove comment when CPRS is ready to convert to new output, to show messages in Sequence order
"RTN","PSSDSAPM",260,0)
 I PSSDBASB D ADDCTB
"RTN","PSSDSAPM",261,0)
 Q
"RTN","PSSDSAPM",262,0)
 ;
"RTN","PSSDSAPM",263,0)
 ;
"RTN","PSSDSAPM",264,0)
ADDCTA ;Add counter to CPRS global
"RTN","PSSDSAPM",265,0)
 I '$D(^TMP($J,PSSDBASF)) Q 
"RTN","PSSDSAPM",266,0)
 N PSSJW1,PSSJW2,PSSJW3,PSSJW4,PSSJW5,PSSJW6
"RTN","PSSDSAPM",267,0)
 K ^TMP($J,"PSSJWTM1") M ^TMP($J,"PSSJWTM1")=^TMP($J,PSSDBASF) K ^TMP($J,PSSDBASF)
"RTN","PSSDSAPM",268,0)
 ;
"RTN","PSSDSAPM",269,0)
 S PSSJW1="" F  S PSSJW1=$O(^TMP($J,"PSSJWTM1","OUT","DOSE","ERROR",PSSJW1)) Q:PSSJW1=""  D
"RTN","PSSDSAPM",270,0)
 .S PSSJW2="" F  S PSSJW2=$O(^TMP($J,"PSSJWTM1","OUT","DOSE","ERROR",PSSJW1,PSSJW2)) Q:PSSJW2=""  D
"RTN","PSSDSAPM",271,0)
 ..S PSSJW3=$P(PSSJW1,";",4)
"RTN","PSSDSAPM",272,0)
 ..S PSSJW4=$G(^TMP($J,"PSSJWTM1","OUT","DOSE","ERROR",PSSJW1,PSSJW2,"MSG"))
"RTN","PSSDSAPM",273,0)
 ..S PSSJW5=$G(^TMP($J,"PSSJWTM1","OUT","DOSE","ERROR",PSSJW1,PSSJW2,"TEXT"))
"RTN","PSSDSAPM",274,0)
 ..I $D(^TMP($J,"PSSJWTM1","OUT","DOSE","ERROR",PSSJW1,PSSJW2,"MSG")) S ^TMP($J,PSSDBASF,"OUT","DOSE","ERROR",PSSJW3,PSSJW1,PSSJW2,"MSG")=PSSJW4
"RTN","PSSDSAPM",275,0)
 ..I $D(^TMP($J,"PSSJWTM1","OUT","DOSE","ERROR",PSSJW1,PSSJW2,"TEXT")) S ^TMP($J,PSSDBASF,"OUT","DOSE","ERROR",PSSJW3,PSSJW1,PSSJW2,"TEXT")=PSSJW5
"RTN","PSSDSAPM",276,0)
 ;
"RTN","PSSDSAPM",277,0)
 S PSSJW1="" F  S PSSJW1=$O(^TMP($J,"PSSJWTM1","OUT","EXCEPTIONS","DOSE",PSSJW1)) Q:PSSJW1=""  D
"RTN","PSSDSAPM",278,0)
 .S PSSJW2="" F  S PSSJW2=$O(^TMP($J,"PSSJWTM1","OUT","EXCEPTIONS","DOSE",PSSJW1,PSSJW2)) Q:PSSJW2=""  D
"RTN","PSSDSAPM",279,0)
 ..S PSSJW3=$P(PSSJW1,";",4)
"RTN","PSSDSAPM",280,0)
 ..S PSSJW4=$G(^TMP($J,"PSSJWTM1","OUT","EXCEPTIONS","DOSE",PSSJW1,PSSJW2))
"RTN","PSSDSAPM",281,0)
 ..S ^TMP($J,PSSDBASF,"OUT","EXCEPTIONS","DOSE",PSSJW3,PSSJW1,PSSJW2)=PSSJW4
"RTN","PSSDSAPM",282,0)
 ;
"RTN","PSSDSAPM",283,0)
 S PSSJW1="" F  S PSSJW1=$O(^TMP($J,"PSSJWTM1","OUT","DOSE",PSSJW1)) Q:PSSJW1=""  I PSSJW1'="ERROR" D
"RTN","PSSDSAPM",284,0)
 .S PSSJW2="" F  S PSSJW2=$O(^TMP($J,"PSSJWTM1","OUT","DOSE",PSSJW1,PSSJW2)) Q:PSSJW2=""  D
"RTN","PSSDSAPM",285,0)
 ..S PSSJW3="" F  S PSSJW3=$O(^TMP($J,"PSSJWTM1","OUT","DOSE",PSSJW1,PSSJW2,PSSJW3)) Q:PSSJW3=""  D
"RTN","PSSDSAPM",286,0)
 ...S PSSJW4="" F  S PSSJW4=$O(^TMP($J,"PSSJWTM1","OUT","DOSE",PSSJW1,PSSJW2,PSSJW3,"MESSAGE",PSSJW4)) Q:PSSJW4=""  D
"RTN","PSSDSAPM",287,0)
 ....S PSSJW5=$P(PSSJW1,";",4)
"RTN","PSSDSAPM",288,0)
 ....S PSSJW6=$G(^TMP($J,"PSSJWTM1","OUT","DOSE",PSSJW1,PSSJW2,PSSJW3,"MESSAGE",PSSJW4))
"RTN","PSSDSAPM",289,0)
 ....S ^TMP($J,PSSDBASF,"OUT","DOSE",PSSJW5,PSSJW1,PSSJW2,PSSJW3,"MESSAGE",PSSJW4)=PSSJW6
"RTN","PSSDSAPM",290,0)
 ;
"RTN","PSSDSAPM",291,0)
 K ^TMP($J,"PSSJWTM1")
"RTN","PSSDSAPM",292,0)
 Q
"RTN","PSSDSAPM",293,0)
 ;
"RTN","PSSDSAPM",294,0)
 ;
"RTN","PSSDSAPM",295,0)
ADDCTB ;Add counter to Pharmacy global
"RTN","PSSDSAPM",296,0)
 I '$D(^TMP($J,PSSDBASG)) Q 
"RTN","PSSDSAPM",297,0)
 N PSSJW7,PSSJW8,PSSJW9,PSSJWNUM,PSSJWVAL
"RTN","PSSDSAPM",298,0)
 K ^TMP($J,"PSSJWTM2") M ^TMP($J,"PSSJWTM2")=^TMP($J,PSSDBASG) K ^TMP($J,PSSDBASG)
"RTN","PSSDSAPM",299,0)
 ;
"RTN","PSSDSAPM",300,0)
 S PSSJW7="" F  S PSSJW7=$O(^TMP($J,"PSSJWTM2","OUT",PSSJW7)) Q:PSSJW7=""  D
"RTN","PSSDSAPM",301,0)
 .S PSSJWNUM=$P(PSSJW7,";",4)
"RTN","PSSDSAPM",302,0)
 .S PSSJW8="" F  S PSSJW8=$O(^TMP($J,"PSSJWTM2","OUT",PSSJW7,"ERROR",PSSJW8)) Q:PSSJW8=""  D
"RTN","PSSDSAPM",303,0)
 ..I $D(^TMP($J,"PSSJWTM2","OUT",PSSJW7,"ERROR",PSSJW8,"MSG")) S ^TMP($J,PSSDBASG,"OUT",PSSJWNUM,PSSJW7,"ERROR",PSSJW8,"MSG")=$G(^TMP($J,"PSSJWTM2","OUT",PSSJW7,"ERROR",PSSJW8,"MSG"))
"RTN","PSSDSAPM",304,0)
 ..I $D(^TMP($J,"PSSJWTM2","OUT",PSSJW7,"ERROR",PSSJW8,"TEXT")) S ^TMP($J,PSSDBASG,"OUT",PSSJWNUM,PSSJW7,"ERROR",PSSJW8,"TEXT")=$G(^TMP($J,"PSSJWTM2","OUT",PSSJW7,"ERROR",PSSJW8,"TEXT"))
"RTN","PSSDSAPM",305,0)
 .;
"RTN","PSSDSAPM",306,0)
 .S PSSJW8="" F  S PSSJW8=$O(^TMP($J,"PSSJWTM2","OUT",PSSJW7,"EXCEPTIONS",PSSJW8)) Q:PSSJW8=""  D
"RTN","PSSDSAPM",307,0)
 ..S PSSJW9=$G(^TMP($J,"PSSJWTM2","OUT",PSSJW7,"EXCEPTIONS",PSSJW8))
"RTN","PSSDSAPM",308,0)
 ..S ^TMP($J,PSSDBASG,"OUT",PSSJWNUM,PSSJW7,"EXCEPTIONS",PSSJW8)=PSSJW9
"RTN","PSSDSAPM",309,0)
 .;
"RTN","PSSDSAPM",310,0)
 .S PSSJW8="" F  S PSSJW8=$O(^TMP($J,"PSSJWTM2","OUT",PSSJW7,"MESSAGE",PSSJW8)) Q:PSSJW8=""  D
"RTN","PSSDSAPM",311,0)
 ..S PSSJW9="" F  S PSSJW9=$O(^TMP($J,"PSSJWTM2","OUT",PSSJW7,"MESSAGE",PSSJW8,PSSJW9)) Q:PSSJW9=""  D
"RTN","PSSDSAPM",312,0)
 ...S PSSJWVAL=$G(^TMP($J,"PSSJWTM2","OUT",PSSJW7,"MESSAGE",PSSJW8,PSSJW9))
"RTN","PSSDSAPM",313,0)
 ...S ^TMP($J,PSSDBASG,"OUT",PSSJWNUM,PSSJW7,"MESSAGE",PSSJW8,PSSJW9)=PSSJWVAL
"RTN","PSSDSAPM",314,0)
 ; 
"RTN","PSSDSAPM",315,0)
 K ^TMP($J,"PSSJWTM2")
"RTN","PSSDSAPM",316,0)
 Q
"RTN","PSSDSAPM",317,0)
 ;
"RTN","PSSDSAPM",318,0)
 ;
"RTN","PSSDSAPM",319,0)
DSP(PSSDBDS,PSSDBFDB) ;Return Dose and Dose Unit to Inpatient for complex order display
"RTN","PSSDSAPM",320,0)
 ;Return value set into the parameter 1 as "DRG_DISP" 
"RTN","PSSDSAPM",321,0)
 N PSSDBAR,PSSINDSP,PSSIND1,PSSIND2,PSSIND3,PSSDSLCL,PSSDBNOD,PSSDBXP,PSSDBLPD,PSSDSXTD,PSSDBNT,PSSDBFAL,PSSDBLP,PSSDBIFL
"RTN","PSSDSAPM",322,0)
 S PSSDBLP="" F  S PSSDBLP=$O(PSSDBDS(PSSDBLP)) Q:PSSDBLP=""  D
"RTN","PSSDSAPM",323,0)
 .S PSSINDSP="",(PSSDBLPD,PSSDBFAL,PSSDBIFL)=0 K PSSDBAR
"RTN","PSSDSAPM",324,0)
 .I $D(PSSDBFDB(PSSDBLP,"DOSE_AMT")),$D(PSSDBFDB(PSSDBLP,"DOSE_UNIT")) S PSSINDSP=PSSDBFDB(PSSDBLP,"DOSE_AMT")_"^"_PSSDBFDB(PSSDBLP,"DOSE_UNIT") D DSPL Q
"RTN","PSSDSAPM",325,0)
 .I $G(PSSDBDS(PSSDBLP,"DRG_AMT")),$G(PSSDBDS(PSSDBLP,"DRG_UNIT"))'="" D
"RTN","PSSDSAPM",326,0)
 ..S PSSIND1=$S(PSSDBDS(PSSDBLP,"DRG_UNIT")["/":$P(PSSDBDS(PSSDBLP,"DRG_UNIT"),"/"),1:PSSDBDS(PSSDBLP,"DRG_UNIT"))
"RTN","PSSDSAPM",327,0)
 ..S PSSIND1=$$UP^XLFSTR(PSSIND1)
"RTN","PSSDSAPM",328,0)
 ..S PSSIND2=$$UNIT^PSSDSAPI(PSSIND1)
"RTN","PSSDSAPM",329,0)
 ..I PSSIND2'="" S PSSINDSP=PSSDBDS(PSSDBLP,"DRG_AMT")_"^"_PSSIND2 D DSPL S PSSDBFAL=1
"RTN","PSSDSAPM",330,0)
 .I PSSDBFAL Q
"RTN","PSSDSAPM",331,0)
 .I '$G(PSSDBFDB(PSSDBLP,"DRUG_IEN")) S PSSDBDS(PSSDBLP,"DRG_DISP")="" Q
"RTN","PSSDSAPM",332,0)
 .;"DOSE" Node should only come from CPRS, for selected Local Possible Dosage
"RTN","PSSDSAPM",333,0)
 .S PSSDSLCL=$S($G(PSSDBDS(PSSDBLP,"DOSE"))'="":$P($G(PSSDBDS(PSSDBLP,"DOSE")),"&",5),1:$G(PSSDBDS(PSSDBLP,"DO")))
"RTN","PSSDSAPM",334,0)
 .I PSSDSLCL'="" S PSSIND3=0 D
"RTN","PSSDSAPM",335,0)
 ..F PSSDBXP=0:0 S PSSDBXP=$O(^PSDRUG(PSSDBFDB(PSSDBLP,"DRUG_IEN"),"DOS2",PSSDBXP)) Q:'PSSDBXP!(PSSIND3)  D
"RTN","PSSDSAPM",336,0)
 ...S PSSDBNOD=$G(^PSDRUG(PSSDBFDB(PSSDBLP,"DRUG_IEN"),"DOS2",PSSDBXP,0))
"RTN","PSSDSAPM",337,0)
 ...I $$MTCH^PSSDSAPK S PSSDBLPD=1 I $P(PSSDBNOD,"^",5),$P(PSSDBNOD,"^",6)'="" D
"RTN","PSSDSAPM",338,0)
 ....S PSSDSXTD=+$P(PSSDBNOD,"^",5) I PSSDSXTD,$$SCREEN^XTID(51.24,.01,PSSDSXTD_",") Q
"RTN","PSSDSAPM",339,0)
 ....S PSSDBNT=$P($G(^PS(51.24,+$P(PSSDBNOD,"^",5),0)),"^",2)
"RTN","PSSDSAPM",340,0)
 ....I PSSDBNT'="" S PSSINDSP=$P(PSSDBNOD,"^",6)_"^"_PSSDBNT,(PSSIND3,PSSDBFAL)=1
"RTN","PSSDSAPM",341,0)
 .I PSSDBFAL D DSPL Q
"RTN","PSSDSAPM",342,0)
 .I PSSDBLPD D DPOP^PSSDSAPK I PSSDBFAL S PSSINDSP=PSSDBAR("AMN")_"^"_PSSDBAR("UNIT") D DSPL Q
"RTN","PSSDSAPM",343,0)
 .D ITEM^PSSDSAPK I PSSDBFAL S PSSINDSP=PSSDBAR("AMN")_"^"_PSSDBAR("UNIT") D DSPL Q
"RTN","PSSDSAPM",344,0)
 .D NUM^PSSDSAPL I $G(PSSDBAR("AMN"))'="",$G(PSSDBAR("UNIT"))'="" S PSSINDSP=PSSDBAR("AMN")_"^"_PSSDBAR("UNIT") D DSPL Q
"RTN","PSSDSAPM",345,0)
 .S PSSDBDS(PSSDBLP,"DRG_DISP")=""
"RTN","PSSDSAPM",346,0)
 Q
"RTN","PSSDSAPM",347,0)
 ;
"RTN","PSSDSAPM",348,0)
 ;
"RTN","PSSDSAPM",349,0)
DSPL ;Add leading zero
"RTN","PSSDSAPM",350,0)
 I $E(PSSINDSP)="." S PSSINDSP="0"_PSSINDSP
"RTN","PSSDSAPM",351,0)
 S PSSDBDS(PSSDBLP,"DRG_DISP")=PSSINDSP
"RTN","PSSDSAPM",352,0)
 Q
"RTN","PSSDSBBP")
0^19^B74998032^n/a
"RTN","PSSDSBBP",1,0)
PSSDSBBP ;BIR/RTR-Find Dose Unit and Numeric Dose for Dose Call ;02/12/09
"RTN","PSSDSBBP",2,0)
 ;;1.0;PHARMACY DATA MANAGEMENT;**117**;9/30/97;Build 101
"RTN","PSSDSBBP",3,0)
 ;
"RTN","PSSDSBBP",4,0)
EN(PSSQVIEN,PSSQVLCD) ;
"RTN","PSSDSBBP",5,0)
 ;PSSQVIEN = File 50 Internal Entry Number
"RTN","PSSDSBBP",6,0)
 ;PSSQVLCD = Local Possible Dosage
"RTN","PSSDSBBP",7,0)
 ;Find Dose Unit and Numeric Dose, called from PSSDSAPD
"RTN","PSSDSBBP",8,0)
 I '$G(PSSQVIEN) Q 0
"RTN","PSSDSBBP",9,0)
 I $G(PSSQVLCD)="" Q 0
"RTN","PSSDSBBP",10,0)
 D ^PSSDSBDA
"RTN","PSSDSBBP",11,0)
 N PSSQVSSS,PSSQVND1,PSSQVND3,PSSQVDF1,PSSQVDF2,PSSQVDF3,PSSQVFZ,PSSQVMUL
"RTN","PSSDSBBP",12,0)
 N X,Y,DIC,DTOUT,DLAYGO,PSSQVDF4,PSSQVDF5,PSSQVDF6,PSSQVDF7,PSSQVQT,PSSQVDF8,PSSQV9,PSSQVNUM,PSSQVRSL,PSSQVFNC,PSSQVFNX,PSSQVNDF,PSSQVDF
"RTN","PSSDSBBP",13,0)
 N PSSQVXF4,PSSQVXF5,PSSQVXF6,PSSQVXF7,PSSQVXF8,PSSQVXF9,PSSQVFL9,PSSQVFL8,PSSQVFZA
"RTN","PSSDSBBP",14,0)
 S PSSQVSSS=0
"RTN","PSSDSBBP",15,0)
 I PSSQVIEN D
"RTN","PSSDSBBP",16,0)
 .K PSSQVND1,PSSQVND3,PSSQVDF1,PSSQVDF2,PSSQVDF3
"RTN","PSSDSBBP",17,0)
 .S PSSQVND1=$P($G(^PSDRUG(PSSQVIEN,"ND")),"^"),PSSQVND3=$P($G(^PSDRUG(PSSQVIEN,"ND")),"^",3)
"RTN","PSSDSBBP",18,0)
 .;Next line, quit if not matched to NDF, only because rest of code is relying on PSNAPIS result
"RTN","PSSDSBBP",19,0)
 .I 'PSSQVND3!('PSSQVND1) Q
"RTN","PSSDSBBP",20,0)
 .K PSSQVNDF,PSSQVDF,PSSQVFZ
"RTN","PSSDSBBP",21,0)
 .S PSSQVFZ=""
"RTN","PSSDSBBP",22,0)
 .I PSSQVND1,PSSQVND3 S PSSQVNDF=$$DFSU^PSNAPIS(PSSQVND1,PSSQVND3) S PSSQVDF=$P(PSSQVNDF,"^")
"RTN","PSSDSBBP",23,0)
 .I $G(PSSQVDF)'>0,$P($G(^PSDRUG(PSSQVIEN,2)),"^") S PSSQVDF=$P($G(^PS(50.7,+$P($G(^PSDRUG(PSSQVIEN,2)),"^"),0)),"^",2)
"RTN","PSSDSBBP",24,0)
 .I $G(PSSQVDF) S PSSQVFZ=$P($G(^PS(50.606,PSSQVDF,0)),"^")
"RTN","PSSDSBBP",25,0)
 .I 1 D
"RTN","PSSDSBBP",26,0)
 ..S PSSQVLCD=$$UP^XLFSTR(PSSQVLCD)
"RTN","PSSDSBBP",27,0)
 ..K PSSQVDF1,PSSQVDF2,PSSQVDF3,PSSQVQT
"RTN","PSSDSBBP",28,0)
 ..S PSSQVQT=0
"RTN","PSSDSBBP",29,0)
 ..;
"RTN","PSSDSBBP",30,0)
 ..;
"RTN","PSSDSBBP",31,0)
 ..;Condition Set 4 (Part 1)
"RTN","PSSDSBBP",32,0)
 ..I $D(^TMP($J,"PSSQVCS4",PSSQVLCD)) D  K Y
"RTN","PSSDSBBP",33,0)
 ...S PSSQVQT=1
"RTN","PSSDSBBP",34,0)
 ...S PSSQVDF1=$P(^TMP($J,"PSSQVCS4",PSSQVLCD),"^"),PSSQVDF2=$P(^TMP($J,"PSSQVCS4",PSSQVLCD),"^",2)
"RTN","PSSDSBBP",35,0)
 ...S PSSQVDF3=$$DFIND(PSSQVDF2) I PSSQVDF3,PSSQVDF1 D
"RTN","PSSDSBBP",36,0)
 ....S PSSQVSSS=PSSQVDF3_"^"_PSSQVDF1
"RTN","PSSDSBBP",37,0)
 ..Q:PSSQVQT
"RTN","PSSDSBBP",38,0)
 ..;
"RTN","PSSDSBBP",39,0)
 ..;
"RTN","PSSDSBBP",40,0)
 ..;Condition Set 4 (Part 2)
"RTN","PSSDSBBP",41,0)
 ..D CS4
"RTN","PSSDSBBP",42,0)
 ..Q:PSSQVQT
"RTN","PSSDSBBP",43,0)
 ..;
"RTN","PSSDSBBP",44,0)
 ..;
"RTN","PSSDSBBP",45,0)
 ..;Condition Set 1
"RTN","PSSDSBBP",46,0)
 ..I $P($G(PSSQVNDF),"^",4)'="",$P($G(PSSQVNDF),"^",6)'="" D
"RTN","PSSDSBBP",47,0)
 ...I PSSQVFZ["TAB"!(PSSQVFZ["CAP")!(PSSQVFZ="GUM,CHEWABLE")!(PSSQVFZ="IMPLANT")!(PSSQVFZ="LOZENGE")!(PSSQVFZ="SUPP,RTL")!(PSSQVFZ="TROCHE")!(PSSQVFZ="INJ/IMPLANT") D
"RTN","PSSDSBBP",48,0)
 ....I $P(PSSQVNDF,"^",6)="MG"!($P(PSSQVNDF,"^",6)="MCG")!($P(PSSQVNDF,"^",6)="UNT")!($P(PSSQVNDF,"^",6)="GM")!($P(PSSQVNDF,"^",6)="MEQ") D
"RTN","PSSDSBBP",49,0)
 .....S PSSQVQT=1
"RTN","PSSDSBBP",50,0)
 .....K PSSQVDF4,PSSQVDF5,PSSQVDF6,PSSQVDF7,PSSQVDF8,PSSQVMUL
"RTN","PSSDSBBP",51,0)
 .....S PSSQVDF4=$P($G(^PSDRUG(PSSQVIEN,"DOS")),"^"),PSSQVDF5=$P($G(^PSDRUG(PSSQVIEN,"DOS")),"^",2)
"RTN","PSSDSBBP",52,0)
 .....I PSSQVDF5 K X S X=$P($G(^PS(50.607,PSSQVDF5,0)),"^") I X'="" S PSSQVDF6=$$DFIND(X)
"RTN","PSSDSBBP",53,0)
 .....I '$G(PSSQVDF6) K X S X=$P(PSSQVNDF,"^",6) S PSSQVDF6=$$DFIND(X)
"RTN","PSSDSBBP",54,0)
 .....K Y,X I '$G(PSSQVDF6) Q
"RTN","PSSDSBBP",55,0)
 .....S PSSQVDF7=$S($G(PSSQVDF4)'="":$G(PSSQVDF4),$P(PSSQVNDF,"^",4)'="":$P(PSSQVNDF,"^",4),1:"")
"RTN","PSSDSBBP",56,0)
 .....I PSSQVDF7'?.N&(PSSQVDF7'?.N1".".N) K PSSQVDF7
"RTN","PSSDSBBP",57,0)
 .....Q:$G(PSSQVDF7)=""
"RTN","PSSDSBBP",58,0)
 .....S PSSQVDF8=$$NUM^PSSDSBPA
"RTN","PSSDSBBP",59,0)
 .....Q:'PSSQVDF8
"RTN","PSSDSBBP",60,0)
 .....S PSSQVMUL=PSSQVDF8*PSSQVDF7
"RTN","PSSDSBBP",61,0)
 .....K:+PSSQVMUL'=PSSQVMUL!(PSSQVMUL>99999999999999)!(PSSQVMUL<.00001)!(PSSQVMUL?.E1"."6N.N) PSSQVMUL
"RTN","PSSDSBBP",62,0)
 .....I '$G(PSSQVMUL) Q
"RTN","PSSDSBBP",63,0)
 .....S PSSQVSSS=PSSQVDF6_"^"_PSSQVMUL
"RTN","PSSDSBBP",64,0)
 ..Q:$G(PSSQVQT)
"RTN","PSSDSBBP",65,0)
 ..;
"RTN","PSSDSBBP",66,0)
 ..;
"RTN","PSSDSBBP",67,0)
 ..;Condition Set 2
"RTN","PSSDSBBP",68,0)
 ..I $P($G(PSSQVNDF),"^",4)'="",$P($G(PSSQVNDF),"^",6)'="" D
"RTN","PSSDSBBP",69,0)
 ...K PSSQV9,PSSQVFL8,PSSQVFZA
"RTN","PSSDSBBP",70,0)
 ...S PSSQV9=$P(PSSQVNDF,"^",6)
"RTN","PSSDSBBP",71,0)
 ...I PSSQVFZ="ELIXIR"!(PSSQVFZ="LIQUID")!(PSSQVFZ="LIQUID,ORAL")!(PSSQVFZ="PWDR,RENST-ORAL")!(PSSQVFZ="SOLN,CONC")!(PSSQVFZ="SOLN,ORAL")!(PSSQVFZ="SUSP")!(PSSQVFZ="SUSP,ORAL")!(PSSQVFZ="SYRUP")!(PSSQVFZ="SYRUP,ORAL") S PSSQVFZA=1
"RTN","PSSDSBBP",72,0)
 ...I PSSQVFZ="INJ"!(PSSQVFZ="INJ,SOLN") S PSSQVFZA=1
"RTN","PSSDSBBP",73,0)
 ...I $G(PSSQVFZA) D
"RTN","PSSDSBBP",74,0)
 ....I PSSQV9="GM/ML"!(PSSQV9="GM/1ML")!(PSSQV9="GM/5ML")!(PSSQV9="GM/10ML")!(PSSQV9="GM/15ML")!(PSSQV9="GM/30ML") S PSSQVFL8=1
"RTN","PSSDSBBP",75,0)
 ....I PSSQV9="MG/ML"!(PSSQV9="MG/1ML")!(PSSQV9="MG/5ML")!(PSSQV9="MG/10ML")!(PSSQV9="MG/15ML")!(PSSQV9="MG/30ML")!(PSSQV9="MEQ/ML")!(PSSQV9="MEQ/1ML")!(PSSQV9="MEQ/5ML")!(PSSQV9="MEQ/10ML")!(PSSQV9="MEQ/15ML")!(PSSQV9="MEQ/30ML") S PSSQVFL8=1
"RTN","PSSDSBBP",76,0)
 ....I $G(PSSQVFL8) D
"RTN","PSSDSBBP",77,0)
 .....S PSSQVQT=1
"RTN","PSSDSBBP",78,0)
 .....K PSSQVXF4,PSSQVXF5,PSSQVXF6,PSSQVXF7,PSSQVXF8,PSSQVXF9,PSSQVNUM,PSSQVFL9
"RTN","PSSDSBBP",79,0)
 .....S PSSQVXF4=$P($G(^PSDRUG(PSSQVIEN,"DOS")),"^"),PSSQVXF5=$P($G(^PSDRUG(PSSQVIEN,"DOS")),"^",2)
"RTN","PSSDSBBP",80,0)
 .....I PSSQVXF5 K X S X=$P($G(^PS(50.607,PSSQVXF5,0)),"^") D
"RTN","PSSDSBBP",81,0)
 ......S PSSQVFL9=0
"RTN","PSSDSBBP",82,0)
 ......I X="GM/ML"!(X="GM/1ML")!(X="GM/5ML")!(X="GM/10ML")!(X="GM/15ML")!(X="GM/30ML") S PSSQVFL9=1
"RTN","PSSDSBBP",83,0)
 ......I X="MG/ML"!(X="MG/1ML")!(X="MG/5ML")!(X="MG/10ML")!(X="MG/15ML")!(X="MG/30ML")!(X="MEQ/ML")!(X="MEQ/1ML")!(X="MEQ/5ML")!(X="MEQ/10ML")!(X="MEQ/15ML")!(X="MEQ/30ML") S PSSQVFL9=1
"RTN","PSSDSBBP",84,0)
 ......Q:'PSSQVFL9
"RTN","PSSDSBBP",85,0)
 ......S PSSQVXF8=$P(X,"/") S PSSQVNUM=+$P(X,"/",2) S PSSQVXF6=$$DFIND(PSSQVXF8)
"RTN","PSSDSBBP",86,0)
 .....I '$G(PSSQVXF6) K PSSQVNUM,PSSQVXF6 K X S X=PSSQV9 S PSSQVXF9=$P(X,"/") S PSSQVXF6=$$DFIND(PSSQVXF9) S PSSQVNUM=+$P(PSSQV9,"/",2)
"RTN","PSSDSBBP",87,0)
 .....I '$G(PSSQVXF6) Q
"RTN","PSSDSBBP",88,0)
 .....I PSSQVNUM'=0,PSSQVNUM'=1,PSSQVNUM'=5,PSSQVNUM'=10,PSSQVNUM'=15,PSSQVNUM'=30 Q
"RTN","PSSDSBBP",89,0)
 .....I PSSQVNUM=0 S PSSQVNUM=1
"RTN","PSSDSBBP",90,0)
 .....S PSSQVXF7=$S($G(PSSQVXF4)'="":$G(PSSQVXF4),$P(PSSQVNDF,"^",4)'="":$P(PSSQVNDF,"^",4),1:"")
"RTN","PSSDSBBP",91,0)
 .....I PSSQVXF7'?.N&(PSSQVXF7'?.N1".".N) K PSSQVXF7
"RTN","PSSDSBBP",92,0)
 .....Q:$G(PSSQVXF7)=""
"RTN","PSSDSBBP",93,0)
 .....I '$D(^TMP($J,"PSSQVCS2",PSSQVLCD,PSSQVNUM)) Q
"RTN","PSSDSBBP",94,0)
 .....K PSSQVFNX,PSSQVRSL,PSSQVFNC
"RTN","PSSDSBBP",95,0)
 .....S PSSQVRSL=$P(^TMP($J,"PSSQVCS2",PSSQVLCD,PSSQVNUM),"^"),PSSQVFNC=$P(^TMP($J,"PSSQVCS2",PSSQVLCD,PSSQVNUM),"^",2)
"RTN","PSSDSBBP",96,0)
 .....I PSSQVFNC="M" S PSSQVFNX=PSSQVXF7*PSSQVRSL
"RTN","PSSDSBBP",97,0)
 .....I PSSQVFNC="D" S PSSQVFNX=PSSQVXF7/PSSQVRSL
"RTN","PSSDSBBP",98,0)
 .....Q:$G(PSSQVFNX)=""
"RTN","PSSDSBBP",99,0)
 .....I +PSSQVFNX'=PSSQVFNX!(PSSQVFNX>99999999999999)!(PSSQVFNX<.00001)!(PSSQVFNX?.E1"."6N.N) Q
"RTN","PSSDSBBP",100,0)
 .....S PSSQVSSS=PSSQVXF6_"^"_PSSQVFNX
"RTN","PSSDSBBP",101,0)
 ..Q:$G(PSSQVQT)
"RTN","PSSDSBBP",102,0)
 ..;
"RTN","PSSDSBBP",103,0)
 ..;
"RTN","PSSDSBBP",104,0)
 ..;Condition Set 3
"RTN","PSSDSBBP",105,0)
 ..I $P($G(PSSQVNDF),"^",4)'="",$P($G(PSSQVNDF),"^",6)'="" D
"RTN","PSSDSBBP",106,0)
 ...N PSSQVPK1,PSSQVPK2,PSSQVPK3,PSSQVPK4,PSSQVPK5,PSSQVPK6,PSSQVPK7,PSSQVPK8,PSSQVPK9,PSSQVPKZ,PSSQVPKA,PSSQVPKB
"RTN","PSSDSBBP",107,0)
 ...S PSSQVPK1=$P(PSSQVNDF,"^",6)
"RTN","PSSDSBBP",108,0)
 ...S PSSQVPK3=0 F PSSQVPK2=1:1:$L(PSSQVPK1) I $E(PSSQVPK1,PSSQVPK2)="/" S PSSQVPK3=PSSQVPK3+1
"RTN","PSSDSBBP",109,0)
 ...I PSSQVPK3=1,$P(PSSQVPK1,"/",2)="PKT" D
"RTN","PSSDSBBP",110,0)
 ....S PSSQVQT=1
"RTN","PSSDSBBP",111,0)
 ....S PSSQVPK4=$P($G(^PSDRUG(PSSQVIEN,"DOS")),"^"),PSSQVPK5=$P($G(^PSDRUG(PSSQVIEN,"DOS")),"^",2)
"RTN","PSSDSBBP",112,0)
 ....K PSSQVPK6,PSSQVPK7,PSSQVPK8,PSSQVPK9,PSSQVPKZ,PSSQVPKA,PSSQVPKB
"RTN","PSSDSBBP",113,0)
 ....I PSSQVPK5 S PSSQVPK6=$P($G(^PS(50.607,PSSQVPK5,0)),"^") D
"RTN","PSSDSBBP",114,0)
 .....S PSSQVPK3=0 F PSSQVPK2=1:1:$L(PSSQVPK6) I $E(PSSQVPK6,PSSQVPK2)="/" S PSSQVPK3=PSSQVPK3+1
"RTN","PSSDSBBP",115,0)
 .....I PSSQVPK3=1,$P(PSSQVPK6,"/",2)="PKT" S PSSQVPK7=$P(PSSQVPK6,"/") S PSSQVPK8=$$DFIND(PSSQVPK7)
"RTN","PSSDSBBP",116,0)
 ....I '$G(PSSQVPK8) K PSSQVPK8 S PSSQVPK9=$P(PSSQVPK1,"/") S PSSQVPK8=$$DFIND(PSSQVPK9)
"RTN","PSSDSBBP",117,0)
 ....I '$G(PSSQVPK8) Q
"RTN","PSSDSBBP",118,0)
 ....S PSSQVPKZ=$S($G(PSSQVPK4)'="":$G(PSSQVPK4),$P(PSSQVNDF,"^",4)'="":$P(PSSQVNDF,"^",4),1:"")
"RTN","PSSDSBBP",119,0)
 ....I PSSQVPKZ'?.N&(PSSQVPKZ'?.N1".".N) K PSSQVPKZ
"RTN","PSSDSBBP",120,0)
 ....Q:$G(PSSQVPKZ)=""
"RTN","PSSDSBBP",121,0)
 ....S PSSQVPKB=$$NUM^PSSDSBPA
"RTN","PSSDSBBP",122,0)
 ....Q:'PSSQVPKB
"RTN","PSSDSBBP",123,0)
 ....S PSSQVPKA=PSSQVPKZ*PSSQVPKB
"RTN","PSSDSBBP",124,0)
 ....I +PSSQVPKA'=PSSQVPKA!(PSSQVPKA>99999999999999)!(PSSQVPKA<.00001)!(PSSQVPKA?.E1"."6N.N) Q
"RTN","PSSDSBBP",125,0)
 ....S PSSQVSSS=PSSQVPK8_"^"_PSSQVPKA
"RTN","PSSDSBBP",126,0)
 ..Q:$G(PSSQVQT)
"RTN","PSSDSBBP",127,0)
 ..;
"RTN","PSSDSBBP",128,0)
 ..;
"RTN","PSSDSBBP",129,0)
 ..;Condition set 5
"RTN","PSSDSBBP",130,0)
 ..I PSSQVND1,PSSQVND3,$P($G(PSSQVNDF),"^",4)="",$P($G(PSSQVNDF),"^",6)="" D
"RTN","PSSDSBBP",131,0)
 ...I $D(^TMP($J,"PSSQVCS5",PSSQVLCD)) D
"RTN","PSSDSBBP",132,0)
 ....N PSSQVF51,PSSQVF52,PSSQVF53
"RTN","PSSDSBBP",133,0)
 ....S PSSQVF51=$P(^TMP($J,"PSSQVCS5",PSSQVLCD),"^"),PSSQVF52=$P(^TMP($J,"PSSQVCS5",PSSQVLCD),"^",2)
"RTN","PSSDSBBP",134,0)
 ....S PSSQVF53=$$DFIND(PSSQVF52) I PSSQVF51,PSSQVF53 D
"RTN","PSSDSBBP",135,0)
 .....S PSSQVSSS=PSSQVF53_"^"_PSSQVF51
"RTN","PSSDSBBP",136,0)
 K ^TMP($J,"PSSQVCS2")
"RTN","PSSDSBBP",137,0)
 K ^TMP($J,"PSSQVCS4")
"RTN","PSSDSBBP",138,0)
 K ^TMP($J,"PSSQVCS5")
"RTN","PSSDSBBP",139,0)
 Q PSSQVSSS
"RTN","PSSDSBBP",140,0)
 ;
"RTN","PSSDSBBP",141,0)
CS4 ;
"RTN","PSSDSBBP",142,0)
 I PSSQVLCD?.N1" UNITS" D CS4ST Q
"RTN","PSSDSBBP",143,0)
 I PSSQVLCD?.N1" UNIT" D CS4ST Q
"RTN","PSSDSBBP",144,0)
 I PSSQVLCD?.N1" UNIT(S)" D CS4ST Q
"RTN","PSSDSBBP",145,0)
 I PSSQVLCD?.N1" UNT" D CS4ST Q
"RTN","PSSDSBBP",146,0)
 I PSSQVLCD?.N1" UNT(S)" D CS4ST Q
"RTN","PSSDSBBP",147,0)
 I PSSQVLCD?.N1" UNTS" D CS4ST Q
"RTN","PSSDSBBP",148,0)
 I PSSQVLCD?.N1".".N1" UNITS" D CS4ST Q
"RTN","PSSDSBBP",149,0)
 I PSSQVLCD?.N1".".N1" UNIT" D CS4ST Q
"RTN","PSSDSBBP",150,0)
 I PSSQVLCD?.N1".".N1" UNIT(S)" D CS4ST Q
"RTN","PSSDSBBP",151,0)
 I PSSQVLCD?.N1".".N1" UNT" D CS4ST Q
"RTN","PSSDSBBP",152,0)
 I PSSQVLCD?.N1".".N1" UNT(S)" D CS4ST Q
"RTN","PSSDSBBP",153,0)
 I PSSQVLCD?.N1".".N1" UNTS" D CS4ST Q
"RTN","PSSDSBBP",154,0)
 D COMMA
"RTN","PSSDSBBP",155,0)
 Q
"RTN","PSSDSBBP",156,0)
 ;
"RTN","PSSDSBBP",157,0)
CS4ST ;
"RTN","PSSDSBBP",158,0)
 S PSSQVQT=1
"RTN","PSSDSBBP",159,0)
 N PSSQVXXX,PSSQVD11,PSSQVD12
"RTN","PSSDSBBP",160,0)
 S PSSQVXXX=+PSSQVLCD
"RTN","PSSDSBBP",161,0)
 K:+PSSQVXXX'=PSSQVXXX!(PSSQVXXX>99999999999999)!(PSSQVXXX<.00001)!(PSSQVXXX?.E1"."6N.N) PSSQVXXX
"RTN","PSSDSBBP",162,0)
 I '$G(PSSQVXXX) Q
"RTN","PSSDSBBP",163,0)
 S PSSQVD12="UNIT(S)"
"RTN","PSSDSBBP",164,0)
 S PSSQVD11=$$DFIND(PSSQVD12) I PSSQVD11 D
"RTN","PSSDSBBP",165,0)
 .S PSSQVSSS=PSSQVD11_"^"_PSSQVXXX
"RTN","PSSDSBBP",166,0)
 K Y
"RTN","PSSDSBBP",167,0)
 Q
"RTN","PSSDSBBP",168,0)
 ;
"RTN","PSSDSBBP",169,0)
 ;
"RTN","PSSDSBBP",170,0)
DFIND(PSSQVFND) ;Fine IEN, can't do DIC Lookup because of exact match check
"RTN","PSSDSBBP",171,0)
 N PSSQVFN1
"RTN","PSSDSBBP",172,0)
 S PSSQVFN1=$O(^PS(51.24,"B",PSSQVFND,0)) I PSSQVFN1,'$$SCREEN^XTID(51.24,.01,PSSQVFN1_",") Q PSSQVFN1
"RTN","PSSDSBBP",173,0)
 S PSSQVFN1=$O(^PS(51.24,"C",PSSQVFND,0)) I PSSQVFN1,'$$SCREEN^XTID(51.24,.01,PSSQVFN1_",") Q PSSQVFN1
"RTN","PSSDSBBP",174,0)
 S PSSQVFN1=$O(^PS(51.24,"D",PSSQVFND,0)) I PSSQVFN1,'$$SCREEN^XTID(51.24,.01,PSSQVFN1_",") Q PSSQVFN1
"RTN","PSSDSBBP",175,0)
 Q 0
"RTN","PSSDSBBP",176,0)
 ;
"RTN","PSSDSBBP",177,0)
COMMA ;
"RTN","PSSDSBBP",178,0)
 N PSSQVCM1,PSSQVCM2,PSSQVCM3,PSSQVCM4
"RTN","PSSDSBBP",179,0)
 I PSSQVLCD'[" " Q
"RTN","PSSDSBBP",180,0)
 S PSSQVCM1=$P(PSSQVLCD," ")
"RTN","PSSDSBBP",181,0)
 S PSSQVCM3=$F(PSSQVLCD," ")
"RTN","PSSDSBBP",182,0)
 S PSSQVCM2=$TR(PSSQVCM1,",","")
"RTN","PSSDSBBP",183,0)
 S PSSQVCM4=PSSQVCM2_$E(PSSQVLCD,(PSSQVCM3-1),$L(PSSQVLCD))
"RTN","PSSDSBBP",184,0)
 I PSSQVCM4?.N1" UNITS" D CS4ST1 Q
"RTN","PSSDSBBP",185,0)
 I PSSQVCM4?.N1" UNIT" D CS4ST1 Q
"RTN","PSSDSBBP",186,0)
 I PSSQVCM4?.N1" UNIT(S)" D CS4ST1 Q
"RTN","PSSDSBBP",187,0)
 I PSSQVCM4?.N1" UNT" D CS4ST1 Q
"RTN","PSSDSBBP",188,0)
 I PSSQVCM4?.N1" UNT(S)" D CS4ST1 Q
"RTN","PSSDSBBP",189,0)
 I PSSQVCM4?.N1" UNTS" D CS4ST1 Q
"RTN","PSSDSBBP",190,0)
 Q
"RTN","PSSDSBBP",191,0)
 ;
"RTN","PSSDSBBP",192,0)
CS4ST1 ;
"RTN","PSSDSBBP",193,0)
 S PSSQVQT=1
"RTN","PSSDSBBP",194,0)
 N PSSQVCM5,PSSQVCM6,PSSQVCM7
"RTN","PSSDSBBP",195,0)
 S PSSQVCM5=+PSSQVCM4
"RTN","PSSDSBBP",196,0)
 K:+PSSQVCM5'=PSSQVCM5!(PSSQVCM5>99999999999999)!(PSSQVCM5<.00001)!(PSSQVCM5?.E1"."6N.N) PSSQVCM5
"RTN","PSSDSBBP",197,0)
 I '$G(PSSQVCM5) Q
"RTN","PSSDSBBP",198,0)
 S PSSQVCM7="UNIT(S)"
"RTN","PSSDSBBP",199,0)
 S PSSQVCM6=$$DFIND(PSSQVCM7) I PSSQVCM6 D
"RTN","PSSDSBBP",200,0)
 .S PSSQVSSS=PSSQVCM6_"^"_PSSQVCM5
"RTN","PSSDSBBP",201,0)
 K Y
"RTN","PSSDSBBP",202,0)
 Q
"RTN","PSSDSBDA")
0^20^B108168713^n/a
"RTN","PSSDSBDA",1,0)
PSSDSBDA ;BIR/RTR-Data used to populate Dose Unit and Numeric Dose ;02/12/09
"RTN","PSSDSBDA",2,0)
 ;;1.0;PHARMACY DATA MANAGEMENT;**117**;9/30/97;Build 101
"RTN","PSSDSBDA",3,0)
 ;
"RTN","PSSDSBDA",4,0)
 K ^TMP($J,"PSSQVCS2")
"RTN","PSSDSBDA",5,0)
 K ^TMP($J,"PSSQVCS4")
"RTN","PSSDSBDA",6,0)
 K ^TMP($J,"PSSQVCS5")
"RTN","PSSDSBDA",7,0)
 N PSSQVCAA,PSSQVCBB,PSSQVCCC,PSSQVCDD
"RTN","PSSDSBDA",8,0)
 F PSSQVCAA=1:1 S PSSQVCBB=$T(SET4+PSSQVCAA) Q:$P(PSSQVCBB,";;",2)=""  S ^TMP($J,"PSSQVCS4",$P(PSSQVCBB,";;",2))=$P(PSSQVCBB,";;",3)_"^"_$P(PSSQVCBB,";;",4)
"RTN","PSSDSBDA",9,0)
 F PSSQVCCC=1:1 S PSSQVCDD=$T(SET2+PSSQVCCC) Q:$P(PSSQVCDD,";;",2)=""  S ^TMP($J,"PSSQVCS2",$P(PSSQVCDD,";;",2),$P(PSSQVCDD,";;",3))=$P(PSSQVCDD,";;",4)_"^"_$P(PSSQVCDD,";;",5)
"RTN","PSSDSBDA",10,0)
 ;F PSSQVCEE=1:1 S PSSQVCFF=$T(SET5+PSSQVCEE) Q:$P(PSSQVCFF,";;",2)=""  S ^TMP($J,"PSSQVCS5",$P(PSSQVCFF,";;",2))=$P(PSSQVCFF,";;",3)_"^"_$P(PSSQVCFF,";;",4)
"RTN","PSSDSBDA",11,0)
 D ^PSSDSBDB
"RTN","PSSDSBDA",12,0)
 Q
"RTN","PSSDSBDA",13,0)
 ;
"RTN","PSSDSBDA",14,0)
SET2 ;
"RTN","PSSDSBDA",15,0)
 ;;ONE TEASPOON;;1;;5;;M
"RTN","PSSDSBDA",16,0)
 ;;ONE TEASPOON;;5;;1;;M
"RTN","PSSDSBDA",17,0)
 ;;ONE TEASPOON;;10;;2;;D
"RTN","PSSDSBDA",18,0)
 ;;ONE TEASPOON;;15;;3;;D
"RTN","PSSDSBDA",19,0)
 ;;1 TEASPOON;;1;;5;;M
"RTN","PSSDSBDA",20,0)
 ;;1 TEASPOON;;5;;1;;M
"RTN","PSSDSBDA",21,0)
 ;;1 TEASPOON;;10;;2;;D
"RTN","PSSDSBDA",22,0)
 ;;1 TEASPOON;;15;;3;;D
"RTN","PSSDSBDA",23,0)
 ;;ONE TEASPOON(S);;1;;5;;M
"RTN","PSSDSBDA",24,0)
 ;;ONE TEASPOON(S);;5;;1;;M
"RTN","PSSDSBDA",25,0)
 ;;ONE TEASPOON(S);;10;;2;;D
"RTN","PSSDSBDA",26,0)
 ;;ONE TEASPOON(S);;15;;3;;D
"RTN","PSSDSBDA",27,0)
 ;;1 TEASPOON(S);;1;;5;;M
"RTN","PSSDSBDA",28,0)
 ;;1 TEASPOON(S);;5;;1;;M
"RTN","PSSDSBDA",29,0)
 ;;1 TEASPOON(S);;10;;2;;D
"RTN","PSSDSBDA",30,0)
 ;;1 TEASPOON(S);;15;;3;;D
"RTN","PSSDSBDA",31,0)
 ;;ONE TEASPOONFUL;;1;;5;;M
"RTN","PSSDSBDA",32,0)
 ;;ONE TEASPOONFUL;;5;;1;;M
"RTN","PSSDSBDA",33,0)
 ;;ONE TEASPOONFUL;;10;;2;;D
"RTN","PSSDSBDA",34,0)
 ;;ONE TEASPOONFUL;;15;;3;;D
"RTN","PSSDSBDA",35,0)
 ;;ONE TEASPOONSFUL;;1;;5;;M
"RTN","PSSDSBDA",36,0)
 ;;ONE TEASPOONSFUL;;5;;1;;M
"RTN","PSSDSBDA",37,0)
 ;;ONE TEASPOONSFUL;;10;;2;;D
"RTN","PSSDSBDA",38,0)
 ;;ONE TEASPOONSFUL;;15;;3;;D
"RTN","PSSDSBDA",39,0)
 ;;1 TEASPOONFUL;;1;;5;;M
"RTN","PSSDSBDA",40,0)
 ;;1 TEASPOONFUL;;5;;1;;M
"RTN","PSSDSBDA",41,0)
 ;;1 TEASPOONFUL;;10;;2;;D
"RTN","PSSDSBDA",42,0)
 ;;1 TEASPOONFUL;;15;;3;;D
"RTN","PSSDSBDA",43,0)
 ;;1 TEASPOONSFUL;;1;;5;;M
"RTN","PSSDSBDA",44,0)
 ;;1 TEASPOONSFUL;;5;;1;;M
"RTN","PSSDSBDA",45,0)
 ;;1 TEASPOONSFUL;;10;;2;;D
"RTN","PSSDSBDA",46,0)
 ;;1 TEASPOONSFUL;;15;;3;;D
"RTN","PSSDSBDA",47,0)
 ;;ONE TEASPOONFUL(S);;1;;5;;M
"RTN","PSSDSBDA",48,0)
 ;;ONE TEASPOONFUL(S);;5;;1;;M
"RTN","PSSDSBDA",49,0)
 ;;ONE TEASPOONFUL(S);;10;;2;;D
"RTN","PSSDSBDA",50,0)
 ;;ONE TEASPOONFUL(S);;15;;3;;D
"RTN","PSSDSBDA",51,0)
 ;;1 TEASPOONFUL(S);;1;;5;;M
"RTN","PSSDSBDA",52,0)
 ;;1 TEASPOONFUL(S);;5;;1;;M
"RTN","PSSDSBDA",53,0)
 ;;1 TEASPOONFUL(S);;10;;2;;D
"RTN","PSSDSBDA",54,0)
 ;;1 TEASPOONFUL(S);;15;;3;;D
"RTN","PSSDSBDA",55,0)
 ;;TWO TEASPOONS;;1;;10;;M
"RTN","PSSDSBDA",56,0)
 ;;TWO TEASPOONS;;5;;2;;M
"RTN","PSSDSBDA",57,0)
 ;;TWO TEASPOONS;;10;;1;;M
"RTN","PSSDSBDA",58,0)
 ;;2 TEASPOONS;;1;;10;;M
"RTN","PSSDSBDA",59,0)
 ;;2 TEASPOONS;;5;;2;;M
"RTN","PSSDSBDA",60,0)
 ;;2 TEASPOONS;;10;;1;;M
"RTN","PSSDSBDA",61,0)
 ;;TWO TEASPOON(S);;1;;10;;M
"RTN","PSSDSBDA",62,0)
 ;;TWO TEASPOON(S);;5;;2;;M
"RTN","PSSDSBDA",63,0)
 ;;TWO TEASPOON(S);;10;;1;;M
"RTN","PSSDSBDA",64,0)
 ;;2 TEASPOON(S);;1;;10;;M
"RTN","PSSDSBDA",65,0)
 ;;2 TEASPOON(S);;5;;2;;M
"RTN","PSSDSBDA",66,0)
 ;;2 TEASPOON(S);;10;;1;;M
"RTN","PSSDSBDA",67,0)
 ;;TWO TEASPOONFULS;;1;;10;;M
"RTN","PSSDSBDA",68,0)
 ;;TWO TEASPOONFULS;;5;;2;;M
"RTN","PSSDSBDA",69,0)
 ;;TWO TEASPOONFULS;;10;;1;;M
"RTN","PSSDSBDA",70,0)
 ;;TWO TEASPOONSFUL;;1;;10;;M
"RTN","PSSDSBDA",71,0)
 ;;TWO TEASPOONSFUL;;5;;2;;M
"RTN","PSSDSBDA",72,0)
 ;;TWO TEASPOONSFUL;;10;;1;;M
"RTN","PSSDSBDA",73,0)
 ;;2 TEASPOONFULS;;1;;10;;M
"RTN","PSSDSBDA",74,0)
 ;;2 TEASPOONFULS;;5;;2;;M
"RTN","PSSDSBDA",75,0)
 ;;2 TEASPOONFULS;;10;;1;;M
"RTN","PSSDSBDA",76,0)
 ;;2 TEASPOONSFUL;;1;;10;;M
"RTN","PSSDSBDA",77,0)
 ;;2 TEASPOONSFUL;;5;;2;;M
"RTN","PSSDSBDA",78,0)
 ;;2 TEASPOONSFUL;;10;;1;;M
"RTN","PSSDSBDA",79,0)
 ;;TWO TEASPOONFUL(S);;1;;10;;M
"RTN","PSSDSBDA",80,0)
 ;;TWO TEASPOONFUL(S);;5;;2;;M
"RTN","PSSDSBDA",81,0)
 ;;TWO TEASPOONFUL(S);;10;;1;;M
"RTN","PSSDSBDA",82,0)
 ;;2 TEASPOONFUL(S);;1;;10;;M
"RTN","PSSDSBDA",83,0)
 ;;2 TEASPOONFUL(S);;5;;2;;M
"RTN","PSSDSBDA",84,0)
 ;;2 TEASPOONFUL(S);;10;;1;;M
"RTN","PSSDSBDA",85,0)
 ;;ONE TABLESPOON;;1;;15;;M
"RTN","PSSDSBDA",86,0)
 ;;ONE TABLESPOON;;5;;3;;M
"RTN","PSSDSBDA",87,0)
 ;;ONE TABLESPOON;;15;;1;;M
"RTN","PSSDSBDA",88,0)
 ;;ONE TABLESPOON;;30;;2;;D
"RTN","PSSDSBDA",89,0)
 ;;1 TABLESPOON;;1;;15;;M
"RTN","PSSDSBDA",90,0)
 ;;1 TABLESPOON;;5;;3;;M
"RTN","PSSDSBDA",91,0)
 ;;1 TABLESPOON;;15;;1;;M
"RTN","PSSDSBDA",92,0)
 ;;1 TABLESPOON;;30;;2;;D
"RTN","PSSDSBDA",93,0)
 ;;ONE TABLESPOON(S);;1;;15;;M
"RTN","PSSDSBDA",94,0)
 ;;ONE TABLESPOON(S);;5;;3;;M
"RTN","PSSDSBDA",95,0)
 ;;ONE TABLESPOON(S);;15;;1;;M
"RTN","PSSDSBDA",96,0)
 ;;ONE TABLESPOON(S);;30;;2;;D
"RTN","PSSDSBDA",97,0)
 ;;1 TABLESPOON(S);;1;;15;;M
"RTN","PSSDSBDA",98,0)
 ;;1 TABLESPOON(S);;5;;3;;M
"RTN","PSSDSBDA",99,0)
 ;;1 TABLESPOON(S);;15;;1;;M
"RTN","PSSDSBDA",100,0)
 ;;1 TABLESPOON(S);;30;;2;;D
"RTN","PSSDSBDA",101,0)
 ;;ONE TABLESPOONFUL;;1;;15;;M
"RTN","PSSDSBDA",102,0)
 ;;ONE TABLESPOONFUL;;5;;3;;M
"RTN","PSSDSBDA",103,0)
 ;;ONE TABLESPOONFUL;;15;;1;;M
"RTN","PSSDSBDA",104,0)
 ;;ONE TABLESPOONFUL;;30;;2;;D
"RTN","PSSDSBDA",105,0)
 ;;ONE TABLESPOONSFUL;;1;;15;;M
"RTN","PSSDSBDA",106,0)
 ;;ONE TABLESPOONSFUL;;5;;3;;M
"RTN","PSSDSBDA",107,0)
 ;;ONE TABLESPOONSFUL;;15;;1;;M
"RTN","PSSDSBDA",108,0)
 ;;ONE TABLESPOONSFUL;;30;;2;;D
"RTN","PSSDSBDA",109,0)
 ;;1 TABLESPOONFUL;;1;;15;;M
"RTN","PSSDSBDA",110,0)
 ;;1 TABLESPOONFUL;;5;;3;;M
"RTN","PSSDSBDA",111,0)
 ;;1 TABLESPOONFUL;;15;;1;;M
"RTN","PSSDSBDA",112,0)
 ;;1 TABLESPOONFUL;;30;;2;;D
"RTN","PSSDSBDA",113,0)
 ;;1 TABLESPOONSFUL;;1;;15;;M
"RTN","PSSDSBDA",114,0)
 ;;1 TABLESPOONSFUL;;5;;3;;M
"RTN","PSSDSBDA",115,0)
 ;;1 TABLESPOONSFUL;;15;;1;;M
"RTN","PSSDSBDA",116,0)
 ;;1 TABLESPOONSFUL;;30;;2;;D
"RTN","PSSDSBDA",117,0)
 ;;ONE TABLESPOONFUL(S);;1;;15;;M
"RTN","PSSDSBDA",118,0)
 ;;ONE TABLESPOONFUL(S);;5;;3;;M
"RTN","PSSDSBDA",119,0)
 ;;ONE TABLESPOONFUL(S);;15;;1;;M
"RTN","PSSDSBDA",120,0)
 ;;ONE TABLESPOONFUL(S);;30;;2;;D
"RTN","PSSDSBDA",121,0)
 ;;1 TABLESPOONFUL(S);;1;;15;;M
"RTN","PSSDSBDA",122,0)
 ;;1 TABLESPOONFUL(S);;5;;3;;M
"RTN","PSSDSBDA",123,0)
 ;;1 TABLESPOONFUL(S);;15;;1;;M
"RTN","PSSDSBDA",124,0)
 ;;1 TABLESPOONFUL(S);;30;;2;;D
"RTN","PSSDSBDA",125,0)
 ;;TWO TABLESPOONS;;1;;30;;M
"RTN","PSSDSBDA",126,0)
 ;;TWO TABLESPOONS;;15;;2;;M
"RTN","PSSDSBDA",127,0)
 ;;TWO TABLESPOONS;;30;;1;;M
"RTN","PSSDSBDA",128,0)
 ;;TWO TABLESPOONS;;5;;6;;M
"RTN","PSSDSBDA",129,0)
 ;;2 TABLESPOONS;;1;;30;;M
"RTN","PSSDSBDA",130,0)
 ;;2 TABLESPOONS;;15;;2;;M
"RTN","PSSDSBDA",131,0)
 ;;2 TABLESPOONS;;30;;1;;M
"RTN","PSSDSBDA",132,0)
 ;;2 TABLESPOONS;;5;;6;;M
"RTN","PSSDSBDA",133,0)
 ;;TWO TABLESPOON(S);;1;;30;;M
"RTN","PSSDSBDA",134,0)
 ;;TWO TABLESPOON(S);;15;;2;;M
"RTN","PSSDSBDA",135,0)
 ;;TWO TABLESPOON(S);;30;;1;;M
"RTN","PSSDSBDA",136,0)
 ;;TWO TABLESPOON(S);;5;;6;;M
"RTN","PSSDSBDA",137,0)
 ;;2 TABLESPOON(S);;1;;30;;M
"RTN","PSSDSBDA",138,0)
 ;;2 TABLESPOON(S);;15;;2;;M
"RTN","PSSDSBDA",139,0)
 ;;2 TABLESPOON(S);;30;;1;;M
"RTN","PSSDSBDA",140,0)
 ;;2 TABLESPOON(S);;5;;6;;M
"RTN","PSSDSBDA",141,0)
 ;;TWO TABLESPOONFULS;;1;;30;;M
"RTN","PSSDSBDA",142,0)
 ;;TWO TABLESPOONFULS;;15;;2;;M
"RTN","PSSDSBDA",143,0)
 ;;TWO TABLESPOONFULS;;30;;1;;M
"RTN","PSSDSBDA",144,0)
 ;;TWO TABLESPOONFULS;;5;;6;;M
"RTN","PSSDSBDA",145,0)
 ;;TWO TABLESPOONSFUL;;1;;30;;M
"RTN","PSSDSBDA",146,0)
 ;;TWO TABLESPOONSFUL;;15;;2;;M
"RTN","PSSDSBDA",147,0)
 ;;TWO TABLESPOONSFUL;;30;;1;;M
"RTN","PSSDSBDA",148,0)
 ;;TWO TABLESPOONSFUL;;5;;6;;M
"RTN","PSSDSBDA",149,0)
 ;;2 TABLESPOONFULS;;1;;30;;M
"RTN","PSSDSBDA",150,0)
 ;;2 TABLESPOONFULS;;15;;2;;M
"RTN","PSSDSBDA",151,0)
 ;;2 TABLESPOONFULS;;30;;1;;M
"RTN","PSSDSBDA",152,0)
 ;;2 TABLESPOONFULS;;5;;6;;M
"RTN","PSSDSBDA",153,0)
 ;;2 TABLESPOONSFUL;;1;;30;;M
"RTN","PSSDSBDA",154,0)
 ;;2 TABLESPOONSFUL;;15;;2;;M
"RTN","PSSDSBDA",155,0)
 ;;2 TABLESPOONSFUL;;30;;1;;M
"RTN","PSSDSBDA",156,0)
 ;;2 TABLESPOONSFUL;;5;;6;;M
"RTN","PSSDSBDA",157,0)
 ;;TWO TABLESPOONFUL(S);;1;;30;;M
"RTN","PSSDSBDA",158,0)
 ;;TWO TABLESPOONFUL(S);;15;;2;;M
"RTN","PSSDSBDA",159,0)
 ;;TWO TABLESPOONFUL(S);;30;;1;;M
"RTN","PSSDSBDA",160,0)
 ;;TWO TABLESPOONFUL(S);;5;;6;;M
"RTN","PSSDSBDA",161,0)
 ;;2 TABLESPOONFUL(S);;1;;30;;M
"RTN","PSSDSBDA",162,0)
 ;;2 TABLESPOONFUL(S);;15;;2;;M
"RTN","PSSDSBDA",163,0)
 ;;2 TABLESPOONFUL(S);;30;;1;;M
"RTN","PSSDSBDA",164,0)
 ;;2 TABLESPOONFUL(S);;5;;6;;M
"RTN","PSSDSBDA",165,0)
 ;;1 ML;;1;;1;;M
"RTN","PSSDSBDA",166,0)
 ;;1 ML(S);;1;;1;;M
"RTN","PSSDSBDA",167,0)
 ;;1ML;;1;;1;;M
"RTN","PSSDSBDA",168,0)
 ;;1 MILLILITER;;1;;1;;M
"RTN","PSSDSBDA",169,0)
 ;;1 MILLILITER(S);;1;;1;;M
"RTN","PSSDSBDA",170,0)
 ;;ONE MILLILITER;;1;;1;;M
"RTN","PSSDSBDA",171,0)
 ;;ONE MILLILITER(S);;1;;1;;M
"RTN","PSSDSBDA",172,0)
 ;;2 ML;;1;;2;;M
"RTN","PSSDSBDA",173,0)
 ;;2 ML(S);;1;;2;;M
"RTN","PSSDSBDA",174,0)
 ;;2 MLS;;1;;2;;M
"RTN","PSSDSBDA",175,0)
 ;;2ML;;1;;2;;M
"RTN","PSSDSBDA",176,0)
 ;;2 MILLILITER(S);;1;;2;;M
"RTN","PSSDSBDA",177,0)
 ;;2 MILLILITERS;;1;;2;;M
"RTN","PSSDSBDA",178,0)
 ;;TWO MILLILITERS;;1;;2;;M
"RTN","PSSDSBDA",179,0)
 ;;TWO MILLILITER(S);;1;;2;;M
"RTN","PSSDSBDA",180,0)
 ;;
"RTN","PSSDSBDA",181,0)
SET4 ;
"RTN","PSSDSBDA",182,0)
 ;;ONE DROP;;1;;DROP(S)
"RTN","PSSDSBDA",183,0)
 ;;1 DROP;;1;;DROP(S)
"RTN","PSSDSBDA",184,0)
 ;;ONE DROP(S);;1;;DROP(S)
"RTN","PSSDSBDA",185,0)
 ;;1 DROP(S);;1;;DROP(S)
"RTN","PSSDSBDA",186,0)
 ;;TWO DROPS;;2;;DROP(S)
"RTN","PSSDSBDA",187,0)
 ;;2 DROPS;;2;;DROP(S)
"RTN","PSSDSBDA",188,0)
 ;;TWO DROP(S);;2;;DROP(S)
"RTN","PSSDSBDA",189,0)
 ;;2 DROP(S);;2;;DROP(S)
"RTN","PSSDSBDA",190,0)
 ;;ONE OR TWO DROP(S);;2;;DROP(S)
"RTN","PSSDSBDA",191,0)
 ;;1 OR 2 DROP(S);;2;;DROP(S)
"RTN","PSSDSBDA",192,0)
 ;;ONE TO TWO DROP(S);;2;;DROP(S)
"RTN","PSSDSBDA",193,0)
 ;;1 TO 2 DROP(S);;2;;DROP(S)
"RTN","PSSDSBDA",194,0)
 ;;ONE - TWO DROP(S);;2;;DROP(S)
"RTN","PSSDSBDA",195,0)
 ;;ONE-TWO DROP(S);;2;;DROP(S)
"RTN","PSSDSBDA",196,0)
 ;;1-2 DROP(S);;2;;DROP(S)
"RTN","PSSDSBDA",197,0)
 ;;1 - 2 DROP(S);;2;;DROP(S)
"RTN","PSSDSBDA",198,0)
 ;;ONE OR TWO DROPS;;2;;DROP(S)
"RTN","PSSDSBDA",199,0)
 ;;1 OR 2 DROPS;;2;;DROP(S)
"RTN","PSSDSBDA",200,0)
 ;;ONE TO TWO DROPS;;2;;DROP(S)
"RTN","PSSDSBDA",201,0)
 ;;1 TO 2 DROPS;;2;;DROP(S)
"RTN","PSSDSBDA",202,0)
 ;;ONE - TWO DROPS;;2;;DROP(S)
"RTN","PSSDSBDA",203,0)
 ;;ONE-TWO DROPS;;2;;DROP(S)
"RTN","PSSDSBDA",204,0)
 ;;1-2 DROPS;;2;;DROP(S)
"RTN","PSSDSBDA",205,0)
 ;;1 - 2 DROPS;;2;;DROP(S)
"RTN","PSSDSBDA",206,0)
 ;;ONE PATCH;;1;;PATCH(ES)
"RTN","PSSDSBDA",207,0)
 ;;1 PATCH;;1;;PATCH(ES)
"RTN","PSSDSBDA",208,0)
 ;;ONE PATCH(ES);;1;;PATCH(ES)
"RTN","PSSDSBDA",209,0)
 ;;1 PATCH(ES);;1;;PATCH(ES)
"RTN","PSSDSBDA",210,0)
 ;;TWO PATCHES;;2;;PATCH(ES)
"RTN","PSSDSBDA",211,0)
 ;;2 PATCHES;;2;;PATCH(ES)
"RTN","PSSDSBDA",212,0)
 ;;TWO PATCH(ES);;2;;PATCH(ES)
"RTN","PSSDSBDA",213,0)
 ;;2 PATCH(ES);;2;;PATCH(ES)
"RTN","PSSDSBDA",214,0)
 ;;ONE PUFF;;1;;INHALATION(S)
"RTN","PSSDSBDA",215,0)
 ;;1 PUFF;;1;;INHALATION(S)
"RTN","PSSDSBDA",216,0)
 ;;ONE PUFF(S);;1;;INHALATION(S)
"RTN","PSSDSBDA",217,0)
 ;;1 PUFF(S);;1;;INHALATION(S)
"RTN","PSSDSBDA",218,0)
 ;;TWO PUFFS;;2;;INHALATION(S)
"RTN","PSSDSBDA",219,0)
 ;;2 PUFFS;;2;;INHALATION(S)
"RTN","PSSDSBDA",220,0)
 ;;TWO PUFF(S);;2;;INHALATION(S)
"RTN","PSSDSBDA",221,0)
 ;;2 PUFF(S);;2;;INHALATION(S)
"RTN","PSSDSBDA",222,0)
 ;;ONE OR TWO PUFF(S);;2;;INHALATION(S)
"RTN","PSSDSBDA",223,0)
 ;;1 OR 2 PUFF(S);;2;;INHALATION(S)
"RTN","PSSDSBDA",224,0)
 ;;ONE TO TWO PUFF(S);;2;;INHALATION(S)
"RTN","PSSDSBDA",225,0)
 ;;1 TO 2 PUFF(S);;2;;INHALATION(S)
"RTN","PSSDSBDA",226,0)
 ;;ONE - TWO PUFF(S);;2;;INHALATION(S)
"RTN","PSSDSBDA",227,0)
 ;;ONE-TWO PUFF(S);;2;;INHALATION(S)
"RTN","PSSDSBDA",228,0)
 ;;1-2 PUFF(S);;2;;INHALATION(S)
"RTN","PSSDSBDA",229,0)
 ;;1 - 2 PUFF(S);;2;;INHALATION(S)
"RTN","PSSDSBDA",230,0)
 ;;ONE OR TWO PUFFS;;2;;INHALATION(S)
"RTN","PSSDSBDA",231,0)
 ;;1 OR 2 PUFFS;;2;;INHALATION(S)
"RTN","PSSDSBDA",232,0)
 ;;ONE TO TWO PUFFS;;2;;INHALATION(S)
"RTN","PSSDSBDA",233,0)
 ;;1 TO 2 PUFFS;;2;;INHALATION(S)
"RTN","PSSDSBDA",234,0)
 ;;ONE - TWO PUFFS;;2;;INHALATION(S)
"RTN","PSSDSBDA",235,0)
 ;;ONE-TWO PUFFS;;2;;INHALATION(S)
"RTN","PSSDSBDA",236,0)
 ;;1-2 PUFFS;;2;;INHALATION(S)
"RTN","PSSDSBDA",237,0)
 ;;1 - 2 PUFFS;;2;;INHALATION(S)
"RTN","PSSDSBDA",238,0)
 ;;ONE INHALATION;;1;;INHALATION(S)
"RTN","PSSDSBDA",239,0)
 ;;1 INHALATION;;1;;INHALATION(S)
"RTN","PSSDSBDA",240,0)
 ;;ONE INHALATION(S);;1;;INHALATION(S)
"RTN","PSSDSBDA",241,0)
 ;;1 INHALATION(S);;1;;INHALATION(S)
"RTN","PSSDSBDA",242,0)
 ;;TWO INHALATIONS;;2;;INHALATION(S)
"RTN","PSSDSBDA",243,0)
 ;;2 INHALATIONS;;2;;INHALATION(S)
"RTN","PSSDSBDA",244,0)
 ;;TWO INHALATION(S);;2;;INHALATION(S)
"RTN","PSSDSBDA",245,0)
 ;;2 INHALATION(S);;2;;INHALATION(S)
"RTN","PSSDSBDA",246,0)
 ;;ONE OR TWO INHALATIONS;;2;;INHALATION(S)
"RTN","PSSDSBDA",247,0)
 ;;1 OR 2 INHALATIONS;;2;;INHALATION(S)
"RTN","PSSDSBDA",248,0)
 ;;ONE TO TWO INHALATIONS;;2;;INHALATION(S)
"RTN","PSSDSBDA",249,0)
 ;;1 TO 2 INHALATIONS;;2;;INHALATION(S)
"RTN","PSSDSBDA",250,0)
 ;;ONE - TWO INHALATIONS;;2;;INHALATION(S)
"RTN","PSSDSBDA",251,0)
 ;;ONE-TWO INHALATIONS;;2;;INHALATION(S)
"RTN","PSSDSBDA",252,0)
 ;;1-2 INHALATIONS;;2;;INHALATION(S)
"RTN","PSSDSBDA",253,0)
 ;;1 - 2 INHALATIONS;;2;;INHALATION(S)
"RTN","PSSDSBDA",254,0)
 ;;ONE OR TWO INHALATION(S);;2;;INHALATION(S)
"RTN","PSSDSBDA",255,0)
 ;;1 OR 2 INHALATION(S);;2;;INHALATION(S)
"RTN","PSSDSBDA",256,0)
 ;;ONE TO TWO INHALATION(S);;2;;INHALATION(S)
"RTN","PSSDSBDA",257,0)
 ;;1 TO 2 INHALATION(S);;2;;INHALATION(S)
"RTN","PSSDSBDA",258,0)
 ;;ONE - TWO INHALATION(S);;2;;INHALATION(S)
"RTN","PSSDSBDA",259,0)
 ;;ONE-TWO INHALATION(S);;2;;INHALATION(S)
"RTN","PSSDSBDA",260,0)
 ;;1-2 INHALATION(S);;2;;INHALATION(S)
"RTN","PSSDSBDA",261,0)
 ;;1 - 2 INHALATION(S);;2;;INHALATION(S)
"RTN","PSSDSBDA",262,0)
 ;;ONE SPRAY;;1;;SPRAY(S)
"RTN","PSSDSBDA",263,0)
 ;;1 SPRAY;;1;;SPRAY(S)
"RTN","PSSDSBDA",264,0)
 ;;ONE SPRAY(S);;1;;SPRAY(S)
"RTN","PSSDSBDA",265,0)
 ;;1 SPRAY(S);;1;;SPRAY(S)
"RTN","PSSDSBDA",266,0)
 ;;TWO SPRAYS;;2;;SPRAY(S)
"RTN","PSSDSBDA",267,0)
 ;;2 SPRAYS;;2;;SPRAY(S)
"RTN","PSSDSBDA",268,0)
 ;;TWO SPRAY(S);;2;;SPRAY(S)
"RTN","PSSDSBDA",269,0)
 ;;2 SPRAY(S);;2;;SPRAY(S)
"RTN","PSSDSBDA",270,0)
 ;;ONE OR TWO SPRAYS;;2;;SPRAY(S)
"RTN","PSSDSBDA",271,0)
 ;;1 OR 2 SPRAYS;;2;;SPRAY(S)
"RTN","PSSDSBDA",272,0)
 ;;ONE TO TWO SPRAYS;;2;;SPRAY(S)
"RTN","PSSDSBDA",273,0)
 ;;1 TO 2 SPRAYS;;2;;SPRAY(S)
"RTN","PSSDSBDA",274,0)
 ;;ONE - TWO SPRAYS;;2;;SPRAY(S)
"RTN","PSSDSBDA",275,0)
 ;;ONE-TWO SPRAYS;;2;;SPRAY(S)
"RTN","PSSDSBDA",276,0)
 ;;1-2 SPRAYS;;2;;SPRAY(S)
"RTN","PSSDSBDA",277,0)
 ;;1 - 2 SPRAYS;;2;;SPRAY(S)
"RTN","PSSDSBDA",278,0)
 ;;ONE OR TWO SPRAY(S);;2;;SPRAY(S)
"RTN","PSSDSBDA",279,0)
 ;;1 OR 2 SPRAY(S);;2;;SPRAY(S)
"RTN","PSSDSBDA",280,0)
 ;;ONE TO TWO SPRAY(S);;2;;SPRAY(S)
"RTN","PSSDSBDA",281,0)
 ;;1 TO 2 SPRAY(S);;2;;SPRAY(S)
"RTN","PSSDSBDA",282,0)
 ;;ONE - TWO SPRAY(S);;2;;SPRAY(S)
"RTN","PSSDSBDA",283,0)
 ;;ONE-TWO SPRAY(S);;2;;SPRAY(S)
"RTN","PSSDSBDA",284,0)
 ;;1-2 SPRAY(S);;2;;SPRAY(S)
"RTN","PSSDSBDA",285,0)
 ;;1 - 2 SPRAY(S);;2;;SPRAY(S)
"RTN","PSSDSBDA",286,0)
 ;;ONE SQUIRT;;1;;SPRAY(S)
"RTN","PSSDSBDA",287,0)
 ;;1 SQUIRT;;1;;SPRAY(S)
"RTN","PSSDSBDA",288,0)
 ;;ONE SQUIRT(S);;1;;SPRAY(S)
"RTN","PSSDSBDA",289,0)
 ;;1 SQUIRT(S);;1;;SPRAY(S)
"RTN","PSSDSBDA",290,0)
 ;;TWO SQUIRTS;;2;;SPRAY(S)
"RTN","PSSDSBDA",291,0)
 ;;2 SQUIRTS;;2;;SPRAY(S)
"RTN","PSSDSBDA",292,0)
 ;;TWO SQUIRT(S);;2;;SPRAY(S)
"RTN","PSSDSBDA",293,0)
 ;;2 SQUIRT(S);;2;;SPRAY(S)
"RTN","PSSDSBDA",294,0)
 ;;ONE OR TWO SQUIRTS;;2;;SPRAY(S)
"RTN","PSSDSBDA",295,0)
 ;;1 OR 2 SQUIRTS;;2;;SPRAY(S)
"RTN","PSSDSBDA",296,0)
 ;;ONE TO TWO SQUIRTS;;2;;SPRAY(S)
"RTN","PSSDSBDA",297,0)
 ;;1 TO 2 SQUIRTS;;2;;SPRAY(S)
"RTN","PSSDSBDA",298,0)
 ;;ONE - TWO SQUIRTS;;2;;SPRAY(S)
"RTN","PSSDSBDA",299,0)
 ;;ONE-TWO SQUIRTS;;2;;SPRAY(S)
"RTN","PSSDSBDA",300,0)
 ;;1-2 SQUIRTS;;2;;SPRAY(S)
"RTN","PSSDSBDA",301,0)
 ;;1 - 2 SQUIRTS;;2;;SPRAY(S)
"RTN","PSSDSBDA",302,0)
 ;;ONE OR TWO SQUIRT(S);;2;;SPRAY(S)
"RTN","PSSDSBDA",303,0)
 ;;1 OR 2 SQUIRT(S);;2;;SPRAY(S)
"RTN","PSSDSBDA",304,0)
 ;;ONE TO TWO SQUIRT(S);;2;;SPRAY(S)
"RTN","PSSDSBDA",305,0)
 ;;1 TO 2 SQUIRT(S);;2;;SPRAY(S)
"RTN","PSSDSBDA",306,0)
 ;;ONE - TWO SQUIRT(S);;2;;SPRAY(S)
"RTN","PSSDSBDA",307,0)
 ;;ONE-TWO SQUIRT(S);;2;;SPRAY(S)
"RTN","PSSDSBDA",308,0)
 ;;1-2 SQUIRT(S);;2;;SPRAY(S)
"RTN","PSSDSBDA",309,0)
 ;;1 - 2 SQUIRT(S);;2;;SPRAY(S)
"RTN","PSSDSBDA",310,0)
 ;;ONE WAFER;;1;;WAFER(S)
"RTN","PSSDSBDA",311,0)
 ;;1 WAFER;;1;;WAFER(S)
"RTN","PSSDSBDA",312,0)
 ;;ONE WAFER(S);;1;;WAFER(S)
"RTN","PSSDSBDA",313,0)
 ;;1 WAFER(S);;1;;WAFER(S)
"RTN","PSSDSBDA",314,0)
 ;;TWO WAFERS;;2;;WAFER(S)
"RTN","PSSDSBDA",315,0)
 ;;2 WAFERS;;2;;WAFER(S)
"RTN","PSSDSBDA",316,0)
 ;;TWO WAFER(S);;2;;WAFER(S)
"RTN","PSSDSBDA",317,0)
 ;;2 WAFER(S);;2;;WAFER(S)
"RTN","PSSDSBDA",318,0)
 ;;
"RTN","PSSDSBDA",319,0)
 Q
"RTN","PSSDSBDB")
0^21^B76752781^n/a
"RTN","PSSDSBDB",1,0)
PSSDSBDB ;BIR/RTR-Data used to populate Dose Unit and Numeric Dose for Dose Check ;02/12/09
"RTN","PSSDSBDB",2,0)
 ;;1.0;PHARMACY DATA MANAGEMENT;**117**;9/30/97;Build 101
"RTN","PSSDSBDB",3,0)
 ;
"RTN","PSSDSBDB",4,0)
 N PSSQVCEE,PSSQVCFF
"RTN","PSSDSBDB",5,0)
 F PSSQVCEE=1:1 S PSSQVCFF=$T(SET5+PSSQVCEE) Q:$P(PSSQVCFF,";;",2)=""  S ^TMP($J,"PSSQVCS5",$P(PSSQVCFF,";;",2))=$P(PSSQVCFF,";;",3)_"^"_$P(PSSQVCFF,";;",4)
"RTN","PSSDSBDB",6,0)
 Q
"RTN","PSSDSBDB",7,0)
 ;
"RTN","PSSDSBDB",8,0)
SET5 ;
"RTN","PSSDSBDB",9,0)
 ;;1 ML;;1;;MILLILITER(S)
"RTN","PSSDSBDB",10,0)
 ;;1 ML(S);;1;;MILLILITER(S)
"RTN","PSSDSBDB",11,0)
 ;;1ML;;1;;MILLILITER(S)
"RTN","PSSDSBDB",12,0)
 ;;1 MILLILITER;;1;;MILLILITER(S)
"RTN","PSSDSBDB",13,0)
 ;;ONE MILLILITER;;1;;MILLILITER(S)
"RTN","PSSDSBDB",14,0)
 ;;1 MILLILITER(S);;1;;MILLILITER(S)
"RTN","PSSDSBDB",15,0)
 ;;ONE MILLILITER(S);;1;;MILLILITER(S)
"RTN","PSSDSBDB",16,0)
 ;;2 ML;;2;;MILLILITER(S)
"RTN","PSSDSBDB",17,0)
 ;;2 ML(S);;2;;MILLILITER(S)
"RTN","PSSDSBDB",18,0)
 ;;2 MLS;;2;;MILLILITER(S)
"RTN","PSSDSBDB",19,0)
 ;;2ML;;2;;MILLILITER(S)
"RTN","PSSDSBDB",20,0)
 ;;2 MILLILITER(S);;2;;MILLILITER(S)
"RTN","PSSDSBDB",21,0)
 ;;TWO MILLILITER(S);;2;;MILLILITER(S)
"RTN","PSSDSBDB",22,0)
 ;;2 MILLILITERS;;2;;MILLILITER(S)
"RTN","PSSDSBDB",23,0)
 ;;TWO MILLILITERS;;2;;MILLILITER(S)
"RTN","PSSDSBDB",24,0)
 ;;ONE TABLESPOON;;1;;TABLESPOONFUL(S)
"RTN","PSSDSBDB",25,0)
 ;;1 TABLESPOON;;1;;TABLESPOONFUL(S)
"RTN","PSSDSBDB",26,0)
 ;;ONE TABLESPOON(S);;1;;TABLESPOONFUL(S)
"RTN","PSSDSBDB",27,0)
 ;;1 TABLESPOON(S);;1;;TABLESPOONFUL(S)
"RTN","PSSDSBDB",28,0)
 ;;ONE TABLESPOONFUL;;1;;TABLESPOONFUL(S)
"RTN","PSSDSBDB",29,0)
 ;;1 TABLESPOONFUL;;1;;TABLESPOONFUL(S)
"RTN","PSSDSBDB",30,0)
 ;;ONE TABLESPOONSFUL;;1;;TABLESPOONFUL(S)
"RTN","PSSDSBDB",31,0)
 ;;1 TABLESPOONSFUL;;1;;TABLESPOONFUL(S)
"RTN","PSSDSBDB",32,0)
 ;;ONE TABLESPOONFUL(S);;1;;TABLESPOONFUL(S)
"RTN","PSSDSBDB",33,0)
 ;;1 TABLESPOONFUL(S);;1;;TABLESPOONFUL(S)
"RTN","PSSDSBDB",34,0)
 ;;TWO TABLESPOONS;;2;;TABLESPOONFUL(S)
"RTN","PSSDSBDB",35,0)
 ;;2 TABLESPOONS;;2;;TABLESPOONFUL(S)
"RTN","PSSDSBDB",36,0)
 ;;TWO TABLESPOON(S);;2;;TABLESPOONFUL(S)
"RTN","PSSDSBDB",37,0)
 ;;2 TABLESPOON(S);;2;;TABLESPOONFUL(S)
"RTN","PSSDSBDB",38,0)
 ;;TWO TABLESPOONFULS;;2;;TABLESPOONFUL(S)
"RTN","PSSDSBDB",39,0)
 ;;2 TABLESPOONFULS;;2;;TABLESPOONFUL(S)
"RTN","PSSDSBDB",40,0)
 ;;TWO TABLESPOONSFUL;;2;;TABLESPOONFUL(S)
"RTN","PSSDSBDB",41,0)
 ;;2 TABLESPOONSFUL;;2;;TABLESPOONFUL(S)
"RTN","PSSDSBDB",42,0)
 ;;TWO TABLESPOONFUL(S);;2;;TABLESPOONFUL(S)
"RTN","PSSDSBDB",43,0)
 ;;2 TABLESPOONFUL(S);;2;;TABLESPOONFUL(S)
"RTN","PSSDSBDB",44,0)
 ;;ONE OR TWO TABLESPOONS;;2;;TABLESPOONFUL(S)
"RTN","PSSDSBDB",45,0)
 ;;1 OR 2 TABLESPOONS;;2;;TABLESPOONFUL(S)
"RTN","PSSDSBDB",46,0)
 ;;ONE TO TWO TABLESPOONS;;2;;TABLESPOONFUL(S)
"RTN","PSSDSBDB",47,0)
 ;;1 TO 2 TABLESPOONS;;2;;TABLESPOONFUL(S)
"RTN","PSSDSBDB",48,0)
 ;;ONE - TWO TABLESPOONS;;2;;TABLESPOONFUL(S)
"RTN","PSSDSBDB",49,0)
 ;;ONE-TWO TABLESPOONS;;2;;TABLESPOONFUL(S)
"RTN","PSSDSBDB",50,0)
 ;;1-2 TABLESPOONS;;2;;TABLESPOONFUL(S)
"RTN","PSSDSBDB",51,0)
 ;;1 - 2 TABLESPOONS;;2;;TABLESPOONFUL(S)
"RTN","PSSDSBDB",52,0)
 ;;ONE OR TWO TABLESPOON(S);;2;;TABLESPOONFUL(S)
"RTN","PSSDSBDB",53,0)
 ;;1 OR 2 TABLESPOON(S);;2;;TABLESPOONFUL(S)
"RTN","PSSDSBDB",54,0)
 ;;ONE TO TWO TABLESPOON(S);;2;;TABLESPOONFUL(S)
"RTN","PSSDSBDB",55,0)
 ;;1 TO 2 TABLESPOON(S);;2;;TABLESPOONFUL(S)
"RTN","PSSDSBDB",56,0)
 ;;ONE - TWO TABLESPOON(S);;2;;TABLESPOONFUL(S)
"RTN","PSSDSBDB",57,0)
 ;;ONE-TWO TABLESPOON(S);;2;;TABLESPOONFUL(S)
"RTN","PSSDSBDB",58,0)
 ;;1-2 TABLESPOON(S);;2;;TABLESPOONFUL(S)
"RTN","PSSDSBDB",59,0)
 ;;1 - 2 TABLESPOON(S);;2;;TABLESPOONFUL(S)
"RTN","PSSDSBDB",60,0)
 ;;ONE OR TWO TABLESPOONSFUL;;2;;TABLESPOONFUL(S)
"RTN","PSSDSBDB",61,0)
 ;;1 OR 2 TABLESPOONSFUL;;2;;TABLESPOONFUL(S)
"RTN","PSSDSBDB",62,0)
 ;;ONE OR TWO TABLESPOONFULS;;2;;TABLESPOONFUL(S)
"RTN","PSSDSBDB",63,0)
 ;;1 OR 2 TABLESPOONFULS;;2;;TABLESPOONFUL(S)
"RTN","PSSDSBDB",64,0)
 ;;ONE TO TWO TABLESPOONSFUL;;2;;TABLESPOONFUL(S)
"RTN","PSSDSBDB",65,0)
 ;;1 TO 2 TABLESPOONSFUL;;2;;TABLESPOONFUL(S)
"RTN","PSSDSBDB",66,0)
 ;;ONE TO TWO TABLESPOONFULS;;2;;TABLESPOONFUL(S)
"RTN","PSSDSBDB",67,0)
 ;;1 TO 2 TABLESPOONFULS;;2;;TABLESPOONFUL(S)
"RTN","PSSDSBDB",68,0)
 ;;ONE - TWO TABLESPOONSFUL;;2;;TABLESPOONFUL(S)
"RTN","PSSDSBDB",69,0)
 ;;ONE-TWO TABLESPOONSFUL;;2;;TABLESPOONFUL(S)
"RTN","PSSDSBDB",70,0)
 ;;1-2 TABLESPOONSFUL;;2;;TABLESPOONFUL(S)
"RTN","PSSDSBDB",71,0)
 ;;1 - 2 TABLESPOONSFUL;;2;;TABLESPOONFUL(S)
"RTN","PSSDSBDB",72,0)
 ;;ONE - TWO TABLESPOONFULS;;2;;TABLESPOONFUL(S)
"RTN","PSSDSBDB",73,0)
 ;;ONE-TWO TABLESPOONFULS;;2;;TABLESPOONFUL(S)
"RTN","PSSDSBDB",74,0)
 ;;1-2 TABLESPOONFULS;;2;;TABLESPOONFUL(S)
"RTN","PSSDSBDB",75,0)
 ;;1 - 2 TABLESPOONFULS;;2;;TABLESPOONFUL(S)
"RTN","PSSDSBDB",76,0)
 ;;ONE OR TWO TABLESPOONFUL(S);;2;;TABLESPOONFUL(S)
"RTN","PSSDSBDB",77,0)
 ;;1 OR 2 TABLESPOONFUL(S);;2;;TABLESPOONFUL(S)
"RTN","PSSDSBDB",78,0)
 ;;ONE TO TWO TABLESPOONFUL(S);;2;;TABLESPOONFUL(S)
"RTN","PSSDSBDB",79,0)
 ;;1 TO 2 TABLESPOONFUL(S);;2;;TABLESPOONFUL(S)
"RTN","PSSDSBDB",80,0)
 ;;ONE - TWO TABLESPOONFUL(S);;2;;TABLESPOONFUL(S)
"RTN","PSSDSBDB",81,0)
 ;;ONE-TWO TABLESPOONFUL(S);;2;;TABLESPOONFUL(S)
"RTN","PSSDSBDB",82,0)
 ;;1-2 TABLESPOONFUL(S);;2;;TABLESPOONFUL(S)
"RTN","PSSDSBDB",83,0)
 ;;1 - 2 TABLESPOONFUL(S);;2;;TABLESPOONFUL(S)
"RTN","PSSDSBDB",84,0)
 ;;ONE TEASPOON;;1;;TEASPOONFUL(S)
"RTN","PSSDSBDB",85,0)
 ;;1 TEASPOON;;1;;TEASPOONFUL(S)
"RTN","PSSDSBDB",86,0)
 ;;ONE TEASPOON(S);;1;;TEASPOONFUL(S)
"RTN","PSSDSBDB",87,0)
 ;;1 TEASPOON(S);;1;;TEASPOONFUL(S)
"RTN","PSSDSBDB",88,0)
 ;;ONE TEASPOONFUL;;1;;TEASPOONFUL(S)
"RTN","PSSDSBDB",89,0)
 ;;1 TEASPOONFUL;;1;;TEASPOONFUL(S)
"RTN","PSSDSBDB",90,0)
 ;;ONE TEASPOONSFUL;;1;;TEASPOONFUL(S)
"RTN","PSSDSBDB",91,0)
 ;;1 TEASPOONSFUL;;1;;TEASPOONFUL(S)
"RTN","PSSDSBDB",92,0)
 ;;ONE TEASPOONFUL(S);;1;;TEASPOONFUL(S)
"RTN","PSSDSBDB",93,0)
 ;;1 TEASPOONFUL(S);;1;;TEASPOONFUL(S)
"RTN","PSSDSBDB",94,0)
 ;;TWO TEASPOONS;;2;;TEASPOONFUL(S)
"RTN","PSSDSBDB",95,0)
 ;;2 TEASPOONS;;2;;TEASPOONFUL(S)
"RTN","PSSDSBDB",96,0)
 ;;TWO TEASPOON(S);;2;;TEASPOONFUL(S)
"RTN","PSSDSBDB",97,0)
 ;;2 TEASPOON(S);;2;;TEASPOONFUL(S)
"RTN","PSSDSBDB",98,0)
 ;;TWO TEASPOONFULS;;2;;TEASPOONFUL(S)
"RTN","PSSDSBDB",99,0)
 ;;2 TEASPOONFULS;;2;;TEASPOONFUL(S)
"RTN","PSSDSBDB",100,0)
 ;;TWO TEASPOONSFUL;;2;;TEASPOONFUL(S)
"RTN","PSSDSBDB",101,0)
 ;;2 TEASPOONSFUL;;2;;TEASPOONFUL(S)
"RTN","PSSDSBDB",102,0)
 ;;TWO TEASPOONFUL(S);;2;;TEASPOONFUL(S)
"RTN","PSSDSBDB",103,0)
 ;;2 TEASPOONFUL(S);;2;;TEASPOONFUL(S)
"RTN","PSSDSBDB",104,0)
 ;;ONE OR TWO TEASPOONS;;2;;TEASPOONFUL(S)
"RTN","PSSDSBDB",105,0)
 ;;1 OR 2 TEASPOONS;;2;;TEASPOONFUL(S)
"RTN","PSSDSBDB",106,0)
 ;;ONE TO TWO TEASPOONS;;2;;TEASPOONFUL(S)
"RTN","PSSDSBDB",107,0)
 ;;1 TO 2 TEASPOONS;;2;;TEASPOONFUL(S)
"RTN","PSSDSBDB",108,0)
 ;;ONE - TWO TEASPOONS;;2;;TEASPOONFUL(S)
"RTN","PSSDSBDB",109,0)
 ;;ONE-TWO TEASPOONS;;2;;TEASPOONFUL(S)
"RTN","PSSDSBDB",110,0)
 ;;1-2 TEASPOONS;;2;;TEASPOONFUL(S)
"RTN","PSSDSBDB",111,0)
 ;;1 - 2 TEASPOONS;;2;;TEASPOONFUL(S)
"RTN","PSSDSBDB",112,0)
 ;;ONE OR TWO TEASPOON(S);;2;;TEASPOONFUL(S)
"RTN","PSSDSBDB",113,0)
 ;;1 OR 2 TEASPOON(S);;2;;TEASPOONFUL(S)
"RTN","PSSDSBDB",114,0)
 ;;ONE TO TWO TEASPOON(S);;2;;TEASPOONFUL(S)
"RTN","PSSDSBDB",115,0)
 ;;1 TO 2 TEASPOON(S);;2;;TEASPOONFUL(S)
"RTN","PSSDSBDB",116,0)
 ;;ONE - TWO TEASPOON(S);;2;;TEASPOONFUL(S)
"RTN","PSSDSBDB",117,0)
 ;;ONE-TWO TEASPOON(S);;2;;TEASPOONFUL(S)
"RTN","PSSDSBDB",118,0)
 ;;1-2 TEASPOON(S);;2;;TEASPOONFUL(S)
"RTN","PSSDSBDB",119,0)
 ;;1 - 2 TEASPOON(S);;2;;TEASPOONFUL(S)
"RTN","PSSDSBDB",120,0)
 ;;ONE OR TWO TEASPOONSFUL;;2;;TEASPOONFUL(S)
"RTN","PSSDSBDB",121,0)
 ;;1 OR 2 TEASPOONSFUL;;2;;TEASPOONFUL(S)
"RTN","PSSDSBDB",122,0)
 ;;ONE OR TWO TEASPOONFULS;;2;;TEASPOONFUL(S)
"RTN","PSSDSBDB",123,0)
 ;;1 OR 2 TEASPOONFULS;;2;;TEASPOONFUL(S)
"RTN","PSSDSBDB",124,0)
 ;;ONE TO TWO TEASPOONSFUL;;2;;TEASPOONFUL(S)
"RTN","PSSDSBDB",125,0)
 ;;1 TO 2 TEASPOONSFUL;;2;;TEASPOONFUL(S)
"RTN","PSSDSBDB",126,0)
 ;;ONE TO TWO TEASPOONFULS;;2;;TEASPOONFUL(S)
"RTN","PSSDSBDB",127,0)
 ;;1 TO 2 TEASPOONFULS;;2;;TEASPOONFUL(S)
"RTN","PSSDSBDB",128,0)
 ;;ONE - TWO TEASPOONSFUL;;2;;TEASPOONFUL(S)
"RTN","PSSDSBDB",129,0)
 ;;ONE-TWO TEASPOONSFUL;;2;;TEASPOONFUL(S)
"RTN","PSSDSBDB",130,0)
 ;;1-2 TEASPOONSFUL;;2;;TEASPOONFUL(S)
"RTN","PSSDSBDB",131,0)
 ;;1 - 2 TEASPOONSFUL;;2;;TEASPOONFUL(S)
"RTN","PSSDSBDB",132,0)
 ;;ONE - TWO TEASPOONFULS;;2;;TEASPOONFUL(S)
"RTN","PSSDSBDB",133,0)
 ;;ONE-TWO TEASPOONFULS;;2;;TEASPOONFUL(S)
"RTN","PSSDSBDB",134,0)
 ;;1-2 TEASPOONFULS;;2;;TEASPOONFUL(S)
"RTN","PSSDSBDB",135,0)
 ;;1 - 2 TEASPOONFULS;;2;;TEASPOONFUL(S)
"RTN","PSSDSBDB",136,0)
 ;;ONE OR TWO TEASPOONFUL(S);;2;;TEASPOONFUL(S)
"RTN","PSSDSBDB",137,0)
 ;;1 OR 2 TEASPOONFUL(S);;2;;TEASPOONFUL(S)
"RTN","PSSDSBDB",138,0)
 ;;ONE TO TWO TEASPOONFUL(S);;2;;TEASPOONFUL(S)
"RTN","PSSDSBDB",139,0)
 ;;1 TO 2 TEASPOONFUL(S);;2;;TEASPOONFUL(S)
"RTN","PSSDSBDB",140,0)
 ;;ONE - TWO TEASPOONFUL(S);;2;;TEASPOONFUL(S)
"RTN","PSSDSBDB",141,0)
 ;;ONE-TWO TEASPOONFUL(S);;2;;TEASPOONFUL(S)
"RTN","PSSDSBDB",142,0)
 ;;1-2 TEASPOONFUL(S);;2;;TEASPOONFUL(S)
"RTN","PSSDSBDB",143,0)
 ;;1 - 2 TEASPOONFUL(S);;2;;TEASPOONFUL(S)
"RTN","PSSDSBDB",144,0)
 ;;ONE-HALF TABLET;;.5;;TABLET(S)
"RTN","PSSDSBDB",145,0)
 ;;1/2 TABLET;;.5;;TABLET(S)
"RTN","PSSDSBDB",146,0)
 ;;0.5 TABLET;;.5;;TABLET(S)
"RTN","PSSDSBDB",147,0)
 ;;ONE-HALF TABLET(S);;.5;;TABLET(S)
"RTN","PSSDSBDB",148,0)
 ;;1/2 TABLET(S);;.5;;TABLET(S)
"RTN","PSSDSBDB",149,0)
 ;;0.5 TABLET(S);;.5;;TABLET(S)
"RTN","PSSDSBDB",150,0)
 ;;ONE TABLET;;1;;TABLET(S)
"RTN","PSSDSBDB",151,0)
 ;;1 TABLET;;1;;TABLET(S)
"RTN","PSSDSBDB",152,0)
 ;;ONE TABLET(S);;1;;TABLET(S)
"RTN","PSSDSBDB",153,0)
 ;;1 TABLET(S);;1;;TABLET(S)
"RTN","PSSDSBDB",154,0)
 ;;TWO TABLETS;;2;;TABLET(S)
"RTN","PSSDSBDB",155,0)
 ;;2 TABLETS;;2;;TABLET(S)
"RTN","PSSDSBDB",156,0)
 ;;TWO TABLET(S);;2;;TABLET(S)
"RTN","PSSDSBDB",157,0)
 ;;2 TABLET(S);;2;;TABLET(S)
"RTN","PSSDSBDB",158,0)
 ;;ONE OR TWO TABLETS;;2;;TABLET(S)
"RTN","PSSDSBDB",159,0)
 ;;1 OR 2 TABLETS;;2;;TABLET(S)
"RTN","PSSDSBDB",160,0)
 ;;ONE TO TWO TABLETS;;2;;TABLET(S)
"RTN","PSSDSBDB",161,0)
 ;;1 TO 2 TABLETS;;2;;TABLET(S)
"RTN","PSSDSBDB",162,0)
 ;;ONE - TWO TABLETS;;2;;TABLET(S)
"RTN","PSSDSBDB",163,0)
 ;;ONE-TWO TABLETS;;2;;TABLET(S)
"RTN","PSSDSBDB",164,0)
 ;;1-2 TABLETS;;2;;TABLET(S)
"RTN","PSSDSBDB",165,0)
 ;;1 - 2 TABLETS;;2;;TABLET(S)
"RTN","PSSDSBDB",166,0)
 ;;ONE OR TWO TABLET(S);;2;;TABLET(S)
"RTN","PSSDSBDB",167,0)
 ;;1 OR 2 TABLET(S);;2;;TABLET(S)
"RTN","PSSDSBDB",168,0)
 ;;ONE TO TWO TABLET(S);;2;;TABLET(S)
"RTN","PSSDSBDB",169,0)
 ;;1 TO 2 TABLET(S);;2;;TABLET(S)
"RTN","PSSDSBDB",170,0)
 ;;ONE - TWO TABLET(S);;2;;TABLET(S)
"RTN","PSSDSBDB",171,0)
 ;;ONE-TWO TABLET(S);;2;;TABLET(S)
"RTN","PSSDSBDB",172,0)
 ;;1-2 TABLET(S);;2;;TABLET(S)
"RTN","PSSDSBDB",173,0)
 ;;1 - 2 TABLET(S);;2;;TABLET(S)
"RTN","PSSDSBDB",174,0)
 ;;ONE CAPSULE;;1;;CAPSULE(S)
"RTN","PSSDSBDB",175,0)
 ;;1 CAPSULE;;1;;CAPSULE(S)
"RTN","PSSDSBDB",176,0)
 ;;ONE CAPSULE(S);;1;;CAPSULE(S)
"RTN","PSSDSBDB",177,0)
 ;;1 CAPSULE(S);;1;;CAPSULE(S)
"RTN","PSSDSBDB",178,0)
 ;;TWO CAPSULES;;2;;CAPSULE(S)
"RTN","PSSDSBDB",179,0)
 ;;2 CAPSULES;;2;;CAPSULE(S)
"RTN","PSSDSBDB",180,0)
 ;;TWO CAPSULE(S);;2;;CAPSULE(S)
"RTN","PSSDSBDB",181,0)
 ;;2 CAPSULE(S);;2;;CAPSULE(S)
"RTN","PSSDSBDB",182,0)
 ;;ONE OR TWO CAPSULES;;2;;CAPSULE(S)
"RTN","PSSDSBDB",183,0)
 ;;1 OR 2 CAPSULES;;2;;CAPSULE(S)
"RTN","PSSDSBDB",184,0)
 ;;ONE TO TWO CAPSULES;;2;;CAPSULE(S)
"RTN","PSSDSBDB",185,0)
 ;;1 TO 2 CAPSULES;;2;;CAPSULE(S)
"RTN","PSSDSBDB",186,0)
 ;;ONE - TWO CAPSULES;;2;;CAPSULE(S)
"RTN","PSSDSBDB",187,0)
 ;;ONE-TWO CAPSULES;;2;;CAPSULE(S)
"RTN","PSSDSBDB",188,0)
 ;;1-2 CAPSULES;;2;;CAPSULE(S)
"RTN","PSSDSBDB",189,0)
 ;;1 - 2 CAPSULES;;2;;CAPSULE(S)
"RTN","PSSDSBDB",190,0)
 ;;ONE OR TWO CAPSULE(S);;2;;CAPSULE(S)
"RTN","PSSDSBDB",191,0)
 ;;1 OR 2 CAPSULE(S);;2;;CAPSULE(S)
"RTN","PSSDSBDB",192,0)
 ;;ONE TO TWO CAPSULE(S);;2;;CAPSULE(S)
"RTN","PSSDSBDB",193,0)
 ;;1 TO 2 CAPSULE(S);;2;;CAPSULE(S)
"RTN","PSSDSBDB",194,0)
 ;;ONE - TWO CAPSULE(S);;2;;CAPSULE(S)
"RTN","PSSDSBDB",195,0)
 ;;ONE-TWO CAPSULE(S);;2;;CAPSULE(S)
"RTN","PSSDSBDB",196,0)
 ;;1-2 CAPSULE(S);;2;;CAPSULE(S)
"RTN","PSSDSBDB",197,0)
 ;;1 - 2 CAPSULE(S);;2;;CAPSULE(S)
"RTN","PSSDSBDB",198,0)
 ;;ONE LOZENGE;;1;;LOZENGE(S)
"RTN","PSSDSBDB",199,0)
 ;;1 LOZENGE;;1;;LOZENGE(S)
"RTN","PSSDSBDB",200,0)
 ;;ONE LOZENGE(S);;1;;LOZENGE(S)
"RTN","PSSDSBDB",201,0)
 ;;1 LOZENGE(S);;1;;LOZENGE(S)
"RTN","PSSDSBDB",202,0)
 ;;TWO LOZENGES;;2;;LOZENGE(S)
"RTN","PSSDSBDB",203,0)
 ;;2 LOZENGES;;2;;LOZENGE(S)
"RTN","PSSDSBDB",204,0)
 ;;TWO LOZENGE(S);;2;;LOZENGE(S)
"RTN","PSSDSBDB",205,0)
 ;;2 LOZENGE(S);;2;;LOZENGE(S)
"RTN","PSSDSBDB",206,0)
 ;;ONE PACKET;;1;;PACKET(S)
"RTN","PSSDSBDB",207,0)
 ;;1 PACKET;;1;;PACKET(S)
"RTN","PSSDSBDB",208,0)
 ;;ONE PACKET(S);;1;;PACKET(S)
"RTN","PSSDSBDB",209,0)
 ;;1 PACKET(S);;1;;PACKET(S)
"RTN","PSSDSBDB",210,0)
 ;;TWO PACKETS;;2;;PACKET(S)
"RTN","PSSDSBDB",211,0)
 ;;2 PACKETS;;2;;PACKET(S)
"RTN","PSSDSBDB",212,0)
 ;;TWO PACKET(S);;2;;PACKET(S)
"RTN","PSSDSBDB",213,0)
 ;;2 PACKET(S);;2;;PACKET(S)
"RTN","PSSDSBDB",214,0)
 ;;ONE SUPPOSITORY;;1;;SUPPOSITORY/IES
"RTN","PSSDSBDB",215,0)
 ;;1 SUPPOSITORY;;1;;SUPPOSITORY/IES
"RTN","PSSDSBDB",216,0)
 ;;ONE SUPPOSITOR(IES);;1;;SUPPOSITORY/IES
"RTN","PSSDSBDB",217,0)
 ;;1 SUPPOSITOR(IES);;1;;SUPPOSITORY/IES
"RTN","PSSDSBDB",218,0)
 ;;ONE SUPPOSITORY(IES);;1;;SUPPOSITORY/IES
"RTN","PSSDSBDB",219,0)
 ;;1 SUPPOSITORY(IES);;1;;SUPPOSITORY/IES
"RTN","PSSDSBDB",220,0)
 ;;TWO SUPPOSITORIES;;2;;SUPPOSITORY/IES
"RTN","PSSDSBDB",221,0)
 ;;2 SUPPOSITORIES;;2;;SUPPOSITORY/IES
"RTN","PSSDSBDB",222,0)
 ;;TWO SUPPOSITOR(IES);;2;;SUPPOSITORY/IES
"RTN","PSSDSBDB",223,0)
 ;;2 SUPPOSITOR(IES);;2;;SUPPOSITORY/IES
"RTN","PSSDSBDB",224,0)
 ;;TWO SUPPOSITORY(IES);;2;;SUPPOSITORY/IES
"RTN","PSSDSBDB",225,0)
 ;;2 SUPPOSITORY(IES);;2;;SUPPOSITORY/IES
"RTN","PSSDSBDB",226,0)
 ;;ONE TROCHE;;1;;TROCHE(S)
"RTN","PSSDSBDB",227,0)
 ;;1 TROCHE;;1;;TROCHE(S)
"RTN","PSSDSBDB",228,0)
 ;;ONE TROCHE(S);;1;;TROCHE(S)
"RTN","PSSDSBDB",229,0)
 ;;1 TROCHE(S);;1;;TROCHE(S)
"RTN","PSSDSBDB",230,0)
 ;;TWO TROCHES;;2;;TROCHE(S)
"RTN","PSSDSBDB",231,0)
 ;;2 TROCHES;;2;;TROCHE(S)
"RTN","PSSDSBDB",232,0)
 ;;TWO TROCHE(S);;2;;TROCHE(S)
"RTN","PSSDSBDB",233,0)
 ;;2 TROCHE(S);;2;;TROCHE(S)
"RTN","PSSDSBDB",234,0)
 ;;
"RTN","PSSDSBDB",235,0)
 Q
"RTN","PSSDSBPA")
0^22^B112434613^n/a
"RTN","PSSDSBPA",1,0)
PSSDSBPA ;BIR/RTR-Determine numeric dose multiplier for numeric dose ;02/12/09
"RTN","PSSDSBPA",2,0)
 ;;1.0;PHARMACY DATA MANAGEMENT;**117**;9/30/97;Build 101
"RTN","PSSDSBPA",3,0)
 ;
"RTN","PSSDSBPA",4,0)
 ;
"RTN","PSSDSBPA",5,0)
NUM() ;Determine numeric dose multiplier from Local Possible Dosage
"RTN","PSSDSBPA",6,0)
 ;
"RTN","PSSDSBPA",7,0)
 N PSSQVJ1,PSSQVJ2,PSSQVJ9
"RTN","PSSDSBPA",8,0)
 K PSSQVJ1,PSSQVJ2,PSSQVJ9
"RTN","PSSDSBPA",9,0)
 I $L($G(PSSQVLCD))'>0 Q 0
"RTN","PSSDSBPA",10,0)
 ;
"RTN","PSSDSBPA",11,0)
 ;
"RTN","PSSDSBPA",12,0)
 S PSSQVJ1=$E(PSSQVLCD,1,10) I PSSQVJ1="4 AND 1/2 " I $$7 S PSSQVJ2=$E(PSSQVLCD,11,$L(PSSQVLCD)) I $$6 Q 4.5
"RTN","PSSDSBPA",13,0)
 S PSSQVJ1=$E(PSSQVLCD,1,18) I PSSQVJ1="FOUR AND ONE HALF " I $$7 S PSSQVJ2=$E(PSSQVLCD,19,$L(PSSQVLCD)) I $$6 Q 4.5
"RTN","PSSDSBPA",14,0)
 S PSSQVJ1=$E(PSSQVLCD,1,18) I PSSQVJ1="FOUR AND ONE-HALF " I $$7 S PSSQVJ2=$E(PSSQVLCD,19,$L(PSSQVLCD)) I $$6 Q 4.5
"RTN","PSSDSBPA",15,0)
 S PSSQVJ1=$E(PSSQVLCD,1,15) I PSSQVJ1="4 AND ONE HALF " I $$7 S PSSQVJ2=$E(PSSQVLCD,16,$L(PSSQVLCD)) I $$6 Q 4.5
"RTN","PSSDSBPA",16,0)
 S PSSQVJ1=$E(PSSQVLCD,1,15) I PSSQVJ1="4 AND ONE-HALF " I $$7 S PSSQVJ2=$E(PSSQVLCD,16,$L(PSSQVLCD)) I $$6 Q 4.5
"RTN","PSSDSBPA",17,0)
 S PSSQVJ1=$E(PSSQVLCD,1,13) I PSSQVJ1="FOUR AND 1/2 " I $$7 S PSSQVJ2=$E(PSSQVLCD,14,$L(PSSQVLCD)) I $$6 Q 4.5
"RTN","PSSDSBPA",18,0)
 ;
"RTN","PSSDSBPA",19,0)
 S PSSQVJ1=$E(PSSQVLCD,1,10) I PSSQVJ1="3 AND 1/2 " I $$7 S PSSQVJ2=$E(PSSQVLCD,11,$L(PSSQVLCD)) I $$6 Q 3.5
"RTN","PSSDSBPA",20,0)
 S PSSQVJ1=$E(PSSQVLCD,1,19) I PSSQVJ1="THREE AND ONE HALF " I $$7 S PSSQVJ2=$E(PSSQVLCD,20,$L(PSSQVLCD)) I $$6 Q 3.5
"RTN","PSSDSBPA",21,0)
 S PSSQVJ1=$E(PSSQVLCD,1,19) I PSSQVJ1="THREE AND ONE-HALF " I $$7 S PSSQVJ2=$E(PSSQVLCD,20,$L(PSSQVLCD)) I $$6 Q 3.5
"RTN","PSSDSBPA",22,0)
 S PSSQVJ1=$E(PSSQVLCD,1,15) I PSSQVJ1="3 AND ONE HALF " I $$7 S PSSQVJ2=$E(PSSQVLCD,16,$L(PSSQVLCD)) I $$6 Q 3.5
"RTN","PSSDSBPA",23,0)
 S PSSQVJ1=$E(PSSQVLCD,1,15) I PSSQVJ1="3 AND ONE-HALF " I $$7 S PSSQVJ2=$E(PSSQVLCD,16,$L(PSSQVLCD)) I $$6 Q 3.5
"RTN","PSSDSBPA",24,0)
 S PSSQVJ1=$E(PSSQVLCD,1,14) I PSSQVJ1="THREE AND 1/2 " I $$7 S PSSQVJ2=$E(PSSQVLCD,15,$L(PSSQVLCD)) I $$6 Q 3.5
"RTN","PSSDSBPA",25,0)
 ;
"RTN","PSSDSBPA",26,0)
 S PSSQVJ1=$E(PSSQVLCD,1,10) I PSSQVJ1="2 AND 1/2 " I $$7 S PSSQVJ2=$E(PSSQVLCD,11,$L(PSSQVLCD)) I $$6 Q 2.5
"RTN","PSSDSBPA",27,0)
 S PSSQVJ1=$E(PSSQVLCD,1,17) I PSSQVJ1="TWO AND ONE HALF " I $$7 S PSSQVJ2=$E(PSSQVLCD,18,$L(PSSQVLCD)) I $$6 Q 2.5
"RTN","PSSDSBPA",28,0)
 S PSSQVJ1=$E(PSSQVLCD,1,17) I PSSQVJ1="TWO AND ONE-HALF " I $$7 S PSSQVJ2=$E(PSSQVLCD,18,$L(PSSQVLCD)) I $$6 Q 2.5
"RTN","PSSDSBPA",29,0)
 S PSSQVJ1=$E(PSSQVLCD,1,15) I PSSQVJ1="2 AND ONE HALF " I $$7 S PSSQVJ2=$E(PSSQVLCD,16,$L(PSSQVLCD)) I $$6 Q 2.5
"RTN","PSSDSBPA",30,0)
 S PSSQVJ1=$E(PSSQVLCD,1,15) I PSSQVJ1="2 AND ONE-HALF " I $$7 S PSSQVJ2=$E(PSSQVLCD,16,$L(PSSQVLCD)) I $$6 Q 2.5
"RTN","PSSDSBPA",31,0)
 S PSSQVJ1=$E(PSSQVLCD,1,12) I PSSQVJ1="TWO AND 1/2 " I $$7 S PSSQVJ2=$E(PSSQVLCD,13,$L(PSSQVLCD)) I $$6 Q 2.5
"RTN","PSSDSBPA",32,0)
 ;
"RTN","PSSDSBPA",33,0)
 S PSSQVJ1=$E(PSSQVLCD,1,10) I PSSQVJ1="1 AND 1/2 " I $$7 S PSSQVJ2=$E(PSSQVLCD,11,$L(PSSQVLCD)) I $$6 Q 1.5
"RTN","PSSDSBPA",34,0)
 S PSSQVJ1=$E(PSSQVLCD,1,17) I PSSQVJ1="ONE AND ONE HALF " I $$7 S PSSQVJ2=$E(PSSQVLCD,18,$L(PSSQVLCD)) I $$6 Q 1.5
"RTN","PSSDSBPA",35,0)
 S PSSQVJ1=$E(PSSQVLCD,1,17) I PSSQVJ1="ONE AND ONE-HALF " I $$7 S PSSQVJ2=$E(PSSQVLCD,18,$L(PSSQVLCD)) I $$6 Q 1.5
"RTN","PSSDSBPA",36,0)
 S PSSQVJ1=$E(PSSQVLCD,1,15) I PSSQVJ1="1 AND ONE HALF " I $$7 S PSSQVJ2=$E(PSSQVLCD,16,$L(PSSQVLCD)) I $$6 Q 1.5
"RTN","PSSDSBPA",37,0)
 S PSSQVJ1=$E(PSSQVLCD,1,15) I PSSQVJ1="1 AND ONE-HALF " I $$7 S PSSQVJ2=$E(PSSQVLCD,16,$L(PSSQVLCD)) I $$6 Q 1.5
"RTN","PSSDSBPA",38,0)
 S PSSQVJ1=$E(PSSQVLCD,1,12) I PSSQVJ1="ONE AND 1/2 " I $$7 S PSSQVJ2=$E(PSSQVLCD,13,$L(PSSQVLCD)) I $$6 Q 1.5
"RTN","PSSDSBPA",39,0)
 ;
"RTN","PSSDSBPA",40,0)
 S PSSQVJ1=$E(PSSQVLCD,1,10) I PSSQVJ1="4 AND 1/4 " I $$7 S PSSQVJ2=$E(PSSQVLCD,11,$L(PSSQVLCD)) I $$6 Q 4.25
"RTN","PSSDSBPA",41,0)
 S PSSQVJ1=$E(PSSQVLCD,1,20) I PSSQVJ1="FOUR AND ONE FOURTH " I $$7 S PSSQVJ2=$E(PSSQVLCD,21,$L(PSSQVLCD)) I $$6 Q 4.25
"RTN","PSSDSBPA",42,0)
 S PSSQVJ1=$E(PSSQVLCD,1,20) I PSSQVJ1="FOUR AND ONE-FOURTH " I $$7 S PSSQVJ2=$E(PSSQVLCD,21,$L(PSSQVLCD)) I $$6 Q 4.25
"RTN","PSSDSBPA",43,0)
 S PSSQVJ1=$E(PSSQVLCD,1,17) I PSSQVJ1="4 AND ONE FOURTH " I $$7 S PSSQVJ2=$E(PSSQVLCD,18,$L(PSSQVLCD)) I $$6 Q 4.25
"RTN","PSSDSBPA",44,0)
 S PSSQVJ1=$E(PSSQVLCD,1,17) I PSSQVJ1="4 AND ONE-FOURTH " I $$7 S PSSQVJ2=$E(PSSQVLCD,18,$L(PSSQVLCD)) I $$6 Q 4.25
"RTN","PSSDSBPA",45,0)
 S PSSQVJ1=$E(PSSQVLCD,1,13) I PSSQVJ1="FOUR AND 1/4 " I $$7 S PSSQVJ2=$E(PSSQVLCD,14,$L(PSSQVLCD)) I $$6 Q 4.25
"RTN","PSSDSBPA",46,0)
 ;
"RTN","PSSDSBPA",47,0)
 S PSSQVJ1=$E(PSSQVLCD,1,10) I PSSQVJ1="3 AND 1/4 " I $$7 S PSSQVJ2=$E(PSSQVLCD,11,$L(PSSQVLCD)) I $$6 Q 3.25
"RTN","PSSDSBPA",48,0)
 S PSSQVJ1=$E(PSSQVLCD,1,21) I PSSQVJ1="THREE AND ONE FOURTH " I $$7 S PSSQVJ2=$E(PSSQVLCD,22,$L(PSSQVLCD)) I $$6 Q 3.25
"RTN","PSSDSBPA",49,0)
 S PSSQVJ1=$E(PSSQVLCD,1,21) I PSSQVJ1="THREE AND ONE-FOURTH " I $$7 S PSSQVJ2=$E(PSSQVLCD,22,$L(PSSQVLCD)) I $$6 Q 3.25
"RTN","PSSDSBPA",50,0)
 S PSSQVJ1=$E(PSSQVLCD,1,17) I PSSQVJ1="3 AND ONE FOURTH " I $$7 S PSSQVJ2=$E(PSSQVLCD,18,$L(PSSQVLCD)) I $$6 Q 3.25
"RTN","PSSDSBPA",51,0)
 S PSSQVJ1=$E(PSSQVLCD,1,17) I PSSQVJ1="3 AND ONE-FOURTH " I $$7 S PSSQVJ2=$E(PSSQVLCD,18,$L(PSSQVLCD)) I $$6 Q 3.25
"RTN","PSSDSBPA",52,0)
 S PSSQVJ1=$E(PSSQVLCD,1,14) I PSSQVJ1="THREE AND 1/4 " I $$7 S PSSQVJ2=$E(PSSQVLCD,15,$L(PSSQVLCD)) I $$6 Q 3.25
"RTN","PSSDSBPA",53,0)
 ;
"RTN","PSSDSBPA",54,0)
 S PSSQVJ1=$E(PSSQVLCD,1,10) I PSSQVJ1="2 AND 1/4 " I $$7 S PSSQVJ2=$E(PSSQVLCD,11,$L(PSSQVLCD)) I $$6 Q 2.25
"RTN","PSSDSBPA",55,0)
 S PSSQVJ1=$E(PSSQVLCD,1,19) I PSSQVJ1="TWO AND ONE FOURTH " I $$7 S PSSQVJ2=$E(PSSQVLCD,20,$L(PSSQVLCD)) I $$6 Q 2.25
"RTN","PSSDSBPA",56,0)
 S PSSQVJ1=$E(PSSQVLCD,1,19) I PSSQVJ1="TWO AND ONE-FOURTH " I $$7 S PSSQVJ2=$E(PSSQVLCD,20,$L(PSSQVLCD)) I $$6 Q 2.25
"RTN","PSSDSBPA",57,0)
 S PSSQVJ1=$E(PSSQVLCD,1,17) I PSSQVJ1="2 AND ONE FOURTH " I $$7 S PSSQVJ2=$E(PSSQVLCD,18,$L(PSSQVLCD)) I $$6 Q 2.25
"RTN","PSSDSBPA",58,0)
 S PSSQVJ1=$E(PSSQVLCD,1,17) I PSSQVJ1="2 AND ONE-FOURTH " I $$7 S PSSQVJ2=$E(PSSQVLCD,18,$L(PSSQVLCD)) I $$6 Q 2.25
"RTN","PSSDSBPA",59,0)
 S PSSQVJ1=$E(PSSQVLCD,1,12) I PSSQVJ1="TWO AND 1/4 " I $$7 S PSSQVJ2=$E(PSSQVLCD,13,$L(PSSQVLCD)) I $$6 Q 2.25
"RTN","PSSDSBPA",60,0)
 ;
"RTN","PSSDSBPA",61,0)
 S PSSQVJ1=$E(PSSQVLCD,1,10) I PSSQVJ1="1 AND 1/4 " I $$7 S PSSQVJ2=$E(PSSQVLCD,11,$L(PSSQVLCD)) I $$6 Q 1.25
"RTN","PSSDSBPA",62,0)
 S PSSQVJ1=$E(PSSQVLCD,1,19) I PSSQVJ1="ONE AND ONE FOURTH " I $$7 S PSSQVJ2=$E(PSSQVLCD,20,$L(PSSQVLCD)) I $$6 Q 1.25
"RTN","PSSDSBPA",63,0)
 S PSSQVJ1=$E(PSSQVLCD,1,19) I PSSQVJ1="ONE AND ONE-FOURTH " I $$7 S PSSQVJ2=$E(PSSQVLCD,20,$L(PSSQVLCD)) I $$6 Q 1.25
"RTN","PSSDSBPA",64,0)
 S PSSQVJ1=$E(PSSQVLCD,1,17) I PSSQVJ1="1 AND ONE FOURTH " I $$7 S PSSQVJ2=$E(PSSQVLCD,18,$L(PSSQVLCD)) I $$6 Q 1.25
"RTN","PSSDSBPA",65,0)
 S PSSQVJ1=$E(PSSQVLCD,1,17) I PSSQVJ1="1 AND ONE-FOURTH " I $$7 S PSSQVJ2=$E(PSSQVLCD,18,$L(PSSQVLCD)) I $$6 Q 1.25
"RTN","PSSDSBPA",66,0)
 S PSSQVJ1=$E(PSSQVLCD,1,12) I PSSQVJ1="ONE AND 1/4 " I $$7 S PSSQVJ2=$E(PSSQVLCD,13,$L(PSSQVLCD)) I $$6 Q 1.25
"RTN","PSSDSBPA",67,0)
 ;
"RTN","PSSDSBPA",68,0)
 S PSSQVJ1=$E(PSSQVLCD,1,10) I PSSQVJ1="4 AND 1/3 " I $$7 S PSSQVJ2=$E(PSSQVLCD,11,$L(PSSQVLCD)) I $$6 Q 4.33
"RTN","PSSDSBPA",69,0)
 S PSSQVJ1=$E(PSSQVLCD,1,19) I PSSQVJ1="FOUR AND ONE THIRD " I $$7 S PSSQVJ2=$E(PSSQVLCD,20,$L(PSSQVLCD)) I $$6 Q 4.33
"RTN","PSSDSBPA",70,0)
 S PSSQVJ1=$E(PSSQVLCD,1,19) I PSSQVJ1="FOUR AND ONE-THIRD " I $$7 S PSSQVJ2=$E(PSSQVLCD,20,$L(PSSQVLCD)) I $$6 Q 4.33
"RTN","PSSDSBPA",71,0)
 S PSSQVJ1=$E(PSSQVLCD,1,16) I PSSQVJ1="4 AND ONE THIRD " I $$7 S PSSQVJ2=$E(PSSQVLCD,17,$L(PSSQVLCD)) I $$6 Q 4.33
"RTN","PSSDSBPA",72,0)
 S PSSQVJ1=$E(PSSQVLCD,1,16) I PSSQVJ1="4 AND ONE-THIRD " I $$7 S PSSQVJ2=$E(PSSQVLCD,17,$L(PSSQVLCD)) I $$6 Q 4.33
"RTN","PSSDSBPA",73,0)
 S PSSQVJ1=$E(PSSQVLCD,1,13) I PSSQVJ1="FOUR AND 1/3 " I $$7 S PSSQVJ2=$E(PSSQVLCD,14,$L(PSSQVLCD)) I $$6 Q 4.33
"RTN","PSSDSBPA",74,0)
 ;
"RTN","PSSDSBPA",75,0)
 S PSSQVJ1=$E(PSSQVLCD,1,10) I PSSQVJ1="3 AND 1/3 " I $$7 S PSSQVJ2=$E(PSSQVLCD,11,$L(PSSQVLCD)) I $$6 Q 3.33
"RTN","PSSDSBPA",76,0)
 S PSSQVJ1=$E(PSSQVLCD,1,20) I PSSQVJ1="THREE AND ONE THIRD " I $$7 S PSSQVJ2=$E(PSSQVLCD,21,$L(PSSQVLCD)) I $$6 Q 3.33
"RTN","PSSDSBPA",77,0)
 S PSSQVJ1=$E(PSSQVLCD,1,20) I PSSQVJ1="THREE AND ONE-THIRD " I $$7 S PSSQVJ2=$E(PSSQVLCD,21,$L(PSSQVLCD)) I $$6 Q 3.33
"RTN","PSSDSBPA",78,0)
 S PSSQVJ1=$E(PSSQVLCD,1,16) I PSSQVJ1="3 AND ONE THIRD " I $$7 S PSSQVJ2=$E(PSSQVLCD,17,$L(PSSQVLCD)) I $$6 Q 3.33
"RTN","PSSDSBPA",79,0)
 S PSSQVJ1=$E(PSSQVLCD,1,16) I PSSQVJ1="3 AND ONE-THIRD " I $$7 S PSSQVJ2=$E(PSSQVLCD,17,$L(PSSQVLCD)) I $$6 Q 3.33
"RTN","PSSDSBPA",80,0)
 S PSSQVJ1=$E(PSSQVLCD,1,14) I PSSQVJ1="THREE AND 1/3 " I $$7 S PSSQVJ2=$E(PSSQVLCD,15,$L(PSSQVLCD)) I $$6 Q 3.33
"RTN","PSSDSBPA",81,0)
 ;
"RTN","PSSDSBPA",82,0)
 S PSSQVJ1=$E(PSSQVLCD,1,10) I PSSQVJ1="2 AND 1/3 " I $$7 S PSSQVJ2=$E(PSSQVLCD,11,$L(PSSQVLCD)) I $$6 Q 2.33
"RTN","PSSDSBPA",83,0)
 S PSSQVJ1=$E(PSSQVLCD,1,18) I PSSQVJ1="TWO AND ONE THIRD " I $$7 S PSSQVJ2=$E(PSSQVLCD,19,$L(PSSQVLCD)) I $$6 Q 2.33
"RTN","PSSDSBPA",84,0)
 S PSSQVJ1=$E(PSSQVLCD,1,18) I PSSQVJ1="TWO AND ONE-THIRD " I $$7 S PSSQVJ2=$E(PSSQVLCD,19,$L(PSSQVLCD)) I $$6 Q 2.33
"RTN","PSSDSBPA",85,0)
 S PSSQVJ1=$E(PSSQVLCD,1,16) I PSSQVJ1="2 AND ONE THIRD " I $$7 S PSSQVJ2=$E(PSSQVLCD,17,$L(PSSQVLCD)) I $$6 Q 2.33
"RTN","PSSDSBPA",86,0)
 S PSSQVJ1=$E(PSSQVLCD,1,16) I PSSQVJ1="2 AND ONE-THIRD " I $$7 S PSSQVJ2=$E(PSSQVLCD,17,$L(PSSQVLCD)) I $$6 Q 2.33
"RTN","PSSDSBPA",87,0)
 S PSSQVJ1=$E(PSSQVLCD,1,12) I PSSQVJ1="TWO AND 1/3 " I $$7 S PSSQVJ2=$E(PSSQVLCD,13,$L(PSSQVLCD)) I $$6 Q 2.33
"RTN","PSSDSBPA",88,0)
 ;
"RTN","PSSDSBPA",89,0)
 S PSSQVJ1=$E(PSSQVLCD,1,10) I PSSQVJ1="1 AND 1/3 " I $$7 S PSSQVJ2=$E(PSSQVLCD,11,$L(PSSQVLCD)) I $$6 Q 1.33
"RTN","PSSDSBPA",90,0)
 S PSSQVJ1=$E(PSSQVLCD,1,18) I PSSQVJ1="ONE AND ONE THIRD " I $$7 S PSSQVJ2=$E(PSSQVLCD,19,$L(PSSQVLCD)) I $$6 Q 1.33
"RTN","PSSDSBPA",91,0)
 S PSSQVJ1=$E(PSSQVLCD,1,18) I PSSQVJ1="ONE AND ONE-THIRD " I $$7 S PSSQVJ2=$E(PSSQVLCD,19,$L(PSSQVLCD)) I $$6 Q 1.33
"RTN","PSSDSBPA",92,0)
 S PSSQVJ1=$E(PSSQVLCD,1,16) I PSSQVJ1="1 AND ONE THIRD " I $$7 S PSSQVJ2=$E(PSSQVLCD,17,$L(PSSQVLCD)) I $$6 Q 1.33
"RTN","PSSDSBPA",93,0)
 S PSSQVJ1=$E(PSSQVLCD,1,16) I PSSQVJ1="1 AND ONE-THIRD " I $$7 S PSSQVJ2=$E(PSSQVLCD,17,$L(PSSQVLCD)) I $$6 Q 1.33
"RTN","PSSDSBPA",94,0)
 S PSSQVJ1=$E(PSSQVLCD,1,12) I PSSQVJ1="ONE AND 1/3 " I $$7 S PSSQVJ2=$E(PSSQVLCD,13,$L(PSSQVLCD)) I $$6 Q 1.33
"RTN","PSSDSBPA",95,0)
 ;
"RTN","PSSDSBPA",96,0)
 S PSSQVJ1=$E(PSSQVLCD,1,6) I PSSQVJ1="0.5-1 " I $$7 S PSSQVJ2=$E(PSSQVLCD,7,$L(PSSQVLCD)) I $$6 Q 1
"RTN","PSSDSBPA",97,0)
 S PSSQVJ1=$E(PSSQVLCD,1,8) I PSSQVJ1="0.5 - 1 " I $$7 S PSSQVJ2=$E(PSSQVLCD,9,$L(PSSQVLCD)) I $$6 Q 1
"RTN","PSSDSBPA",98,0)
 S PSSQVJ1=$E(PSSQVLCD,1,9) I PSSQVJ1="0.5 TO 1 " I $$7 S PSSQVJ2=$E(PSSQVLCD,10,$L(PSSQVLCD)) I $$6 Q 1
"RTN","PSSDSBPA",99,0)
 S PSSQVJ1=$E(PSSQVLCD,1,9) I PSSQVJ1="0.5 OR 1 " I $$7 S PSSQVJ2=$E(PSSQVLCD,10,$L(PSSQVLCD)) I $$6 Q 1
"RTN","PSSDSBPA",100,0)
 S PSSQVJ1=$E(PSSQVLCD,1,6) I PSSQVJ1="1/2-1 " I $$7 S PSSQVJ2=$E(PSSQVLCD,7,$L(PSSQVLCD)) I $$6 Q 1
"RTN","PSSDSBPA",101,0)
 S PSSQVJ1=$E(PSSQVLCD,1,8) I PSSQVJ1="1/2 - 1 " I $$7 S PSSQVJ2=$E(PSSQVLCD,9,$L(PSSQVLCD)) I $$6 Q 1
"RTN","PSSDSBPA",102,0)
 S PSSQVJ1=$E(PSSQVLCD,1,9) I PSSQVJ1="1/2 TO 1 " I $$7 S PSSQVJ2=$E(PSSQVLCD,10,$L(PSSQVLCD)) I $$6 Q 1
"RTN","PSSDSBPA",103,0)
 S PSSQVJ1=$E(PSSQVLCD,1,9) I PSSQVJ1="1/2 OR 1 " I $$7 S PSSQVJ2=$E(PSSQVLCD,10,$L(PSSQVLCD)) I $$6 Q 1
"RTN","PSSDSBPA",104,0)
 S PSSQVJ1=$E(PSSQVLCD,1,16) I PSSQVJ1="ONE-HALF TO ONE " I $$7 S PSSQVJ2=$E(PSSQVLCD,17,$L(PSSQVLCD)) I $$6 Q 1
"RTN","PSSDSBPA",105,0)
 S PSSQVJ1=$E(PSSQVLCD,1,18) I PSSQVJ1="ONE - HALF TO ONE " I $$7 S PSSQVJ2=$E(PSSQVLCD,19,$L(PSSQVLCD)) I $$6 Q 1
"RTN","PSSDSBPA",106,0)
 S PSSQVJ1=$E(PSSQVLCD,1,16) I PSSQVJ1="ONE HALF TO ONE " I $$7 S PSSQVJ2=$E(PSSQVLCD,17,$L(PSSQVLCD)) I $$6 Q 1
"RTN","PSSDSBPA",107,0)
 S PSSQVJ1=$E(PSSQVLCD,1,16) I PSSQVJ1="ONE-HALF OR ONE " I $$7 S PSSQVJ2=$E(PSSQVLCD,17,$L(PSSQVLCD)) I $$6 Q 1
"RTN","PSSDSBPA",108,0)
 S PSSQVJ1=$E(PSSQVLCD,1,18) I PSSQVJ1="ONE - HALF OR ONE " I $$7 S PSSQVJ2=$E(PSSQVLCD,19,$L(PSSQVLCD)) I $$6 Q 1
"RTN","PSSDSBPA",109,0)
 S PSSQVJ1=$E(PSSQVLCD,1,16) I PSSQVJ1="ONE HALF OR ONE " I $$7 S PSSQVJ2=$E(PSSQVLCD,17,$L(PSSQVLCD)) I $$6 Q 1
"RTN","PSSDSBPA",110,0)
 ;
"RTN","PSSDSBPA",111,0)
 S PSSQVJ1=$E(PSSQVLCD,1,4) I PSSQVJ1="1-2 " I $$7 S PSSQVJ2=$E(PSSQVLCD,5,$L(PSSQVLCD)) I $$6 Q 2
"RTN","PSSDSBPA",112,0)
 S PSSQVJ1=$E(PSSQVLCD,1,6) I PSSQVJ1="1 - 2 " I $$7 S PSSQVJ2=$E(PSSQVLCD,7,$L(PSSQVLCD)) I $$6 Q 2
"RTN","PSSDSBPA",113,0)
 S PSSQVJ1=$E(PSSQVLCD,1,7) I PSSQVJ1="1 TO 2 " I $$7 S PSSQVJ2=$E(PSSQVLCD,8,$L(PSSQVLCD)) I $$6 Q 2
"RTN","PSSDSBPA",114,0)
 S PSSQVJ1=$E(PSSQVLCD,1,7) I PSSQVJ1="1 OR 2 " I $$7 S PSSQVJ2=$E(PSSQVLCD,8,$L(PSSQVLCD)) I $$6 Q 2
"RTN","PSSDSBPA",115,0)
 S PSSQVJ1=$E(PSSQVLCD,1,11) I PSSQVJ1="ONE TO TWO " I $$7 S PSSQVJ2=$E(PSSQVLCD,12,$L(PSSQVLCD)) I $$6 Q 2
"RTN","PSSDSBPA",116,0)
 S PSSQVJ1=$E(PSSQVLCD,1,11) I PSSQVJ1="ONE OR TWO " I $$7 S PSSQVJ2=$E(PSSQVLCD,12,$L(PSSQVLCD)) I $$6 Q 2
"RTN","PSSDSBPA",117,0)
 S PSSQVJ1=$E(PSSQVLCD,1,8) I PSSQVJ1="ONE-TWO " I $$7 S PSSQVJ2=$E(PSSQVLCD,9,$L(PSSQVLCD)) I $$6 Q 2
"RTN","PSSDSBPA",118,0)
 S PSSQVJ1=$E(PSSQVLCD,1,10) I PSSQVJ1="ONE - TWO " I $$7 S PSSQVJ2=$E(PSSQVLCD,11,$L(PSSQVLCD)) I $$6 Q 2
"RTN","PSSDSBPA",119,0)
 ;
"RTN","PSSDSBPA",120,0)
 S PSSQVJ1=$E(PSSQVLCD,1,4) I PSSQVJ1="2-3 " I $$7 S PSSQVJ2=$E(PSSQVLCD,5,$L(PSSQVLCD)) I $$6 Q 3
"RTN","PSSDSBPA",121,0)
 S PSSQVJ1=$E(PSSQVLCD,1,6) I PSSQVJ1="2 - 3 " I $$7 S PSSQVJ2=$E(PSSQVLCD,7,$L(PSSQVLCD)) I $$6 Q 3
"RTN","PSSDSBPA",122,0)
 S PSSQVJ1=$E(PSSQVLCD,1,7) I PSSQVJ1="2 TO 3 " I $$7 S PSSQVJ2=$E(PSSQVLCD,8,$L(PSSQVLCD)) I $$6 Q 3
"RTN","PSSDSBPA",123,0)
 S PSSQVJ1=$E(PSSQVLCD,1,7) I PSSQVJ1="2 OR 3 " I $$7 S PSSQVJ2=$E(PSSQVLCD,8,$L(PSSQVLCD)) I $$6 Q 3
"RTN","PSSDSBPA",124,0)
 S PSSQVJ1=$E(PSSQVLCD,1,13) I PSSQVJ1="TWO TO THREE " I $$7 S PSSQVJ2=$E(PSSQVLCD,14,$L(PSSQVLCD)) I $$6 Q 3
"RTN","PSSDSBPA",125,0)
 S PSSQVJ1=$E(PSSQVLCD,1,13) I PSSQVJ1="TWO OR THREE " I $$7 S PSSQVJ2=$E(PSSQVLCD,14,$L(PSSQVLCD)) I $$6 Q 3
"RTN","PSSDSBPA",126,0)
 S PSSQVJ1=$E(PSSQVLCD,1,10) I PSSQVJ1="TWO-THREE " I $$7 S PSSQVJ2=$E(PSSQVLCD,11,$L(PSSQVLCD)) I $$6 Q 3
"RTN","PSSDSBPA",127,0)
 S PSSQVJ1=$E(PSSQVLCD,1,12) I PSSQVJ1="TWO - THREE " I $$7 S PSSQVJ2=$E(PSSQVLCD,13,$L(PSSQVLCD)) I $$6 Q 3
"RTN","PSSDSBPA",128,0)
 ;
"RTN","PSSDSBPA",129,0)
 S PSSQVJ1=$E(PSSQVLCD,1,4) I PSSQVJ1="3-4 " I $$7 S PSSQVJ2=$E(PSSQVLCD,5,$L(PSSQVLCD)) I $$6 Q 4
"RTN","PSSDSBPA",130,0)
 S PSSQVJ1=$E(PSSQVLCD,1,6) I PSSQVJ1="3 - 4 " I $$7 S PSSQVJ2=$E(PSSQVLCD,7,$L(PSSQVLCD)) I $$6 Q 4
"RTN","PSSDSBPA",131,0)
 S PSSQVJ1=$E(PSSQVLCD,1,7) I PSSQVJ1="3 TO 4 " I $$7 S PSSQVJ2=$E(PSSQVLCD,8,$L(PSSQVLCD)) I $$6 Q 4
"RTN","PSSDSBPA",132,0)
 S PSSQVJ1=$E(PSSQVLCD,1,7) I PSSQVJ1="3 OR 4 " I $$7 S PSSQVJ2=$E(PSSQVLCD,8,$L(PSSQVLCD)) I $$6 Q 4
"RTN","PSSDSBPA",133,0)
 S PSSQVJ1=$E(PSSQVLCD,1,14) I PSSQVJ1="THREE TO FOUR " I $$7 S PSSQVJ2=$E(PSSQVLCD,15,$L(PSSQVLCD)) I $$6 Q 4
"RTN","PSSDSBPA",134,0)
 S PSSQVJ1=$E(PSSQVLCD,1,14) I PSSQVJ1="THREE OR FOUR " I $$7 S PSSQVJ2=$E(PSSQVLCD,15,$L(PSSQVLCD)) I $$6 Q 4
"RTN","PSSDSBPA",135,0)
 S PSSQVJ1=$E(PSSQVLCD,1,11) I PSSQVJ1="THREE-FOUR " I $$7 S PSSQVJ2=$E(PSSQVLCD,12,$L(PSSQVLCD)) I $$6 Q 4
"RTN","PSSDSBPA",136,0)
 S PSSQVJ1=$E(PSSQVLCD,1,13) I PSSQVJ1="THREE - FOUR " I $$7 S PSSQVJ2=$E(PSSQVLCD,14,$L(PSSQVLCD)) I $$6 Q 4
"RTN","PSSDSBPA",137,0)
 ;
"RTN","PSSDSBPA",138,0)
 S PSSQVJ1=$E(PSSQVLCD,1,4) I PSSQVJ1="0.5 " I $$7 S PSSQVJ2=$E(PSSQVLCD,5,$L(PSSQVLCD)) I $$6 Q .5
"RTN","PSSDSBPA",139,0)
 S PSSQVJ1=$E(PSSQVLCD,1,4) I PSSQVJ1="1/2 " I $$7 S PSSQVJ2=$E(PSSQVLCD,5,$L(PSSQVLCD)) I $$6 Q .5
"RTN","PSSDSBPA",140,0)
 S PSSQVJ1=$E(PSSQVLCD,1,9) I PSSQVJ1="ONE HALF " I $$7 S PSSQVJ2=$E(PSSQVLCD,10,$L(PSSQVLCD)) I $$6 Q .5
"RTN","PSSDSBPA",141,0)
 S PSSQVJ1=$E(PSSQVLCD,1,9) I PSSQVJ1="ONE-HALF " I $$7 S PSSQVJ2=$E(PSSQVLCD,10,$L(PSSQVLCD)) I $$6 Q .5
"RTN","PSSDSBPA",142,0)
 ;
"RTN","PSSDSBPA",143,0)
 S PSSQVJ1=$E(PSSQVLCD,1,5) I PSSQVJ1="0.33 " I $$7 S PSSQVJ2=$E(PSSQVLCD,6,$L(PSSQVLCD)) I $$6 Q .33
"RTN","PSSDSBPA",144,0)
 S PSSQVJ1=$E(PSSQVLCD,1,4) I PSSQVJ1="1/3 " I $$7 S PSSQVJ2=$E(PSSQVLCD,5,$L(PSSQVLCD)) I $$6 Q .33
"RTN","PSSDSBPA",145,0)
 S PSSQVJ1=$E(PSSQVLCD,1,10) I PSSQVJ1="ONE THIRD " I $$7 S PSSQVJ2=$E(PSSQVLCD,11,$L(PSSQVLCD)) I $$6 Q .33
"RTN","PSSDSBPA",146,0)
 S PSSQVJ1=$E(PSSQVLCD,1,10) I PSSQVJ1="ONE-THIRD " I $$7 S PSSQVJ2=$E(PSSQVLCD,11,$L(PSSQVLCD)) I $$6 Q .33
"RTN","PSSDSBPA",147,0)
 ;
"RTN","PSSDSBPA",148,0)
 S PSSQVJ1=$E(PSSQVLCD,1,5) I PSSQVJ1="0.25 " I $$7 S PSSQVJ2=$E(PSSQVLCD,6,$L(PSSQVLCD)) I $$6 Q .25
"RTN","PSSDSBPA",149,0)
 S PSSQVJ1=$E(PSSQVLCD,1,4) I PSSQVJ1="1/4 " I $$7 S PSSQVJ2=$E(PSSQVLCD,5,$L(PSSQVLCD)) I $$6 Q .25
"RTN","PSSDSBPA",150,0)
 S PSSQVJ1=$E(PSSQVLCD,1,11) I PSSQVJ1="ONE FOURTH " I $$7 S PSSQVJ2=$E(PSSQVLCD,12,$L(PSSQVLCD)) I $$6 Q .25
"RTN","PSSDSBPA",151,0)
 S PSSQVJ1=$E(PSSQVLCD,1,11) I PSSQVJ1="ONE-FOURTH " I $$7 S PSSQVJ2=$E(PSSQVLCD,12,$L(PSSQVLCD)) I $$6 Q .25
"RTN","PSSDSBPA",152,0)
 ;
"RTN","PSSDSBPA",153,0)
 ;
"RTN","PSSDSBPA",154,0)
 S PSSQVJ9=$$NUMX^PSSDSBPB
"RTN","PSSDSBPA",155,0)
 Q PSSQVJ9
"RTN","PSSDSBPA",156,0)
 ;
"RTN","PSSDSBPA",157,0)
 ;Q 0
"RTN","PSSDSBPA",158,0)
 ;
"RTN","PSSDSBPA",159,0)
 ;
"RTN","PSSDSBPA",160,0)
6() ;
"RTN","PSSDSBPA",161,0)
 ;Some special characters in a Nouns will pass, (), etc. others like "/" will not
"RTN","PSSDSBPA",162,0)
 I PSSQVJ2[" " Q 0
"RTN","PSSDSBPA",163,0)
 I PSSQVJ2["-" Q 0
"RTN","PSSDSBPA",164,0)
 I PSSQVJ2["&" Q 0
"RTN","PSSDSBPA",165,0)
 I PSSQVJ2["\" Q 0
"RTN","PSSDSBPA",166,0)
 I PSSQVJ2["/" Q 0
"RTN","PSSDSBPA",167,0)
 Q 1
"RTN","PSSDSBPA",168,0)
 ;
"RTN","PSSDSBPA",169,0)
7() ;
"RTN","PSSDSBPA",170,0)
 I $L(PSSQVLCD)'>$L(PSSQVJ1) Q 0
"RTN","PSSDSBPA",171,0)
 Q 1
"RTN","PSSDSBPB")
0^23^B55713776^n/a
"RTN","PSSDSBPB",1,0)
PSSDSBPB ;BIR/RTR-Determine numeric dose multiplier for dose call, continued ;02/12/09
"RTN","PSSDSBPB",2,0)
 ;;1.0;PHARMACY DATA MANAGEMENT;**117**;9/30/97;Build 101
"RTN","PSSDSBPB",3,0)
 ;
"RTN","PSSDSBPB",4,0)
 ;
"RTN","PSSDSBPB",5,0)
NUMX() ;Determine numeric dose multiplier from Local Possible Dosage
"RTN","PSSDSBPB",6,0)
 ;
"RTN","PSSDSBPB",7,0)
 ;
"RTN","PSSDSBPB",8,0)
 S PSSQVJ1=$E(PSSQVLCD,1,2) I PSSQVJ1="4 " I $$7 S PSSQVJ2=$E(PSSQVLCD,3,$L(PSSQVLCD)) I $$6,PSSQVJ2'["4",PSSQVJ2'["3",PSSQVJ2'["2",PSSQVJ2'["FOURTH",PSSQVJ2'["THIRD",PSSQVJ2'["HALF" Q 4
"RTN","PSSDSBPB",9,0)
 S PSSQVJ1=$E(PSSQVLCD,1,5) I PSSQVJ1="FOUR " I $$7 S PSSQVJ2=$E(PSSQVLCD,6,$L(PSSQVLCD)) I $$6,PSSQVJ2'["4",PSSQVJ2'["3",PSSQVJ2'["2",PSSQVJ2'["FOURTH",PSSQVJ2'["THIRD",PSSQVJ2'["HALF" Q 4
"RTN","PSSDSBPB",10,0)
 ;
"RTN","PSSDSBPB",11,0)
 S PSSQVJ1=$E(PSSQVLCD,1,2) I PSSQVJ1="3 " I $$7 S PSSQVJ2=$E(PSSQVLCD,3,$L(PSSQVLCD)) I $$6,PSSQVJ2'["4",PSSQVJ2'["3",PSSQVJ2'["2",PSSQVJ2'["FOURTH",PSSQVJ2'["THIRD",PSSQVJ2'["HALF" Q 3
"RTN","PSSDSBPB",12,0)
 S PSSQVJ1=$E(PSSQVLCD,1,6) I PSSQVJ1="THREE " I $$7 S PSSQVJ2=$E(PSSQVLCD,7,$L(PSSQVLCD)) I $$6,PSSQVJ2'["4",PSSQVJ2'["3",PSSQVJ2'["2",PSSQVJ2'["FOURTH",PSSQVJ2'["THIRD",PSSQVJ2'["HALF" Q 3
"RTN","PSSDSBPB",13,0)
 ;
"RTN","PSSDSBPB",14,0)
 S PSSQVJ1=$E(PSSQVLCD,1,2) I PSSQVJ1="2 " I $$7 S PSSQVJ2=$E(PSSQVLCD,3,$L(PSSQVLCD)) I $$6,PSSQVJ2'["4",PSSQVJ2'["3",PSSQVJ2'["2",PSSQVJ2'["FOURTH",PSSQVJ2'["THIRD",PSSQVJ2'["HALF" Q 2
"RTN","PSSDSBPB",15,0)
 S PSSQVJ1=$E(PSSQVLCD,1,4) I PSSQVJ1="TWO " I $$7 S PSSQVJ2=$E(PSSQVLCD,5,$L(PSSQVLCD)) I $$6,PSSQVJ2'["4",PSSQVJ2'["3",PSSQVJ2'["2",PSSQVJ2'["FOURTH",PSSQVJ2'["THIRD",PSSQVJ2'["HALF" Q 2
"RTN","PSSDSBPB",16,0)
 ;
"RTN","PSSDSBPB",17,0)
 S PSSQVJ1=$E(PSSQVLCD,1,2) I PSSQVJ1="1 " I $$7 S PSSQVJ2=$E(PSSQVLCD,3,$L(PSSQVLCD)) I $$6,PSSQVJ2'["4",PSSQVJ2'["3",PSSQVJ2'["2",PSSQVJ2'["FOURTH",PSSQVJ2'["THIRD",PSSQVJ2'["HALF" Q 1
"RTN","PSSDSBPB",18,0)
 S PSSQVJ1=$E(PSSQVLCD,1,4) I PSSQVJ1="ONE " I $$7 S PSSQVJ2=$E(PSSQVLCD,5,$L(PSSQVLCD)) I $$6,PSSQVJ2'["FOURTH",PSSQVJ2'["THIRD",PSSQVJ2'["HALF",PSSQVJ2'["4",PSSQVJ2'["3",PSSQVJ2'["2" Q 1
"RTN","PSSDSBPB",19,0)
 ;
"RTN","PSSDSBPB",20,0)
 Q 0
"RTN","PSSDSBPB",21,0)
 ;
"RTN","PSSDSBPB",22,0)
 ;
"RTN","PSSDSBPB",23,0)
6() ;
"RTN","PSSDSBPB",24,0)
 ;Some special characters in a Nouns will pass, (), etc. others like "/" will not
"RTN","PSSDSBPB",25,0)
 I PSSQVJ2[" " Q 0
"RTN","PSSDSBPB",26,0)
 I PSSQVJ2["-" Q 0
"RTN","PSSDSBPB",27,0)
 I PSSQVJ2["&" Q 0
"RTN","PSSDSBPB",28,0)
 I PSSQVJ2["\" Q 0
"RTN","PSSDSBPB",29,0)
 I PSSQVJ2["/" Q 0
"RTN","PSSDSBPB",30,0)
 Q 1
"RTN","PSSDSBPB",31,0)
 ;
"RTN","PSSDSBPB",32,0)
7() ;
"RTN","PSSDSBPB",33,0)
 I $L(PSSQVLCD)'>$L(PSSQVJ1) Q 0
"RTN","PSSDSBPB",34,0)
 Q 1
"RTN","PSSDSBPB",35,0)
 ;
"RTN","PSSDSBPB",36,0)
 ;
"RTN","PSSDSBPB",37,0)
 ;
"RTN","PSSDSBPB",38,0)
NUMC() ;Continuation of Free Text Dosage conversion from routine PSSDSAPL
"RTN","PSSDSBPB",39,0)
 ;
"RTN","PSSDSBPB",40,0)
 S PSSDBV1=$E(PSSDBV9,1,4) I PSSDBV1="3-4 ",$$4 S PSSDBV2=$E(PSSDBV9,5,$L(PSSDBV9)) I $$8 Q 4
"RTN","PSSDSBPB",41,0)
 S PSSDBV1=$E(PSSDBV9,1,6) I PSSDBV1="3 - 4 ",$$4 S PSSDBV2=$E(PSSDBV9,7,$L(PSSDBV9)) I $$8 Q 4
"RTN","PSSDSBPB",42,0)
 S PSSDBV1=$E(PSSDBV9,1,7) I PSSDBV1="3 TO 4 ",$$4 S PSSDBV2=$E(PSSDBV9,8,$L(PSSDBV9)) I $$8 Q 4
"RTN","PSSDSBPB",43,0)
 S PSSDBV1=$E(PSSDBV9,1,7) I PSSDBV1="3 OR 4 ",$$4 S PSSDBV2=$E(PSSDBV9,8,$L(PSSDBV9)) I $$8 Q 4
"RTN","PSSDSBPB",44,0)
 S PSSDBV1=$E(PSSDBV9,1,14) I PSSDBV1="THREE TO FOUR ",$$4 S PSSDBV2=$E(PSSDBV9,15,$L(PSSDBV9)) I $$8 Q 4
"RTN","PSSDSBPB",45,0)
 S PSSDBV1=$E(PSSDBV9,1,14) I PSSDBV1="THREE OR FOUR ",$$4 S PSSDBV2=$E(PSSDBV9,15,$L(PSSDBV9)) I $$8 Q 4
"RTN","PSSDSBPB",46,0)
 S PSSDBV1=$E(PSSDBV9,1,11) I PSSDBV1="THREE-FOUR ",$$4 S PSSDBV2=$E(PSSDBV9,12,$L(PSSDBV9)) I $$8 Q 4
"RTN","PSSDSBPB",47,0)
 S PSSDBV1=$E(PSSDBV9,1,13) I PSSDBV1="THREE - FOUR ",$$4 S PSSDBV2=$E(PSSDBV9,14,$L(PSSDBV9)) I $$8 Q 4
"RTN","PSSDSBPB",48,0)
 ;
"RTN","PSSDSBPB",49,0)
 S PSSDBV1=$E(PSSDBV9,1,2) I PSSDBV1="4 ",$$4 S PSSDBV2=$E(PSSDBV9,3,$L(PSSDBV9)) I $$8 Q 4
"RTN","PSSDSBPB",50,0)
 S PSSDBV1=$E(PSSDBV9,1,5) I PSSDBV1="FOUR ",$$4 S PSSDBV2=$E(PSSDBV9,6,$L(PSSDBV9)) I $$8 Q 4
"RTN","PSSDSBPB",51,0)
 ;
"RTN","PSSDSBPB",52,0)
 S PSSDBV1=$E(PSSDBV9,1,10) I PSSDBV1="4 AND 1/4 ",$$4 S PSSDBV2=$E(PSSDBV9,11,$L(PSSDBV9)) I $$8 Q 4.25
"RTN","PSSDSBPB",53,0)
 S PSSDBV1=$E(PSSDBV9,1,20) I PSSDBV1="FOUR AND ONE FOURTH ",$$4 S PSSDBV2=$E(PSSDBV9,21,$L(PSSDBV9)) I $$8 Q 4.25
"RTN","PSSDSBPB",54,0)
 S PSSDBV1=$E(PSSDBV9,1,20) I PSSDBV1="FOUR AND ONE-FOURTH ",$$4 S PSSDBV2=$E(PSSDBV9,21,$L(PSSDBV9)) I $$8 Q 4.25
"RTN","PSSDSBPB",55,0)
 S PSSDBV1=$E(PSSDBV9,1,17) I PSSDBV1="4 AND ONE FOURTH ",$$4 S PSSDBV2=$E(PSSDBV9,18,$L(PSSDBV9)) I $$8 Q 4.25
"RTN","PSSDSBPB",56,0)
 S PSSDBV1=$E(PSSDBV9,1,17) I PSSDBV1="4 AND ONE-FOURTH ",$$4 S PSSDBV2=$E(PSSDBV9,18,$L(PSSDBV9)) I $$8 Q 4.25
"RTN","PSSDSBPB",57,0)
 S PSSDBV1=$E(PSSDBV9,1,13) I PSSDBV1="FOUR AND 1/4 ",$$4 S PSSDBV2=$E(PSSDBV9,14,$L(PSSDBV9)) I $$8 Q 4.25
"RTN","PSSDSBPB",58,0)
 ;
"RTN","PSSDSBPB",59,0)
 S PSSDBV1=$E(PSSDBV9,1,10) I PSSDBV1="4 AND 1/3 ",$$4 S PSSDBV2=$E(PSSDBV9,11,$L(PSSDBV9)) I $$8 Q 4.33
"RTN","PSSDSBPB",60,0)
 S PSSDBV1=$E(PSSDBV9,1,19) I PSSDBV1="FOUR AND ONE THIRD ",$$4 S PSSDBV2=$E(PSSDBV9,20,$L(PSSDBV9)) I $$8 Q 4.33
"RTN","PSSDSBPB",61,0)
 S PSSDBV1=$E(PSSDBV9,1,19) I PSSDBV1="FOUR AND ONE-THIRD ",$$4 S PSSDBV2=$E(PSSDBV9,20,$L(PSSDBV9)) I $$8 Q 4.33
"RTN","PSSDSBPB",62,0)
 S PSSDBV1=$E(PSSDBV9,1,16) I PSSDBV1="4 AND ONE THIRD ",$$4 S PSSDBV2=$E(PSSDBV9,17,$L(PSSDBV9)) I $$8 Q 4.33
"RTN","PSSDSBPB",63,0)
 S PSSDBV1=$E(PSSDBV9,1,16) I PSSDBV1="4 AND ONE-THIRD ",$$4 S PSSDBV2=$E(PSSDBV9,17,$L(PSSDBV9)) I $$8 Q 4.33
"RTN","PSSDSBPB",64,0)
 S PSSDBV1=$E(PSSDBV9,1,13) I PSSDBV1="FOUR AND 1/3 ",$$4 S PSSDBV2=$E(PSSDBV9,14,$L(PSSDBV9)) I $$8 Q 4.33
"RTN","PSSDSBPB",65,0)
 ;
"RTN","PSSDSBPB",66,0)
 S PSSDBV1=$E(PSSDBV9,1,10) I PSSDBV1="4 AND 1/2 ",$$4 S PSSDBV2=$E(PSSDBV9,11,$L(PSSDBV9)) I $$8 Q 4.5
"RTN","PSSDSBPB",67,0)
 S PSSDBV1=$E(PSSDBV9,1,18) I PSSDBV1="FOUR AND ONE HALF ",$$4 S PSSDBV2=$E(PSSDBV9,19,$L(PSSDBV9)) I $$8 Q 4.5
"RTN","PSSDSBPB",68,0)
 S PSSDBV1=$E(PSSDBV9,1,18) I PSSDBV1="FOUR AND ONE-HALF ",$$4 S PSSDBV2=$E(PSSDBV9,19,$L(PSSDBV9)) I $$8 Q 4.5
"RTN","PSSDSBPB",69,0)
 S PSSDBV1=$E(PSSDBV9,1,15) I PSSDBV1="4 AND ONE HALF ",$$4 S PSSDBV2=$E(PSSDBV9,16,$L(PSSDBV9)) I $$8 Q 4.5
"RTN","PSSDSBPB",70,0)
 S PSSDBV1=$E(PSSDBV9,1,15) I PSSDBV1="4 AND ONE-HALF ",$$4 S PSSDBV2=$E(PSSDBV9,16,$L(PSSDBV9)) I $$8 Q 4.5
"RTN","PSSDSBPB",71,0)
 S PSSDBV1=$E(PSSDBV9,1,13) I PSSDBV1="FOUR AND 1/2 ",$$4 S PSSDBV2=$E(PSSDBV9,14,$L(PSSDBV9)) I $$8 Q 4.5
"RTN","PSSDSBPB",72,0)
 ;
"RTN","PSSDSBPB",73,0)
 S PSSDBV1=$E(PSSDBV9,1,4) I PSSDBV1="4-5 ",$$4 S PSSDBV2=$E(PSSDBV9,5,$L(PSSDBV9)) I $$8 Q 5
"RTN","PSSDSBPB",74,0)
 S PSSDBV1=$E(PSSDBV9,1,6) I PSSDBV1="4 - 5 ",$$4 S PSSDBV2=$E(PSSDBV9,7,$L(PSSDBV9)) I $$8 Q 5
"RTN","PSSDSBPB",75,0)
 S PSSDBV1=$E(PSSDBV9,1,7) I PSSDBV1="4 TO 5 ",$$4 S PSSDBV2=$E(PSSDBV9,8,$L(PSSDBV9)) I $$8 Q 5
"RTN","PSSDSBPB",76,0)
 S PSSDBV1=$E(PSSDBV9,1,7) I PSSDBV1="4 OR 5 ",$$4 S PSSDBV2=$E(PSSDBV9,8,$L(PSSDBV9)) I $$8 Q 5
"RTN","PSSDSBPB",77,0)
 S PSSDBV1=$E(PSSDBV9,1,13) I PSSDBV1="FOUR TO FIVE ",$$4 S PSSDBV2=$E(PSSDBV9,14,$L(PSSDBV9)) I $$8 Q 5
"RTN","PSSDSBPB",78,0)
 S PSSDBV1=$E(PSSDBV9,1,13) I PSSDBV1="FOUR OR FIVE ",$$4 S PSSDBV2=$E(PSSDBV9,14,$L(PSSDBV9)) I $$8 Q 5
"RTN","PSSDSBPB",79,0)
 S PSSDBV1=$E(PSSDBV9,1,10) I PSSDBV1="FOUR-FIVE ",$$4 S PSSDBV2=$E(PSSDBV9,11,$L(PSSDBV9)) I $$8 Q 5
"RTN","PSSDSBPB",80,0)
 S PSSDBV1=$E(PSSDBV9,1,12) I PSSDBV1="FOUR - FIVE ",$$4 S PSSDBV2=$E(PSSDBV9,13,$L(PSSDBV9)) I $$8 Q 5
"RTN","PSSDSBPB",81,0)
 ;
"RTN","PSSDSBPB",82,0)
 S PSSDBV1=$E(PSSDBV9,1,2) I PSSDBV1="5 ",$$4 S PSSDBV2=$E(PSSDBV9,3,$L(PSSDBV9)) I $$8 Q 5
"RTN","PSSDSBPB",83,0)
 S PSSDBV1=$E(PSSDBV9,1,5) I PSSDBV1="FIVE ",$$4 S PSSDBV2=$E(PSSDBV9,6,$L(PSSDBV9)) I $$8 Q 5
"RTN","PSSDSBPB",84,0)
 ;
"RTN","PSSDSBPB",85,0)
 S PSSDBV1=$E(PSSDBV9,1,10) I PSSDBV1="5 AND 1/4 ",$$4 S PSSDBV2=$E(PSSDBV9,11,$L(PSSDBV9)) I $$8 Q 5.25
"RTN","PSSDSBPB",86,0)
 S PSSDBV1=$E(PSSDBV9,1,20) I PSSDBV1="FIVE AND ONE FOURTH ",$$4 S PSSDBV2=$E(PSSDBV9,21,$L(PSSDBV9)) I $$8 Q 5.25
"RTN","PSSDSBPB",87,0)
 S PSSDBV1=$E(PSSDBV9,1,20) I PSSDBV1="FIVE AND ONE-FOURTH ",$$4 S PSSDBV2=$E(PSSDBV9,21,$L(PSSDBV9)) I $$8 Q 5.25
"RTN","PSSDSBPB",88,0)
 S PSSDBV1=$E(PSSDBV9,1,17) I PSSDBV1="5 AND ONE FOURTH ",$$4 S PSSDBV2=$E(PSSDBV9,18,$L(PSSDBV9)) I $$8 Q 5.25
"RTN","PSSDSBPB",89,0)
 S PSSDBV1=$E(PSSDBV9,1,17) I PSSDBV1="5 AND ONE-FOURTH ",$$4 S PSSDBV2=$E(PSSDBV9,18,$L(PSSDBV9)) I $$8 Q 5.25
"RTN","PSSDSBPB",90,0)
 S PSSDBV1=$E(PSSDBV9,1,13) I PSSDBV1="FIVE AND 1/4 ",$$4 S PSSDBV2=$E(PSSDBV9,14,$L(PSSDBV9)) I $$8 Q 5.25
"RTN","PSSDSBPB",91,0)
 ;
"RTN","PSSDSBPB",92,0)
 S PSSDBV1=$E(PSSDBV9,1,10) I PSSDBV1="5 AND 1/3 ",$$4 S PSSDBV2=$E(PSSDBV9,11,$L(PSSDBV9)) I $$8 Q 5.33
"RTN","PSSDSBPB",93,0)
 S PSSDBV1=$E(PSSDBV9,1,19) I PSSDBV1="FIVE AND ONE THIRD ",$$4 S PSSDBV2=$E(PSSDBV9,20,$L(PSSDBV9)) I $$8 Q 5.33
"RTN","PSSDSBPB",94,0)
 S PSSDBV1=$E(PSSDBV9,1,19) I PSSDBV1="FIVE AND ONE-THIRD ",$$4 S PSSDBV2=$E(PSSDBV9,20,$L(PSSDBV9)) I $$8 Q 5.33
"RTN","PSSDSBPB",95,0)
 S PSSDBV1=$E(PSSDBV9,1,16) I PSSDBV1="5 AND ONE THIRD ",$$4 S PSSDBV2=$E(PSSDBV9,17,$L(PSSDBV9)) I $$8 Q 5.33
"RTN","PSSDSBPB",96,0)
 S PSSDBV1=$E(PSSDBV9,1,16) I PSSDBV1="5 AND ONE-THIRD ",$$4 S PSSDBV2=$E(PSSDBV9,17,$L(PSSDBV9)) I $$8 Q 5.33
"RTN","PSSDSBPB",97,0)
 S PSSDBV1=$E(PSSDBV9,1,13) I PSSDBV1="FIVE AND 1/3 ",$$4 S PSSDBV2=$E(PSSDBV9,14,$L(PSSDBV9)) I $$8 Q 5.33
"RTN","PSSDSBPB",98,0)
 ;
"RTN","PSSDSBPB",99,0)
 S PSSDBV1=$E(PSSDBV9,1,10) I PSSDBV1="5 AND 1/2 ",$$4 S PSSDBV2=$E(PSSDBV9,11,$L(PSSDBV9)) I $$8 Q 5.5
"RTN","PSSDSBPB",100,0)
 S PSSDBV1=$E(PSSDBV9,1,18) I PSSDBV1="FIVE AND ONE HALF ",$$4 S PSSDBV2=$E(PSSDBV9,19,$L(PSSDBV9)) I $$8 Q 5.5
"RTN","PSSDSBPB",101,0)
 S PSSDBV1=$E(PSSDBV9,1,18) I PSSDBV1="FIVE AND ONE-HALF ",$$4 S PSSDBV2=$E(PSSDBV9,19,$L(PSSDBV9)) I $$8 Q 5.5
"RTN","PSSDSBPB",102,0)
 S PSSDBV1=$E(PSSDBV9,1,15) I PSSDBV1="5 AND ONE HALF ",$$4 S PSSDBV2=$E(PSSDBV9,16,$L(PSSDBV9)) I $$8 Q 5.5
"RTN","PSSDSBPB",103,0)
 S PSSDBV1=$E(PSSDBV9,1,15) I PSSDBV1="5 AND ONE-HALF ",$$4 S PSSDBV2=$E(PSSDBV9,16,$L(PSSDBV9)) I $$8 Q 5.5
"RTN","PSSDSBPB",104,0)
 S PSSDBV1=$E(PSSDBV9,1,13) I PSSDBV1="FIVE AND 1/2 ",$$4 S PSSDBV2=$E(PSSDBV9,14,$L(PSSDBV9)) I $$8 Q 5.5
"RTN","PSSDSBPB",105,0)
 ;
"RTN","PSSDSBPB",106,0)
 ;
"RTN","PSSDSBPB",107,0)
 Q 0
"RTN","PSSDSBPB",108,0)
 ;
"RTN","PSSDSBPB",109,0)
8() ;Look for Unit - PSSDBIFL set in PSSSAPD, indicates if Order has a Dispense Drug, or just an Orderable Item
"RTN","PSSDSBPB",110,0)
 S PSSDBV3="" D
"RTN","PSSDSBPB",111,0)
 .I PSSDBIFL S PSSDBV3=$$UNITD^PSSDSAPI(PSSDBV2) Q
"RTN","PSSDSBPB",112,0)
 .S PSSDBV3=$$UNIT^PSSDSAPI(PSSDBV2)
"RTN","PSSDSBPB",113,0)
 Q $S(PSSDBV3="":0,1:1)
"RTN","PSSDSBPB",114,0)
 ;
"RTN","PSSDSBPB",115,0)
 ;
"RTN","PSSDSBPB",116,0)
4() ;Validate text follow the numeric part of the text
"RTN","PSSDSBPB",117,0)
 I $L(PSSDBV9)'>$L(PSSDBV1) Q 0
"RTN","PSSDSBPB",118,0)
 Q 1
"RTN","PSSDSBPC")
0^28^B32747800^n/a
"RTN","PSSDSBPC",1,0)
PSSDSBPC ;BIR/MJE-Determine numeric dose multiplier for dose call, continued ;10/14/10
"RTN","PSSDSBPC",2,0)
 ;;1.0;PHARMACY DATA MANAGEMENT;**117**;9/30/97;Build 101
"RTN","PSSDSBPC",3,0)
 ;
"RTN","PSSDSBPC",4,0)
NUMC() ;Continuation of Free Text Dosage conversion from routine PSSDSAPL
"RTN","PSSDSBPC",5,0)
 ;
"RTN","PSSDSBPC",6,0)
 S PSSDBV1=$E(PSSDBV9,1,4) I PSSDBV1="5-6 ",$$4 S PSSDBV2=$E(PSSDBV9,5,$L(PSSDBV9)) I $$8 Q 6
"RTN","PSSDSBPC",7,0)
 S PSSDBV1=$E(PSSDBV9,1,6) I PSSDBV1="5 - 6 ",$$4 S PSSDBV2=$E(PSSDBV9,7,$L(PSSDBV9)) I $$8 Q 6
"RTN","PSSDSBPC",8,0)
 S PSSDBV1=$E(PSSDBV9,1,7) I PSSDBV1="5 TO 6 ",$$4 S PSSDBV2=$E(PSSDBV9,8,$L(PSSDBV9)) I $$8 Q 6
"RTN","PSSDSBPC",9,0)
 S PSSDBV1=$E(PSSDBV9,1,7) I PSSDBV1="5 OR 6 ",$$4 S PSSDBV2=$E(PSSDBV9,8,$L(PSSDBV9)) I $$8 Q 6
"RTN","PSSDSBPC",10,0)
 S PSSDBV1=$E(PSSDBV9,1,12) I PSSDBV1="FIVE TO SIX ",$$4 S PSSDBV2=$E(PSSDBV9,13,$L(PSSDBV9)) I $$8 Q 6
"RTN","PSSDSBPC",11,0)
 S PSSDBV1=$E(PSSDBV9,1,12) I PSSDBV1="FIVE OR SIX ",$$4 S PSSDBV2=$E(PSSDBV9,13,$L(PSSDBV9)) I $$8 Q 6
"RTN","PSSDSBPC",12,0)
 S PSSDBV1=$E(PSSDBV9,1,9) I PSSDBV1="FIVE-SIX ",$$4 S PSSDBV2=$E(PSSDBV9,10,$L(PSSDBV9)) I $$8 Q 6
"RTN","PSSDSBPC",13,0)
 S PSSDBV1=$E(PSSDBV9,1,11) I PSSDBV1="FIVE - SIX ",$$4 S PSSDBV2=$E(PSSDBV9,12,$L(PSSDBV9)) I $$8 Q 6
"RTN","PSSDSBPC",14,0)
 ;
"RTN","PSSDSBPC",15,0)
 S PSSDBV1=$E(PSSDBV9,1,2) I PSSDBV1="6 ",$$4 S PSSDBV2=$E(PSSDBV9,3,$L(PSSDBV9)) I $$8 Q 6
"RTN","PSSDSBPC",16,0)
 S PSSDBV1=$E(PSSDBV9,1,4) I PSSDBV1="SIX ",$$4 S PSSDBV2=$E(PSSDBV9,5,$L(PSSDBV9)) I $$8 Q 6
"RTN","PSSDSBPC",17,0)
 ;
"RTN","PSSDSBPC",18,0)
 S PSSDBV1=$E(PSSDBV9,1,10) I PSSDBV1="6 AND 1/4 ",$$4 S PSSDBV2=$E(PSSDBV9,11,$L(PSSDBV9)) I $$8 Q 6.25
"RTN","PSSDSBPC",19,0)
 S PSSDBV1=$E(PSSDBV9,1,19) I PSSDBV1="SIX AND ONE FOURTH ",$$4 S PSSDBV2=$E(PSSDBV9,20,$L(PSSDBV9)) I $$8 Q 6.25
"RTN","PSSDSBPC",20,0)
 S PSSDBV1=$E(PSSDBV9,1,19) I PSSDBV1="SIX AND ONE-FOURTH ",$$4 S PSSDBV2=$E(PSSDBV9,20,$L(PSSDBV9)) I $$8 Q 6.25
"RTN","PSSDSBPC",21,0)
 S PSSDBV1=$E(PSSDBV9,1,17) I PSSDBV1="6 AND ONE FOURTH ",$$4 S PSSDBV2=$E(PSSDBV9,18,$L(PSSDBV9)) I $$8 Q 6.25
"RTN","PSSDSBPC",22,0)
 S PSSDBV1=$E(PSSDBV9,1,17) I PSSDBV1="6 AND ONE-FOURTH ",$$4 S PSSDBV2=$E(PSSDBV9,18,$L(PSSDBV9)) I $$8 Q 6.25
"RTN","PSSDSBPC",23,0)
 S PSSDBV1=$E(PSSDBV9,1,12) I PSSDBV1="SIX AND 1/4 ",$$4 S PSSDBV2=$E(PSSDBV9,13,$L(PSSDBV9)) I $$8 Q 6.25
"RTN","PSSDSBPC",24,0)
 ;
"RTN","PSSDSBPC",25,0)
 S PSSDBV1=$E(PSSDBV9,1,10) I PSSDBV1="6 AND 1/3 ",$$4 S PSSDBV2=$E(PSSDBV9,11,$L(PSSDBV9)) I $$8 Q 6.33
"RTN","PSSDSBPC",26,0)
 S PSSDBV1=$E(PSSDBV9,1,18) I PSSDBV1="SIX AND ONE THIRD ",$$4 S PSSDBV2=$E(PSSDBV9,19,$L(PSSDBV9)) I $$8 Q 6.33
"RTN","PSSDSBPC",27,0)
 S PSSDBV1=$E(PSSDBV9,1,18) I PSSDBV1="SIX AND ONE-THIRD ",$$4 S PSSDBV2=$E(PSSDBV9,19,$L(PSSDBV9)) I $$8 Q 6.33
"RTN","PSSDSBPC",28,0)
 S PSSDBV1=$E(PSSDBV9,1,16) I PSSDBV1="6 AND ONE THIRD ",$$4 S PSSDBV2=$E(PSSDBV9,17,$L(PSSDBV9)) I $$8 Q 6.33
"RTN","PSSDSBPC",29,0)
 S PSSDBV1=$E(PSSDBV9,1,16) I PSSDBV1="6 AND ONE-THIRD ",$$4 S PSSDBV2=$E(PSSDBV9,17,$L(PSSDBV9)) I $$8 Q 6.33
"RTN","PSSDSBPC",30,0)
 S PSSDBV1=$E(PSSDBV9,1,12) I PSSDBV1="SIX AND 1/3 ",$$4 S PSSDBV2=$E(PSSDBV9,13,$L(PSSDBV9)) I $$8 Q 6.33
"RTN","PSSDSBPC",31,0)
 ;
"RTN","PSSDSBPC",32,0)
 S PSSDBV1=$E(PSSDBV9,1,10) I PSSDBV1="6 AND 1/2 ",$$4 S PSSDBV2=$E(PSSDBV9,11,$L(PSSDBV9)) I $$8 Q 6.5
"RTN","PSSDSBPC",33,0)
 S PSSDBV1=$E(PSSDBV9,1,17) I PSSDBV1="SIX AND ONE HALF ",$$4 S PSSDBV2=$E(PSSDBV9,18,$L(PSSDBV9)) I $$8 Q 6.5
"RTN","PSSDSBPC",34,0)
 S PSSDBV1=$E(PSSDBV9,1,17) I PSSDBV1="SIX AND ONE-HALF ",$$4 S PSSDBV2=$E(PSSDBV9,18,$L(PSSDBV9)) I $$8 Q 6.5
"RTN","PSSDSBPC",35,0)
 S PSSDBV1=$E(PSSDBV9,1,15) I PSSDBV1="6 AND ONE HALF ",$$4 S PSSDBV2=$E(PSSDBV9,16,$L(PSSDBV9)) I $$8 Q 6.5
"RTN","PSSDSBPC",36,0)
 S PSSDBV1=$E(PSSDBV9,1,15) I PSSDBV1="6 AND ONE-HALF ",$$4 S PSSDBV2=$E(PSSDBV9,16,$L(PSSDBV9)) I $$8 Q 6.5
"RTN","PSSDSBPC",37,0)
 S PSSDBV1=$E(PSSDBV9,1,12) I PSSDBV1="SIX AND 1/2 ",$$4 S PSSDBV2=$E(PSSDBV9,13,$L(PSSDBV9)) I $$8 Q 6.5
"RTN","PSSDSBPC",38,0)
 ;
"RTN","PSSDSBPC",39,0)
 S PSSDBV1=$E(PSSDBV9,1,4) I PSSDBV1="6-7 ",$$4 S PSSDBV2=$E(PSSDBV9,5,$L(PSSDBV9)) I $$8 Q 7
"RTN","PSSDSBPC",40,0)
 S PSSDBV1=$E(PSSDBV9,1,6) I PSSDBV1="6 - 7 ",$$4 S PSSDBV2=$E(PSSDBV9,7,$L(PSSDBV9)) I $$8 Q 7
"RTN","PSSDSBPC",41,0)
 S PSSDBV1=$E(PSSDBV9,1,7) I PSSDBV1="6 TO 7 ",$$4 S PSSDBV2=$E(PSSDBV9,8,$L(PSSDBV9)) I $$8 Q 7
"RTN","PSSDSBPC",42,0)
 S PSSDBV1=$E(PSSDBV9,1,7) I PSSDBV1="6 OR 7 ",$$4 S PSSDBV2=$E(PSSDBV9,8,$L(PSSDBV9)) I $$8 Q 7
"RTN","PSSDSBPC",43,0)
 S PSSDBV1=$E(PSSDBV9,1,13) I PSSDBV1="SIX TO SEVEN ",$$4 S PSSDBV2=$E(PSSDBV9,14,$L(PSSDBV9)) I $$8 Q 7
"RTN","PSSDSBPC",44,0)
 S PSSDBV1=$E(PSSDBV9,1,13) I PSSDBV1="SIX OR SEVEN ",$$4 S PSSDBV2=$E(PSSDBV9,14,$L(PSSDBV9)) I $$8 Q 7
"RTN","PSSDSBPC",45,0)
 S PSSDBV1=$E(PSSDBV9,1,10) I PSSDBV1="SIX-SEVEN ",$$4 S PSSDBV2=$E(PSSDBV9,11,$L(PSSDBV9)) I $$8 Q 7
"RTN","PSSDSBPC",46,0)
 S PSSDBV1=$E(PSSDBV9,1,12) I PSSDBV1="SIX - SEVEN ",$$4 S PSSDBV2=$E(PSSDBV9,13,$L(PSSDBV9)) I $$8 Q 7
"RTN","PSSDSBPC",47,0)
 ;
"RTN","PSSDSBPC",48,0)
 S PSSDBV1=$E(PSSDBV9,1,2) I PSSDBV1="7 ",$$4 S PSSDBV2=$E(PSSDBV9,3,$L(PSSDBV9)) I $$8 Q 7
"RTN","PSSDSBPC",49,0)
 S PSSDBV1=$E(PSSDBV9,1,6) I PSSDBV1="SEVEN ",$$4 S PSSDBV2=$E(PSSDBV9,7,$L(PSSDBV9)) I $$8 Q 7
"RTN","PSSDSBPC",50,0)
 ;
"RTN","PSSDSBPC",51,0)
 S PSSDBV1=$E(PSSDBV9,1,10) I PSSDBV1="7 AND 1/4 ",$$4 S PSSDBV2=$E(PSSDBV9,11,$L(PSSDBV9)) I $$8 Q 7.25
"RTN","PSSDSBPC",52,0)
 S PSSDBV1=$E(PSSDBV9,1,21) I PSSDBV1="SEVEN AND ONE FOURTH ",$$4 S PSSDBV2=$E(PSSDBV9,22,$L(PSSDBV9)) I $$8 Q 7.25
"RTN","PSSDSBPC",53,0)
 S PSSDBV1=$E(PSSDBV9,1,21) I PSSDBV1="SEVEN AND ONE-FOURTH ",$$4 S PSSDBV2=$E(PSSDBV9,22,$L(PSSDBV9)) I $$8 Q 7.25
"RTN","PSSDSBPC",54,0)
 S PSSDBV1=$E(PSSDBV9,1,17) I PSSDBV1="7 AND ONE FOURTH ",$$4 S PSSDBV2=$E(PSSDBV9,18,$L(PSSDBV9)) I $$8 Q 7.25
"RTN","PSSDSBPC",55,0)
 S PSSDBV1=$E(PSSDBV9,1,17) I PSSDBV1="7 AND ONE-FOURTH ",$$4 S PSSDBV2=$E(PSSDBV9,18,$L(PSSDBV9)) I $$8 Q 7.25
"RTN","PSSDSBPC",56,0)
 S PSSDBV1=$E(PSSDBV9,1,14) I PSSDBV1="SEVEN AND 1/4 ",$$4 S PSSDBV2=$E(PSSDBV9,15,$L(PSSDBV9)) I $$8 Q 7.25
"RTN","PSSDSBPC",57,0)
 ;
"RTN","PSSDSBPC",58,0)
 S PSSDBV1=$E(PSSDBV9,1,10) I PSSDBV1="7 AND 1/3 ",$$4 S PSSDBV2=$E(PSSDBV9,11,$L(PSSDBV9)) I $$8 Q 7.33
"RTN","PSSDSBPC",59,0)
 S PSSDBV1=$E(PSSDBV9,1,20) I PSSDBV1="SEVEN AND ONE THIRD ",$$4 S PSSDBV2=$E(PSSDBV9,21,$L(PSSDBV9)) I $$8 Q 7.33
"RTN","PSSDSBPC",60,0)
 S PSSDBV1=$E(PSSDBV9,1,20) I PSSDBV1="SEVEN AND ONE-THIRD ",$$4 S PSSDBV2=$E(PSSDBV9,21,$L(PSSDBV9)) I $$8 Q 7.33
"RTN","PSSDSBPC",61,0)
 S PSSDBV1=$E(PSSDBV9,1,16) I PSSDBV1="7 AND ONE THIRD ",$$4 S PSSDBV2=$E(PSSDBV9,17,$L(PSSDBV9)) I $$8 Q 7.33
"RTN","PSSDSBPC",62,0)
 S PSSDBV1=$E(PSSDBV9,1,16) I PSSDBV1="7 AND ONE-THIRD ",$$4 S PSSDBV2=$E(PSSDBV9,17,$L(PSSDBV9)) I $$8 Q 7.33
"RTN","PSSDSBPC",63,0)
 S PSSDBV1=$E(PSSDBV9,1,14) I PSSDBV1="SEVEN AND 1/3 ",$$4 S PSSDBV2=$E(PSSDBV9,15,$L(PSSDBV9)) I $$8 Q 7.33
"RTN","PSSDSBPC",64,0)
 ;
"RTN","PSSDSBPC",65,0)
 S PSSDBV1=$E(PSSDBV9,1,10) I PSSDBV1="7 AND 1/2 ",$$4 S PSSDBV2=$E(PSSDBV9,11,$L(PSSDBV9)) I $$8 Q 7.5
"RTN","PSSDSBPC",66,0)
 S PSSDBV1=$E(PSSDBV9,1,19) I PSSDBV1="SEVEN AND ONE HALF ",$$4 S PSSDBV2=$E(PSSDBV9,20,$L(PSSDBV9)) I $$8 Q 7.5
"RTN","PSSDSBPC",67,0)
 S PSSDBV1=$E(PSSDBV9,1,19) I PSSDBV1="SEVEN AND ONE-HALF ",$$4 S PSSDBV2=$E(PSSDBV9,20,$L(PSSDBV9)) I $$8 Q 7.5
"RTN","PSSDSBPC",68,0)
 S PSSDBV1=$E(PSSDBV9,1,15) I PSSDBV1="7 AND ONE HALF ",$$4 S PSSDBV2=$E(PSSDBV9,16,$L(PSSDBV9)) I $$8 Q 7.5
"RTN","PSSDSBPC",69,0)
 S PSSDBV1=$E(PSSDBV9,1,15) I PSSDBV1="7 AND ONE-HALF ",$$4 S PSSDBV2=$E(PSSDBV9,16,$L(PSSDBV9)) I $$8 Q 7.5
"RTN","PSSDSBPC",70,0)
 S PSSDBV1=$E(PSSDBV9,1,14) I PSSDBV1="SEVEN AND 1/2 ",$$4 S PSSDBV2=$E(PSSDBV9,15,$L(PSSDBV9)) I $$8 Q 7.5
"RTN","PSSDSBPC",71,0)
 ;
"RTN","PSSDSBPC",72,0)
 Q 0
"RTN","PSSDSBPC",73,0)
 ;
"RTN","PSSDSBPC",74,0)
8() ;Look for Unit - PSSDBIFL set in PSSSAPD, indicates if Order has a Dispense Drug, or just an Orderable Item
"RTN","PSSDSBPC",75,0)
 S PSSDBV3="" D
"RTN","PSSDSBPC",76,0)
 .I PSSDBIFL S PSSDBV3=$$UNITD^PSSDSAPI(PSSDBV2) Q
"RTN","PSSDSBPC",77,0)
 .S PSSDBV3=$$UNIT^PSSDSAPI(PSSDBV2)
"RTN","PSSDSBPC",78,0)
 Q $S(PSSDBV3="":0,1:1)
"RTN","PSSDSBPC",79,0)
 ;
"RTN","PSSDSBPC",80,0)
4() ;Validate text follow the numeric part of the text
"RTN","PSSDSBPC",81,0)
 I $L(PSSDBV9)'>$L(PSSDBV1) Q 0
"RTN","PSSDSBPC",82,0)
 Q 1
"RTN","PSSDSBPD")
0^29^B58003875^n/a
"RTN","PSSDSBPD",1,0)
PSSDSBPD ;BIR/MJE-Determine numeric dose multiplier for dose call, continued ;10/14/10
"RTN","PSSDSBPD",2,0)
 ;;1.0;PHARMACY DATA MANAGEMENT;**117**;9/30/97;Build 101
"RTN","PSSDSBPD",3,0)
 ;
"RTN","PSSDSBPD",4,0)
NUMC() ;Continuation of Free Text Dosage conversion from routine PSSDSAPL
"RTN","PSSDSBPD",5,0)
 ;
"RTN","PSSDSBPD",6,0)
 S PSSDBV1=$E(PSSDBV9,1,4) I PSSDBV1="7-8 ",$$4 S PSSDBV2=$E(PSSDBV9,5,$L(PSSDBV9)) I $$8 Q 8
"RTN","PSSDSBPD",7,0)
 S PSSDBV1=$E(PSSDBV9,1,6) I PSSDBV1="7 - 8 ",$$4 S PSSDBV2=$E(PSSDBV9,7,$L(PSSDBV9)) I $$8 Q 8
"RTN","PSSDSBPD",8,0)
 S PSSDBV1=$E(PSSDBV9,1,7) I PSSDBV1="7 TO 8 ",$$4 S PSSDBV2=$E(PSSDBV9,8,$L(PSSDBV9)) I $$8 Q 8
"RTN","PSSDSBPD",9,0)
 S PSSDBV1=$E(PSSDBV9,1,7) I PSSDBV1="7 OR 8 ",$$4 S PSSDBV2=$E(PSSDBV9,8,$L(PSSDBV9)) I $$8 Q 8
"RTN","PSSDSBPD",10,0)
 S PSSDBV1=$E(PSSDBV9,1,15) I PSSDBV1="SEVEN TO EIGHT ",$$4 S PSSDBV2=$E(PSSDBV9,16,$L(PSSDBV9)) I $$8 Q 8
"RTN","PSSDSBPD",11,0)
 S PSSDBV1=$E(PSSDBV9,1,15) I PSSDBV1="SEVEN OR EIGHT ",$$4 S PSSDBV2=$E(PSSDBV9,16,$L(PSSDBV9)) I $$8 Q 8
"RTN","PSSDSBPD",12,0)
 S PSSDBV1=$E(PSSDBV9,1,12) I PSSDBV1="SEVEN-EIGHT ",$$4 S PSSDBV2=$E(PSSDBV9,13,$L(PSSDBV9)) I $$8 Q 8
"RTN","PSSDSBPD",13,0)
 S PSSDBV1=$E(PSSDBV9,1,14) I PSSDBV1="SEVEN - EIGHT ",$$4 S PSSDBV2=$E(PSSDBV9,15,$L(PSSDBV9)) I $$8 Q 8
"RTN","PSSDSBPD",14,0)
 ;
"RTN","PSSDSBPD",15,0)
 S PSSDBV1=$E(PSSDBV9,1,2) I PSSDBV1="8 ",$$4 S PSSDBV2=$E(PSSDBV9,3,$L(PSSDBV9)) I $$8 Q 8
"RTN","PSSDSBPD",16,0)
 S PSSDBV1=$E(PSSDBV9,1,6) I PSSDBV1="EIGHT ",$$4 S PSSDBV2=$E(PSSDBV9,7,$L(PSSDBV9)) I $$8 Q 8
"RTN","PSSDSBPD",17,0)
 ;
"RTN","PSSDSBPD",18,0)
 S PSSDBV1=$E(PSSDBV9,1,10) I PSSDBV1="8 AND 1/4 ",$$4 S PSSDBV2=$E(PSSDBV9,11,$L(PSSDBV9)) I $$8 Q 8.25
"RTN","PSSDSBPD",19,0)
 S PSSDBV1=$E(PSSDBV9,1,21) I PSSDBV1="EIGHT AND ONE FOURTH ",$$4 S PSSDBV2=$E(PSSDBV9,22,$L(PSSDBV9)) I $$8 Q 8.25
"RTN","PSSDSBPD",20,0)
 S PSSDBV1=$E(PSSDBV9,1,21) I PSSDBV1="EIGHT AND ONE-FOURTH ",$$4 S PSSDBV2=$E(PSSDBV9,22,$L(PSSDBV9)) I $$8 Q 8.25
"RTN","PSSDSBPD",21,0)
 S PSSDBV1=$E(PSSDBV9,1,17) I PSSDBV1="8 AND ONE FOURTH ",$$4 S PSSDBV2=$E(PSSDBV9,18,$L(PSSDBV9)) I $$8 Q 8.25
"RTN","PSSDSBPD",22,0)
 S PSSDBV1=$E(PSSDBV9,1,17) I PSSDBV1="8 AND ONE-FOURTH ",$$4 S PSSDBV2=$E(PSSDBV9,18,$L(PSSDBV9)) I $$8 Q 8.25
"RTN","PSSDSBPD",23,0)
 S PSSDBV1=$E(PSSDBV9,1,14) I PSSDBV1="EIGHT AND 1/4 ",$$4 S PSSDBV2=$E(PSSDBV9,15,$L(PSSDBV9)) I $$8 Q 8.25
"RTN","PSSDSBPD",24,0)
 ;
"RTN","PSSDSBPD",25,0)
 S PSSDBV1=$E(PSSDBV9,1,10) I PSSDBV1="8 AND 1/3 ",$$4 S PSSDBV2=$E(PSSDBV9,11,$L(PSSDBV9)) I $$8 Q 8.33
"RTN","PSSDSBPD",26,0)
 S PSSDBV1=$E(PSSDBV9,1,20) I PSSDBV1="EIGHT AND ONE THIRD ",$$4 S PSSDBV2=$E(PSSDBV9,21,$L(PSSDBV9)) I $$8 Q 8.33
"RTN","PSSDSBPD",27,0)
 S PSSDBV1=$E(PSSDBV9,1,20) I PSSDBV1="EIGHT AND ONE-THIRD ",$$4 S PSSDBV2=$E(PSSDBV9,21,$L(PSSDBV9)) I $$8 Q 8.33
"RTN","PSSDSBPD",28,0)
 S PSSDBV1=$E(PSSDBV9,1,16) I PSSDBV1="8 AND ONE THIRD ",$$4 S PSSDBV2=$E(PSSDBV9,17,$L(PSSDBV9)) I $$8 Q 8.33
"RTN","PSSDSBPD",29,0)
 S PSSDBV1=$E(PSSDBV9,1,16) I PSSDBV1="8 AND ONE-THIRD ",$$4 S PSSDBV2=$E(PSSDBV9,17,$L(PSSDBV9)) I $$8 Q 8.33
"RTN","PSSDSBPD",30,0)
 S PSSDBV1=$E(PSSDBV9,1,14) I PSSDBV1="EIGHT AND 1/3 ",$$4 S PSSDBV2=$E(PSSDBV9,15,$L(PSSDBV9)) I $$8 Q 8.33
"RTN","PSSDSBPD",31,0)
 ;
"RTN","PSSDSBPD",32,0)
 S PSSDBV1=$E(PSSDBV9,1,10) I PSSDBV1="8 AND 1/2 ",$$4 S PSSDBV2=$E(PSSDBV9,11,$L(PSSDBV9)) I $$8 Q 8.5
"RTN","PSSDSBPD",33,0)
 S PSSDBV1=$E(PSSDBV9,1,19) I PSSDBV1="EIGHT AND ONE HALF ",$$4 S PSSDBV2=$E(PSSDBV9,20,$L(PSSDBV9)) I $$8 Q 8.5
"RTN","PSSDSBPD",34,0)
 S PSSDBV1=$E(PSSDBV9,1,19) I PSSDBV1="EIGHT AND ONE-HALF ",$$4 S PSSDBV2=$E(PSSDBV9,20,$L(PSSDBV9)) I $$8 Q 8.5
"RTN","PSSDSBPD",35,0)
 S PSSDBV1=$E(PSSDBV9,1,15) I PSSDBV1="8 AND ONE HALF ",$$4 S PSSDBV2=$E(PSSDBV9,16,$L(PSSDBV9)) I $$8 Q 8.5
"RTN","PSSDSBPD",36,0)
 S PSSDBV1=$E(PSSDBV9,1,15) I PSSDBV1="8 AND ONE-HALF ",$$4 S PSSDBV2=$E(PSSDBV9,16,$L(PSSDBV9)) I $$8 Q 8.5
"RTN","PSSDSBPD",37,0)
 S PSSDBV1=$E(PSSDBV9,1,14) I PSSDBV1="EIGHT AND 1/2 ",$$4 S PSSDBV2=$E(PSSDBV9,15,$L(PSSDBV9)) I $$8 Q 8.5
"RTN","PSSDSBPD",38,0)
 ;
"RTN","PSSDSBPD",39,0)
 S PSSDBV1=$E(PSSDBV9,1,4) I PSSDBV1="8-9 ",$$4 S PSSDBV2=$E(PSSDBV9,5,$L(PSSDBV9)) I $$8 Q 9
"RTN","PSSDSBPD",40,0)
 S PSSDBV1=$E(PSSDBV9,1,6) I PSSDBV1="8 - 9 ",$$4 S PSSDBV2=$E(PSSDBV9,7,$L(PSSDBV9)) I $$8 Q 9
"RTN","PSSDSBPD",41,0)
 S PSSDBV1=$E(PSSDBV9,1,7) I PSSDBV1="8 TO 9 ",$$4 S PSSDBV2=$E(PSSDBV9,8,$L(PSSDBV9)) I $$8 Q 9
"RTN","PSSDSBPD",42,0)
 S PSSDBV1=$E(PSSDBV9,1,7) I PSSDBV1="8 OR 9 ",$$4 S PSSDBV2=$E(PSSDBV9,8,$L(PSSDBV9)) I $$8 Q 9
"RTN","PSSDSBPD",43,0)
 S PSSDBV1=$E(PSSDBV9,1,14) I PSSDBV1="EIGHT TO NINE ",$$4 S PSSDBV2=$E(PSSDBV9,15,$L(PSSDBV9)) I $$8 Q 9
"RTN","PSSDSBPD",44,0)
 S PSSDBV1=$E(PSSDBV9,1,14) I PSSDBV1="EIGHT OR NINE ",$$4 S PSSDBV2=$E(PSSDBV9,15,$L(PSSDBV9)) I $$8 Q 9
"RTN","PSSDSBPD",45,0)
 S PSSDBV1=$E(PSSDBV9,1,11) I PSSDBV1="EIGHT-NINE ",$$4 S PSSDBV2=$E(PSSDBV9,12,$L(PSSDBV9)) I $$8 Q 9
"RTN","PSSDSBPD",46,0)
 S PSSDBV1=$E(PSSDBV9,1,13) I PSSDBV1="EIGHT - NINE ",$$4 S PSSDBV2=$E(PSSDBV9,14,$L(PSSDBV9)) I $$8 Q 9
"RTN","PSSDSBPD",47,0)
 ;
"RTN","PSSDSBPD",48,0)
 S PSSDBV1=$E(PSSDBV9,1,2) I PSSDBV1="9 ",$$4 S PSSDBV2=$E(PSSDBV9,3,$L(PSSDBV9)) I $$8 Q 9
"RTN","PSSDSBPD",49,0)
 S PSSDBV1=$E(PSSDBV9,1,5) I PSSDBV1="NINE ",$$4 S PSSDBV2=$E(PSSDBV9,6,$L(PSSDBV9)) I $$8 Q 9
"RTN","PSSDSBPD",50,0)
 ;
"RTN","PSSDSBPD",51,0)
 S PSSDBV1=$E(PSSDBV9,1,10) I PSSDBV1="9 AND 1/4 ",$$4 S PSSDBV2=$E(PSSDBV9,11,$L(PSSDBV9)) I $$8 Q 9.25
"RTN","PSSDSBPD",52,0)
 S PSSDBV1=$E(PSSDBV9,1,20) I PSSDBV1="NINE AND ONE FOURTH ",$$4 S PSSDBV2=$E(PSSDBV9,21,$L(PSSDBV9)) I $$8 Q 9.25
"RTN","PSSDSBPD",53,0)
 S PSSDBV1=$E(PSSDBV9,1,20) I PSSDBV1="NINE AND ONE-FOURTH ",$$4 S PSSDBV2=$E(PSSDBV9,21,$L(PSSDBV9)) I $$8 Q 9.25
"RTN","PSSDSBPD",54,0)
 S PSSDBV1=$E(PSSDBV9,1,17) I PSSDBV1="9 AND ONE FOURTH ",$$4 S PSSDBV2=$E(PSSDBV9,18,$L(PSSDBV9)) I $$8 Q 9.25
"RTN","PSSDSBPD",55,0)
 S PSSDBV1=$E(PSSDBV9,1,17) I PSSDBV1="9 AND ONE-FOURTH ",$$4 S PSSDBV2=$E(PSSDBV9,18,$L(PSSDBV9)) I $$8 Q 9.25
"RTN","PSSDSBPD",56,0)
 S PSSDBV1=$E(PSSDBV9,1,13) I PSSDBV1="NINE AND 1/4 ",$$4 S PSSDBV2=$E(PSSDBV9,14,$L(PSSDBV9)) I $$8 Q 9.25
"RTN","PSSDSBPD",57,0)
 ;
"RTN","PSSDSBPD",58,0)
 S PSSDBV1=$E(PSSDBV9,1,10) I PSSDBV1="9 AND 1/3 ",$$4 S PSSDBV2=$E(PSSDBV9,11,$L(PSSDBV9)) I $$8 Q 9.33
"RTN","PSSDSBPD",59,0)
 S PSSDBV1=$E(PSSDBV9,1,19) I PSSDBV1="NINE AND ONE THIRD ",$$4 S PSSDBV2=$E(PSSDBV9,20,$L(PSSDBV9)) I $$8 Q 9.33
"RTN","PSSDSBPD",60,0)
 S PSSDBV1=$E(PSSDBV9,1,19) I PSSDBV1="NINE AND ONE-THIRD ",$$4 S PSSDBV2=$E(PSSDBV9,20,$L(PSSDBV9)) I $$8 Q 9.33
"RTN","PSSDSBPD",61,0)
 S PSSDBV1=$E(PSSDBV9,1,16) I PSSDBV1="9 AND ONE THIRD ",$$4 S PSSDBV2=$E(PSSDBV9,17,$L(PSSDBV9)) I $$8 Q 9.33
"RTN","PSSDSBPD",62,0)
 S PSSDBV1=$E(PSSDBV9,1,16) I PSSDBV1="9 AND ONE-THIRD ",$$4 S PSSDBV2=$E(PSSDBV9,17,$L(PSSDBV9)) I $$8 Q 9.33
"RTN","PSSDSBPD",63,0)
 S PSSDBV1=$E(PSSDBV9,1,13) I PSSDBV1="NINE AND 1/3 ",$$4 S PSSDBV2=$E(PSSDBV9,14,$L(PSSDBV9)) I $$8 Q 9.33
"RTN","PSSDSBPD",64,0)
 ;
"RTN","PSSDSBPD",65,0)
 S PSSDBV1=$E(PSSDBV9,1,10) I PSSDBV1="9 AND 1/2 ",$$4 S PSSDBV2=$E(PSSDBV9,11,$L(PSSDBV9)) I $$8 Q 9.5
"RTN","PSSDSBPD",66,0)
 S PSSDBV1=$E(PSSDBV9,1,18) I PSSDBV1="NINE AND ONE HALF ",$$4 S PSSDBV2=$E(PSSDBV9,19,$L(PSSDBV9)) I $$8 Q 9.5
"RTN","PSSDSBPD",67,0)
 S PSSDBV1=$E(PSSDBV9,1,18) I PSSDBV1="NINE AND ONE-HALF ",$$4 S PSSDBV2=$E(PSSDBV9,19,$L(PSSDBV9)) I $$8 Q 9.5
"RTN","PSSDSBPD",68,0)
 S PSSDBV1=$E(PSSDBV9,1,15) I PSSDBV1="9 AND ONE HALF ",$$4 S PSSDBV2=$E(PSSDBV9,16,$L(PSSDBV9)) I $$8 Q 9.5
"RTN","PSSDSBPD",69,0)
 S PSSDBV1=$E(PSSDBV9,1,15) I PSSDBV1="9 AND ONE-HALF ",$$4 S PSSDBV2=$E(PSSDBV9,16,$L(PSSDBV9)) I $$8 Q 9.5
"RTN","PSSDSBPD",70,0)
 S PSSDBV1=$E(PSSDBV9,1,13) I PSSDBV1="NINE AND 1/2 ",$$4 S PSSDBV2=$E(PSSDBV9,14,$L(PSSDBV9)) I $$8 Q 9.5
"RTN","PSSDSBPD",71,0)
 ;
"RTN","PSSDSBPD",72,0)
 S PSSDBV1=$E(PSSDBV9,1,5) I PSSDBV1="9-10 ",$$4 S PSSDBV2=$E(PSSDBV9,6,$L(PSSDBV9)) I $$8 Q 10
"RTN","PSSDSBPD",73,0)
 S PSSDBV1=$E(PSSDBV9,1,7) I PSSDBV1="9 - 10 ",$$4 S PSSDBV2=$E(PSSDBV9,8,$L(PSSDBV9)) I $$8 Q 10
"RTN","PSSDSBPD",74,0)
 S PSSDBV1=$E(PSSDBV9,1,8) I PSSDBV1="9 TO 10 ",$$4 S PSSDBV2=$E(PSSDBV9,9,$L(PSSDBV9)) I $$8 Q 10
"RTN","PSSDSBPD",75,0)
 S PSSDBV1=$E(PSSDBV9,1,8) I PSSDBV1="9 OR 10 ",$$4 S PSSDBV2=$E(PSSDBV9,9,$L(PSSDBV9)) I $$8 Q 10
"RTN","PSSDSBPD",76,0)
 S PSSDBV1=$E(PSSDBV9,1,12) I PSSDBV1="NINE TO TEN ",$$4 S PSSDBV2=$E(PSSDBV9,13,$L(PSSDBV9)) I $$8 Q 10
"RTN","PSSDSBPD",77,0)
 S PSSDBV1=$E(PSSDBV9,1,12) I PSSDBV1="NINE OR TEN ",$$4 S PSSDBV2=$E(PSSDBV9,13,$L(PSSDBV9)) I $$8 Q 10
"RTN","PSSDSBPD",78,0)
 S PSSDBV1=$E(PSSDBV9,1,9) I PSSDBV1="NINE-TEN ",$$4 S PSSDBV2=$E(PSSDBV9,10,$L(PSSDBV9)) I $$8 Q 10
"RTN","PSSDSBPD",79,0)
 S PSSDBV1=$E(PSSDBV9,1,11) I PSSDBV1="NINE - TEN ",$$4 S PSSDBV2=$E(PSSDBV9,12,$L(PSSDBV9)) I $$8 Q 10
"RTN","PSSDSBPD",80,0)
 ;
"RTN","PSSDSBPD",81,0)
 S PSSDBV1=$E(PSSDBV9,1,3) I PSSDBV1="10 ",$$4 S PSSDBV2=$E(PSSDBV9,4,$L(PSSDBV9)) I $$8 Q 10
"RTN","PSSDSBPD",82,0)
 S PSSDBV1=$E(PSSDBV9,1,4) I PSSDBV1="TEN ",$$4 S PSSDBV2=$E(PSSDBV9,5,$L(PSSDBV9)) I $$8 Q 10
"RTN","PSSDSBPD",83,0)
 ;
"RTN","PSSDSBPD",84,0)
 S PSSDBV1=$E(PSSDBV9,1,11) I PSSDBV1="10 AND 1/4 ",$$4 S PSSDBV2=$E(PSSDBV9,12,$L(PSSDBV9)) I $$8 Q 10.25
"RTN","PSSDSBPD",85,0)
 S PSSDBV1=$E(PSSDBV9,1,19) I PSSDBV1="TEN AND ONE FOURTH ",$$4 S PSSDBV2=$E(PSSDBV9,20,$L(PSSDBV9)) I $$8 Q 10.25
"RTN","PSSDSBPD",86,0)
 S PSSDBV1=$E(PSSDBV9,1,19) I PSSDBV1="TEN AND ONE-FOURTH ",$$4 S PSSDBV2=$E(PSSDBV9,20,$L(PSSDBV9)) I $$8 Q 10.25
"RTN","PSSDSBPD",87,0)
 S PSSDBV1=$E(PSSDBV9,1,18) I PSSDBV1="10 AND ONE FOURTH ",$$4 S PSSDBV2=$E(PSSDBV9,19,$L(PSSDBV9)) I $$8 Q 10.25
"RTN","PSSDSBPD",88,0)
 S PSSDBV1=$E(PSSDBV9,1,18) I PSSDBV1="10 AND ONE-FOURTH ",$$4 S PSSDBV2=$E(PSSDBV9,19,$L(PSSDBV9)) I $$8 Q 10.25
"RTN","PSSDSBPD",89,0)
 S PSSDBV1=$E(PSSDBV9,1,12) I PSSDBV1="TEN AND 1/4 ",$$4 S PSSDBV2=$E(PSSDBV9,13,$L(PSSDBV9)) I $$8 Q 10.25
"RTN","PSSDSBPD",90,0)
 ;
"RTN","PSSDSBPD",91,0)
 S PSSDBV1=$E(PSSDBV9,1,11) I PSSDBV1="10 AND 1/3 ",$$4 S PSSDBV2=$E(PSSDBV9,12,$L(PSSDBV9)) I $$8 Q 10.33
"RTN","PSSDSBPD",92,0)
 S PSSDBV1=$E(PSSDBV9,1,18) I PSSDBV1="TEN AND ONE THIRD ",$$4 S PSSDBV2=$E(PSSDBV9,19,$L(PSSDBV9)) I $$8 Q 10.33
"RTN","PSSDSBPD",93,0)
 S PSSDBV1=$E(PSSDBV9,1,18) I PSSDBV1="TEN AND ONE-THIRD ",$$4 S PSSDBV2=$E(PSSDBV9,19,$L(PSSDBV9)) I $$8 Q 10.33
"RTN","PSSDSBPD",94,0)
 S PSSDBV1=$E(PSSDBV9,1,17) I PSSDBV1="10 AND ONE THIRD ",$$4 S PSSDBV2=$E(PSSDBV9,18,$L(PSSDBV9)) I $$8 Q 10.33
"RTN","PSSDSBPD",95,0)
 S PSSDBV1=$E(PSSDBV9,1,17) I PSSDBV1="10 AND ONE-THIRD ",$$4 S PSSDBV2=$E(PSSDBV9,18,$L(PSSDBV9)) I $$8 Q 10.33
"RTN","PSSDSBPD",96,0)
 S PSSDBV1=$E(PSSDBV9,1,12) I PSSDBV1="TEN AND 1/3 ",$$4 S PSSDBV2=$E(PSSDBV9,13,$L(PSSDBV9)) I $$8 Q 10.33
"RTN","PSSDSBPD",97,0)
 ;
"RTN","PSSDSBPD",98,0)
 S PSSDBV1=$E(PSSDBV9,1,11) I PSSDBV1="10 AND 1/2 ",$$4 S PSSDBV2=$E(PSSDBV9,12,$L(PSSDBV9)) I $$8 Q 10.5
"RTN","PSSDSBPD",99,0)
 S PSSDBV1=$E(PSSDBV9,1,17) I PSSDBV1="TEN AND ONE HALF ",$$4 S PSSDBV2=$E(PSSDBV9,18,$L(PSSDBV9)) I $$8 Q 10.5
"RTN","PSSDSBPD",100,0)
 S PSSDBV1=$E(PSSDBV9,1,17) I PSSDBV1="TEN AND ONE-HALF ",$$4 S PSSDBV2=$E(PSSDBV9,18,$L(PSSDBV9)) I $$8 Q 10.5
"RTN","PSSDSBPD",101,0)
 S PSSDBV1=$E(PSSDBV9,1,16) I PSSDBV1="10 AND ONE HALF ",$$4 S PSSDBV2=$E(PSSDBV9,17,$L(PSSDBV9)) I $$8 Q 10.5
"RTN","PSSDSBPD",102,0)
 S PSSDBV1=$E(PSSDBV9,1,16) I PSSDBV1="10 AND ONE-HALF ",$$4 S PSSDBV2=$E(PSSDBV9,17,$L(PSSDBV9)) I $$8 Q 10.5
"RTN","PSSDSBPD",103,0)
 S PSSDBV1=$E(PSSDBV9,1,12) I PSSDBV1="TEN AND 1/2 ",$$4 S PSSDBV2=$E(PSSDBV9,13,$L(PSSDBV9)) I $$8 Q 10.5
"RTN","PSSDSBPD",104,0)
 ;
"RTN","PSSDSBPD",105,0)
 Q 0
"RTN","PSSDSBPD",106,0)
 ;
"RTN","PSSDSBPD",107,0)
8() ;Look for Unit - PSSDBIFL set in PSSSAPD, indicates if Order has a Dispense Drug, or just an Orderable Item
"RTN","PSSDSBPD",108,0)
 S PSSDBV3="" D
"RTN","PSSDSBPD",109,0)
 .I PSSDBIFL S PSSDBV3=$$UNITD^PSSDSAPI(PSSDBV2) Q
"RTN","PSSDSBPD",110,0)
 .S PSSDBV3=$$UNIT^PSSDSAPI(PSSDBV2)
"RTN","PSSDSBPD",111,0)
 Q $S(PSSDBV3="":0,1:1)
"RTN","PSSDSBPD",112,0)
 ;
"RTN","PSSDSBPD",113,0)
4() ;Validate text follow the numeric part of the text
"RTN","PSSDSBPD",114,0)
 I $L(PSSDBV9)'>$L(PSSDBV1) Q 0
"RTN","PSSDSBPD",115,0)
 Q 1
"RTN","PSSDSEXC")
0^24^B219828459^n/a
"RTN","PSSDSEXC",1,0)
PSSDSEXC ;BIR/RTR-Exceptions for Dose call ;02/24/09
"RTN","PSSDSEXC",2,0)
 ;;1.0;PHARMACY DATA MANAGEMENT;**117**;9/30/97;Build 101
"RTN","PSSDSEXC",3,0)
 ;
"RTN","PSSDSEXC",4,0)
 ;Set Output PSSDOSGL for Dose Call
"RTN","PSSDSEXC",5,0)
 ;
"RTN","PSSDSEXC",6,0)
 ; 
"RTN","PSSDSEXC",7,0)
 ;Document in ICD
"RTN","PSSDSEXC",8,0)
 ;Inform CPRS about pharmacy input number and how you may add to it a piece 5
"RTN","PSSDSEXC",9,0)
 ;CPRS/Inpatient MUST kill both Output Globals
"RTN","PSSDSEXC",10,0)
 ;
"RTN","PSSDSEXC",11,0)
 ;4 globals to check:
"RTN","PSSDSEXC",12,0)
 ;  Top Level for -1
"RTN","PSSDSEXC",13,0)
 ;  errors
"RTN","PSSDSEXC",14,0)
 ;  exceptions
"RTN","PSSDSEXC",15,0)
 ;  regular data global
"RTN","PSSDSEXC",16,0)
 ;loop on Pharmacy Order number, since you may add to it
"RTN","PSSDSEXC",17,0)
 ;
"RTN","PSSDSEXC",18,0)
 ;
"RTN","PSSDSEXC",19,0)
 ;
"RTN","PSSDSEXC",20,0)
 ;PSSDBCAR ARRAY pieces:
"RTN","PSSDSEXC",21,0)
 ;1 = S for Single, D for Daily B for Both
"RTN","PSSDSEXC",22,0)
 ;2 = Drug Name
"RTN","PSSDSEXC",23,0)
 ;3 = Drug Internal Entry Number
"RTN","PSSDSEXC",24,0)
 ;4 = Frequency Flag
"RTN","PSSDSEXC",25,0)
 ;5 = 1 for Maintenance, 0 for Single Dose
"RTN","PSSDSEXC",26,0)
 ;6 = 1 to only Show General information (Or General Dose error) and errors (No Single or Range Messages)
"RTN","PSSDSEXC",27,0)
 ;7 = 1 To NEVER show General Dosing information, overrides piece 8
"RTN","PSSDSEXC",28,0)
 ;8 = 1 Show general even though piece 1 = "S"
"RTN","PSSDSEXC",29,0)
 ;9 = FDB ROUTE
"RTN","PSSDSEXC",30,0)
 ;10 = 1 to show General Dose exception in place of General Dose info when no General Dose Information exists
"RTN","PSSDSEXC",31,0)
 ;PSSDBCAX holds error to show
"RTN","PSSDSEXC",32,0)
 ;11 = 1 to indicate to show the Daily Error message because you added up previod Dosage at this DOing Sequence, which dailys are screened out
"RTN","PSSDSEXC",33,0)
 ;12 = 1 to screen out frequency exceptions
"RTN","PSSDSEXC",34,0)
 ;
"RTN","PSSDSEXC",35,0)
FMT ;PSSDBDGO =1 if you wnt to interface, 0 if not (All order are Single Dose and Free Text Dose could not be evaluated
"RTN","PSSDSEXC",36,0)
 ;Change IDC where -1 is only check, unless you reset 0 node after your code, but ICD Output is different you these 2
"RTN","PSSDSEXC",37,0)
 ;Inform CORS of this
"RTN","PSSDSEXC",38,0)
 N PSSDWLP,PSSDWL1,PSSDWLPV
"RTN","PSSDSEXC",39,0)
 I PSSDBASA,PSSDBDGO S ^TMP($J,PSSDBASF,"OUT",0)=^TMP($J,PSSDBASE,"OUT",0)
"RTN","PSSDSEXC",40,0)
 I PSSDBASB,PSSDBDGO S ^TMP($J,PSSDBASG,"OUT",0)=^TMP($J,PSSDBASE,"OUT",0)
"RTN","PSSDSEXC",41,0)
 ;Should be able to just Quit if it's equal to 0, no need to continue?
"RTN","PSSDSEXC",42,0)
 I $P($G(^TMP($J,PSSDBASE,"OUT",0)),"^")=-1 Q
"RTN","PSSDSEXC",43,0)
 ;
"RTN","PSSDSEXC",44,0)
 ;If interface goes down between Ping and Actual DOse Call, and you get the scenarion where you don't have to go
"RTN","PSSDSEXC",45,0)
 ;through the interface to show Bad Dose warning, do you still show it if a)It's the only Input Dose, and B) It's
"RTN","PSSDSEXC",46,0)
 ;one of many DOsages and it fails becuase of the interface
"RTN","PSSDSEXC",47,0)
 ;
"RTN","PSSDSEXC",48,0)
 ;Test where all you have is one Dosing sequence that does not go to interface
"RTN","PSSDSEXC",49,0)
 ;Set errors, this needs to be re-coded setting all, no codes in error global for single, daily, etc
"RTN","PSSDSEXC",50,0)
 ;What if error/exceptions should only be applied to say DOsing sequence 3 of 5 Dosing sequences, you probably just return at the beginning
"RTN","PSSDSEXC",51,0)
 ;Is there even a way to tell
"RTN","PSSDSEXC",52,0)
 S PSSDWLP="" F  S PSSDWLP=$O(^TMP($J,PSSDBASE,"OUT","DOSE","ERROR",PSSDWLP)) Q:PSSDWLP=""  D:'$P(PSSDWLP,";",5)
"RTN","PSSDSEXC",53,0)
 .F PSSDWL1=0:0 S PSSDWL1=$O(^TMP($J,PSSDBASE,"OUT","DOSE","ERROR",PSSDWLP,PSSDWL1)) Q:'PSSDWL1  D:'$$ERR1^PSSDSAPK
"RTN","PSSDSEXC",54,0)
 ..I $G(^TMP($J,PSSDBASE,"OUT","DOSE","ERROR",PSSDWLP,PSSDWL1,"MSG"))'="" D
"RTN","PSSDSEXC",55,0)
 ...I PSSDBASA S ^TMP($J,PSSDBASF,"OUT","DOSE","ERROR",PSSDWLP,PSSDWL1,"MSG")=$G(^TMP($J,PSSDBASE,"OUT","DOSE","ERROR",PSSDWLP,PSSDWL1,"MSG"))
"RTN","PSSDSEXC",56,0)
 ...I PSSDBASB S ^TMP($J,PSSDBASG,"OUT",PSSDWLP,"ERROR",PSSDWL1,"MSG")=$G(^TMP($J,PSSDBASE,"OUT","DOSE","ERROR",PSSDWLP,PSSDWL1,"MSG"))
"RTN","PSSDSEXC",57,0)
 ..I $G(^TMP($J,PSSDBASE,"OUT","DOSE","ERROR",PSSDWLP,PSSDWL1,"TEXT"))'="" S PSSDWLPV=$S($G(^TMP($J,PSSDBASE,"OUT","DOSE","ERROR",PSSDWLP,PSSDWL1,"SEV"))="Warning":0,1:1) D
"RTN","PSSDSEXC",58,0)
 ...I PSSDBASA S ^TMP($J,PSSDBASF,"OUT","DOSE","ERROR",PSSDWLP,PSSDWL1,"TEXT")=$S(PSSDWLPV:"Reason: ",1:"")_$G(^TMP($J,PSSDBASE,"OUT","DOSE","ERROR",PSSDWLP,PSSDWL1,"TEXT"))
"RTN","PSSDSEXC",59,0)
 ...I PSSDBASB S ^TMP($J,PSSDBASG,"OUT",PSSDWLP,"ERROR",PSSDWL1,"TEXT")=$S(PSSDWLPV:"Reason: ",1:"")_$G(^TMP($J,PSSDBASE,"OUT","DOSE","ERROR",PSSDWLP,PSSDWL1,"TEXT"))
"RTN","PSSDSEXC",60,0)
 ;
"RTN","PSSDSEXC",61,0)
 ;
"RTN","PSSDSEXC",62,0)
 ;Set exceptions
"RTN","PSSDSEXC",63,0)
 D EXCP
"RTN","PSSDSEXC",64,0)
 ;Set messages
"RTN","PSSDSEXC",65,0)
 D MESQ
"RTN","PSSDSEXC",66,0)
 I 'PSSDBDGO D
"RTN","PSSDSEXC",67,0)
 .I PSSDBASA D  Q
"RTN","PSSDSEXC",68,0)
 ..I $D(^TMP($J,PSSDBASF,"OUT")) S ^TMP($J,PSSDBASF,"OUT",0)=1 Q
"RTN","PSSDSEXC",69,0)
 ..S ^TMP($J,PSSDBASF,"OUT",0)=0
"RTN","PSSDSEXC",70,0)
 .I PSSDBASB D  Q
"RTN","PSSDSEXC",71,0)
 ..I $D(^TMP($J,PSSDBASG,"OUT")) S ^TMP($J,PSSDBASG,"OUT",0)=1 Q
"RTN","PSSDSEXC",72,0)
 ..S ^TMP($J,PSSDBASG,"OUT",0)=0
"RTN","PSSDSEXC",73,0)
 Q
"RTN","PSSDSEXC",74,0)
 ;
"RTN","PSSDSEXC",75,0)
 ;;
"RTN","PSSDSEXC",76,0)
EXCP ;Set Exceptions
"RTN","PSSDSEXC",77,0)
 ;STill need to do RESET, but also need to add other errors, and also some of those errros need a different heading (Daily Dose checks..)
"RTN","PSSDSEXC",78,0)
 ;Maybe add loop on PSSDBCAS at end for each RX_NUM, because they need to stay together AND REMOVE PSSDBCAS CHECK
"RTN","PSSDSEXC",79,0)
 ;;Need to set exception documented in ICD (oTHER PIECES STILL NEED SET, WHAT IF FOR A DOSE YOU CREATED)
"RTN","PSSDSEXC",80,0)
 ;
"RTN","PSSDSEXC",81,0)
 ;
"RTN","PSSDSEXC",82,0)
 ;Loop through error array set in PSSDSAPD, add to Main EXCEPTION global (Except for Free Text Dosage Not Evaluated error)
"RTN","PSSDSEXC",83,0)
 N PSSDWE1,PSSDWE2,PSSDWE3,PSSDWE4,PSSDWEE1,PSSDWEE2,PSSDWEX1,PSSDWEX2,PSSDWEX3,PSSDWEX4,PSSDWEX5,PSSDWEX6,PSSDWEX7,PSSDWSR1,PSSDWSR2,PSSDWSR3,PSSDWER1,PSSDWER2,PSSDWEGC,PSSDWER9,PSSNOE9
"RTN","PSSDSEXC",84,0)
 S PSSDWEX3="" F  S PSSDWEX3=$O(PSSDBCAR(PSSDWEX3)) Q:PSSDWEX3=""  D ADOSE D
"RTN","PSSDSEXC",85,0)
 .I '$O(PSSDBCAX(PSSDWEX3,0)) Q
"RTN","PSSDSEXC",86,0)
 .S PSSDWEX4=0 F PSSDWEX7=0:0 S PSSDWEX7=$O(^TMP($J,PSSDBASE,"OUT","EXCEPTIONS","DOSE",PSSDWEX3,PSSDWEX7)) Q:'PSSDWEX7  S PSSDWEX4=PSSDWEX7
"RTN","PSSDSEXC",87,0)
 .S PSSDWEX4=PSSDWEX4+1
"RTN","PSSDSEXC",88,0)
 .F PSSDWEX5=0:0 S PSSDWEX5=$O(PSSDBCAX(PSSDWEX3,PSSDWEX5)) Q:'PSSDWEX5  D:PSSDWEX5'=1
"RTN","PSSDSEXC",89,0)
 ..S PSSDWEX6=$T(ERROR+PSSDWEX5) S PSSDWSR1=$P(PSSDWEX6,";;",4)
"RTN","PSSDSEXC",90,0)
 ..S ^TMP($J,PSSDBASE,"OUT","EXCEPTIONS","DOSE",PSSDWEX3,PSSDWEX4)="^^^^^^"_$S(PSSDWSR1:"Daily Dose Range Check Error Summary for Drug: ",1:"Dosing Checks could not be performed for Drug: ")_$P(PSSDBCAR(PSSDWEX3),"^",2)_"^^^" D DSQ
"RTN","PSSDSEXC",91,0)
 ..S PSSDWEX4=PSSDWEX4+1
"RTN","PSSDSEXC",92,0)
 ;
"RTN","PSSDSEXC",93,0)
 ;
"RTN","PSSDSEXC",94,0)
 ;Loop through EXCEPTION global, call RESET if Free Text Dosage error exists and EXCEPTION from interface exists, then set 2 processing global outputs
"RTN","PSSDSEXC",95,0)
 K PSSDWE3
"RTN","PSSDSEXC",96,0)
 S PSSDWE1="" F  S PSSDWE1=$O(^TMP($J,PSSDBASE,"OUT","EXCEPTIONS","DOSE",PSSDWE1)) Q:PSSDWE1=""  D NOEXP^PSSDSAPK I '$D(PSSNOE9(PSSDWE1)) S PSSDWEX1(PSSDWE1)="" D:$D(PSSDBCAX(PSSDWE1,1)) RESET D
"RTN","PSSDSEXC",97,0)
 .S PSSDWE4=1,(PSSDWSR3,PSSDWER1,PSSDWER2,PSSDWER9)=0
"RTN","PSSDSEXC",98,0)
 .S PSSDWEE1=$P($G(PSSDBCAR(PSSDWE1)),"^",2),PSSDWEE2=$P($G(PSSDBCAR(PSSDWE1)),"^",3)
"RTN","PSSDSEXC",99,0)
 .F PSSDWE2=0:0 S PSSDWE2=$O(^TMP($J,PSSDBASE,"OUT","EXCEPTIONS","DOSE",PSSDWE1,PSSDWE2)) Q:'PSSDWE2  S PSSDWSR2=$S($P(^TMP($J,PSSDBASE,"OUT","EXCEPTIONS","DOSE",PSSDWE1,PSSDWE2),"^",7)["Summary":1,1:0) D
"RTN","PSSDSEXC",100,0)
 ..S PSSDWEGC=$P($G(^TMP($J,PSSDBASE,"OUT","EXCEPTIONS","DOSE",PSSDWE1,PSSDWE2)),"^",10) I $$ERR2^PSSDSAPK Q
"RTN","PSSDSEXC",101,0)
 ..I 'PSSDWSR2 D  Q
"RTN","PSSDSEXC",102,0)
 ...I PSSDWE4=1 D  S PSSDWE4=2
"RTN","PSSDSEXC",103,0)
 ....I PSSDBASA D HDER1
"RTN","PSSDSEXC",104,0)
 ....I PSSDBASB D HDER2
"RTN","PSSDSEXC",105,0)
 ...I PSSDBASA S ^TMP($J,PSSDBASF,"OUT","EXCEPTIONS","DOSE",PSSDWE1,PSSDWE4)=$S('PSSDWER1:"  Reason(s): ",1:"             ")_$P($G(^TMP($J,PSSDBASE,"OUT","EXCEPTIONS","DOSE",PSSDWE1,PSSDWE2)),"^",10) I PSSDWEGC'["Frequency",PSSDWER9 D HDER3
"RTN","PSSDSEXC",106,0)
 ...I PSSDBASB S ^TMP($J,PSSDBASG,"OUT",PSSDWE1,"EXCEPTIONS",PSSDWE4)=$S('PSSDWER1:"  Reason(s): ",1:"             ")_$P($G(^TMP($J,PSSDBASE,"OUT","EXCEPTIONS","DOSE",PSSDWE1,PSSDWE2)),"^",10) I PSSDWEGC'["Frequency",PSSDWER9 D HDER4
"RTN","PSSDSEXC",107,0)
 ...S PSSDWE4=PSSDWE4+1,PSSDWER1=1
"RTN","PSSDSEXC",108,0)
 ..I 'PSSDWSR3 D  S PSSDWE4=PSSDWE4+1
"RTN","PSSDSEXC",109,0)
 ...S PSSDWSR3=1
"RTN","PSSDSEXC",110,0)
 ...I PSSDBASA S ^TMP($J,PSSDBASF,"OUT","EXCEPTIONS","DOSE",PSSDWE1,PSSDWE4)=$P($G(^TMP($J,PSSDBASE,"OUT","EXCEPTIONS","DOSE",PSSDWE1,PSSDWE2)),"^",7)
"RTN","PSSDSEXC",111,0)
 ...I PSSDBASB S ^TMP($J,PSSDBASG,"OUT",PSSDWE1,"EXCEPTIONS",PSSDWE4)=$P($G(^TMP($J,PSSDBASE,"OUT","EXCEPTIONS","DOSE",PSSDWE1,PSSDWE2)),"^",7)
"RTN","PSSDSEXC",112,0)
 ..I PSSDBASA S ^TMP($J,PSSDBASF,"OUT","EXCEPTIONS","DOSE",PSSDWE1,PSSDWE4)=$S('PSSDWER2:"  Reason(s): ",1:"             ")_$P($G(^TMP($J,PSSDBASE,"OUT","EXCEPTIONS","DOSE",PSSDWE1,PSSDWE2)),"^",10)
"RTN","PSSDSEXC",113,0)
 ..I PSSDBASB S ^TMP($J,PSSDBASG,"OUT",PSSDWE1,"EXCEPTIONS",PSSDWE4)=$S('PSSDWER2:"  Reason(s): ",1:"             ")_$P($G(^TMP($J,PSSDBASE,"OUT","EXCEPTIONS","DOSE",PSSDWE1,PSSDWE2)),"^",10)
"RTN","PSSDSEXC",114,0)
 ..S PSSDWE4=PSSDWE4+1,PSSDWER2=1
"RTN","PSSDSEXC",115,0)
 ;
"RTN","PSSDSEXC",116,0)
 ;
"RTN","PSSDSEXC",117,0)
 ;If Free Text error message existed, but no Exception came back from Interface set the Free Text exception
"RTN","PSSDSEXC",118,0)
 S PSSDWEX2="" F  S PSSDWEX2=$O(PSSDBCAR(PSSDWEX2)) Q:PSSDWEX2=""  D
"RTN","PSSDSEXC",119,0)
 .I '$D(PSSDWEX1(PSSDWEX2)),$D(PSSDBCAX(PSSDWEX2,1)),'$D(PSSNOE9(PSSDWEX2)) D
"RTN","PSSDSEXC",120,0)
 ..I PSSDBASA S ^TMP($J,PSSDBASF,"OUT","EXCEPTIONS","DOSE",PSSDWEX2,1)="Dosing Checks could not be performed for Drug: "_$P(PSSDBCAR(PSSDWEX2),"^",2)
"RTN","PSSDSEXC",121,0)
 ..I PSSDBASB S ^TMP($J,PSSDBASG,"OUT",PSSDWEX2,"EXCEPTIONS",1)="Dosing Checks could not be performed for Drug: "_$P(PSSDBCAR(PSSDWEX2),"^",2)
"RTN","PSSDSEXC",122,0)
 ..I PSSDBASA S ^TMP($J,PSSDBASF,"OUT","EXCEPTIONS","DOSE",PSSDWEX2,2)="  Reason(s): Free Text Dosage could not be evaluated"
"RTN","PSSDSEXC",123,0)
 ..I PSSDBASB S ^TMP($J,PSSDBASG,"OUT",PSSDWEX2,"EXCEPTIONS",2)="  Reason(s): Free Text Dosage could not be evaluated"
"RTN","PSSDSEXC",124,0)
 ..;Need to set exception documented in ICD (OTHER PIECES STILL NEED SET, WHAT IF FOR A DOSE YOU CREATED)
"RTN","PSSDSEXC",125,0)
 ..S ^TMP($J,PSSDBASE,"OUT","EXCEPTIONS","DOSE",PSSDWEX2,1)="^^^^^^Dosing Checks could not be performed for Drug: "_$P(PSSDBCAR(PSSDWEX2),"^",2)_"^^^"_"Free Text Dosage could not be evaluated"
"RTN","PSSDSEXC",126,0)
 Q
"RTN","PSSDSEXC",127,0)
 ;
"RTN","PSSDSEXC",128,0)
 ;
"RTN","PSSDSEXC",129,0)
MESQ ;
"RTN","PSSDSEXC",130,0)
 ;To show General DOsing guideline, we check piece 4 of PSSDBCAR for Bad Frequency, is that always reliable?
"RTN","PSSDSEXC",131,0)
 ;Our only other alternative to is check for text containing Frequency in the error messages
"RTN","PSSDSEXC",132,0)
 N PSSDWE5,PSSDWDRG,PSSDWIEN,PSSDWGFB,PSSDWGER
"RTN","PSSDSEXC",133,0)
 S PSSDWE5="" F  S PSSDWE5=$O(^TMP($J,PSSDBASE,"OUT","DOSE",PSSDWE5)) Q:PSSDWE5=""  D
"RTN","PSSDSEXC",134,0)
 .S PSSDWGER=0
"RTN","PSSDSEXC",135,0)
 .;Next Line, should I set from the TMP global instead of from the PSSDBCAR array
"RTN","PSSDSEXC",136,0)
 .S PSSDWDRG=$P($G(PSSDBCAR(PSSDWE5)),"^",2),PSSDWIEN=$P($G(PSSDBCAR(PSSDWE5)),"^",3) Q:PSSDWDRG=""!('PSSDWIEN)
"RTN","PSSDSEXC",137,0)
 .I $P($G(PSSDBCAR(PSSDWE5)),"^")="S" D:'$P($G(PSSDBCAR(PSSDWE5)),"^",6) SING D:$P($G(PSSDBCAR(PSSDWE5)),"^",6)!($P($G(PSSDBCAR(PSSDWE5)),"^",8)) GEN Q
"RTN","PSSDSEXC",138,0)
 .S PSSDWGFB=0 I $P($G(PSSDBCAR(PSSDWE5)),"^")="D" D:'$P($G(PSSDBCAR(PSSDWE5)),"^",6) DAILY D:PSSDWGFB!('$P($G(PSSDBCAR(PSSDWE5)),"^",4))!($D(PSSDBCAX(PSSDWE5,1)))!($P($G(PSSDBCAR(PSSDWE5)),"^",8))!($P($G(PSSDBCAR(PSSDWE5)),"^",6)) GEN Q
"RTN","PSSDSEXC",139,0)
 .D SING,DAILY D:PSSDWGFB!('$P($G(PSSDBCAR(PSSDWE5)),"^",4))!($D(PSSDBCAX(PSSDWE5,1)))!($P($G(PSSDBCAR(PSSDWE5)),"^",8))!($P($G(PSSDBCAR(PSSDWE5)),"^",6)) GEN
"RTN","PSSDSEXC",140,0)
 Q
"RTN","PSSDSEXC",141,0)
 ;
"RTN","PSSDSEXC",142,0)
 ;
"RTN","PSSDSEXC",143,0)
SING ;
"RTN","PSSDSEXC",144,0)
 I $P($G(PSSDBCAR(PSSDWE5)),"^",6) Q
"RTN","PSSDSEXC",145,0)
 N PSSDWE6
"RTN","PSSDSEXC",146,0)
 S PSSDWE6=$G(^TMP($J,PSSDBASE,"OUT","DOSE",PSSDWE5,PSSDWDRG,"SINGLE","STATUSCODE",PSSDWIEN))
"RTN","PSSDSEXC",147,0)
 Q:PSSDWE6=1
"RTN","PSSDSEXC",148,0)
 I PSSDWE6>1,PSSDWE6<5 D  Q
"RTN","PSSDSEXC",149,0)
 .I PSSDBASA D
"RTN","PSSDSEXC",150,0)
 ..I $G(PSSDBADJ(PSSDWE5))="" S ^TMP($J,PSSDBASF,"OUT","DOSE",PSSDWE5,PSSDWDRG,"1_SINGLE","MESSAGE",PSSDWIEN)=PSSDWDRG_": "_^TMP($J,PSSDBASE,"OUT","DOSE",PSSDWE5,PSSDWDRG,"SINGLE","MESSAGE",PSSDWIEN) Q
"RTN","PSSDSEXC",151,0)
 ..S ^TMP($J,PSSDBASF,"OUT","DOSE",PSSDWE5,PSSDWDRG,"1_SINGLE","MESSAGE",PSSDWIEN)=$G(PSSDBADJ(PSSDWE5))_" "_PSSDWDRG_": "_^TMP($J,PSSDBASE,"OUT","DOSE",PSSDWE5,PSSDWDRG,"SINGLE","MESSAGE",PSSDWIEN)
"RTN","PSSDSEXC",152,0)
 .I PSSDBASB D  S ^TMP($J,PSSDBASG,"OUT",PSSDWE5,"MESSAGE","1_SINGLE",PSSDWIEN)=PSSDWDRG_": "_^TMP($J,PSSDBASE,"OUT","DOSE",PSSDWE5,PSSDWDRG,"SINGLE","MESSAGE",PSSDWIEN)
"RTN","PSSDSEXC",153,0)
 ..S:$G(PSSDBADJ(PSSDWE5))'="" ^TMP($J,PSSDBASG,"OUT",PSSDWE5,"MESSAGE",".5_SINGLE",PSSDWIEN)=$G(PSSDBADJ(PSSDWE5))
"RTN","PSSDSEXC",154,0)
 Q
"RTN","PSSDSEXC",155,0)
 ;
"RTN","PSSDSEXC",156,0)
 ;
"RTN","PSSDSEXC",157,0)
DAILY ;
"RTN","PSSDSEXC",158,0)
 I $P($G(PSSDBCAR(PSSDWE5)),"^",6) Q
"RTN","PSSDSEXC",159,0)
 N PSSDWE9
"RTN","PSSDSEXC",160,0)
 S PSSDWE9=$G(^TMP($J,PSSDBASE,"OUT","DOSE",PSSDWE5,PSSDWDRG,"RANGE","STATUSCODE",PSSDWIEN))
"RTN","PSSDSEXC",161,0)
 Q:PSSDWE9=1
"RTN","PSSDSEXC",162,0)
 I PSSDWE9>1,PSSDWE9<5 D  Q
"RTN","PSSDSEXC",163,0)
 .I PSSDBASA S ^TMP($J,PSSDBASF,"OUT","DOSE",PSSDWE5,PSSDWDRG,"2_RANGE","MESSAGE",PSSDWIEN)=PSSDWDRG_": "_^TMP($J,PSSDBASE,"OUT","DOSE",PSSDWE5,PSSDWDRG,"RANGE","MESSAGE",PSSDWIEN)
"RTN","PSSDSEXC",164,0)
 .I PSSDBASB S ^TMP($J,PSSDBASG,"OUT",PSSDWE5,"MESSAGE","2_RANGE",PSSDWIEN)=PSSDWDRG_": "_^TMP($J,PSSDBASE,"OUT","DOSE",PSSDWE5,PSSDWDRG,"RANGE","MESSAGE",PSSDWIEN)
"RTN","PSSDSEXC",165,0)
 I PSSDWE9=5 D  S PSSDWGFB=1 Q
"RTN","PSSDSEXC",166,0)
 .;S ^TMP($J,PSSDBASF,"OUT","DOSE",PSSDWE5,PSSDWDRG,"2_RANGE","MESSAGE",PSSDWIEN)="Daily dose range check could not be performed for "_PSSDWDRG_". REASON: "_^TMP($J,PSSDBASE,"OUT","DOSE",PSSDWE5,PSSDWDRG,"RANGE","MESSAGE",PSSDWIEN)
"RTN","PSSDSEXC",167,0)
 Q
"RTN","PSSDSEXC",168,0)
 ;
"RTN","PSSDSEXC",169,0)
 ;
"RTN","PSSDSEXC",170,0)
GEN ;General Dosing Guidelines
"RTN","PSSDSEXC",171,0)
 I $P($G(PSSDBCAR(PSSDWE5)),"^",7) Q
"RTN","PSSDSEXC",172,0)
 I $G(^TMP($J,PSSDBASE,"OUT","DOSE",PSSDWE5,PSSDWDRG,"GENERAL","MESSAGE",PSSDWIEN))'="" D  Q
"RTN","PSSDSEXC",173,0)
 .I PSSDBASA S ^TMP($J,PSSDBASF,"OUT","DOSE",PSSDWE5,PSSDWDRG,"3_GENERAL","MESSAGE",PSSDWIEN)=^TMP($J,PSSDBASE,"OUT","DOSE",PSSDWE5,PSSDWDRG,"GENERAL","MESSAGE",PSSDWIEN)
"RTN","PSSDSEXC",174,0)
 .I PSSDBASB S ^TMP($J,PSSDBASG,"OUT",PSSDWE5,"MESSAGE","3_GENERAL",PSSDWIEN)=^TMP($J,PSSDBASE,"OUT","DOSE",PSSDWE5,PSSDWDRG,"GENERAL","MESSAGE",PSSDWIEN)
"RTN","PSSDSEXC",175,0)
 ;I '$P($G(PSSDBCAR(PSSDWE5)),"^",10) Q
"RTN","PSSDSEXC",176,0)
 I PSSDBASA S ^TMP($J,PSSDBASF,"OUT","DOSE",PSSDWE5,PSSDWDRG,"3_GENERAL","MESSAGE",PSSDWIEN)="General dosing range for "_$P($G(PSSDBCAR(PSSDWE5)),"^",2)_" ("_$P($G(PSSDBCAR(PSSDWE5)),"^",9)_") could not be obtianed from vendor database."
"RTN","PSSDSEXC",177,0)
 I PSSDBASB S ^TMP($J,PSSDBASG,"OUT",PSSDWE5,"MESSAGE","3_GENERAL",PSSDWIEN)="General dosing range for "_$P($G(PSSDBCAR(PSSDWE5)),"^",2)_" ("_$P($G(PSSDBCAR(PSSDWE5)),"^",9)_") could not be obtianed from vendor database."
"RTN","PSSDSEXC",178,0)
 ;S PSSDWGER=1
"RTN","PSSDSEXC",179,0)
 Q
"RTN","PSSDSEXC",180,0)
 ;
"RTN","PSSDSEXC",181,0)
 ;
"RTN","PSSDSEXC",182,0)
GENERR ;Set General Dosing Guidelines exception
"RTN","PSSDSEXC",183,0)
 Q
"RTN","PSSDSEXC",184,0)
 D GENERRX^PSSDSAPK
"RTN","PSSDSEXC",185,0)
 Q
"RTN","PSSDSEXC",186,0)
 ;
"RTN","PSSDSEXC",187,0)
 ;
"RTN","PSSDSEXC",188,0)
RESET ;Reset main exception global if Free text Dose could not be evaluated
"RTN","PSSDSEXC",189,0)
 N PSSDWB1,PSSDWB2,PSSDWB3
"RTN","PSSDSEXC",190,0)
 S PSSDWB1="" F  S PSSDWB1=$O(^TMP($J,PSSDBASE,"OUT","EXCEPTIONS","DOSE",PSSDWE1,PSSDWB1)) Q:PSSDWB1=""  D
"RTN","PSSDSEXC",191,0)
 .S PSSDWB2=$G(^TMP($J,PSSDBASE,"OUT","EXCEPTIONS","DOSE",PSSDWE1,PSSDWB1))
"RTN","PSSDSEXC",192,0)
 .I $P(PSSDWB2,"^",10)'="Invalid or Undefined Dose",$P(PSSDWB2,"^",10)'="Invalid or Undefined Dose Unit" S PSSDWB3(PSSDWB1)=^TMP($J,PSSDBASE,"OUT","EXCEPTIONS","DOSE",PSSDWE1,PSSDWB1)
"RTN","PSSDSEXC",193,0)
 .K ^TMP($J,PSSDBASE,"OUT","EXCEPTIONS","DOSE",PSSDWE1,PSSDWB1)
"RTN","PSSDSEXC",194,0)
 ;STill need to set other pieces to match ICD, maybe
"RTN","PSSDSEXC",195,0)
 S ^TMP($J,PSSDBASE,"OUT","EXCEPTIONS","DOSE",PSSDWE1,1)="^^^^^^Dosing Checks could not be performed for Drug: "_$P(PSSDBCAR(PSSDWE1),"^",2)_"^^^Free Text Dosage could not be evaluated"
"RTN","PSSDSEXC",196,0)
 S PSSDWB2=2,PSSDWB1="" F  S PSSDWB1=$O(PSSDWB3(PSSDWB1)) Q:PSSDWB1=""  D
"RTN","PSSDSEXC",197,0)
 .S ^TMP($J,PSSDBASE,"OUT","EXCEPTIONS","DOSE",PSSDWE1,PSSDWB2)=PSSDWB3(PSSDWB1)
"RTN","PSSDSEXC",198,0)
 .S PSSDWB2=PSSDWB2+1
"RTN","PSSDSEXC",199,0)
 Q
"RTN","PSSDSEXC",200,0)
 ;
"RTN","PSSDSEXC",201,0)
 ;
"RTN","PSSDSEXC",202,0)
ERROR ;List of errors, for complex orders piece 3 =1 if only for Daily and adding previous sequences
"RTN","PSSDSEXC",203,0)
 ;;1;;Free Text Dosage could not be evaluated
"RTN","PSSDSEXC",204,0)
 ;;2;;Invalid or Undefined Frequency
"RTN","PSSDSEXC",205,0)
 ;;3;;Free Text Infusion Rate could not be evaluated
"RTN","PSSDSEXC",206,0)
 ;;4;;Not all Dose types are Maintenance;;1
"RTN","PSSDSEXC",207,0)
 ;;5;;Not all Dose Units are defined or are the same;;1
"RTN","PSSDSEXC",208,0)
 ;;6;;Not all Med Routes are defined or are the same;;1
"RTN","PSSDSEXC",209,0)
 ;;7;;Not all Frequencies are valid;;1
"RTN","PSSDSEXC",210,0)
 ;;8;;Not all Durations are the same;;1
"RTN","PSSDSEXC",211,0)
 ;;9;;At least one Duration is less than one day;;1
"RTN","PSSDSEXC",212,0)
 ;;10;;At least one Schedule is a Day of Week Schedule;;1
"RTN","PSSDSEXC",213,0)
 ;;11;;One or more Free Text Dosages could not be evaluated;;1
"RTN","PSSDSEXC",214,0)
 ;;12;;One or more required patient parameters unavailable: Height
"RTN","PSSDSEXC",215,0)
 ;;13;;One or more required patient parameters unavailable: Weight
"RTN","PSSDSEXC",216,0)
 ;;14;;One or more required patient parameters unavailable: Height, Weight
"RTN","PSSDSEXC",217,0)
 ;;15;;Frequency greater than order duration
"RTN","PSSDSEXC",218,0)
 Q
"RTN","PSSDSEXC",219,0)
 ;
"RTN","PSSDSEXC",220,0)
 ;
"RTN","PSSDSEXC",221,0)
DUNIT() ;Find unit
"RTN","PSSDSEXC",222,0)
 ;Piece 3 of PSSDBCAR must be a File 50 IEN
"RTN","PSSDSEXC",223,0)
 N PSSDBEG1,PSSDBEG2,PSSDBEG3,PSSDBEG4,PSSDBEG5,PSSDBEG6,PSSDBEG7,X,Y
"RTN","PSSDSEXC",224,0)
 S PSSDBEG4=""
"RTN","PSSDSEXC",225,0)
 S PSSDBEG1=$P(PSSDBCAR(PSSDBEB1),"^",3)
"RTN","PSSDSEXC",226,0)
 I PSSDBEG1 D  I PSSDBEG4'="" Q PSSDBEG4
"RTN","PSSDSEXC",227,0)
 .S PSSDBEG2=$P($G(^PSDRUG(PSSDBEG1,"ND")),"^"),PSSDBEG3=$P($G(^PSDRUG(PSSDBEG1,"ND")),"^",3)
"RTN","PSSDSEXC",228,0)
 .I 'PSSDBEG2!('PSSDBEG3) Q
"RTN","PSSDSEXC",229,0)
 .S PSSDBEG5=$$DFSU^PSNAPIS(PSSDBEG2,PSSDBEG3)
"RTN","PSSDSEXC",230,0)
 .S PSSDBEG6=$P(PSSDBEG5,"^",6)
"RTN","PSSDSEXC",231,0)
 .I PSSDBEG6'="" S PSSDBEG7=$$UNIT^PSSDSAPI(PSSDBEG6) I PSSDBEG7'="" S PSSDBEG4=PSSDBEG7
"RTN","PSSDSEXC",232,0)
 I PSSDBEG1 F PSSDBEG2=0:0 S PSSDBEG2=$O(^PSDRUG(PSSDBEG1,"DOS2",PSSDBEG2)) Q:'PSSDBEG2!(PSSDBEG4'="")  D
"RTN","PSSDSEXC",233,0)
 .S PSSDBEG3=$P($G(^PSDRUG(PSSDBEG1,"DOS2",PSSDBEG2,0)),"^",5)
"RTN","PSSDSEXC",234,0)
 .I PSSDBEG3,$P($G(^PS(51.24,PSSDBEG3,0)),"^",2)'="" S PSSDBEG4=$P(^PS(51.24,PSSDBEG3,0),"^",2)
"RTN","PSSDSEXC",235,0)
 I PSSDBEG4'="" Q PSSDBEG4
"RTN","PSSDSEXC",236,0)
 I PSSDBEG1 S PSSDBEG2=$P($G(^PSDRUG(PSSDBEG1,2)),"^") I PSSDBEG2 D
"RTN","PSSDSEXC",237,0)
 .S PSSDBEG3=$P($G(^PS(50.7,PSSDBEG2,0)),"^",2) I PSSDBEG3 D
"RTN","PSSDSEXC",238,0)
 ..F PSSDBEG5=0:0 S PSSDBEG5=$O(^PS(50.606,PSSDBEG3,"NOUN",PSSDBEG5)) Q:'PSSDBEG5!(PSSDBEG4'="")  D
"RTN","PSSDSEXC",239,0)
 ...S PSSDBEG6=$P($G(^PS(50.606,PSSDBEG3,"NOUN",PSSDBEG5,0)),"^")
"RTN","PSSDSEXC",240,0)
 ...I PSSDBEG6'="" S PSSDBEG7=$$UNIT^PSSDSAPI(PSSDBEG6) I PSSDBEG7'="" S PSSDBEG4=PSSDBEG7
"RTN","PSSDSEXC",241,0)
 I PSSDBEG4'="" Q PSSDBEG4
"RTN","PSSDSEXC",242,0)
 Q "EACH"
"RTN","PSSDSEXC",243,0)
 ;
"RTN","PSSDSEXC",244,0)
 ;
"RTN","PSSDSEXC",245,0)
DFM() ;get Dose Form Indicator
"RTN","PSSDSEXC",246,0)
 ;Go over code again, you default to 0, is that OK? you get 1st Active one, regarless of if that's the
"RTN","PSSDSEXC",247,0)
 ;one it was dervied from, say in auto-pop logic, but for multiple 51.24 entries with same FDB Routem piece 3 should be the same, right Lina
"RTN","PSSDSEXC",248,0)
 ;using SCREEN XTID everywhere in 117, how do you determine UNit, what if MG/ML, at this Tag, should aleayd be piece 2, right
"RTN","PSSDSEXC",249,0)
 ;Make sure you got all places where DFN should be called, no other place you are setting piece 6 of TMP global
"RTN","PSSDSEXC",250,0)
 ;Make sure Mai wasn't calling this in PSSDSAPD, and test both DFM calls from PSSDSAPD
"RTN","PSSDSEXC",251,0)
 N PSSDFDFK,PSSDFDFL
"RTN","PSSDSEXC",252,0)
 I $G(PSSDBAR("UNIT"))="" Q 0
"RTN","PSSDSEXC",253,0)
 S PSSDFDFL=0 F PSSDFDFK=0:0 S PSSDFDFK=$O(^PS(51.24,"C",PSSDBAR("UNIT"),PSSDFDFK)) Q:'PSSDFDFK!(PSSDFDFL)  I '$$SCREEN^XTID(51.24,.01,PSSDFDFK_",") S PSSDFDFL=PSSDFDFK
"RTN","PSSDSEXC",254,0)
 I PSSDFDFL,$P($G(^PS(51.24,PSSDFDFL,0)),"^",3) Q 1
"RTN","PSSDSEXC",255,0)
 Q 0
"RTN","PSSDSEXC",256,0)
 ;
"RTN","PSSDSEXC",257,0)
 ;
"RTN","PSSDSEXC",258,0)
HDER1 ;Set header for exceptions for Output 1
"RTN","PSSDSEXC",259,0)
 I PSSDWEGC["Frequency" D  S PSSDWER9=1 Q
"RTN","PSSDSEXC",260,0)
 .S ^TMP($J,PSSDBASF,"OUT","EXCEPTIONS","DOSE",PSSDWE1,PSSDWE4)="Daily Dose Range Check could not be performed for Drug: "_PSSDWEE1
"RTN","PSSDSEXC",261,0)
 S ^TMP($J,PSSDBASF,"OUT","EXCEPTIONS","DOSE",PSSDWE1,PSSDWE4)=$P($G(^TMP($J,PSSDBASE,"OUT","EXCEPTIONS","DOSE",PSSDWE1,PSSDWE2)),"^",7)
"RTN","PSSDSEXC",262,0)
 Q
"RTN","PSSDSEXC",263,0)
 ;
"RTN","PSSDSEXC",264,0)
 ;
"RTN","PSSDSEXC",265,0)
HDER2 ;Set header for exceptions for Output 2
"RTN","PSSDSEXC",266,0)
 I PSSDWEGC["Frequency" D  S PSSDWER9=1 Q
"RTN","PSSDSEXC",267,0)
 .S ^TMP($J,PSSDBASG,"OUT",PSSDWE1,"EXCEPTIONS",PSSDWE4)="Daily Dose Range Check could not be performed for Drug: "_PSSDWEE1
"RTN","PSSDSEXC",268,0)
 S ^TMP($J,PSSDBASG,"OUT",PSSDWE1,"EXCEPTIONS",PSSDWE4)=$P($G(^TMP($J,PSSDBASE,"OUT","EXCEPTIONS","DOSE",PSSDWE1,PSSDWE2)),"^",7)
"RTN","PSSDSEXC",269,0)
 Q
"RTN","PSSDSEXC",270,0)
 ;
"RTN","PSSDSEXC",271,0)
 ;
"RTN","PSSDSEXC",272,0)
HDER3 ;Reset header node for Output 1 to Non-Frequency header
"RTN","PSSDSEXC",273,0)
 S ^TMP($J,PSSDBASF,"OUT","EXCEPTIONS","DOSE",PSSDWE1,1)="Dosing Checks could not be performed for Drug: "_PSSDWEE1
"RTN","PSSDSEXC",274,0)
 Q
"RTN","PSSDSEXC",275,0)
 ;
"RTN","PSSDSEXC",276,0)
 ;
"RTN","PSSDSEXC",277,0)
HDER4 ;Reset header node for Output 2 to Non-frequency header
"RTN","PSSDSEXC",278,0)
 S ^TMP($J,PSSDBASG,"OUT",PSSDWE1,"EXCEPTIONS",1)="Dosing Checks could not be performed for Drug: "_PSSDWEE1
"RTN","PSSDSEXC",279,0)
 Q
"RTN","PSSDSEXC",280,0)
 ;
"RTN","PSSDSEXC",281,0)
 ;
"RTN","PSSDSEXC",282,0)
ADOSE ;Add DOSE subscript to any EXCEPTION from interface without DOSE subscript
"RTN","PSSDSEXC",283,0)
 I '$O(^TMP($J,PSSDBASE,"OUT","EXCEPTIONS",PSSDWEX3,"")) Q
"RTN","PSSDSEXC",284,0)
 N PSSDWEZ4,PSSDWEZ5,PSSDWEZ6,PSSDWEZ7
"RTN","PSSDSEXC",285,0)
 S PSSDWEZ4=0 F PSSDWEZ7=0:0 S PSSDWEZ7=$O(^TMP($J,PSSDBASE,"OUT","EXCEPTIONS","DOSE",PSSDWEX3,PSSDWEZ7)) Q:'PSSDWEZ7  S PSSDWEZ4=PSSDWEZ7
"RTN","PSSDSEXC",286,0)
 S PSSDWEZ4=PSSDWEZ4+1
"RTN","PSSDSEXC",287,0)
 F PSSDWEZ5=0:0 S PSSDWEZ5=$O(^TMP($J,PSSDBASE,"OUT","EXCEPTIONS",PSSDWEX3,PSSDWEZ5)) Q:'PSSDWEZ5  D
"RTN","PSSDSEXC",288,0)
 .S PSSDWEZ6=^TMP($J,PSSDBASE,"OUT","EXCEPTIONS",PSSDWEX3,PSSDWEZ5)
"RTN","PSSDSEXC",289,0)
 .S ^TMP($J,PSSDBASE,"OUT","EXCEPTIONS","DOSE",PSSDWEX3,PSSDWEZ4)=PSSDWEZ6
"RTN","PSSDSEXC",290,0)
 .I $P(PSSDWEZ6,"^",10)'="" S $P(^TMP($J,PSSDBASE,"OUT","EXCEPTIONS","DOSE",PSSDWEX3,PSSDWEZ4),"^",7)="Dosing Checks could not be performed for Drug: "_$P(PSSDBCAR(PSSDWEX3),"^",2)
"RTN","PSSDSEXC",291,0)
 .S PSSDWEZ4=PSSDWEZ4+1
"RTN","PSSDSEXC",292,0)
 Q
"RTN","PSSDSEXC",293,0)
 ;
"RTN","PSSDSEXC",294,0)
 ;
"RTN","PSSDSEXC",295,0)
ADJU ;Set Adjusted Dose message
"RTN","PSSDSEXC",296,0)
 S:$G(PSSDBFDB(PSSDBLP,"ADJ_MSG"))'="" PSSDBADJ(PSSDBFDB(PSSDBLP,"RX_NUM"))=$G(PSSDBFDB(PSSDBLP,"ADJ_MSG"))
"RTN","PSSDSEXC",297,0)
 Q
"RTN","PSSDSEXC",298,0)
 ;
"RTN","PSSDSEXC",299,0)
 ;
"RTN","PSSDSEXC",300,0)
DSQ ;
"RTN","PSSDSEXC",301,0)
 S ^TMP($J,PSSDBASE,"OUT","EXCEPTIONS","DOSE",PSSDWEX3,PSSDWEX4)=^TMP($J,PSSDBASE,"OUT","EXCEPTIONS","DOSE",PSSDWEX3,PSSDWEX4)_$P(PSSDWEX6,";;",3)
"RTN","PSSDSEXC",302,0)
 I $G(PSSDBCAX(PSSDWEX3,PSSDWEX5))="" Q
"RTN","PSSDSEXC",303,0)
 S ^TMP($J,PSSDBASE,"OUT","EXCEPTIONS","DOSE",PSSDWEX3,PSSDWEX4)=^TMP($J,PSSDBASE,"OUT","EXCEPTIONS","DOSE",PSSDWEX3,PSSDWEX4)_$G(PSSDBCAX(PSSDWEX3,PSSDWEX5))
"RTN","PSSDSEXC",304,0)
 Q
"UP",55,55.01,-1)
55^IV
"UP",55,55.01,0)
55.01
"UP",55,55.06,-1)
55^5
"UP",55,55.06,0)
55.06
"VER")
8.0^22.0
"^DD",55,55.01,157,0)
DISPLAY STATUS^S^DF:Discontinued due to edit by a provider through CPRS;DP:Discontinued by provider through CPRS;DD:Auto discontinued due to death;DA:Auto discontinued due to patient movements;HP:Placed on hold by provider through CPRS;^0;25^Q
"^DD",55,55.01,157,3)
This code is to capture the source of which the action occurred.
"^DD",55,55.01,157,21,0)
^.001^5^5^3090814^^
"^DD",55,55.01,157,21,1,0)
This field captures how a "Discontinued" action occurred and this code is 
"^DD",55,55.01,157,21,2,0)
displayed on the short patient profile if the Stop Date/Time is within the
"^DD",55,55.01,157,21,3,0)
time specified in the Inpatient Ward Parameter file (#59.6) or the
"^DD",55,55.01,157,21,4,0)
Pharmacy System file (#59.7). The "HP" is to display on the profile if the
"^DD",55,55.01,157,21,5,0)
order was placed on hold by provider through CPRS.
"^DD",55,55.01,157,"DT")
3090814
"^DD",55,55.06,136,0)
DISPLAY STATUS^S^DF:Discontinued due to edit by a provider through CPRS;DP:Discontinued by provider through CPRS;DD:Auto discontinued due to death;DA:Auto discontinued due to patient movements;HP:Placed on hold by provider through CPRS;^0;28^Q
"^DD",55,55.06,136,3)
This code is to capture the source of which the action occurred.
"^DD",55,55.06,136,21,0)
^^5^5^3090814^
"^DD",55,55.06,136,21,1,0)
This field captures how a "Discontinued" action occurred and this code is 
"^DD",55,55.06,136,21,2,0)
displayed on the short patient profile if the Stop Date/Time is within the
"^DD",55,55.06,136,21,3,0)
time specified in the Inpatient Ward Parameter file (#59.6) or the
"^DD",55,55.06,136,21,4,0)
Pharmacy System file (#59.7). The "HP" is to display on the profile if the
"^DD",55,55.06,136,21,5,0)
order was placed on hold by provider through CPRS.
"^DD",55,55.06,136,"DT")
3090814
"^DD",59.7,59.7,26.8,0)
HOURS OF RECENTLY DC/EXPIRED^NJ3,0^^26;8^K:+X'=X!(X>120)!(X<1)!(X?.E1"."1N.N) X
"^DD",59.7,59.7,26.8,3)
Enter a number between 1 and 120.  Any orders discontinued/expired within the hours specified here will be displayed on the patient profile.
"^DD",59.7,59.7,26.8,21,0)
^^3^3^3060707^
"^DD",59.7,59.7,26.8,21,1,0)
The Inpatient Meds profiles will display the recently 
"^DD",59.7,59.7,26.8,21,2,0)
discontinued/expired orders that fall within the hours specified in this 
"^DD",59.7,59.7,26.8,21,3,0)
field.
"^DD",59.7,59.7,26.8,"DT")
3090121
"BLD",7149,6)
^141
**END**
**END**
