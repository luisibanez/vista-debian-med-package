Released PSO*7*361 SEQ #339
Extracted from mail message
**KIDS**:PSO*7.0*361^

**INSTALL NAME**
PSO*7.0*361
"BLD",8913,0)
PSO*7.0*361^OUTPATIENT PHARMACY^0^3120417^y
"BLD",8913,1,0)
^^3^3^3101029^
"BLD",8913,1,1,0)
CMOP MESSAGE IN ACTIVITY LOG IS CUT-OFF.
"BLD",8913,1,2,0)
VIEW PRESCRIPTIONS MENU OPTION DOES NOT SHOW CONJUNCTION OF EXCEPT FOR 
"BLD",8913,1,3,0)
COMPLEX ORDERS.
"BLD",8913,4,0)
^9.64PA^^
"BLD",8913,6)
3^
"BLD",8913,6.3)
8
"BLD",8913,"ABPKG")
n
"BLD",8913,"KRN",0)
^9.67PA^779.2^20
"BLD",8913,"KRN",.4,0)
.4
"BLD",8913,"KRN",.401,0)
.401
"BLD",8913,"KRN",.402,0)
.402
"BLD",8913,"KRN",.403,0)
.403
"BLD",8913,"KRN",.5,0)
.5
"BLD",8913,"KRN",.84,0)
.84
"BLD",8913,"KRN",3.6,0)
3.6
"BLD",8913,"KRN",3.8,0)
3.8
"BLD",8913,"KRN",9.2,0)
9.2
"BLD",8913,"KRN",9.8,0)
9.8
"BLD",8913,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",8913,"KRN",9.8,"NM",1,0)
PSORXVW2^^0^B44478716
"BLD",8913,"KRN",9.8,"NM","B","PSORXVW2",1)

"BLD",8913,"KRN",19,0)
19
"BLD",8913,"KRN",19,"NM",0)
^9.68A^^
"BLD",8913,"KRN",19.1,0)
19.1
"BLD",8913,"KRN",19.1,"NM",0)
^9.68A^^
"BLD",8913,"KRN",101,0)
101
"BLD",8913,"KRN",101,"NM",0)
^9.68A^^
"BLD",8913,"KRN",409.61,0)
409.61
"BLD",8913,"KRN",409.61,"NM",0)
^9.68A^^
"BLD",8913,"KRN",771,0)
771
"BLD",8913,"KRN",771,"NM",0)
^9.68A^^
"BLD",8913,"KRN",779.2,0)
779.2
"BLD",8913,"KRN",779.2,"NM",0)
^9.68A^^
"BLD",8913,"KRN",870,0)
870
"BLD",8913,"KRN",870,"NM",0)
^9.68A^^
"BLD",8913,"KRN",8989.51,0)
8989.51
"BLD",8913,"KRN",8989.51,"NM",0)
^9.68A^^
"BLD",8913,"KRN",8989.52,0)
8989.52
"BLD",8913,"KRN",8989.52,"NM",0)
^9.68A^^
"BLD",8913,"KRN",8994,0)
8994
"BLD",8913,"KRN",8994,"NM",0)
^9.68A^^
"BLD",8913,"KRN","B",.4,.4)

"BLD",8913,"KRN","B",.401,.401)

"BLD",8913,"KRN","B",.402,.402)

"BLD",8913,"KRN","B",.403,.403)

"BLD",8913,"KRN","B",.5,.5)

"BLD",8913,"KRN","B",.84,.84)

"BLD",8913,"KRN","B",3.6,3.6)

"BLD",8913,"KRN","B",3.8,3.8)

"BLD",8913,"KRN","B",9.2,9.2)

"BLD",8913,"KRN","B",9.8,9.8)

"BLD",8913,"KRN","B",19,19)

"BLD",8913,"KRN","B",19.1,19.1)

"BLD",8913,"KRN","B",101,101)

"BLD",8913,"KRN","B",409.61,409.61)

"BLD",8913,"KRN","B",771,771)

"BLD",8913,"KRN","B",779.2,779.2)

"BLD",8913,"KRN","B",870,870)

"BLD",8913,"KRN","B",8989.51,8989.51)

"BLD",8913,"KRN","B",8989.52,8989.52)

"BLD",8913,"KRN","B",8994,8994)

"BLD",8913,"QDEF")
^^^^NO^^^^^^NO
"BLD",8913,"QUES",0)
^9.62^^
"BLD",8913,"REQB",0)
^9.611^1^1
"BLD",8913,"REQB",1,0)
PSO*7.0*367^2
"BLD",8913,"REQB","B","PSO*7.0*367",1)

"MBREQ")
0
"PKG",206,-1)
1^1
"PKG",206,0)
OUTPATIENT PHARMACY^PSO^OUTPATIENT LABELS, PROFILE, INVENTORY, PRESCRIPTIONS
"PKG",206,20,0)
^9.402P^^
"PKG",206,22,0)
^9.49I^1^1
"PKG",206,22,1,0)
7.0^3021122^3021202^66481
"PKG",206,22,1,"PAH",1,0)
361^3120417^66485
"PKG",206,22,1,"PAH",1,1,0)
^^3^3^3120417
"PKG",206,22,1,"PAH",1,1,1,0)
CMOP MESSAGE IN ACTIVITY LOG IS CUT-OFF.
"PKG",206,22,1,"PAH",1,1,2,0)
VIEW PRESCRIPTIONS MENU OPTION DOES NOT SHOW CONJUNCTION OF EXCEPT FOR 
"PKG",206,22,1,"PAH",1,1,3,0)
COMPLEX ORDERS.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","PSORXVW2")
0^1^B44478716^B44714099
"RTN","PSORXVW2",1,0)
PSORXVW2 ;ISC-BIRM/PDW - view cmop activity logs ; 4/13/12 2:54pm
"RTN","PSORXVW2",2,0)
 ;;7.0;OUTPATIENT PHARMACY;**33,71,117,152,148,367,361**;DEC 1997;Build 8
"RTN","PSORXVW2",3,0)
 ; External Referrence to file # 550.2 granted by DBIA 2231
"RTN","PSORXVW2",4,0)
 ;External reference to ^PS(50.607 supported by DBIA 2221
"RTN","PSORXVW2",5,0)
 ;External reference to ^PS(51.2 supported by DBIA 2226
"RTN","PSORXVW2",6,0)
 ;External reference to File ^PS(55 supported by DBIA 2228
"RTN","PSORXVW2",7,0)
 ;External reference to VA(200 supported by DBIA 10060
"RTN","PSORXVW2",8,0)
 ;get data from event multiple
"RTN","PSORXVW2",9,0)
 S IEN=IEN+1,^TMP("PSOAL",$J,IEN,0)=" "
"RTN","PSORXVW2",10,0)
 S IEN=IEN+1,^TMP("PSOAL",$J,IEN,0)="CMOP Event Log:",IEN=IEN+1
"RTN","PSORXVW2",11,0)
 S ^TMP("PSOAL",$J,IEN,0)="Date/Time     Rx Ref  TRN-Order     Stat       Comments",IEN=IEN+1,$P(^TMP("PSOAL",$J,IEN,0),"=",79)="="
"RTN","PSORXVW2",12,0)
 F PSXA=0:0 S PSXA=$O(^PSRX(DA,4,PSXA)) Q:'PSXA  S PSX4=^(PSXA,0) D FIX D
"RTN","PSORXVW2",13,0)
 . S IEN=IEN+1,^TMP("PSOAL",$J,IEN,0)=$$DATE(DA,$P(PSX4,"^",3))_" "_$S('PSXFIL:"Orig",1:"Ref "_$G(PSXFIL))_"  "_$G(PSXBREF)
"RTN","PSORXVW2",14,0)
 . S ^TMP("PSOAL",$J,IEN,0)=^TMP("PSOAL",$J,IEN,0)_"      "_$G(PSXT)_"  "_$S($G(PSXTST)=3:$E($P($G(PSXCAN),"^"),1,35),$G(PSXNDC)'="":"NDC: "_PSXNDC,1:"")
"RTN","PSORXVW2",15,0)
 . I PSXCAR'=""!(PSXID'="") D
"RTN","PSORXVW2",16,0)
 . . N X S X="Carrier: "_$E(PSXCAR,1,21)
"RTN","PSORXVW2",17,0)
 . . S X=$$SETSTR^VALM1("Pkg ID: ",X,32,8)
"RTN","PSORXVW2",18,0)
 . . S X=X_PSXID
"RTN","PSORXVW2",19,0)
 . . S IEN=IEN+1,^TMP("PSOAL",$J,IEN,0)=X
"RTN","PSORXVW2",20,0)
 . ; FDA Medication Guide
"RTN","PSORXVW2",21,0)
 . N FDAMGDOC S FDAMGDOC=$G(^PSRX(DA,4,PSXA,"FDA"))
"RTN","PSORXVW2",22,0)
 . I FDAMGDOC'="" D
"RTN","PSORXVW2",23,0)
 . . S IEN=IEN+1,^TMP("PSOAL",$J,IEN,0)="FDA Med Guide: "_$E(FDAMGDOC,1,61)
"RTN","PSORXVW2",24,0)
 . . I $L(FDAMGDOC)>61 D
"RTN","PSORXVW2",25,0)
 . . . F  Q:$E(FDAMGDOC,62,999)=""  D
"RTN","PSORXVW2",26,0)
 . . . . S FDAMGDOC=$E(FDAMGDOC,62,999),IEN=IEN+1
"RTN","PSORXVW2",27,0)
 . . . . S ^TMP("PSOAL",$J,IEN,0)=$E(FDAMGDOC,1,61)
"RTN","PSORXVW2",28,0)
 D:$O(^PSRX(DA,5,0))
"RTN","PSORXVW2",29,0)
 .S IEN=IEN+1,^TMP("PSOAL",$J,IEN,0)=" "
"RTN","PSORXVW2",30,0)
 .S IEN=IEN+1,^TMP("PSOAL",$J,IEN,0)="CMOP Lot#/Expiration Date Log:",IEN=IEN+1
"RTN","PSORXVW2",31,0)
 .S ^TMP("PSOAL",$J,IEN,0)="Rx Ref               Lot #               Expiration Date"
"RTN","PSORXVW2",32,0)
 .S IEN=IEN+1,$P(^TMP("PSOAL",$J,IEN,0),"=",79)="="
"RTN","PSORXVW2",33,0)
 .F PSXZ=0:0 S PSXZ=$O(^PSRX(DA,5,PSXZ)) Q:PSXZ']""  S PSXLOT=^(PSXZ,0) D
"RTN","PSORXVW2",34,0)
 ..S EXPDT=$P(PSXLOT,U,2)
"RTN","PSORXVW2",35,0)
 ..S EXPDT=$E(EXPDT,4,5)_"/"_$E(EXPDT,6,7)_"/"_$E(EXPDT,2,3)
"RTN","PSORXVW2",36,0)
 ..S RXREF=$P(PSXLOT,U,3)
"RTN","PSORXVW2",37,0)
 ..S IEN=IEN+1,^TMP("PSOAL",$J,IEN,0)=$S(RXREF=0:"Orig",RXREF>0:"Ref "_RXREF,1:"")_"               "_$P(PSXLOT,U)_"              "_EXPDT
"RTN","PSORXVW2",38,0)
FINI K ANS,Y,%,I,Z,PSXLOT,PSXL,PSX4,F,PSXA,C,ER,PSXFIL,PSX4,PSXREA,PSXVID
"RTN","PSORXVW2",39,0)
 K PSXREL,PSXTRDT,PSXT,PSXLOC,DTOUT,DUOUT,PSXSEQ,PSXA,PSXML,P,I1,I2
"RTN","PSORXVW2",40,0)
 K PSXP,PSXE,PSXE1,PSXERR,PSXBAT,ZD1,ZD2,ZDT,RXREF,PSXZ,PSXTST,PSXTCAN
"RTN","PSORXVW2",41,0)
 K PSXRDT,PSXNDC,PSXM,PSXL1,PSXCAN,PSX1,EXPDT,PSXBREF,RXREF1
"RTN","PSORXVW2",42,0)
 K PSXCAR,PSXID
"RTN","PSORXVW2",43,0)
 Q
"RTN","PSORXVW2",44,0)
FIX ; translate data
"RTN","PSORXVW2",45,0)
 S PSXBAT=$P(PSX4,U),PSXSEQ=$P(PSX4,U,2)
"RTN","PSORXVW2",46,0)
 S PSXFIL=$P(PSX4,U,3),PSXTST=$P(PSX4,U,4)
"RTN","PSORXVW2",47,0)
 S PSXBREF=$G(PSXBAT)_"-"_$G(PSXSEQ)
"RTN","PSORXVW2",48,0)
 S PSXZT=$P(PSX4,U,5),PSXZT1=$P(PSXZT,"."),PSXZT2=$P(PSXZT,".",2)
"RTN","PSORXVW2",49,0)
 I $G(PSXZT)']"" K PSXZT,PSXZT1,PSXZT2 G F1
"RTN","PSORXVW2",50,0)
 S PSXZT2=$E(PSXZT2,1,4)
"RTN","PSORXVW2",51,0)
 S PSXZT1=$E(PSXZT1,4,5)_"/"_$E(PSXZT1,6,7)_"/"_$E(PSXZT1,2,3)
"RTN","PSORXVW2",52,0)
 S PSXTCAN=PSXZT1_"@"_PSXZT2 K PSXZT1,PSXZT2,PSXZT
"RTN","PSORXVW2",53,0)
F1 S PSXNDC=$P(PSX4,U,8)
"RTN","PSORXVW2",54,0)
 S PSXCAN=$G(^PSRX(DA,4,PSXA,1))
"RTN","PSORXVW2",55,0)
 S PSXCAR=$P(PSXCAN,U,3)
"RTN","PSORXVW2",56,0)
 S PSXID=$P(PSXCAN,U,4)
"RTN","PSORXVW2",57,0)
 ; get cmop site
"RTN","PSORXVW2",58,0)
 S I1=PSXBAT   ; S I1=$O(^PSX(550.2,"B",PSXBAT,""))
"RTN","PSORXVW2",59,0)
P1 ; get transmission d/t
"RTN","PSORXVW2",60,0)
 S ZDT=$P(^PSX(550.2,I1,0),U,6),ZD1=$P(ZDT,"."),ZD2=$P(ZDT,".",2)
"RTN","PSORXVW2",61,0)
 S ZD2=$E(ZD2,1,4)
"RTN","PSORXVW2",62,0)
 S ZD1=$E(ZD1,4,5)_"/"_$E(ZD1,6,7)_"/"_$E(ZD1,2,3)
"RTN","PSORXVW2",63,0)
 S PSXTRDT=ZD1_"@"_ZD2
"RTN","PSORXVW2",64,0)
Q1 S:PSXTST=0 PSXT="TRAN"
"RTN","PSORXVW2",65,0)
 S PSXRDT="Not Released"
"RTN","PSORXVW2",66,0)
 I PSXTST=1 D
"RTN","PSORXVW2",67,0)
 .I PSXFIL>0,('$D(^PSRX(DA,1,PSXFIL,0))) S PSXT="Disp Refill Deleted" Q
"RTN","PSORXVW2",68,0)
 .S PSX1=$S(PSXFIL=0:$P(^PSRX(DA,2),"^",13),1:$P(^PSRX(DA,1,PSXFIL,0),"^",18))
"RTN","PSORXVW2",69,0)
 .Q:PSX1']""
"RTN","PSORXVW2",70,0)
 .I PSX1'["." S PSXRDT=$E(PSX1,4,5)_"/"_$E(PSX1,6,7)_"/"_$E(PSX1,2,3) G SKIP
"RTN","PSORXVW2",71,0)
 .S ZR=PSX1,ZR1=$P(ZR,"."),ZR2=$P(ZR,".",2)
"RTN","PSORXVW2",72,0)
 .S ZR2=$E(ZR2,1,4)
"RTN","PSORXVW2",73,0)
 .S PSXRDT=$E(ZR1,4,5)_"/"_$E(ZR1,6,7)_"/"_$E(ZR1,2,3)_"@"_ZR2
"RTN","PSORXVW2",74,0)
 .K ZR,ZR1,ZR2
"RTN","PSORXVW2",75,0)
SKIP .S PSXT="DISP"
"RTN","PSORXVW2",76,0)
 S:PSXTST=2 PSXT="RTRN"
"RTN","PSORXVW2",77,0)
 S:PSXTST=3 PSXT="NDISP"
"RTN","PSORXVW2",78,0)
 Q
"RTN","PSORXVW2",79,0)
 ;
"RTN","PSORXVW2",80,0)
COPAY ;Copay activity log
"RTN","PSORXVW2",81,0)
 S IEN=IEN+1,^TMP("PSOAL",$J,IEN,0)=" ",IEN=IEN+1,^TMP("PSOAL",$J,IEN,0)="Copay Activity Log:"
"RTN","PSORXVW2",82,0)
 S IEN=IEN+1,^TMP("PSOAL",$J,IEN,0)="#   Date        Reason               Rx Ref         Initiator Of Activity",IEN=IEN+1,$P(^TMP("PSOAL",$J,IEN,0),"=",79)="="
"RTN","PSORXVW2",83,0)
 I '$O(^PSRX(DA,"COPAY",0)) S IEN=IEN+1,^TMP("PSOAL",$J,IEN,0)="There's NO Copay activity to report" Q
"RTN","PSORXVW2",84,0)
 F N=0:0 S N=$O(^PSRX(DA,"COPAY",N)) Q:'N  S P1=^(N,0),DTT=P1\1 D DAT^PSORXVW1 D
"RTN","PSORXVW2",85,0)
 .S IEN=IEN+1,^TMP("PSOAL",$J,IEN,0)=N_"   "_DAT_"    ",$P(RN," ",21)=" ",REA=$P(P1,"^",2),REA=$F("ARICE",REA)-1
"RTN","PSORXVW2",86,0)
 .I REA D
"RTN","PSORXVW2",87,0)
 ..S STA=$P("ANNUAL CAP REACHED^COPAY RESET^IB-INITIATED COPAY^REMOVE COPAY CHARGE^RX EDITED^","^",REA)
"RTN","PSORXVW2",88,0)
 ..S ^TMP("PSOAL",$J,IEN,0)=^TMP("PSOAL",$J,IEN,0)_STA_$E(RN,$L(STA)+1,21)
"RTN","PSORXVW2",89,0)
 .E  S $P(STA," ",21)=" ",^TMP("PSOAL",$J,IEN,0)=^TMP("PSOAL",$J,IEN,0)_STA
"RTN","PSORXVW2",90,0)
 .K STA,RN S $P(RN," ",15)=" ",RF=+$P(P1,"^",4)
"RTN","PSORXVW2",91,0)
 .S RFT=$S(RF>0:"REFILL "_RF,1:"ORIGINAL")
"RTN","PSORXVW2",92,0)
 .S ^TMP("PSOAL",$J,IEN,0)=^TMP("PSOAL",$J,IEN,0)_RFT_$E(RN,$L(RFT)+1,15)_$S($D(^VA(200,+$P(P1,"^",3),0)):$P(^(0),"^"),1:$P(P1,"^",3))
"RTN","PSORXVW2",93,0)
 .S:$P(P1,"^",5)]""!($P(P1,"^",6)]"")!($P(P1,"^",7)]"") IEN=IEN+1,^TMP("PSOAL",$J,IEN,0)="Comment: "_$P(P1,"^",5)
"RTN","PSORXVW2",94,0)
 .I $P(P1,"^",6)]"" S ^TMP("PSOAL",$J,IEN,0)=^TMP("PSOAL",$J,IEN,0)_"  Old value="_$P(P1,"^",6)_"   New value="_$P(P1,"^",7)
"RTN","PSORXVW2",95,0)
 Q
"RTN","PSORXVW2",96,0)
DOSE ;displays dosing instruction for both simple and complex Rxs.
"RTN","PSORXVW2",97,0)
 I '$O(^PSRX(DA,6,0)) S IEN=IEN+1,^TMP("PSOAL",$J,IEN,0)="              Dosage: " Q
"RTN","PSORXVW2",98,0)
 F I=0:0 S I=$O(^PSRX(DA,6,I)) Q:'I  S DOSE=^PSRX(DA,6,I,0) D DOSE1
"RTN","PSORXVW2",99,0)
 K DOSE
"RTN","PSORXVW2",100,0)
 Q
"RTN","PSORXVW2",101,0)
DOSE1 ;
"RTN","PSORXVW2",102,0)
 I '$P(DOSE,"^",2),$P(DOSE,"^",9)]"" S IEN=IEN+1,^TMP("PSOAL",$J,IEN,0)="                Verb: "_$P(DOSE,"^",9)
"RTN","PSORXVW2",103,0)
 S IEN=IEN+1,^TMP("PSOAL",$J,IEN,0)="             *Dosage: "_$S($E($P(DOSE,"^"),1)="."&($P(DOSE,"^",2)):"0",1:"")_$P(DOSE,"^")_$S($P(DOSE,"^",3):$P(^PS(50.607,$P(DOSE,"^",3),0),"^"),1:"")
"RTN","PSORXVW2",104,0)
 I '$P(DOSE,"^",2),$P($G(^PS(55,PSODFN,"LAN")),"^") S IEN=IEN+1,^TMP("PSOAL",$J,IEN,0)="   Oth. Lang. Dosage: "_$G(^PSRX(DA,6,I,1))
"RTN","PSORXVW2",105,0)
 I $P(DOSE,"^",2),$P(DOSE,"^",9)]"" S IEN=IEN+1,^TMP("PSOAL",$J,IEN,0)="                Verb: "_$P(DOSE,"^",9)
"RTN","PSORXVW2",106,0)
 I $P(DOSE,"^",2) S IEN=IEN+1,^TMP("PSOAL",$J,IEN,0)="      Dispense Units: "_$S($E($P(DOSE,"^",2),1)=".":"0",1:"")_$P(DOSE,"^",2)
"RTN","PSORXVW2",107,0)
 I $P(DOSE,"^",2) S IEN=IEN+1,^TMP("PSOAL",$J,IEN,0)="                Noun: "_$P(DOSE,"^",4)
"RTN","PSORXVW2",108,0)
 S IEN=IEN+1,^TMP("PSOAL",$J,IEN,0)="              *Route: "_$S($P(DOSE,"^",7):$P(^PS(51.2,$P(DOSE,"^",7),0),"^"),1:"")
"RTN","PSORXVW2",109,0)
 S IEN=IEN+1,^TMP("PSOAL",$J,IEN,0)="           *Schedule: "_$P(DOSE,"^",8)
"RTN","PSORXVW2",110,0)
 I $P(DOSE,"^",5)]"" S IEN=IEN+1,^TMP("PSOAL",$J,IEN,0)="           *Duration: "_$P(DOSE,"^",5)_" ("_$S($P(DOSE,"^",5)["M":"MINUTES",$P(DOSE,"^",5)["H":"HOURS",$P(DOSE,"^",5)["L":"MONTHS",$P(DOSE,"^",5)["W":"WEEKS",1:"DAYS")_")"
"RTN","PSORXVW2",111,0)
 I $P(DOSE,"^",6)]"" S IEN=IEN+1,^TMP("PSOAL",$J,IEN,0)="        *Conjunction: "_$S($P(DOSE,"^",6)="A":"AND",$P(DOSE,"^",6)="T":"THEN",$P(DOSE,"^",6)="X":"EXCEPT",1:"")
"RTN","PSORXVW2",112,0)
 Q
"RTN","PSORXVW2",113,0)
 ;
"RTN","PSORXVW2",114,0)
DATE(RX,RFL) ;
"RTN","PSORXVW2",115,0)
 I $G(PSXTST)=3,$G(PSXTCAN)'="" Q PSXTCAN
"RTN","PSORXVW2",116,0)
 I $G(PSXTST)=1 Q $G(PSXRDT)
"RTN","PSORXVW2",117,0)
 I $G(PSXTST)=3,'RFL,$$GET1^DIQ(52,RX,32.1,"I") Q $$FMTE^XLFDT($$GET1^DIQ(52,RX,32.1,"I"),2)
"RTN","PSORXVW2",118,0)
 I $G(PSXTST)=3,RFL,$$GET1^DIQ(52.1,RFL_","_RX,5,"I") Q $$FMTE^XLFDT($$GET1^DIQ(52.1,RFL_","_RX,32.1,"I"),2)
"RTN","PSORXVW2",119,0)
 Q $G(PSXTRDT)
"RTN","PSORXVW2",120,0)
 ;
"RTN","PSORXVW2",121,0)
DAT S DAT="",DTT=DTT\1 Q:DTT'?7N  S DAT=$E(DTT,4,5)_"/"_$E(DTT,6,7)_"/"_$E(DTT,2,3)
"RTN","PSORXVW2",122,0)
 Q
"VER")
8.0^22.0
"BLD",8913,6)
^339
**END**
**END**
