Released GMRY*4*6 SEQ #5
Extracted from mail message
**KIDS**:GMRY*4.0*6^

**INSTALL NAME**
GMRY*4.0*6
"BLD",5017,0)
GMRY*4.0*6^GEN. MED. REC. - I/O^0^3041004^y
"BLD",5017,1,0)
^^2^2^3041004^^
"BLD",5017,1,1,0)
This patch will correct two problems within the 
"BLD",5017,1,2,0)
INTAKE/OUTPUT application as reported.
"BLD",5017,4,0)
^9.64PA^^
"BLD",5017,"ABPKG")
n
"BLD",5017,"KRN",0)
^9.67PA^8989.52^19
"BLD",5017,"KRN",.4,0)
.4
"BLD",5017,"KRN",.401,0)
.401
"BLD",5017,"KRN",.402,0)
.402
"BLD",5017,"KRN",.403,0)
.403
"BLD",5017,"KRN",.5,0)
.5
"BLD",5017,"KRN",.84,0)
.84
"BLD",5017,"KRN",3.6,0)
3.6
"BLD",5017,"KRN",3.8,0)
3.8
"BLD",5017,"KRN",9.2,0)
9.2
"BLD",5017,"KRN",9.8,0)
9.8
"BLD",5017,"KRN",9.8,"NM",0)
^9.68A^3^3
"BLD",5017,"KRN",9.8,"NM",1,0)
GMRYUT0^^0^B21891813
"BLD",5017,"KRN",9.8,"NM",2,0)
GMRYUT8^^0^B22079220
"BLD",5017,"KRN",9.8,"NM",3,0)
GMRYED4^^0^B22182286
"BLD",5017,"KRN",9.8,"NM","B","GMRYED4",3)

"BLD",5017,"KRN",9.8,"NM","B","GMRYUT0",1)

"BLD",5017,"KRN",9.8,"NM","B","GMRYUT8",2)

"BLD",5017,"KRN",19,0)
19
"BLD",5017,"KRN",19.1,0)
19.1
"BLD",5017,"KRN",101,0)
101
"BLD",5017,"KRN",409.61,0)
409.61
"BLD",5017,"KRN",771,0)
771
"BLD",5017,"KRN",870,0)
870
"BLD",5017,"KRN",8989.51,0)
8989.51
"BLD",5017,"KRN",8989.52,0)
8989.52
"BLD",5017,"KRN",8994,0)
8994
"BLD",5017,"KRN","B",.4,.4)

"BLD",5017,"KRN","B",.401,.401)

"BLD",5017,"KRN","B",.402,.402)

"BLD",5017,"KRN","B",.403,.403)

"BLD",5017,"KRN","B",.5,.5)

"BLD",5017,"KRN","B",.84,.84)

"BLD",5017,"KRN","B",3.6,3.6)

"BLD",5017,"KRN","B",3.8,3.8)

"BLD",5017,"KRN","B",9.2,9.2)

"BLD",5017,"KRN","B",9.8,9.8)

"BLD",5017,"KRN","B",19,19)

"BLD",5017,"KRN","B",19.1,19.1)

"BLD",5017,"KRN","B",101,101)

"BLD",5017,"KRN","B",409.61,409.61)

"BLD",5017,"KRN","B",771,771)

"BLD",5017,"KRN","B",870,870)

"BLD",5017,"KRN","B",8989.51,8989.51)

"BLD",5017,"KRN","B",8989.52,8989.52)

"BLD",5017,"KRN","B",8994,8994)

"BLD",5017,"QUES",0)
^9.62^^
"BLD",5017,"REQB",0)
^9.611^1^1
"BLD",5017,"REQB",1,0)
GMRY*4.0*3^1
"BLD",5017,"REQB","B","GMRY*4.0*3",1)

"MBREQ")
0
"PKG",502,-1)
1^1
"PKG",502,0)
GEN. MED. REC. - I/O^GMRY^Intake/Output Module of General Medical Record.
"PKG",502,20,0)
^9.402P^^
"PKG",502,22,0)
^9.49I^1^1
"PKG",502,22,1,0)
4.0^2970425^2970827^10958
"PKG",502,22,1,"PAH",1,0)
6^3041004^1611
"PKG",502,22,1,"PAH",1,1,0)
^^2^2^3041004
"PKG",502,22,1,"PAH",1,1,1,0)
This patch will correct tWo problem within the 
"PKG",502,22,1,"PAH",1,1,2,0)
INTAKE/OUTPUT application as reported.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
3
"RTN","GMRYED4")
0^3^B22182286
"RTN","GMRYED4",1,0)
GMRYED4 ;HIRMFO/YH - INTRAVENOUS INFUSION PROTOCOL ;10/16/96
"RTN","GMRYED4",2,0)
 ;;4.0;Intake/Output;**6**;Apr 25, 1997
"RTN","GMRYED4",3,0)
HANG ;DC CURRENT SOLUTION/ADD THE SAME SOLUTION - CONTINUED
"RTN","GMRYED4",4,0)
 D DC^GMRYED6 Q:GMROUT!($G(GMRZ(1))="")  S GDCDT=$P(^GMR(126,DA(1),"IV",DA,0),"^",9),GMRVTYP=$P(^(0),"^",4)
"RTN","GMRYED4",5,0)
 S GMRDEL="",GX=GDCDT I '$D(^GMR(126,DA(1),"IV",DA,"IN",0)) S GLABEL="",GHLOC=GMRHLOC D DC^GMRYUT0 G ADD
"RTN","GMRYED4",6,0)
 I '$D(^GMR(126,DA(1),"IV",DA,"IN","C")) S GLABEL="",GHLOC=GMRHLOC D DC^GMRYUT0 G ADD
"RTN","GMRYED4",7,0)
 S GDT=$O(^GMR(126,DA(1),"IV",DA,"IN","C",0)) I GDT'>0 S GLABEL="",GHLOC=GMRHLOC D DC^GMRYUT0 G ADD
"RTN","GMRYED4",8,0)
 S GGDA=$O(^GMR(126,DA(1),"IV",DA,"IN","C",GDT,0)) I GGDA>0 W !,"Last reading for AMOUNT LEFT is "_$P(^GMR(126,DA(1),"IV",DA,"IN",GGDA,0),"^",2)_" mls"
"RTN","GMRYED4",9,0)
 S GLABEL="",GHLOC=GMRHLOC
"RTN","GMRYED4",10,0)
 I ($P(^GMR(126,DA(1),"IV",DA,"IN",GGDA,0),"^",2)>0) D
"RTN","GMRYED4",11,0)
 .S GHLOC=GMRHLOC,GLABEL="" D DC^GMRYUT0 S GGDA=+$P(^GMR(126,DA(1),"IV",DA,"IN",0),"^",3)
"RTN","GMRYED4",12,0)
 . ;; GMRY*4*6 - RJS  TEST FOR GMROUT
"RTN","GMRYED4",13,0)
 .Q:GMROUT
"RTN","GMRYED4",14,0)
 .D IVINTK^GMRYUT8 W !,"Total solution absorbed for this bottle: "_$S($P(^GMR(126,DA(1),"IV",DA,"IN",GGDA,0),"^",2)["*":"UNKNOWN",1:($P(GDATA,"^",5)-GTOTAL)_" mls"),!
"RTN","GMRYED4",15,0)
ADD I GMROUT S $P(^GMR(126,DFN,"IV",DA(1),0),"^",9)="",$P(^(0),"^",10)="" W !,"DC canceled!!!",! Q
"RTN","GMRYED4",16,0)
 D ^GMRYSTCA Q:GMROUT
"RTN","GMRYED4",17,0)
 I GMRVTYP["L" S (GMRZ(2),GMRZ(3))="*"
"RTN","GMRYED4",18,0)
 W !!,"Adding "_GMRZ_"  ("_GMRZ(1)_")  "_$S(+GMRZ(2)>0:GMRZ(2)_" mls ",1:""),! S:GMRZ(3)'>0 GMRZ(3)=""
"RTN","GMRYED4",19,0)
RATE W !,"Infusion rate(ml/hr)"_$S(GMRZ(3)'="":" "_GMRZ(3)_" //",1:": ") S X="" R X:DTIME Q:'$T!(X["^")  I X'=""&(X'?1.3N) S X="" D HELP G RATE
"RTN","GMRYED4",20,0)
 S:X="" X=GMRZ(3) S:X=""!(X=0) X="" I X'=""&((X<0)!(X>999)) D HELP G RATE
"RTN","GMRYED4",21,0)
RATE1 W !,"New infusion rate is "_$S(X>0:X,1:"UNKNOWN") ;S %=1 D YN^DICN W:%=0 !!,"If the infusion rate is not correct then enter N(o).",! G:%=0 RATE1 Q:%<0  G:%'=1 RATE S GMRZ(3)=X
"RTN","GMRYED4",22,0)
QUICK K DD S GSAVE=GMRVTYP,(X,GX)=GDCDT,DLAYGO=126.03,DA(1)=DFN,DIC="^GMR(126,"_DA(1)_",""IV"",",DIC(0)="ML" D WAIT^GMRYUT0 Q:GMROUT  D FILE^DICN L -^GMR(126,DFN) K DIC,DLAYGO,DD S DA=+Y,GMRVTYP=GSAVE Q:Y'>0
"RTN","GMRYED4",23,0)
 S DIE="^GMR(126,"_DA(1)_",""IV"",",DR="2///^S X=GMRZ;3///^S X=GMRZ(1);4//^S X=GMRZ(2);11///^S X=GMRZ(3);6///^S X=""`""_DUZ;7///^S X=""`""_GMRHLOC;1///^S X=GSITE;17///^S X=GCATH(1)"
"RTN","GMRYED4",24,0)
 D WAIT^GMRYUT0 I 'GMROUT D ^DIE L -^GMR(126,DFN)
"RTN","GMRYED4",25,0)
 K DIE,DR Q
"RTN","GMRYED4",26,0)
 ;
"RTN","GMRYED4",27,0)
SELSITE ;SELECT IV SITE TO EDIT
"RTN","GMRYED4",28,0)
 S GSITE="",GMRX=0 F  S GSITE=$O(^GMR(126,DFN,"IV","SITE",GSITE)) Q:GSITE=""  S GMRY=0,GDT=0 F  S GDT=$O(^GMR(126,DFN,"IV","SITE",GSITE,GDT)) Q:GDT'>0!(GMRY>0)  S GDA=$O(^(GDT,0)) D CHCKDC
"RTN","GMRYED4",29,0)
 Q
"RTN","GMRYED4",30,0)
SEL S GSITE="" I GN=0 S GMROUT=1 K GN,GMRDATA Q
"RTN","GMRYED4",31,0)
 D SEL^GMRYUT13 Q
"RTN","GMRYED4",32,0)
CHCKDC I $P(^GMR(126,DFN,"IV",GDA,0),"^",9)="" S GMRX=GMRX+1,GMRY=1,GMRX(GMRX)=GSITE_"^"_GDA Q
"RTN","GMRYED4",33,0)
 Q
"RTN","GMRYED4",34,0)
LISTQUES ;
"RTN","GMRYED4",35,0)
 W !,"IV is defined as IV line/port/lock",! S GNN=0 F I=1:1 S X=$T(QUES+I) Q:X=""  S GMRW=$P(X,";;",2) W !,$P(GMRW,"^"),!,?5,$P(GMRW,"^",3)
"RTN","GMRYED4",36,0)
 Q
"RTN","GMRYED4",37,0)
HELP W !!,"Enter a number between 0 and 999 at which the infusion takes place",!,"0 means that the rate is UNKNOWN",! Q
"RTN","GMRYED4",38,0)
LISTOP ;
"RTN","GMRYED4",39,0)
 F I=1:1:9 S X=$T(QUES+I) Q:X=""  S GMRW=$P(X,";;",2),GNN($E(GMRW))=$E(GMRW,5,99),GNN=+GMRW W !,$P(GMRW,"^")
"RTN","GMRYED4",40,0)
QUES ;
"RTN","GMRYED4",41,0)
 ;;1.  Start IV^STARTIV^Start a new IV line or heparin/saline lock/port. 
"RTN","GMRYED4",42,0)
 ;;2.  Solution: Replace/DC/Convert/Finish Solution^ADDSOL^DC current solution then replace a new solution to the selected IV line or convert the IV according to the user's choice.
"RTN","GMRYED4",43,0)
 ;;3.  Replace Same Solution^HANG^Replace the same solution to a selected IV.
"RTN","GMRYED4",44,0)
 ;;4.  DC IV/Lock/Port and Site^DCIV^Remove IV/lock/port from a selected IV site.
"RTN","GMRYED4",45,0)
 ;;5.  Care/Maintenance/Flush^MAINTN^Check site condition, dressing change, tube change and flush.
"RTN","GMRYED4",46,0)
 ;;6.  Add Additional Solution(s)^ADDONLY^Add additional solution(s) without discontinuing an existing one.
"RTN","GMRYED4",47,0)
 ;;7.  Restart DC'd IV^RESTART^Restart an IV which was DC'd due to infiltration or other reasons.
"RTN","GMRYED4",48,0)
 ;;8.  Adjust Infusion Rate^TITER^Adjust infusion rate for a selected IV.
"RTN","GMRYED4",49,0)
 ;;9.  Flush^FLUSH^Flush all IV line(s) for a selected infusion site.
"RTN","GMRYUT0")
0^1^B21891813
"RTN","GMRYUT0",1,0)
GMRYUT0 ;HIRMFO/YH - PATIENT I/O UTILITIES - PATIENT SEARCH AND IV DISPLAY ;2/12/91
"RTN","GMRYUT0",2,0)
 ;;4.0;Intake/Output;**3,6**;Apr 25, 1997
"RTN","GMRYUT0",3,0)
PATDAT ;SELECT PATIENT
"RTN","GMRYUT0",4,0)
 S DIC(0)="AEQMZ",DIC="^DPT(" D ^DIC K DIC S DFN=+Y I DFN'>0 S GMROUT=1 Q
"RTN","GMRYUT0",5,0)
PT D 1^VADPT S GMRWARD(1)=$S($D(GMRVWLO):GMRVWLO,1:$P(VAIN(4),"^",2)),GMRWARD=$P(VAIN(4),"^"),GMRVADM=$P(VAIN(7),"^",2),GMRAGE=$P(VADM(4),"^"),SSN=$P(VADM(2),"^",2),GMRDIAG=$P(VAIN(9),"^"),GMRBED=$P($P(VAIN(5),"^"),"-",1,2)
"RTN","GMRYUT0",6,0)
 S GMRSEX=$P(VADM(5),"^",2),GMRBTH=$P(VADM(3),"^",2),GMRNAM=$P(VADM(1),"^"),GMRHLOC=+$P(VAIN(4),"^") D KVAR^VADPT K VA I $D(^DIC(42,+GMRHLOC,44)) S GMRHLOC=+$P(^(44),"^") Q:GMRHLOC>0
"RTN","GMRYUT0",7,0)
 Q
"RTN","GMRYUT0",8,0)
HOSP S DIC("A")="Select Hospital Location: ",DIC=44,DIC(0)="AEMQ",DIC("S")="I $P(^(0),U,3)'=""Z""" D ^DIC K DIC I Y'>0 S GMROUT=1 Q
"RTN","GMRYUT0",9,0)
 S GMRHLOC=+Y Q
"RTN","GMRYUT0",10,0)
LISTIV ;LIST CURRENT IV LINES
"RTN","GMRYUT0",11,0)
 K GMRDATA S GMRVN=0,GN=0 F II=0:0 S GMRVN=$O(^GMR(126,DA,"IV","C",GMRVN)) Q:GMRVN'>0  D SAVEIV
"RTN","GMRYUT0",12,0)
 S GN(1)=GN I GN=0 W !!,"There is no IV running for this patient.",! G Q
"RTN","GMRYUT0",13,0)
Q K GTITR,GDATA,GMRVTYP,GMRVS Q
"RTN","GMRYUT0",14,0)
SAVEIV ;SAVE IV LINES IN ARRAY FOR SELECTION
"RTN","GMRYUT0",15,0)
 S GIV=0 F II=0:0 S GIV=$O(^GMR(126,DA,"IV","C",GMRVN,GIV)) Q:GIV'>0  I GMRDC=2!(GMRDC=0&($P($G(^GMR(126,DA,"IV",GIV,0)),"^",9)="")) S GDATA=^(0),GMRVTYP=$P(GDATA,"^",4),GMRVS=$P(GDATA,"^",2) I GMRVTYP'="",GMRVS'="" S GN=GN+1 D SET
"RTN","GMRYUT0",16,0)
 Q
"RTN","GMRYUT0",17,0)
SET S GMRDATA(GN)=9999999-GMRVN_"^"_GIV_"^"_GMRVTYP_"^"_GMRVS_"^"_$P(GDATA,"^",9)_"^"_$P(GDATA,"^",3)_"^"_$P(GDATA,"^",5)_"^"_$S($P(GDATA,"^",6)'="":"Started",1:$S($P(GDATA,"^",3)["LOCK":"Converted",1:"Added"))
"RTN","GMRYUT0",18,0)
 S GTITR=$P(GDATA,"^",12) I $D(^GMR(126,DA,"IV",GIV,"TITR","C")) D
"RTN","GMRYUT0",19,0)
 .S I=$O(^GMR(126,DA,"IV",GIV,"TITR","C",0)) I I>0 S I(1)=$O(^GMR(126,DA,"IV",GIV,"TITR","C",I,0)) S GTITR=$S($D(^GMR(126,DA,"IV",GIV,"TITR",I(1),0)):$P(^(0),"^",2),1:GTITR)
"RTN","GMRYUT0",20,0)
 K I S GMRDATA(GN)=GMRDATA(GN)_"^"_$S(GTITR>0:GTITR_" ml/hr",1:"")
"RTN","GMRYUT0",21,0)
 S GSITE=GMRVS,GSITE(GSITE)="" D FINDCA^GMRYCATH(.GSITE) S GMRDATA(GN)=GMRDATA(GN)_"^"_GSITE(GSITE)_"^"_$G(^GMR(126,DFN,"IV",GIV,3))
"RTN","GMRYUT0",22,0)
 Q
"RTN","GMRYUT0",23,0)
SETDT I '(GMRDT>GMREND) S GDA=$O(^GMR(126,DA(1),"IV",DA,"IN","B",GMRDT,0)) S GN=GN+1,GMRDATA(GN)=GMRDT_"^"_GDA_"^"_GIN(GDA)
"RTN","GMRYUT0",24,0)
 Q
"RTN","GMRYUT0",25,0)
WAIT ;
"RTN","GMRYUT0",26,0)
 L +^GMR(126,DFN):0 I '$T W !!,"This patient's I/O records are being updated by someone else",!,"please try this patient later",!! S GMROUT=1 Q
"RTN","GMRYUT0",27,0)
 Q
"RTN","GMRYUT0",28,0)
KILLV K GMRNO,GMRVNM,II,GMRVN,GMRDATA,GDTEND,GMRVP,GMRVS,GMRVSTP,GMRVSTR,GMRVL,GMRVTYP,GADDI,GBOTT,GSOL,GSTREN,GIV,GIVDT,GWRITE,GFLAG
"RTN","GMRYUT0",29,0)
 ;; GMRY*4*6  -  RJS  ADDED GFLAG TO KILLV
"RTN","GMRYUT0",30,0)
 Q
"RTN","GMRYUT0",31,0)
SELIV ;LIST IV  FOR THE SELECTED IV LINE
"RTN","GMRYUT0",32,0)
 D IVINTK^GMRYUT8 I $D(GTOTAL) W !,?5,"Total amount absorbed: "_$S(GSTAR'="":GSTAR,1:($P(^GMR(126,DA(1),"IV",DA,0),"^",5)-GTOTAL)_" mls"),!!
"RTN","GMRYUT0",33,0)
 K GMRDATA S (GDCIV,GN)=0,GX="",GMRDEL="",GMRDC=1 I $D(^GMR(126,DA(1),"IV",DA,"IN",0)) S GMRDT=0 F  S GMRDT=$O(^GMR(126,DA(1),"IV",DA,"IN","B",GMRDT)) Q:GMRDT'>0  D SETDT
"RTN","GMRYUT0",34,0)
 S GN(1)=GN I '$D(GMRDATA) W !,?5,$C(7),"No intake records for this IV line within the last 48 hours" G DT
"RTN","GMRYUT0",35,0)
 I $D(GMRDATA) D SELECT^GMRYUT3 I $E(GX)="^" S DA=DFN G QIV
"RTN","GMRYUT0",36,0)
 D WARN I "Nn"[GX&(GX'="") S GX="" G DT
"RTN","GMRYUT0",37,0)
 I GX>0 S DA(2)=DA(1),DA(1)=DA,DA=+$P(GX,"^",2) G:DA'>0 QIV S GHLOC=$P($G(^GMR(126,DFN,"IV",DA(1),"IN",DA,0)),"^",5) D IV^GMRYUT8 S DA=DFN G QIV
"RTN","GMRYUT0",38,0)
DT S X="",GHLOC=GMRHLOC S %DT("A")="Please enter a new DATE/TIME: ",%DT="AETXRS",%DT(0)="-NOW" D ^%DT K %DT S (GX,X)=Y I Y<1 S X="" S DA=DFN G QIV
"RTN","GMRYUT0",39,0)
DC I '$D(^GMR(126,DA(1),"IV",DA,"IN",0)) S ^(0)="^126.313IDA^0^0"
"RTN","GMRYUT0",40,0)
 K DD S GSAVE=GMRVTYP,DLAYGO=126.313,X=GX,DA(2)=DA(1),DA(1)=DA,DIC="^GMR(126,"_DA(2)_",""IV"","_DA(1)_",""IN"",",DIC(0)="ML" D WAIT^GMRYUT0 D:'GMROUT FILE^DICN L:'GMROUT -^GMR(126,DFN)
"RTN","GMRYUT0",41,0)
 K DR,DIC,DLAYGO,DD S DA=+$G(Y),GMRVTYP=GSAVE I $G(Y)'>0 S GMROUT=1,DA=DA(1),DA(1)=DA(2) G QIV
"RTN","GMRYUT0",42,0)
 D IV^GMRYUT8
"RTN","GMRYUT0",43,0)
QIV W ! K GMRX,GHLOC,GX,GY,X,GMRDEL,GMRVOL,GMRDATA,GDATE,GMRDT,DIC,Y Q
"RTN","GMRYUT0",44,0)
WARN W !!,"If you modify your original remaining entry, (i.e. Amount Left),",!,"please check any other entries for possible inaccuracies",! Q
"RTN","GMRYUT8")
0^2^B22079220
"RTN","GMRYUT8",1,0)
GMRYUT8 ;HIRMFO/YH - IV/LOCK/PORT ENTER/EDIT ;2/12/91
"RTN","GMRYUT8",2,0)
 ;;4.0;Intake/Output;**6**;Apr 25, 1997
"RTN","GMRYUT8",3,0)
IV ;EDIT OR DELETE IV RECORD
"RTN","GMRYUT8",4,0)
 S GX(1)=+GX,GX(2)="",GDCREAS=$P(^GMR(126,DA(2),"IV",DA(1),0),"^",11)
"RTN","GMRYUT8",5,0)
REASK S GREC(1)=0 I GMRDEL="@" S %=1 W !!,"Are you sure you want to delete" D YN^DICN S:%<0 GMROUT=1 W:%=0 !!,"Enter N(o) if you do not want to delete this record or '^' to quit.",! G:%=0 REASK D:%=1 KILLRC K % Q
"RTN","GMRYUT8",6,0)
REDIT S Y=+GX X ^DD("DD")
"RTN","GMRYUT8",7,0)
 W:GMRVTYP'="L" !!,"Enter "_$S(GLABEL'="":GLABEL_" intake dated ",1:"solution left in the container on ")_$P(Y,":",1,2),!,?5,"Enter * for AMOUNT LEFT if amount of solution absorbed is unknown.",!,?10,"Unit mls is not required.",!
"RTN","GMRYUT8",8,0)
 S DIE="^GMR(126,"_DA(2)_",""IV"","_DA(1)_",""IN"","
"RTN","GMRYUT8",9,0)
 S DR="S GMRZZZ="""" S:GMRVTYP=""P""!(GMRVTYP=""L""!(GDCREAS[""INFUSED"")) GMRZZZ=0;"_$S(GMRVTYP="L":"1///",1:"1//")_"^S X=GMRZZZ;3///^S X=""`""_DUZ;4///^S X=""`""_GHLOC;" D WAIT^GMRYUT0 I GMROUT K DIE,DR Q
"RTN","GMRYUT8",10,0)
 ;; GMRY*4*6 - RJS  ADDED THE DA SETS
"RTN","GMRYUT8",11,0)
 D ^DIE L -^GMR(126,DFN) K DIE,DR S GMRDA=$P(^GMR(126,DA(2),"IV",DA(1),"IN",DA,0),"^",2),GREC(1)=DA I GMRDA="" D KILLRC S GMROUT=1,DA=DA(1),DA(1)=DA(2) K GIN Q
"RTN","GMRYUT8",12,0)
 K GIN S DA=DA(1),DA(1)=DA(2) Q:GMRVTYP="L"
"RTN","GMRYUT8",13,0)
 I $D(^GMR(126,DA(1),"IV",DA,0)) D IVINTK W !!,"Intake for this period: "_$S($P(^GMR(126,DFN,"IV",DA,"IN",GREC(1),0),"^",2)="*":"unknown",1:$P(GIN(+GX),"^",2)_" mls   ")
"RTN","GMRYUT8",14,0)
 I $D(GIN(+GX)),$P(GIN(+GX),"^",2)<0 W !!,"ERROR ENTRY!!!" S $P(^GMR(126,DFN,"IV",DA,"IN",GREC(1),0),"^",2)="",DA(2)=DA(1),DA(1)=DA,DA=GREC(1) G REDIT
"RTN","GMRYUT8",15,0)
 ;; GMRY*4*6 - RJS  ADDED THE DA SETS
"RTN","GMRYUT8",16,0)
 S %=1 D YN^DICN I %<0 S DA(2)=DA(1),DA(1)=DA,DA=GREC(1) D KILLRC S GMROUT=1,DA=DA(1),DA(1)=DA(2) K DA(2) Q
"RTN","GMRYUT8",17,0)
 I %'=1 S $P(^GMR(126,DFN,"IV",DA,"IN",GREC(1),0),"^",2)="",DA(2)=DA(1),DA(1)=DA,DA=GREC(1) G REDIT
"RTN","GMRYUT8",18,0)
 Q
"RTN","GMRYUT8",19,0)
KILLRC S DIK="^GMR(126,"_DA(2)_",""IV"","_DA(1)_",""IN""," D ^DIK K DIK S Y=GX(1) X ^DD("DD") W !!,GLABEL_" Entered on "_$P(Y,":",1,2)_" has been deleted!!!",! S GREC(1)=0,$P(^GMR(126,DFN,"IV",DA(1),0),"^",9)="" Q
"RTN","GMRYUT8",20,0)
IVINTK ;CALCULATE IV INTAKE FOR EACH IV INTAKE RECORD
"RTN","GMRYUT8",21,0)
 S:'$D(^GMR(126,DA(1),"IV",DA,0)) GMROUT=1 Q:GMROUT  K GIN S (GTOTAL(1),GTOTAL)=+$P(^GMR(126,DA(1),"IV",DA,0),"^",5),GSOL=$P(^(0),"^",3)
"RTN","GMRYUT8",22,0)
 S GDT=0,GSTAR="" F  S GDT=$O(^GMR(126,DA(1),"IV",DA,"IN","B",GDT)) Q:GDT'>0  S GDA=$O(^GMR(126,DA(1),"IV",DA,"IN","B",GDT,0)) Q:GDA'>0  D SETGIN
"RTN","GMRYUT8",23,0)
 K GINTAKE,GDT,GDA Q
"RTN","GMRYUT8",24,0)
 Q
"RTN","GMRYUT8",25,0)
SETGIN S GLEFT=$P(^GMR(126,DA(1),"IV",DA,"IN",GDA,0),"^",2),GXX=^(0)
"RTN","GMRYUT8",26,0)
 S GINTAKE=$S($E(GLEFT)=".":GTOTAL-GLEFT,$A($E(GLEFT))<48!($A($E(GLEFT))>57):0,1:GTOTAL-GLEFT),GTOTAL=GTOTAL-GINTAKE,(GIN(GDT),GIN(GDA))=GLEFT_"^"_GINTAKE_"^"_$P(GXX,"^",4)_"^"_GSOL S:GLEFT["*" GSTAR="unknown" K GXX Q
"RTN","GMRYUT8",27,0)
LOCK ;CONVERT TO LOCK/PORT
"RTN","GMRYUT8",28,0)
 S GHLOC=GMRHLOC K DD S X=+GX,DLAYGO=126.03,DA(1)=DFN,DIC="^GMR(126,"_DA(1)_",""IV"",",DIC(0)="ML" D WAIT^GMRYUT0 Q:GMROUT  D FILE^DICN L -^GMR(126,DFN) K DIC,DLAYGO,DD S DA=+Y Q:Y'>0!GMROUT
"RTN","GMRYUT8",29,0)
 S DIE="^GMR(126,"_DA(1)_",""IV"",",DR="2///^S X=GMRZ;3///^S X=GMRZ(1);4///^S X=GMRZ(2);11///^S X=GMRZ(3);6///^S X=""`""_DUZ;7///^S X=""`""_GHLOC;1///^S X=GSITE;17///^S X=GCATH(1)"
"RTN","GMRYUT8",30,0)
 D WAIT^GMRYUT0 D:'GMROUT ^DIE K DIE,DR L:'GMROUT -^GMR(126,DFN) Q
"RTN","GMRYUT8",31,0)
MOREDRN ;ENTER MORE THAN ONE DRAINAGE DATA
"RTN","GMRYUT8",32,0)
 K DD S DLAYGO=126.02,X=+GX,DA(1)=DFN,DIC="^GMR(126,"_DA(1)_","""_GNANS_""",",DIC(0)="ML" D WAIT^GMRYUT0 Q:GMROUT  D FILE^DICN L -^GMR(126,DFN) K DIC,DLAYGO,DD S DA=+Y S:Y'>0 GMROUT=1 Q
"RTN","GMRYUT8",33,0)
DC ;DC IV FROM IV INTAKE
"RTN","GMRYUT8",34,0)
 S GDATA=^GMR(126,DFN,"IV",DA,0),GDT=$P(GDATA,"^"),GTYPE=$P(GDATA,"^",4) W !!,"Discontinue ",?5,$P(GDATA,"^",3)_"  "_$S(GTYPE'["L":$P(GDATA,"^",5)_" mls ("_GTYPE_") ",1:"")_$P(GDATA,"^",2)
"RTN","GMRYUT8",35,0)
 S Y=GDT X ^DD("DD") W "   started on "_$P(Y,":",1,2),!
"RTN","GMRYUT8",36,0)
 S GDCDT=+GX,DIE="^GMR(126,"_DA(1)_",""IV"",",DR="8///^S X=+GX;9///^S X=""`""_DUZ;10///^D DCREASON^GMRYUT11" D WAIT^GMRYUT0 I 'GMROUT D ^DIE L -^GMR(126,DFN)
"RTN","GMRYUT8",37,0)
 K DIE,DR Q
"VER")
8.0^22.0
**END**
**END**
