Released TIU*1*269 SEQ #247
Extracted from mail message
**KIDS**:TIU*1.0*269^

**INSTALL NAME**
TIU*1.0*269
"BLD",9111,0)
TIU*1.0*269^TEXT INTEGRATION UTILITIES^0^3120703^y
"BLD",9111,1,0)
^^1^1^3120629^
"BLD",9111,1,1,0)
This patch will address an undefined error - <UNDEFINED>PRNTSCRN+5^TIURA2
"BLD",9111,4,0)
^9.64PA^^
"BLD",9111,6.3)
5
"BLD",9111,"ABPKG")
n
"BLD",9111,"KRN",0)
^9.67PA^779.2^20
"BLD",9111,"KRN",.4,0)
.4
"BLD",9111,"KRN",.401,0)
.401
"BLD",9111,"KRN",.402,0)
.402
"BLD",9111,"KRN",.403,0)
.403
"BLD",9111,"KRN",.5,0)
.5
"BLD",9111,"KRN",.84,0)
.84
"BLD",9111,"KRN",3.6,0)
3.6
"BLD",9111,"KRN",3.8,0)
3.8
"BLD",9111,"KRN",9.2,0)
9.2
"BLD",9111,"KRN",9.8,0)
9.8
"BLD",9111,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",9111,"KRN",9.8,"NM",1,0)
TIURA2^^0^B34038320
"BLD",9111,"KRN",9.8,"NM","B","TIURA2",1)

"BLD",9111,"KRN",19,0)
19
"BLD",9111,"KRN",19.1,0)
19.1
"BLD",9111,"KRN",101,0)
101
"BLD",9111,"KRN",409.61,0)
409.61
"BLD",9111,"KRN",771,0)
771
"BLD",9111,"KRN",779.2,0)
779.2
"BLD",9111,"KRN",870,0)
870
"BLD",9111,"KRN",8989.51,0)
8989.51
"BLD",9111,"KRN",8989.52,0)
8989.52
"BLD",9111,"KRN",8994,0)
8994
"BLD",9111,"KRN","B",.4,.4)

"BLD",9111,"KRN","B",.401,.401)

"BLD",9111,"KRN","B",.402,.402)

"BLD",9111,"KRN","B",.403,.403)

"BLD",9111,"KRN","B",.5,.5)

"BLD",9111,"KRN","B",.84,.84)

"BLD",9111,"KRN","B",3.6,3.6)

"BLD",9111,"KRN","B",3.8,3.8)

"BLD",9111,"KRN","B",9.2,9.2)

"BLD",9111,"KRN","B",9.8,9.8)

"BLD",9111,"KRN","B",19,19)

"BLD",9111,"KRN","B",19.1,19.1)

"BLD",9111,"KRN","B",101,101)

"BLD",9111,"KRN","B",409.61,409.61)

"BLD",9111,"KRN","B",771,771)

"BLD",9111,"KRN","B",779.2,779.2)

"BLD",9111,"KRN","B",870,870)

"BLD",9111,"KRN","B",8989.51,8989.51)

"BLD",9111,"KRN","B",8989.52,8989.52)

"BLD",9111,"KRN","B",8994,8994)

"BLD",9111,"QDEF")
^^^^NO^^^^^^NO
"BLD",9111,"QUES",0)
^9.62^^
"BLD",9111,"REQB",0)
^9.611^1^1
"BLD",9111,"REQB",1,0)
TIU*1.0*182^2
"BLD",9111,"REQB","B","TIU*1.0*182",1)

"MBREQ")
0
"PKG",470,-1)
1^1
"PKG",470,0)
TEXT INTEGRATION UTILITIES^TIU^Text Integration Utilities 
"PKG",470,20,0)
^9.402P^^
"PKG",470,22,0)
^9.49I^1^1
"PKG",470,22,1,0)
1.0^3010801^3010806^66481
"PKG",470,22,1,"PAH",1,0)
269^3120703
"PKG",470,22,1,"PAH",1,1,0)
^^1^1^3120703
"PKG",470,22,1,"PAH",1,1,1,0)
This patch will address an undefined error - <UNDEFINED>PRNTSCRN+5^TIURA2
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","TIURA2")
0^1^B34038320^B33326183
"RTN","TIURA2",1,0)
TIURA2 ; SLC/JER - More review screen actions ; 6/29/12 9:02am
"RTN","TIURA2",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;**88,58,100,123,112,182,269**;Jun 20, 1997;Build 5
"RTN","TIURA2",3,0)
 ; 6/20/00: Moved DISPLAY, BROWSE, & BROWS1 from TIURA to TIURA2
"RTN","TIURA2",4,0)
DISPLAY ; Detailed Display
"RTN","TIURA2",5,0)
 N TIUDA,TIUD,TIUDATA,TIUI,Y,DIROUT,TIUQUIT,RSTRCTD
"RTN","TIURA2",6,0)
 I '$D(VALMY) D EN^VALM2(XQORNOD(0))
"RTN","TIURA2",7,0)
 S TIUI=0
"RTN","TIURA2",8,0)
 F  S TIUI=$O(VALMY(TIUI)) Q:+TIUI'>0  D  Q:$D(TIUQUIT)
"RTN","TIURA2",9,0)
 . N TIUVIEW
"RTN","TIURA2",10,0)
 . S TIUDATA=$G(^TMP("TIURIDX",$J,TIUI))
"RTN","TIURA2",11,0)
 . D CLEAR^VALM1
"RTN","TIURA2",12,0)
 . W !!,"Reviewing #",+TIUDATA
"RTN","TIURA2",13,0)
 . S TIUDA=+$P(TIUDATA,U,2)
"RTN","TIURA2",14,0)
 . S TIUVIEW=$$CANDO^TIULP(TIUDA,"VIEW")
"RTN","TIURA2",15,0)
 . I +TIUVIEW'>0 D  Q
"RTN","TIURA2",16,0)
 . . W !!,$C(7),$P(TIUVIEW,U,2),!
"RTN","TIURA2",17,0)
 . . I $$READ^TIUU("EA","RETURN to continue...") ; pause
"RTN","TIURA2",18,0)
 . . D RESTORE^VALM10(+TIUI)
"RTN","TIURA2",19,0)
 . S RSTRCTD=$$DOCRES^TIULRR(TIUDA)
"RTN","TIURA2",20,0)
 . I RSTRCTD D  Q
"RTN","TIURA2",21,0)
 . . W !!,$C(7),"Ok, no harm done...",!
"RTN","TIURA2",22,0)
 . . I $$READ^TIUU("EA","RETURN to continue...") ; pause
"RTN","TIURA2",23,0)
 . . D RESTORE^VALM10(+TIUI)
"RTN","TIURA2",24,0)
 . D EN^TIUAUDIT
"RTN","TIURA2",25,0)
 . I +$G(TIUQUIT) D FIXLSTNW^TIULM Q
"RTN","TIURA2",26,0)
 . I TIUI'=$P($G(TIUGLINK),U,2) D RESTORE^VALM10(+TIUI) ; See rtn TIURL
"RTN","TIURA2",27,0)
 K VALMY S VALMBCK="R"
"RTN","TIURA2",28,0)
 Q
"RTN","TIURA2",29,0)
BROWSE(TIULTMP) ; Browse selected documents
"RTN","TIURA2",30,0)
 ; TIULTMP is list template name
"RTN","TIURA2",31,0)
 N TIUDA,DFN,TIU,TIUCHNG,TIUDATA,TIUI,Y,DIROUT,TIUQUIT
"RTN","TIURA2",32,0)
 N TIUGDATA
"RTN","TIURA2",33,0)
 I '$D(VALMY) D EN^VALM2(XQORNOD(0))
"RTN","TIURA2",34,0)
 S TIUI=0
"RTN","TIURA2",35,0)
 F  S TIUI=$O(VALMY(TIUI)) Q:+TIUI'>0  D  Q:$D(TIUQUIT)
"RTN","TIURA2",36,0)
 . N TIUVIEW,TIUGACT,RSTRCTD
"RTN","TIURA2",37,0)
 . S TIUDATA=$G(^TMP("TIURIDX",$J,TIUI))
"RTN","TIURA2",38,0)
 . S TIUDA=+$P(TIUDATA,U,2)
"RTN","TIURA2",39,0)
 . S TIUGDATA=$G(^TMP("TIUR",$J,"IDDATA",TIUDA)) ; ID note/entry
"RTN","TIURA2",40,0)
 . D CLEAR^VALM1
"RTN","TIURA2",41,0)
 . W !!,"Reviewing Item #",TIUI
"RTN","TIURA2",42,0)
 . S RSTRCTD=$$DOCRES^TIULRR(TIUDA)
"RTN","TIURA2",43,0)
 . I RSTRCTD D  Q
"RTN","TIURA2",44,0)
 . . W !!,$C(7),"Ok, no harm done...",!
"RTN","TIURA2",45,0)
 . . I $$READ^TIUU("EA","RETURN to continue...") ; pause
"RTN","TIURA2",46,0)
 . D BROWS1(TIULTMP,TIUDA,TIUGDATA)
"RTN","TIURA2",47,0)
 ; -- Update or Rebuild list: --
"RTN","TIURA2",48,0)
 I $G(TIUCHNG("DELETE"))!$G(TIUCHNG("ADDM")) S TIUCHNG("RBLD")=1
"RTN","TIURA2",49,0)
 S TIUCHNG("UPDATE")=1 ; default
"RTN","TIURA2",50,0)
 D UPRBLD^TIURL(.TIUCHNG,.VALMY) K VALMY
"RTN","TIURA2",51,0)
 S VALMBCK="R"
"RTN","TIURA2",52,0)
 Q
"RTN","TIURA2",53,0)
GETSORT(PRMSORT,EXPSORT) ; Get order for ID entries
"RTN","TIURA2",54,0)
 Q $S($G(EXPSORT)'="":EXPSORT,1:PRMSORT)
"RTN","TIURA2",55,0)
 ;
"RTN","TIURA2",56,0)
BROWS1(TIULTMP,TIUDA,TIUGDATA) ; Browse single document
"RTN","TIURA2",57,0)
 ;  Calls EN^VALM
"RTN","TIURA2",58,0)
 N %DT,C,D0,DIQ2,FINISH,TIU,TIUVIEW
"RTN","TIURA2",59,0)
 I '$D(TIUGDATA) S TIUGDATA=$$IDDATA^TIURECL1(TIUDA)
"RTN","TIURA2",60,0)
 I TIULTMP="TIU COMPLETE NOTES",$P(TIUGDATA,U,2) W !!,"You are completing the PARENT ENTRY of this interdisciplinary note."
"RTN","TIURA2",61,0)
 I '$P(TIUGDATA,U,2) D  Q:+TIUVIEW'>0  ;TIU*1*123
"RTN","TIURA2",62,0)
 . S TIUVIEW=$$CANDO^TIULP(TIUDA,"VIEW")
"RTN","TIURA2",63,0)
 . I +TIUVIEW'>0 D
"RTN","TIURA2",64,0)
 . . W !!,$C(7),$P(TIUVIEW,U,2),!
"RTN","TIURA2",65,0)
 . . I $$READ^TIUU("EA","RETURN to continue...") ; pause
"RTN","TIURA2",66,0)
 I '$D(TIUPRM0)!'$D(TIUPRM1) D SETPARM^TIULE
"RTN","TIURA2",67,0)
 D EN^VALM(TIULTMP)
"RTN","TIURA2",68,0)
 K ^TMP("TIUVIEW",$J)
"RTN","TIURA2",69,0)
 Q
"RTN","TIURA2",70,0)
 ;
"RTN","TIURA2",71,0)
EXPAND ; Expand/Collapse ID notes, Addenda in lists
"RTN","TIURA2",72,0)
 N TIUDNM,TIULNM,TIUSTAT
"RTN","TIURA2",73,0)
 D:'$D(VALMY) EN^VALM2(XQORNOD(0))
"RTN","TIURA2",74,0)
 I $D(VALMY) D EC^TIURECL(.VALMY)
"RTN","TIURA2",75,0)
 W !,"Refreshing the list."
"RTN","TIURA2",76,0)
 K VALMY
"RTN","TIURA2",77,0)
 S VALMCNT=+$G(@VALMAR@(0))
"RTN","TIURA2",78,0)
 S VALMBCK="R"
"RTN","TIURA2",79,0)
 Q
"RTN","TIURA2",80,0)
 ;
"RTN","TIURA2",81,0)
PRNTSCRN(VALMY) ; Evaluate whether a record may be printed
"RTN","TIURA2",82,0)
 N TIUI S TIUI=""
"RTN","TIURA2",83,0)
 F  S TIUI=$O(VALMY(TIUI)) Q:+TIUI'>0  D  Q:$D(DIROUT)
"RTN","TIURA2",84,0)
 . N TIUPMTHD,TIUDTYP,TIUPFHDR,TIUPFNBR,TIUPGRP,TIUPRINT,TIUFLAG,RSTRCTD,TIUTYP
"RTN","TIURA2",85,0)
 . S RSTRCTD=0,TIUDATA=$G(^TMP("TIURIDX",$J,TIUI))
"RTN","TIURA2",86,0)
 . ; *269 vmp/djh - Check if file exists
"RTN","TIURA2",87,0)
 . S TIUDA=+$P(TIUDATA,U,2),TIUTYP=+$G(^TIU(8925,TIUDA,0))
"RTN","TIURA2",88,0)
 . Q:TIUTYP'>0
"RTN","TIURA2",89,0)
 . ; Evaluate whether user can print record
"RTN","TIURA2",90,0)
 . S TIUPRINT=$$CANDO^TIULP(TIUDA,"PRINT RECORD")
"RTN","TIURA2",91,0)
 . I +TIUPRINT'>0 D  Q
"RTN","TIURA2",92,0)
 . . W !!,"Item #",TIUI,": ",!,$P(TIUPRINT,U,2),!
"RTN","TIURA2",93,0)
 . . K VALMY(TIUI)
"RTN","TIURA2",94,0)
 . . I $$READ^TIUU("EA","RETURN to continue...")
"RTN","TIURA2",95,0)
 . ;-- Add Check for restricted record when available --
"RTN","TIURA2",96,0)
 . S DFN=+$P(^TIU(8925,TIUDA,0),U,2)
"RTN","TIURA2",97,0)
 . S RSTRCTD=$$PTRES^TIULRR(DFN)
"RTN","TIURA2",98,0)
 . I +RSTRCTD D  Q
"RTN","TIURA2",99,0)
 . . W !!,"Item #",TIUI," Removed from print list.",!
"RTN","TIURA2",100,0)
 . . K VALMY(TIUI)
"RTN","TIURA2",101,0)
 . . I $$READ^TIUU("EA","Press RETURN to continue...")
"RTN","TIURA2",102,0)
 . I +$G(TIUPFLG) S TIUFLAG=+$$CHARTONE^TIURA1(TIUDA)
"RTN","TIURA2",103,0)
 Q
"RTN","TIURA2",104,0)
DICTATED        ; Mark Document(s) "dictated"
"RTN","TIURA2",105,0)
 N TIUCHNG,TIUI,TIUY,Y,DIROUT
"RTN","TIURA2",106,0)
 I '$D(VALMY) D EN^VALM2(XQORNOD(0))
"RTN","TIURA2",107,0)
 S TIUI=0
"RTN","TIURA2",108,0)
 F  S TIUI=$O(VALMY(TIUI)) Q:+TIUI'>0  D  Q:$D(DIROUT)
"RTN","TIURA2",109,0)
 . N TIU,DFN,TIUDA,TIUDATA,RSTRCTD
"RTN","TIURA2",110,0)
 . S TIUDATA=$G(^TMP("TIURIDX",$J,TIUI))
"RTN","TIURA2",111,0)
 . S TIUDA=+$P(TIUDATA,U,2) S RSTRCTD=$$DOCRES^TIULRR(TIUDA)
"RTN","TIURA2",112,0)
 . I RSTRCTD D  Q
"RTN","TIURA2",113,0)
 . . W !!,$C(7),"Ok, no harm done...",!
"RTN","TIURA2",114,0)
 . . I $$READ^TIUU("EA","RETURN to continue...") ; pause
"RTN","TIURA2",115,0)
 . D EN^VALM("TIU DOCUMENT DICTATED")
"RTN","TIURA2",116,0)
 ; -- Update or Rebuild list: --
"RTN","TIURA2",117,0)
 S TIUCHNG("UPDATE")=1
"RTN","TIURA2",118,0)
 D UPRBLD^TIURL(.TIUCHNG,.VALMY) K VALMY
"RTN","TIURA2",119,0)
 S VALMBCK="R"
"RTN","TIURA2",120,0)
 Q
"RTN","TIURA2",121,0)
DICTATE1(TIUDA) ; Single record sign on chart
"RTN","TIURA2",122,0)
 N DICMSG D FULL^VALM1
"RTN","TIURA2",123,0)
 D DICT(TIUDA,.DICMSG)
"RTN","TIURA2",124,0)
 W !!,$G(DICMSG(1)),!,$G(DICMSG(2)),! H $S($D(DICMSG(0)):+DICMSG(0),1:3)
"RTN","TIURA2",125,0)
 Q
"RTN","TIURA2",126,0)
DICT(DA,MSG) ; Mark signed on chart. Edit on-chart signatures.
"RTN","TIURA2",127,0)
 N AUTHOR,DIE,DR,Y,TIUSTAT,EXPCSNR,ATTNDNG,TIUDA,TIUPRMT,TIU0,TIU12,TIU13
"RTN","TIURA2",128,0)
 S TIU0=$G(^TIU(8925,+DA,0)),TIU12=$G(^(12)),TIU13=$G(^(13))
"RTN","TIURA2",129,0)
 S TIUSTAT=$P(TIU0,U,5)
"RTN","TIURA2",130,0)
 S TIUPRMT=$S(TIUSTAT>1:"Edit Dictation Data? ",1:"Has this document been dictated? ")
"RTN","TIURA2",131,0)
 W ! S MSG=$$READ^TIUU("YAO",TIUPRMT,"NO") W !
"RTN","TIURA2",132,0)
 I 'MSG S TIUCHNG=0 G DICTX
"RTN","TIURA2",133,0)
 S TIUCHNG=1
"RTN","TIURA2",134,0)
 S AUTHOR=$$PERSNAME^TIULC1(+$P(TIU12,U,2))
"RTN","TIURA2",135,0)
 S EXPCSNR=$$PERSNAME^TIULC1(+$P(TIU12,U,8))
"RTN","TIURA2",136,0)
 S:+$P(TIU12,U,9) ATTNDNG=$$PERSNAME^TIULC1(+$P(TIU12,U,9))
"RTN","TIURA2",137,0)
 S DR="1202//^S X=AUTHOR;1307//^S X=$S(+$P(TIU13,U,7)'>0:""NOW"",1:$$DATE^TIULS(+$P(TIU13,U,7),""MM/DD/CCYY@HR:MIN:SEC""))"
"RTN","TIURA2",138,0)
 I $D(ATTNDNG) S DR=DR_";1209//^S X=ATTNDNG"
"RTN","TIURA2",139,0)
 E  I $D(EXPCSNR) S DR=DR_";1208//^S X=EXPCSNR"
"RTN","TIURA2",140,0)
 S DR=DR_";1204////^S X=$$WHOSIGNS^TIULC1(DA);1208////^S X=$$WHOCOSIG^TIULC1(DA)"
"RTN","TIURA2",141,0)
 S DIE=8925 D ^DIE
"RTN","TIURA2",142,0)
 S TIU0=$G(^TIU(8925,+DA,0)),TIU12=$G(^(12)),TIU13=$G(^(13))
"RTN","TIURA2",143,0)
 ;Toggle status between undictated and untranscribed, depending on Dict Date
"RTN","TIURA2",144,0)
 S DR=".05///^S X=$S(+$P(TIU13,U,7):""UNTRANSCRIBED"",1:""UNDICTATED"")",DIE=8925 D ^DIE
"RTN","TIURA2",145,0)
 D UPDTIRT^TIUDIRT(.TIU,+DA)
"RTN","TIURA2",146,0)
DICTX S MSG(1)="  Dictation data "_$S(TIUCHNG:"",1:"NOT ")_"changed."
"RTN","TIURA2",147,0)
 Q
"VER")
8.0^22.0
"BLD",9111,6)
^247
**END**
**END**
