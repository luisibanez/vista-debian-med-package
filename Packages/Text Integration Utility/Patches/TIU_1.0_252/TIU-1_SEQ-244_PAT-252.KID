Released TIU*1*252 SEQ #244
Extracted from mail message
**KIDS**:TIU*1.0*252^

**INSTALL NAME**
TIU*1.0*252
"BLD",7573,0)
TIU*1.0*252^TEXT INTEGRATION UTILITIES^0^3120117^y
"BLD",7573,1,0)
^^1^1^3091210^
"BLD",7573,1,1,0)
See TIU*1*252 in the National Patch Module.
"BLD",7573,4,0)
^9.64PA^^
"BLD",7573,6.3)
6
"BLD",7573,"ABPKG")
n
"BLD",7573,"KRN",0)
^9.67PA^779.2^20
"BLD",7573,"KRN",.4,0)
.4
"BLD",7573,"KRN",.401,0)
.401
"BLD",7573,"KRN",.402,0)
.402
"BLD",7573,"KRN",.403,0)
.403
"BLD",7573,"KRN",.5,0)
.5
"BLD",7573,"KRN",.84,0)
.84
"BLD",7573,"KRN",3.6,0)
3.6
"BLD",7573,"KRN",3.8,0)
3.8
"BLD",7573,"KRN",9.2,0)
9.2
"BLD",7573,"KRN",9.8,0)
9.8
"BLD",7573,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",7573,"KRN",9.8,"NM",1,0)
TIUSRVT2^^0^B14345619
"BLD",7573,"KRN",9.8,"NM","B","TIUSRVT2",1)

"BLD",7573,"KRN",19,0)
19
"BLD",7573,"KRN",19.1,0)
19.1
"BLD",7573,"KRN",101,0)
101
"BLD",7573,"KRN",409.61,0)
409.61
"BLD",7573,"KRN",771,0)
771
"BLD",7573,"KRN",779.2,0)
779.2
"BLD",7573,"KRN",870,0)
870
"BLD",7573,"KRN",8989.51,0)
8989.51
"BLD",7573,"KRN",8989.52,0)
8989.52
"BLD",7573,"KRN",8994,0)
8994
"BLD",7573,"KRN",8994,"NM",0)
^9.68A^1^1
"BLD",7573,"KRN",8994,"NM",1,0)
TIU TEMPLATE GET TEMPLATE^^0
"BLD",7573,"KRN",8994,"NM","B","TIU TEMPLATE GET TEMPLATE",1)

"BLD",7573,"KRN","B",.4,.4)

"BLD",7573,"KRN","B",.401,.401)

"BLD",7573,"KRN","B",.402,.402)

"BLD",7573,"KRN","B",.403,.403)

"BLD",7573,"KRN","B",.5,.5)

"BLD",7573,"KRN","B",.84,.84)

"BLD",7573,"KRN","B",3.6,3.6)

"BLD",7573,"KRN","B",3.8,3.8)

"BLD",7573,"KRN","B",9.2,9.2)

"BLD",7573,"KRN","B",9.8,9.8)

"BLD",7573,"KRN","B",19,19)

"BLD",7573,"KRN","B",19.1,19.1)

"BLD",7573,"KRN","B",101,101)

"BLD",7573,"KRN","B",409.61,409.61)

"BLD",7573,"KRN","B",771,771)

"BLD",7573,"KRN","B",779.2,779.2)

"BLD",7573,"KRN","B",870,870)

"BLD",7573,"KRN","B",8989.51,8989.51)

"BLD",7573,"KRN","B",8989.52,8989.52)

"BLD",7573,"KRN","B",8994,8994)

"BLD",7573,"QDEF")
^^^^^^^^^^YES
"BLD",7573,"QUES",0)
^9.62^^
"BLD",7573,"REQB",0)
^9.611^1^1
"BLD",7573,"REQB",1,0)
TIU*1.0*249^2
"BLD",7573,"REQB","B","TIU*1.0*249",1)

"KRN",8994,3159,-1)
0^1
"KRN",8994,3159,0)
TIU TEMPLATE GET TEMPLATE^GETTMPLT^TIUSRVT2^2^A
"KRN",8994,3159,1,0)
^8994.01^1^1^3090915^^^
"KRN",8994,3159,1,1,0)
This RPC gets basic attributes of a given TIU Template (file 8927).
"KRN",8994,3159,2,0)
^8994.02A^2^1
"KRN",8994,3159,2,2,0)
IEN^1^^1^1
"KRN",8994,3159,2,2,1,0)
^8994.021^2^2^3090915^^
"KRN",8994,3159,2,2,1,1,0)
This is the internal entry number in the TIU TEMPLATE FILE 8927 of the 
"KRN",8994,3159,2,2,1,2,0)
template.
"KRN",8994,3159,2,"B","IEN",2)

"KRN",8994,3159,2,"PARAMSEQ",1,2)

"KRN",8994,3159,3,0)
^^1^1^3090915^
"KRN",8994,3159,3,1,0)
Basic attributes of the given template are returned in '^'-delimited form.
"MBREQ")
0
"ORD",16,8994)
8994;16;1;;;;;;;RPCDEL^XPDIA1
"ORD",16,8994,0)
REMOTE PROCEDURE
"PKG",193,-1)
1^1
"PKG",193,0)
TEXT INTEGRATION UTILITIES^TIU^Text Integration Utilities 
"PKG",193,20,0)
^9.402P^^
"PKG",193,22,0)
^9.49I^1^1
"PKG",193,22,1,0)
1.0^3010321^3010321^11
"PKG",193,22,1,"PAH",1,0)
252^3120117^17
"PKG",193,22,1,"PAH",1,1,0)
^^1^1^3120117
"PKG",193,22,1,"PAH",1,1,1,0)
See TIU*1*252 in the National Patch Module.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","TIUSRVT2")
0^1^B14345619^B12280503
"RTN","TIUSRVT2",1,0)
TIUSRVT2 ; SLC/JM - Server functions for templates ;3/10/2011
"RTN","TIUSRVT2",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;**80,105,249,252**;Jun 20, 1997;Build 6
"RTN","TIUSRVT2",3,0)
TACCESS(TIUY,ROOT,USER,LOC) ;Returns Template Access level of User
"RTN","TIUSRVT2",4,0)
 ;
"RTN","TIUSRVT2",5,0)
 ;Return Values:
"RTN","TIUSRVT2",6,0)
 ;
"RTN","TIUSRVT2",7,0)
 ; 0 = FULL ACCESS
"RTN","TIUSRVT2",8,0)
 ; 1 = READ ONLY
"RTN","TIUSRVT2",9,0)
 ; 2 = NO ACCESS
"RTN","TIUSRVT2",10,0)
 ; 3 = SHARED TEMPLATES EDITOR - ACCESS PARAMETERS DO NOT APPLY
"RTN","TIUSRVT2",11,0)
 ;
"RTN","TIUSRVT2",12,0)
 I +ROOT D  Q:+TIUY
"RTN","TIUSRVT2",13,0)
 .D ISEDITOR^TIUSRVT(.TIUY,ROOT,USER)
"RTN","TIUSRVT2",14,0)
 .I +TIUY S TIUY=3
"RTN","TIUSRVT2",15,0)
 .E  S TIUY=0
"RTN","TIUSRVT2",16,0)
 S TIUY=$$GET^XPAR(USER_";VA(200,","TIU PERSONAL TEMPLATE ACCESS",1,"I") ;ICR 2263
"RTN","TIUSRVT2",17,0)
 I TIUY="" D
"RTN","TIUSRVT2",18,0)
 .N TIUCLLST,TIUERR,IDX,TMP
"RTN","TIUSRVT2",19,0)
 .D GETLST^XPAR(.TIUCLLST,"SYS","TIU TEMPLATE ACCESS BY CLASS","Q",.TIUERR) ;ICR 2263
"RTN","TIUSRVT2",20,0)
 .I TIUERR>0 Q
"RTN","TIUSRVT2",21,0)
 .S IDX=0
"RTN","TIUSRVT2",22,0)
 .F  S IDX=$O(TIUCLLST(IDX)) Q:'IDX  D
"RTN","TIUSRVT2",23,0)
 ..I $$ISA^USRLM(USER,$P(TIUCLLST(IDX),U),.TIUERR) D  ;ICR 1544
"RTN","TIUSRVT2",24,0)
 ...S TMP=+$P(TIUCLLST(IDX),U,2)
"RTN","TIUSRVT2",25,0)
 ...I +TIUY'>TMP S TIUY=TMP
"RTN","TIUSRVT2",26,0)
 I TIUY="" D
"RTN","TIUSRVT2",27,0)
 .N XPARSRCH,SERVICE
"RTN","TIUSRVT2",28,0)
 .I +$G(LOC) S XPARSRCH=LOC_";SC("_U
"RTN","TIUSRVT2",29,0)
 .E  S XPARSRCH=""
"RTN","TIUSRVT2",30,0)
 .;S SERVICE=$P($G(^VA(200,USER,5)),U)
"RTN","TIUSRVT2",31,0)
 .S SERVICE=$$GETSRV(USER)
"RTN","TIUSRVT2",32,0)
 .I +SERVICE>0 S XPARSRCH=XPARSRCH_SERVICE_";DIC(49,"_U
"RTN","TIUSRVT2",33,0)
 .S XPARSRCH=XPARSRCH_"DIV^SYS"
"RTN","TIUSRVT2",34,0)
 .S TIUY=$$GET^XPAR(XPARSRCH,"TIU PERSONAL TEMPLATE ACCESS")
"RTN","TIUSRVT2",35,0)
 I TIUY="" S TIUY=0
"RTN","TIUSRVT2",36,0)
 Q
"RTN","TIUSRVT2",37,0)
 ;
"RTN","TIUSRVT2",38,0)
GETDFLT(TIUY) ;Returns Default Templates for the current user
"RTN","TIUSRVT2",39,0)
 N TIUTMP,TIUERR
"RTN","TIUSRVT2",40,0)
 D GETLST^XPAR(.TIUTMP,"USR","TIU DEFAULT TEMPLATES","Q",.TIUERR) ;2263
"RTN","TIUSRVT2",41,0)
 S TIUY=$P($G(TIUTMP(1)),U,2)
"RTN","TIUSRVT2",42,0)
 Q
"RTN","TIUSRVT2",43,0)
SETDFLT(TIUY,SETTINGS) ;Saves Default Templates for the user
"RTN","TIUSRVT2",44,0)
 N TIUERR
"RTN","TIUSRVT2",45,0)
 D EN^XPAR(DUZ_";VA(200,","TIU DEFAULT TEMPLATES",1,SETTINGS,.TIUERR) ;2263
"RTN","TIUSRVT2",46,0)
 S TIUY=1
"RTN","TIUSRVT2",47,0)
 Q
"RTN","TIUSRVT2",48,0)
LSTACCUM(TIUY,TIULVL,TYP,PARAM) ; Accumulates TIUTMP into TIUY
"RTN","TIUSRVT2",49,0)
 N IDX,I,J,FOUND,TIUERR,TIUTMP
"RTN","TIUSRVT2",50,0)
 D GETLST^XPAR(.TIUTMP,TIULVL,PARAM,TYP,.TIUERR)
"RTN","TIUSRVT2",51,0)
 S I=0,IDX=$O(TIUY(999999),-1)+1
"RTN","TIUSRVT2",52,0)
 F  S I=$O(TIUTMP(I)) Q:'I  D
"RTN","TIUSRVT2",53,0)
 .S (FOUND,J)=0
"RTN","TIUSRVT2",54,0)
 .F  S J=$O(TIUY(J)) Q:'J  D  Q:FOUND
"RTN","TIUSRVT2",55,0)
 ..I TIUY(J)=TIUTMP(I) S FOUND=1
"RTN","TIUSRVT2",56,0)
 .I 'FOUND D
"RTN","TIUSRVT2",57,0)
 ..S TIUY(IDX)=TIUTMP(I)
"RTN","TIUSRVT2",58,0)
 ..S IDX=IDX+1
"RTN","TIUSRVT2",59,0)
 Q
"RTN","TIUSRVT2",60,0)
RDACCUM(TIUY,TIULVL,TYP) ; Accumulates Reminder Dialog List
"RTN","TIUSRVT2",61,0)
 D LSTACCUM(.TIUY,TIULVL,TYP,"TIU TEMPLATE REMINDER DIALOGS")
"RTN","TIUSRVT2",62,0)
 Q
"RTN","TIUSRVT2",63,0)
REMDLGS(TIUY) ;Returns a list of all reminder dialogs usable in templates
"RTN","TIUSRVT2",64,0)
 N SRV
"RTN","TIUSRVT2",65,0)
 K TIUY
"RTN","TIUSRVT2",66,0)
 D RDACCUM(.TIUY,"USR","N")
"RTN","TIUSRVT2",67,0)
 ;S SRV=$P($G(^VA(200,DUZ,5)),U)
"RTN","TIUSRVT2",68,0)
 S SRV=$$GETSRV(DUZ)
"RTN","TIUSRVT2",69,0)
 D RDACCUM(.TIUY,"SRV.`"_+$G(SRV),"N")
"RTN","TIUSRVT2",70,0)
 D RDACCUM(.TIUY,"DIV","N")
"RTN","TIUSRVT2",71,0)
 D RDACCUM(.TIUY,"SYS","N")
"RTN","TIUSRVT2",72,0)
 Q
"RTN","TIUSRVT2",73,0)
RDINLST(TIULST,TIUIEN) ; Searches TIULST for TIUIEN
"RTN","TIUSRVT2",74,0)
 N IDX,RES
"RTN","TIUSRVT2",75,0)
 S (IDX,RES)=0
"RTN","TIUSRVT2",76,0)
 F  S IDX=$O(TIULST(IDX)) Q:'IDX  D  Q:+RES
"RTN","TIUSRVT2",77,0)
 . I $P(TIULST(IDX),U,2)=TIUIEN S RES=1
"RTN","TIUSRVT2",78,0)
 K TIUIEN
"RTN","TIUSRVT2",79,0)
 Q RES
"RTN","TIUSRVT2",80,0)
REMDLGOK(TIUY,TIUIEN) ;Returns TRUE if the passed in Reminder Dialog IEN is
"RTN","TIUSRVT2",81,0)
 ;                Allowed to be used as a TIU Template
"RTN","TIUSRVT2",82,0)
 N TIULST,SRV
"RTN","TIUSRVT2",83,0)
 S TIUY=-1
"RTN","TIUSRVT2",84,0)
 I '$D(^PXRMD(801.41,+$G(TIUIEN))) Q
"RTN","TIUSRVT2",85,0)
 ;I $P(^PXRMD(801.41,+$G(TIUIEN),0),U,3)'="" Q
"RTN","TIUSRVT2",86,0)
 I +$P(^PXRMD(801.41,+$G(TIUIEN),0),U,3)>0 Q  ;ICR 3410
"RTN","TIUSRVT2",87,0)
 S TIUY=1
"RTN","TIUSRVT2",88,0)
 D RDACCUM(.TIULST,"USR","Q")
"RTN","TIUSRVT2",89,0)
 I $$RDINLST(.TIULST,TIUIEN) Q
"RTN","TIUSRVT2",90,0)
 ;S SRV=$P($G(^VA(200,DUZ,5)),U)
"RTN","TIUSRVT2",91,0)
 S SRV=$$GETSRV(DUZ)
"RTN","TIUSRVT2",92,0)
 D RDACCUM(.TIULST,"SRV.`"_+$G(SRV),"Q")
"RTN","TIUSRVT2",93,0)
 I $$RDINLST(.TIULST,TIUIEN) Q
"RTN","TIUSRVT2",94,0)
 D RDACCUM(.TIULST,"DIV","Q")
"RTN","TIUSRVT2",95,0)
 I $$RDINLST(.TIULST,TIUIEN) Q
"RTN","TIUSRVT2",96,0)
 D RDACCUM(.TIULST,"SYS","Q")
"RTN","TIUSRVT2",97,0)
 I $$RDINLST(.TIULST,TIUIEN) Q
"RTN","TIUSRVT2",98,0)
 S TIUY=0
"RTN","TIUSRVT2",99,0)
 Q
"RTN","TIUSRVT2",100,0)
OBJACCUM(TIUY,TIULVL) ; Accumulates Reminder Dialog List
"RTN","TIUSRVT2",101,0)
 D LSTACCUM(.TIUY,TIULVL,"N","TIU TEMPLATE PERSONAL OBJECTS")
"RTN","TIUSRVT2",102,0)
 Q
"RTN","TIUSRVT2",103,0)
PERSOBJS(TIUY) ; Returns the list of Patient Data Objects that are
"RTN","TIUSRVT2",104,0)
 ;         allowed to be used in Personal Templates
"RTN","TIUSRVT2",105,0)
 N SRV
"RTN","TIUSRVT2",106,0)
 K TIUY
"RTN","TIUSRVT2",107,0)
 D OBJACCUM(.TIUY,"USR")
"RTN","TIUSRVT2",108,0)
 ;S SRV=$P($G(^VA(200,DUZ,5)),U)
"RTN","TIUSRVT2",109,0)
 S SRV=$$GETSRV(DUZ)
"RTN","TIUSRVT2",110,0)
 I +SRV D OBJACCUM(.TIUY,"SRV.`"_+$G(SRV))
"RTN","TIUSRVT2",111,0)
 D OBJACCUM(.TIUY,"DIV")
"RTN","TIUSRVT2",112,0)
 D OBJACCUM(.TIUY,"SYS")
"RTN","TIUSRVT2",113,0)
 Q
"RTN","TIUSRVT2",114,0)
LOCK(TIUY,TIUDA) ; Lock Template
"RTN","TIUSRVT2",115,0)
 L +^TIU(8927,TIUDA,0):1
"RTN","TIUSRVT2",116,0)
 S TIUY=$T
"RTN","TIUSRVT2",117,0)
 Q
"RTN","TIUSRVT2",118,0)
UNLOCK(TIUY,TIUDA) ; Unlock Template
"RTN","TIUSRVT2",119,0)
 L -^TIU(8927,TIUDA,0):1
"RTN","TIUSRVT2",120,0)
 S TIUY=1
"RTN","TIUSRVT2",121,0)
 Q
"RTN","TIUSRVT2",122,0)
GETTMPLT(TIUY,TIUDA) ; Returns basic data for template TIUDA in the TIU TEMPLATE FILE 8927.
"RTN","TIUSRVT2",123,0)
 ;TIUY(1) is returned as a multiple-piece single value delimited by '^'.
"RTN","TIUSRVT2",124,0)
 ;TIU*1*252
"RTN","TIUSRVT2",125,0)
 N TIUIDX
"RTN","TIUSRVT2",126,0)
 D ADDNODE^TIUSRVT(.TIUIDX,TIUDA,1) ;Sets TIUY(1)
"RTN","TIUSRVT2",127,0)
 Q
"RTN","TIUSRVT2",128,0)
GETSRV(NEWPERS) ; Get service section for NEWPERS
"RTN","TIUSRVT2",129,0)
 Q $$GET1^DIQ(200,NEWPERS_",",29,"I") ;ICR 10060 for VA(200
"VER")
8.0^22.0
"BLD",7573,6)
^244
**END**
**END**
