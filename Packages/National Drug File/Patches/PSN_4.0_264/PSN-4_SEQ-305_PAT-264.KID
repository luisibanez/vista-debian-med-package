Released PSN*4*264 SEQ #305
Extracted from mail message
**KIDS**:PSN*4.0*264^

**INSTALL NAME**
PSN*4.0*264
"BLD",7499,0)
PSN*4.0*264^NATIONAL DRUG FILE^0^3111108^y
"BLD",7499,1,0)
^^18^18^3111103^
"BLD",7499,1,1,0)
This patch performs the following data dictionary update in the VA 
"BLD",7499,1,2,0)
PRODUCT file (#50.68). The HELP-PROMPT and TECHNICAL DESCR for the FDA MED
"BLD",7499,1,3,0)
GUIDE field (#100) is being modified as show below:
"BLD",7499,1,4,0)
 
"BLD",7499,1,5,0)
   Current: 
"BLD",7499,1,6,0)
    
"BLD",7499,1,7,0)
   HELP PROMPT    : Answer must be 1-100 characters in length
"BLD",7499,1,8,0)
   TECHNICAL DESCR: This field is used for storing the FDA Medication
"BLD",7499,1,9,0)
                    Guide file name associated 
"BLD",7499,1,10,0)
 
"BLD",7499,1,11,0)
   Requested changes:
"BLD",7499,1,12,0)
 
"BLD",7499,1,13,0)
   HELP-PROMPT    : Answer must be 1-100 characters in length.
"BLD",7499,1,14,0)
   TECHNICAL DESCR: This field is used for storing the FDA Medication
"BLD",7499,1,15,0)
                    Guide filename associated with this VA Product. The 
"BLD",7499,1,16,0)
                    file is physically stored in the repository indicated
"BLD",7499,1,17,0)
                    in the FDA MED GUIDE SERVER URL field (#100) in the
"BLD",7499,1,18,0)
                    PHARMACY SYSTEM file (#59.7). 
"BLD",7499,4,0)
^9.64PA^50.68^1
"BLD",7499,4,50.68,0)
50.68
"BLD",7499,4,50.68,2,0)
^9.641^50.68^1
"BLD",7499,4,50.68,2,50.68,0)
VA PRODUCT  (File-top level)
"BLD",7499,4,50.68,2,50.68,1,0)
^9.6411^100^1
"BLD",7499,4,50.68,2,50.68,1,100,0)
FDA MED GUIDE
"BLD",7499,4,50.68,222)
y^y^p^^^^n^^n
"BLD",7499,4,50.68,224)

"BLD",7499,4,"APDD",50.68,50.68)

"BLD",7499,4,"APDD",50.68,50.68,100)

"BLD",7499,4,"B",50.68,50.68)

"BLD",7499,6.3)
6
"BLD",7499,"ABPKG")
n
"BLD",7499,"KRN",0)
^9.67PA^779.2^20
"BLD",7499,"KRN",.4,0)
.4
"BLD",7499,"KRN",.401,0)
.401
"BLD",7499,"KRN",.402,0)
.402
"BLD",7499,"KRN",.403,0)
.403
"BLD",7499,"KRN",.5,0)
.5
"BLD",7499,"KRN",.84,0)
.84
"BLD",7499,"KRN",3.6,0)
3.6
"BLD",7499,"KRN",3.8,0)
3.8
"BLD",7499,"KRN",9.2,0)
9.2
"BLD",7499,"KRN",9.8,0)
9.8
"BLD",7499,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",7499,"KRN",9.8,"NM",1,0)
PSNFDAMG^^0^B31156358
"BLD",7499,"KRN",9.8,"NM","B","PSNFDAMG",1)

"BLD",7499,"KRN",19,0)
19
"BLD",7499,"KRN",19.1,0)
19.1
"BLD",7499,"KRN",101,0)
101
"BLD",7499,"KRN",409.61,0)
409.61
"BLD",7499,"KRN",771,0)
771
"BLD",7499,"KRN",779.2,0)
779.2
"BLD",7499,"KRN",870,0)
870
"BLD",7499,"KRN",8989.51,0)
8989.51
"BLD",7499,"KRN",8989.52,0)
8989.52
"BLD",7499,"KRN",8994,0)
8994
"BLD",7499,"KRN","B",.4,.4)

"BLD",7499,"KRN","B",.401,.401)

"BLD",7499,"KRN","B",.402,.402)

"BLD",7499,"KRN","B",.403,.403)

"BLD",7499,"KRN","B",.5,.5)

"BLD",7499,"KRN","B",.84,.84)

"BLD",7499,"KRN","B",3.6,3.6)

"BLD",7499,"KRN","B",3.8,3.8)

"BLD",7499,"KRN","B",9.2,9.2)

"BLD",7499,"KRN","B",9.8,9.8)

"BLD",7499,"KRN","B",19,19)

"BLD",7499,"KRN","B",19.1,19.1)

"BLD",7499,"KRN","B",101,101)

"BLD",7499,"KRN","B",409.61,409.61)

"BLD",7499,"KRN","B",771,771)

"BLD",7499,"KRN","B",779.2,779.2)

"BLD",7499,"KRN","B",870,870)

"BLD",7499,"KRN","B",8989.51,8989.51)

"BLD",7499,"KRN","B",8989.52,8989.52)

"BLD",7499,"KRN","B",8994,8994)

"BLD",7499,"QDEF")
^^^^NO^^^^NO^^NO
"BLD",7499,"QUES",0)
^9.62^^
"BLD",7499,"REQB",0)
^9.611^1^1
"BLD",7499,"REQB",1,0)
PSN*4.0*263^2
"BLD",7499,"REQB","B","PSN*4.0*263",1)

"FIA",50.68)
VA PRODUCT
"FIA",50.68,0)
^PSNDF(50.68,
"FIA",50.68,0,0)
50.68
"FIA",50.68,0,1)
y^y^p^^^^n^^n
"FIA",50.68,0,10)

"FIA",50.68,0,11)

"FIA",50.68,0,"RLRO")

"FIA",50.68,0,"VR")
4.0^PSN
"FIA",50.68,50.68)
1
"FIA",50.68,50.68,100)

"MBREQ")
0
"PKG",136,-1)
1^1
"PKG",136,0)
NATIONAL DRUG FILE^PSN^This is the National Drug File Package V 3.14
"PKG",136,20,0)
^9.402P^^
"PKG",136,22,0)
^9.49I^1^1
"PKG",136,22,1,0)
4.0^2981030^2981223^11595
"PKG",136,22,1,"PAH",1,0)
264^3111108
"PKG",136,22,1,"PAH",1,1,0)
^^18^18^3111108
"PKG",136,22,1,"PAH",1,1,1,0)
This patch performs the following data dictionary update in the VA 
"PKG",136,22,1,"PAH",1,1,2,0)
PRODUCT file (#50.68). The HELP-PROMPT and TECHNICAL DESCR for the FDA MED
"PKG",136,22,1,"PAH",1,1,3,0)
GUIDE field (#100) is being modified as show below:
"PKG",136,22,1,"PAH",1,1,4,0)
 
"PKG",136,22,1,"PAH",1,1,5,0)
   Current: 
"PKG",136,22,1,"PAH",1,1,6,0)
    
"PKG",136,22,1,"PAH",1,1,7,0)
   HELP PROMPT    : Answer must be 1-100 characters in length
"PKG",136,22,1,"PAH",1,1,8,0)
   TECHNICAL DESCR: This field is used for storing the FDA Medication
"PKG",136,22,1,"PAH",1,1,9,0)
                    Guide file name associated 
"PKG",136,22,1,"PAH",1,1,10,0)
 
"PKG",136,22,1,"PAH",1,1,11,0)
   Requested changes:
"PKG",136,22,1,"PAH",1,1,12,0)
 
"PKG",136,22,1,"PAH",1,1,13,0)
   HELP-PROMPT    : Answer must be 1-100 characters in length.
"PKG",136,22,1,"PAH",1,1,14,0)
   TECHNICAL DESCR: This field is used for storing the FDA Medication
"PKG",136,22,1,"PAH",1,1,15,0)
                    Guide filename associated with this VA Product. The 
"PKG",136,22,1,"PAH",1,1,16,0)
                    file is physically stored in the repository indicated
"PKG",136,22,1,"PAH",1,1,17,0)
                    in the FDA MED GUIDE SERVER URL field (#100) in the
"PKG",136,22,1,"PAH",1,1,18,0)
                    PHARMACY SYSTEM file (#59.7). 
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","PSNFDAMG")
0^1^B31156358^B30999461
"RTN","PSNFDAMG",1,0)
PSNFDAMG ;BIR/DMA - On-Demand FDA Med Guide Display ; 12 Feb 2010  8:26 AM
"RTN","PSNFDAMG",2,0)
 ;;4.0;NATIONAL DRUG FILE;**108,263,264**; 30 Oct 98;Build 6
"RTN","PSNFDAMG",3,0)
 ;Reference to ^PS(59.7 supported by DBIA #2613
"RTN","PSNFDAMG",4,0)
 ;
"RTN","PSNFDAMG",5,0)
EN(VAPRDIEN) ; Entry point for FDA Med Guide On-Demand Printing
"RTN","PSNFDAMG",6,0)
 N FDAMGFN,FDAMGURL,PCURL,STATUS,X
"RTN","PSNFDAMG",7,0)
 S FDAMGFN=$$FDAMG^PSNAPIS(VAPRDIEN)
"RTN","PSNFDAMG",8,0)
 I FDAMGFN="" D  Q
"RTN","PSNFDAMG",9,0)
 . W !!,"There is no FDA Medication Guide associated with this medication.",!
"RTN","PSNFDAMG",10,0)
 . D PAUSE
"RTN","PSNFDAMG",11,0)
 ;
"RTN","PSNFDAMG",12,0)
 W !!,"The following URL provides the link to the FDA Medication Guide associated"
"RTN","PSNFDAMG",13,0)
 W !,"with this medication. Thin Client users: copy/paste the URL below into a"
"RTN","PSNFDAMG",14,0)
 W !,"browser to access the FDA Medication Guide for this drug:"
"RTN","PSNFDAMG",15,0)
 W !!
"RTN","PSNFDAMG",16,0)
 ;
"RTN","PSNFDAMG",17,0)
 ; Concatenating the Web Server URL to the FDA Med Guide file name
"RTN","PSNFDAMG",18,0)
 S FDAMGURL=$$GET1^DIQ(59.7,1,100)_FDAMGFN
"RTN","PSNFDAMG",19,0)
 ;
"RTN","PSNFDAMG",20,0)
 D PRTURL(FDAMGURL)
"RTN","PSNFDAMG",21,0)
 ;
"RTN","PSNFDAMG",22,0)
 S PCURL="http://"_$S($G(IO("IP"))'="":IO("IP"),1:"127.0.0.1")_":8091/viewmg="
"RTN","PSNFDAMG",23,0)
 ;
"RTN","PSNFDAMG",24,0)
 W !!,"Please wait...",!
"RTN","PSNFDAMG",25,0)
 ;
"RTN","PSNFDAMG",26,0)
 ;Invoking Kernel HTTP Toolkit
"RTN","PSNFDAMG",27,0)
 S STATUS=$$GETURL^XTHC10(PCURL_FDAMGURL)
"RTN","PSNFDAMG",28,0)
 ;
"RTN","PSNFDAMG",29,0)
 I +STATUS'=200 D
"RTN","PSNFDAMG",30,0)
 . W !,"The system is unable to display FDA Med Guide automatically."
"RTN","PSNFDAMG",31,0)
 . W !
"RTN","PSNFDAMG",32,0)
 . W !,"The FDA Medication Guide will not automatically open on Thin Client and some"
"RTN","PSNFDAMG",33,0)
 . W !,"types of encrypted sessions. If you do not believe this is the reason contact"
"RTN","PSNFDAMG",34,0)
 . W !,"your local technical support for assistance."
"RTN","PSNFDAMG",35,0)
 . W !
"RTN","PSNFDAMG",36,0)
 . W !,"You can copy/paste the link above into your browser's address bar to retrieve"
"RTN","PSNFDAMG",37,0)
 . W !,"the FDA Medication Guide."
"RTN","PSNFDAMG",38,0)
 . W !
"RTN","PSNFDAMG",39,0)
 ;
"RTN","PSNFDAMG",40,0)
 D PAUSE
"RTN","PSNFDAMG",41,0)
 Q
"RTN","PSNFDAMG",42,0)
 ;
"RTN","PSNFDAMG",43,0)
PAUSE ;
"RTN","PSNFDAMG",44,0)
 N DIR
"RTN","PSNFDAMG",45,0)
 S DIR("A")="Enter RETURN to continue, '?' for HELP, or '^' to exit",DIR(0)="E"
"RTN","PSNFDAMG",46,0)
 S DIR("?")="^D HELP^PSNFDAMG("""_$G(FDAMGURL)_""")" D ^DIR
"RTN","PSNFDAMG",47,0)
 Q
"RTN","PSNFDAMG",48,0)
 ;
"RTN","PSNFDAMG",49,0)
HELP(MGURL) ; Help Text
"RTN","PSNFDAMG",50,0)
 N DIR,DIRUT,DIROUT
"RTN","PSNFDAMG",51,0)
 W !,"When unable to get the FDA Medication Guide to display, review the following"
"RTN","PSNFDAMG",52,0)
 W !,"suggestion(s) for troubleshooting potential problems:"
"RTN","PSNFDAMG",53,0)
 W !
"RTN","PSNFDAMG",54,0)
 I $G(MGURL)'="" D
"RTN","PSNFDAMG",55,0)
 . W !,"1) The browser did not open automatically. This may be due to the following:"
"RTN","PSNFDAMG",56,0)
 . W !,"   - You might be connected to VistA via Thin Client or an encrypted session"
"RTN","PSNFDAMG",57,0)
 . W !,"     that prevents the FDA Med Guide from automatically displaying. Please"
"RTN","PSNFDAMG",58,0)
 . W !,"     copy and paste the URL link below into your browser's address bar to"
"RTN","PSNFDAMG",59,0)
 . W !,"     retrieve the FDA Medication Guide:"
"RTN","PSNFDAMG",60,0)
 . W !!  D PRTURL(MGURL) W !
"RTN","PSNFDAMG",61,0)
 . W !,"   - The computer might not have the required Java software component"
"RTN","PSNFDAMG",62,0)
 . W !,"     installed or the software might not be functioning properly. Please,"
"RTN","PSNFDAMG",63,0)
 . W !,"     contact technical support for assistance."
"RTN","PSNFDAMG",64,0)
 . W !
"RTN","PSNFDAMG",65,0)
 . S DIR("A")="Enter RETURN to continue" D PAUSE^VALM1 Q:($G(DIRUT)!$G(DIROUT))
"RTN","PSNFDAMG",66,0)
 . ;
"RTN","PSNFDAMG",67,0)
 . W !,"2) When doing a copy/paste of the link into the browser's address and an HTTP"
"RTN","PSNFDAMG",68,0)
 . W !,"   404 - File Not Found error is received. This may be due to the following:"
"RTN","PSNFDAMG",69,0)
 . W !,"   - A common issue exists when the link is displayed in two lines in the"
"RTN","PSNFDAMG",70,0)
 . W !,"     terminal screen. When you copy both lines at the same time and paste it"
"RTN","PSNFDAMG",71,0)
 . W !,"     into the browser's address, the second line is ignored by the browser"
"RTN","PSNFDAMG",72,0)
 . W !,"     resulting in a 'broken' link. To resolve this issue, copy and paste one"
"RTN","PSNFDAMG",73,0)
 . W !,"     line at a time from the terminal screen into the browser's address to"
"RTN","PSNFDAMG",74,0)
 . W !,"     make sure the complete link is used."
"RTN","PSNFDAMG",75,0)
 . W !,"   - The FDA Medication Guide Server may be down at the moment. Please, wait"
"RTN","PSNFDAMG",76,0)
 . W !,"     a few minutes and try again. If the problem persists, contact technical"
"RTN","PSNFDAMG",77,0)
 . W !,"     support for assistance."
"RTN","PSNFDAMG",78,0)
 . ;
"RTN","PSNFDAMG",79,0)
 . W !!,"3) The browser opened automatically, however you receive an HTTP 404 - File"
"RTN","PSNFDAMG",80,0)
 . W !,"   Not Found error. This may be due to the following:"
"RTN","PSNFDAMG",81,0)
 . W !,"   - The FDA Medication Guide Server may be down at the moment. Please, wait"
"RTN","PSNFDAMG",82,0)
 . W !,"     a few minutes and try again. If the problem persists, contact technical"
"RTN","PSNFDAMG",83,0)
 . W !,"     support for assistance."
"RTN","PSNFDAMG",84,0)
 . W !
"RTN","PSNFDAMG",85,0)
 E  D
"RTN","PSNFDAMG",86,0)
 . W !,"1) If no FDA Medication Guide exists for a product that you believe should"
"RTN","PSNFDAMG",87,0)
 . W !,"   have one, confirm that one is required by visiting the FDA website"
"RTN","PSNFDAMG",88,0)
 . W !,"   (www.fda.gov). If one is required, log a support ticket to request its"
"RTN","PSNFDAMG",89,0)
 . W !,"   addition. Please understand that there may be a delay between the time"
"RTN","PSNFDAMG",90,0)
 . W !,"   that a new Medication Guide is posted to the FDA website and when it is"
"RTN","PSNFDAMG",91,0)
 . W !,"   made available in VistA through a National Drug File data update patch."
"RTN","PSNFDAMG",92,0)
 Q
"RTN","PSNFDAMG",93,0)
 ;
"RTN","PSNFDAMG",94,0)
PRTURL(FDAMGURL) ; Prints the FDA Med Guide URL
"RTN","PSNFDAMG",95,0)
 S X=$G(FDAMGURL) I $$LOW^XLFSTR($E(X,1,7))="http://" S X=$E(X,8,999)
"RTN","PSNFDAMG",96,0)
 W $E(X,1,80) I $L(X)>80 D
"RTN","PSNFDAMG",97,0)
 . F  Q:$E(X,81,999)=""  S X=$E(X,81,999) W !,$E(X,1,80)
"RTN","PSNFDAMG",98,0)
 Q
"VER")
8.0^22.0
"^DD",50.68,50.68,100,0)
FDA MED GUIDE^Fa^^MG;1^K:$L(X)>100!($L(X)<1) X
"^DD",50.68,50.68,100,1,0)
^.1^^0
"^DD",50.68,50.68,100,3)
Answer must be 1-100 characters in length.
"^DD",50.68,50.68,100,8.5)
^
"^DD",50.68,50.68,100,9)
^
"^DD",50.68,50.68,100,10)

"^DD",50.68,50.68,100,21,0)
^^3^3^3100818^
"^DD",50.68,50.68,100,21,1,0)
This field contains the filename of the FDA Medication Guide associated
"^DD",50.68,50.68,100,21,2,0)
with this VA Product. This field can only be edited on the National 
"^DD",50.68,50.68,100,21,3,0)
Drug File Management System.
"^DD",50.68,50.68,100,23,0)
^.001^1^1^3110523^^^
"^DD",50.68,50.68,100,23,1,0)
This field is used for storing the FDA Medication Guide filename associated with this VA Product. The file is physically stored in the repository indicated in the FDA MED GUIDE SERVER URL field (#100) in the PHARMACY SYSTEM file (#59.7).
"^DD",50.68,50.68,100,"AUDIT")
y
"^DD",50.68,50.68,100,"DT")
3110523
"BLD",7499,6)
^305
**END**
**END**
