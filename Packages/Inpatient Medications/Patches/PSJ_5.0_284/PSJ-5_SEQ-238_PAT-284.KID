Released PSJ*5*284 SEQ #238
Extracted from mail message
**KIDS**:PSJ*5.0*284^

**INSTALL NAME**
PSJ*5.0*284
"BLD",9146,0)
PSJ*5.0*284^INPATIENT MEDICATIONS^0^3120924^y
"BLD",9146,1,0)
^^4^4^3120917^
"BLD",9146,1,1,0)
This patch will resolve the following issue in the Inpatient Medications 
"BLD",9146,1,2,0)
package:
"BLD",9146,1,3,0)
 
"BLD",9146,1,4,0)
-Cannot send data to ATC
"BLD",9146,4,0)
^9.64PA^^
"BLD",9146,6.3)
7
"BLD",9146,"KRN",0)
^9.67PA^779.2^20
"BLD",9146,"KRN",.4,0)
.4
"BLD",9146,"KRN",.401,0)
.401
"BLD",9146,"KRN",.402,0)
.402
"BLD",9146,"KRN",.403,0)
.403
"BLD",9146,"KRN",.5,0)
.5
"BLD",9146,"KRN",.84,0)
.84
"BLD",9146,"KRN",3.6,0)
3.6
"BLD",9146,"KRN",3.8,0)
3.8
"BLD",9146,"KRN",9.2,0)
9.2
"BLD",9146,"KRN",9.8,0)
9.8
"BLD",9146,"KRN",9.8,"NM",0)
^9.68A^2^2
"BLD",9146,"KRN",9.8,"NM",1,0)
PSGTAP0^^0^B14152005
"BLD",9146,"KRN",9.8,"NM",2,0)
PSGTAP1^^0^B19383245
"BLD",9146,"KRN",9.8,"NM","B","PSGTAP0",1)

"BLD",9146,"KRN",9.8,"NM","B","PSGTAP1",2)

"BLD",9146,"KRN",19,0)
19
"BLD",9146,"KRN",19.1,0)
19.1
"BLD",9146,"KRN",101,0)
101
"BLD",9146,"KRN",409.61,0)
409.61
"BLD",9146,"KRN",771,0)
771
"BLD",9146,"KRN",779.2,0)
779.2
"BLD",9146,"KRN",870,0)
870
"BLD",9146,"KRN",8989.51,0)
8989.51
"BLD",9146,"KRN",8989.52,0)
8989.52
"BLD",9146,"KRN",8994,0)
8994
"BLD",9146,"KRN","B",.4,.4)

"BLD",9146,"KRN","B",.401,.401)

"BLD",9146,"KRN","B",.402,.402)

"BLD",9146,"KRN","B",.403,.403)

"BLD",9146,"KRN","B",.5,.5)

"BLD",9146,"KRN","B",.84,.84)

"BLD",9146,"KRN","B",3.6,3.6)

"BLD",9146,"KRN","B",3.8,3.8)

"BLD",9146,"KRN","B",9.2,9.2)

"BLD",9146,"KRN","B",9.8,9.8)

"BLD",9146,"KRN","B",19,19)

"BLD",9146,"KRN","B",19.1,19.1)

"BLD",9146,"KRN","B",101,101)

"BLD",9146,"KRN","B",409.61,409.61)

"BLD",9146,"KRN","B",771,771)

"BLD",9146,"KRN","B",779.2,779.2)

"BLD",9146,"KRN","B",870,870)

"BLD",9146,"KRN","B",8989.51,8989.51)

"BLD",9146,"KRN","B",8989.52,8989.52)

"BLD",9146,"KRN","B",8994,8994)

"BLD",9146,"QUES",0)
^9.62^^
"BLD",9146,"REQB",0)
^9.611^1^1
"BLD",9146,"REQB",1,0)
PSJ*5.0*119^2
"BLD",9146,"REQB","B","PSJ*5.0*119",1)

"MBREQ")
0
"PKG",471,-1)
1^1
"PKG",471,0)
INPATIENT MEDICATIONS^PSJ^UNIT DOSE AND IVS
"PKG",471,20,0)
^9.402P^^
"PKG",471,22,0)
^9.49I^1^1
"PKG",471,22,1,0)
5.0^2971215^2990325^66481
"PKG",471,22,1,"PAH",1,0)
284^3120924
"PKG",471,22,1,"PAH",1,1,0)
^^4^4^3120924
"PKG",471,22,1,"PAH",1,1,1,0)
This patch will resolve the following issue in the Inpatient Medications 
"PKG",471,22,1,"PAH",1,1,2,0)
package:
"PKG",471,22,1,"PAH",1,1,3,0)
 
"PKG",471,22,1,"PAH",1,1,4,0)
-Cannot send data to ATC
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
2
"RTN","PSGTAP0")
0^1^B14152005^B12574819
"RTN","PSGTAP0",1,0)
PSGTAP0 ;BIR/CML3-SEND PICK LIST TO TRAVENOL'S ATC 212 ;18 APR 95 / 4:21 PM
"RTN","PSGTAP0",2,0)
 ;;5.0;INPATIENT MEDICATIONS;**119,284**;16 DEC 97;Build 7
"RTN","PSGTAP0",3,0)
 ;
"RTN","PSGTAP0",4,0)
S1 ;
"RTN","PSGTAP0",5,0)
 W $C(48) F Q=1:1:75 R *X:$S(Q<15:1,1:5) G:X=49 S1 I X=48 Q
"RTN","PSGTAP0",6,0)
 E  S QUIT=1 Q
"RTN","PSGTAP0",7,0)
 W A F Q=1:1:75 R *X:$S(Q<15:1,1:5) G:X=49 S1 I X=48 Q
"RTN","PSGTAP0",8,0)
 S:'$T QUIT=1 Q
"RTN","PSGTAP0",9,0)
 ;
"RTN","PSGTAP0",10,0)
S2 ;
"RTN","PSGTAP0",11,0)
 W $C(48) F Q=1:1:75 R X:$S(Q<15:1,1:5) G:$A(X)=49 S2 I $A(X)=48 Q
"RTN","PSGTAP0",12,0)
 E  S QUIT=1 Q
"RTN","PSGTAP0",13,0)
 W A F Q=1:1:75 R X:$S(Q<15:1,1:5) G:$A(X)=49 S2 I $A(X)=48 Q
"RTN","PSGTAP0",14,0)
 S:'$T QUIT=1 Q
"RTN","PSGTAP0",15,0)
 Q
"RTN","PSGTAP0",16,0)
 ;
"RTN","PSGTAP0",17,0)
S3 ; *284 - Added ! to clear WR buffer for network channel
"RTN","PSGTAP0",18,0)
 W $C(48),! F Q=1:1:75 R *X:$S(Q<15:1,1:5) G:X=49 S3 I X=48 Q
"RTN","PSGTAP0",19,0)
 E  S QUIT=1 Q
"RTN","PSGTAP0",20,0)
 W A,! F Q=1:1:75 R *X:$S(Q<15:1,1:5) G:X=49 S3 I X=48 Q
"RTN","PSGTAP0",21,0)
 S:'$T QUIT=1 Q
"RTN","PSGTAP0",22,0)
ENQ ;
"RTN","PSGTAP0",23,0)
 N ATCFF,DNUNIT,PSGTAG
"RTN","PSGTAP0",24,0)
 F  Q:$$LOCK^PSGPLUTL(PSGPLG,"PSGTAP")
"RTN","PSGTAP0",25,0)
 F  L +^PS(53.55,PSGPLG):1 Q:$T
"RTN","PSGTAP0",26,0)
 D NOW^%DTC S %=%_"0000000000000",DAT=$E(%,4,5)_$E(%,6,7)_$E(%,2,3)_$E(%,9,10)_$E(%,11,12) I PSGPLG<0 S QUIT=0 G QUIT
"RTN","PSGTAP0",27,0)
 I PSGTAPR S ND=$P($G(^PS(53.55,PSGPLG,0)),"^",2) I ND,$O(^(1,0)) G RESTART
"RTN","PSGTAP0",28,0)
 I $D(^PS(53.55,PSGPLG)) S DIK="^PS(53.55,",DA=PSGPLG D ^DIK
"RTN","PSGTAP0",29,0)
 S (DINUM,X)=PSGPLG,DIC="^PS(53.55,",DIC(0)="L" K DD,DO D FILE^DICN I Y'>0 S QUIT=0 G QUIT
"RTN","PSGTAP0",30,0)
 S ^PS(53.55,PSGPLG,1,0)="^53.56A",BLKS="                      ",G=PSGPLG,(DD,PSGORD,PSJJORD,ND,P,R,S,T,W,O,D)=""
"RTN","PSGTAP0",31,0)
 S ATCFF=+$P($G(^PS(59.7,1,26)),"^",7)
"RTN","PSGTAP0",32,0)
 F  S T=$O(^PS(53.5,"AC",G,T)) Q:T=""  F  S W=$O(^PS(53.5,"AC",G,T,W)) Q:W=""  F  S R=$O(^PS(53.5,"AC",G,T,W,R)) Q:R=""  F  S P=$O(^PS(53.5,"AC",G,T,W,R,P)) Q:P=""  D  ;
"RTN","PSGTAP0",33,0)
 .S (DFN,PSGP)=+$P(P,"^",2) D PID^VADPT S PND=$S($D(^DPT(PSGP,0)):^(0),1:0),PL=$E($S($D(^(.1)):^(.1),1:"N/F")_BLKS,1,12),PN=$E($P(PND,"^")_BLKS,1,20),PID=$E(VA("PID")_BLKS,1,12),S="A"
"RTN","PSGTAP0",34,0)
 .F  S S=$O(^PS(53.5,"AC",G,T,W,R,P,S)) Q:"Z"[S  F  S PSGORD=$O(^PS(53.5,"AC",G,T,W,R,P,S,PSGORD)) Q:PSGORD=""  S O=$P(PSGORD,"^",2) D
"RTN","PSGTAP0",35,0)
 ..S ON=+$G(^PS(53.5,G,1,PSGP,1,O,0)) F  S DD=$O(^PS(53.5,"AC",G,T,W,R,P,S,PSGORD,DD)) Q:DD=""  S D=+$P(DD,"^",2),C=$G(^PS(53.5,G,1,PSGP,1,O,1,D,0)),D=$P(C,"^"),C=$S($P(C,"^",3)]"":+$P(C,"^",3),1:$P(C,"^",2)) I C>0,C?1.3N D  ;
"RTN","PSGTAP0",36,0)
 ...S DN=$G(^PS(55,PSGP,5,ON,1,D,0))
"RTN","PSGTAP0",37,0)
 ...S DNUNIT=$P(DN,"^",2) I DNUNIT#1,ATCFF,+DNUNIT S DNUNIT=(DNUNIT\1)+1
"RTN","PSGTAP0",38,0)
 ...I DN,'(DNUNIT#1),$S('$P(DN,"^",3):1,1:DT<$P(DN,"^",3)) S A=$P($G(^PSDRUG(+DN,8.5)),"^",2) I A]"",$D(^(212,"AC",PSGPLWG)) D
"RTN","PSGTAP0",39,0)
 ....S A=$E(A_BLKS,1,15) I C>99 F ND=ND+1:1 S ^PS(53.55,PSGPLG,1,ND,0)=PN_PID_PL_"BAT"_A_"1 ^099",C=C-99 Q:C<100
"RTN","PSGTAP0",40,0)
 ....Q:C<1  S:$L(C)<3 C=$E("000",1,3-$L(C))_C S ND=ND+1,^PS(53.55,PSGPLG,1,ND,0)=PN_PID_PL_"BAT"_A_"1 ^"_C Q
"RTN","PSGTAP0",41,0)
 S QUIT=$O(^PS(53.55,PSGPLG,1,0)) G:'QUIT QUIT S ^(0)="^53.56A^"_ND_"^"_ND,ND=0
"RTN","PSGTAP0",42,0)
 ;
"RTN","PSGTAP0",43,0)
RESTART ;
"RTN","PSGTAP0",44,0)
 X ^%ZOSF("LABOFF") S QUIT=0
"RTN","PSGTAP0",45,0)
 F  S ND=$O(^PS(53.55,PSGPLG,1,ND)) Q:'ND  S A=$G(^(ND,0)) I A]"" S A=$C(50)_$C(52)_$P(A,"^")_$C(53)_$C(54)_$P(A,"^",2)_DAT_$C(55)_$C(13) S PSGTAG=$S(IOT="CHAN":"S3",'PSGSPD:"S1",1:"S2") D @PSGTAG Q:QUIT  S $P(^PS(53.55,PSGPLG,0),"^",2)=ND
"RTN","PSGTAP0",46,0)
 ;
"RTN","PSGTAP0",47,0)
QUIT ;
"RTN","PSGTAP0",48,0)
 I 'QUIT S DIK="^PS(53.55,",DA=PSGPLG D ^DIK
"RTN","PSGTAP0",49,0)
 L -^PS(53.55,PSGPLG)
"RTN","PSGTAP0",50,0)
 D UNLOCK^PSGPLUTL(PSGPLG,"PSGTAP") D ^%ZISC Q
"RTN","PSGTAP1")
0^2^B19383245^B17389584
"RTN","PSGTAP1",1,0)
PSGTAP1 ;BIR/CML3-SEND PICK LIST TO ATC BY PATIENT/ADMIN TIME ;19 Nov 98 / 2:37 PM
"RTN","PSGTAP1",2,0)
 ;;5.0;INPATIENT MEDICATIONS;**10,119,284**;16 DEC 97;Build 7
"RTN","PSGTAP1",3,0)
 ;
"RTN","PSGTAP1",4,0)
S1 ;
"RTN","PSGTAP1",5,0)
 W $C(48) F Q=1:1:75 R *X:$S(Q<15:1,1:5) G:X=49 S1 I X=48 Q
"RTN","PSGTAP1",6,0)
 E  S QUIT=1 Q
"RTN","PSGTAP1",7,0)
 W A F Q=1:1:75 R *X:$S(Q<15:1,1:5) G:X=49 S1 I X=48 Q
"RTN","PSGTAP1",8,0)
 S:'$T QUIT=1 Q
"RTN","PSGTAP1",9,0)
 ;
"RTN","PSGTAP1",10,0)
S2 ;
"RTN","PSGTAP1",11,0)
 W $C(48) F Q=1:1:75 R X:$S(Q<15:1,1:5) G:$A(X)=49 S2 I $A(X)=48 Q
"RTN","PSGTAP1",12,0)
 E  S QUIT=1 Q
"RTN","PSGTAP1",13,0)
 W A F Q=1:1:75 R X:$S(Q<15:1,1:5) G:$A(X)=49 S2 I $A(X)=48 Q
"RTN","PSGTAP1",14,0)
 S:'$T QUIT=1 Q
"RTN","PSGTAP1",15,0)
 Q
"RTN","PSGTAP1",16,0)
 ;
"RTN","PSGTAP1",17,0)
S3 ; *284 - Added ! to clear WR buffer for network channel
"RTN","PSGTAP1",18,0)
 W $C(48),! F Q=1:1:75 R *X:$S(Q<15:1,1:5) G:X=49 S3 I X=48 Q
"RTN","PSGTAP1",19,0)
 E  S QUIT=1 Q
"RTN","PSGTAP1",20,0)
 W A,! F Q=1:1:75 R *X:$S(Q<15:1,1:5) G:X=49 S3 I X=48 Q
"RTN","PSGTAP1",21,0)
 S:'$T QUIT=1 Q
"RTN","PSGTAP1",22,0)
 ;
"RTN","PSGTAP1",23,0)
ENQ ;
"RTN","PSGTAP1",24,0)
 N ND,G,TM,W,R,P,ST,DD,ATCFF,DNUNIT,PSGTAG K ^TMP("PSGATC",$J)
"RTN","PSGTAP1",25,0)
 F  Q:$$LOCK^PSGPLUTL(PSGPLG,"PSGTAP")
"RTN","PSGTAP1",26,0)
 F  L +^PS(53.55,PSGPLG):1 Q:$T
"RTN","PSGTAP1",27,0)
 D NOW^%DTC S %=%_"0000000000000",PSGPLSD=$P(^PS(53.5,PSGPLG,0),"^",3),PSGPLED=$P(^(0),"^",4) I 'PSGPLSD!'PSGPLED S QUIT=0 G QUIT
"RTN","PSGTAP1",28,0)
 I PSGTAPR S ND=$P($G(^PS(53.55,PSGPLG,0)),"^",2) I ND,$O(^(1,0)) G RESTART
"RTN","PSGTAP1",29,0)
 I $D(^PS(53.55,PSGPLG)) S DIK="^PS(53.55,",DA=PSGPLG D ^DIK
"RTN","PSGTAP1",30,0)
 S (DINUM,X)=PSGPLG,DIC="^PS(53.55,",DIC(0)="L" K DD,DO D FILE^DICN I Y'>0 S QUIT=0 G QUIT
"RTN","PSGTAP1",31,0)
 S ATCFF=+$P($G(^PS(59.7,1,26)),"^",7)
"RTN","PSGTAP1",32,0)
 S ^PS(53.55,PSGPLG,1,0)="^53.56A",BLKS="                      ",G=PSGPLG,(DD,PSGORD,PSJJORD,ND,P,R,ST,TM,W)=""
"RTN","PSGTAP1",33,0)
 F  S TM=$O(^PS(53.5,"AC",G,TM)) Q:TM=""  F  S W=$O(^PS(53.5,"AC",G,TM,W)) Q:W=""  F  S R=$O(^PS(53.5,"AC",G,TM,W,R)) Q:R=""  F  S P=$O(^PS(53.5,"AC",G,TM,W,R,P)) Q:P=""  D
"RTN","PSGTAP1",34,0)
 .S (DFN,PSGP)=+$P(P,"^",2) D PID^VADPT S PND=$S($D(^DPT(PSGP,0)):^(0),1:0),PL=$E($S($D(^(.1)):^(.1),1:"N/F")_BLKS,1,12),PN=$E($P(PND,"^")_BLKS,1,20),PID=$E(VA("PID")_BLKS,1,12)
"RTN","PSGTAP1",35,0)
 .S ST="" F  S ST=$O(^PS(53.5,"AC",G,TM,W,R,P,ST)) Q:ST=""  Q:"Z"[ST  F  S PSGORD=$O(^PS(53.5,"AC",G,TM,W,R,P,ST,PSGORD)) Q:PSGORD=""  S ON=+$G(^PS(53.5,G,1,PSGP,1,$P(PSGORD,"^",2),0)),DD="" D
"RTN","PSGTAP1",36,0)
 ..F  S DD=$O(^PS(53.5,"AC",G,TM,W,R,P,ST,PSGORD,DD)) Q:DD=""  S D=+$P(DD,"^",2),C=$G(^PS(53.5,G,1,PSGP,1,$P(PSGORD,"^",2),1,D,0)),O=$P(C,"^"),C=$S($P(C,"^",3)]"":+$P(C,"^",3),1:$P(C,"^",2)) I C>0,C?1.3N D
"RTN","PSGTAP1",37,0)
 ...S DN=$G(^PS(55,PSGP,5,ON,1,D,0))
"RTN","PSGTAP1",38,0)
 ...S DNUNIT=$P(DN,"^",2) I DNUNIT#1,ATCFF,+DNUNIT S DNUNIT=(DNUNIT\1)+1
"RTN","PSGTAP1",39,0)
 ...I DN,'(DNUNIT#1),$S('$P(DN,"^",3):1,1:DT<$P(DN,"^",3)) S A=$P($G(^PSDRUG(+DN,8.5)),"^",2) I A]"",$D(^(212,"AC",PSGPLWG)) S A=$E(A_BLKS,1,15),C=$S(DNUNIT:DNUNIT,1:1),C=$E("000",1,3-$L(C))_C D OS
"RTN","PSGTAP1",40,0)
 ;
"RTN","PSGTAP1",41,0)
SET ; write ^TMP global to ACT file
"RTN","PSGTAP1",42,0)
 S ND=0,(X,Y)="^TMP(""PSGATC"","_$J,X=X_")"
"RTN","PSGTAP1",43,0)
 F  S X=$Q(@X) Q:X'[Y  S ND=ND+1,^PS(53.55,PSGPLG,1,ND,0)=$G(@X)
"RTN","PSGTAP1",44,0)
 S QUIT=$O(^PS(53.55,PSGPLG,1,0)) G:'QUIT QUIT S ^(0)="^53.56A^"_ND_"^"_ND,ND=0
"RTN","PSGTAP1",45,0)
 ;
"RTN","PSGTAP1",46,0)
RESTART ;
"RTN","PSGTAP1",47,0)
 X ^%ZOSF("LABOFF") S QUIT=0
"RTN","PSGTAP1",48,0)
 F  S ND=$O(^PS(53.55,PSGPLG,1,ND)) Q:'ND  S A=$G(^(ND,0)) I A]"" S A=$C(50)_$C(52)_$P(A,"^")_$C(53)_$C(54)_$P(A,"^",2)_$C(55)_$C(13) S PSGTAG=$S(IOT="CHAN":"S3",'PSGSPD:"S1",1:"S2") D @PSGTAG Q:QUIT  S $P(^PS(53.55,PSGPLG,0),"^",2)=ND
"RTN","PSGTAP1",49,0)
 ;
"RTN","PSGTAP1",50,0)
QUIT ;
"RTN","PSGTAP1",51,0)
 K ^TMP("PSGATC",$J)
"RTN","PSGTAP1",52,0)
 I 'QUIT S DIK="^PS(53.55,",DA=PSGPLG D ^DIK K DIK
"RTN","PSGTAP1",53,0)
 L -^PS(53.55,PSGPLG)
"RTN","PSGTAP1",54,0)
 D UNLOCK^PSGPLUTL(PSGPLG,"PSGTAP") D ^%ZISC
"RTN","PSGTAP1",55,0)
 Q
"RTN","PSGTAP1",56,0)
 ;
"RTN","PSGTAP1",57,0)
OS ; order record set
"RTN","PSGTAP1",58,0)
 S ND2=$G(^PS(55,PSGP,5,ON,2)),SD=$P(ND2,U,2) I $S($P(SD,".")>$P(^PS(53.5,PSGPLG,0),"^",4):1,$P(ND2,U)["PRN":1,1:0) Q
"RTN","PSGTAP1",59,0)
 S FD=$P($P(ND2,U,4),"."),T=$P(ND2,U,6),PST=$P(^PS(55,PSGP,5,ON,0),"^",7)
"RTN","PSGTAP1",60,0)
 S QST=$S(PST="C"!(PST="O"):PST,PST="OC":"OA",PST="P":"OP",$P(ND2,U)["PRN":"OR",1:"CR")
"RTN","PSGTAP1",61,0)
 ;S:PST="OC" PSGMAR("ZZZ")="999"
"RTN","PSGTAP1",62,0)
 D:PST'="OC" DTS
"RTN","PSGTAP1",63,0)
 Q:'$D(PSGMAR)
"RTN","PSGTAP1",64,0)
 I $P(ND2,U,6)="D",$P(ND2,U,5)="" S $P(ND2,U,5)=$E($P($P(ND2,U,2),".",2)_"0000",1,4)
"RTN","PSGTAP1",65,0)
 S X="" F  S X=$O(PSGMAR(X)) Q:X=""  D
"RTN","PSGTAP1",66,0)
 .S ^TMP("PSGATC",$J,TM,W,R,PN_"^"_PSGP,X,QST,PSGORD,DD)=PN_PID_PL_"BAT"_A_"1 ^"_C_$E($E(X,4,5)_$E(X,6,7)_$E(X,2,3)_$P(X,".",2)_"000",1,10)
"RTN","PSGTAP1",67,0)
 K PSGMAR Q
"RTN","PSGTAP1",68,0)
 ;
"RTN","PSGTAP1",69,0)
DTS ;
"RTN","PSGTAP1",70,0)
 S PSGPLO=ON,PSGMFOR="",PSGPLS=PSGPLSD,PSGPLF=PSGPLED D ^PSJPL0
"RTN","PSGTAP1",71,0)
 K PSGPLO,PSGPLS,PSGPLF
"RTN","PSGTAP1",72,0)
 Q
"VER")
8.0^22.0
"BLD",9146,6)
^238
**END**
**END**
