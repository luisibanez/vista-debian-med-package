Released PSJ*5*243 SEQ #211
Extracted from mail message
**KIDS**:PSJ*5.0*243^

**INSTALL NAME**
PSJ*5.0*243
"BLD",6325,0)
PSJ*5.0*243^INPATIENT MEDICATIONS^0^3110216^y
"BLD",6325,1,0)
^^48^48^3110125^^
"BLD",6325,1,1,0)
FY11 Pharmacy Legacy Enhancements (PSPO 738/PSI-07-122)
"BLD",6325,1,2,0)
 
"BLD",6325,1,3,0)
The enhancement contained in this patch revises the existing display in
"BLD",6325,1,4,0)
the Non-Verified/Pending Orders [PSJU VBW] option from a patient list
"BLD",6325,1,5,0)
sorted alphabetically by TEAM and PATIENT NAME to a categorized listing
"BLD",6325,1,6,0)
sorted by a patient's highest priority order.
"BLD",6325,1,7,0)
 
"BLD",6325,1,8,0)
Patients that have one or more STAT Pending or Non-Verified orders will
"BLD",6325,1,9,0)
be listed first, followed by patients with one or more ASAP Pending or
"BLD",6325,1,10,0)
Non-Verified orders, and then all other patients that have only ROUTINE
"BLD",6325,1,11,0)
Pending or Non-Verified orders. Within a given priority, patients will
"BLD",6325,1,12,0)
continue to be sub-sorted alphabetically by TEAM name and PATIENT name.
"BLD",6325,1,13,0)
 
"BLD",6325,1,14,0)
Examples shown here.  Note the addition of PRIORITY column.
"BLD",6325,1,15,0)
 
"BLD",6325,1,16,0)
 
"BLD",6325,1,17,0)
Search for Patients by WARD:
"BLD",6325,1,18,0)
----------------------------
"BLD",6325,1,19,0)
 
"BLD",6325,1,20,0)
ORDERS NOT VERIFIED BY A PHARMACIST - GEN MED
"BLD",6325,1,21,0)
 
"BLD",6325,1,22,0)
 No.   TEAM              PRIORITY     PATIENT
"BLD",6325,1,23,0)
--------------------------------------------------------------------------
"BLD",6325,1,24,0)
   1  Not Found          STAT         DIXPATNM,FORT (0294)
"BLD",6325,1,25,0)
   2  Not Found          STAT         JACPATNM,OOH YEAH (0407)
"BLD",6325,1,26,0)
   3  Not Found          ASAP         TESPATNM,COLLATERAL (0177)
"BLD",6325,1,27,0)
   4  GENERAL MED ONE    ROUTINE      VOLPATNM,JOHNNY (0258)
"BLD",6325,1,28,0)
   5  GENERAL MED TWO    ROUTINE      NOYPATNM,FORMT (0017)
"BLD",6325,1,29,0)
   6  Not Found          ROUTINE      JONPATNM,AAAAA (0513)
"BLD",6325,1,30,0)
   7  Not Found          ROUTINE      NAGPATNM,STEVEN G (0139)
"BLD",6325,1,31,0)
   8  Not Found          ROUTINE      TESPATNMTHREE,COLLATERAL (0181)
"BLD",6325,1,32,0)
   9  Not Found          ROUTINE      TESPATNMTWO,COLLATERAL (0180)
"BLD",6325,1,33,0)
Select 1 - 9:
"BLD",6325,1,34,0)
 
"BLD",6325,1,35,0)
 
"BLD",6325,1,36,0)
 
"BLD",6325,1,37,0)
Search for Patient by PRIORITY:
"BLD",6325,1,38,0)
 
"BLD",6325,1,39,0)
 
"BLD",6325,1,40,0)
ORDERS NOT VERIFIED BY A PHARMACIST - STAT
"BLD",6325,1,41,0)
 
"BLD",6325,1,42,0)
 No.   TEAM              PRIORITY     PATIENT
"BLD",6325,1,43,0)
--------------------------------------------------------------------------
"BLD",6325,1,44,0)
   1  GENERAL MED ONE    STAT         BANPATNM,JAMES E (0091)
"BLD",6325,1,45,0)
   2  GENERAL MED ONE    STAT         DIXPATNM,FORT (0294)
"BLD",6325,1,46,0)
   3  GENERAL MED TWO    STAT         JACPATNM,OOH YEAH (0407)
"BLD",6325,1,47,0)
   4  Not Found          STAT         MARPATNM,TEST (0734)
"BLD",6325,1,48,0)
Select 1 - 4:
"BLD",6325,4,0)
^9.64PA^^0
"BLD",6325,6)
7^
"BLD",6325,6.3)
45
"BLD",6325,"ABPKG")
n
"BLD",6325,"KRN",0)
^9.67PA^779.2^20
"BLD",6325,"KRN",.4,0)
.4
"BLD",6325,"KRN",.401,0)
.401
"BLD",6325,"KRN",.402,0)
.402
"BLD",6325,"KRN",.403,0)
.403
"BLD",6325,"KRN",.5,0)
.5
"BLD",6325,"KRN",.84,0)
.84
"BLD",6325,"KRN",3.6,0)
3.6
"BLD",6325,"KRN",3.8,0)
3.8
"BLD",6325,"KRN",9.2,0)
9.2
"BLD",6325,"KRN",9.8,0)
9.8
"BLD",6325,"KRN",9.8,"NM",0)
^9.68A^3^3
"BLD",6325,"KRN",9.8,"NM",1,0)
PSGVBW^^0^B96214965
"BLD",6325,"KRN",9.8,"NM",2,0)
PSGVBW0^^0^B42020216
"BLD",6325,"KRN",9.8,"NM",3,0)
PSGSEL^^0^B41117725
"BLD",6325,"KRN",9.8,"NM","B","PSGSEL",3)

"BLD",6325,"KRN",9.8,"NM","B","PSGVBW",1)

"BLD",6325,"KRN",9.8,"NM","B","PSGVBW0",2)

"BLD",6325,"KRN",19,0)
19
"BLD",6325,"KRN",19.1,0)
19.1
"BLD",6325,"KRN",101,0)
101
"BLD",6325,"KRN",409.61,0)
409.61
"BLD",6325,"KRN",771,0)
771
"BLD",6325,"KRN",779.2,0)
779.2
"BLD",6325,"KRN",870,0)
870
"BLD",6325,"KRN",8989.51,0)
8989.51
"BLD",6325,"KRN",8989.52,0)
8989.52
"BLD",6325,"KRN",8994,0)
8994
"BLD",6325,"KRN","B",.4,.4)

"BLD",6325,"KRN","B",.401,.401)

"BLD",6325,"KRN","B",.402,.402)

"BLD",6325,"KRN","B",.403,.403)

"BLD",6325,"KRN","B",.5,.5)

"BLD",6325,"KRN","B",.84,.84)

"BLD",6325,"KRN","B",3.6,3.6)

"BLD",6325,"KRN","B",3.8,3.8)

"BLD",6325,"KRN","B",9.2,9.2)

"BLD",6325,"KRN","B",9.8,9.8)

"BLD",6325,"KRN","B",19,19)

"BLD",6325,"KRN","B",19.1,19.1)

"BLD",6325,"KRN","B",101,101)

"BLD",6325,"KRN","B",409.61,409.61)

"BLD",6325,"KRN","B",771,771)

"BLD",6325,"KRN","B",779.2,779.2)

"BLD",6325,"KRN","B",870,870)

"BLD",6325,"KRN","B",8989.51,8989.51)

"BLD",6325,"KRN","B",8989.52,8989.52)

"BLD",6325,"KRN","B",8994,8994)

"BLD",6325,"QDEF")
^^^^NO^^^^NO^^NO
"BLD",6325,"QUES",0)
^9.62^^
"BLD",6325,"REQB",0)
^9.611^4^3
"BLD",6325,"REQB",1,0)
PSJ*5.0*124^2
"BLD",6325,"REQB",2,0)
PSJ*5.0*145^2
"BLD",6325,"REQB",4,0)
PSJ*5.0*241^2
"BLD",6325,"REQB","B","PSJ*5.0*124",1)

"BLD",6325,"REQB","B","PSJ*5.0*145",2)

"BLD",6325,"REQB","B","PSJ*5.0*241",4)

"MBREQ")
0
"PKG",197,-1)
1^1
"PKG",197,0)
INPATIENT MEDICATIONS^PSJ^UNIT DOSE AND IVS
"PKG",197,20,0)
^9.402P^^
"PKG",197,22,0)
^9.49I^1^1
"PKG",197,22,1,0)
5.0^2971215^2980917^11712
"PKG",197,22,1,"PAH",1,0)
243^3110216^10000000009
"PKG",197,22,1,"PAH",1,1,0)
^^48^48^3110216
"PKG",197,22,1,"PAH",1,1,1,0)
FY11 Pharmacy Legacy Enhancements (PSPO 738/PSI-07-122)
"PKG",197,22,1,"PAH",1,1,2,0)
 
"PKG",197,22,1,"PAH",1,1,3,0)
The enhancement contained in this patch revises the existing display in
"PKG",197,22,1,"PAH",1,1,4,0)
the Non-Verified/Pending Orders [PSJU VBW] option from a patient list
"PKG",197,22,1,"PAH",1,1,5,0)
sorted alphabetically by TEAM and PATIENT NAME to a categorized listing
"PKG",197,22,1,"PAH",1,1,6,0)
sorted by a patient's highest priority order.
"PKG",197,22,1,"PAH",1,1,7,0)
 
"PKG",197,22,1,"PAH",1,1,8,0)
Patients that have one or more STAT Pending or Non-Verified orders will
"PKG",197,22,1,"PAH",1,1,9,0)
be listed first, followed by patients with one or more ASAP Pending or
"PKG",197,22,1,"PAH",1,1,10,0)
Non-Verified orders, and then all other patients that have only ROUTINE
"PKG",197,22,1,"PAH",1,1,11,0)
Pending or Non-Verified orders. Within a given priority, patients will
"PKG",197,22,1,"PAH",1,1,12,0)
continue to be sub-sorted alphabetically by TEAM name and PATIENT name.
"PKG",197,22,1,"PAH",1,1,13,0)
 
"PKG",197,22,1,"PAH",1,1,14,0)
Examples shown here.  Note the addition of PRIORITY column.
"PKG",197,22,1,"PAH",1,1,15,0)
 
"PKG",197,22,1,"PAH",1,1,16,0)
 
"PKG",197,22,1,"PAH",1,1,17,0)
Search for Patients by WARD:
"PKG",197,22,1,"PAH",1,1,18,0)
----------------------------
"PKG",197,22,1,"PAH",1,1,19,0)
 
"PKG",197,22,1,"PAH",1,1,20,0)
ORDERS NOT VERIFIED BY A PHARMACIST - GEN MED
"PKG",197,22,1,"PAH",1,1,21,0)
 
"PKG",197,22,1,"PAH",1,1,22,0)
 No.   TEAM              PRIORITY     PATIENT
"PKG",197,22,1,"PAH",1,1,23,0)
--------------------------------------------------------------------------
"PKG",197,22,1,"PAH",1,1,24,0)
   1  Not Found          STAT         DIXPATNM,FORT (0294)
"PKG",197,22,1,"PAH",1,1,25,0)
   2  Not Found          STAT         JACPATNM,OOH YEAH (0407)
"PKG",197,22,1,"PAH",1,1,26,0)
   3  Not Found          ASAP         TESPATNM,COLLATERAL (0177)
"PKG",197,22,1,"PAH",1,1,27,0)
   4  GENERAL MED ONE    ROUTINE      VOLPATNM,JOHNNY (0258)
"PKG",197,22,1,"PAH",1,1,28,0)
   5  GENERAL MED TWO    ROUTINE      NOYPATNM,FORMT (0017)
"PKG",197,22,1,"PAH",1,1,29,0)
   6  Not Found          ROUTINE      JONPATNM,AAAAA (0513)
"PKG",197,22,1,"PAH",1,1,30,0)
   7  Not Found          ROUTINE      NAGPATNM,STEVEN G (0139)
"PKG",197,22,1,"PAH",1,1,31,0)
   8  Not Found          ROUTINE      TESPATNMTHREE,COLLATERAL (0181)
"PKG",197,22,1,"PAH",1,1,32,0)
   9  Not Found          ROUTINE      TESPATNMTWO,COLLATERAL (0180)
"PKG",197,22,1,"PAH",1,1,33,0)
Select 1 - 9:
"PKG",197,22,1,"PAH",1,1,34,0)
 
"PKG",197,22,1,"PAH",1,1,35,0)
 
"PKG",197,22,1,"PAH",1,1,36,0)
 
"PKG",197,22,1,"PAH",1,1,37,0)
Search for Patient by PRIORITY:
"PKG",197,22,1,"PAH",1,1,38,0)
 
"PKG",197,22,1,"PAH",1,1,39,0)
 
"PKG",197,22,1,"PAH",1,1,40,0)
ORDERS NOT VERIFIED BY A PHARMACIST - STAT
"PKG",197,22,1,"PAH",1,1,41,0)
 
"PKG",197,22,1,"PAH",1,1,42,0)
 No.   TEAM              PRIORITY     PATIENT
"PKG",197,22,1,"PAH",1,1,43,0)
--------------------------------------------------------------------------
"PKG",197,22,1,"PAH",1,1,44,0)
   1  GENERAL MED ONE    STAT         BANPATNM,JAMES E (0091)
"PKG",197,22,1,"PAH",1,1,45,0)
   2  GENERAL MED ONE    STAT         DIXPATNM,FORT (0294)
"PKG",197,22,1,"PAH",1,1,46,0)
   3  GENERAL MED TWO    STAT         JACPATNM,OOH YEAH (0407)
"PKG",197,22,1,"PAH",1,1,47,0)
   4  Not Found          STAT         MARPATNM,TEST (0734)
"PKG",197,22,1,"PAH",1,1,48,0)
Select 1 - 4:
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
3
"RTN","PSGSEL")
0^3^B41117725^B40642983
"RTN","PSGSEL",1,0)
PSGSEL ;BIR/CML3 - SELECT ORDERS BY WARD, WARD GROUP, PATIENT, OR PRIORITY ;05/15/98 9:26 AM
"RTN","PSGSEL",2,0)
 ;;5.0;INPATIENT MEDICATIONS;**3,111,145,243**;DEC 16, 1997;Build 45
"RTN","PSGSEL",3,0)
SELECT ; give user choice to select search method
"RTN","PSGSEL",4,0)
 S:'$D(PSGSSH) PSGSSH="GENERIC"
"RTN","PSGSEL",5,0)
 ;
"RTN","PSGSEL",6,0)
 F  W !!,"Select by GROUP (G), WARD (W), CLINIC (C), "_$S($G(PSGPRIFL):"PATIENT (P) or PRIORITY (PR)",1:"or PATIENT (P)")_": " R PSGSS:DTIME W:'$T $C(7) S:'$T PSGSS="^" Q:"^"[PSGSS  D CHK I ",C,G,P,W,PR,"[(","_PSGSS_",") Q
"RTN","PSGSEL",7,0)
 N PSGPRMT
"RTN","PSGSEL",8,0)
 S PSGPRMT=$P(XQY0,U,1)
"RTN","PSGSEL",9,0)
 ;DAM   5-01-07  Adding new prompt.  If user selects to print by WARD, he is prompted to "Include Clinic Orders?"  If user selects to print by CLINIC, he is prompted to "Include Ward Orders?"
"RTN","PSGSEL",10,0)
 S PSGINCL=""
"RTN","PSGSEL",11,0)
 I PSGSS["W" D
"RTN","PSGSEL",12,0)
 . I (PSGPRMT'["MAR") Q
"RTN","PSGSEL",13,0)
 . N DIR,DUOUT,DIRUT,DTOUT,X,Y
"RTN","PSGSEL",14,0)
 . S DIR(0)="Y"
"RTN","PSGSEL",15,0)
 . W !
"RTN","PSGSEL",16,0)
 . S DIR("A")="Include Clinic Orders"
"RTN","PSGSEL",17,0)
 . D ^DIR
"RTN","PSGSEL",18,0)
 . I Y=1 S PSGINCL=1
"RTN","PSGSEL",19,0)
 . I ($D(DTOUT)!$D(DUOUT)!$D(DIRUT)) S Y=0
"RTN","PSGSEL",20,0)
 ;
"RTN","PSGSEL",21,0)
 S PSGINWD=""
"RTN","PSGSEL",22,0)
 I PSGSS["C" D
"RTN","PSGSEL",23,0)
 . I (PSGPRMT'["MAR") Q
"RTN","PSGSEL",24,0)
 . N DIR,DUOUT,DIRUT,DTOUT,X,Y
"RTN","PSGSEL",25,0)
 . S DIR(0)="Y"
"RTN","PSGSEL",26,0)
 . W !
"RTN","PSGSEL",27,0)
 . S DIR("A")="Include Ward Orders"
"RTN","PSGSEL",28,0)
 . D ^DIR
"RTN","PSGSEL",29,0)
 . I Y=1 S PSGINWD=1
"RTN","PSGSEL",30,0)
 . I ($D(DTOUT)!$D(DUOUT)!$D(DIRUT)) S Y=0
"RTN","PSGSEL",31,0)
 ;End DAM 5-01-07
"RTN","PSGSEL",32,0)
 ;
"RTN","PSGSEL",33,0)
 K PSGSSA Q:PSGSS'="G"
"RTN","PSGSEL",34,0)
 F  R !!,"Select by WARD GROUP (W) or CLINIC GROUP (C): ",PSGSS2:DTIME W:'$T $C(7) S:'$T PSGSS2="^" Q:"^"[PSGSS2  D CHK2 I "CW"[PSGSS2 Q
"RTN","PSGSEL",35,0)
 G SELECT:PSGSS2="" S PSGSS=$S(PSGSS2="C":"L",1:"G")
"RTN","PSGSEL",36,0)
 ;
"RTN","PSGSEL",37,0)
 ;DAM 5-01-07  Adding new prompt.  If user selects to print by WARD GROUP, he is prompted to "Include Clinic Orders?"  If user selects to print by CLINIC GROUP, he is prompted to "Include Ward Orders?"
"RTN","PSGSEL",38,0)
 S PSGINCLG=""
"RTN","PSGSEL",39,0)
 I PSGSS2["W" D
"RTN","PSGSEL",40,0)
 . I (PSGPRMT'["MAR") Q
"RTN","PSGSEL",41,0)
 . N DIR,DUOUT,DIRUT,DTOUT,X,Y
"RTN","PSGSEL",42,0)
 . S DIR(0)="Y"
"RTN","PSGSEL",43,0)
 . W !
"RTN","PSGSEL",44,0)
 . S DIR("A")="Include Clinic Orders"
"RTN","PSGSEL",45,0)
 . D ^DIR
"RTN","PSGSEL",46,0)
 . I Y=1 S PSGINCLG=1
"RTN","PSGSEL",47,0)
 . I ($D(DTOUT)!$D(DUOUT)!$D(DIRUT)) S Y=0
"RTN","PSGSEL",48,0)
 ;
"RTN","PSGSEL",49,0)
 S PSGINWDG=""
"RTN","PSGSEL",50,0)
 I PSGSS2["C" D
"RTN","PSGSEL",51,0)
 . I (PSGPRMT'["MAR") Q
"RTN","PSGSEL",52,0)
 . N DIR,DUOUT,DIRUT,DTOUT,X,Y
"RTN","PSGSEL",53,0)
 . S DIR(0)="Y"
"RTN","PSGSEL",54,0)
 . W !
"RTN","PSGSEL",55,0)
 . S DIR("A")="Include Ward Orders"
"RTN","PSGSEL",56,0)
 . D ^DIR
"RTN","PSGSEL",57,0)
 . I Y=1 S PSGINWDG=1
"RTN","PSGSEL",58,0)
 . I ($D(DTOUT)!$D(DUOUT)!$D(DIRUT)) S Y=0
"RTN","PSGSEL",59,0)
 ;End DAM 5-01-07
"RTN","PSGSEL",60,0)
 ;
"RTN","PSGSEL",61,0)
 K PSGSSA Q
"RTN","PSGSEL",62,0)
 ;
"RTN","PSGSEL",63,0)
CHK ;
"RTN","PSGSEL",64,0)
 S PSGSSA="" F Q=1:1:$L(PSGSS) S PSGSSA=PSGSSA_$S($E(PSGSS,Q)'?1L:$E(PSGSS,Q),1:$C($A(PSGSS,Q)-32))
"RTN","PSGSEL",65,0)
 F X="CLINIC","GROUP","WARD","PATIENT",$S($G(PSGPRIFL):"PRIORITY",1:"PATIENT") I $P(X,PSGSSA)="" W $P(X,PSGSSA,2,99) S PSGSS=$S($E(PSGSSA,1,2)="PR":"PR",1:$E(PSGSSA)) Q
"RTN","PSGSEL",66,0)
 Q:$T  I PSGSS'?1."?" W $C(7),"  ??" S PSGSS="Z" Q
"RTN","PSGSEL",67,0)
 W ! D @PSGSSH W !!?2,"To leave this option, press the RETURN key or enter '^'." Q
"RTN","PSGSEL",68,0)
 ;
"RTN","PSGSEL",69,0)
CHK2 ;
"RTN","PSGSEL",70,0)
 S PSGSSA="" F Q=1:1:$L(PSGSS2) S PSGSSA=PSGSSA_$S($E(PSGSS2,Q)'?1L:$E(PSGSS2,Q),1:$C($A(PSGSS2,Q)-32))
"RTN","PSGSEL",71,0)
 F X="WARD","CLINIC" I $P(X,PSGSSA)="" W $P(X,PSGSSA,2,99) S PSGSS2=$E(PSGSSA) Q
"RTN","PSGSEL",72,0)
 Q:$T  I PSGSS2'?1."?" W $C(7),"  ??" S PSGSS2="Z" Q
"RTN","PSGSEL",73,0)
 W ! D @PSGSSH W !!?2,"To leave this option, press the RETURN key or enter  '^'." Q
"RTN","PSGSEL",74,0)
 ;
"RTN","PSGSEL",75,0)
HELP ; the following are the help text messages for the various options
"RTN","PSGSEL",76,0)
 ;
"RTN","PSGSEL",77,0)
GENERIC W !!,?2,"To run this option for an entire WARD GROUP, enter 'G'.  To run this option for a single WARD, enter 'W'.  To run this option for a single PATIENT, enter 'P'." Q
"RTN","PSGSEL",78,0)
 ;
"RTN","PSGSEL",79,0)
VBW W !!?2,"To verify all of the orders in an entire WARD GROUP, enter 'G'. To verify"
"RTN","PSGSEL",80,0)
 W !,"all of the orders in an entire CLINIC GROUP, enter 'CG'. To verify all of the"
"RTN","PSGSEL",81,0)
 W !,"orders in a single WARD, enter 'W'. To verify all of the orders in a single"
"RTN","PSGSEL",82,0)
 W !,"CLINIC, enter 'C'. To verify all of the orders for a single PATIENT, enter"
"RTN","PSGSEL",83,0)
 W !,"'P'."
"RTN","PSGSEL",84,0)
 I $G(PSGPRIFL) W " To verify all of the orders for a single PRIORITY, enter 'PR'."
"RTN","PSGSEL",85,0)
 Q
"RTN","PSGSEL",86,0)
 ;
"RTN","PSGSEL",87,0)
EXP W !?2,"To print STOP ORDER NOTICES for an entire WARD GROUP, enter 'G'.  To print  notices for a single WARD, enter 'W'.  To print notices for a single PATIENT, enter 'P'." Q
"RTN","PSGSEL",88,0)
 ;
"RTN","PSGSEL",89,0)
MAR W !?2,"To run a Medication Administration Record (MAR or CMR) for an entire WARD",!,"GROUP, enter 'G'.  To run an MAR for a single WARD, enter 'W'.  To run an   MAR for a single PATIENT, enter 'P'." Q
"RTN","PSGSEL",90,0)
 ;
"RTN","PSGSEL",91,0)
LBL W !?2,"To print labels for all of the orders in an entire WARD GROUP, enter 'G'.   To print labels for all of the orders in a WARD, enter 'W'.  To print the",!,"labels for a single PATIENT, enter 'P'." Q
"RTN","PSGSEL",92,0)
 ;
"RTN","PSGSEL",93,0)
TCR W !?2,"To run a TOTAL COST REPORT for an entire WARD GROUP, enter 'G'.  To run the report for a single WARD, enter 'W'.  To run the report for a single PATIENT,",!,"or a set of PATIENTS, enter 'P'." Q
"RTN","PSGSEL",94,0)
 ;
"RTN","PSGSEL",95,0)
PPR W !?2,"To print PATIENT PROFILES for an entire WARD GROUP, enter 'G'.  To print    profiles for a single WARD, enter 'W'.  To print a profile for a single",!,"PATIENT, enter 'P'." Q
"RTN","PSGSEL",96,0)
 ;
"RTN","PSGSEL",97,0)
AP W !?2,"To print ACTION PROFILES for an entire WARD GROUP, enter 'G'.  To print",!,"ACTION PROFILES for a single WARD, enter 'W'.  To print an ACTION PROFILE",!,"for a single patient, enter 'P'.  PLEASE NOTE that only patients"
"RTN","PSGSEL",98,0)
 W " with active",!,"orders are selectable, and that only patients with active orders will print for",!,"a ward or ward group." Q
"RTN","PSGSEL",99,0)
ORVC W !?2,"To complete orders for an entire WARD GROUP, enter 'G'. To complete orders for an entire CLINIC GROUP, enter 'CG'"
"RTN","PSGSEL",100,0)
 W "To complete orders for a single WARD, enter 'W'.  To complete orders for a single PATIENT, enter",!,"a 'P'." Q
"RTN","PSGSEL",101,0)
 ;
"RTN","PSGSEL",102,0)
PRI ; Priompt for Priority along with Group, Ward, Clinic and Patient
"RTN","PSGSEL",103,0)
 S PSGPRIFL=1 D SELECT K PSGPRIFL
"RTN","PSGSEL",104,0)
 Q
"RTN","PSGVBW")
0^1^B96214965^B65649356
"RTN","PSGVBW",1,0)
PSGVBW ;BIR/CML3,MV - VERIFY ORDERS BY WARD, WARD GROUP, PATIENT, OR PRIORITY ;10/22/98 3:14 PM
"RTN","PSGVBW",2,0)
 ;;5.0;INPATIENT MEDICATIONS;**5,16,39,59,62,67,58,81,80,110,111,133,139,155,241,243**;DEC 16, 1997;Build 45
"RTN","PSGVBW",3,0)
 ;
"RTN","PSGVBW",4,0)
 ; Reference to ^PS(55 is supported by DBIA #2191
"RTN","PSGVBW",5,0)
 ; Reference to ^PS(51.1 is supported by DBIA #2177
"RTN","PSGVBW",6,0)
 ; Reference to ^DPT is supported by DBIA #10035
"RTN","PSGVBW",7,0)
 ;
"RTN","PSGVBW",8,0)
 N PSJNEW,PSGPTMP,PPAGE,CL,CG S PSJNEW=1
"RTN","PSGVBW",9,0)
START ; Lookup patient by ward group, ward, priority, or patient; depending on value of PSGSS
"RTN","PSGVBW",10,0)
 ; 
"RTN","PSGVBW",11,0)
 D ENCV^PSGSETU I $D(XQUIT) K XQUIT Q
"RTN","PSGVBW",12,0)
 D ^PSIVXU I $D(XQUIT) K XQUIT Q
"RTN","PSGVBW",13,0)
 D NOW^%DTC S PSGDT=%
"RTN","PSGVBW",14,0)
 I '$D(^XTMP("PSJPVNV")) D
"RTN","PSGVBW",15,0)
 .K DIR S DIR(0)="Y",DIR("A")="Display an Order Summary",DIR("B")="NO"
"RTN","PSGVBW",16,0)
 .S DIR("?",1)="Enter 'YES' to see a summary of orders by type and ward group",DIR("?")="or 'NO' to go directly to patient selection."
"RTN","PSGVBW",17,0)
 .D ^DIR K DIR Q:$D(DIRUT)!$D(DUOUT)  I Y D CNTORDRS^PSGVBWU
"RTN","PSGVBW",18,0)
 K ^TMP("PSJ",$J) S PSGPXN=0 D GTOOP G:$D(DIRUT) DONE L +^PS(53.45,PSJSYSP):1 E  D LOCKERR^PSJOE G DONE
"RTN","PSGVBW",19,0)
 S PSGSSH="VBW",PSGPXN=0,PSJPROT=$S($P(PSJSYSU,";",3)=3:3,$G(PSJRNF):3,$G(PSJIRNF):3,1:1)
"RTN","PSGVBW",20,0)
 S PSGVBWW=$S(PSJTOO=1:"NON-VERIFIED",PSJTOO=2:"PENDING",1:"NON-VERIFIED AND/OR PENDING")
"RTN","PSGVBW",21,0)
 F  K ^TMP("PSJSELECT",$J) D PRI^PSGSEL Q:"^"[PSGSS  F  S (PSGP,WD,WG)=0 S PSGPTMP=0,PPAGE=1 K PSGPRIF D @PSGSS Q:+Y'>0  D GO
"RTN","PSGVBW",22,0)
 ;
"RTN","PSGVBW",23,0)
DONE ; Cleanup
"RTN","PSGVBW",24,0)
 D DONE2
"RTN","PSGVBW",25,0)
 K SETWDN,PTPRI,SETTM,SETPN,SUBS,TMPWD,STATUS
"RTN","PSGVBW",26,0)
 K CHK,D0,DRGI,FQC,J,ND,ON,PN,PSGODT,PSGOEA,PSGOP,PSGSS,PSGSSH,RB,SD,ST,TM,WD,WDN,WG,PRI,PSJPNV,PSJCT,PSGCLF,PSGPRIF,LIDT,WDNAME,IFPRI
"RTN","PSGVBW",27,0)
 K PSGODDD,PSGOEORF,PSJORL,PSJORPCL,PSJORTOU,PSJORVP,PSGTOL,PSJTOO,PSGUOW,PSGONV,PX,PSGOEAV,PSGPX,PSGVBWTO,PSGVBWW,PSJOPC,PSGOENOF,PSJPROT,PSJLM,PSJASK
"RTN","PSGVBW",28,0)
 K PSJPAC,PSJINDEX,PSJCNT,PSIVSN,PSGWORP1,PSGWORP2,PSGVBY,PSGVBWN,PSGVBTM,PSGVBPN,PSGPXN,PSGPRIN,PSGPRD,PSGINWD,PSGINCL,PRDON,PRDNS,PRD,PPN,ORDT
"RTN","PSGVBW",29,0)
 L -^PS(53.45,PSJSYSP) G:$G(PSGPXN) ^PSGPER1 D ENKV^PSGSETU K ND Q
"RTN","PSGVBW",30,0)
 ;
"RTN","PSGVBW",31,0)
DONE2 ; Partial Cleanup
"RTN","PSGVBW",32,0)
 K ^TMP("PSGVBW",$J),^TMP("PSGVBW2",$J),^TMP("PSGVBW3",$J),^TMP("PSJSELECT",$J),^TMP("PSJLIST",$J),^TMP("PSJON",$J)
"RTN","PSGVBW",33,0)
 K PRD
"RTN","PSGVBW",34,0)
 Q
"RTN","PSGVBW",35,0)
 ;
"RTN","PSGVBW",36,0)
GO ; Find and display matching patients
"RTN","PSGVBW",37,0)
 I PSGSS'="P" W !,"...a few moments, please..." K ^TMP("PSGVBW",$J),^TMP("PSGVBW2",$J) D ARRAY K CHK,ON,PN,RB,SD,TM,WD,WDN,WG,X,Y
"RTN","PSGVBW",38,0)
 I PSGSS'="P",'$D(^TMP("PSGVBW",$J)) W !,$C(7),"NO ",PSGVBWW," ORDERS FOR ",$S(PSGSS="P":"PATIENT",PSGSS="L":"CLINIC GROUP",PSGSS="C":"CLINIC",PSGSS="PR":"PRIORITY",1:"WARD"),$S(PSGSS="G":" GROUP",1:"")," SELECTED." Q
"RTN","PSGVBW",39,0)
 D ^PSGVBW0,DONE2 Q
"RTN","PSGVBW",40,0)
 ;
"RTN","PSGVBW",41,0)
G ; Select a Ward Group
"RTN","PSGVBW",42,0)
 K DIR S DIR(0)="FAO",DIR("A")="Select WARD GROUP: "
"RTN","PSGVBW",43,0)
 S DIR("?")="^D GDIC^PSGVBW" W ! D ^DIR
"RTN","PSGVBW",44,0)
 I Y="^OTHER" D OUTPT^PSGVBW1 Q
"RTN","PSGVBW",45,0)
GDIC ; Ward Group lookup
"RTN","PSGVBW",46,0)
 K DIC S DIC="^PS(57.5,",DIC(0)="QEMI" D ^DIC K DIC S:+Y>0 WG=+Y
"RTN","PSGVBW",47,0)
 W:X["?" !!,"Enter ""^OTHER"" to include all orders from the wards that do not",!,"belong to a ward group, or orders that have neither a ward nor a clinic.",! ;PSJ*5*241: Updated help text
"RTN","PSGVBW",48,0)
 Q
"RTN","PSGVBW",49,0)
C ; Select a Clinic
"RTN","PSGVBW",50,0)
 K DIR S DIR(0)="FAO",DIR("A")="Select CLINIC: "
"RTN","PSGVBW",51,0)
 S DIR("?")="^D CDIC^PSGVBW" W ! D ^DIR
"RTN","PSGVBW",52,0)
CDIC ; Clinic lookup
"RTN","PSGVBW",53,0)
 K DIC S DIC="^SC(",DIC(0)="QEMIZ" D ^DIC K DIC S:+Y>0 CL=+Y
"RTN","PSGVBW",54,0)
 W:X["?" !!,"Enter the clinic you want to use to select patients for processing.",!
"RTN","PSGVBW",55,0)
 Q
"RTN","PSGVBW",56,0)
L ; Select a Clinic Group
"RTN","PSGVBW",57,0)
 K DIR S DIR(0)="FAO",DIR("A")="Select CLINIC GROUP: "
"RTN","PSGVBW",58,0)
 S DIR("?")="^D LDIC^PSGVBW" W ! D ^DIR
"RTN","PSGVBW",59,0)
LDIC ; Clinic Group lookup
"RTN","PSGVBW",60,0)
 K DIC S DIC="^PS(57.8,",DIC(0)="QEMI" D ^DIC K DIC S:+Y>0 CG=+Y
"RTN","PSGVBW",61,0)
 W:X["?" !!,"Enter the name of the clinic group you want to use to select patients for processing."
"RTN","PSGVBW",62,0)
 Q
"RTN","PSGVBW",63,0)
W ; Select a Ward
"RTN","PSGVBW",64,0)
 K DIR S DIR(0)="FAO",DIR("A")="Select WARD: "
"RTN","PSGVBW",65,0)
 S DIR("?")="^D WDIC^PSGVBW" W ! D ^DIR
"RTN","PSGVBW",66,0)
 I Y="^OTHER" D OUTPT^PSGVBW1 Q
"RTN","PSGVBW",67,0)
WDIC ; Ward lookup
"RTN","PSGVBW",68,0)
 K DIC S DIC="^DIC(42,",DIC(0)="QEMIZ" D ^DIC K DIC S:+Y>0 WD=+Y
"RTN","PSGVBW",69,0)
 W:X["?" !!,"Enter ""^OTHER"" for Outpatient IV orders",!
"RTN","PSGVBW",70,0)
 Q
"RTN","PSGVBW",71,0)
PR ; Select order priority
"RTN","PSGVBW",72,0)
 K DIR S DIR(0)="SO^1:STAT;2:ASAP;3:ROUTINE"
"RTN","PSGVBW",73,0)
 S DIR("A")="Select 1-3 ",DIR("?")="        Choose a Priority."
"RTN","PSGVBW",74,0)
 S DIR("?",1)="Enter a PRIORITY to include all patients with orders containing that PRIORITY"
"RTN","PSGVBW",75,0)
 D ^DIR S:Y>0 PRD=+Y S:+Y>0 WDN=$S(PRD=1:"STAT",PRD=2:"ASAP",3:"ROUTINE")
"RTN","PSGVBW",76,0)
 Q
"RTN","PSGVBW",77,0)
P ; Select patient
"RTN","PSGVBW",78,0)
 K ^TMP("PSJSELECT",$J) S PSJCNT=1 F  D ^PSJP Q:PSGP<0  D
"RTN","PSGVBW",79,0)
 .S PSJNV=0
"RTN","PSGVBW",80,0)
 .NEW ON,XX F ON=0:0 S ON=$O(^PS(53.1,"AS","N",PSGP,ON)) Q:'ON  S ND=$P($G(^PS(53.1,ON,0)),U,4) S XX=$S(ND="U"&(PSJPAC'=2):1,ND'="U"&(PSJPAC'=1):1,1:0) I XX S PSJNV=1 Q
"RTN","PSGVBW",81,0)
 .;S PSJNV=$O(^PS(53.1,"AS","N",+PSGP,0)),PSJPEN=$O(^PS(53.1,"AS","P",+PSGP,0))
"RTN","PSGVBW",82,0)
 .S PSJPEN=$O(^PS(53.1,"AS","P",+PSGP,0))
"RTN","PSGVBW",83,0)
 .I 'PSJNV D ^PSJAC D
"RTN","PSGVBW",84,0)
 ..I '$D(PSGDT) D NOW^%DTC S PSGDT=$E(%,1,12)
"RTN","PSGVBW",85,0)
 ..S X1=$P(PSGDT,"."),X2=-2 D C^%DTC S PSGODT=X_(PSGDT#1)
"RTN","PSGVBW",86,0)
 ..I PSJPAC'=2 F ST="C","O","OC","P","R" F SD=$S(ST="O":PSJPAD,1:PSGODT):0 S SD=$O(^PS(55,PSGP,5,"AU",ST,SD)) Q:'SD!PSJNV  F ON=0:0 S ON=$O(^PS(55,PSGP,5,"AU",ST,SD,ON)) Q:'ON  I $D(^PS(55,PSGP,5,ON,0)),$P(^(0),"^",9)'["D" D IFT I  S PSJNV=1 Q
"RTN","PSGVBW",87,0)
 ..I PSJPAC'=1 F SD=+PSJPAD:0 S SD=$O(^PS(55,PSGP,"IV","AIS",SD)) Q:'SD  F ON=0:0 S ON=$O(^PS(55,PSGP,"IV","AIS",SD,ON)) Q:'ON  I $D(^PS(55,PSGP,"IV",ON,0)),$P(^(0),"^",17)'["D" D IFT2 I  S PSJNV=1 Q
"RTN","PSGVBW",88,0)
 .S X=$S(PSJTOO=1:PSJNV,PSJTOO=2:PSJPEN,1:(PSJNV+PSJPEN))
"RTN","PSGVBW",89,0)
 .I X D SETPN S ^TMP("PSJSELECT",$J,PSJCNT)=PN,^TMP("PSJSELECT",$J,"B",$P(PN,U),PSJCNT)="",PSJCNT=PSJCNT+1 Q
"RTN","PSGVBW",90,0)
 .W !,"No ",PSGVBWW," orders found for this patient."
"RTN","PSGVBW",91,0)
 S:$D(^TMP("PSJSELECT",$J)) Y=1
"RTN","PSGVBW",92,0)
 Q
"RTN","PSGVBW",93,0)
ARRAY ; put patient(s) with non-verified orders into array
"RTN","PSGVBW",94,0)
 I '$D(PSGDT) D NOW^%DTC S PSGDT=$E(%,1,12)
"RTN","PSGVBW",95,0)
 S X1=$P(PSGDT,"."),X2=-2 D C^%DTC S PSGODT=X_(PSGDT#1),PSGVBWW=$S(PSJTOO=1:"NON-VERIFIED",PSJTOO=2:"PENDING",1:"NON-VERIFIED AND/OR PENDING") I PSGSS="P" D IF S:$T ^TMP("PSGVBW",$J)=$P(PSGP(0),"^")_"^"_PSGP Q
"RTN","PSGVBW",96,0)
 G CG:PSGSS="L",CL:PSGSS="C",WD:PSGSS="W",PRI:PSGSS="PR" S WD=0 F  S WD=$O(^PS(57.5,"AC",WG,WD)) Q:'WD  D WD
"RTN","PSGVBW",97,0)
 Q
"RTN","PSGVBW",98,0)
 ;
"RTN","PSGVBW",99,0)
CG ; Find all clinics in selected clinic group
"RTN","PSGVBW",100,0)
 S CL="" F  S CL=$O(^PS(57.8,"AD",CG,CL)) Q:CL=""  D CL
"RTN","PSGVBW",101,0)
 Q
"RTN","PSGVBW",102,0)
CL ; Find all patients in selected clinic
"RTN","PSGVBW",103,0)
 S WDN=$S($D(^SC(CL,0)):$P(^(0),"^"),1:"")
"RTN","PSGVBW",104,0)
 S PSGP="",PSGCLF=1 F  S PSGP=$O(^PS(53.1,"AD",CL,PSGP)) Q:PSGP=""  D ^PSJAC,IF
"RTN","PSGVBW",105,0)
 K PSGCLF
"RTN","PSGVBW",106,0)
 Q
"RTN","PSGVBW",107,0)
WD ; Find all patients in selected ward
"RTN","PSGVBW",108,0)
 S WDN=$S($D(^DIC(42,WD,0)):$P(^(0),"^"),1:"")
"RTN","PSGVBW",109,0)
 I WDN]"" S PSGP=0 F  S PSGP=$O(^DPT("CN",WDN,PSGP)) Q:'PSGP  D
"RTN","PSGVBW",110,0)
 .I $S($D(^PS(55,"APV",PSGP)):1,$D(^PS(55,"APIV",PSGP)):1,$O(^PS(55,PSGP,5,"AUS",PSGDT)):1,1:$D(^PS(53.1,"AC",PSGP))) D ^PSJAC,IF
"RTN","PSGVBW",111,0)
 Q
"RTN","PSGVBW",112,0)
PRI ; Find orders with selected Priority
"RTN","PSGVBW",113,0)
 ; Once a patient is identified in any status index ("I", "N", or "P"), all orders for that patient are checked in the 
"RTN","PSGVBW",114,0)
 ; IF subroutine. To prevent unnecessary duplication of processing, "PSGVBW3" node of ^TMP, sorted by patient, will be 
"RTN","PSGVBW",115,0)
 ; set when a patient's orders are processed, and checked for each status index. If patient exists in the "PSGVBW3" node,
"RTN","PSGVBW",116,0)
 ; patient has already been processed, so quit.
"RTN","PSGVBW",117,0)
 N NDP2,PSGALL,ND0,PSGPRIFZ K ^TMP("PSGVBW3",$J)
"RTN","PSGVBW",118,0)
 S PSGPRIF=1 F STATUS="I","N","P" S PSGP=0 F  S PSGP=$O(^PS(53.1,"AS",STATUS,PSGP)) Q:'PSGP  Q:($D(^TMP("PSGVBW3",$J,PSGP)))  D ^PSJAC,IF
"RTN","PSGVBW",119,0)
 K ^TMP("PSGVBW3",$J)
"RTN","PSGVBW",120,0)
 Q
"RTN","PSGVBW",121,0)
IF ;BHW;PSJ*5*155;Added PSGCLF and PS(53.1,"AD" Check below.  If called from CL subroutine and the order Doesn't exist for that Clinic, then QUIT.;PSJ*5*241:Changed quit conditions
"RTN","PSGVBW",122,0)
 W "." I PSJTOO'=1 S ON=0 F  S ON=$O(^PS(53.1,"AS","P",PSGP,ON)) Q:'ON!(($G(PSGCLF))&('$D(^PS(53.1,"AD",+$G(CL),PSGP,+$G(ON)))))!(($G(WDN)="ZZ")&(+$P($G(^PS(53.1,+$G(ON),"DSS")),U,1)'=0))  D
"RTN","PSGVBW",123,0)
 .S X=$P($G(^PS(53.1,ON,0)),U,4),IFPRI=0,Y=0 I "FIU"[X D  D:Y SET
"RTN","PSGVBW",124,0)
 ..I $G(PSGPRIF) D  Q:'IFPRI
"RTN","PSGVBW",125,0)
 ...N PRIO S PRIO=$P($G(^PS(53.1,+ON,.2)),"^",4),PRIO=$S(PRIO="S":1,PRIO="A":2,1:3) S IFPRI=$S(PRD=PRIO:1,1:"")
"RTN","PSGVBW",126,0)
 ..I PSJPAC=3 S Y=1 Q
"RTN","PSGVBW",127,0)
 ..I PSJPAC=2 S Y=X'="U" Q
"RTN","PSGVBW",128,0)
 ..I PSJPAC=1 S Y=X="U"
"RTN","PSGVBW",129,0)
 I PSJTOO=2 D  Q
"RTN","PSGVBW",130,0)
 .I '$G(PSGPRIF),$D(^TMP("PSGVBW2",$J)) D SET2
"RTN","PSGVBW",131,0)
 F X="N","I" I $D(^PS(53.1,"AS",X,PSGP)) NEW XX S XX=0 D  I XX D SET K ON
"RTN","PSGVBW",132,0)
 . NEW PRIOAR F ON=0:0 S ON=$O(^PS(53.1,"AS",X,PSGP,ON)) Q:'ON!(($G(WDN)="ZZ")&(+$P($G(^PS(53.1,+$G(ON),"DSS")),U,1)'=0))  S ND=$P($G(^PS(53.1,ON,0)),U,4) S XX=$S(ND="U"&(PSJPAC'=2):1,ND'="U"&(PSJPAC'=1):1,1:0) I XX D  Q:($G(PRD)&$G(XX))
"RTN","PSGVBW",133,0)
 .. S PRIOAR=$P($G(^PS(53.1,+$G(ON),.2)),U,4) S PRIOAR=$S(PRIOAR="S":"S",PRIOAR="A":"A",1:"R")
"RTN","PSGVBW",134,0)
 .. I $G(PRD) S XX=$S(PRD=1&(PRIOAR="S"):1,PRD=2&(PRIOAR="A"):1,PRD=3&(PRIOAR="R"):1,1:0) Q
"RTN","PSGVBW",135,0)
 .. S PRIOAR(PRIOAR)=ON
"RTN","PSGVBW",136,0)
 . Q:$G(PRD)  S ON=$S($G(PRIOAR("S")):PRIOAR("S"),$G(PRIOAR("A")):PRIOAR("A"),1:$G(PRIOAR("R")))
"RTN","PSGVBW",137,0)
 S X1=$P(PSGDT,"."),X2=-2 D C^%DTC S PSGODT=X_(PSGDT#1)
"RTN","PSGVBW",138,0)
 I PSJPAC'=2 F ST="C","O","OC","P","R" F SD=$S(ST="O":PSJPAD,1:PSGODT):0 S SD=$O(^PS(55,PSGP,5,"AU",ST,SD)) Q:'SD  F ON=0:0 S ON=$O(^PS(55,PSGP,5,"AU",ST,SD,ON)) Q:'ON  I $D(^PS(55,PSGP,5,ON,0)),$P(^(0),"^",9)'["D" D IFT I  D SET
"RTN","PSGVBW",139,0)
 ;*PSJ*5*241:Expired IV orders must be one-time
"RTN","PSGVBW",140,0)
 I PSJPAC'=1 F SD=+PSJPAD:0 S SD=$O(^PS(55,PSGP,"IV","AIS",SD)) Q:'SD  F ON=0:0 S ON=$O(^PS(55,PSGP,"IV","AIS",SD,ON)) Q:'ON  D
"RTN","PSGVBW",141,0)
 .N SCH,STYPE S STYPE=0,SCH=$P($G(^PS(55,PSGP,"IV",ON,0)),U,9)
"RTN","PSGVBW",142,0)
 .S:SCH]"" SCH=$O(^PS(51.1,"APPSJ",SCH,STYPE)) S:SCH]"" STYPE=$P($G(^PS(51.1,SCH,0)),U,5)
"RTN","PSGVBW",143,0)
 .I $D(^PS(55,PSGP,"IV",ON,0)),$P(^(0),"^",17)'["D",'(($P(^(0),"^",17)="E")&($G(STYPE)'="O")) D IFT2 I  D SET
"RTN","PSGVBW",144,0)
 I '$G(PSGPRIF),$D(^TMP("PSGVBW2",$J)) D SET2
"RTN","PSGVBW",145,0)
 Q
"RTN","PSGVBW",146,0)
 ;
"RTN","PSGVBW",147,0)
IFT ; Loop through active UD orders in ^PS(55 that have not been verified by pharmacist.
"RTN","PSGVBW",148,0)
 S ND=$G(^PS(55,PSGP,5,ON,4)) I $S(SD>PSGDT:$S(ND="":1,'$P(ND,"^",$S(PSJSYSU:PSJSYSU,1:1)):1,$P(ND,"^",13):1,$P(ND,"^",19):1,$P(ND,"^",23):1,1:$P(ND,"^",16)),ST="O":$S(ND="":1,1:'$P(ND,"^",$S(PSJSYSU:PSJSYSU,1:1))),1:$P(ND,"^",16))
"RTN","PSGVBW",149,0)
 Q
"RTN","PSGVBW",150,0)
 ;
"RTN","PSGVBW",151,0)
IFT2 ; Loop through active IV orders in ^PS(55 that have not been verified by pharmacist.
"RTN","PSGVBW",152,0)
 ;S ND=$G(^PS(55,PSGP,"IV",ON,4)) I $S((SD>PSGDT)&(ND=""):1,'$P(ND,"^",$S(+PSJSYSU=1:1,1:4)):1,1:0)
"RTN","PSGVBW",153,0)
 S ND=$G(^PS(55,PSGP,"IV",ON,4))
"RTN","PSGVBW",154,0)
 I ($P($G(^PS(55,PSGP,"IV",ON,.2)),"^",4)="D")&('$P(ND,"^",$S(+PSJSYSU=1:1,1:4)))  Q
"RTN","PSGVBW",155,0)
 I $S((SD>PSGDT)&('$P(ND,"^",$S(+PSJSYSU=1:1,1:4))):1,1:0)
"RTN","PSGVBW",156,0)
 Q
"RTN","PSGVBW",157,0)
SET ; Set patient specific variables for ^TMP subscripts
"RTN","PSGVBW",158,0)
 S PRDON=""
"RTN","PSGVBW",159,0)
 I $G(ON) S PRDON=$P($G(^PS(53.1,+ON,.2)),"^",4),PRDON=$S(PRDON="A":"ASAP",PRDON="S":"STAT",PRDON="R":"ROUTINE",1:"zz")
"RTN","PSGVBW",160,0)
 S PTPRI=$S(PRDON="STAT":1,PRDON="ASAP":2,PRDON="ROUTINE":3,1:3)
"RTN","PSGVBW",161,0)
 I $G(PSGPRIF) Q:(PRD'=PTPRI)
"RTN","PSGVBW",162,0)
 K DIC,X,Y,WDNAME,TMPWD S WDNAME=$G(^DPT(+PSGP,.1)) S X=WDNAME,DIC="^DIC(42,",DIC(0)="BOXZ" D ^DIC S TMPWD=+Y
"RTN","PSGVBW",163,0)
 S TM=$S(PSJPRB="":"",1:$P($G(^PS(57.7,TMPWD,1,+$O(^PS(57.7,"AWRT",TMPWD,PSJPRB,0)),0)),"^")) S:TM="" TM="zz"
"RTN","PSGVBW",164,0)
 ;
"RTN","PSGVBW",165,0)
SETPN ; If searching for specific priority:
"RTN","PSGVBW",166,0)
 ;            -  set patient into ^TMP("PSGBW" sorted by Priority Name, Priority #, Team, Patient Name^IEN^SSN
"RTN","PSGVBW",167,0)
 ; If not searching for specific priority:
"RTN","PSGVBW",168,0)
 ;            - set patient into ^TMP("PSGVBW2" sorted by 'Patient Name^IEN^SSN', then Priority
"RTN","PSGVBW",169,0)
 ;            - set patient into ^TMP("PSGVBW3" sorted by Patient IEN
"RTN","PSGVBW",170,0)
 S PN=$P(PSGP(0),"^")_U_PSGP_U_PSJPBID
"RTN","PSGVBW",171,0)
 Q:PSGSS="P"
"RTN","PSGVBW",172,0)
 I $G(PSGPRIF) S ^TMP("PSGVBW",$J,WDN,PTPRI,TM,PN)="" Q
"RTN","PSGVBW",173,0)
 S ^TMP("PSGVBW2",$J,PN,+$G(PTPRI))=WDN_"^"_TM,^TMP("PSGVBW3",$J,+PSGP)=""
"RTN","PSGVBW",174,0)
 Q
"RTN","PSGVBW",175,0)
 ;
"RTN","PSGVBW",176,0)
SET2 ; If not searching for a specific priority,find the highest priority order associated with patient. 
"RTN","PSGVBW",177,0)
 ; Set the patient into ^TMP("PSGVBW" sorted by highest Priority Name, Priority #, Team, Patient Name^IEN^SSN
"RTN","PSGVBW",178,0)
 S SETPN="" F  S SETPN=$O(^TMP("PSGVBW2",$J,SETPN)) Q:SETPN=""  D
"RTN","PSGVBW",179,0)
 .S PTPRI=$O(^TMP("PSGVBW2",$J,SETPN,0)) Q:'$G(PTPRI)
"RTN","PSGVBW",180,0)
 .S SUBS=$G(^TMP("PSGVBW2",$J,SETPN,PTPRI)),SETWDN=$P(SUBS,"^"),SETTM=$P(SUBS,"^",2) Q:SETWDN=""!(SETTM="")
"RTN","PSGVBW",181,0)
 .S ^TMP("PSGVBW",$J,SETWDN,PTPRI,SETTM,SETPN)=""
"RTN","PSGVBW",182,0)
 K ^TMP("PSGVBW2",$J)
"RTN","PSGVBW",183,0)
 Q
"RTN","PSGVBW",184,0)
GTOOP ; Get 'Type Of Order' and Package
"RTN","PSGVBW",185,0)
 I $P(PSJSYSU,";",3)<2,'$G(PSJRNF),'$G(PSJIRNF) S PSJPAC=0,PSJTOO=1 D GTPAC Q
"RTN","PSGVBW",186,0)
 S (PSJPAC,PSJTOO)=0 W !!,"1) Non-Verified Orders",!,"2) Pending Orders",!!
"RTN","PSGVBW",187,0)
 N DIR S DIR(0)="LAO^1:2",DIR("A")="Select Order Type(s) (1-2): ",DIR("?")="^D TOH^PSGVBW" D ^DIR
"RTN","PSGVBW",188,0)
 I 'Y D EXIT("TYPE OF ORDER") Q
"RTN","PSGVBW",189,0)
 S PSJTOO=$S($L(Y)>2:3,1:$P(Y,","))
"RTN","PSGVBW",190,0)
 D GTPAC
"RTN","PSGVBW",191,0)
 I 'PSJPAC D EXIT("PACKAGE") Q
"RTN","PSGVBW",192,0)
 Q
"RTN","PSGVBW",193,0)
 ;
"RTN","PSGVBW",194,0)
GTPAC ; Prompt user for Package
"RTN","PSGVBW",195,0)
 I ($G(PSJRNF))&('$G(PSJIRNF))&(PSJTOO=2) S PSJPAC=1 Q
"RTN","PSGVBW",196,0)
 I ($G(PSJIRNF))&('$G(PSJRNF))&(PSJTOO=2) S PSJPAC=2 Q
"RTN","PSGVBW",197,0)
 W !!,"1) Unit Dose Orders",!,"2) IV Orders",!
"RTN","PSGVBW",198,0)
 K DIR S DIR(0)="LAO^1:2",DIR("A")="Select Package(s) (1-2): ",DIR("?")="^D TOH^PSGVBW" W ! D ^DIR
"RTN","PSGVBW",199,0)
 S PSJPAC=$S($L(Y)>2:3,1:$P(Y,","))
"RTN","PSGVBW",200,0)
 Q
"RTN","PSGVBW",201,0)
EXIT(X) ; Generic user error message
"RTN","PSGVBW",202,0)
 W !!,X," not selected, option terminated."
"RTN","PSGVBW",203,0)
 Q
"RTN","PSGVBW",204,0)
 ;
"RTN","PSGVBW",205,0)
TOH ; Help text
"RTN","PSGVBW",206,0)
 W !!,"SELECT FROM:",!?5,"1 - NON-VERIFIED ORDERS",!?5,"2 - PENDING ORDERS"
"RTN","PSGVBW",207,0)
 W !!?2,"Enter '1' if you want to verify non-verified orders.  Enter '2' if you",!,"want to complete pending orders.  Enter '1,2' or '1-2' if you want to do both." Q
"RTN","PSGVBW0")
0^2^B42020216^B34843910
"RTN","PSGVBW0",1,0)
PSGVBW0 ;BIR/CML3,MV - SHOW NON-VERFIED ORDERS GATHERED IN PSGVBW ;09/17/97 1:41 PM
"RTN","PSGVBW0",2,0)
 ;;5.0;INPATIENT MEDICATIONS;**29,39,53,56,95,80,110,127,124,243**;DEC 16, 1997;Build 45
"RTN","PSGVBW0",3,0)
 ;
"RTN","PSGVBW0",4,0)
 ; Reference to ^PSSLOCK is supported by DBIA #2789
"RTN","PSGVBW0",5,0)
 ; Reference to ^DIR is supported by DBIA 10026
"RTN","PSGVBW0",6,0)
 ; Reference to ^VALM is supported by DBIA 10118
"RTN","PSGVBW0",7,0)
 ;
"RTN","PSGVBW0",8,0)
START ;
"RTN","PSGVBW0",9,0)
 S (LINE,PSGOEA,PSGOEAV)="",$P(LINE,"-",81)="" S PSGPXN=$G(PSGPXN)
"RTN","PSGVBW0",10,0)
 K ^TMP("PSJLIST",$J) D:PSGSS'="P" DISPLAYW Q:'$O(^TMP("PSJSELECT",$J,0))
"RTN","PSGVBW0",11,0)
PROCESS ; Loop through selected patients and display profile/orders.
"RTN","PSGVBW0",12,0)
 K DIR,PSJPNV S PSJPNV=1
"RTN","PSGVBW0",13,0)
 I $P(PSJSYSU,";")=3 S X=$O(^TMP("PSJSELECT",$J,1)),DIR(0)="Y",DIR("A")="Do you want to print a profile for the"_$S(X:"se",1:"")_" patient"_$S(X:"s",1:""),DIR("B")="NO" D
"RTN","PSGVBW0",14,0)
 .D ^DIR K DIR I Y D ^PSJHVARS,^PSGVBWP,RESTORE^PSJHVARS
"RTN","PSGVBW0",15,0)
 .W !!,"Select profile type for order processing.",!!
"RTN","PSGVBW0",16,0)
 D ENL^PSGOU Q:"SNL"'[PSGOL
"RTN","PSGVBW0",17,0)
 F PSJCNT=0:0 S PSJCNT=$O(^TMP("PSJSELECT",$J,PSJCNT)) Q:'PSJCNT  D PROCESS1 S PSGOP=PSGP D ENQL^PSGLW:$P(PSJSYSL,"^",2)]"" Q:$G(PSJGOTO)="E"  I $D(^TMP("PSJSELECT",$J,+$G(PSJGOTO))) S PSJCNT=PSJGOTO-1
"RTN","PSGVBW0",18,0)
 Q
"RTN","PSGVBW0",19,0)
PROCESS1 ;
"RTN","PSGVBW0",20,0)
 S PSJPN=$G(^TMP("PSJSELECT",$J,PSJCNT)) K PSJGOTO
"RTN","PSGVBW0",21,0)
 S PSJLK=$$L^PSSLOCK($P(PSJPN,U,2),1) I 'PSJLK W !,$C(7),$P(PSJLK,U,2) Q
"RTN","PSGVBW0",22,0)
 K PSJGOTO D:PSJPN]"" GTORDERS
"RTN","PSGVBW0",23,0)
 I PSJLK D UL^PSSLOCK($P(PSJPN,U,2))
"RTN","PSGVBW0",24,0)
 I $G(PSGPXN),$$DEFON^PSGPER1 D  K PSGPXPT S PSGPXN=0
"RTN","PSGVBW0",25,0)
 .S PSGPXPT=PSGP
"RTN","PSGVBW0",26,0)
 .N DFN,PSGP S (PSGP,DFN)=PSGPXPT D ^PSGPER,ENCV^PSGSETU,^PSIVXU
"RTN","PSGVBW0",27,0)
 S PSGPXN=$G(PSGPXN)
"RTN","PSGVBW0",28,0)
 Q
"RTN","PSGVBW0",29,0)
 ;
"RTN","PSGVBW0",30,0)
DISPLAYW ; Allow selection of patients on each ward selected.
"RTN","PSGVBW0",31,0)
 K ^TMP("PSJSELECT",$J) S PSJCNT=1,PSGWORP1="" F  S PSGWORP1=$O(^TMP("PSGVBW",$J,PSGWORP1)) Q:PSGWORP1=""  D DISPLAYP
"RTN","PSGVBW0",32,0)
 Q
"RTN","PSGVBW0",33,0)
 ;
"RTN","PSGVBW0",34,0)
DISPLAYP ; Display WORP1 (Ward or Priority)
"RTN","PSGVBW0",35,0)
 N PSGPICK
"RTN","PSGVBW0",36,0)
 S PSGVBWN=PSGWORP1
"RTN","PSGVBW0",37,0)
 D HEADER
"RTN","PSGVBW0",38,0)
 S PSGWORP2="" F  S PSGWORP2=$O(^TMP("PSGVBW",$J,PSGWORP1,PSGWORP2)) Q:PSGWORP2=""  S PSGPRIN=PSGWORP2 D DISPLAYT
"RTN","PSGVBW0",39,0)
 I $G(PSJASK),(PSGVBY>0) D ASK
"RTN","PSGVBW0",40,0)
 Q
"RTN","PSGVBW0",41,0)
 ;
"RTN","PSGVBW0",42,0)
DISPLAYT ;
"RTN","PSGVBW0",43,0)
 ;NEW PSGPICK  ;PSGPICK=1-->user selected order, stop display the profile
"RTN","PSGVBW0",44,0)
 S PSGPRIN=PSGWORP2
"RTN","PSGVBW0",45,0)
 S:$G(PSGPRIF) PSGVBWN=PSGWORP2,PSGPRIN=PSGWORP1
"RTN","PSGVBW0",46,0)
 S PSGVBTM="" F  S PSGVBTM=$O(^TMP("PSGVBW",$J,PSGWORP1,PSGWORP2,PSGVBTM))  Q:(PSGVBTM=""!$G(PSGPICK))  D V2
"RTN","PSGVBW0",47,0)
 I $G(PSJPRIF),$G(PSJASK),(PSGVBY>0) D ASK
"RTN","PSGVBW0",48,0)
 Q
"RTN","PSGVBW0",49,0)
 ;
"RTN","PSGVBW0",50,0)
GTORDERS ;
"RTN","PSGVBW0",51,0)
 S (PSGP,DFN)=$P(PSJPN,U,2) K PSJACNWP D ^PSJAC
"RTN","PSGVBW0",52,0)
 I PSGOL'="N" D PROFILE Q
"RTN","PSGVBW0",53,0)
 D ENGORD^PSGVBWU
"RTN","PSGVBW0",54,0)
 S PSJPRIO="" F  S PSJPRIO=$O(^TMP("PSJON",$J,PSJPRIO)) Q:PSJPRIO=""  S PSJON="" D
"RTN","PSGVBW0",55,0)
 . F  S PSJON=$O(^TMP("PSJON",$J,PSJPRIO,PSJON)) Q:PSJON=""  D
"RTN","PSGVBW0",56,0)
 .. I $P(PSJON,U,2)=+$P(PSJON,U,2) Q:'$$LOCK^PSJOEA(DFN,$P(PSJON,U,2))  D GTORDER2 Q
"RTN","PSGVBW0",57,0)
 .. I '$$LS^PSSLOCK(DFN,$P(PSJON,U,2)) D DISPORD(DFN,$P(PSJON,U,2)) Q
"RTN","PSGVBW0",58,0)
 .. D DISACTIO^PSJOE(DFN,$P(PSJON,U,2),1) Q:$D(PSJGOTO)  D UNL^PSSLOCK(DFN,$P(PSJON,U,2))
"RTN","PSGVBW0",59,0)
 Q
"RTN","PSGVBW0",60,0)
 ;
"RTN","PSGVBW0",61,0)
GTORDER2 ;
"RTN","PSGVBW0",62,0)
 N PSJO S PSJO=0 F  S PSJO=$O(^PS(53.1,"ACX",$P(PSJON,U,2),PSJO)) Q:'PSJO  D
"RTN","PSGVBW0",63,0)
 .D DISACTIO^PSJOE(DFN,PSJO_"P",1) Q:$D(PSJGOTO)
"RTN","PSGVBW0",64,0)
 I $D(^TMP("PSJCOM",$J)) N PSJORD S PSJORD=$P(PSJON,U,2) D CHK^PSJOEA1
"RTN","PSGVBW0",65,0)
 N PSJO S PSJO=0 F  S PSJO=$O(^PS(53.1,"ACX",$P(PSJON,U,2),PSJO)) Q:'PSJO  D
"RTN","PSGVBW0",66,0)
 .D UNL^PSSLOCK(DFN,PSJO_"P") Q:$G(Y)<0
"RTN","PSGVBW0",67,0)
 Q
"RTN","PSGVBW0",68,0)
 ;
"RTN","PSGVBW0",69,0)
PROFILE ; Display the patient's profile and allow order selection.
"RTN","PSGVBW0",70,0)
 S PSGP=DFN,PSJOL=PSGOL F  D EN^VALM("PSJ LM PNV") Q:'$G(PSJORD)&'$G(PSJNEWOE)  S PSJNEWOE=0
"RTN","PSGVBW0",71,0)
 Q
"RTN","PSGVBW0",72,0)
 ;
"RTN","PSGVBW0",73,0)
DONE ;
"RTN","PSGVBW0",74,0)
 K ^TMP("PSGVBW",$J),^TMP("PSJON",$J)
"RTN","PSGVBW0",75,0)
 K PSGWORP1,PSGWORP2,CF,DA,LINE,NP,POP,PPN,PR,PSGCANFL,PSGION,PSGOL,PSGOEAV,PSGOENOF,PSGON,PSGONC,PSGONR,PSGLMT,PSGPRIF
"RTN","PSGVBW0",76,0)
 K PSGORD,PSGPRF,PSGVBA,PSGVBAF,PSGVBON,PSGVBPN,PSGVBQ,PSGVBQ1,PSGVBSD,PSGVBSS,PSGVBST,PSGVBTM,PSGVBW,PSGVBWN,PSGVBY,QQ,Z
"RTN","PSGVBW0",77,0)
 K LIDT,ND,ORDT,PPN,PRD,PRDNS,PSGINCL,PSGINWD,PSGODT,PSGOEA,PSGOEAV,PSGP,PSGPRD,PSGPRIN,PSGPTMP,PSGSS,PSGVBPN,PSGVBTM,PSGVBWN
"RTN","PSGVBW0",78,0)
 Q
"RTN","PSGVBW0",79,0)
 ;
"RTN","PSGVBW0",80,0)
V2 ;
"RTN","PSGVBW0",81,0)
 S PSGVBPN="" F  S PSGVBPN=$O(^TMP("PSGVBW",$J,PSGWORP1,PSGWORP2,PSGVBTM,PSGVBPN)) Q:(PSGVBPN=""!$G(PSGPICK))  S PSGP=$P(PSGVBPN,"^",2),PPN=$P(PSGVBPN,"^") S:PPN="" PPN=PSGP_";DPT(" D WRT
"RTN","PSGVBW0",82,0)
 Q
"RTN","PSGVBW0",83,0)
 ;
"RTN","PSGVBW0",84,0)
WRT ;
"RTN","PSGVBW0",85,0)
 S PSGVBY=PSGVBY+1,PSJASK=1
"RTN","PSGVBW0",86,0)
 S PSGVBWN=PSGWORP1,PSGPRD=PSGWORP2
"RTN","PSGVBW0",87,0)
 W !,$J(PSGVBY,4),?6,$S(PSGVBTM'="zz":PSGVBTM,1:"Not Found"),?25,$S(PSGPRD="zz":"Not Found",PSGPRD=1:"STAT",PSGPRD=2:"ASAP",PSGPRD=3:"ROUTINE",1:PSGPRD),?38,PPN," (",$P(PSGVBPN,U,3),")" S ^TMP("PSJLIST",$J,PSGVBY)=PSGVBWN_U_PSGVBTM_U_PPN_U_PSGP
"RTN","PSGVBW0",88,0)
 I $Y+1>IOSL,(PSGVBY>0) NEW DIR S DIR(0)="EA",DIR("A")=" '^' TO QUIT " D ^DIR D
"RTN","PSGVBW0",89,0)
 . I X="^" S PSGPICK=1  Q
"RTN","PSGVBW0",90,0)
 . S PSJASK=0 W @IOF
"RTN","PSGVBW0",91,0)
 Q
"RTN","PSGVBW0",92,0)
 ;
"RTN","PSGVBW0",93,0)
ASK ;
"RTN","PSGVBW0",94,0)
 N DIR,PSGDFN,PSGASKX S DIR(0)="LOA^1:"_PSGVBY,DIR("A")="Select 1 - "_PSGVBY_": " D ^DIR I $D(DUOUT)!$D(DTOUT) K ^TMP("PSGVBW",$J) Q
"RTN","PSGVBW0",95,0)
 S:Y]"" PSGPICK=1
"RTN","PSGVBW0",96,0)
 F PSJINDEX=1:1:$L(Y,",")-1 D
"RTN","PSGVBW0",97,0)
 . S PSGASKX=$G(^TMP("PSJLIST",$J,$P(Y,",",PSJINDEX))),PSGDFN=$P(PSGASKX,"^",4)_"^"_$P(PSGASKX,"^",3)
"RTN","PSGVBW0",98,0)
 . D CHK^PSJDPT(.PSGDFN,1) I PSGDFN=-1 Q
"RTN","PSGVBW0",99,0)
 . S:PSGASKX]"" ^TMP("PSJSELECT",$J,PSJCNT)=$P(PSGASKX,U,3,4),^TMP("PSJSELECT",$J,"B",$P(PSGASKX,U,3),PSJCNT)="",PSJCNT=PSJCNT+1
"RTN","PSGVBW0",100,0)
 Q
"RTN","PSGVBW0",101,0)
 ;
"RTN","PSGVBW0",102,0)
H2 ;
"RTN","PSGVBW0",103,0)
 W !!?2,"Select patients either singularly separated by commas (1,2,3), by a range of",!,"patients separated by a dash (1-3), or a combination (1,2,4-6).  To select all",!,"patients, enter 'ALL' or a dash ('-').  You can also enter '-n' to"
"RTN","PSGVBW0",104,0)
 W " select the",!,"first patient through the 'nth' patient or enter 'n-' to select the 'nth'",!,"patient through the last patient.  If a patient is selected more than once,"
"RTN","PSGVBW0",105,0)
 W !,"only the first selection is used.  (Entering '1,2,1' would return '1,2'.)" Q
"RTN","PSGVBW0",106,0)
 ;
"RTN","PSGVBW0",107,0)
HEADER ;
"RTN","PSGVBW0",108,0)
 W:$Y @IOF W !,"ORDERS NOT VERIFIED BY A ",$S($P(PSJSYSU,";",3)>1:"PHARMACIST",1:"NURSE")," - "
"RTN","PSGVBW0",109,0)
 I $G(PSGPRIF) W $S(PRD=1:"STAT",PRD=2:"ASAP",1:"ROUTINE")
"RTN","PSGVBW0",110,0)
 I '$G(PSGPRIF) W $S(PSGVBWN="ZZ":"^OTHER",1:PSGVBWN)
"RTN","PSGVBW0",111,0)
 W !!," No.",?7,"TEAM",?25,"PRIORITY",?38,"PATIENT",!,LINE K PSGVBY S PSGVBY=0 Q
"RTN","PSGVBW0",112,0)
 Q
"RTN","PSGVBW0",113,0)
 ;
"RTN","PSGVBW0",114,0)
NP ;
"RTN","PSGVBW0",115,0)
 W $C(7) R !!,"ENTER AN '^' TO SELECT ORDERS NOW, OR PRESS THE RETURN KEY TO CONTINUE. ",NP:DTIME E  S NP="^"
"RTN","PSGVBW0",116,0)
 Q
"RTN","PSGVBW0",117,0)
DISPORD(DFN,ON)     ;Display the order that being lock by another user
"RTN","PSGVBW0",118,0)
 NEW PSJLINE,PSJOC,X
"RTN","PSGVBW0",119,0)
 S PSJLINE=1
"RTN","PSGVBW0",120,0)
 D DSPLORDU^PSJLMUT1(DFN,ON)
"RTN","PSGVBW0",121,0)
 W ! F X=0:0 S X=$O(PSJOC(ON,X)) Q:'X  W !,PSJOC(ON,X)
"RTN","PSGVBW0",122,0)
 Q
"RTN","PSGVBW0",123,0)
        
"VER")
8.0^22.0
"BLD",6325,6)
^211
**END**
**END**
