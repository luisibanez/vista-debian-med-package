Released LR*5.2*405 SEQ #325
Extracted from mail message
**KIDS**:LR*5.2*405^

**INSTALL NAME**
LR*5.2*405
"BLD",8688,0)
LR*5.2*405^LAB SERVICE^0^3111017^y
"BLD",8688,4,0)
^9.64PA^69.87^2
"BLD",8688,4,69.86,0)
69.86
"BLD",8688,4,69.86,222)
y^y^f^^^^n
"BLD",8688,4,69.87,0)
69.87
"BLD",8688,4,69.87,222)
y^y^f^^^^n
"BLD",8688,4,"B",69.86,69.86)

"BLD",8688,4,"B",69.87,69.87)

"BLD",8688,6)
19^
"BLD",8688,6.3)
93
"BLD",8688,"ABNS",0)
^9.66A^1^1
"BLD",8688,"ABNS",1,0)
LR
"BLD",8688,"ABNS","B","LR",1)

"BLD",8688,"ABPKG")
n^y
"BLD",8688,"INI")

"BLD",8688,"INIT")
LRHYPOST
"BLD",8688,"KRN",0)
^9.67PA^779.2^20
"BLD",8688,"KRN",.4,0)
.4
"BLD",8688,"KRN",.401,0)
.401
"BLD",8688,"KRN",.402,0)
.402
"BLD",8688,"KRN",.403,0)
.403
"BLD",8688,"KRN",.5,0)
.5
"BLD",8688,"KRN",.84,0)
.84
"BLD",8688,"KRN",3.6,0)
3.6
"BLD",8688,"KRN",3.8,0)
3.8
"BLD",8688,"KRN",9.2,0)
9.2
"BLD",8688,"KRN",9.8,0)
9.8
"BLD",8688,"KRN",9.8,"NM",0)
^9.68A^28^28
"BLD",8688,"KRN",9.8,"NM",1,0)
LRHY0^^0^B39459893
"BLD",8688,"KRN",9.8,"NM",2,0)
LRHY01^^0^B42068305
"BLD",8688,"KRN",9.8,"NM",3,0)
LRHY22^^0^B4209641
"BLD",8688,"KRN",9.8,"NM",4,0)
LRHY4X^^0^B60499659
"BLD",8688,"KRN",9.8,"NM",5,0)
LRHYA^^0^B29476770
"BLD",8688,"KRN",9.8,"NM",6,0)
LRHYAFT^^0^B93475288
"BLD",8688,"KRN",9.8,"NM",7,0)
LRHYB^^0^B41480183
"BLD",8688,"KRN",9.8,"NM",8,0)
LRHYBC1^^0^B65673282
"BLD",8688,"KRN",9.8,"NM",9,0)
LRHYBC9^^0^B188141
"BLD",8688,"KRN",9.8,"NM",10,0)
LRHYBL1^^0^B187896
"BLD",8688,"KRN",9.8,"NM",11,0)
LRHYBLD^^0^B5635430
"BLD",8688,"KRN",9.8,"NM",12,0)
LRHYDEL^^0^B58771394
"BLD",8688,"KRN",9.8,"NM",13,0)
LRHYED^^0^B54493
"BLD",8688,"KRN",9.8,"NM",14,0)
LRHYF1^^0^B21719177
"BLD",8688,"KRN",9.8,"NM",15,0)
LRHYF2^^0^B1996292
"BLD",8688,"KRN",9.8,"NM",16,0)
LRHYF4^^0^B53704668
"BLD",8688,"KRN",9.8,"NM",17,0)
LRHYLRX^^0^B1258345
"BLD",8688,"KRN",9.8,"NM",18,0)
LRHYLS1^^0^B9947241
"BLD",8688,"KRN",9.8,"NM",19,0)
LRHYPH0^^0^B38997897
"BLD",8688,"KRN",9.8,"NM",20,0)
LRHYPH2^^0^B12074115
"BLD",8688,"KRN",9.8,"NM",21,0)
LRHYPL^^0^B9505821
"BLD",8688,"KRN",9.8,"NM",22,0)
LRHYPOST^^0^B856379
"BLD",8688,"KRN",9.8,"NM",23,0)
LRHYT1^^0^B12777188
"BLD",8688,"KRN",9.8,"NM",24,0)
LRHYT2^^0^B3165610
"BLD",8688,"KRN",9.8,"NM",25,0)
LRHYU^^0^B3762458
"BLD",8688,"KRN",9.8,"NM",26,0)
LRHYU4^^0^B116774
"BLD",8688,"KRN",9.8,"NM",27,0)
LRHYU5^^0^B83020
"BLD",8688,"KRN",9.8,"NM",28,0)
LRHYUTL^^0^B160482
"BLD",8688,"KRN",9.8,"NM","B","LRHY0",1)

"BLD",8688,"KRN",9.8,"NM","B","LRHY01",2)

"BLD",8688,"KRN",9.8,"NM","B","LRHY22",3)

"BLD",8688,"KRN",9.8,"NM","B","LRHY4X",4)

"BLD",8688,"KRN",9.8,"NM","B","LRHYA",5)

"BLD",8688,"KRN",9.8,"NM","B","LRHYAFT",6)

"BLD",8688,"KRN",9.8,"NM","B","LRHYB",7)

"BLD",8688,"KRN",9.8,"NM","B","LRHYBC1",8)

"BLD",8688,"KRN",9.8,"NM","B","LRHYBC9",9)

"BLD",8688,"KRN",9.8,"NM","B","LRHYBL1",10)

"BLD",8688,"KRN",9.8,"NM","B","LRHYBLD",11)

"BLD",8688,"KRN",9.8,"NM","B","LRHYDEL",12)

"BLD",8688,"KRN",9.8,"NM","B","LRHYED",13)

"BLD",8688,"KRN",9.8,"NM","B","LRHYF1",14)

"BLD",8688,"KRN",9.8,"NM","B","LRHYF2",15)

"BLD",8688,"KRN",9.8,"NM","B","LRHYF4",16)

"BLD",8688,"KRN",9.8,"NM","B","LRHYLRX",17)

"BLD",8688,"KRN",9.8,"NM","B","LRHYLS1",18)

"BLD",8688,"KRN",9.8,"NM","B","LRHYPH0",19)

"BLD",8688,"KRN",9.8,"NM","B","LRHYPH2",20)

"BLD",8688,"KRN",9.8,"NM","B","LRHYPL",21)

"BLD",8688,"KRN",9.8,"NM","B","LRHYPOST",22)

"BLD",8688,"KRN",9.8,"NM","B","LRHYT1",23)

"BLD",8688,"KRN",9.8,"NM","B","LRHYT2",24)

"BLD",8688,"KRN",9.8,"NM","B","LRHYU",25)

"BLD",8688,"KRN",9.8,"NM","B","LRHYU4",26)

"BLD",8688,"KRN",9.8,"NM","B","LRHYU5",27)

"BLD",8688,"KRN",9.8,"NM","B","LRHYUTL",28)

"BLD",8688,"KRN",19,0)
19
"BLD",8688,"KRN",19,"NM",0)
^9.68A^16^11
"BLD",8688,"KRN",19,"NM",3,0)
LRHY HOWDY BOT^^0
"BLD",8688,"KRN",19,"NM",4,0)
LRHY HOWDY MAIN MENU^^0
"BLD",8688,"KRN",19,"NM",6,0)
LRHY PATIENT CARD SCAN^^0
"BLD",8688,"KRN",19,"NM",8,0)
LRHY PATIENT WAIT TIME^^0
"BLD",8688,"KRN",19,"NM",9,0)
LRHY PHLEBOTOMY LOG^^0
"BLD",8688,"KRN",19,"NM",10,0)
LRHY SCAN SPECIMENS INTO LAB^^0
"BLD",8688,"KRN",19,"NM",11,0)
LRHY SITE FILE EDIT^^0
"BLD",8688,"KRN",19,"NM",12,0)
LRHY TRACK COLLECTION^^0
"BLD",8688,"KRN",19,"NM",13,0)
LRHY PATIENT CARD SCAN (PPOC)^^0
"BLD",8688,"KRN",19,"NM",15,0)
LRHY PPOC LABEL PRINT^^0
"BLD",8688,"KRN",19,"NM",16,0)
LRHY HOWDY PPOC MAIN MENU^^0
"BLD",8688,"KRN",19,"NM","B","LRHY HOWDY BOT",3)

"BLD",8688,"KRN",19,"NM","B","LRHY HOWDY MAIN MENU",4)

"BLD",8688,"KRN",19,"NM","B","LRHY HOWDY PPOC MAIN MENU",16)

"BLD",8688,"KRN",19,"NM","B","LRHY PATIENT CARD SCAN",6)

"BLD",8688,"KRN",19,"NM","B","LRHY PATIENT CARD SCAN (PPOC)",13)

"BLD",8688,"KRN",19,"NM","B","LRHY PATIENT WAIT TIME",8)

"BLD",8688,"KRN",19,"NM","B","LRHY PHLEBOTOMY LOG",9)

"BLD",8688,"KRN",19,"NM","B","LRHY PPOC LABEL PRINT",15)

"BLD",8688,"KRN",19,"NM","B","LRHY SCAN SPECIMENS INTO LAB",10)

"BLD",8688,"KRN",19,"NM","B","LRHY SITE FILE EDIT",11)

"BLD",8688,"KRN",19,"NM","B","LRHY TRACK COLLECTION",12)

"BLD",8688,"KRN",19.1,0)
19.1
"BLD",8688,"KRN",19.1,"NM",0)
^9.68A^1^1
"BLD",8688,"KRN",19.1,"NM",1,0)
LRHYKEY^^0
"BLD",8688,"KRN",19.1,"NM","B","LRHYKEY",1)

"BLD",8688,"KRN",101,0)
101
"BLD",8688,"KRN",101,"NM",0)
^9.68A^^
"BLD",8688,"KRN",409.61,0)
409.61
"BLD",8688,"KRN",409.61,"NM",0)
^9.68A^^
"BLD",8688,"KRN",771,0)
771
"BLD",8688,"KRN",779.2,0)
779.2
"BLD",8688,"KRN",870,0)
870
"BLD",8688,"KRN",8989.51,0)
8989.51
"BLD",8688,"KRN",8989.52,0)
8989.52
"BLD",8688,"KRN",8994,0)
8994
"BLD",8688,"KRN","B",.4,.4)

"BLD",8688,"KRN","B",.401,.401)

"BLD",8688,"KRN","B",.402,.402)

"BLD",8688,"KRN","B",.403,.403)

"BLD",8688,"KRN","B",.5,.5)

"BLD",8688,"KRN","B",.84,.84)

"BLD",8688,"KRN","B",3.6,3.6)

"BLD",8688,"KRN","B",3.8,3.8)

"BLD",8688,"KRN","B",9.2,9.2)

"BLD",8688,"KRN","B",9.8,9.8)

"BLD",8688,"KRN","B",19,19)

"BLD",8688,"KRN","B",19.1,19.1)

"BLD",8688,"KRN","B",101,101)

"BLD",8688,"KRN","B",409.61,409.61)

"BLD",8688,"KRN","B",771,771)

"BLD",8688,"KRN","B",779.2,779.2)

"BLD",8688,"KRN","B",870,870)

"BLD",8688,"KRN","B",8989.51,8989.51)

"BLD",8688,"KRN","B",8989.52,8989.52)

"BLD",8688,"KRN","B",8994,8994)

"BLD",8688,"QUES",0)
^9.62^^
"BLD",8688,"REQB",0)
^9.611^^
"FIA",69.86)
HOWDY SITE FILE
"FIA",69.86,0)
^LRHY(69.86,
"FIA",69.86,0,0)
69.86
"FIA",69.86,0,1)
y^y^f^^^^n
"FIA",69.86,0,10)

"FIA",69.86,0,11)

"FIA",69.86,0,"RLRO")

"FIA",69.86,0,"VR")
5.2^LR
"FIA",69.86,69.86)
0
"FIA",69.86,69.861)
0
"FIA",69.86,69.8616)
0
"FIA",69.86,69.862)
0
"FIA",69.86,69.8625)
0
"FIA",69.86,69.863)
0
"FIA",69.86,69.8632)
0
"FIA",69.86,69.864)
0
"FIA",69.86,69.8645)
0
"FIA",69.86,69.8654)
0
"FIA",69.86,69.867)
0
"FIA",69.86,69.868)
0
"FIA",69.87)
HOWDY SPECIMEN TIMES BY UID
"FIA",69.87,0)
^LRHY(69.87,
"FIA",69.87,0,0)
69.87
"FIA",69.87,0,1)
y^y^f^^^^n
"FIA",69.87,0,10)

"FIA",69.87,0,11)

"FIA",69.87,0,"RLRO")

"FIA",69.87,0,"VR")
5.2^LR
"FIA",69.87,69.87)
0
"INIT")
LRHYPOST
"KRN",19,15613,-1)
0^9
"KRN",19,15613,0)
LRHY PHLEBOTOMY LOG^PHLEBOTOMY LOG^^R^^^^^^^^
"KRN",19,15613,1,0)
^^2^2^3100728^
"KRN",19,15613,1,1,0)
This is the log used to track the collector's phlebotomy performance 
"KRN",19,15613,1,2,0)
times.
"KRN",19,15613,25)
LRHYPL
"KRN",19,15613,"U")
PHLEBOTOMY LOG
"KRN",19,15614,-1)
0^15
"KRN",19,15614,0)
LRHY PPOC LABEL PRINT^PRINT PPOC LABEL^^A^^^^^^^^^^1
"KRN",19,15614,1,0)
^19.06^2^2^3110920^^^
"KRN",19,15614,1,1,0)
Labels for collected tests are printed on the designated label printer.  
"KRN",19,15614,1,2,0)
This option captures collector and collection date & time.
"KRN",19,15614,20)
D VET^LRHYAFT
"KRN",19,15614,99.1)
61417,56303
"KRN",19,15614,"U")
PRINT PPOC LABEL
"KRN",19,15615,-1)
0^11
"KRN",19,15615,0)
LRHY SITE FILE EDIT^EDIT HOWDY SITE FILE^^R^^LRHYKEY^^^^^^
"KRN",19,15615,1,0)
^^1^1^3100728^
"KRN",19,15615,1,1,0)
This option enables the Keyholder to edit the Howdy site file. 
"KRN",19,15615,25)
EDIT^LRHYU
"KRN",19,15615,99.1)
61852,35530
"KRN",19,15615,"U")
EDIT HOWDY SITE FILE
"KRN",19,15616,-1)
0^6
"KRN",19,15616,0)
LRHY PATIENT CARD SCAN^SCAN PATIENT CARD^^R^^^^^^^^^^^
"KRN",19,15616,1,0)
^19.06^2^2^3101019^^^^
"KRN",19,15616,1,1,0)
This option initiates the Howdy process using the greeting from Howdy
"KRN",19,15616,1,2,0)
site file & prints labels.
"KRN",19,15616,15)

"KRN",19,15616,20)

"KRN",19,15616,25)
VET^LRHY0
"KRN",19,15616,99.1)
62019,31579
"KRN",19,15616,"U")
SCAN PATIENT CARD
"KRN",19,15617,-1)
0^12
"KRN",19,15617,0)
LRHY TRACK COLLECTION^TRACK COLLECTION^^R^^^^^^^^
"KRN",19,15617,1,0)
^19.06^1^1^3100721^^^
"KRN",19,15617,1,1,0)
This option is used to display patient specimen collection demographics.
"KRN",19,15617,25)
SINGLE^LRHYF1
"KRN",19,15617,"U")
TRACK COLLECTION
"KRN",19,15618,-1)
0^8
"KRN",19,15618,0)
LRHY PATIENT WAIT TIME^PATIENT WAIT TIME^^R^^^^^^^^
"KRN",19,15618,1,0)
^19.06^1^1^3100813^^^
"KRN",19,15618,1,1,0)
This option displays how long a Patient waits to have a sample drawn. 
"KRN",19,15618,25)
LRHY4X
"KRN",19,15618,99.1)
60103,45630
"KRN",19,15618,"U")
PATIENT WAIT TIME
"KRN",19,15619,-1)
0^10
"KRN",19,15619,0)
LRHY SCAN SPECIMENS INTO LAB^SCAN SPECIMENS INTO LAB^^A^^^^^^^^^^1
"KRN",19,15619,1,0)
^^2^2^3100721^
"KRN",19,15619,1,1,0)
This option allows the Receiver to scan collected specimen labels in 
"KRN",19,15619,1,2,0)
order to capture Lab Receipt Time.
"KRN",19,15619,20)
S LRTECH=DUZ D LABIN^LRHYBC1
"KRN",19,15619,"U")
SCAN SPECIMENS INTO LAB
"KRN",19,15620,-1)
0^4
"KRN",19,15620,0)
LRHY HOWDY MAIN MENU^HOWDY MAIN MENU^^M^^^^^^^^
"KRN",19,15620,1,0)
^19.06^1^1^3100728^^^
"KRN",19,15620,1,1,0)
This is the traditional Howdy main menu.
"KRN",19,15620,10,0)
^19.01IP^11^10
"KRN",19,15620,10,3,0)
15619^IN^3
"KRN",19,15620,10,3,"^")
LRHY SCAN SPECIMENS INTO LAB
"KRN",19,15620,10,5,0)
15616^SCAN^1
"KRN",19,15620,10,5,"^")
LRHY PATIENT CARD SCAN
"KRN",19,15620,10,6,0)
15618^WAIT^5
"KRN",19,15620,10,6,"^")
LRHY PATIENT WAIT TIME
"KRN",19,15620,10,8,0)
15613^PL^2
"KRN",19,15620,10,8,"^")
LRHY PHLEBOTOMY LOG
"KRN",19,15620,10,9,0)
15617^TRAK^4
"KRN",19,15620,10,9,"^")
LRHY TRACK COLLECTION
"KRN",19,15620,10,11,0)
15615^EDIT^6
"KRN",19,15620,10,11,"^")
LRHY SITE FILE EDIT
"KRN",19,15620,99)
62381,42432
"KRN",19,15620,99.1)
62125,30580
"KRN",19,15620,"U")
HOWDY MAIN MENU
"KRN",19,15621,-1)
0^13
"KRN",19,15621,0)
LRHY PATIENT CARD SCAN (PPOC)^SCAN PATIENT CARD (PPOC)^^R^^^^^^^^
"KRN",19,15621,1,0)
^^2^2^3100728^
"KRN",19,15621,1,1,0)
This option confirms Patient, displays accessioned tests and allows the 
"KRN",19,15621,1,2,0)
Collector to choose test(s) actually collected.
"KRN",19,15621,25)
VET^LRHY01
"KRN",19,15621,99)
61913,40894
"KRN",19,15621,"U")
SCAN PATIENT CARD (PPOC)
"KRN",19,15622,-1)
0^16
"KRN",19,15622,0)
LRHY HOWDY PPOC MAIN MENU^HOWDY PPOC MAIN MENU^^M^^^^^^^^
"KRN",19,15622,1,0)
^19.06^1^1^3110920^^
"KRN",19,15622,1,1,0)
Howdy PPOC main menu.
"KRN",19,15622,10,0)
^19.01IP^6^6
"KRN",19,15622,10,1,0)
15621^SCAN^1
"KRN",19,15622,10,1,"^")
LRHY PATIENT CARD SCAN (PPOC)
"KRN",19,15622,10,2,0)
15614^PPOC^2
"KRN",19,15622,10,2,"^")
LRHY PPOC LABEL PRINT
"KRN",19,15622,10,3,0)
15617^TRAK^4
"KRN",19,15622,10,3,"^")
LRHY TRACK COLLECTION
"KRN",19,15622,10,4,0)
15618^TAT^5
"KRN",19,15622,10,4,"^")
LRHY PATIENT WAIT TIME
"KRN",19,15622,10,5,0)
15619^IN^3
"KRN",19,15622,10,5,"^")
LRHY SCAN SPECIMENS INTO LAB
"KRN",19,15622,10,6,0)
15615^EDIT^6
"KRN",19,15622,10,6,"^")
LRHY SITE FILE EDIT
"KRN",19,15622,99)
62381,42432
"KRN",19,15622,99.1)
62280,31482
"KRN",19,15622,"U")
HOWDY PPOC MAIN MENU
"KRN",19,15623,-1)
0^3
"KRN",19,15623,0)
LRHY HOWDY BOT^LRHY SET HOWDY USER^^A^^^^^^^^^^1^1
"KRN",19,15623,1,0)
^19.06^1^1^3101029^^^
"KRN",19,15623,1,1,0)
This option sets the Howdy user that will run the Howdy scan option.
"KRN",19,15623,15)
D ^XUS
"KRN",19,15623,20)
D USER^LRHYU D VET1^LRHY0
"KRN",19,15623,99.1)
62027,38442
"KRN",19,15623,"U")
LRHY SET HOWDY USER
"KRN",19.1,708,-1)
0^1
"KRN",19.1,708,0)
LRHYKEY^Used by Howdy
"KRN",19.1,708,1,0)
^^1^1^3100721^
"KRN",19.1,708,1,1,0)
This key is used to lock options for the new Howdy package.
"MBREQ")
0
"ORD",3,19.1)
19.1;3;;;KEY^XPDTA1;KEYF1^XPDIA1;KEYE1^XPDIA1;KEYF2^XPDIA1;;KEYDEL^XPDIA1
"ORD",3,19.1,0)
SECURITY KEY
"ORD",18,19)
19;18;;;OPT^XPDTA;OPTF1^XPDIA;OPTE1^XPDIA;OPTF2^XPDIA;;OPTDEL^XPDIA
"ORD",18,19,0)
OPTION
"PKG",26,-1)
1^1
"PKG",26,0)
LAB SERVICE^LR^CORE LAB SYSTEM
"PKG",26,20,0)
^9.402P^1^1
"PKG",26,20,1,0)
2^^LRXDRPT
"PKG",26,20,1,1)

"PKG",26,20,"B",2,1)

"PKG",26,22,0)
^9.49I^1^1
"PKG",26,22,1,0)
5.2^2940927^2950304
"PKG",26,22,1,"PAH",1,0)
405^3111017^77304
"PKG",26,22,1,"PAH",1,1,0)
^^283^283^3111017
"PKG",26,22,1,"PAH",1,1,1,0)
BLOOD BANK STATEMENT
"PKG",26,22,1,"PAH",1,1,2,0)
====================
"PKG",26,22,1,"PAH",1,1,3,0)
EFFECT ON BLOOD BANK FUNCTIONAL REQUIREMENTS: Patch LR*5.2*405 does not
"PKG",26,22,1,"PAH",1,1,4,0)
contain any changes to the VISTA BLOOD BANK Software as defined by VHA
"PKG",26,22,1,"PAH",1,1,5,0)
DIRECTIVE 2004-058 titled VISTA BLOOD BANK SOFTWARE VERSION 5.2.
"PKG",26,22,1,"PAH",1,1,6,0)
 
"PKG",26,22,1,"PAH",1,1,7,0)
EFFECT ON BLOOD BANK FUNCTIONAL REQUIREMENTS: Patch LR*5.2*405 does not
"PKG",26,22,1,"PAH",1,1,8,0)
alter or modify any software design safeguards or safety critical
"PKG",26,22,1,"PAH",1,1,9,0)
elements functions.
"PKG",26,22,1,"PAH",1,1,10,0)
BLOOD BANK STATEMENT
"PKG",26,22,1,"PAH",1,1,11,0)
====================
"PKG",26,22,1,"PAH",1,1,12,0)
EFFECT ON BLOOD BANK FUNCTIONAL REQUIREMENTS: Patch LR*5.2*405 does not 
"PKG",26,22,1,"PAH",1,1,13,0)
contain any changes to the VISTA BLOOD BANK Software as defined by VHA 
"PKG",26,22,1,"PAH",1,1,14,0)
DIRECTIVE 2004-058 titled VISTA BLOOD BANK SOFTWARE VERSION 5.2.
"PKG",26,22,1,"PAH",1,1,15,0)
 
"PKG",26,22,1,"PAH",1,1,16,0)
EFFECT ON BLOOD BANK FUNCTIONAL REQUIREMENTS: Patch LR*5.2*405 does not 
"PKG",26,22,1,"PAH",1,1,17,0)
alter or modify any software design safeguards or safety critical 
"PKG",26,22,1,"PAH",1,1,18,0)
elements functions.
"PKG",26,22,1,"PAH",1,1,19,0)
 
"PKG",26,22,1,"PAH",1,1,20,0)
RISK ANALYSIS: Changes made by patch LR*5.2*405 have no effect on Blood 
"PKG",26,22,1,"PAH",1,1,21,0)
Bank software functionality, therefore RISK is none.
"PKG",26,22,1,"PAH",1,1,22,0)
 
"PKG",26,22,1,"PAH",1,1,23,0)
VALIDATION REQUIREMENTS BY OPTION: Because of the nature of the changes 
"PKG",26,22,1,"PAH",1,1,24,0)
made, no specific validation requirements exist as a result of 
"PKG",26,22,1,"PAH",1,1,25,0)
installation of this patch.
"PKG",26,22,1,"PAH",1,1,26,0)
 
"PKG",26,22,1,"PAH",1,1,27,0)
Howdy Computerized Phlebotomy Login Process (Howdy) is an automated 
"PKG",26,22,1,"PAH",1,1,28,0)
laboratory check-in application used in Veterans Health Information 
"PKG",26,22,1,"PAH",1,1,29,0)
Systems and Technology Architecture (VistA) Laboratory system to 
"PKG",26,22,1,"PAH",1,1,30,0)
provide phlebotomy labs with the ability to:
"PKG",26,22,1,"PAH",1,1,31,0)
 
"PKG",26,22,1,"PAH",1,1,32,0)
1. Read the Veteran Information Card (VIC) and instruct the patient 
"PKG",26,22,1,"PAH",1,1,33,0)
   to wait until called to the phlebotomy area.
"PKG",26,22,1,"PAH",1,1,34,0)
2. Search the VistA database for any phlebotomy orders pending on
"PKG",26,22,1,"PAH",1,1,35,0)
   the patient.
"PKG",26,22,1,"PAH",1,1,36,0)
3. Process lab orders and print specimen labels.
"PKG",26,22,1,"PAH",1,1,37,0)
4. Verify that the correct lab specimens are drawn from the correct 
"PKG",26,22,1,"PAH",1,1,38,0)
   patient.
"PKG",26,22,1,"PAH",1,1,39,0)
5. Calculate and provide timeliness reports for Phlebotomy Lab 
"PKG",26,22,1,"PAH",1,1,40,0)
   performance.
"PKG",26,22,1,"PAH",1,1,41,0)
6. Provide barcode technology for patient identification and 
"PKG",26,22,1,"PAH",1,1,42,0)
   positive specimen identification.
"PKG",26,22,1,"PAH",1,1,43,0)
7. Capture accurate collection and lab receipt times that allows the 
"PKG",26,22,1,"PAH",1,1,44,0)
   laboratory users to track outpatient lab samples from collection to 
"PKG",26,22,1,"PAH",1,1,45,0)
   verification.
"PKG",26,22,1,"PAH",1,1,46,0)
8. Assist in accomplishing the VA strategic plan, which specifies 
"PKG",26,22,1,"PAH",1,1,47,0)
   that 90% of laboratory specimens will be collected utilizing barcode 
"PKG",26,22,1,"PAH",1,1,48,0)
   technology.
"PKG",26,22,1,"PAH",1,1,49,0)
 
"PKG",26,22,1,"PAH",1,1,50,0)
The Howdy bar code technology allows the lab personnel to use scanners to 
"PKG",26,22,1,"PAH",1,1,51,0)
verify a veteran's identity and to track drawn sample(s) until the 
"PKG",26,22,1,"PAH",1,1,52,0)
results are entered into the VistA Laboratory system.
"PKG",26,22,1,"PAH",1,1,53,0)
 
"PKG",26,22,1,"PAH",1,1,54,0)
Howdy addresses privacy issues. The scanning of the VIC feature eliminates
"PKG",26,22,1,"PAH",1,1,55,0)
a hand-written log book for sign in, where the patient's name and SSN can
"PKG",26,22,1,"PAH",1,1,56,0)
be viewed.
"PKG",26,22,1,"PAH",1,1,57,0)
 
"PKG",26,22,1,"PAH",1,1,58,0)
This patch addresses the following Remedy Ticket(s):
"PKG",26,22,1,"PAH",1,1,59,0)
===================================================
"PKG",26,22,1,"PAH",1,1,60,0)
N/A
"PKG",26,22,1,"PAH",1,1,61,0)
 
"PKG",26,22,1,"PAH",1,1,62,0)
This patch addresses the following Electronic Error & Enhancement Report 
"PKG",26,22,1,"PAH",1,1,63,0)
(E3R):
"PKG",26,22,1,"PAH",1,1,64,0)
========================================================================
"PKG",26,22,1,"PAH",1,1,65,0)
E3R Entry #:    15882   20037   19545
"PKG",26,22,1,"PAH",1,1,66,0)
                19477   19221   19091
"PKG",26,22,1,"PAH",1,1,67,0)
                18805    1270    6247
"PKG",26,22,1,"PAH",1,1,68,0)
                 8772    8807    9239
"PKG",26,22,1,"PAH",1,1,69,0)
                 9496    9808   12301
"PKG",26,22,1,"PAH",1,1,70,0)
                12981   13485   13638
"PKG",26,22,1,"PAH",1,1,71,0)
                13714   13865   14981
"PKG",26,22,1,"PAH",1,1,72,0)
                15124   15186   15249
"PKG",26,22,1,"PAH",1,1,73,0)
                15632   15715   16053
"PKG",26,22,1,"PAH",1,1,74,0)
                17038   17126   17923
"PKG",26,22,1,"PAH",1,1,75,0)
 
"PKG",26,22,1,"PAH",1,1,76,0)
This patch addresses the following Patient Safety Issues (PSIs):
"PKG",26,22,1,"PAH",1,1,77,0)
===============================================================
"PKG",26,22,1,"PAH",1,1,78,0)
N/A
"PKG",26,22,1,"PAH",1,1,79,0)
 
"PKG",26,22,1,"PAH",1,1,80,0)
Data Dictionary Changes:
"PKG",26,22,1,"PAH",1,1,81,0)
=======================
"PKG",26,22,1,"PAH",1,1,82,0)
This patch installs the following two new files:
"PKG",26,22,1,"PAH",1,1,83,0)
 
"PKG",26,22,1,"PAH",1,1,84,0)
HOWDY SITE FILE (#69.86): This file is used to run the Howdy software
"PKG",26,22,1,"PAH",1,1,85,0)
and to reflect the site's business rules.
"PKG",26,22,1,"PAH",1,1,86,0)
 
"PKG",26,22,1,"PAH",1,1,87,0)
FILE #   FIELD #    FIELD NAME                 NEW/MODIFIED item(s)
"PKG",26,22,1,"PAH",1,1,88,0)
-------- ---------  -----------------          --------------------
"PKG",26,22,1,"PAH",1,1,89,0)
69.86   .01         NAME                                NEW
"PKG",26,22,1,"PAH",1,1,90,0)
        2           LAB TEST (TO EXCLUDE)               NEW
"PKG",26,22,1,"PAH",1,1,91,0)
        4           COLLECTION SAMPLE (TO EXCLUDE)      NEW
"PKG",26,22,1,"PAH",1,1,92,0)
        6           SITE SPECIMEN (TO EXCLUDE)          NEW
"PKG",26,22,1,"PAH",1,1,93,0)
        8           COLLECTION TYPES (TO EXCLUDE)       NEW
"PKG",26,22,1,"PAH",1,1,94,0)
        10          PRINTERS                            NEW
"PKG",26,22,1,"PAH",1,1,95,0)
        11          ORDER LABEL ROUTINE                 NEW
"PKG",26,22,1,"PAH",1,1,96,0)
        12          FW ORDER LABELS                     NEW
"PKG",26,22,1,"PAH",1,1,97,0)
        16          EXCLUDE CLINICS                     NEW
"PKG",26,22,1,"PAH",1,1,98,0)
        18          CHECK FOR FUTURE ORDERS             NEW
"PKG",26,22,1,"PAH",1,1,99,0)
        20          CHECK FOR PAST ORDERS               NEW
"PKG",26,22,1,"PAH",1,1,100,0)
        25          ORDER LABEL TESTS                   NEW
"PKG",26,22,1,"PAH",1,1,101,0)
        30          EXCLUDE URGENCY                     NEW
"PKG",26,22,1,"PAH",1,1,102,0)
        32          GREETING                            NEW
"PKG",26,22,1,"PAH",1,1,103,0)
        40          WELCOME TO                          NEW
"PKG",26,22,1,"PAH",1,1,104,0)
        42          YOUR HOST IS                        NEW
"PKG",26,22,1,"PAH",1,1,105,0)
        44          HOST TITLE                          NEW
"PKG",26,22,1,"PAH",1,1,106,0)
        45          SPACER LABEL PRINTER                NEW
"PKG",26,22,1,"PAH",1,1,107,0)
        50          ATLERNATIVE LABEL ROUTINE           NEW
"PKG",26,22,1,"PAH",1,1,108,0)
        51          NUMBER OF SCAN RE-TRY               NEW
"PKG",26,22,1,"PAH",1,1,109,0)
        52          DELETE SAME DAY DUPLICATES          NEW
"PKG",26,22,1,"PAH",1,1,110,0)
        54          BINGO BOARD DEVICE                  NEW
"PKG",26,22,1,"PAH",1,1,111,0)
 
"PKG",26,22,1,"PAH",1,1,112,0)
HOWDY SPECIMEN TIMES BY UID FILE(#69.87): This file is used to capture and
"PKG",26,22,1,"PAH",1,1,113,0)
retain the specimen demographics.
"PKG",26,22,1,"PAH",1,1,114,0)
 
"PKG",26,22,1,"PAH",1,1,115,0)
FILE #   FIELD #    FIELD NAME                 NEW/MODIFIED item(s)
"PKG",26,22,1,"PAH",1,1,116,0)
-------- ---------  -----------------          --------------------
"PKG",26,22,1,"PAH",1,1,117,0)
69.87   .01         SPECIMEN UID                        NEW
"PKG",26,22,1,"PAH",1,1,118,0)
        2           INITIAL SCAN TIME                   NEW
"PKG",26,22,1,"PAH",1,1,119,0)
        4           TIME LABELS PRINTED                 NEW
"PKG",26,22,1,"PAH",1,1,120,0)
        6           COLLECTOR                           NEW
"PKG",26,22,1,"PAH",1,1,121,0)
        8           COLLECTION TIME                     NEW
"PKG",26,22,1,"PAH",1,1,122,0)
        10          LAB ARRIVAL TIME                    NEW
"PKG",26,22,1,"PAH",1,1,123,0)
        12          RECEIVER                            NEW
"PKG",26,22,1,"PAH",1,1,124,0)
 
"PKG",26,22,1,"PAH",1,1,125,0)
 
"PKG",26,22,1,"PAH",1,1,126,0)
The following is a list of menu options included in this patch:
"PKG",26,22,1,"PAH",1,1,127,0)
==============================================================
"PKG",26,22,1,"PAH",1,1,128,0)
 
"PKG",26,22,1,"PAH",1,1,129,0)
Option Name                      Type                New/Modified
"PKG",26,22,1,"PAH",1,1,130,0)
-----------                      ----                ------------
"PKG",26,22,1,"PAH",1,1,131,0)
HOWDY BCE MAIN MENU             menu                    NEW
"PKG",26,22,1,"PAH",1,1,132,0)
HOWDY MAIN MENU                 menu                    NEW
"PKG",26,22,1,"PAH",1,1,133,0)
LRHY BCE LABEL PRINT            action                  NEW      
"PKG",26,22,1,"PAH",1,1,134,0)
LRHY PATIENT CARD SCAN          run routine             NEW    
"PKG",26,22,1,"PAH",1,1,135,0)
LRHY PATIENT CARD SCAN (BCE)    run routine             NEW        
"PKG",26,22,1,"PAH",1,1,136,0)
LRHY PATIENT WAIT TIME          run routine             NEW      
"PKG",26,22,1,"PAH",1,1,137,0)
LRHY PHLEBOTOMY LOG             run routine             NEW        
"PKG",26,22,1,"PAH",1,1,138,0)
LRHY SCAN SPECIMENS INTO LAB    action                  NEW  
"PKG",26,22,1,"PAH",1,1,139,0)
LRHY SITE FILE EDIT             run routine             NEW  
"PKG",26,22,1,"PAH",1,1,140,0)
LRHY TRACK COLLECTION           run routine             NEW
"PKG",26,22,1,"PAH",1,1,141,0)
 
"PKG",26,22,1,"PAH",1,1,142,0)
Summary of new entries in the Options (File #19):
"PKG",26,22,1,"PAH",1,1,143,0)
================================================
"PKG",26,22,1,"PAH",1,1,144,0)
1.  LRHY PATIENT CARD SCAN 
"PKG",26,22,1,"PAH",1,1,145,0)
This option initiates the Howdy process using the greeting from Howdy site
"PKG",26,22,1,"PAH",1,1,146,0)
file & prints labels.
"PKG",26,22,1,"PAH",1,1,147,0)
 
"PKG",26,22,1,"PAH",1,1,148,0)
2.  LRHY PHLEBOTOMY LOG
"PKG",26,22,1,"PAH",1,1,149,0)
This is the log used to track the collector's phlebotomy performance 
"PKG",26,22,1,"PAH",1,1,150,0)
times.
"PKG",26,22,1,"PAH",1,1,151,0)
 
"PKG",26,22,1,"PAH",1,1,152,0)
3.  LRHY SCAN SPECIMENS INTO LAB
"PKG",26,22,1,"PAH",1,1,153,0)
This option allows the Receiver to scan collected specimen labels to 
"PKG",26,22,1,"PAH",1,1,154,0)
capture Lab Receipt Time.
"PKG",26,22,1,"PAH",1,1,155,0)
 
"PKG",26,22,1,"PAH",1,1,156,0)
4.  LRHY TRACK COLLECTION 
"PKG",26,22,1,"PAH",1,1,157,0)
This option is used to display patient specimen collection demographics.
"PKG",26,22,1,"PAH",1,1,158,0)
 
"PKG",26,22,1,"PAH",1,1,159,0)
5.  LRHY PATIENT WAIT TIME
"PKG",26,22,1,"PAH",1,1,160,0)
This option displays how long a Patient waits to have a sample drawn.
"PKG",26,22,1,"PAH",1,1,161,0)
     
"PKG",26,22,1,"PAH",1,1,162,0)
6.  LRHY SITE FILE EDIT
"PKG",26,22,1,"PAH",1,1,163,0)
This option enables the Keyholder to edit the Howdy site file.
"PKG",26,22,1,"PAH",1,1,164,0)
 
"PKG",26,22,1,"PAH",1,1,165,0)
7.  LRHY BCE PT CARD SCAN
"PKG",26,22,1,"PAH",1,1,166,0)
This option enables Howdy to scan the Patient's VIC card when the Patient
"PKG",26,22,1,"PAH",1,1,167,0)
arrives at the phlebotomy area.
"PKG",26,22,1,"PAH",1,1,168,0)
 
"PKG",26,22,1,"PAH",1,1,169,0)
8.  LRHY PRINT BCE PPID LABEL 
"PKG",26,22,1,"PAH",1,1,170,0)
Bar Code Expansion (BCE) Compatible - This is the option the collector
"PKG",26,22,1,"PAH",1,1,171,0)
uses when verifying Positive Patient Identification (PPID) at time of
"PKG",26,22,1,"PAH",1,1,172,0)
collection.  Each collecting station will have a dedicated PC, scanner and
"PKG",26,22,1,"PAH",1,1,173,0)
bar code label printer.  Howdy will recognize this person as the collector
"PKG",26,22,1,"PAH",1,1,174,0)
and date and time of collection.  The collector will scan the patient's
"PKG",26,22,1,"PAH",1,1,175,0)
VIC card, armband or can type their SSN on their keyboard.  The patient's
"PKG",26,22,1,"PAH",1,1,176,0)
demographics appear on the screen with the current accessioned orders.  
"PKG",26,22,1,"PAH",1,1,177,0)
The collector then verifies each specimen in the presence of the patient
"PKG",26,22,1,"PAH",1,1,178,0)
to assure PPID.  The labels then print and specimens are labeled
"PKG",26,22,1,"PAH",1,1,179,0)
accordingly.
"PKG",26,22,1,"PAH",1,1,180,0)
 
"PKG",26,22,1,"PAH",1,1,181,0)
9.  HOWDY MAIN MENU
"PKG",26,22,1,"PAH",1,1,182,0)
This option provides access to the traditional Howdy Main Menu.  
"PKG",26,22,1,"PAH",1,1,183,0)
 
"PKG",26,22,1,"PAH",1,1,184,0)
10. HOWDY BCE MAIN MENU
"PKG",26,22,1,"PAH",1,1,185,0)
This option provides access to the Howdy BCE Main Menu.
"PKG",26,22,1,"PAH",1,1,186,0)
  
"PKG",26,22,1,"PAH",1,1,187,0)
Documentation Retrieval:
"PKG",26,22,1,"PAH",1,1,188,0)
=======================
"PKG",26,22,1,"PAH",1,1,189,0)
Documentation describing the functionality introduced by this patch is 
"PKG",26,22,1,"PAH",1,1,190,0)
available in the [ANONYMOUS.SOFTWARE] directories at the following
"PKG",26,22,1,"PAH",1,1,191,0)
Internet addresses:
"PKG",26,22,1,"PAH",1,1,192,0)
  
"PKG",26,22,1,"PAH",1,1,193,0)
 Preferred or Specific Server     Internet address
"PKG",26,22,1,"PAH",1,1,194,0)
 ----------------------------     -------------------------
"PKG",26,22,1,"PAH",1,1,195,0)
 First available ftp server       download.vista.med.va.gov  <-- preferred
"PKG",26,22,1,"PAH",1,1,196,0)
 Albany                           ftp.fo-albany.med.va.gov
"PKG",26,22,1,"PAH",1,1,197,0)
 Hines                            ftp.fo-hines.med.va.gov
"PKG",26,22,1,"PAH",1,1,198,0)
 Salt Lake City                   ftp.fo-slc.med.va.gov
"PKG",26,22,1,"PAH",1,1,199,0)
  
"PKG",26,22,1,"PAH",1,1,200,0)
 Below is a list of the documentation files related to this patch and 
"PKG",26,22,1,"PAH",1,1,201,0)
 available via the FTP sites listed above.
"PKG",26,22,1,"PAH",1,1,202,0)
  
"PKG",26,22,1,"PAH",1,1,203,0)
 Document File Description          File Name           FTP Mode
"PKG",26,22,1,"PAH",1,1,204,0)
 -------------------------------    -------------       --------------
"PKG",26,22,1,"PAH",1,1,205,0)
 Howdy Computerized Login Process   LR_52_405_UM.PDF    binary
"PKG",26,22,1,"PAH",1,1,206,0)
 User Manual   
"PKG",26,22,1,"PAH",1,1,207,0)
 Howdy Computerized Login Process   LR_52_405_TM.PDF    binary
"PKG",26,22,1,"PAH",1,1,208,0)
 Technical Manual       
"PKG",26,22,1,"PAH",1,1,209,0)
 Howdy Computerized Login Process   LR_52_405_IG.PDF    binary
"PKG",26,22,1,"PAH",1,1,210,0)
 Installation Guide
"PKG",26,22,1,"PAH",1,1,211,0)
 Howdy Computerized Login Process   LR_52_405_RN.PDF    binary
"PKG",26,22,1,"PAH",1,1,212,0)
 Release Notes
"PKG",26,22,1,"PAH",1,1,213,0)
  
"PKG",26,22,1,"PAH",1,1,214,0)
 After this patch is released, the updated manuals may also be retrieved 
"PKG",26,22,1,"PAH",1,1,215,0)
 from the Internet at http://www.va.gov/vdl
"PKG",26,22,1,"PAH",1,1,216,0)
                 
"PKG",26,22,1,"PAH",1,1,217,0)
 Test Sites:
"PKG",26,22,1,"PAH",1,1,218,0)
 ==========
"PKG",26,22,1,"PAH",1,1,219,0)
 To be determined.
"PKG",26,22,1,"PAH",1,1,220,0)
 
"PKG",26,22,1,"PAH",1,1,221,0)
 VISTA Software Application Requirements:
"PKG",26,22,1,"PAH",1,1,222,0)
 =======================================
"PKG",26,22,1,"PAH",1,1,223,0)
 Prior to installing VistA Howdy Computerized Phlebotomy Login 
"PKG",26,22,1,"PAH",1,1,224,0)
 Process, the following required software applications must be installed:
"PKG",26,22,1,"PAH",1,1,225,0)
 
"PKG",26,22,1,"PAH",1,1,226,0)
 Software Applications          Versions:
"PKG",26,22,1,"PAH",1,1,227,0)
 ---------------------          --------
"PKG",26,22,1,"PAH",1,1,228,0)
 Kernel                           8.0
"PKG",26,22,1,"PAH",1,1,229,0)
 VistA Laboratory                 5.2
"PKG",26,22,1,"PAH",1,1,230,0)
 VA FileMan                      22.0
"PKG",26,22,1,"PAH",1,1,231,0)
 VA Mailman                       7.1 or greater
"PKG",26,22,1,"PAH",1,1,232,0)
 Kernel Toolkit                   7.3
"PKG",26,22,1,"PAH",1,1,233,0)
    
"PKG",26,22,1,"PAH",1,1,234,0)
 INSTALLATION INSTRUCTIONS:
"PKG",26,22,1,"PAH",1,1,235,0)
 =========================
"PKG",26,22,1,"PAH",1,1,236,0)
 The install time for this patch should take less than 5 minutes.  It is 
"PKG",26,22,1,"PAH",1,1,237,0)
 best if this patch is installed outside of normal working hours.
"PKG",26,22,1,"PAH",1,1,238,0)
  
"PKG",26,22,1,"PAH",1,1,239,0)
 NOTE:  MailMan and Kernel patches must be current on the target system 
"PKG",26,22,1,"PAH",1,1,240,0)
 to avoid problems loading and installing this patch.
"PKG",26,22,1,"PAH",1,1,241,0)
  
"PKG",26,22,1,"PAH",1,1,242,0)
  1. Use the 'INSTALL/CHECK MESSAGE' option of your PackMan menu to load 
"PKG",26,22,1,"PAH",1,1,243,0)
the KIDS distribution onto your system.
"PKG",26,22,1,"PAH",1,1,244,0)
   
"PKG",26,22,1,"PAH",1,1,245,0)
  2. On the 'Kernel Installation & Distribution System' Menu (KIDS), 
"PKG",26,22,1,"PAH",1,1,246,0)
select the 'Installation' menu.
"PKG",26,22,1,"PAH",1,1,247,0)
   
"PKG",26,22,1,"PAH",1,1,248,0)
     From this menu you may choose the following options prior to 
"PKG",26,22,1,"PAH",1,1,249,0)
installing this patch:
"PKG",26,22,1,"PAH",1,1,250,0)
  
"PKG",26,22,1,"PAH",1,1,251,0)
     - Backup a Transport Global - this option creates a backup message 
"PKG",26,22,1,"PAH",1,1,252,0)
of any routines exported with the patch. It does NOT backup any other
"PKG",26,22,1,"PAH",1,1,253,0)
changes, such as data dictionaries or templates.
"PKG",26,22,1,"PAH",1,1,254,0)
  
"PKG",26,22,1,"PAH",1,1,255,0)
     - Compare Transport Global to Current System - this option allows 
"PKG",26,22,1,"PAH",1,1,256,0)
you to view all changes that are made when the patch is installed. It
"PKG",26,22,1,"PAH",1,1,257,0)
compares all components of the patch (routines, DDs, templates, etc.).
"PKG",26,22,1,"PAH",1,1,258,0)
 
"PKG",26,22,1,"PAH",1,1,259,0)
     -  Verify Checksums in Transport Global - this option allows you to 
"PKG",26,22,1,"PAH",1,1,260,0)
ensure the integrity of the routine that is in the transport global.
"PKG",26,22,1,"PAH",1,1,261,0)
   
"PKG",26,22,1,"PAH",1,1,262,0)
  3. Use the 'Install Package(s)' option under the 'Installation' menu.
"PKG",26,22,1,"PAH",1,1,263,0)
  
"PKG",26,22,1,"PAH",1,1,264,0)
     When prompted for INSTALL NAME, enter: LR*5.2*405.
"PKG",26,22,1,"PAH",1,1,265,0)
 
"PKG",26,22,1,"PAH",1,1,266,0)
     Install Questions for LR*5.2*405:
"PKG",26,22,1,"PAH",1,1,267,0)
 
"PKG",26,22,1,"PAH",1,1,268,0)
     When prompted "Want KIDS to Rebuild Menu Trees Upon Completion of 
"PKG",26,22,1,"PAH",1,1,269,0)
     Install? NO//", respond NO.  Responding "Yes" to the prompt for
"PKG",26,22,1,"PAH",1,1,270,0)
     rebuilding menu trees can significantly increase install time.
"PKG",26,22,1,"PAH",1,1,271,0)
 
"PKG",26,22,1,"PAH",1,1,272,0)
     When prompted "Want KIDS to INHIBIT LOGONs during the install? NO//",
"PKG",26,22,1,"PAH",1,1,273,0)
     respond NO.
"PKG",26,22,1,"PAH",1,1,274,0)
 
"PKG",26,22,1,"PAH",1,1,275,0)
     When prompted "Want to DISABLE Scheduled Options, Menu Options, and
"PKG",26,22,1,"PAH",1,1,276,0)
     Protocols? NO//", respond NO.
"PKG",26,22,1,"PAH",1,1,277,0)
 
"PKG",26,22,1,"PAH",1,1,278,0)
  4. Verify that the installation of the patch completed correctly by 
"PKG",26,22,1,"PAH",1,1,279,0)
using the Kernel Installation & Distribution System [XPD MAIN]
"PKG",26,22,1,"PAH",1,1,280,0)
options:
"PKG",26,22,1,"PAH",1,1,281,0)
 
"PKG",26,22,1,"PAH",1,1,282,0)
        KIDS 'Utilities...' [XPD UTILITY] option 'Install File Print' [XPD
"PKG",26,22,1,"PAH",1,1,283,0)
        PRINT INSTALL FILE] and selecting this patch (LR*5.2*405).
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
28
"RTN","LRHY0")
0^1^B39459893^n/a
"RTN","LRHY0",1,0)
LRHY0 ;DALOI/HOAK - HOWDY MAIN DRIVER ;10/15/10 11:00am
"RTN","LRHY0",2,0)
 ;;5.2;LAB SERVICE;**405**;Sep 27, 1994;Build 93
"RTN","LRHY0",3,0)
 ;
"RTN","LRHY0",4,0)
PICK ;
"RTN","LRHY0",5,0)
 ;  pick the site from Howdy Site FILE 69.86
"RTN","LRHY0",6,0)
 S LREND=0
"RTN","LRHY0",7,0)
 S DIC(0)="AEMQZ"
"RTN","LRHY0",8,0)
 S DIC=69.86
"RTN","LRHY0",9,0)
 D ^DIC
"RTN","LRHY0",10,0)
 I Y=-1 S LREND=1 QUIT
"RTN","LRHY0",11,0)
 S LRHYSITE=+Y
"RTN","LRHY0",12,0)
 K DIC
"RTN","LRHY0",13,0)
 ;
"RTN","LRHY0",14,0)
 I $G(^LRHY(69.86,LRHYSITE,0))["ALTER" S LRDEV=$O(^%ZIS(1,"B","NULL DEVICE",0)) G ALT
"RTN","LRHY0",15,0)
 ;
"RTN","LRHY0",16,0)
 ; Pick a printer
"RTN","LRHY0",17,0)
 S LRDEV=0
"RTN","LRHY0",18,0)
 K DIC
"RTN","LRHY0",19,0)
 S DIC(0)="EMQZ" K Y S LRHYCT2=1
"RTN","LRHY0",20,0)
 F  S LRDEV=$O(^LRHY(69.86,LRHYSITE,10,"B",LRDEV)) Q:+LRDEV'>0  D
"RTN","LRHY0",21,0)
 .  W !,LRHYCT2,". ",$P(^%ZIS(1,LRDEV,0),U)
"RTN","LRHY0",22,0)
 .  S LRX(LRHYCT2)=LRDEV S LRHYCT2=LRHYCT2+1
"RTN","LRHY0",23,0)
CHOOO W !,"Choose a label printer: " R X:DTIME W !
"RTN","LRHY0",24,0)
 I U[X S LREND=1 QUIT
"RTN","LRHY0",25,0)
 I X="" W !,"NOTHING SELECTED" S LREND=1 H 1 QUIT
"RTN","LRHY0",26,0)
 I '$D(LRX(X)) W !,"NUMBER NOT IN RANGE" H 1 G CHOOO
"RTN","LRHY0",27,0)
 I U[X S LREND=1 QUIT
"RTN","LRHY0",28,0)
 I 'X I $G(X)'="" W !,"enter the number please" G CHOOO
"RTN","LRHY0",29,0)
 S LRDEV=LRX(X)
"RTN","LRHY0",30,0)
 ;
"RTN","LRHY0",31,0)
 ;
"RTN","LRHY0",32,0)
ALT ;
"RTN","LRHY0",33,0)
 W ?11,$P(^%ZIS(1,LRDEV,0),U) H 2
"RTN","LRHY0",34,0)
 K DIC
"RTN","LRHY0",35,0)
 K LRHYCT2
"RTN","LRHY0",36,0)
 D USER^LRHYU
"RTN","LRHY0",37,0)
 ;
"RTN","LRHY0",38,0)
 ;
"RTN","LRHY0",39,0)
 QUIT
"RTN","LRHY0",40,0)
 ;
"RTN","LRHY0",41,0)
VET ; Primary API for Howdy!  Called by [LRHY PATIENT CARD SCAN] option.
"RTN","LRHY0",42,0)
 D XTMP^LRHYU
"RTN","LRHY0",43,0)
 N LRNPZZX,LRNODUP,LRLLOC,LRTSTZ99,LRACC,LRCDT,LRDPF,LRI
"RTN","LRHY0",44,0)
 N LRORD3,LRHYFIX,LRPLICK,LRPR,LRPRAC,LRQUIET,LRRB,LRSAMP,LRSND
"RTN","LRHY0",45,0)
 N LRSS,LRST,LRSTATUS,LRSUB1,LRTIC,LRTIM,LRTN,LRTREA,LRTS,LRTSORU
"RTN","LRHY0",46,0)
 N LRTST6,LRTT,LRUN,LRWLO,LRWLC,LRWRD,LRXYZ,LR3DTIME,LR3DTN
"RTN","LRHY0",47,0)
 N LR3SN,LRDT0,LREAL,LRFUTURE,LRGOTIT,LRHOWDY,LRHYHOK,LRIENZZ
"RTN","LRHY0",48,0)
 N LRNOTST,LRLBLBP,LRLLOC66,LRMAX2,LRNLT,LRNODUP,LRNONE,LRNPZZX,LRODT
"RTN","LRHY0",49,0)
 N LRODT0,LRHYOK,LRORD24,LRORU3,LRPAST,LRPIX,LRAHEAD,LRCHK,LRHYCT,LRCOL99
"RTN","LRHY0",50,0)
 N LRDT0,LRDUPT,LRHT1,LRIX,LROLLOC,LRX,LR3X
"RTN","LRHY0",51,0)
 K LRCCOMX,LRDUX,LREDT,LRDX,DIB,DIK
"RTN","LRHY0",52,0)
 K LR3D,LR33ORD,LR3T,LRANX6,LRCSQ,LRUP,LRHY3DT,LRHY3SN3
"RTN","LRHY0",53,0)
 K LRHYDJOB,LRHYSPC7,LRHYURG3,LRS3333,LRTAT
"RTN","LRHY0",54,0)
 K LRMERG,LRODRNUM,LRORDNUM,LRUNC,LRPARAM
"RTN","LRHY0",55,0)
 K LRHYCT3,LRHYCTC,IOTLC,LRC,LRHYCT3,LRHYCTC,LRHYTOK,LRKIL,LRLABNOD
"RTN","LRHY0",56,0)
 K LRLABSTP,LRLINE,LRLWC,LRN5,LRNONONO,LRNOT,LRNOTEST,LRNOUP,LRNT,LRNX0
"RTN","LRHY0",57,0)
 K LRODRUM,LRONE,LRORDSIZ,LRORDT,LRORDT1,LRM1,LRM2,LRM3,LRPHONE,LRORIEN
"RTN","LRHY0",58,0)
 K LRS,LRSC0,LRSDT,LRSN1,LRSPIEN,LRSSN,LRSTAR,LRSTOP,LRSTUCK
"RTN","LRHY0",59,0)
 K LRT0,LRTECH,LRTKX,LRTM7,LRTOTAL,LRTST,LRTUBE,LRTXT,LRUDT,LRUNK,LRURG7
"RTN","LRHY0",60,0)
 K LRURGA,LRURGNCY,LRURGT,LRURGZ19,LRX1,LRX2,LRX3,LRY1,LRYTAT,LR3,LR3MULT
"RTN","LRHY0",61,0)
 K LR3NX0,LR3ODT,M9,V,LRHYORDZ
"RTN","LRHY0",62,0)
 K LABCNT,LN,LR0NODE,LR68,LR6987,LR700,LR7LESS
"RTN","LRHY0",63,0)
 K LR7MORE,LRAANAME,LRAAZ,LRAC1,LRACCER,LRACCTM,LRACCXX
"RTN","LRHY0",64,0)
 K LRACNODE,LRACO,LRACTM,LRADD,LRBAR0,LRBAR1,LRBBRD
"RTN","LRHY0",65,0)
 K LRBINGO,LRCEN,LRCNTX,LRCTYPE,LRD,LRDA,LRDRAW0
"RTN","LRHY0",66,0)
 K LRDRAW1,LRDRAW7,LRDT,LRDTX,LRDUP,LRDUX,LREDT,LRDX
"RTN","LRHY0",67,0)
 K LRFINX
"RTN","LRHY0",68,0)
 ;
"RTN","LRHY0",69,0)
VET1 ; Code below executes to handle Patient episode.
"RTN","LRHY0",70,0)
 ; Then, Howdy waits here for next Patient
"RTN","LRHY0",71,0)
 ;
"RTN","LRHY0",72,0)
 I '$G(LRDEV) D PICK Q:LREND
"RTN","LRHY0",73,0)
 ;
"RTN","LRHY0",74,0)
 K LRDFN,PNM,LRSN,SSN,LRIDT,LRAA,LRAN,LRAD
"RTN","LRHY0",75,0)
 K ^TMP("LRHYDY",$J)
"RTN","LRHY0",76,0)
 D ^LRPARAM ; Set Howdy up as Lab user
"RTN","LRHY0",77,0)
 S LRHOWDY=1
"RTN","LRHY0",78,0)
 S LRHYCT=$G(LRHYCT,0)
"RTN","LRHY0",79,0)
 I LRHYCT=2 W !,"Please ask the clerk for assistance." K LRHYCT QUIT
"RTN","LRHY0",80,0)
 S LRODT=DT
"RTN","LRHY0",81,0)
 W @IOF
"RTN","LRHY0",82,0)
 K X
"RTN","LRHY0",83,0)
 ; 
"RTN","LRHY0",84,0)
 W !!,"Please swipe your ID CARD or Type SSN: "
"RTN","LRHY0",85,0)
 ;  %ZOSF("EOFF") = U $I:NOECHO
"RTN","LRHY0",86,0)
 ;  %ZOSF("EON") = U $I:ECHO
"RTN","LRHY0",87,0)
 X ^%ZOSF("EOFF")
"RTN","LRHY0",88,0)
 R X:9999999 W !
"RTN","LRHY0",89,0)
 I X=U X ^%ZOSF("EON") D BAKUSER^LRHYU QUIT
"RTN","LRHY0",90,0)
 X ^%ZOSF("EON")
"RTN","LRHY0",91,0)
 ; Code is set to read all types of VIC card as of 9/05/2005
"RTN","LRHY0",92,0)
 I $E(X,1,9)["-" D
"RTN","LRHY0",93,0)
 .  S X=$P(X,"-")_$P(X,"-",2)_$P(X,"-",3)
"RTN","LRHY0",94,0)
 I $E(X,1,1)'=0 I '$E(X,1,1) S X=$E(X,2,10)
"RTN","LRHY0",95,0)
 I $L(X)>10 S X=$E(X,2,10)
"RTN","LRHY0",96,0)
 I $L(X)'=9 W !,"Didn't read that Partner. " W:LRHYCT'=2 "Try again." H 2 S LRHYCT=LRHYCT+1 G VET
"RTN","LRHY0",97,0)
 ;
"RTN","LRHY0",98,0)
 K DFN,LRDFN,LRDPA,LRDPF,PNM,LRHYCT
"RTN","LRHY0",99,0)
 ; 
"RTN","LRHY0",100,0)
 S DFN=$O(^DPT("SSN",X,0))
"RTN","LRHY0",101,0)
 I 'DFN W !,"No record for this person." R X:15 G VET
"RTN","LRHY0",102,0)
 S LRDFN=$G(^DPT(DFN,"LR"))
"RTN","LRHY0",103,0)
 ;
"RTN","LRHY0",104,0)
 I LRDFN D PT^LRX
"RTN","LRHY0",105,0)
 I 'LRDFN W !,"No Lab Data Available... Please check with clerk at the Desk." H 5 D LOG K X G VET
"RTN","LRHY0",106,0)
 K ^TMP("LRHYDY",$J,"LRHYDY",$J,LRDFN)
"RTN","LRHY0",107,0)
 ;
"RTN","LRHY0",108,0)
 ; this call checks order against the 69.86
"RTN","LRHY0",109,0)
 D ORDCHK^LRHYB
"RTN","LRHY0",110,0)
 ;
"RTN","LRHY0",111,0)
 ;
"RTN","LRHY0",112,0)
 ;
"RTN","LRHY0",113,0)
 I $G(LRMULT) W !!!,"Please check with clerk at the Desk" H 5 D LOG K X G VET
"RTN","LRHY0",114,0)
 I '$G(LRORD) S LREND=1 W !,$G(LRCTYPE)," No Orders found. Please check with clerk at the Desk" H 5 D LOG K X G VET
"RTN","LRHY0",115,0)
 D NOW^%DTC
"RTN","LRHY0",116,0)
 ;
"RTN","LRHY0",117,0)
 ;
"RTN","LRHY0",118,0)
 ;
"RTN","LRHY0",119,0)
PRT1 ;
"RTN","LRHY0",120,0)
 ;
"RTN","LRHY0",121,0)
 W @IOF
"RTN","LRHY0",122,0)
 D SCRNON^LRHYUTL
"RTN","LRHY0",123,0)
 S PNMALL="Howdy "_$P(PNM,",",2)_" "_$P(PNM,",")
"RTN","LRHY0",124,0)
 W !
"RTN","LRHY0",125,0)
 W IODHLT,"     ",PNMALL
"RTN","LRHY0",126,0)
 W !
"RTN","LRHY0",127,0)
 W IODHLB,"     ",PNMALL
"RTN","LRHY0",128,0)
 W !
"RTN","LRHY0",129,0)
 W !,$$CJ^XLFSTR($G(^LRHY(69.86,LRHYSITE,40)),IOM)
"RTN","LRHY0",130,0)
 W !,$$CJ^XLFSTR("Your Host is: "_$G(^LRHY(69.86,LRHYSITE,42)),IOM)
"RTN","LRHY0",131,0)
 W !,$$CJ^XLFSTR($G(^LRHY(69.86,LRHYSITE,44)),IOM)
"RTN","LRHY0",132,0)
 W !
"RTN","LRHY0",133,0)
 W IODHLT,"    Orders for date: "_$$Y2K^LRX(DT)
"RTN","LRHY0",134,0)
 W !
"RTN","LRHY0",135,0)
 W IODHLB,"    Orders for date: "_$$Y2K^LRX(DT)
"RTN","LRHY0",136,0)
 W !
"RTN","LRHY0",137,0)
 S LRXYZ=0
"RTN","LRHY0",138,0)
 F  S LRXYZ=$O(^LRHY(69.86,LRHYSITE,32,LRXYZ)) Q:+LRXYZ'>0  D
"RTN","LRHY0",139,0)
 .  W !
"RTN","LRHY0",140,0)
 .  W !,$$CJ^XLFSTR($G(^LRHY(69.86,LRHYSITE,32,LRXYZ,0)),IOM)
"RTN","LRHY0",141,0)
 .  W !
"RTN","LRHY0",142,0)
 W *7 H 1 W *7 H 1 W *7
"RTN","LRHY0",143,0)
 ;
"RTN","LRHY0",144,0)
 I $D(^LRHY(69.86,7,54,"B")) D BINBRD^LRHYBC1
"RTN","LRHY0",145,0)
 H 5
"RTN","LRHY0",146,0)
QUITH ; 
"RTN","LRHY0",147,0)
 D SCRNOFF^LRHYUTL ; Turn off screen variables
"RTN","LRHY0",148,0)
 K LRDFN,PNM,LRSN,SSN,LRIDT,LRAA,LRAN,LRAD,LRHYCT
"RTN","LRHY0",149,0)
 K LRNPZZX,LRNODUP,LRLLOC,LRTSTZ99,LRACC,LRCDT,LRDPF,LRI
"RTN","LRHY0",150,0)
 K LRORD3,LRHYFIX,LRPLICK,LRPR,LRPRAC,LRQUIET,LRRB,LRSAMP,LRSND
"RTN","LRHY0",151,0)
 K LRSS,LRST,LRSTATUS,LRSUB1,LRTIC,LRTIM,LRTN,LRTREA,LRTS,LRTSORU
"RTN","LRHY0",152,0)
 K LRTST6,LRTT,LRUN,LRWLO,LRWLC,LRWRD,LRXYZ,LR3DTIME,LR3DTN
"RTN","LRHY0",153,0)
 K LR3SN,LRDT0,LREAL,LRFUTURE,LRGOTIT,LRHOWDY,LRHYHOK,LRIENZZ
"RTN","LRHY0",154,0)
 K LRNOTST,LRLBLBP,LRLLOC66,LRMAX2,LRNLT,LRNODUP,LRNONE,LRNPZZX,LRODT
"RTN","LRHY0",155,0)
 K LRODT0,LRHYOK,LRORD24,LRORU3,LRPAST,LRPIX,LRAHEAD,LRCHK,LRHYCT,LRCOL99
"RTN","LRHY0",156,0)
 K LRDT0,LRDUPT,LRHT1,LRIX,LROLLOC,LRX,LR3X
"RTN","LRHY0",157,0)
 K VAIN
"RTN","LRHY0",158,0)
 ;
"RTN","LRHY0",159,0)
 ;
"RTN","LRHY0",160,0)
 G VET1
"RTN","LRHY0",161,0)
 ;
"RTN","LRHY0",162,0)
 ;
"RTN","LRHY0",163,0)
 ;
"RTN","LRHY0",164,0)
ORDCHK ; This block to be used for future version
"RTN","LRHY0",165,0)
 QUIT
"RTN","LRHY0",166,0)
LOG ; Howdy will default to the clerks judgement when multiple orders found.
"RTN","LRHY0",167,0)
 I $G(LRMULT) QUIT
"RTN","LRHY0",168,0)
 Q:$G(LRSKIPNO)
"RTN","LRHY0",169,0)
 ;
"RTN","LRHY0",170,0)
 W !,"NO ORDERS"
"RTN","LRHY0",171,0)
 ;
"RTN","LRHY0",172,0)
 K LRDPF,PNM
"RTN","LRHY0",173,0)
 D PT^LRX
"RTN","LRHY0",174,0)
 D NOW^%DTC
"RTN","LRHY0",175,0)
 I '$G(LRDFN) S ^TMP("LRHYDY",$J,"LR NO ORDERS",%)=$G(DFN) QUIT
"RTN","LRHY0",176,0)
 S ^TMP("LRHYDY",$J,"LR NO ORDERS",%)=$G(PNM)_U_$G(^LR(LRDFN,.1))_U_$G(SSN)
"RTN","LRHY0",177,0)
 QUIT
"RTN","LRHY0",178,0)
 ;
"RTN","LRHY0",179,0)
 ;
"RTN","LRHY0",180,0)
LOG1 ; Howdy will default to the clerks judgement when multiple orders found.
"RTN","LRHY0",181,0)
 K LRORD,LRDPT,PNM
"RTN","LRHY0",182,0)
 W !,"MULTIPLE ORDERS"
"RTN","LRHY0",183,0)
 K LRDPF,PNM
"RTN","LRHY0",184,0)
 D PT^LRX
"RTN","LRHY0",185,0)
 D NOW^%DTC
"RTN","LRHY0",186,0)
 S ^TMP("LRHYDY",$J,"LR MULTIPLE ORDERS",%)=$G(PNM)_U_$G(^LR(LRDFN,.1))_U_$G(SSN)
"RTN","LRHY0",187,0)
 S LRSKIPNO=1
"RTN","LRHY0",188,0)
 QUIT
"RTN","LRHY0",189,0)
ORDERS ;
"RTN","LRHY0",190,0)
 QUIT
"RTN","LRHY01")
0^2^B42068305^n/a
"RTN","LRHY01",1,0)
LRHY01 ;DALOI/HOAK - HOWDY MAIN DRIVER ;10/15/10 11:02am
"RTN","LRHY01",2,0)
 ;;5.2;LAB SERVICE;**405**;Sep 27, 1994;Build 93
"RTN","LRHY01",3,0)
 ;
"RTN","LRHY01",4,0)
PICK ;
"RTN","LRHY01",5,0)
 ;  pick the site from Howdy Site FILE 69.86
"RTN","LRHY01",6,0)
 S LREND=0
"RTN","LRHY01",7,0)
 S DIC(0)="AEMQZ"
"RTN","LRHY01",8,0)
 S DIC=69.86
"RTN","LRHY01",9,0)
 D ^DIC
"RTN","LRHY01",10,0)
 I Y=-1 S LREND=1 QUIT
"RTN","LRHY01",11,0)
 S LRHYSITE=+Y
"RTN","LRHY01",12,0)
 K DIC
"RTN","LRHY01",13,0)
 ;
"RTN","LRHY01",14,0)
 N LRHY S LRHY="NUL" S LRHY=$O(^%ZIS(1,"B",LRHY))
"RTN","LRHY01",15,0)
 S LRDEV=$O(^%ZIS(1,"B",LRHY,0))
"RTN","LRHY01",16,0)
 D BINGO
"RTN","LRHY01",17,0)
 G ALT
"RTN","LRHY01",18,0)
 ;
"RTN","LRHY01",19,0)
 ; Pick a printer
"RTN","LRHY01",20,0)
 S LRDEV=0
"RTN","LRHY01",21,0)
 K DIC
"RTN","LRHY01",22,0)
 S DIC(0)="EMQZ" K Y S LRHYCT2=1
"RTN","LRHY01",23,0)
 F  S LRDEV=$O(^LRHY(69.86,LRHYSITE,10,"B",LRDEV)) Q:+LRDEV'>0  D
"RTN","LRHY01",24,0)
 .  W !,LRHYCT2,". ",$P(^%ZIS(1,LRDEV,0),U)
"RTN","LRHY01",25,0)
 .  S LRX(LRHYCT2)=LRDEV S LRHYCT2=LRHYCT2+1
"RTN","LRHY01",26,0)
CHOOO W !,"Choose a label printer: " R X:DTIME W !
"RTN","LRHY01",27,0)
 I X="" W !,"NOTHING SELECTED" S LREND=1 QUIT
"RTN","LRHY01",28,0)
 I U[X S LREND=1 QUIT
"RTN","LRHY01",29,0)
 I 'X I $G(X)'="" W !,"enter the number please" G CHOOO
"RTN","LRHY01",30,0)
 S LRDEV=LRX(X)
"RTN","LRHY01",31,0)
 ;
"RTN","LRHY01",32,0)
ALT ;
"RTN","LRHY01",33,0)
 W ?11,$P(^%ZIS(1,LRDEV,0),U) H 2
"RTN","LRHY01",34,0)
 K DIC
"RTN","LRHY01",35,0)
 K LRHYCT2
"RTN","LRHY01",36,0)
 ;
"RTN","LRHY01",37,0)
 QUIT
"RTN","LRHY01",38,0)
 ;
"RTN","LRHY01",39,0)
VET ; Primary API for Howdy!  Called by [LRHY PATIENT CARD SCAN] option.
"RTN","LRHY01",40,0)
 D XTMP^LRHYU
"RTN","LRHY01",41,0)
 N LRDFN,PNM,LRSN,SSN,LRIDT,LRAA,LRAN,LRAD
"RTN","LRHY01",42,0)
 N LRNPZZX,LRNODUP,LRLLOC,LRTSTZ99,LRACC,LRCDT,LRDPF,LRI
"RTN","LRHY01",43,0)
 N LRORD3,LRHYFIX,LRPLICK,LRPR,LRPRAC,LRQUIET,LRRB,LRSAMP,LRSND
"RTN","LRHY01",44,0)
 N LRSS,LRST,LRSTATUS,LRSUB1,LRTIC,LRTIM,LRTN,LRTREA,LRTS,LRTSORU
"RTN","LRHY01",45,0)
 N LRTST6,LRTT,LRUN,LRWLO,LRWLC,LRWRD,LRXYZ,LR3DTIME,LR3DTN
"RTN","LRHY01",46,0)
 N LR3SN,LRDT0,LREAL,LRFUTURE,LRGOTIT,LRHOWDY,LRHYHOK,LRIENZZ
"RTN","LRHY01",47,0)
 N LRNOTST,LRLBLBP,LRLLOC66,LRMAX2,LRNLT,LRNODUP,LRNONE,LRNPZZX,LRODT
"RTN","LRHY01",48,0)
 N LRODT0,LRHYOK,LRORD24,LRORU3,LRPAST,LRPIX,LRAHEAD,LRCHK,LRHYCT,LRCOL99
"RTN","LRHY01",49,0)
 N LRDT0,LRDUPT,LRHT1,LRIX,LROLLOC,LRX,LR3X
"RTN","LRHY01",50,0)
 K LR3D,LR33ORD,LR3T,LRANX6,LRCSQ,LRUP,LRHY3DT,LRHY3SN3
"RTN","LRHY01",51,0)
 K LRHYDJOB,LRHYSPC7,LRHYURG3,LRS3333,LRTAT
"RTN","LRHY01",52,0)
 K LRHY3DT3
"RTN","LRHY01",53,0)
 K LRHY3DT3
"RTN","LRHY01",54,0)
 K LRCCOMX
"RTN","LRHY01",55,0)
 K LRFINX
"RTN","LRHY01",56,0)
 ;
"RTN","LRHY01",57,0)
VET1 ; Code below executes to handle Patient episode.
"RTN","LRHY01",58,0)
 ; Then, Howdy waits here for next Patient
"RTN","LRHY01",59,0)
 I '$G(LRDEV) D PICK Q:LREND
"RTN","LRHY01",60,0)
 K LRDFN,PNM,LRSN,SSN,LRIDT,LRAA,LRAN,LRAD
"RTN","LRHY01",61,0)
 K ^TMP("LRHYDY",$J)
"RTN","LRHY01",62,0)
 D ^LRPARAM ; Set Howdy up as Lab user
"RTN","LRHY01",63,0)
 S LRHOWDY=1
"RTN","LRHY01",64,0)
 S LRHYCT=$G(LRHYCT,0)
"RTN","LRHY01",65,0)
 I LRHYCT=2 W !,"Please ask the clerk for assistance." K LRHYCT QUIT
"RTN","LRHY01",66,0)
 S LRODT=DT
"RTN","LRHY01",67,0)
 W @IOF
"RTN","LRHY01",68,0)
 K X
"RTN","LRHY01",69,0)
 ; 
"RTN","LRHY01",70,0)
 W !!,"Please swipe your ID CARD or Type SSN: "
"RTN","LRHY01",71,0)
 ;  %ZOSF("EOFF") = U $I:NOECHO
"RTN","LRHY01",72,0)
 ;  %ZOSF("EON") = U $I:ECHO
"RTN","LRHY01",73,0)
 X ^%ZOSF("EOFF")
"RTN","LRHY01",74,0)
 R X:9999999 W !
"RTN","LRHY01",75,0)
 I X=U X ^%ZOSF("EON") QUIT
"RTN","LRHY01",76,0)
 X ^%ZOSF("EON")
"RTN","LRHY01",77,0)
 ; Code is set to read all types of VIC card as of 9/05/2005
"RTN","LRHY01",78,0)
 I $E(X,1,9)["-" D
"RTN","LRHY01",79,0)
 .  S X=$P(X,"-")_$P(X,"-",2)_$P(X,"-",3)
"RTN","LRHY01",80,0)
 I $E(X,1,1)'=0 I '$E(X,1,1) S X=$E(X,2,10)
"RTN","LRHY01",81,0)
 I $L(X)>10 S X=$E(X,2,10)
"RTN","LRHY01",82,0)
 I $L(X)'=9 W !,"Didn't read that Partner. " W:LRHYCT'=2 "Try again." H 2 S LRHYCT=LRHYCT+1 G VET
"RTN","LRHY01",83,0)
 K DFN,LRDFN,LRDPA,LRDPF,PNM,LRHYCT
"RTN","LRHY01",84,0)
 ; 
"RTN","LRHY01",85,0)
 S DFN=$O(^DPT("SSN",X,0))
"RTN","LRHY01",86,0)
 I 'DFN W !,"No record for this person." R X:15 G VET
"RTN","LRHY01",87,0)
 S LRDFN=$G(^DPT(DFN,"LR"))
"RTN","LRHY01",88,0)
 ;
"RTN","LRHY01",89,0)
 I LRDFN D PT^LRX
"RTN","LRHY01",90,0)
 I 'LRDFN W !,"No Lab Data Available... Please check with clerk at the Desk." H 5 D LOG K X G VET
"RTN","LRHY01",91,0)
 K ^TMP("LRHYDY",$J,"LRHYDY",$J,LRDFN)
"RTN","LRHY01",92,0)
 ;
"RTN","LRHY01",93,0)
 ; this call checks order against the 69.86
"RTN","LRHY01",94,0)
 D ORDCHK^LRHYB
"RTN","LRHY01",95,0)
 ;
"RTN","LRHY01",96,0)
 ;
"RTN","LRHY01",97,0)
 ;
"RTN","LRHY01",98,0)
 I $G(LRMULT) W !!!,"Please check with clerk at the Desk" H 5 D LOG K X G VET
"RTN","LRHY01",99,0)
 I '$G(LRORD) S LREND=1 W !,$G(LRCTYPE)," No Orders found. Please check with clerk at the Desk" H 5 D LOG K X G VET
"RTN","LRHY01",100,0)
 D NOW^%DTC
"RTN","LRHY01",101,0)
 ;
"RTN","LRHY01",102,0)
 ;
"RTN","LRHY01",103,0)
 ;
"RTN","LRHY01",104,0)
PRT1 ;
"RTN","LRHY01",105,0)
 ;
"RTN","LRHY01",106,0)
 W @IOF
"RTN","LRHY01",107,0)
 D SCRNON^LRHYUTL
"RTN","LRHY01",108,0)
 S PNMALL="Howdy "_$P(PNM,",",2)_" "_$P(PNM,",")
"RTN","LRHY01",109,0)
 W !
"RTN","LRHY01",110,0)
 W IODHLT,"     ",PNMALL
"RTN","LRHY01",111,0)
 W !
"RTN","LRHY01",112,0)
 W IODHLB,"     ",PNMALL
"RTN","LRHY01",113,0)
 W !
"RTN","LRHY01",114,0)
 W !,$$CJ^XLFSTR($G(^LRHY(69.86,LRHYSITE,40)),IOM)
"RTN","LRHY01",115,0)
 W !,$$CJ^XLFSTR("Your Host is: "_$G(^LRHY(69.86,LRHYSITE,42)),IOM)
"RTN","LRHY01",116,0)
 W !,$$CJ^XLFSTR($G(^LRHY(69.86,LRHYSITE,44)),IOM)
"RTN","LRHY01",117,0)
 W !
"RTN","LRHY01",118,0)
 W IODHLT,"    Orders for date: "_$$Y2K^LRX(DT)
"RTN","LRHY01",119,0)
 W !
"RTN","LRHY01",120,0)
 W IODHLB,"    Orders for date: "_$$Y2K^LRX(DT)
"RTN","LRHY01",121,0)
 W !
"RTN","LRHY01",122,0)
 S LRXYZ=0
"RTN","LRHY01",123,0)
 F  S LRXYZ=$O(^LRHY(69.86,LRHYSITE,32,LRXYZ)) Q:+LRXYZ'>0  D
"RTN","LRHY01",124,0)
 .  W !
"RTN","LRHY01",125,0)
 .  W !,$$CJ^XLFSTR($G(^LRHY(69.86,LRHYSITE,32,LRXYZ,0)),IOM)
"RTN","LRHY01",126,0)
 .  W !
"RTN","LRHY01",127,0)
 W *7 H 1 W *7 H 1 W *7
"RTN","LRHY01",128,0)
 ;
"RTN","LRHY01",129,0)
 I $D(^LRHY(69.86,LRHYSITE,54,"B")) D LRHYBING
"RTN","LRHY01",130,0)
 H 5
"RTN","LRHY01",131,0)
QUITH ; 
"RTN","LRHY01",132,0)
 D SCRNOFF^LRHYUTL ; Turn off screen variables
"RTN","LRHY01",133,0)
 K LRDFN,PNM,LRSN,SSN,LRIDT,LRAA,LRAN,LRAD,LRHYCT
"RTN","LRHY01",134,0)
 K LRNPZZX,LRNODUP,LRLLOC,LRTSTZ99,LRACC,LRCDT,LRDPF,LRI
"RTN","LRHY01",135,0)
 K LRORD3,LRHYFIX,LRPLICK,LRPR,LRPRAC,LRQUIET,LRRB,LRSAMP,LRSND
"RTN","LRHY01",136,0)
 K LRSS,LRST,LRSTATUS,LRSUB1,LRTIC,LRTIM,LRTN,LRTREA,LRTS,LRTSORU
"RTN","LRHY01",137,0)
 K LRTST6,LRTT,LRUN,LRWLO,LRWLC,LRWRD,LRXYZ,LR3DTIME,LR3DTN
"RTN","LRHY01",138,0)
 K LR3SN,LRDT0,LREAL,LRFUTURE,LRGOTIT,LRHOWDY,LRHYHOK,LRIENZZ
"RTN","LRHY01",139,0)
 K LRNOTST,LRLBLBP,LRLLOC66,LRMAX2,LRNLT,LRNODUP,LRNONE,LRNPZZX,LRODT
"RTN","LRHY01",140,0)
 K LRODT0,LRHYOK,LRORD24,LRORU3,LRPAST,LRPIX,LRAHEAD,LRCHK,LRHYCT,LRCOL99
"RTN","LRHY01",141,0)
 K LRDT0,LRDUPT,LRHT1,LRIX,LROLLOC,LRX,LR3X
"RTN","LRHY01",142,0)
 K VAIN
"RTN","LRHY01",143,0)
 ;
"RTN","LRHY01",144,0)
 ;
"RTN","LRHY01",145,0)
 G VET1
"RTN","LRHY01",146,0)
 ;
"RTN","LRHY01",147,0)
 ;
"RTN","LRHY01",148,0)
 ;
"RTN","LRHY01",149,0)
ORDCHK ; This block to be used for future version
"RTN","LRHY01",150,0)
 QUIT
"RTN","LRHY01",151,0)
LOG ; Howdy will default to the clerks judgement when multiple orders found.
"RTN","LRHY01",152,0)
 Q:$G(LRSKIPNO)
"RTN","LRHY01",153,0)
 ;
"RTN","LRHY01",154,0)
 W !,"NO ORDERS"
"RTN","LRHY01",155,0)
 ;
"RTN","LRHY01",156,0)
 K LRDPF,PNM
"RTN","LRHY01",157,0)
 D PT^LRX
"RTN","LRHY01",158,0)
 D NOW^%DTC
"RTN","LRHY01",159,0)
 I '$G(LRDFN) S ^TMP("LRHYDY",$J,"LR NO ORDERS",%)=$G(DFN) QUIT
"RTN","LRHY01",160,0)
 S ^TMP("LRHYDY",$J,"LR NO ORDERS",%)=$G(PNM)_U_$G(^LR(LRDFN,.1))_U_$G(SSN)
"RTN","LRHY01",161,0)
 QUIT
"RTN","LRHY01",162,0)
 ;
"RTN","LRHY01",163,0)
 ;
"RTN","LRHY01",164,0)
LOG1 ; Howdy will default to the clerks judgement when multiple orders found.
"RTN","LRHY01",165,0)
 K LRORD,LRDPT,PNM
"RTN","LRHY01",166,0)
 W !,"MULTIPLE ORDERS"
"RTN","LRHY01",167,0)
 K LRDPF,PNM
"RTN","LRHY01",168,0)
 D PT^LRX
"RTN","LRHY01",169,0)
 D NOW^%DTC
"RTN","LRHY01",170,0)
 S ^TMP("LRHYDY",$J,"LR MULTIPLE ORDERS",%)=$G(PNM)_U_$G(^LR(LRDFN,.1))_U_$G(SSN)
"RTN","LRHY01",171,0)
 S LRSKIPNO=1
"RTN","LRHY01",172,0)
 QUIT
"RTN","LRHY01",173,0)
ORDERS ;
"RTN","LRHY01",174,0)
 QUIT
"RTN","LRHY01",175,0)
 ;
"RTN","LRHY01",176,0)
BINGO ;
"RTN","LRHY01",177,0)
 S LRBINGO=0
"RTN","LRHY01",178,0)
 K DIC S DIC(0)="EMQZ" K Y S LRHYCT3=1
"RTN","LRHY01",179,0)
 F  S LRBINGO=$O(^LRHY(69.86,LRHYSITE,54,"B",LRBINGO)) Q:+LRBINGO'>0  D
"RTN","LRHY01",180,0)
 .  W !!,LRHYCT3,". ",$P(^%ZIS(1,LRBINGO,0),U) W !
"RTN","LRHY01",181,0)
 .  S LRX(LRHYCT3)=LRBINGO S LRHYCT3=LRHYCT3+1
"RTN","LRHY01",182,0)
 N LRHYX W !,"Choose PPOC Bingo Board: " R LRHYX:DTIME W !
"RTN","LRHY01",183,0)
 I LRHYX[U W !,"NOTHING SELECTED " QUIT
"RTN","LRHY01",184,0)
 I LRHYX="" W !,"NOTHING SELECTED " QUIT
"RTN","LRHY01",185,0)
 I '+LRHYX W !,"CHOOSE A NUMBER " H 2 G BINGO
"RTN","LRHY01",186,0)
 Q:LRHYX[U
"RTN","LRHY01",187,0)
 I $G(LRHYX)["?" W !,"Choose  NUMBER " H 2 G BINGO
"RTN","LRHY01",188,0)
 I $D(LRX) S LRBINGO=LRX(LRHYX)
"RTN","LRHY01",189,0)
 Q:$G(LRBINGO)=""
"RTN","LRHY01",190,0)
 W !!
"RTN","LRHY01",191,0)
 W $P(^%ZIS(1,LRBINGO,0),U)
"RTN","LRHY01",192,0)
 W !
"RTN","LRHY01",193,0)
 S LRBINGO=$P(^%ZIS(1,LRBINGO,0),U)
"RTN","LRHY01",194,0)
 QUIT
"RTN","LRHY01",195,0)
LRHYBING ;
"RTN","LRHY01",196,0)
 ; Display Patient on Bingo board.
"RTN","LRHY01",197,0)
 W !,"SENDING TO BINGO BOARD ",LRBINGO H 2
"RTN","LRHY01",198,0)
 S ZTSAVE("PNM")=""
"RTN","LRHY01",199,0)
 S ZTRTN="PRIBB^LRHY01"
"RTN","LRHY01",200,0)
 S ZTDTH=$H
"RTN","LRHY01",201,0)
 S ZTDESC="PPOC BINGO PRINT"
"RTN","LRHY01",202,0)
 S ZTIO=$G(LRBINGO)
"RTN","LRHY01",203,0)
 S:$D(ZTQUEUED) ZTREQ="@" D ^%ZTLOAD
"RTN","LRHY01",204,0)
 ;
"RTN","LRHY01",205,0)
 QUIT
"RTN","LRHY01",206,0)
PRIBB ;
"RTN","LRHY01",207,0)
 W !,$G(PNM)
"RTN","LRHY01",208,0)
 QUIT
"RTN","LRHY22")
0^3^B4209641^n/a
"RTN","LRHY22",1,0)
LRHY22 ;DALOI/HOAK - HOWDY DEL A DUPLICATE TEST ;10/15/2010
"RTN","LRHY22",2,0)
 ;;5.2;LAB SERVICE;**405**;Sep 27, 1994;Build 93
"RTN","LRHY22",3,0)
 ;
"RTN","LRHY22",4,0)
EN1 S LREND=0,LRSN=+LRT(LRJ),LRTSTI=+$P(LRT(LRJ),U,2),LRTSTS=+$P(LRT(LRJ),U,3)
"RTN","LRHY22",5,0)
 N LRODT
"RTN","LRHY22",6,0)
 S LRODT=LR3DTN
"RTN","LRHY22",7,0)
 I '$D(^LRO(69,LRODT,1,LRSN,2,LRTSTI,0))#2 W !,"Does not exist ",! Q
"RTN","LRHY22",8,0)
 S LRX=^LRO(69,LRODT,1,LRSN,2,LRTSTI,0),LRAD=+$P(LRX,U,3),LRAA=+$P(LRX,U,4),LRAN=+$P(LRX,U,5),LRNOP=0,LRONE="",LRACC=0,ORIFN=$P(LRX,U,7)
"RTN","LRHY22",9,0)
 S LRSS=$P($G(^LRO(68,LRAA,0)),U,2)
"RTN","LRHY22",10,0)
 S LRTNM=$P($G(^LAB(60,LRTSTS,0)),U)
"RTN","LRHY22",11,0)
 S LRNATURE="LAB"
"RTN","LRHY22",12,0)
 I '$L($G(LRNATURE)) D DC^LROR6() I $G(LRNATURE)=-1 W !!,$C(7),"NOTHING CHANGED" Q
"RTN","LRHY22",13,0)
 S LRIDT=+$P($G(^LRO(68,LRAA,1,LRAD,1,LRAN,3)),U,5)
"RTN","LRHY22",14,0)
 I LRIDT L +^LR(LRDFN,LRSS,LRIDT):$G(DILOCKTM,3) I '$T W !?5,"Someone else is editing this entry",! S LREND=1 Q
"RTN","LRHY22",15,0)
 Q:$G(LRSS)["MI"
"RTN","LRHY22",16,0)
 D SET^LRHYDEL I LRIDT L -^LR(LRDFN,LRSS,LRIDT)
"RTN","LRHY22",17,0)
 I $G(LRORD) L -^LRO(69,"C",+LRORD)
"RTN","LRHY22",18,0)
 ;
"RTN","LRHY22",19,0)
 Q
"RTN","LRHY22",20,0)
END K %,AGE,DFN,DIC,DIE,DOB,DQ,DR,J,LRAA,LRACC,LRACN0,LRAD,LRAN,LRCL,LRHYCT,LRCOL,LRDOC,LRDPF,LRDTM,LREND,LRIDT
"RTN","LRHY22",21,0)
 K LRNOW,LRLL,LRLLOC,LRNOP,LROD0,LROD1,LROD3,LRODT,LROOS,LRORD,LROS,LROSD,LROT,LROV,LRROD
"RTN","LRHY22",22,0)
 K LRSCNXB,LRSN,LRSPEC,LRSS,LRTC,LRTP,LRTSTS,LRT,LRTT,LRURG,LRUSI,LRUSNM,LRWRD,PNM,SEX,SSN,T,X,X1,X2,X3,X4,Y,Z,LRNATURE,ORIFN
"RTN","LRHY22",23,0)
 K LRACN,LRJ,LRTSTI
"RTN","LRHY22",24,0)
 Q
"RTN","LRHY4X")
0^4^B60499659^n/a
"RTN","LRHY4X",1,0)
LRHY4X ;DALOI/HOAK - PHLEBOTOMY TAT ;4/13/1999
"RTN","LRHY4X",2,0)
 ;;5.2;LAB SERVICE;**405**;Sep 27, 1994;Build 93
"RTN","LRHY4X",3,0)
 ;
"RTN","LRHY4X",4,0)
 ;
"RTN","LRHY4X",5,0)
START ;
"RTN","LRHY4X",6,0)
 ;
"RTN","LRHY4X",7,0)
G ;
"RTN","LRHY4X",8,0)
 K ^TMP("LRHYMEDTAT",$J)
"RTN","LRHY4X",9,0)
 ;
"RTN","LRHY4X",10,0)
 K ^TMP("LRHYCOLLECTOR",$J)
"RTN","LRHY4X",11,0)
 ;
"RTN","LRHY4X",12,0)
 K ^TMP("LRHYTATDALLAS",$J)
"RTN","LRHY4X",13,0)
 K LRHYTECH1
"RTN","LRHY4X",14,0)
 K %DT
"RTN","LRHY4X",15,0)
 S %DT="AET"
"RTN","LRHY4X",16,0)
 S %DT("A")="Please enter date and time to start search: "
"RTN","LRHY4X",17,0)
 D ^%DT
"RTN","LRHY4X",18,0)
 Q:Y=-1
"RTN","LRHY4X",19,0)
 S LRSDT=Y
"RTN","LRHY4X",20,0)
 S LRODT=$P(LRSDT,".")
"RTN","LRHY4X",21,0)
 S %DT("A")="Please enter date and time to end search: "
"RTN","LRHY4X",22,0)
 D ^%DT
"RTN","LRHY4X",23,0)
 Q:Y=-1
"RTN","LRHY4X",24,0)
 S LREDT=Y
"RTN","LRHY4X",25,0)
 ;
"RTN","LRHY4X",26,0)
 D DEVICE
"RTN","LRHY4X",27,0)
 K ^TMP("LRHYMEDTAT",$J),^TMP("LRHYMEDFINAL",$J)
"RTN","LRHY4X",28,0)
 K ^TMP("LRHYCOLLECTOR",$J),^TMP("LRHYTATDALLAS",$J)
"RTN","LRHY4X",29,0)
 QUIT
"RTN","LRHY4X",30,0)
PAT ;
"RTN","LRHY4X",31,0)
 ;
"RTN","LRHY4X",32,0)
 ;
"RTN","LRHY4X",33,0)
 S LREND=0
"RTN","LRHY4X",34,0)
 S DIC="^DPT("
"RTN","LRHY4X",35,0)
 S DIC(0)="AEMQZ"
"RTN","LRHY4X",36,0)
 D ^DIC
"RTN","LRHY4X",37,0)
 S DFN=+Y
"RTN","LRHY4X",38,0)
 S LRDFN=$G(^DPT(DFN,"LR"))
"RTN","LRHY4X",39,0)
 D ^VADPT,INP^VADPT
"RTN","LRHY4X",40,0)
 ;
"RTN","LRHY4X",41,0)
 QUIT
"RTN","LRHY4X",42,0)
 ;
"RTN","LRHY4X",43,0)
LRO69 ;
"RTN","LRHY4X",44,0)
Q ;
"RTN","LRHY4X",45,0)
 U IO
"RTN","LRHY4X",46,0)
 S LREND=0
"RTN","LRHY4X",47,0)
 S LRSTAR=0
"RTN","LRHY4X",48,0)
 D HEAD
"RTN","LRHY4X",49,0)
 S LRSN=0
"RTN","LRHY4X",50,0)
 S LRSTOP=0
"RTN","LRHY4X",51,0)
 S LRDRAW1=LRODT
"RTN","LRHY4X",52,0)
 F  S LRDRAW1=$O(^LRHY(69.87,"COLT",LRDRAW1)) Q:+LRDRAW1'>0!(LRDRAW1>LREDT)!(LRSTOP)  D
"RTN","LRHY4X",53,0)
 .  S LRUID=""
"RTN","LRHY4X",54,0)
 .  F  S LRUID=$O(^LRHY(69.87,"COLT",LRDRAW1,LRUID)) Q:LRUID=""  D
"RTN","LRHY4X",55,0)
 ..  ;
"RTN","LRHY4X",56,0)
 ..  S LRUID=$G(^LRHY(69.87,LRUID,0))
"RTN","LRHY4X",57,0)
 ..  I '$O(^LRO(68,"C",LRUID,0)) QUIT
"RTN","LRHY4X",58,0)
 ..  S LRAA=$O(^LRO(68,"C",LRUID,0))
"RTN","LRHY4X",59,0)
 ..  S LRAD=$O(^LRO(68,"C",LRUID,LRAA,0))
"RTN","LRHY4X",60,0)
 ..  S LRAN=$O(^LRO(68,"C",LRUID,LRAA,LRAD,0))
"RTN","LRHY4X",61,0)
 ..  D IN
"RTN","LRHY4X",62,0)
 D DISP
"RTN","LRHY4X",63,0)
 QUIT
"RTN","LRHY4X",64,0)
IN ;
"RTN","LRHY4X",65,0)
 S LR6987=$O(^LRHY(69.87,"B",LRUID,0)) Q:'$G(LR6987)
"RTN","LRHY4X",66,0)
 D
"RTN","LRHY4X",67,0)
 .  S LREND=0
"RTN","LRHY4X",68,0)
 .  K LRARIVE
"RTN","LRHY4X",69,0)
 .  S LRSN=$P(^LRO(68,LRAA,1,LRAD,1,LRAN,0),U,5)
"RTN","LRHY4X",70,0)
 .  S LRACCTM=$G(^LRHY(69.87,LR6987,2))
"RTN","LRHY4X",71,0)
 .  S LRTKX=$G(^LRHY(69.87,LR6987,6))
"RTN","LRHY4X",72,0)
 .  S LRARIVE=$G(^LRHY(69.87,LR6987,8))
"RTN","LRHY4X",73,0)
 .  K LRNCOL
"RTN","LRHY4X",74,0)
 .  S LR3D=$P(LRDRAW1,".",2)
"RTN","LRHY4X",75,0)
 .  I $L(LR3D)'>3 S LR3D=LR3D_"0"
"RTN","LRHY4X",76,0)
 .  S LR3D=$E(LR3D,1,2)*60+$E(LR3D,3,4)
"RTN","LRHY4X",77,0)
 .  S LR3T=$P(LRACCTM,".",2)
"RTN","LRHY4X",78,0)
 .  I $L(LR3T)'>3 S LR3T=LR3T_"0"
"RTN","LRHY4X",79,0)
 .  S LR3T=$E(LR3T,1,2)*60+$E(LR3T,3,4)
"RTN","LRHY4X",80,0)
 .  S LRTAT=(LR3D-LR3T)
"RTN","LRHY4X",81,0)
 .  S LRDRAW=$E($P(LRDRAW1,".",2),1,2)_":"_$E($P(LRDRAW1,".",2),3,4)
"RTN","LRHY4X",82,0)
 .  S LRARIVE=$E($P(LRACCTM,".",2),1,2)_":"_$E($P(LRACCTM,".",2),3,4)
"RTN","LRHY4X",83,0)
 .  ;
"RTN","LRHY4X",84,0)
 .  K LRDFN
"RTN","LRHY4X",85,0)
 .  S LRDFN=+^LRO(68,LRAA,1,LRAD,1,LRAN,0)
"RTN","LRHY4X",86,0)
 .  K LRDPF D PT^LRX
"RTN","LRHY4X",87,0)
 .  S LRSSN=$P(SSN,"-",3)
"RTN","LRHY4X",88,0)
 .  S LRAC1=$E($P(^LRO(68,LRAA,0),U),1,2)_" "_$E(LRAD,4,7)_" "_LRAN
"RTN","LRHY4X",89,0)
 .  S LRAANAME=$P(^LRO(68,LRAA,0),U)
"RTN","LRHY4X",90,0)
 .  ; check specimen not urine
"RTN","LRHY4X",91,0)
 .  S LRLLOC=$P(^LRO(68,LRAA,1,LRAD,1,LRAN,0),U,7)
"RTN","LRHY4X",92,0)
 .  S LRSC0=$P(^LRO(68,LRAA,1,LRAD,1,LRAN,0),U,13)
"RTN","LRHY4X",93,0)
 .  I $P($G(LRNCOL),U,4) S ^TMP("LRHYCOLLECTOR",$J,LRSN,$P(LRNCOL,U,4))=""
"RTN","LRHY4X",94,0)
 .  K LRHYTECH
"RTN","LRHY4X",95,0)
 .  S LRHYTECH=$G(^LRHY(69.87,LR6987,12))
"RTN","LRHY4X",96,0)
 .  ;
"RTN","LRHY4X",97,0)
 .  ;
"RTN","LRHY4X",98,0)
 .  S LRHYTECH=$G(LRTKX)
"RTN","LRHY4X",99,0)
 .  I LRHYTECH S ^TMP("LRHYCOLLECTOR",$J,LRSN,LRHYTECH)=""
"RTN","LRHY4X",100,0)
 .  ;
"RTN","LRHY4X",101,0)
 .  S LRSTAR=0
"RTN","LRHY4X",102,0)
 .  ;
"RTN","LRHY4X",103,0)
 .  S ^TMP("LRHYTATDALLAS",$J,$E(LRDRAW,1,2),LRSN)=LRDRAW_U_PNM_U_LRSSN_U
"RTN","LRHY4X",104,0)
 .  S ^TMP("LRHYTATDALLAS",$J,$E(LRDRAW,1,2),LRSN)=LRDRAW_U_PNM_U_LRSSN_U_LRARIVE_U_LRTAT_U_LRAC1_U_$G(LRSTAR)_U_$G(LRLLOC)
"RTN","LRHY4X",105,0)
 ;
"RTN","LRHY4X",106,0)
 QUIT
"RTN","LRHY4X",107,0)
 ;
"RTN","LRHY4X",108,0)
DISP ;
"RTN","LRHY4X",109,0)
 ;
"RTN","LRHY4X",110,0)
 ;
"RTN","LRHY4X",111,0)
 S LRTOTAL=0
"RTN","LRHY4X",112,0)
 S LRHYCT=0
"RTN","LRHY4X",113,0)
 U IO
"RTN","LRHY4X",114,0)
 S LRD=0
"RTN","LRHY4X",115,0)
 S LR7MORE=0
"RTN","LRHY4X",116,0)
 S LR7LESS=0
"RTN","LRHY4X",117,0)
 S LR700=0
"RTN","LRHY4X",118,0)
 ;
"RTN","LRHY4X",119,0)
 F  S LRD=$O(^TMP("LRHYTATDALLAS",$J,LRD)) Q:+LRD'>0  D
"RTN","LRHY4X",120,0)
 .  S LRSN=0
"RTN","LRHY4X",121,0)
 .  F  S LRSN=$O(^TMP("LRHYTATDALLAS",$J,LRD,LRSN)) Q:+LRSN'>0  S LRN=^(LRSN) D
"RTN","LRHY4X",122,0)
 ..  S LRDRAW=+LRN
"RTN","LRHY4X",123,0)
 ..  S LRDRAW=$P(LRN,U)
"RTN","LRHY4X",124,0)
 ..  S PNM=$P(LRN,U,2)
"RTN","LRHY4X",125,0)
 ..  S LRSSN=$P(LRN,U,3)
"RTN","LRHY4X",126,0)
 ..  S LRARIVE=$P(LRN,U,4)
"RTN","LRHY4X",127,0)
 ..  S LRTAT=$P(LRN,U,5)
"RTN","LRHY4X",128,0)
 ..  I LRTAT>7 S LR7MORE=LR7MORE+1
"RTN","LRHY4X",129,0)
 ..  I LRTAT<7 S LR7LESS=LR7LESS+1
"RTN","LRHY4X",130,0)
 ..  I LRTAT=7 S LR700=LR700+1
"RTN","LRHY4X",131,0)
 ..  S LRAC1=$P(LRN,U,6)
"RTN","LRHY4X",132,0)
 ..  D CHK Q:LRSTOP
"RTN","LRHY4X",133,0)
 ..  W !,+$E(LRD,1,2),?5,$E(PNM,1,15)," ",LRSSN,?27,"BLD",?32,LRARIVE,?40,LRDRAW,?47,LRTAT
"RTN","LRHY4X",134,0)
 ..  W ?52,$O(^TMP("LRHYCOLLECTOR",$J,LRSN,0))
"RTN","LRHY4X",135,0)
 ..  I $P(LRN,U,7)=1 W "*"
"RTN","LRHY4X",136,0)
 ..  W ?59,LRAC1 ;accession
"RTN","LRHY4X",137,0)
 ..  W ?72,$E($P(LRN,U,8),1,8) ;clinic
"RTN","LRHY4X",138,0)
 ..  S LRHYCT=LRHYCT+1 S LRTOTAL=LRTOTAL+LRTAT
"RTN","LRHY4X",139,0)
 ..  S ^TMP("LRHYMEDTAT",$J,LRSN)=LRTAT
"RTN","LRHY4X",140,0)
 Q:'LRHYCT
"RTN","LRHY4X",141,0)
 W !!,?10,"Mean TAT: "
"RTN","LRHY4X",142,0)
 W ?35,$P(LRTOTAL/LRHYCT,".")_"."_$E($P(LRTOTAL/LRHYCT,".",2),1,1),?41
"RTN","LRHY4X",143,0)
 D MEDIAN W ?41," Minutes"
"RTN","LRHY4X",144,0)
 W !,?10,"Total Time: ",?35,LRTOTAL,?41," Minutes"
"RTN","LRHY4X",145,0)
 W !,?10,"Total Patients Drawn: ",?35,LRHYCT,!
"RTN","LRHY4X",146,0)
 W !,?15,"TAT > 7 minutes: ",LR7MORE
"RTN","LRHY4X",147,0)
 W !,?15,"TAT < 7 minutes: ",LR7LESS
"RTN","LRHY4X",148,0)
 W !,?15,"TAT = 7 minutes: ",LR700
"RTN","LRHY4X",149,0)
 I LRHYCT=0 S LRHYCT=1
"RTN","LRHY4X",150,0)
 ;
"RTN","LRHY4X",151,0)
 ;
"RTN","LRHY4X",152,0)
 W !,?5,"Collectors: "
"RTN","LRHY4X",153,0)
 S LRN5=0
"RTN","LRHY4X",154,0)
 F  S LRN5=$O(^TMP("LRHYCOLLECTOR",$J,LRN5)) Q:+LRN5'>0  D
"RTN","LRHY4X",155,0)
 .  S LRHYTECH=0
"RTN","LRHY4X",156,0)
 .  F  S LRHYTECH=$O(^TMP("LRHYCOLLECTOR",$J,LRN5,LRHYTECH)) Q:+LRHYTECH'>0  D
"RTN","LRHY4X",157,0)
 ..  S LRHYTECH1(LRHYTECH,LRN5)=""
"RTN","LRHY4X",158,0)
 S LRHYTECH=0
"RTN","LRHY4X",159,0)
 F  S LRHYTECH=$O(LRHYTECH1(LRHYTECH)) Q:+LRHYTECH'>0  D
"RTN","LRHY4X",160,0)
 .  S LRHYCTC=0 S LRT0=0
"RTN","LRHY4X",161,0)
 .  F  S LRT0=$O(LRHYTECH1(LRHYTECH,LRT0)) Q:+LRT0'>0  D
"RTN","LRHY4X",162,0)
 ..  S LRHYCTC=LRHYCTC+1
"RTN","LRHY4X",163,0)
 .  I $D(^VA(200,LRHYTECH)) W !,?10,$P(^VA(200,LRHYTECH,0),U)
"RTN","LRHY4X",164,0)
 .  W ?40,LRHYCTC,?45," Drawn"
"RTN","LRHY4X",165,0)
 K DIR I IOST["C-" S DIR(0)="E" D ^DIR
"RTN","LRHY4X",166,0)
 D ^%ZISC
"RTN","LRHY4X",167,0)
 QUIT
"RTN","LRHY4X",168,0)
MEDIAN ;
"RTN","LRHY4X",169,0)
 N LR334 S LR334=0
"RTN","LRHY4X",170,0)
 F  S LR334=$O(^TMP("LRHYMEDTAT",$J,LR334)) Q:+LR334'>0  I +$G(^TMP("LRHYMEDTAT",$J,LR334))'>0 S ^TMP("LRHYMEDTAT",$J,LR334)=1
"RTN","LRHY4X",171,0)
 S LRSTUCK=0
"RTN","LRHY4X",172,0)
 K ^TMP("LRHYMEDFINAL",$J)
"RTN","LRHY4X",173,0)
 K LRTATN
"RTN","LRHY4X",174,0)
 S LRHYCT3=1
"RTN","LRHY4X",175,0)
BAK S LRX=0 S LRKIL=0 S LRNONONO=0 S LRM3=0
"RTN","LRHY4X",176,0)
 I $D(^TMP("LRHYMEDFINAL",$J)) D
"RTN","LRHY4X",177,0)
 .  I '$D(^TMP("LRHYMEDFINAL",$J,LRHYCT3)) S LRSTUCK=LRSTUCK+1
"RTN","LRHY4X",178,0)
STUCK I $G(LRSTUCK)>2 K ^TMP("LRHYMEDTAT",$J,LRDUP) S LRSTUCK=0
"RTN","LRHY4X",179,0)
 I '$D(^TMP("LRHYMEDTAT",$J)) G DONE QUIT
"RTN","LRHY4X",180,0)
 S LRHYCT3=LRHYCT3+1
"RTN","LRHY4X",181,0)
 S LRM1=$O(^TMP("LRHYMEDTAT",$J,LRX)) S (LRX,LRDUP)=LRM1
"RTN","LRHY4X",182,0)
 S LRM1=$G(^TMP("LRHYMEDTAT",$J,LRM1))
"RTN","LRHY4X",183,0)
TIC F  S LRX=$O(^TMP("LRHYMEDTAT",$J,LRX)) Q:+LRX'>0  S LRM2=^(LRX) D
"RTN","LRHY4X",184,0)
 .  S LRKIL=LRX
"RTN","LRHY4X",185,0)
 .  I LRM2=LRM1 S LRKIL=LRX S LRNOT=0 D
"RTN","LRHY4X",186,0)
 ..  F LRY=1:1:LRHYCT3 Q:'$D(^TMP("LRHYMEDFINAL",$J,LRY))  D
"RTN","LRHY4X",187,0)
 ...  I LRM1>+$O(^TMP("LRHYMEDFINAL",$J,LRY,0)) S LRNOT=1
"RTN","LRHY4X",188,0)
 K ^TMP("LRHYMEDTAT",$J,LRDUP) S LRKIL=LRX
"RTN","LRHY4X",189,0)
 I $G(LRNOT)=1 S LRX=LRX+.05 S LRNOT=0 G TIC
"RTN","LRHY4X",190,0)
 I LRKIL K ^TMP("LRHYMEDTAT",$J,LRKIL)
"RTN","LRHY4X",191,0)
 I +$O(^TMP("LRHYMEDTAT",$J,0)) G BAK
"RTN","LRHY4X",192,0)
 S LRHYCT3=0
"RTN","LRHY4X",193,0)
 S LRX=0
"RTN","LRHY4X",194,0)
 F  S LRX=$O(^TMP("LRHYMEDFINAL",$J,LRX)) Q:+LRX'>0  D
"RTN","LRHY4X",195,0)
 .  S LRHYCT3=LRHYCT3+1
"RTN","LRHY4X",196,0)
 .  S LRYTAT=$O(^TMP("LRHYMEDFINAL",$J,LRX,0))
"RTN","LRHY4X",197,0)
 .  S LRTATN(LRHYCT3)=LRYTAT
"RTN","LRHY4X",198,0)
 S LRX=LRHYCT3/2
"RTN","LRHY4X",199,0)
 Q:'LRX
"RTN","LRHY4X",200,0)
 I LRX[.5 S LRX1=$P(LRX,".") Q:'LRX1  S LRX2=LRX1+1 D
"RTN","LRHY4X",201,0)
 .  S LRX3=(LRTATN(LRX1)+LRTATN(LRX2))/2
"RTN","LRHY4X",202,0)
 E  S LRX3=LRTATN(LRX)
"RTN","LRHY4X",203,0)
 W !,?10,"Median TAT:",?35,LRX3
"RTN","LRHY4X",204,0)
 ;
"RTN","LRHY4X",205,0)
 QUIT
"RTN","LRHY4X",206,0)
HEAD ;
"RTN","LRHY4X",207,0)
 S LRSTOP=0
"RTN","LRHY4X",208,0)
 W @IOF
"RTN","LRHY4X",209,0)
 W "Date:",$$Y2K^LRX(DT)," ",$$CJ^XLFSTR("PATIENT WAIT TIME",IOM)
"RTN","LRHY4X",210,0)
 W !,"Time",?5,"Patient Name",?27,"Type",?32,"Arrived"
"RTN","LRHY4X",211,0)
 W ?40,"Drawn",?47,"TAT",?52,"TECH",?60,"ACCN"
"RTN","LRHY4X",212,0)
 W ?72,"Clinic"
"RTN","LRHY4X",213,0)
 QUIT
"RTN","LRHY4X",214,0)
CHK ;
"RTN","LRHY4X",215,0)
 Q:LRSTOP
"RTN","LRHY4X",216,0)
 S LRLINE=(IOSL-$Y)
"RTN","LRHY4X",217,0)
 I $E(IOST,1,2)["P-" D  QUIT
"RTN","LRHY4X",218,0)
 .  I LRLINE<7 D HEAD QUIT
"RTN","LRHY4X",219,0)
 ;
"RTN","LRHY4X",220,0)
 I LRLINE<2 D
"RTN","LRHY4X",221,0)
 .  Q:$E(IOST,1,2)'["C-"
"RTN","LRHY4X",222,0)
 .  K DIR S DIR(0)="E" D ^DIR
"RTN","LRHY4X",223,0)
 .  I $D(DUOUT)!($D(DIRUT)) S LRSTOP=1 Q
"RTN","LRHY4X",224,0)
 .  D HEAD
"RTN","LRHY4X",225,0)
 QUIT
"RTN","LRHY4X",226,0)
DONE ;
"RTN","LRHY4X",227,0)
 S LRHYCT3=0
"RTN","LRHY4X",228,0)
 S LRX=0
"RTN","LRHY4X",229,0)
 F  S LRX=$O(^TMP("LRHYMEDFINAL",$J,LRX)) Q:+LRX'>0  D
"RTN","LRHY4X",230,0)
 .  S LRHYCT3=LRHYCT3+1
"RTN","LRHY4X",231,0)
 .  S LRYTAT=$O(^TMP("LRHYMEDFINAL",$J,LRX,0))
"RTN","LRHY4X",232,0)
 .  S LRTATN(LRHYCT3)=LRYTAT
"RTN","LRHY4X",233,0)
 S LRX=LRHYCT3/2
"RTN","LRHY4X",234,0)
 I LRX[.5 S LRX1=$P(LRX,".") Q:'LRX1  S LRX2=LRX1+1 D
"RTN","LRHY4X",235,0)
 .  S LRX3=(LRTATN(LRX1)+LRTATN(LRX2))/2
"RTN","LRHY4X",236,0)
 E  S LRX3=LRTATN(LRX)
"RTN","LRHY4X",237,0)
 W !,?10,"Median TAT:",?35,LRX3
"RTN","LRHY4X",238,0)
 QUIT
"RTN","LRHY4X",239,0)
DEVICE ;
"RTN","LRHY4X",240,0)
 S ZTRTN="Q^LRHY4X"
"RTN","LRHY4X",241,0)
 ;
"RTN","LRHY4X",242,0)
 D IO^LRWU
"RTN","LRHY4X",243,0)
 ;
"RTN","LRHY4X",244,0)
 QUIT
"RTN","LRHY4X",245,0)
 QUIT
"RTN","LRHYA")
0^5^B29476770^n/a
"RTN","LRHYA",1,0)
LRHYA ;DALOI/HOAK - HOWDY UTILITY-A ;9/16/2000
"RTN","LRHYA",2,0)
 ;;5.2;LAB SERVICE;**405**;Sep 27, 1994;Build 93
"RTN","LRHYA",3,0)
 ;
"RTN","LRHYA",4,0)
 ;
"RTN","LRHYA",5,0)
OLT ; This block looks in the Howdy site file for tests that will print
"RTN","LRHYA",6,0)
 ; order labels WILL NOT accession the test.
"RTN","LRHYA",7,0)
 ; order label tests
"RTN","LRHYA",8,0)
 K LRNODONE
"RTN","LRHYA",9,0)
 S LRHYHOK=0
"RTN","LRHYA",10,0)
 S LRTSTS=0
"RTN","LRHYA",11,0)
 S LRPLICK=1
"RTN","LRHYA",12,0)
 F  S LRTSTS=$O(^LRO(69,LR3DTN,1,LR3SN,2,"B",LRTSTS)) Q:+LRTSTS'>0  D
"RTN","LRHYA",13,0)
 .  S ^TMP("LRHYDY",$J,LRDFN,LR3DTN,LRTSTS)=""
"RTN","LRHYA",14,0)
 .  K LRNPZZX
"RTN","LRHYA",15,0)
 .  S LRIENZZ=$O(^LRO(69,LR3DTN,1,LR3SN,2,"B",LRTSTS,0))
"RTN","LRHYA",16,0)
 .  S LRORD=^LRO(69,LR3DTN,1,LR3SN,.1)
"RTN","LRHYA",17,0)
 .  I $G(^LRO(69,LR3DTN,1,LR3SN,2,LRIENZZ,1.1,1,0))'="" S LRNODUP=1 S LRNOTST(LRTSTS)="" S LRNPZZX(LRORD,LR3SN,LRTSTS)="" QUIT
"RTN","LRHYA",18,0)
 .  I $D(^LRHY(69.86,LRHYSITE,25,"B",LRTSTS)) S LRHYHOK=1 D
"RTN","LRHYA",19,0)
 ..  S LROLT1(LR3DTN,LR3SN)=LRTSTS
"RTN","LRHYA",20,0)
 ..  S LRNOTST(LRTSTS)=""
"RTN","LRHYA",21,0)
 ..  D ^LRHYBLD ;print order labels
"RTN","LRHYA",22,0)
 D DONE
"RTN","LRHYA",23,0)
 QUIT
"RTN","LRHYA",24,0)
 ;
"RTN","LRHYA",25,0)
LTE ; This block looks in the Howdy site file for those test to exclude 
"RTN","LRHYA",26,0)
 ; from accessioning by Howdy
"RTN","LRHYA",27,0)
 ;
"RTN","LRHYA",28,0)
 Q:'$G(LRCOL99)
"RTN","LRHYA",29,0)
 K LRNODONE
"RTN","LRHYA",30,0)
 K LRCCOM
"RTN","LRHYA",31,0)
 ;  exclude lab test
"RTN","LRHYA",32,0)
 ;
"RTN","LRHYA",33,0)
 S LRIENZZ=0
"RTN","LRHYA",34,0)
 S LRHYHOK=0
"RTN","LRHYA",35,0)
 S LRTSTS=0
"RTN","LRHYA",36,0)
 ;
"RTN","LRHYA",37,0)
 S LRHYTOK=0
"RTN","LRHYA",38,0)
 K LRNPZZX
"RTN","LRHYA",39,0)
 K LRNODUP
"RTN","LRHYA",40,0)
 F  S LRTSTS=$O(^LRO(69,LR3DTN,1,LR3SN,2,"B",LRTSTS)) Q:+LRTSTS'>0  S LRHYHOK=0 D
"RTN","LRHYA",41,0)
 .  ;
"RTN","LRHYA",42,0)
 .  S LRORD=^LRO(69,LR3DTN,1,LR3SN,.1)
"RTN","LRHYA",43,0)
 .  I $D(^LRHY(69.86,LRHYSITE,2,"B",LRTSTS)) S LRHYHOK=1 S LRHYT654=LRTSTS S LRNOTST(LRTSTS)="" QUIT
"RTN","LRHYA",44,0)
 .  K LRNPZZX
"RTN","LRHYA",45,0)
 .  K LRCCOM
"RTN","LRHYA",46,0)
 .  S LRCOL99=$P(^LRO(69,LR3DTN,1,LR3SN,0),U,3)
"RTN","LRHYA",47,0)
 .  ;
"RTN","LRHYA",48,0)
 .  K LRNODONE
"RTN","LRHYA",49,0)
 .  S LRIENZZ=$O(^LRO(69,LR3DTN,1,LR3SN,2,"B",LRTSTS,0))
"RTN","LRHYA",50,0)
 .  I $G(^LRO(69,LR3DTN,1,LR3SN,2,LRIENZZ,0))["CA" S LRNODONE=1,LRHYHOK=1 QUIT
"RTN","LRHYA",51,0)
 .  I $G(^LRO(69,LR3DTN,1,LR3SN,2,LRIENZZ,0))["CA" QUIT
"RTN","LRHYA",52,0)
 .  I $G(^LRO(69,LR3DTN,1,LR3SN,2,LRIENZZ,0))'["CA" S LRHYTOK=LRTSTS
"RTN","LRHYA",53,0)
 .  I $G(^LRO(69,LR3DTN,1,LR3SN,2,LRIENZZ,1.1,1,0))'="" S LRNODUP=1 QUIT
"RTN","LRHYA",54,0)
 .  I $G(^LRO(69,LR3DTN,1,LR3SN,2,LRIENZZ,0))["CA" QUIT
"RTN","LRHYA",55,0)
 .  ;
"RTN","LRHYA",56,0)
 .  I $D(^LRHY(69.86,LRHYSITE,2,"B",LRTSTS)) S LRHYHOK=1 QUIT
"RTN","LRHYA",57,0)
 .  I LR3DTN=DT I $D(^TMP("LRHYDY",$J,"DUPTEST",LRTSTS,LRCOL99)) D
"RTN","LRHYA",58,0)
 ..  ; duplicate auto np function
"RTN","LRHYA",59,0)
 ..  ;
"RTN","LRHYA",60,0)
 ..  Q:$D(^LRHY(69.86,LRHYSITE,2,"B",LRTSTS))  ;no excepted test
"RTN","LRHYA",61,0)
 ..  Q:$D(^LRHY(69.86,LRHYSITE,25,1,"B",LRTSTS))  ;no order label tests
"RTN","LRHYA",62,0)
 ..  Q:$D(^LRHY(69.86,LRHYSITE,4,"B",LRCOL99))
"RTN","LRHYA",63,0)
 ..  ;
"RTN","LRHYA",64,0)
 ..  S LRIENZZ=$O(^LRO(69,LR3DTN,1,LR3SN,2,"B",LRTSTS,0))
"RTN","LRHYA",65,0)
 ..  K ^TMP("LRHYDY",$J,"KILL",LR3DTN,LR3SN)
"RTN","LRHYA",66,0)
 ..  K LRNPZZX
"RTN","LRHYA",67,0)
 ..  I $G(^LRO(69,LR3DTN,1,LR3SN,2,LRIENZZ,1.1,1,0))'="" S LRHYHOK=1 QUIT
"RTN","LRHYA",68,0)
 ..  I $G(^LRO(69,LR3DTN,1,LR3SN,2,LRIENZZ,1.1,1,0))'="" S LRNPZZX(LRORD,LR3SN,LRTSTS)="" S LRNODUP=1 S LRHYHOK=+LRTSTS QUIT
"RTN","LRHYA",69,0)
 ..  ; a future enhancement may be used to cancel a test
"RTN","LRHYA",70,0)
 ..  S LRT(LRTSTS)=LR3SN_U_LRIENZZ_U_LRTSTS S LRJ=LRTSTS
"RTN","LRHYA",71,0)
 ..  ;
"RTN","LRHYA",72,0)
 ..  K LRCCOMX,LRCCOM0,LRCCOM1
"RTN","LRHYA",73,0)
 ..  I $G(^LRHY(69.86,LRHYSITE,52))="" S LRNODUP=1
"RTN","LRHYA",74,0)
 ..  I $G(^LRHY(69.86,LRHYSITE,52))="N" S LRNODUP=1
"RTN","LRHYA",75,0)
 ..  Q:$G(LRNODUP)  S LRHYHOK=1 K LRCCOM S ZTRTN="FX2^LRHYDEL",ZTSAVE("L*")="",ZTDTH=$H,ZTIO="NULL" S:$D(ZTQUEUED) ZTREQ="@" D ^%ZTLOAD
"RTN","LRHYA",76,0)
 .  E  D
"RTN","LRHYA",77,0)
 ..  Q:$D(^LRO(69,LR3DTN,1,LR3SN,2,LRIENZZ,1.1,1,0))
"RTN","LRHYA",78,0)
 ..  Q:$D(^LRO(69,LR3DTN,1,LR3SN,2,LRIENZZ,1.1,1,0))
"RTN","LRHYA",79,0)
 ..  Q:$D(^LRHY(69.86,LRHYSITE,2,"B",LRTSTS))  ;no excepted test
"RTN","LRHYA",80,0)
 ..  Q:$D(^LRHY(69.86,LRHYSITE,25,1,"B",LRTSTS))  ;no order label tests
"RTN","LRHYA",81,0)
 ..  Q:$D(^LRHY(69.86,LRHYSITE,4,"B",LRCOL99))
"RTN","LRHYA",82,0)
 ..  Q:$D(^LRO(69,LR3DTN,1,LR3SN,2,LRIENZZ,1.1,1,0))
"RTN","LRHYA",83,0)
 ..  K LRNPZZX
"RTN","LRHYA",84,0)
 ..  I $G(^LRO(69,LR3DTN,1,LR3SN,2,LRIENZZ,1.1,1,0))'="" S LRNPZZX(LRORD,LR3SN,LRTSTS)="" S LRNODUP=1 S LRHYHOK=+LRTSTS QUIT
"RTN","LRHYA",85,0)
 ..  ;
"RTN","LRHYA",86,0)
 ..  I LR3DTN=DT S ^TMP("LRHYDY",$J,"DUPTEST",LRTSTS,LRCOL99)=""
"RTN","LRHYA",87,0)
 ;
"RTN","LRHYA",88,0)
 D DONE
"RTN","LRHYA",89,0)
 QUIT
"RTN","LRHYA",90,0)
 ;
"RTN","LRHYA",91,0)
CSE ; This block checks for collection sample exclusion
"RTN","LRHYA",92,0)
 S LRHYHOK=0
"RTN","LRHYA",93,0)
 S LRHYSPC7=$P($G(^LAB(62,LRCOL99,0)),U,2)
"RTN","LRHYA",94,0)
 I $G(LRHYSPC7) I $D(^LRHY(69.86,LRHYSITE,6,"B",LRHYSPC7)) S LRHYHOK=1
"RTN","LRHYA",95,0)
 K LRNODONE
"RTN","LRHYA",96,0)
 I $D(^LRHY(69.86,LRHYSITE,4,"B",LRCOL99)) S LRHYHOK=1
"RTN","LRHYA",97,0)
 I LRHYHOK=1 S LRHYCS33(LR3DTN,LR3SN)=LRCOL99
"RTN","LRHYA",98,0)
 QUIT
"RTN","LRHYA",99,0)
 ;
"RTN","LRHYA",100,0)
CSTATUS ; This block checks for collection types to exclude
"RTN","LRHYA",101,0)
 S LRORD=^LRO(69,LR3DTN,1,LR3SN,.1)
"RTN","LRHYA",102,0)
 K LRNODONE
"RTN","LRHYA",103,0)
 K LRWCZZZ
"RTN","LRHYA",104,0)
 S LRHYHOK=0
"RTN","LRHYA",105,0)
 I $D(^LRHY(69.86,LRHYSITE,8,"B",LRCSTAT)) S LRHYHOK=1 S LRWCZZZ=1
"RTN","LRHYA",106,0)
 I LRHYHOK=1 S ^TMP("LRHYDY",$J,"STATUS",LRORD)=""
"RTN","LRHYA",107,0)
 D DONE
"RTN","LRHYA",108,0)
 QUIT
"RTN","LRHYA",109,0)
 ;
"RTN","LRHYA",110,0)
EXLOC ; This block checks for Hospital locations to exclude
"RTN","LRHYA",111,0)
 I $D(^LRHY(69.86,LRHYSITE,16,"B",LRLLOC66)) S LRHYHOK=1 D DONE S ^TMP("LRHYDY",$J,"EXLOC",LRORD,LRLLOC66,LR3SN)=""
"RTN","LRHYA",112,0)
 QUIT
"RTN","LRHYA",113,0)
DONE ;
"RTN","LRHYA",114,0)
 Q:$D(LROLT1)
"RTN","LRHYA",115,0)
 Q:$G(LRHYT654)
"RTN","LRHYA",116,0)
 I $G(LRHYTOK) S LRHYHOK=0
"RTN","LRHYA",117,0)
 Q:$G(LRNODONE)
"RTN","LRHYA",118,0)
 I LRHYHOK=1 S ^TMP("LRHYDY",$J,"KILL",LR3DTN,LR3SN,1)=""
"RTN","LRHYA",119,0)
 I LRHYHOK>1 S ^TMP("LRHYDY",$J,"KILL",LR3DTN,LR3SN,LRHYHOK)=""
"RTN","LRHYA",120,0)
 QUIT
"RTN","LRHYA",121,0)
URG ;
"RTN","LRHYA",122,0)
 S LRHYHOK=0
"RTN","LRHYA",123,0)
 S LRTSTS=0
"RTN","LRHYA",124,0)
 F  S LRTSTS=$O(^LRO(69,LR3DTN,1,LR3SN,2,"B",LRTSTS)) Q:+LRTSTS'>0!(LRHYHOK)  D URGP
"RTN","LRHYA",125,0)
 QUIT
"RTN","LRHYA",126,0)
 D DONE
"RTN","LRHYA",127,0)
 QUIT
"RTN","LRHYA",128,0)
URGP ;
"RTN","LRHYA",129,0)
 S LR3ZTST=0
"RTN","LRHYA",130,0)
 S LR3ZTST=$O(^LRO(69,LR3DTN,1,LR3SN,2,"B",LRTSTS,LR3ZTST)) Q:+LR3ZTST'>0!(LRHYHOK)  D URG1  Q:LRHYHOK
"RTN","LRHYA",131,0)
 QUIT
"RTN","LRHYA",132,0)
URG1 ;
"RTN","LRHYA",133,0)
 S LRURGZ19=$P(^LRO(69,LR3DTN,1,LR3SN,2,LR3ZTST,0),U,2)
"RTN","LRHYA",134,0)
 I $D(^LRHY(69.86,LRHYSITE,30,"B",LRURGZ19)) S LRHYHOK=1 S LRHYURG3(LR3DTN,LR3SN)=LR3ZTST
"RTN","LRHYA",135,0)
 I LRHYHOK=1 S ^TMP("LRHYDY",$J,"KILL",LR3DTN,LR3SN,1)=""
"RTN","LRHYA",136,0)
 S LRORD=^LRO(69,LR3DTN,1,LR3SN,.1)
"RTN","LRHYA",137,0)
 I LRHYHOK=1 S ^TMP("LRHYDY",$J,"URG",LRORD)=""
"RTN","LRHYA",138,0)
 QUIT
"RTN","LRHYAFT")
0^6^B93475288^n/a
"RTN","LRHYAFT",1,0)
LRHYAFT ;DALOI/HOAK - HOWDY MAIN DRIVER WITH PPOC ADDON ;08/28/2005  ;12/13/10 11:19am
"RTN","LRHYAFT",2,0)
 ;;5.2;LAB SERVICE;**405**;Sep 27, 1994;Build 93
"RTN","LRHYAFT",3,0)
 ;
"RTN","LRHYAFT",4,0)
 ; TAKEN FROM LRHY0
"RTN","LRHYAFT",5,0)
PICK ;
"RTN","LRHYAFT",6,0)
 ;  pick the site from Howdy Site
"RTN","LRHYAFT",7,0)
 S LREND=0
"RTN","LRHYAFT",8,0)
 S DIC(0)="AEMQZ"
"RTN","LRHYAFT",9,0)
 S DIC=69.86
"RTN","LRHYAFT",10,0)
 D ^DIC
"RTN","LRHYAFT",11,0)
 I Y=-1 S LREND=1 QUIT
"RTN","LRHYAFT",12,0)
 S LRHYSITE=+Y
"RTN","LRHYAFT",13,0)
 K DIC
"RTN","LRHYAFT",14,0)
 ;
"RTN","LRHYAFT",15,0)
 ;
"RTN","LRHYAFT",16,0)
 ; Pick a printer
"RTN","LRHYAFT",17,0)
 I LRHYSITE=$O(^LRHY(69.86,"B","ALTERNATIVE",0)) ;QUIT
"RTN","LRHYAFT",18,0)
 S LRDEV=0
"RTN","LRHYAFT",19,0)
 K DIC
"RTN","LRHYAFT",20,0)
 S DIC(0)="EMQZ" K Y S LRHYCT2=1
"RTN","LRHYAFT",21,0)
 F  S LRDEV=$O(^LRHY(69.86,LRHYSITE,10,"B",LRDEV)) Q:+LRDEV'>0  D
"RTN","LRHYAFT",22,0)
 .  W !,LRHYCT2,". ",$P(^%ZIS(1,LRDEV,0),U)
"RTN","LRHYAFT",23,0)
 .  S LRX(LRHYCT2)=LRDEV S LRHYCT2=LRHYCT2+1
"RTN","LRHYAFT",24,0)
CHOOO W !,"Choose a label printer: " R X:DTIME W !
"RTN","LRHYAFT",25,0)
 I U[X S LREND=1 QUIT
"RTN","LRHYAFT",26,0)
 I 'X I $G(X)'="" W !,"enter the number please" G CHOOO
"RTN","LRHYAFT",27,0)
 S LRDEV=LRX(X)
"RTN","LRHYAFT",28,0)
 W ?11,$P(^%ZIS(1,LRDEV,0),U) H 2
"RTN","LRHYAFT",29,0)
 K DIC
"RTN","LRHYAFT",30,0)
 K LRHYCT2
"RTN","LRHYAFT",31,0)
 ;
"RTN","LRHYAFT",32,0)
 QUIT
"RTN","LRHYAFT",33,0)
 ;
"RTN","LRHYAFT",34,0)
VET ; Primary API for Howdy!  Called by [LRHY PATIENT CARD SCAN (PPOC)] option.
"RTN","LRHYAFT",35,0)
 K XX,LRAAX5,LRADX6,LRAN6,LRINFW,LRPREF,LRTOP,LR3UIDM,LRXL,ZTSAVE,ZTIO,ZTDTH,ZTDESC,ZTRTN
"RTN","LRHYAFT",36,0)
 K LR3CNT S LR3CNT=0
"RTN","LRHYAFT",37,0)
 S LR3CNT=1
"RTN","LRHYAFT",38,0)
 N LRDFN,PNM,LRSN,SSN,LRIDT,LRAA,LRAN,LRAD
"RTN","LRHYAFT",39,0)
 D KILL^%ZISS
"RTN","LRHYAFT",40,0)
 K LRSCAN
"RTN","LRHYAFT",41,0)
 K LRNOW,LRXCNT
"RTN","LRHYAFT",42,0)
 N LRNPZZX,LRNODUP,LRLLOC,LRTSTZ99,LRACC,LRCDT,LRDPF,LRI
"RTN","LRHYAFT",43,0)
 N LRORD3,LRHYFIX,LRPLICK,LRPR,LRPRAC,LRQUIET,LRRB,LRSAMP,LRSND
"RTN","LRHYAFT",44,0)
 N LRSS,LRST,LRSTATUS,LRSUB1,LRTIC,LRTIM,LRTN,LRTREA,LRTS,LRTSORU
"RTN","LRHYAFT",45,0)
 N LRTST6,LRTT,LRUN,LRWLO,LRWLC,LRWRD,LRXYZ,LR3DTIME,LR3DTN
"RTN","LRHYAFT",46,0)
 N LR3SN,LRDT0,LREAL,LRFUTURE,LRGOTIT,LRHOWDY,LRHYHOK,LRIENZZ
"RTN","LRHYAFT",47,0)
 N LRNOTST,LRLBLBP,LRLLOC66,LRMAX2,LRNLT,LRNODUP,LRNONE,LRNPZZX,LRODT
"RTN","LRHYAFT",48,0)
 N LRODT0,LRHYOK,LRORD24,LRORU3,LRPAST,LRPIX,LRAHEAD,LRCHK,LRHYCT,LRCOL99
"RTN","LRHYAFT",49,0)
 N LRDT0,LRDUPT,LRHT1,LRIX,LROLLOC,LRX,LR3X
"RTN","LRHYAFT",50,0)
 ;
"RTN","LRHYAFT",51,0)
VET1 ; Code below executes to handle Patient episode.
"RTN","LRHYAFT",52,0)
 K DIC
"RTN","LRHYAFT",53,0)
 I $G(LRHYSITE)="" S DIC=69.86,DIC(0)="AEMQZ" D ^DIC Q:'Y  S LRHYSITE=+Y
"RTN","LRHYAFT",54,0)
 I LRHYSITE=-1 W !,"No Howdy site selected. Goodbye. " K LRHYSITE,LRDEV,LRLABLIO QUIT
"RTN","LRHYAFT",55,0)
 ; Then, Howdy waits here for next Patient
"RTN","LRHYAFT",56,0)
 I $G(LRDEV)'="" G V2
"RTN","LRHYAFT",57,0)
 S DIC("A")="WHICH LABEL PRINTER:"
"RTN","LRHYAFT",58,0)
 S DIC="^%ZIS(2,"
"RTN","LRHYAFT",59,0)
 S DIC(0)="AEMQZ"
"RTN","LRHYAFT",60,0)
 S DIC=3.2
"RTN","LRHYAFT",61,0)
 S DIC="^%ZIS(1,"
"RTN","LRHYAFT",62,0)
 S DIC(0)="AEMQZN"
"RTN","LRHYAFT",63,0)
 I '$G(LRDEV) D ^DIC Q:+Y=0  S LRDEV=+Y S LRLABLIO=LRDEV
"RTN","LRHYAFT",64,0)
 I Y=-1 W !,"No device selected. Goodbye. " K LRLABLIO,LRDEV,LRHYSITE QUIT
"RTN","LRHYAFT",65,0)
 D ^LRHYBL1
"RTN","LRHYAFT",66,0)
 I $G(LRLABSTP)'="" S LRLABLIO=LRLABLIO_";"_LRLABSTP
"RTN","LRHYAFT",67,0)
 I '$G(LRDEV) D PICK Q:LREND
"RTN","LRHYAFT",68,0)
V2 ;
"RTN","LRHYAFT",69,0)
 ;
"RTN","LRHYAFT",70,0)
 K LRDFN,PNM,LRSN,SSN,LRIDT,LRAA,LRAN,LRAD
"RTN","LRHYAFT",71,0)
 D ^LRPARAM ; Set Howdy up as Lab user
"RTN","LRHYAFT",72,0)
 S LRHOWDY=1
"RTN","LRHYAFT",73,0)
 S LRHYCT=$G(LRHYCT,0)
"RTN","LRHYAFT",74,0)
 ;
"RTN","LRHYAFT",75,0)
 S LRODT=DT
"RTN","LRHYAFT",76,0)
 W @IOF
"RTN","LRHYAFT",77,0)
 K X
"RTN","LRHYAFT",78,0)
 ; 
"RTN","LRHYAFT",79,0)
 W !!,"Please swipe PATIENT ID CARD or Type SSN: "
"RTN","LRHYAFT",80,0)
 ; %ZOSF("EOFF") = U $I:NOECHO
"RTN","LRHYAFT",81,0)
 ; %ZOSF("EON") = U $I:ECHO
"RTN","LRHYAFT",82,0)
 R X:9999999 W !
"RTN","LRHYAFT",83,0)
 I X=U D SCROLOFF^LRHYBC9 QUIT
"RTN","LRHYAFT",84,0)
 ; Code is set to read all types of VIC card as of 9/05/2005
"RTN","LRHYAFT",85,0)
 I $E(X,1,9)["-" D
"RTN","LRHYAFT",86,0)
 .  S X=$P(X,"-")_$P(X,"-",2)_$P(X,"-",3)
"RTN","LRHYAFT",87,0)
 I $E(X,1,1)'=0 I '$E(X,1,1) S X=$E(X,2,10)
"RTN","LRHYAFT",88,0)
 I $L(X)>10 S X=$E(X,2,10)
"RTN","LRHYAFT",89,0)
 I $L(X)'=9 S LR3CNT=LR3CNT+1
"RTN","LRHYAFT",90,0)
 I $L(X)'=9 W !,"Didn't read that Partner. " W:LRHYCT'=2 "Try again." H 2 S LRHYCT=LRHYCT+1 G VET1
"RTN","LRHYAFT",91,0)
NSCN ;
"RTN","LRHYAFT",92,0)
 K DFN,LRDFN,LRDPA,LRDPF,PNM,LRHYCT
"RTN","LRHYAFT",93,0)
 ; 
"RTN","LRHYAFT",94,0)
 S DFN=$O(^DPT("SSN",X,0))
"RTN","LRHYAFT",95,0)
 I 'DFN W !,"No record for this person." R X:15 G VET
"RTN","LRHYAFT",96,0)
 S LRDFN=$G(^DPT(DFN,"LR"))
"RTN","LRHYAFT",97,0)
 ;
"RTN","LRHYAFT",98,0)
 I LRDFN D PT^LRX
"RTN","LRHYAFT",99,0)
 I 'LRDFN W !,"No Lab Data Available... Please check with clerk at the Desk." H 5 D LOG K X G VET
"RTN","LRHYAFT",100,0)
 K ^TMP("LRHYDY",$J,"LRHYDY",$J,LRDFN)
"RTN","LRHYAFT",101,0)
 ;
"RTN","LRHYAFT",102,0)
 ; this call checks order against the 69.86
"RTN","LRHYAFT",103,0)
 W !,"I'M DOING THE BEST I CAN"
"RTN","LRHYAFT",104,0)
 ; HERE IS WHERE WE PRINT LABELS ACCESSIONED EARLIER 2/25/2009 DRH
"RTN","LRHYAFT",105,0)
PX ;
"RTN","LRHYAFT",106,0)
 N LRX,LRY
"RTN","LRHYAFT",107,0)
 I 'LRDFN S LRDFN=^DPT(DFN,"LR")
"RTN","LRHYAFT",108,0)
 W @IOF
"RTN","LRHYAFT",109,0)
 W !,PNM,?40,SSN,"   ",$$Y2K^LRX(DOB)
"RTN","LRHYAFT",110,0)
 S LRADD=$G(^DPT(DFN,.11))
"RTN","LRHYAFT",111,0)
 I LRADD'="" W !,$P(LRADD,U),?35," ",$P(LRADD,U,4)," ",$P(^DIC(5,$P(LRADD,U,5),0),U)
"RTN","LRHYAFT",112,0)
 S LRPHONE=$P($G(^DPT(DFN,.121)),U,10) I $G(LRPHONE) W " Ph#:",$G(LRPHONE)
"RTN","LRHYAFT",113,0)
 H 3
"RTN","LRHYAFT",114,0)
 S DIR("B")="NO",DIR(0)="Y",DIR("A")="PT CONFIRMATION PROMPT. Is this the correct Patient?"
"RTN","LRHYAFT",115,0)
 D ^DIR
"RTN","LRHYAFT",116,0)
 I Y[U D SCROLOFF^LRHYBC9 W @IOF QUIT
"RTN","LRHYAFT",117,0)
 I $G(Y(0))'="YES" W !!,"PT CONFIRMATION FAILED..." H 3 QUIT
"RTN","LRHYAFT",118,0)
 S LR3UID=""
"RTN","LRHYAFT",119,0)
 W @IOF
"RTN","LRHYAFT",120,0)
 D ENS^%ZISS
"RTN","LRHYAFT",121,0)
 W *27,*91,*109 W *27,*91,45,*109
"RTN","LRHYAFT",122,0)
 W IODHLT," ",PNM
"RTN","LRHYAFT",123,0)
 W !
"RTN","LRHYAFT",124,0)
 W IODHLB," ",PNM
"RTN","LRHYAFT",125,0)
 W !
"RTN","LRHYAFT",126,0)
 W !
"RTN","LRHYAFT",127,0)
 W IODHLT," ",SSN
"RTN","LRHYAFT",128,0)
 W !
"RTN","LRHYAFT",129,0)
 W IODHLB," ",SSN
"RTN","LRHYAFT",130,0)
 W *27,"[",40,";",37,"m",!
"RTN","LRHYAFT",131,0)
 W !
"RTN","LRHYAFT",132,0)
 W ! D LRGLIN^LRX W !
"RTN","LRHYAFT",133,0)
 S LRX=0
"RTN","LRHYAFT",134,0)
 S CNT=0
"RTN","LRHYAFT",135,0)
 K LRLABTIM S LRLABTIM=$O(^XTMP("LRHY LABELS",LRDFN,DT))
"RTN","LRHYAFT",136,0)
 I $G(LRLABTIM)="" W !,"NOTHING TO PRINT ON ",PNM H 2 QUIT
"RTN","LRHYAFT",137,0)
 D LRBOX^LRHYLRX(60,6,5,15," ")
"RTN","LRHYAFT",138,0)
 F  S LR3UID=$O(^XTMP("LRHY LABELS",LRDFN,LRLABTIM,LR3UID)) Q:LR3UID=""  D
"RTN","LRHYAFT",139,0)
 .  I $L(LR3UID)<10 W !,"UID < 10 CHRS. ACCESSION MANUALLY" H 2 QUIT
"RTN","LRHYAFT",140,0)
 .  K LRLABNO S LRLABNOD=$G(^XTMP("LRHY LABELS",LRDFN,LRLABTIM,LR3UID))
"RTN","LRHYAFT",141,0)
 .  S LRY=0
"RTN","LRHYAFT",142,0)
 .  S LRX=$O(^LRO(68,"C",LR3UID,0))
"RTN","LRHYAFT",143,0)
 .  I '$G(LRX) D MICRO
"RTN","LRHYAFT",144,0)
 .  Q:'$G(LRX)
"RTN","LRHYAFT",145,0)
 .  S LRY1=$O(^LRO(68,"C",LR3UID,LRX,0))
"RTN","LRHYAFT",146,0)
 .  S LRY=$O(^LRO(68,"C",LR3UID,LRX,LRY1,LRY))
"RTN","LRHYAFT",147,0)
 .  D
"RTN","LRHYAFT",148,0)
 ..  S LRLBL(LRX,LRY)=LRLABNOD
"RTN","LRHYAFT",149,0)
 ..  S CNT=CNT+1 S LABCNT(CNT)=LRLBL(LRX,LRY)
"RTN","LRHYAFT",150,0)
 ..  S LRXCNT(CNT)=LRX_U_LRY
"RTN","LRHYAFT",151,0)
 ..  S X=62,Y=5
"RTN","LRHYAFT",152,0)
 ..  S LRAD=$G(LRY1)
"RTN","LRHYAFT",153,0)
 ..  W !,CNT,")",$P(LRLBL(LRX,LRY),U,6)
"RTN","LRHYAFT",154,0)
 ..  I '$G(LRAD) S LRAD=DT
"RTN","LRHYAFT",155,0)
 ..  W $P(^LAB(62,$P(^LRO(68,LRX,1,LRAD,1,LRY,5,1,0),U,2),0),U,3)
"RTN","LRHYAFT",156,0)
 S LRX=0
"RTN","LRHYAFT",157,0)
 S LRX=0
"RTN","LRHYAFT",158,0)
 S DY=5
"RTN","LRHYAFT",159,0)
 S DY=6
"RTN","LRHYAFT",160,0)
 F  S LRX=$O(LRLBL(LRX)) Q:+LRX'>0  S DX=62,LRC=$O(LRLBL(LRX,0)),LRAD=$P(LRLBL(LRX,LRC),U,2),DY=DY+1 X IOXY K LR3UID S LR3UID=$G(^LRO(68,LRX,1,LRAD,1,LRC,.3)) W LR3UID
"RTN","LRHYAFT",161,0)
 ;
"RTN","LRHYAFT",162,0)
 W !!
"RTN","LRHYAFT",163,0)
 W !! H 4
"RTN","LRHYAFT",164,0)
 D ENS^%ZISS S IOTM=16,IOBM=23
"RTN","LRHYAFT",165,0)
 ;
"RTN","LRHYAFT",166,0)
 W @IOSTBM
"RTN","LRHYAFT",167,0)
 W !!
"RTN","LRHYAFT",168,0)
 H 3
"RTN","LRHYAFT",169,0)
 W !
"RTN","LRHYAFT",170,0)
 S DX=0,DY=13 X IOXY
"RTN","LRHYAFT",171,0)
 S DX=0,DY=17 X IOXY
"RTN","LRHYAFT",172,0)
 W !!," Proceed with COLLECTION:" W *7
"RTN","LRHYAFT",173,0)
 W !!
"RTN","LRHYAFT",174,0)
 W !,"Select specimen(s) you actually collected to print corresponding labels:"
"RTN","LRHYAFT",175,0)
SL ;
"RTN","LRHYAFT",176,0)
 R LRS:DTIME W ! I LRS["-" G QQQ
"RTN","LRHYAFT",177,0)
QQQ ;
"RTN","LRHYAFT",178,0)
 F I=1:1:10 Q:+$P(LRS,",",I)'>0  S LRS3333=+$P(LRS,",",I) I '$D(LABCNT(LRS3333)) W !,"OUT OF RANGE" H 3 G PX
"RTN","LRHYAFT",179,0)
 K LRLBL
"RTN","LRHYAFT",180,0)
 I LRS["?" W !,"You may enter 1 OR 2 OR 1,2,3,etc NO DASHES(-) PLEASE " H 4 G PX
"RTN","LRHYAFT",181,0)
 I LRS["," F LRXX=1:1:CNT S I=$P(LRS,",",LRXX) Q:+I'>0  S LRX=$P(LRXCNT(I),U),LRY=$P(LRXCNT(I),U,2) D
"RTN","LRHYAFT",182,0)
 .  S LRAD=DT
"RTN","LRHYAFT",183,0)
 .  I $P(^LRO(68,LRX,0),U,3)="Y" S LRAD=$E(DT,1,3)_"0000"
"RTN","LRHYAFT",184,0)
 .  I $P(^LRO(68,LRX,0),U,3)="M" S LRAD=$E(DT,1,5)_"00"
"RTN","LRHYAFT",185,0)
 .  W !,"Sending to print: ",$P($G(^LRO(68,LRX,1,LRAD,1,LRY,.3)),U) W !,"  ",$P(^LAB(62,$P(^LRO(68,LRX,1,LRAD,1,LRY,5,1,0),U,2),0),U,3)
"RTN","LRHYAFT",186,0)
 .  S LRORD=$G(^LRO(68,LRX,1,LRAD,1,LRY,.1))
"RTN","LRHYAFT",187,0)
 .  I $P($G(LRXCNT(I)),U,2)="" QUIT
"RTN","LRHYAFT",188,0)
 .  S LRLBL(LRX,$P(LRXCNT(I),U,2))=LABCNT(I)_$G(LRORD)
"RTN","LRHYAFT",189,0)
 .  S LR3UID=$P($G(^LRO(68,LRX,1,LRAD,1,LRY,.3)),U)
"RTN","LRHYAFT",190,0)
 .  D BCE^LRHYPH0
"RTN","LRHYAFT",191,0)
 .  K ^XTMP("LRHY LABELS",LRDFN,LRLABTIM,LR3UID)
"RTN","LRHYAFT",192,0)
 I LRS["-" W !,"DASHES ARE NOT PERMITTED. ENTER 1,2,3 ETC" H 1 G PX
"RTN","LRHYAFT",193,0)
 I $G(LRXCNT(+LRS))="" W !,"OUT OF RANGE. TRY AGAIN" H 2 G PX
"RTN","LRHYAFT",194,0)
 E  I $L(LRS)=1 I $G(LRXCNT(LRS))'="" S I=LRS Q:+I'>0  S LRX=$P(LRXCNT(I),U),LRY=$P(LRXCNT(I),U,2) D
"RTN","LRHYAFT",195,0)
 .  S LRAD=DT
"RTN","LRHYAFT",196,0)
 .  I $P(^LRO(68,LRX,0),U,3)="M" S LRAD=$E(DT,1,5)_"00"
"RTN","LRHYAFT",197,0)
 .  I $P(^LRO(68,LRX,0),U,3)="Y" S LRAD=$E(DT,1,3)_"0000"
"RTN","LRHYAFT",198,0)
 .  W !,"Sending to print: ",$P($G(^LRO(68,LRX,1,LRAD,1,LRY,.3)),U) W !,"  ",$P(^LAB(62,$P(^LRO(68,LRX,1,LRAD,1,LRY,5,1,0),U,2),0),U,3)
"RTN","LRHYAFT",199,0)
 .  S LR3UID=$P($G(^LRO(68,LRX,1,LRAD,1,LRY,.3)),U)
"RTN","LRHYAFT",200,0)
 .  S LRORD=$G(^LRO(68,LRX,1,LRAD,1,LRY,.1))
"RTN","LRHYAFT",201,0)
 .  S LRLBL(LRX,$P(LRXCNT(LRS),U,2))=LABCNT(LRS)_$G(LRORD)
"RTN","LRHYAFT",202,0)
 .  W !,"REMOVING ",LR3UID H 2
"RTN","LRHYAFT",203,0)
 .  S LRSCAN=$G(LRLABTIM)
"RTN","LRHYAFT",204,0)
 .  K ^XTMP("LRHY LABELS",LRDFN,LRLABTIM,LR3UID)
"RTN","LRHYAFT",205,0)
 H 4
"RTN","LRHYAFT",206,0)
 I '$D(^XTMP("LRHY LABELS",LRDFN,LRLABTIM)) G VIE
"RTN","LRHYAFT",207,0)
 K DIR
"RTN","LRHYAFT",208,0)
 S DIR("A")="What shall we do with these?"
"RTN","LRHYAFT",209,0)
 ;
"RTN","LRHYAFT",210,0)
 S DIR(0)="S^1:Delete;C:Collect;"
"RTN","LRHYAFT",211,0)
 S DIR("B")="Delete"
"RTN","LRHYAFT",212,0)
 D ^DIR Q:X[U
"RTN","LRHYAFT",213,0)
 I Y="C" G PX
"RTN","LRHYAFT",214,0)
 I Y=1 D DEL7 W !,"Use Lab option > Accessioning Menu: Delete test from an accession [LRTSTOUT]" H 2
"RTN","LRHYAFT",215,0)
 ;
"RTN","LRHYAFT",216,0)
VIE ;
"RTN","LRHYAFT",217,0)
 D CONTROL^LRHYBC1
"RTN","LRHYAFT",218,0)
 H 3 W @IOF
"RTN","LRHYAFT",219,0)
 D SCROLOFF^LRHYBC9
"RTN","LRHYAFT",220,0)
 QUIT
"RTN","LRHYAFT",221,0)
MICRO ;
"RTN","LRHYAFT",222,0)
 S LRACNODE=^XTMP("LRHY LABELS",LRDFN,LRLABTIM,LR3UID)
"RTN","LRHYAFT",223,0)
 S LRACCXX=$P(LRACNODE,U,6)
"RTN","LRHYAFT",224,0)
 S LR68=$P(LRACCXX," ") S LRAA=$O(^LRO(68,"B",LR68,0))
"RTN","LRHYAFT",225,0)
 S LRAN=$P(LRACCXX," ",3)
"RTN","LRHYAFT",226,0)
 S LRAD=$P(LRACNODE,U,2)
"RTN","LRHYAFT",227,0)
 S LR3UIDM=$G(^LRO(68,LRAA,1,LRAD,1,LRAN,.3))
"RTN","LRHYAFT",228,0)
 S LRX=$O(^LRO(68,"C",LR3UID,0))
"RTN","LRHYAFT",229,0)
 QUIT
"RTN","LRHYAFT",230,0)
 ;
"RTN","LRHYAFT",231,0)
PRT1 ;
"RTN","LRHYAFT",232,0)
 ;
"RTN","LRHYAFT",233,0)
 W @IOF
"RTN","LRHYAFT",234,0)
 D SCRNON^LRHYUTL
"RTN","LRHYAFT",235,0)
 K PNMALL S PNMALL="Howdy "_$P(PNM,",",2)_" "_$P(PNM,",")
"RTN","LRHYAFT",236,0)
 W !
"RTN","LRHYAFT",237,0)
 W IODHLT,"     ",PNMALL
"RTN","LRHYAFT",238,0)
 W !
"RTN","LRHYAFT",239,0)
 W IODHLB,"     ",PNMALL
"RTN","LRHYAFT",240,0)
 W !
"RTN","LRHYAFT",241,0)
 W !,$$CJ^XLFSTR($G(^LRHY(69.86,LRHYSITE,40)),IOM)
"RTN","LRHYAFT",242,0)
 W !,$$CJ^XLFSTR($G(^LRHY(69.86,LRHYSITE,44)),IOM)
"RTN","LRHYAFT",243,0)
 W !
"RTN","LRHYAFT",244,0)
 W IODHLT,"    Orders for date: "_$$Y2K^LRX(DT)
"RTN","LRHYAFT",245,0)
 W !
"RTN","LRHYAFT",246,0)
 W IODHLB,"    Orders for date: "_$$Y2K^LRX(DT)
"RTN","LRHYAFT",247,0)
 W !
"RTN","LRHYAFT",248,0)
 S LRXYZ=0
"RTN","LRHYAFT",249,0)
 W *7 H 1 W *7 H 1 W *7
"RTN","LRHYAFT",250,0)
 ;
"RTN","LRHYAFT",251,0)
 H 5
"RTN","LRHYAFT",252,0)
QUITH ; 
"RTN","LRHYAFT",253,0)
 D SCRNOFF^LRHYUTL ; Turn off screen variables
"RTN","LRHYAFT",254,0)
 K LRDFN,PNM,LRSN,SSN,LRIDT,LRAA,LRAN,LRAD,LRHYCT
"RTN","LRHYAFT",255,0)
 K LRNPZZX,LRNODUP,LRLLOC,LRTSTZ99,LRACC,LRCDT,LRDPF,LRI
"RTN","LRHYAFT",256,0)
 K LRORD3,LRHYFIX,LRPLICK,LRPR,LRPRAC,LRQUIET,LRRB,LRSAMP,LRSND
"RTN","LRHYAFT",257,0)
 K LRSS,LRST,LRSTATUS,LRSUB1,LRTIC,LRTIM,LRTN,LRTREA,LRTS,LRTSORU
"RTN","LRHYAFT",258,0)
 K LRTST6,LRTT,LRUN,LRWLO,LRWLC,LRWRD,LRXYZ,LR3DTIME,LR3DTN
"RTN","LRHYAFT",259,0)
 K LR3SN,LRDT0,LREAL,LRFUTURE,LRGOTIT,LRHOWDY,LRHYHOK,LRIENZZ
"RTN","LRHYAFT",260,0)
 K LRNOTST,LRLBLBP,LRLLOC66,LRMAX2,LRNLT,LRNODUP,LRNONE,LRNPZZX,LRODT
"RTN","LRHYAFT",261,0)
 K LRODT0,LRHYOK,LRORD24,LRORU3,LRPAST,LRPIX,LRAHEAD,LRCHK,LRHYCT,LRCOL99
"RTN","LRHYAFT",262,0)
 K LRDT0,LRDUPT,LRHT1,LRIX,LROLLOC,LRX,LR3X
"RTN","LRHYAFT",263,0)
 K VAIN
"RTN","LRHYAFT",264,0)
 ;
"RTN","LRHYAFT",265,0)
 ;
"RTN","LRHYAFT",266,0)
 G VET
"RTN","LRHYAFT",267,0)
 ;
"RTN","LRHYAFT",268,0)
 ;
"RTN","LRHYAFT",269,0)
 ;
"RTN","LRHYAFT",270,0)
ORDCHK ; This block to be used for future version
"RTN","LRHYAFT",271,0)
 QUIT
"RTN","LRHYAFT",272,0)
LOG ; Howdy will default to the clerks judgement when multiple orders found.
"RTN","LRHYAFT",273,0)
 Q:$G(LRSKIPNO)
"RTN","LRHYAFT",274,0)
 ;
"RTN","LRHYAFT",275,0)
 W !,"NO ORDERS"
"RTN","LRHYAFT",276,0)
 ;
"RTN","LRHYAFT",277,0)
 K LRDPF,PNM
"RTN","LRHYAFT",278,0)
 D PT^LRX
"RTN","LRHYAFT",279,0)
 D NOW^%DTC
"RTN","LRHYAFT",280,0)
 I '$G(LRDFN) S ^TMP("LRHYDY",$J,"LR NO ORDERS",%)=$G(DFN) QUIT
"RTN","LRHYAFT",281,0)
 S ^TMP("LRHYDY",$J,"LR NO ORDERS",%)=$G(PNM)_U_$G(^LR(LRDFN,.1))_U_$G(SSN)
"RTN","LRHYAFT",282,0)
 QUIT
"RTN","LRHYAFT",283,0)
 ;
"RTN","LRHYAFT",284,0)
 ;
"RTN","LRHYAFT",285,0)
LOG1 ; Howdy will default to the clerks judgement when multiple orders found.
"RTN","LRHYAFT",286,0)
 K LRORD
"RTN","LRHYAFT",287,0)
 W !,"MULTIPLE ORDERS"
"RTN","LRHYAFT",288,0)
 K LRDPF,PNM
"RTN","LRHYAFT",289,0)
 D PT^LRX
"RTN","LRHYAFT",290,0)
 D NOW^%DTC
"RTN","LRHYAFT",291,0)
 S ^TMP("LRHYDY",$J,"LR MULTIPLE ORDERS",%)=$G(PNM)_U_$G(^LR(LRDFN,.1))_U_$G(SSN)
"RTN","LRHYAFT",292,0)
 K LRSKIPNO S LRSKIPNO=1
"RTN","LRHYAFT",293,0)
 QUIT
"RTN","LRHYAFT",294,0)
ORDERS ;
"RTN","LRHYAFT",295,0)
 QUIT
"RTN","LRHYAFT",296,0)
NOSCAN ;
"RTN","LRHYAFT",297,0)
 QUIT
"RTN","LRHYAFT",298,0)
DEL7 ;
"RTN","LRHYAFT",299,0)
 QUIT
"RTN","LRHYB")
0^7^B41480183^n/a
"RTN","LRHYB",1,0)
LRHYB ;DALOI/HOAK - HOWDY B DRIVER ;9/16/2000
"RTN","LRHYB",2,0)
 ;;5.2;LAB SERVICE;**405**;Sep 27, 1994;Build 93
"RTN","LRHYB",3,0)
 ;
"RTN","LRHYB",4,0)
TEST ;
"RTN","LRHYB",5,0)
 S DIC=2 S DIC(0)="AEMQZ" D ^DIC
"RTN","LRHYB",6,0)
 Q:Y=-1
"RTN","LRHYB",7,0)
 S LRDFN=$G(^DPT(+Y,"LR"))
"RTN","LRHYB",8,0)
 ;
"RTN","LRHYB",9,0)
 ;
"RTN","LRHYB",10,0)
 ;
"RTN","LRHYB",11,0)
ORDCHK ; Here is where the search for an order number starts
"RTN","LRHYB",12,0)
 K LRHYT654
"RTN","LRHYB",13,0)
 ; The Howdy site file will help determine which orders the site
"RTN","LRHYB",14,0)
 ; will accept. Once an order has been selected it is handed off
"RTN","LRHYB",15,0)
 ; to LRORDST to start the accessioning process.
"RTN","LRHYB",16,0)
 ;
"RTN","LRHYB",17,0)
 K LRWCZZZ,LRDTF
"RTN","LRHYB",18,0)
 K LRHYCS33
"RTN","LRHYB",19,0)
 K ^TMP("LRHYDY",$J,"KILL")
"RTN","LRHYB",20,0)
 ;
"RTN","LRHYB",21,0)
 ;
"RTN","LRHYB",22,0)
 K ^TMP("LRHYDY",$J,"MULTD")
"RTN","LRHYB",23,0)
 K ^TMP("LRHYDY",$J,"DUPTEST")
"RTN","LRHYB",24,0)
 K LRHYCS
"RTN","LRHYB",25,0)
 K ^TMP("LRHYDY",$J,"MT")
"RTN","LRHYB",26,0)
 S LRHOWDY=1
"RTN","LRHYB",27,0)
 S LREND=0
"RTN","LRHYB",28,0)
 S LRORD=""
"RTN","LRHYB",29,0)
 Q:'LRDFN
"RTN","LRHYB",30,0)
 ;
"RTN","LRHYB",31,0)
 K ^TMP("LRHYDY",$J,"LRSN"),LRNPZZX
"RTN","LRHYB",32,0)
 S LRHYOK=0
"RTN","LRHYB",33,0)
 ;
"RTN","LRHYB",34,0)
 ;  18 days ahead
"RTN","LRHYB",35,0)
 ;  20 days back
"RTN","LRHYB",36,0)
 ;
"RTN","LRHYB",37,0)
 S X2=0 K LRNPZZX
"RTN","LRHYB",38,0)
 S LRAHEAD=$G(^LRHY(69.86,LRHYSITE,18))
"RTN","LRHYB",39,0)
 S LRPAST=$G(^LRHY(69.86,LRHYSITE,20))
"RTN","LRHYB",40,0)
 K LRWCZZZ
"RTN","LRHYB",41,0)
 F LRI=-LRPAST:1:LRAHEAD D  ;Search window set by site file.
"RTN","LRHYB",42,0)
 .  S X1=DT S X2=LRI D C^%DTC S LR3DTN=X
"RTN","LRHYB",43,0)
 .  I $D(^LRO(69,LR3DTN,1,"AA",LRDFN)) S LRHYOK=1 D
"RTN","LRHYB",44,0)
 ..  S LR3SN=0
"RTN","LRHYB",45,0)
 ..  F  S LR3SN=$O(^LRO(69,LR3DTN,1,"AA",LRDFN,LR3SN)) Q:+LR3SN'>0  D
"RTN","LRHYB",46,0)
 ...  Q:$P($G(^LRO(69,LR3DTN,1,LR3SN,1)),U,4)="C"  ;collected
"RTN","LRHYB",47,0)
 ...  K LRWCZZZ
"RTN","LRHYB",48,0)
 ...  ;
"RTN","LRHYB",49,0)
 ...  K LRCOL99 S LRCOL99=$P(^LRO(69,LR3DTN,1,LR3SN,0),U,3)
"RTN","LRHYB",50,0)
 ...  K LRCSTAT S LRCSTAT=$P(^LRO(69,LR3DTN,1,LR3SN,0),U,4)
"RTN","LRHYB",51,0)
 ...  D CSTATUS^LRHYA Q:LRHYHOK  ;Check collection status
"RTN","LRHYB",52,0)
 ...  ;
"RTN","LRHYB",53,0)
 ...  D OLT^LRHYA  ;print order label tests
"RTN","LRHYB",54,0)
 ...  Q:LRHYHOK
"RTN","LRHYB",55,0)
 ...  ;
"RTN","LRHYB",56,0)
 ...  ;
"RTN","LRHYB",57,0)
 ...  K LRNOTST
"RTN","LRHYB",58,0)
 ...  S LRNODUP=0 D LTE^LRHYA Q:LRHYHOK  ;check for excluded lab tests
"RTN","LRHYB",59,0)
 ...  ;
"RTN","LRHYB",60,0)
 ...  S LRORD=^LRO(69,LR3DTN,1,LR3SN,.1)
"RTN","LRHYB",61,0)
 ...  S LRLLOC66=$P(^LRO(69,LR3DTN,1,LR3SN,0),U,9)
"RTN","LRHYB",62,0)
 ...  D EXLOC^LRHYA Q:LRHYHOK  ;check for locations to exclude
"RTN","LRHYB",63,0)
 ...  ;
"RTN","LRHYB",64,0)
 ...  S LRLLOC=$G(LRLLOC66)
"RTN","LRHYB",65,0)
 ...  S LRORD24=0
"RTN","LRHYB",66,0)
 ...  D OLT^LRHYA Q:LRHYHOK  ;print order label tests
"RTN","LRHYB",67,0)
 ...  ;
"RTN","LRHYB",68,0)
 ...  D URG^LRHYA Q:LRHYHOK  ;;  CHECK URGENCY
"RTN","LRHYB",69,0)
 ...  K LRCOL99 S LRCOL99=$P(^LRO(69,LR3DTN,1,LR3SN,0),U,3)
"RTN","LRHYB",70,0)
 ...  D CSE^LRHYA Q:LRHYHOK  ;check for excluded collection samples
"RTN","LRHYB",71,0)
 ...  ;
"RTN","LRHYB",72,0)
 ...  I $O(^TMP("LRHYDY",$J,"EXLOC",LRORD,0))=$G(LRLLOC66) I $O(^LRO(69,"C",LRORD,0))'=DT QUIT
"RTN","LRHYB",73,0)
 ...  ;  CHECK URGENCY
"RTN","LRHYB",74,0)
 ...  S LRTST6=0 ; micro test
"RTN","LRHYB",75,0)
 ...  F  S LRTST6=$O(^LRO(69,LR3DTN,1,LR3SN,2,"B",LRTST6)) Q:+LRTST6'>0  D
"RTN","LRHYB",76,0)
 ....  S LRTSTZ99(LRTST6)=""
"RTN","LRHYB",77,0)
 ....  I LRTST6 S LRSUB1=$P(^LAB(60,LRTST6,0),U,4) ; subscript
"RTN","LRHYB",78,0)
 ....  I $G(LRSUB1)="MI" Q:$G(^LRO(69,LR3DTN,1,LR3SN,4,1,0))'=71
"RTN","LRHYB",79,0)
 ....  Q:$D(LRNPZZX(^LRO(69,LR3DTN,1,LR3SN,.1),LR3SN,LRTST6))
"RTN","LRHYB",80,0)
 ....  S LRORD=$G(^LRO(69,LR3DTN,1,LR3SN,.1))
"RTN","LRHYB",81,0)
 ....  I $G(LRORD) I $D(^TMP("LRHYDY",$J,"STATUS",LRORD)) QUIT
"RTN","LRHYB",82,0)
 ....  I $D(LRNOTST) I $D(LRNOTST(LRTST6)) K LRORD QUIT
"RTN","LRHYB",83,0)
 ....  S ^TMP("LRHYDY",$J,"LRSN",LR3DTN,^LRO(69,LR3DTN,1,LR3SN,.1))=""
"RTN","LRHYB",84,0)
 ....  S LRDTX=""
"RTN","LRHYB",85,0)
 ....  S LRDTX=$O(^LRO(69,"C",^LRO(69,LR3DTN,1,LR3SN,.1),0))
"RTN","LRHYB",86,0)
 ....  I '$D(^LRHY(69.86,LRHYSITE,16,"B",LRLLOC66)) I $G(LRDTX) S ^TMP("LRHYDY",$J,"MT",LRDTX)=""
"RTN","LRHYB",87,0)
 ;
"RTN","LRHYB",88,0)
 ;
"RTN","LRHYB",89,0)
 K LRMULT
"RTN","LRHYB",90,0)
 I $G(LRWCMULT) W !!!!,"Multple Orders Present" S LRMULT=1 D LOG1^LRHY0 K LRWCMULT QUIT
"RTN","LRHYB",91,0)
 ; per Libba 1/14/2002
"RTN","LRHYB",92,0)
 I $D(^TMP("LRHYDY",$J,"LRSN",DT)) S LR3DTN=DT ; I prefer today's orders but...
"RTN","LRHYB",93,0)
 E  S LR3DTN=$O(^TMP("LRHYDY",$J,"LRSN",0)) ; I'll take whatever ya got
"RTN","LRHYB",94,0)
 I 'LR3DTN K LRORD QUIT
"RTN","LRHYB",95,0)
 ;
"RTN","LRHYB",96,0)
 I '$D(^LRHY(69.86,LRHYSITE,16,"B",LRLLOC66)) I $O(^TMP("LRHYDY",$J,"LRSN",LR3DTN)) W !,"MULTIPLE DAYS WITH ORDERS" S LRMULT=1 D LOG1^LRHY0 QUIT
"RTN","LRHYB",97,0)
 ;
"RTN","LRHYB",98,0)
 S LRTIC=0
"RTN","LRHYB",99,0)
 S LRMULT=0
"RTN","LRHYB",100,0)
 ;
"RTN","LRHYB",101,0)
 F  S LRTIC=$O(^TMP("LRHYDY",$J,"LRSN",LRTIC)) Q:+LRTIC'>0  S LRMULT=LRMULT+1
"RTN","LRHYB",102,0)
 I '$D(^LRHY(69.86,LRHYSITE,16,"B",LRLLOC66)) I LRMULT>1 W !,"MULTIPLE DAYS WITH ORDERS" S LRMULT=0 D LOG1^LRHY0 QUIT
"RTN","LRHYB",103,0)
 ;MODIFIED BY HOAK to flag when wc and sp are on same visit
"RTN","LRHYB",104,0)
 ;
"RTN","LRHYB",105,0)
 ;
"RTN","LRHYB",106,0)
MOVE ;
"RTN","LRHYB",107,0)
 I $D(LRNOTST) I $G(LRHYT654) I $D(LRNOTST(LRHYT654)) K LRORD QUIT
"RTN","LRHYB",108,0)
 S LRHY3SN3=0
"RTN","LRHYB",109,0)
 S LRHY3DT3=0
"RTN","LRHYB",110,0)
 I $D(^TMP("LRHYDY",$J,"URG",LRORD)) K LRORD QUIT
"RTN","LRHYB",111,0)
 I $D(^LRHY(69.86,LRHYSITE,30,"B",LRURGZ19)) K LRORD QUIT
"RTN","LRHYB",112,0)
 S LRTIC=0
"RTN","LRHYB",113,0)
 S LRMULT=0
"RTN","LRHYB",114,0)
 F  S LRTIC=$O(^TMP("LRHYDY",$J,"MT",LRTIC)) Q:+LRTIC'>0  S LRMULT=LRMULT+1
"RTN","LRHYB",115,0)
 S LR3MULT=LRMULT
"RTN","LRHYB",116,0)
 I LRMULT>1 W !,"MULTIPLE DAYS WITH ORDERS" S LRORD=0 QUIT
"RTN","LRHYB",117,0)
 E  S LRMULT=0
"RTN","LRHYB",118,0)
 ; may be accessioned.
"RTN","LRHYB",119,0)
 ; Setting up task to continue based on the specimen.
"RTN","LRHYB",120,0)
 K LR3ZTST
"RTN","LRHYB",121,0)
MOVE1 ;
"RTN","LRHYB",122,0)
 S LRORD=0
"RTN","LRHYB",123,0)
 F  S LRORD=$O(^TMP("LRHYDY",$J,"LRSN",LR3DTN,LRORD)) Q:+LRORD'>0  D
"RTN","LRHYB",124,0)
 .  S:'$G(LR3ORD) LR3ORD=LRORD
"RTN","LRHYB",125,0)
 .  I $D(^TMP("LRHYDY",$J,"URG",LRORD)) QUIT
"RTN","LRHYB",126,0)
 .  S LRHYORDZ=LRORD
"RTN","LRHYB",127,0)
 .  ;
"RTN","LRHYB",128,0)
 .  S ZTSAVE("^TMP(""LRHYDY"",$J,")=""
"RTN","LRHYB",129,0)
 .  S ZTRTN="PAST^LRHYPH0",ZTSAVE("L*")="",ZTDTH=$H,ZTDESC="HOWDY"
"RTN","LRHYB",130,0)
 .  S ZTIO="NULL"
"RTN","LRHYB",131,0)
 .  S ZTSAVE("L*")=""
"RTN","LRHYB",132,0)
 .  S:$D(ZTQUEUED) ZTREQ="@" D ^%ZTLOAD
"RTN","LRHYB",133,0)
 .  S LRGOTIT=1
"RTN","LRHYB",134,0)
 .  S LRORD=LRHYORDZ
"RTN","LRHYB",135,0)
 .  K LRSTOPZ(LRORD)
"RTN","LRHYB",136,0)
 K ^TMP("LRHYDY",$J,"MULTD")
"RTN","LRHYB",137,0)
 S LRORD=$G(LR3ORD) K LR3ORD
"RTN","LRHYB",138,0)
 K LRHOWDY,LR3SN24,LR3DTN24,LR3ZTST
"RTN","LRHYB",139,0)
 ; Remove collection info on order label tests
"RTN","LRHYB",140,0)
 S LR3DTN=0
"RTN","LRHYB",141,0)
 F  S LR3DTN=$O(LROLT1(LR3DTN)) Q:+LR3DTN'>0  D
"RTN","LRHYB",142,0)
 .  S LR3SN=0
"RTN","LRHYB",143,0)
 .  F  S LR3SN=$O(LROLT1(LR3DTN,LR3SN)) Q:+LR3SN'>0  D
"RTN","LRHYB",144,0)
 ..  S ^LRO(69,LR3DTN,1,LR3SN,1)=""
"RTN","LRHYB",145,0)
 K LROLT1
"RTN","LRHYB",146,0)
 I $G(LRORD) I $D(LRSTOPZ(LRORD)) K LRORD,LRSTOPZ QUIT
"RTN","LRHYB",147,0)
 ;
"RTN","LRHYB",148,0)
 QUIT
"RTN","LRHYB",149,0)
 ;
"RTN","LRHYB",150,0)
MMM ;
"RTN","LRHYB",151,0)
 N LRI S LRI=0
"RTN","LRHYB",152,0)
 N LR3DTN,LR3SN,LRIENZZ,LRTSTX
"RTN","LRHYB",153,0)
 K LRHYMORD
"RTN","LRHYB",154,0)
 K LRHYMULT
"RTN","LRHYB",155,0)
 F LRI=-LRPAST:1:LRAHEAD D
"RTN","LRHYB",156,0)
 .  S X1=DT S X2=LRI D C^%DTC S LR3DTN=X
"RTN","LRHYB",157,0)
 .  ;
"RTN","LRHYB",158,0)
 .  I $D(^LRO(69,LR3DTN,1,"AA",LRDFN)) D
"RTN","LRHYB",159,0)
 ..  S LR3SN=0
"RTN","LRHYB",160,0)
 ..  F  S LR3SN=$O(^LRO(69,LR3DTN,1,"AA",LRDFN,LR3SN)) Q:+LR3SN'>0  D
"RTN","LRHYB",161,0)
 ...  ;
"RTN","LRHYB",162,0)
 ...  Q:$P($G(^LRO(69,LR3DTN,1,LR3SN,1)),U,4)="C"  ;collected
"RTN","LRHYB",163,0)
 ...  S LRTSTX=0
"RTN","LRHYB",164,0)
 ...  F  S LRTSTX=$O(^LRO(69,LR3DTN,1,LR3SN,2,"B",LRTSTX)) Q:+LRTSTX'>0  D
"RTN","LRHYB",165,0)
 ....  S LRIENZZ=$O(^LRO(69,LR3DTN,1,LR3SN,2,"B",LRTSTX,0))
"RTN","LRHYB",166,0)
 ....  ;
"RTN","LRHYB",167,0)
 ....  Q:$G(^LRO(69,LR3DTN,1,LR3SN,2,LRIENZZ,1.1,1,0))'=""
"RTN","LRHYB",168,0)
 ....  K LRCOL99 S LRCOL99=$P(^LRO(69,LR3DTN,1,LR3SN,0),U,3)
"RTN","LRHYB",169,0)
 ....  S LRHYHOK=0 D CSE^LRHYA Q:LRHYHOK
"RTN","LRHYB",170,0)
 ....  S LRCSTAT=$P(^LRO(69,LR3DTN,1,LR3SN,0),U,4)
"RTN","LRHYB",171,0)
 ....  S LRHYHOK=0 D CSTATUS^LRHYA Q:LRHYHOK
"RTN","LRHYB",172,0)
 ....  S LRLLOC66=$P(^LRO(69,LR3DTN,1,LR3SN,0),U,9)
"RTN","LRHYB",173,0)
 ....  S LRHYHOK=0 D EXLOC^LRHYA Q:LRHYHOK
"RTN","LRHYB",174,0)
 ....  S LRHYMULT(LR3DTN,LR3SN,LRIENZZ)=LRTSTX
"RTN","LRHYB",175,0)
 N CNT
"RTN","LRHYB",176,0)
 S CNT=0
"RTN","LRHYB",177,0)
 S LR3DTN=0
"RTN","LRHYB",178,0)
 F  S LR3DTN=$O(LRHYMULT(LR3DTN)) Q:+LR3DTN'>0  S CNT=CNT+1
"RTN","LRHYB",179,0)
 I CNT>1 S LRHYMORD=1
"RTN","LRHYBC1")
0^8^B65673282^n/a
"RTN","LRHYBC1",1,0)
LRHYBC1 ;DALOI/HOAK - LAB PHLEB AND COLLECTION TIME UPDATER ;11/8/10 1:50pm
"RTN","LRHYBC1",2,0)
 ;;5.2;LAB SERVICE;**405**;Sep 27, 1994;Build 93
"RTN","LRHYBC1",3,0)
 ;
"RTN","LRHYBC1",4,0)
 ; This routine will be used to capture the phlebotomist and the
"RTN","LRHYBC1",5,0)
 ; specimen collection time.
"RTN","LRHYBC1",6,0)
 ;
"RTN","LRHYBC1",7,0)
 ; The barcoded specimen tubes will be waunded.
"RTN","LRHYBC1",8,0)
 ; The phlebotomist ID will then be waunded.
"RTN","LRHYBC1",9,0)
 ;
"RTN","LRHYBC1",10,0)
CONTROL ;
"RTN","LRHYBC1",11,0)
 K LRPTARIV
"RTN","LRHYBC1",12,0)
 K ^TMP("LRHY ASH",$J)
"RTN","LRHYBC1",13,0)
 K LRSCAN
"RTN","LRHYBC1",14,0)
 K DIC,LRHYTECH,LRHYDUZ,LRPHLEB,LRRECVR
"RTN","LRHYBC1",15,0)
 K DIR,DIC,DIE,LRARIVE,LRDRAW
"RTN","LRHYBC1",16,0)
 K DIC,LRHYTECH,LRHYDUZ,LRPHLEB
"RTN","LRHYBC1",17,0)
 K DIR,DIC,DIE,LRARIVE,LRDRAW
"RTN","LRHYBC1",18,0)
 S LRPL=1
"RTN","LRHYBC1",19,0)
 S LREND=0
"RTN","LRHYBC1",20,0)
 D TECH
"RTN","LRHYBC1",21,0)
 I U[X D END QUIT
"RTN","LRHYBC1",22,0)
 Q:X=""  D SINGLE
"RTN","LRHYBC1",23,0)
 D PTSCAN
"RTN","LRHYBC1",24,0)
 Q:X[U
"RTN","LRHYBC1",25,0)
 K LRPL
"RTN","LRHYBC1",26,0)
 K LRPTARIV
"RTN","LRHYBC1",27,0)
 QUIT
"RTN","LRHYBC1",28,0)
FINDER ;
"RTN","LRHYBC1",29,0)
 S DIC="^VA(200,"
"RTN","LRHYBC1",30,0)
 S DIC(0)="AEMQZ"
"RTN","LRHYBC1",31,0)
 S DIC("A")="Please enter employee number: "
"RTN","LRHYBC1",32,0)
 D ^DIC
"RTN","LRHYBC1",33,0)
 QUIT
"RTN","LRHYBC1",34,0)
TECH ;
"RTN","LRHYBC1",35,0)
 K DIC,LRHYTECH,LRHYDUZ,LRPHLEB,LRRECVR
"RTN","LRHYBC1",36,0)
 K DIR,DIC,DIE,LRARIVE,LRDRAW
"RTN","LRHYBC1",37,0)
 ;
"RTN","LRHYBC1",38,0)
 S X=""
"RTN","LRHYBC1",39,0)
 ;
"RTN","LRHYBC1",40,0)
 I X="" S X=DUZ G PST
"RTN","LRHYBC1",41,0)
 I U[X QUIT
"RTN","LRHYBC1",42,0)
 I $L(X)'=9 K DIC,LRHYTECH,LRHYDUZ,LRPHLEB,LRRECV G TECH
"RTN","LRHYBC1",43,0)
 ;
"RTN","LRHYBC1",44,0)
 ;
"RTN","LRHYBC1",45,0)
 ;
"RTN","LRHYBC1",46,0)
 ;
"RTN","LRHYBC1",47,0)
 K DIC
"RTN","LRHYBC1",48,0)
 K DIC,LRHYTECH,LRHYDUZ
"RTN","LRHYBC1",49,0)
 K Y
"RTN","LRHYBC1",50,0)
 S DIC=200
"RTN","LRHYBC1",51,0)
 S DIC(0)="MQZ"
"RTN","LRHYBC1",52,0)
 D ^DIC
"RTN","LRHYBC1",53,0)
 ;
"RTN","LRHYBC1",54,0)
 W Y
"RTN","LRHYBC1",55,0)
 ;
"RTN","LRHYBC1",56,0)
 I X[U QUIT
"RTN","LRHYBC1",57,0)
PST S Y=DUZ
"RTN","LRHYBC1",58,0)
 S (LRHYDUZ,LRHYTECH,LRPHLEB,LRRECVR)=+Y
"RTN","LRHYBC1",59,0)
 S LRHYDUZ=$P($G(^VA(200,LRHYDUZ,0)),U)
"RTN","LRHYBC1",60,0)
 QUIT
"RTN","LRHYBC1",61,0)
 ;
"RTN","LRHYBC1",62,0)
TIME ;
"RTN","LRHYBC1",63,0)
 ;
"RTN","LRHYBC1",64,0)
 ;
"RTN","LRHYBC1",65,0)
 ;
"RTN","LRHYBC1",66,0)
 S LREND=0
"RTN","LRHYBC1",67,0)
 S DIC="^DPT("
"RTN","LRHYBC1",68,0)
 S DIC(0)="AEMQZ"
"RTN","LRHYBC1",69,0)
 D ^DIC
"RTN","LRHYBC1",70,0)
 S DFN=+Y
"RTN","LRHYBC1",71,0)
 S LRDFN=$G(^DPT(DFN,"LR"))
"RTN","LRHYBC1",72,0)
 D ^VADPT,INP^VADPT
"RTN","LRHYBC1",73,0)
 ;
"RTN","LRHYBC1",74,0)
 QUIT
"RTN","LRHYBC1",75,0)
 ;
"RTN","LRHYBC1",76,0)
SINGLE ;
"RTN","LRHYBC1",77,0)
 ; This block calls up the testing demographics.
"RTN","LRHYBC1",78,0)
 ;  LRHYD123 IS LRUID
"RTN","LRHYBC1",79,0)
 W !!
"RTN","LRHYBC1",80,0)
 S LRACC=""
"RTN","LRHYBC1",81,0)
 I $G(LRHYD123)'="" D EN^LA7ADL(LRHYD123)
"RTN","LRHYBC1",82,0)
 ;
"RTN","LRHYBC1",83,0)
 K LRHYD123
"RTN","LRHYBC1",84,0)
 ;
"RTN","LRHYBC1",85,0)
 K LRHN0,LRHNODE,LRN0,LR0NODE,LRPHLEB
"RTN","LRHYBC1",86,0)
 S X="D"
"RTN","LRHYBC1",87,0)
 D ^LRHYU5
"RTN","LRHYBC1",88,0)
 I LRAN<1 QUIT
"RTN","LRHYBC1",89,0)
SETFILE ;
"RTN","LRHYBC1",90,0)
 I '$D(^LRO(68,LRAA,1,LRAD,1,LRAN,0)) W !,"Doesn't exist." G SINGLE
"RTN","LRHYBC1",91,0)
 S LRUNC=1
"RTN","LRHYBC1",92,0)
 S LRORDT1=$P(^LRO(68,LRAA,1,LRAD,1,LRAN,0),U,4)
"RTN","LRHYBC1",93,0)
 S LRHYD123=$G(^LRO(68,LRAA,1,LRAD,1,LRAN,.3))
"RTN","LRHYBC1",94,0)
 ;  mdofied by Hoak per Joe for prior to free t-4
"RTN","LRHYBC1",95,0)
 I '$O(^LRHY(69.87,"B",LRHYD123,0)) D
"RTN","LRHYBC1",96,0)
 .  S DA=$P(^LRHY(69.87,0),U,3)
"RTN","LRHYBC1",97,0)
 .  S DA=DA+1
"RTN","LRHYBC1",98,0)
 .  S X=LRHYD123
"RTN","LRHYBC1",99,0)
 .  S DIE="^LRHY(69.87,"
"RTN","LRHYBC1",100,0)
 .  S DR=".01///"_X
"RTN","LRHYBC1",101,0)
 .  S DIK=DIE
"RTN","LRHYBC1",102,0)
 .  D ^DIE
"RTN","LRHYBC1",103,0)
 I '$G(DA) S DA=$P(^LRHY(69.87,0),U,3)+1
"RTN","LRHYBC1",104,0)
 S LRUID=LRHYD123
"RTN","LRHYBC1",105,0)
 S $P(^LRHY(69.87,0),U,3)=DA,$P(^LRHY(69.87,0),U,4)=DA
"RTN","LRHYBC1",106,0)
 S LRSPIEN=$O(^LRHY(69.87,"B",LRUID,0)) I $G(LRSPIEN) D
"RTN","LRHYBC1",107,0)
 .  D NOW^%DTC
"RTN","LRHYBC1",108,0)
 .  S LRDT=%
"RTN","LRHYBC1",109,0)
 .  I '$G(LRLABTIM) S LRLABTIM=+$G(^LRO(68,LRAA,1,LRAD,1,LRAN,3))
"RTN","LRHYBC1",110,0)
 .  S LRSCAN=LRLABTIM
"RTN","LRHYBC1",111,0)
 .  K DIE S DIE="^LRHY(69.87," S DR="2///"_LRSCAN S DA=LRSPIEN D ^DIE
"RTN","LRHYBC1",112,0)
 .  K DIE S DIE="^LRHY(69.87," S DR="4///"_LRDT S DA=LRSPIEN D ^DIE
"RTN","LRHYBC1",113,0)
 .  K DIE S DIE="^LRHY(69.87," S DR="6////"_LRHYTECH S DA=LRSPIEN D ^DIE
"RTN","LRHYBC1",114,0)
 .  K DIE S DIE="^LRHY(69.87," S DR="8///"_LRDT S DA=LRSPIEN D ^DIE
"RTN","LRHYBC1",115,0)
 S DIK=DIE D IX1^DIK
"RTN","LRHYBC1",116,0)
ZZ1 ;
"RTN","LRHYBC1",117,0)
 QUIT:$G(XQY0)'["PPOC"
"RTN","LRHYBC1",118,0)
 H 3
"RTN","LRHYBC1",119,0)
 S ^TMP("LRHY ASH",$J,LRAA,LRAD,LRAN)=""
"RTN","LRHYBC1",120,0)
 G SINGLE
"RTN","LRHYBC1",121,0)
 G END
"RTN","LRHYBC1",122,0)
 ;  Adding urgency to the display
"RTN","LRHYBC1",123,0)
 S LRTEST=$O(^LRO(68,LRAA,1,LRAD,1,LRAN,4,0))
"RTN","LRHYBC1",124,0)
 S LRURG=$P($G(^LRO(68,LRAA,1,LRAD,1,LRAN,4,LRTEST,0)),U,2)
"RTN","LRHYBC1",125,0)
 ;
"RTN","LRHYBC1",126,0)
 ; Blink urgency if MED-EMERGE
"RTN","LRHYBC1",127,0)
 W !,$S($D(^LAB(62.05,+LRURG,0)):$P(^(0),U),1:"")," "
"RTN","LRHYBC1",128,0)
 ;
"RTN","LRHYBC1",129,0)
 ;
"RTN","LRHYBC1",130,0)
 D EDIT
"RTN","LRHYBC1",131,0)
 ;
"RTN","LRHYBC1",132,0)
 ;
"RTN","LRHYBC1",133,0)
 I $G(LREND) W !,"Please start over..." K LREND,LRIDTNEW
"RTN","LRHYBC1",134,0)
 D END
"RTN","LRHYBC1",135,0)
 QUIT
"RTN","LRHYBC1",136,0)
 ;
"RTN","LRHYBC1",137,0)
END ;
"RTN","LRHYBC1",138,0)
 K ^TMP("LRHY ASH",$J)
"RTN","LRHYBC1",139,0)
 K LRAA,LRAD,LRAN,LRBLOOD,LRARIVE,LRBLOOD,LRCE,LRDAT,LRDFN,LRIDT
"RTN","LRHYBC1",140,0)
 K LRDLA,LRDLC,LRDPF,LRDRAW,LRDT0,LRDTO,LRHYDUZ,LRHYNISH,LRPRAC
"RTN","LRHYBC1",141,0)
 K LRSN,LRTEST,LRURG,PNM,SSN,VAIN,VADM,LRHYTECH
"RTN","LRHYBC1",142,0)
 QUIT
"RTN","LRHYBC1",143,0)
 ;
"RTN","LRHYBC1",144,0)
EDIT ;
"RTN","LRHYBC1",145,0)
 S LRDFN=$P(^LRO(68,LRAA,1,LRAD,1,LRAN,0),U)
"RTN","LRHYBC1",146,0)
 S LRIDT=$P(^LRO(68,LRAA,1,LRAD,1,LRAN,3),U,5) ; old LRIDT
"RTN","LRHYBC1",147,0)
CHECK ;
"RTN","LRHYBC1",148,0)
 ;
"RTN","LRHYBC1",149,0)
PAST ;
"RTN","LRHYBC1",150,0)
 K LRHYDUZ
"RTN","LRHYBC1",151,0)
 ; look at Micro And CH subscripted tests
"RTN","LRHYBC1",152,0)
 I $D(^LR(LRDFN,"CH",LRIDT)) S LRSS="CH"
"RTN","LRHYBC1",153,0)
 E  S LRSS="MI"
"RTN","LRHYBC1",154,0)
 ;
"RTN","LRHYBC1",155,0)
 ;  run review option here and show it there has been a previous 
"RTN","LRHYBC1",156,0)
 ;  updating of this accession
"RTN","LRHYBC1",157,0)
 ;
"RTN","LRHYBC1",158,0)
 K LRARIVE
"RTN","LRHYBC1",159,0)
 ;
"RTN","LRHYBC1",160,0)
 ;
"RTN","LRHYBC1",161,0)
 W !
"RTN","LRHYBC1",162,0)
 ;  WE need an event to stop non-LRLAB key holders from entering
"RTN","LRHYBC1",163,0)
 ;  LAB ARRIVAL TIME
"RTN","LRHYBC1",164,0)
BACK G:'$D(^XUSEC("LRLAB",DUZ)) THERE
"RTN","LRHYBC1",165,0)
 G THERE
"RTN","LRHYBC1",166,0)
THERE ;
"RTN","LRHYBC1",167,0)
 W !
"RTN","LRHYBC1",168,0)
 K %DT
"RTN","LRHYBC1",169,0)
 D NOW^%DTC
"RTN","LRHYBC1",170,0)
 S %DT="AESRZ"
"RTN","LRHYBC1",171,0)
 S %DT("A")="Please enter updated DRAW/COLLECTION TIME: "
"RTN","LRHYBC1",172,0)
 ;
"RTN","LRHYBC1",173,0)
 ; Only default if lrlab owner
"RTN","LRHYBC1",174,0)
 I +LRDRAW7>0 S LRDRAW7=$$Y2K^LRX(LRDRAW7)
"RTN","LRHYBC1",175,0)
 E  S LRDRAW7=$$Y2K^LRX($P(^LRO(68,LRAA,1,LRAD,1,LRAN,3),U))
"RTN","LRHYBC1",176,0)
 I $D(^XUSEC("LRLAB",DUZ)) S %DT("B")=$P(LRDRAW7,"@")_"@"_$E($P(LRDRAW7,"@",2),1,5)
"RTN","LRHYBC1",177,0)
 ;
"RTN","LRHYBC1",178,0)
 I X="" G THERE
"RTN","LRHYBC1",179,0)
 I $D(DTOUT)!($D(DUOUT)) S LREND=1 QUIT
"RTN","LRHYBC1",180,0)
 I Y=-1 S LRUP="YES"
"RTN","LRHYBC1",181,0)
 E  S LRUP="NO"
"RTN","LRHYBC1",182,0)
 D NOW^%DTC S LRDRAW=%
"RTN","LRHYBC1",183,0)
 ;
"RTN","LRHYBC1",184,0)
 ;
"RTN","LRHYBC1",185,0)
 I $D(^XUSEC("LRLAB",DUZ)) G TIC
"RTN","LRHYBC1",186,0)
 ;
"RTN","LRHYBC1",187,0)
GUY ;  COLLECTOR DEMOGRAPHICS stuff this into LR...99 COMMENT FIELD.
"RTN","LRHYBC1",188,0)
 K LRPON
"RTN","LRHYBC1",189,0)
 S LRHYNISH=$P(^VA(200,LRHYTECH,0),U,2)
"RTN","LRHYBC1",190,0)
 I '$D(^XUSEC("LRLAB",LRHYTECH)) S LRPON=$P($G(^VA(200,LRHYTECH,0)),U)
"RTN","LRHYBC1",191,0)
 W !!!
"RTN","LRHYBC1",192,0)
 ;
"RTN","LRHYBC1",193,0)
 ; This global serves as an interim solution until lab files can
"RTN","LRHYBC1",194,0)
 ; be updated
"RTN","LRHYBC1",195,0)
TIC ;
"RTN","LRHYBC1",196,0)
 S LRARIVE=$G(LRARIVE,$P(^LRO(68,LRAA,1,LRAD,1,LRAN,3),U,3))
"RTN","LRHYBC1",197,0)
 S LRPTARIV=$G(LRPTARIV,LRARIVE)
"RTN","LRHYBC1",198,0)
 ;
"RTN","LRHYBC1",199,0)
 S LRAAX5=LRAA,LRADX6=LRAD,LRANX6=LRAN
"RTN","LRHYBC1",200,0)
 S LRHYDUZ=LRHYTECH
"RTN","LRHYBC1",201,0)
SET ;
"RTN","LRHYBC1",202,0)
 S $P(^LRO(69,LRDAT,1,LRSN,3),U)=$G(LRDRAW)
"RTN","LRHYBC1",203,0)
 S $P(^LRO(68,LRAA,1,LRAD,1,LRAN,3),U,3)=$G(LRDRAW)
"RTN","LRHYBC1",204,0)
 S $P(^LRO(68,LRAA,1,LRAD,1,LRAN,3),U)=$G(LRDRAW)
"RTN","LRHYBC1",205,0)
 ;
"RTN","LRHYBC1",206,0)
 H 2
"RTN","LRHYBC1",207,0)
 G SINGLE
"RTN","LRHYBC1",208,0)
 QUIT
"RTN","LRHYBC1",209,0)
PTSCAN ;
"RTN","LRHYBC1",210,0)
 ;
"RTN","LRHYBC1",211,0)
 W !!,"Please swipe PATIENT ID CARD or Type SSN: "
"RTN","LRHYBC1",212,0)
 R X:9999999 W !
"RTN","LRHYBC1",213,0)
 Q:X[U
"RTN","LRHYBC1",214,0)
 Q:X=""
"RTN","LRHYBC1",215,0)
 I $L(X)'=9 W !,"NO SUCH PATIENT" QUIT
"RTN","LRHYBC1",216,0)
 S DFN=$O(^DPT("SSN",X,0))
"RTN","LRHYBC1",217,0)
 S PNM=$P(^DPT(DFN,0),U) W !,PNM
"RTN","LRHYBC1",218,0)
 S LRDFN=$G(^DPT(DFN,"LR"))
"RTN","LRHYBC1",219,0)
ACCNX ;
"RTN","LRHYBC1",220,0)
 S LRAA=0
"RTN","LRHYBC1",221,0)
 F  S LRAA=$O(^TMP("LRHY ASH",$J,LRAA)) Q:+LRAA'>0  D
"RTN","LRHYBC1",222,0)
 .  S LRAD=0
"RTN","LRHYBC1",223,0)
 .  F  S LRAD=$O(^TMP("LRHY ASH",$J,LRAA,LRAD)) Q:+LRAD'>0  D
"RTN","LRHYBC1",224,0)
 ..  S LRAN=0
"RTN","LRHYBC1",225,0)
 ..  F  S LRAN=$O(^TMP("LRHY ASH",$J,LRAA,LRAD,LRAN)) Q:+LRAN'>0  D P2
"RTN","LRHYBC1",226,0)
 QUIT
"RTN","LRHYBC1",227,0)
P2 ;
"RTN","LRHYBC1",228,0)
 N LRX S LRX=0
"RTN","LRHYBC1",229,0)
 F  S LRX=$O(^LRO(68,LRAA,1,LRAD,1,LRAN,4,"B",LRX)) Q:+LRX'>0  D
"RTN","LRHYBC1",230,0)
 .  I LRDFN'=+^LRO(68,LRAA,1,LRAD,1,LRAN,0) W !,"WRONG PATIENT" QUIT
"RTN","LRHYBC1",231,0)
 .  W !,^LRO(68,LRAA,1,LRAD,1,LRAN,.2),?20,$P(^LAB(60,LRX,0),U)
"RTN","LRHYBC1",232,0)
 .  W !,"EVERYTHING MATCHES UP ",$P($P(^VA(200,LRHYTECH,0),U),",",2),", GREAT JOB!"
"RTN","LRHYBC1",233,0)
 .  H 3
"RTN","LRHYBC1",234,0)
 QUIT
"RTN","LRHYBC1",235,0)
LABIN ;
"RTN","LRHYBC1",236,0)
 D ^LRHYU4
"RTN","LRHYBC1",237,0)
 ;
"RTN","LRHYBC1",238,0)
 Q:LRAN=-1
"RTN","LRHYBC1",239,0)
 ;
"RTN","LRHYBC1",240,0)
 I $L(X)'=10 S X=$G(^LRO(68,LRAA,1,LRAD,1,LRAN,.3))
"RTN","LRHYBC1",241,0)
 S LRUID=X
"RTN","LRHYBC1",242,0)
 S DA=$O(^LRHY(69.87,"B",LRUID,0))
"RTN","LRHYBC1",243,0)
 I '$G(DA) W !,"Incorrect UID try again..." H 2 G LABIN
"RTN","LRHYBC1",244,0)
 D NOW^%DTC K LRLABIN S LRLABIN=%
"RTN","LRHYBC1",245,0)
 K DIE
"RTN","LRHYBC1",246,0)
 S DIE=69.87
"RTN","LRHYBC1",247,0)
 S DR="10///"_LRLABIN_";12///"_DUZ
"RTN","LRHYBC1",248,0)
 D ^DIE
"RTN","LRHYBC1",249,0)
 G LABIN
"RTN","LRHYBC1",250,0)
DISPLAY ;
"RTN","LRHYBC1",251,0)
 S X="D"
"RTN","LRHYBC1",252,0)
 D ^LRHYU5 I 'LRAN W !,"MUST ENTER UID, TRY AGAIN" H 2 QUIT
"RTN","LRHYBC1",253,0)
 S LRUID=X
"RTN","LRHYBC1",254,0)
 S ZTRTN="D1^LRHYBC1" D IO^LRWU
"RTN","LRHYBC1",255,0)
 QUIT
"RTN","LRHYBC1",256,0)
D1 ;
"RTN","LRHYBC1",257,0)
 I $L(LRUID)'=10 S LRUID=X
"RTN","LRHYBC1",258,0)
 S LRDA=$O(^LRHY(69.87,"B",LRUID,0))
"RTN","LRHYBC1",259,0)
 ;
"RTN","LRHYBC1",260,0)
 ; FIX FOR NOT RUN PL
"RTN","LRHYBC1",261,0)
 I +$G(LRDA)'>0 W !,"NO Entry in HOWDY SPECIMEN TIMES BY UID File. Run Phlebotomy log." H 1 QUIT
"RTN","LRHYBC1",262,0)
 I '$G(^LRHY(69.87,LRDA,2)) D
"RTN","LRHYBC1",263,0)
 .  K DA,DR S DIE="^LRHY(69.87,",DA=LRDA,DR="2///"_$P(^LRO(68,LRAA,1,LRAD,1,LRAN,3),U) D ^DIE
"RTN","LRHYBC1",264,0)
 W !,"UID: ",LRUID
"RTN","LRHYBC1",265,0)
 W !,"WALK-UP SCAN TIME:",?50,$$Y2K^LRX(^LRHY(69.87,LRDA,2))
"RTN","LRHYBC1",266,0)
 W !,"TIME LABELS PRINTED:",?50,$$Y2K^LRX(^LRHY(69.87,LRDA,4))
"RTN","LRHYBC1",267,0)
 W !,"COLLECTOR:",?50,?50,$P(^VA(200,^LRHY(69.87,LRDA,6),0),U)
"RTN","LRHYBC1",268,0)
 W !,"TIME SPECIMEN COLLECTED:",?50,$$Y2K^LRX(^LRHY(69.87,LRDA,8))
"RTN","LRHYBC1",269,0)
 Q:'$D(^LRHY(69.87,LRDA,10))
"RTN","LRHYBC1",270,0)
 W !,"TIME SCANNED INTO LAB:",?50,$$Y2K^LRX(^LRHY(69.87,LRDA,10))
"RTN","LRHYBC1",271,0)
 I $G(^LRHY(69.87,LRDA,12)) W !,"RECEIVED INTO LAB BY: ",?50,$P(^VA(200,^LRHY(69.87,LRDA,12),0),U)
"RTN","LRHYBC1",272,0)
 QUIT
"RTN","LRHYBC1",273,0)
BINBRD ;
"RTN","LRHYBC1",274,0)
 S ZTRTN="D2^LRHYBC1",ZTSAVE("PNM")=""
"RTN","LRHYBC1",275,0)
 S LRBBRD=$O(^LRHY(69.86,7,54,"B",0)) I $G(LRBBRD) S ZTIO=LRBBRD,ZTDTH=$H S:$D(ZTQUEUED) ZTREQ="@" D ^%ZTLOAD
"RTN","LRHYBC1",276,0)
 QUIT
"RTN","LRHYBC1",277,0)
D2 ;
"RTN","LRHYBC1",278,0)
 U IO
"RTN","LRHYBC1",279,0)
 W !,"PT:",PNM
"RTN","LRHYBC1",280,0)
 D ^%ZISC
"RTN","LRHYBC1",281,0)
 QUIT
"RTN","LRHYBC9")
0^9^B188141^n/a
"RTN","LRHYBC9",1,0)
LRHYBC9 ;DALOI/HOAK - UTILITY FOR LAB HOWDY ;10/14/93 16:02
"RTN","LRHYBC9",2,0)
 ;;5.2;LAB SERVICE;**405**;Sep 27, 1994;Build 93
"RTN","LRHYBC9",3,0)
 ;
"RTN","LRHYBC9",4,0)
SCROLON(LRHYTM,LRHYBM) ;
"RTN","LRHYBC9",5,0)
 ;MAKES A SCROLLING REGION ON THE SCREEN
"RTN","LRHYBC9",6,0)
 ;LRHYTM=TOP MARGIN(Y), LRHYBM=BOTTOM MARGIN(Y)
"RTN","LRHYBC9",7,0)
 ;
"RTN","LRHYBC9",8,0)
 D ENS^%ZISS
"RTN","LRHYBC9",9,0)
 S IOTM=LRHYTM,IOBM=LRHYBM
"RTN","LRHYBC9",10,0)
 W @IOSTBM
"RTN","LRHYBC9",11,0)
 Q
"RTN","LRHYBC9",12,0)
SCROLOFF() ;
"RTN","LRHYBC9",13,0)
 ;RETURNS SCREEN TO NORMAL SETTINGS Y=0 to 24
"RTN","LRHYBC9",14,0)
 D ENS^%ZISS
"RTN","LRHYBC9",15,0)
 S IOTM=0,IOBM=24
"RTN","LRHYBC9",16,0)
 W @IOSTBM
"RTN","LRHYBC9",17,0)
 D KILL^%ZISS
"RTN","LRHYBC9",18,0)
 Q
"RTN","LRHYBL1")
0^10^B187896^n/a
"RTN","LRHYBL1",1,0)
LRHYBL1 ;DALOI/HOAK - HOWDY NETWORK HELP ;9/26/2002
"RTN","LRHYBL1",2,0)
 ;;5.2;LAB SERVICE;**405**;Sep 27, 1994;Build 93
"RTN","LRHYBL1",3,0)
 ;
"RTN","LRHYBL1",4,0)
 ; find the subtype from zis(2 set into LRLABLIO
"RTN","LRHYBL1",5,0)
 ;
"RTN","LRHYBL1",6,0)
 Q:'$G(^%ZIS(1,LRDEV,"SUBTYPE"))
"RTN","LRHYBL1",7,0)
 S LRLABSTP=$G(^%ZIS(1,LRDEV,"SUBTYPE"))
"RTN","LRHYBL1",8,0)
 S LRLABSTP=$P(^%ZIS(2,LRLABSTP,0),U)
"RTN","LRHYBL1",9,0)
 QUIT
"RTN","LRHYBLD")
0^11^B5635430^n/a
"RTN","LRHYBLD",1,0)
LRHYBLD ;DALOI/HOAK - PRINT ORDER LABELS FOR HOWDY ;8/28/2005
"RTN","LRHYBLD",2,0)
 ;;5.2;LAB SERVICE;**405**;Sep 27, 1994;Build 93
"RTN","LRHYBLD",3,0)
 ;
"RTN","LRHYBLD",4,0)
 ; This routine has been modified by the
"RTN","LRHYBLD",5,0)
 ; NTXHCS VALOR Clinical Applications Team to be used
"RTN","LRHYBLD",6,0)
 ; with the Howdy Phlebotomy Patient Log-in Process.
"RTN","LRHYBLD",7,0)
 ;
"RTN","LRHYBLD",8,0)
 ;  from LRHYA
"RTN","LRHYBLD",9,0)
ENT ;
"RTN","LRHYBLD",10,0)
 ;  Howdy routine for printing order labels
"RTN","LRHYBLD",11,0)
 ;  Make sure printer is ID'd sufficiently
"RTN","LRHYBLD",12,0)
 ;
"RTN","LRHYBLD",13,0)
 D ^LRHYBL1 ; get subtype of printer
"RTN","LRHYBLD",14,0)
 ;
"RTN","LRHYBLD",15,0)
ID I $G(LRLABLIO)="" D
"RTN","LRHYBLD",16,0)
 .  S LRLABLIO=$P(^%ZIS(1,LRDEV,0),U)
"RTN","LRHYBLD",17,0)
 .  I $G(LRLABSTP)'="" S LRLABLIO=LRLABLIO_";"_LRLABSTP
"RTN","LRHYBLD",18,0)
 .  E  S LRLABLIO=LRLABLIO_";P-OTC560/BARCODE;132;30"
"RTN","LRHYBLD",19,0)
 ;
"RTN","LRHYBLD",20,0)
 ;
"RTN","LRHYBLD",21,0)
 S ZTRTN="BACK^LRHYBLD",ZTDTH=$H,ZTDESC="LAB LABELS"
"RTN","LRHYBLD",22,0)
 S ZTIO=LRLABLIO,ZTSAVE("LR*")=""
"RTN","LRHYBLD",23,0)
 S:$D(ZTQUEUED) ZTREQ="@" D ^%ZTLOAD
"RTN","LRHYBLD",24,0)
 QUIT
"RTN","LRHYBLD",25,0)
 ;
"RTN","LRHYBLD",26,0)
 ;
"RTN","LRHYBLD",27,0)
BACK ;
"RTN","LRHYBLD",28,0)
 ;  after task come back here
"RTN","LRHYBLD",29,0)
 ;
"RTN","LRHYBLD",30,0)
 ;  find the best label routine
"RTN","LRHYBLD",31,0)
 I $D(ZTQUEUED) S ZTREQ="@"
"RTN","LRHYBLD",32,0)
 ; from site file
"RTN","LRHYBLD",33,0)
 S LRLABEL="^LRLABEL"_$S($D(^LAB(69.9,1,3)):$P(^(3),U,3),1:"")
"RTN","LRHYBLD",34,0)
 ; from Howdy site file
"RTN","LRHYBLD",35,0)
 I $G(^LRHY(69.86,LRHYSITE,11))'="" S LRLABEL="^"_$G(^LRHY(69.86,LRHYSITE,11)) ;order label rtn
"RTN","LRHYBLD",36,0)
 ; default printer routine
"RTN","LRHYBLD",37,0)
 ;
"RTN","LRHYBLD",38,0)
 N X S X=$P(LRLABEL,U,2) X ^%ZOSF("TEST") I '$T S LRLABEL="^LRLABEL"_$S($D(^LAB(69.9,1,3)):$P(^(3),U,3),1:"")
"RTN","LRHYBLD",39,0)
BC ;
"RTN","LRHYBLD",40,0)
 S LRBAR0=$S($L($G(^%ZIS(2,+IOST(0),"BAR0"))):^("BAR0"),1:"$C(32)")
"RTN","LRHYBLD",41,0)
 S LRBAR1=$S($L($G(^%ZIS(2,+IOST(0),"BAR1"))):^("BAR1"),1:"$C(32)")
"RTN","LRHYBLD",42,0)
 K LRBAR S LRLABLIO=IO
"RTN","LRHYBLD",43,0)
 ;
"RTN","LRHYBLD",44,0)
 ;
"RTN","LRHYBLD",45,0)
 ;  SET all variables for label routine
"RTN","LRHYBLD",46,0)
TST ;
"RTN","LRHYBLD",47,0)
 S LRTST=LRTSTS
"RTN","LRHYBLD",48,0)
 D INIT
"RTN","LRHYBLD",49,0)
 K ZTQUEUED,ZTREQ,LRBAR,LRLABEL,LRLABLIO
"RTN","LRHYBLD",50,0)
 QUIT
"RTN","LRHYBLD",51,0)
INIT ;
"RTN","LRHYBLD",52,0)
 K PNM,SSN,LRDPF D PT^LRX S LRDAT=$$Y2K^LRX(LR3DTN)
"RTN","LRHYBLD",53,0)
 S LRORD=$G(^LRO(69,LR3DTN,1,LR3SN,.1))
"RTN","LRHYBLD",54,0)
 S LRAN=$G(LRORD)
"RTN","LRHYBLD",55,0)
 S LRUID=$G(LRORD)
"RTN","LRHYBLD",56,0)
 S LRXL="" S LRPREF=$G(LRPREF,0)
"RTN","LRHYBLD",57,0)
 S LRACC=$G(LRACC,LRORD)
"RTN","LRHYBLD",58,0)
 S LRINFW=$G(LRINFW,1)
"RTN","LRHYBLD",59,0)
 S LRCE=LRORD
"RTN","LRHYBLD",60,0)
 S LRTUBE=$P(^LRO(69,LR3DTN,1,LR3SN,0),U,3)
"RTN","LRHYBLD",61,0)
 S LRTUBE=$E($P(^LAB(62,LRTUBE,0),U),1,11)
"RTN","LRHYBLD",62,0)
 S LRTNM=$E($P(^LAB(60,LRTST,0),U),1,10) S LRURGT="ROUTINE"
"RTN","LRHYBLD",63,0)
 S LRURGA=LRURGT
"RTN","LRHYBLD",64,0)
 S LRURG=LRURGT
"RTN","LRHYBLD",65,0)
 S LRTXT=LRTNM
"RTN","LRHYBLD",66,0)
 S LRTOP=LRTUBE,LRTS(LRTST)=LRTNM
"RTN","LRHYBLD",67,0)
 S LRLLOC="LAB"
"RTN","LRHYBLD",68,0)
 D @LRLABEL
"RTN","LRHYBLD",69,0)
 QUIT
"RTN","LRHYBLD",70,0)
 Q
"RTN","LRHYDEL")
0^12^B58771394^n/a
"RTN","LRHYDEL",1,0)
LRHYDEL ;DALOI/HOAK - HOWDY DEL A TEST ;8/28/2005
"RTN","LRHYDEL",2,0)
 ;;5.2;LAB SERVICE;**405**;Sep 27, 1994;Build 93
"RTN","LRHYDEL",3,0)
 ;
"RTN","LRHYDEL",4,0)
 ;
"RTN","LRHYDEL",5,0)
 ;Cancel tests - Test are no longer deleted, instead the status is changed to Not Performed.
"RTN","LRHYDEL",6,0)
EN ;
"RTN","LRHYDEL",7,0)
 D ^LRPARAM Q:$G(LREND)
"RTN","LRHYDEL",8,0)
 I '$D(LRLABKY) W !?5,"You are not authorized to change test status.",!,$C(7) S LREND=1 Q
"RTN","LRHYDEL",9,0)
 K LRXX,LRSCNXB W @IOF
"RTN","LRHYDEL",10,0)
 F  S (LREND,LRNOP)=0 D FIX D  I $G(LREND) D END Q
"RTN","LRHYDEL",11,0)
 . I $G(LREND) D END S LREND=1 Q
"RTN","LRHYDEL",12,0)
 . K DIC D:'$G(LRNOP) CHG D END
"RTN","LRHYDEL",13,0)
 Q
"RTN","LRHYDEL",14,0)
FIX S (LREND,LRNOP)=0,LRNOW=$$NOW^XLFDT
"RTN","LRHYDEL",15,0)
 W ! S LRACC=1 D LRACC Q:$G(LRNOP)
"RTN","LRHYDEL",16,0)
 K LRACC,LRNATURE I $G(LRAN)<1 S LREND=1 Q
"RTN","LRHYDEL",17,0)
 I '$P($G(^LRO(68,+$G(LRAA),1,+$G(LRAD),1,+$G(LRAN),0)),U,2) W !?5,"Accession has no Test ",! S LRNOP=1 Q
"RTN","LRHYDEL",18,0)
 L +^LRO(68,LRAA,1,LRAD,1,LRAN):$G(DILOCKTM,3) I '$T W !,"Someone else is working on this accession",! S LRNOP=1 Q
"RTN","LRHYDEL",19,0)
 S LRX=^LRO(68,LRAA,1,LRAD,1,LRAN,0),LRACN=$P(^(.2),U),LRUID=$P(^(.3),U)
"RTN","LRHYDEL",20,0)
 S LRDFN=+LRX,LRSN=+$P(LRX,U,5),LRODT=+$P(LRX,U,4)
"RTN","LRHYDEL",21,0)
 S LRDPF=$P(^LR(LRDFN,0),U,2),DFN=$P(^(0),U,3)
"RTN","LRHYDEL",22,0)
 D PT^LRX W !,PNM,?30,SSN
"RTN","LRHYDEL",23,0)
 S LRIDT=$P($G(^LRO(68,LRAA,1,LRAD,1,LRAN,3)),U,5) L +^LR(LRDFN,LRSS,LRIDT):$G(DILOCKTM,3) I '$T W !,"Someone else is working on this data." L -^LRO(68,LRAA,1,LRAD,1,LRAN) S LRNOP=1 Q
"RTN","LRHYDEL",24,0)
 I '$G(^LR(LRDFN,LRSS,LRIDT,0)) W !?5," Can't find Lab Data for this accession",! D UNLOCK S LRNOP=1 Q
"RTN","LRHYDEL",25,0)
 I LRODT,LRSN,$D(^LRO(69,LRODT,1,LRSN,0))#2 D
"RTN","LRHYDEL",26,0)
 . N LRACN,LRAA,LRAD
"RTN","LRHYDEL",27,0)
 . D SHOW^LROS
"RTN","LRHYDEL",28,0)
 K DIR S DIR(0)="E" D ^DIR S:$E(X)=U LRNOP=1 Q:$G(LRNOP)
"RTN","LRHYDEL",29,0)
FX1 ;
"RTN","LRHYDEL",30,0)
 D SHOWTST
"RTN","LRHYDEL",31,0)
 Q
"RTN","LRHYDEL",32,0)
CHG K LRCTST,DIC W !
"RTN","LRHYDEL",33,0)
 S:'$D(DIC("A")) DIC("A")="Change which LABORATORY TEST: "
"RTN","LRHYDEL",34,0)
 S DIC="^LRO(68,"_LRAA_",1,"_LRAD_",1,"_LRAN_",4,",DIC("S")="I '$L($P(^(0),U,5))",DIC(0)="AEMOQ"
"RTN","LRHYDEL",35,0)
 F  D ^DIC Q:Y<1  S LRCTST(+Y)=$P(^LAB(60,+Y,0),U),DIC("A")="Select another test: "
"RTN","LRHYDEL",36,0)
 K DIC I '$O(LRCTST(0)) D  Q
"RTN","LRHYDEL",37,0)
 . L -^LR(LRDFN,LRSS,LRIDT) L -^LRO(68,LRAA,1,LRAD,1,LRAN)
"RTN","LRHYDEL",38,0)
 . W !?5,"No Test Selected",!
"RTN","LRHYDEL",39,0)
 I '$L(LRODT)&'$L(LRSN) W !,"NO CHANGE" D UNLOCK,END Q
"RTN","LRHYDEL",40,0)
 K LRCCOM S LRCCOM="",LREND=0 I '$D(^LRO(69,LRODT,1,LRSN,0))#2 W !?5,"There is no Order for this Accession",! D UNLOCK,END Q
"RTN","LRHYDEL",41,0)
 W @IOF,!!?5,"Change Accession : ",LRACN,?40,"UID: ",LRUID
"RTN","LRHYDEL",42,0)
 S I=0 F  S I=$O(LRCTST(I)) Q:I<1  W !?10,LRCTST(I)
"RTN","LRHYDEL",43,0)
 D FX2 Q:$G(LREND)
"RTN","LRHYDEL",44,0)
 S LRTSTS=0 F  S LRTSTS=$O(LRCTST(LRTSTS)) Q:LRTSTS<1  D
"RTN","LRHYDEL",45,0)
 . Q:'$D(^LAB(60,LRTSTS,0))#2  S LRTNM=$P(^(0),U)
"RTN","LRHYDEL",46,0)
 . S LRORDTST=$P(^LRO(68,LRAA,1,LRAD,1,LRAN,4,LRTSTS,0),U,9) D SET
"RTN","LRHYDEL",47,0)
 . W:'$G(LREND) !?5,"[ "_LRTNM_" ] ",$S('$D(LRLABKY):" Marked Canceled by Floor",1:" Marked Not Performed"),!
"RTN","LRHYDEL",48,0)
 S LREND=0 K LRCTST
"RTN","LRHYDEL",49,0)
 Q
"RTN","LRHYDEL",50,0)
SHOWTST ;
"RTN","LRHYDEL",51,0)
 N LRI,LRN,DIR,LRY,LRIC,X
"RTN","LRHYDEL",52,0)
 S DIR(0)="E"
"RTN","LRHYDEL",53,0)
 D DEMO
"RTN","LRHYDEL",54,0)
 S LRN=0,LRI=0 F  S LRI=$O(^LRO(68,LRAA,1,LRAD,1,LRAN,4,LRI)) Q:LRI<1!($G(LRY))  D
"RTN","LRHYDEL",55,0)
 . S LRIC=$P($G(^LRO(68,LRAA,1,LRAD,1,LRAN,4,LRI,0)),U,4,6) Q:'$D(^LAB(60,+LRI,0))#2  W !,?5,$P(^(0),U) S LRN=LRN+1 I LRIC  D
"RTN","LRHYDEL",56,0)
 . . W ?35,"  "_$S($L($P(LRIC,U,3)):$P(LRIC,U,3),1:"Completed")_"  "_$$FMTE^XLFDT($P(LRIC,U,2),"5FMPZ")_" by "_$P(LRIC,U)
"RTN","LRHYDEL",57,0)
 . I LRN>18 D ^DIR S:$E(X)=U LRY=1 Q:$G(LRY)  D DEMO S LRN=0
"RTN","LRHYDEL",58,0)
 S X=^LRO(68,LRAA,1,LRAD,1,LRAN,0),LRODT=$P(X,U,4),LRSN=$P(X,U,5)
"RTN","LRHYDEL",59,0)
 Q
"RTN","LRHYDEL",60,0)
DEMO W !,PNM,?50,SSN
"RTN","LRHYDEL",61,0)
 W !,"TESTS ON ACCESSION: ",LRACN,?40,"UID: ",LRUID
"RTN","LRHYDEL",62,0)
 Q
"RTN","LRHYDEL",63,0)
SET ;
"RTN","LRHYDEL",64,0)
 S:'$G(LRNOW) LRNOW=$$NOW^XLFDT
"RTN","LRHYDEL",65,0)
 S LRLLOC=$P(^LRO(69,LRODT,1,LRSN,0),U,7) D
"RTN","LRHYDEL",66,0)
 . N II,X,LRI,LRSTATUS,OCXTRACE
"RTN","LRHYDEL",67,0)
 . S:$G(LRDBUG) OCXTRACE=1
"RTN","LRHYDEL",68,0)
 . S LRI=0 F  S LRI=$O(^LRO(69,LRODT,1,LRSN,2,LRI)) Q:LRI<1  I $D(^(LRI,0))#2,LRTSTS=+^(0) S (LRSTATUS,II(LRTSTS))="" D  K II
"RTN","LRHYDEL",69,0)
 ..  Q:$P(^LRO(69,LRODT,1,LRSN,2,LRI,0),U,12)
"RTN","LRHYDEL",70,0)
 . . Q:$P(^LRO(69,LRODT,1,LRSN,2,LRI,0),U,11)  S ORIFN=$P(^(0),U,7)
"RTN","LRHYDEL",71,0)
 . . S X=1+$O(^LRO(69,LRODT,1,LRSN,2,LRI,1.1,"A"),-1),X(1)=$P($G(^(0)),U,4)
"RTN","LRHYDEL",72,0)
 . . S ^LRO(69,LRODT,1,LRSN,2,LRI,1.1,X,0)=$P($G(LRNATURE),U,5)_": "_LRCCOM,X=X+1,X(1)=X(1)+1
"RTN","LRHYDEL",73,0)
 . . S ^LRO(69,LRODT,1,LRSN,2,LRI,1.1,X,0)="*NP Action:"_$$FMTE^XLFDT(LRNOW,"5MZ")
"RTN","LRHYDEL",74,0)
 . . S ^LRO(69,LRODT,1,LRSN,2,LRI,1.1,0)="^^"_X_"^"_X(1)_"^"_DT
"RTN","LRHYDEL",75,0)
 . . I $G(ORIFN),$D(II) D NEW^LR7OB1(LRODT,LRSN,$S($G(LRMSTATI)=""!($G(LRMSTATI)=1):"OC",1:"SC"),$G(LRNATURE),.II,LRSTATUS)
"RTN","LRHYDEL",76,0)
 . . I ORIFN,$$VER^LR7OU1<3 D DC^LRCENDE1
"RTN","LRHYDEL",77,0)
 . . S $P(^LRO(69,LRODT,1,LRSN,2,LRI,0),"^",9)="CA",$P(^(0),U,10)="L",$P(^(0),U,11)=DUZ
"RTN","LRHYDEL",78,0)
 . . S:$D(^LRO(69,LRODT,1,LRSN,"PCE")) ^LRO(69,"AE",DUZ,LRODT,LRSN,LRI)=""
"RTN","LRHYDEL",79,0)
 K ORIFN,ORSTS
"RTN","LRHYDEL",80,0)
 I $D(^LRO(68,+$G(LRAA),1,+$G(LRAD),1,+$G(LRAN),0))#2,$D(^(4,$G(LRTSTS),0))#2 S $P(^(0),U,4,6)=DUZ_U_LRNOW_U_$S($G(LRMERG):"*Merged",1:"*Not Performed") D
"RTN","LRHYDEL",81,0)
 . S LROWDT=$P($G(^LRO(68,LRAA,1,LRAD,1,LRAN,0)),U,3) I LROWDT,LROWDT'=LRAD D ROL Q
"RTN","LRHYDEL",82,0)
 . S LROWDT=+$G(^LRO(68,LRAA,1,LRAD,1,LRAN,9)) I LROWDT D ROL
"RTN","LRHYDEL",83,0)
 Q:$G(LRSS)["MI"
"RTN","LRHYDEL",84,0)
 I $G(LRIDT),$L($G(LRSS)),$L(LRCCOM),$G(^LR(LRDFN,LRSS,LRIDT,0)) D
"RTN","LRHYDEL",85,0)
 .  Q:$G(LRSS)["MI"
"RTN","LRHYDEL",86,0)
 . D 63(LRDFN,LRSS,LRIDT,LRTNM,LRCCOM)
"RTN","LRHYDEL",87,0)
 . D:'$D(^LRO(68,LRAA,1,LRAD,1,"AD",DT,LRAN)) XREF^LRVER3A
"RTN","LRHYDEL",88,0)
 D EN^LA7ADL($P($G(^LRO(68,+$G(LRAA),1,+$G(LRAD),1,+$G(LRAN),.3)),"^")) ; Put in list to check for auto download.
"RTN","LRHYDEL",89,0)
 Q
"RTN","LRHYDEL",90,0)
ROL ;
"RTN","LRHYDEL",91,0)
 Q:+$G(^LRO(68,LRAA,1,LROWDT,1,LRAN,0))'=LRDFN  Q:'$D(^(4,LRTSTS,0))#2
"RTN","LRHYDEL",92,0)
 S $P(^LRO(68,LRAA,1,LROWDT,1,LRAN,4,LRTSTS,0),U,4,6)=DUZ_U_LRNOW_U_"*Not performed"
"RTN","LRHYDEL",93,0)
 Q
"RTN","LRHYDEL",94,0)
LRACC K LRAN
"RTN","LRHYDEL",95,0)
 S LREND=0,LREXMPT=1 D ^LRWU4 K LREXMPT
"RTN","LRHYDEL",96,0)
 Q:'$G(LRAA)!('$G(LRAN))!('$D(^LRO(68,LRAA,0))#2)
"RTN","LRHYDEL",97,0)
 S DA(2)=LRAA,DA(1)=LRAD,LRSS=$P(^LRO(68,LRAA,0),U,2)
"RTN","LRHYDEL",98,0)
 I '$L(LRSS) S LRAN=0,LRNOP=1 W !?5,"No Subscript for this Accession Area ",!!
"RTN","LRHYDEL",99,0)
 Q
"RTN","LRHYDEL",100,0)
LREND S LREND=1 Q
"RTN","LRHYDEL",101,0)
UNLOCK ;
"RTN","LRHYDEL",102,0)
 L -(^LR($G(LRDFN),$G(LRSS),$G(LRIDT)),^LRO(68,$G(LRAA),1,$G(LRAD),1,$G(LRAN))) D END Q
"RTN","LRHYDEL",103,0)
EXIT ;
"RTN","LRHYDEL",104,0)
 K LRSCNX,LRNOECHO,LRACN,LRLABRV,LRNOW
"RTN","LRHYDEL",105,0)
END ;
"RTN","LRHYDEL",106,0)
 K LRCCOM0,LRCCOM1,LRCCOMX,LREND,LRI,LRL,LRNATURE,LRNOP,LRSCN,LRMSTATI,LRORDTST,LROWDT,LRPRAC,LRTSTS,LRUID
"RTN","LRHYDEL",107,0)
 K Q9,LRXX,DIR,LRCOM,LRAGE,DI,LRCTST,LRACN,LRACN0,LRDOC,LRLL,LRNOW,LRDBUG
"RTN","LRHYDEL",108,0)
 K LROD0,LROD1,LROD3,LROOS,LROS,LROSD,LROT,LRROD,LRTT,X4
"RTN","LRHYDEL",109,0)
 D KVA^VADPT,END^LRTSTJAM
"RTN","LRHYDEL",110,0)
 Q
"RTN","LRHYDEL",111,0)
FX2 ;
"RTN","LRHYDEL",112,0)
 S LRLABKY="" G FX3
"RTN","LRHYDEL",113,0)
 S LRNATURE="W"
"RTN","LRHYDEL",114,0)
 S LREND=0
"RTN","LRHYDEL",115,0)
 S LRL=52 I '$D(LRLABKY) G FX3
"RTN","LRHYDEL",116,0)
 K DIR S (LRCOM,LRCCOM1)="" W !
"RTN","LRHYDEL",117,0)
 S DIR(0)="62.5,5",DIR("A")="Select NP comment Lab Description screen  " S:$L($G(LRSCNXB)) DIR("B")=LRSCNXB
"RTN","LRHYDEL",118,0)
 S DIR("?")="Select Lab Description file screen to be used to expand your NP reason."
"RTN","LRHYDEL",119,0)
 S DIR("?",1)=" Press return to accept the default expansion screens."
"RTN","LRHYDEL",120,0)
 S DIR("?",2)="  "
"RTN","LRHYDEL",121,0)
 S DIR("?",3)="Select the Lab Description file expansion screen."
"RTN","LRHYDEL",122,0)
 S DIR("?",4)="The default expansion screens are GENERAL, ORDER and LAB"
"RTN","LRHYDEL",123,0)
 S DIR("?",5)="You may select addition lab description expansion screens"
"RTN","LRHYDEL",124,0)
 S DIR("?",6)="Press return if you want to only use the default screens"
"RTN","LRHYDEL",125,0)
 S DIR("?",7)=" "
"RTN","LRHYDEL",126,0)
 K LRSCNXB,LRNOECHO
"RTN","LRHYDEL",127,0)
 S:'$D(LRSCN) LRSCN="AKL"
"RTN","LRHYDEL",128,0)
 S X="LAB"
"RTN","LRHYDEL",129,0)
 I $E(X)="@" S LRSCN="AKL",LRSCNXB="" G FX2
"RTN","LRHYDEL",130,0)
 I $L(X) S LRSCNXB=X,LRSCN=LRSCN_1
"RTN","LRHYDEL",131,0)
FX3 K DIR W !
"RTN","LRHYDEL",132,0)
 ;
"RTN","LRHYDEL",133,0)
 S LRL=1
"RTN","LRHYDEL",134,0)
 K LRLABKY
"RTN","LRHYDEL",135,0)
 S X="DUPLICATE"
"RTN","LRHYDEL",136,0)
 S DIR("A")=$S('$D(LRLABKY):"Reason for Cancel",1:"Not Perform Reason ") S:$L($G(LRXX)) DIR("B")=$G(LRXX)
"RTN","LRHYDEL",137,0)
 S DIR(0)="FU^1:"_LRL_"^"
"RTN","LRHYDEL",138,0)
 S (LRCCOM,LRCCOMX)=X
"RTN","LRHYDEL",139,0)
 ;
"RTN","LRHYDEL",140,0)
 I '$D(X) G FX2
"RTN","LRHYDEL",141,0)
 I $E(X,$L(X))=" " S X=$E(X,1,($L(X)-1))
"RTN","LRHYDEL",142,0)
 S (LRCCOM,LRCCOMX)=X
"RTN","LRHYDEL",143,0)
 I '$D(LRLABKY) W !,"("_LRCCOM_")"
"RTN","LRHYDEL",144,0)
 S Y=1
"RTN","LRHYDEL",145,0)
 K DIR
"RTN","LRHYDEL",146,0)
 I Y'=1 QUIT
"RTN","LRHYDEL",147,0)
 S LRCCOM=$E($S('$D(LRLABKY):"*"_$P($G(^VA(200,DUZ,0)),U)_"  Cancel Reason:",1:"*NP Reason:")_LRCCOM,1,68)
"RTN","LRHYDEL",148,0)
 S LRCCOM="S LRCCOM=DUPLICATE: *NP Reason: Duplicate"
"RTN","LRHYDEL",149,0)
 S LRCCOM="DUPLICATE: *NP Reason: Duplicate"
"RTN","LRHYDEL",150,0)
 D EN1^LRHY22
"RTN","LRHYDEL",151,0)
 Q
"RTN","LRHYDEL",152,0)
 ;
"RTN","LRHYDEL",153,0)
63(LRDFN,LRSS,LRIDT,LRTNM,LRCCOM) ;
"RTN","LRHYDEL",154,0)
 Q:$G(LRSS)["MI"
"RTN","LRHYDEL",155,0)
 N X,Y,D0,D1,DA,DR,DIC,DIE,LRCCOM0,LRNOECHO,DLAYGO
"RTN","LRHYDEL",156,0)
 S DLAYGO=63,DIC(0)="SL"
"RTN","LRHYDEL",157,0)
 S:'$G(LRNOW) LRNOW=$$NOW^XLFDT
"RTN","LRHYDEL",158,0)
 S LRNOECHO=1
"RTN","LRHYDEL",159,0)
 S LRCCOM0=$E("*"_LRTNM_$S($G(LRMERG):" Merged: ",'$D(LRLABKY):" "_$P($G(^VA(200,DUZ,0)),U)_" Canceled: ",1:" Not Performed: ")_$$FMTE^XLFDT(LRNOW,"5FMPZ")_" by "_DUZ,1,68)
"RTN","LRHYDEL",160,0)
 S DA=LRIDT,DA(1)=LRDFN,DIE="^LR("_LRDFN_","""_LRSS_""","
"RTN","LRHYDEL",161,0)
 S LRCCOM0=$TR(LRCCOM0,";","-") ; Strip ";" - FileMan uses ";" to parse DR string.
"RTN","LRHYDEL",162,0)
 S DR=".99///^S X="_""""_LRCCOM0_"""" D ^DIE
"RTN","LRHYDEL",163,0)
 Q:LRSS="MI"
"RTN","LRHYDEL",164,0)
631 K D0,D1,DA,DR,DIC,DIE
"RTN","LRHYDEL",165,0)
 S DIC(0)="SL"
"RTN","LRHYDEL",166,0)
 S DA=LRIDT,DA(1)=LRDFN,DIE="^LR("_LRDFN_","""_LRSS_""",",DIC=DIE
"RTN","LRHYDEL",167,0)
 S LRCCOM=$TR(LRCCOM,";","-") ; Strip ";" - FileMan uses ";" to parse DR string.
"RTN","LRHYDEL",168,0)
 S DR=".99///^S X="_""""_LRCCOM_""""
"RTN","LRHYDEL",169,0)
 D ^DIE
"RTN","LRHYDEL",170,0)
 Q
"RTN","LRHYED")
0^13^B54493^n/a
"RTN","LRHYED",1,0)
LRHYED ;DALOI/HOAK - UNIVERSAL EDITOR ;12/01/1999
"RTN","LRHYED",2,0)
 ;;5.2;LAB SERVICE;**405**;Sep 27, 1994;Build 93
"RTN","LRHYED",3,0)
 ;
"RTN","LRHYED",4,0)
HOWDY ; EDIT HOWDY FILE
"RTN","LRHYED",5,0)
 S DIE="^LRHY(69.86," S DIB=DIE
"RTN","LRHYED",6,0)
 D EN^DIB
"RTN","LRHYED",7,0)
 QUIT
"RTN","LRHYF1")
0^14^B21719177^n/a
"RTN","LRHYF1",1,0)
LRHYF1 ;DALOI/HOAK - LAB ARRIVAL AND DRAW TIME UPDATER ;4/13/1999
"RTN","LRHYF1",2,0)
 ;;5.2;LAB SERVICE;**405**;Sep 27, 1994;Build 93
"RTN","LRHYF1",3,0)
 ;
"RTN","LRHYF1",4,0)
 ;
"RTN","LRHYF1",5,0)
PAT ;
"RTN","LRHYF1",6,0)
 ;
"RTN","LRHYF1",7,0)
 ; This routine is used by lab to display updated lab arrival
"RTN","LRHYF1",8,0)
 ; and collection time as well as the phlebotomist and the provider
"RTN","LRHYF1",9,0)
 ; as well as the date time ordered.
"RTN","LRHYF1",10,0)
 ;
"RTN","LRHYF1",11,0)
 ;
"RTN","LRHYF1",12,0)
 QUIT
"RTN","LRHYF1",13,0)
ORD ;
"RTN","LRHYF1",14,0)
 ;
"RTN","LRHYF1",15,0)
 QUIT
"RTN","LRHYF1",16,0)
 ;
"RTN","LRHYF1",17,0)
SINGLE ;
"RTN","LRHYF1",18,0)
 K LRAA,LRAN,LRAD,LRUID,LRACC6
"RTN","LRHYF1",19,0)
 ; This block calls up the testing demographics.
"RTN","LRHYF1",20,0)
 ;
"RTN","LRHYF1",21,0)
 W !!
"RTN","LRHYF1",22,0)
 S LRACC="" K LRHN0
"RTN","LRHYF1",23,0)
 D ^LRHYU4
"RTN","LRHYF1",24,0)
 I $G(LRORD) D ORD
"RTN","LRHYF1",25,0)
 I LRAN<1 D END QUIT
"RTN","LRHYF1",26,0)
 I $L(X)'=10 S X=$G(^LRO(68,LRAA,1,LRAD,1,LRAN,.3))
"RTN","LRHYF1",27,0)
 I X S LRUID=X
"RTN","LRHYF1",28,0)
 ;
"RTN","LRHYF1",29,0)
 I '$D(^LRO(68,LRAA,1,LRAD,1,LRAN,0)) W !,"Doesn't exist." G SINGLE
"RTN","LRHYF1",30,0)
 ; KUNKE OPTION TY-IN
"RTN","LRHYF1",31,0)
KUNKE ;
"RTN","LRHYF1",32,0)
 S LRUNC=1
"RTN","LRHYF1",33,0)
 S LRDAT=+$P(^LRO(68,LRAA,1,LRAD,1,LRAN,0),U,4),LRSN=+$P(^(0),U,5)
"RTN","LRHYF1",34,0)
 D:'$G(LRKUNKE) LST1^LRHYLS1
"RTN","LRHYF1",35,0)
 ;
"RTN","LRHYF1",36,0)
 ;
"RTN","LRHYF1",37,0)
 ;  Adding urgency to the display
"RTN","LRHYF1",38,0)
 S LRTEST=0
"RTN","LRHYF1",39,0)
 K LRURG2
"RTN","LRHYF1",40,0)
 F  S LRTEST=$O(^LRO(68,LRAA,1,LRAD,1,LRAN,4,LRTEST)) Q:+LRTEST'>0  D
"RTN","LRHYF1",41,0)
 .  W !,$P($G(^LAB(60,LRTEST,0)),U)
"RTN","LRHYF1",42,0)
 .  S LRURG7=$P($G(^LRO(68,LRAA,1,LRAD,1,LRAN,4,LRTEST,0)),U,2)
"RTN","LRHYF1",43,0)
 .  I LRURG7=1 S LRURG=LRURG7
"RTN","LRHYF1",44,0)
 .  I LRURG7=2 S LRURG2=2
"RTN","LRHYF1",45,0)
 I $G(LRURG2)=2 D
"RTN","LRHYF1",46,0)
 .  Q:$G(LRURG)=1  S LRURG=2
"RTN","LRHYF1",47,0)
 ;
"RTN","LRHYF1",48,0)
 ;
"RTN","LRHYF1",49,0)
 ; Blink urgency if MED-EMERGE
"RTN","LRHYF1",50,0)
 S LRURG=$G(LRURG,LRURG7)
"RTN","LRHYF1",51,0)
 W !,$S($D(^LAB(62.05,+LRURG,0)):$P(^(0),U),1:"")," "
"RTN","LRHYF1",52,0)
 ;
"RTN","LRHYF1",53,0)
 ;
"RTN","LRHYF1",54,0)
 D EDIT
"RTN","LRHYF1",55,0)
 ;
"RTN","LRHYF1",56,0)
 ;
"RTN","LRHYF1",57,0)
 I $G(LREND) W !,"Please start over..." K LREND,LRIDTNEW
"RTN","LRHYF1",58,0)
 D END
"RTN","LRHYF1",59,0)
 I $G(LRKUNKE) G SINGLE^LRHYT1 QUIT
"RTN","LRHYF1",60,0)
 G SINGLE
"RTN","LRHYF1",61,0)
 ;
"RTN","LRHYF1",62,0)
 QUIT
"RTN","LRHYF1",63,0)
 ;
"RTN","LRHYF1",64,0)
END ;
"RTN","LRHYF1",65,0)
 K LRAA,LRAD,LRAN,LRBLOOD,LRARIVE,LRBLOOD,LRCE,LRDAT,LRDFN,LRIDT
"RTN","LRHYF1",66,0)
 K LRDLA,LRDLC,LRDPF,LRDRAW,LRDT0,LRDTO,LRHYDUZ,LRHYNISH,LRPRAC
"RTN","LRHYF1",67,0)
 K LRSN,LRTEST,LRURG,PNM,SSN,VAIN,VADM
"RTN","LRHYF1",68,0)
 QUIT
"RTN","LRHYF1",69,0)
 ;
"RTN","LRHYF1",70,0)
EDIT ;
"RTN","LRHYF1",71,0)
 Q:LRAA=-1
"RTN","LRHYF1",72,0)
 S LRDFN=$P(^LRO(68,LRAA,1,LRAD,1,LRAN,0),U)
"RTN","LRHYF1",73,0)
 S LRIDT=$P(^LRO(68,LRAA,1,LRAD,1,LRAN,3),U,5) ; old LRIDT
"RTN","LRHYF1",74,0)
CHECK ;
"RTN","LRHYF1",75,0)
 ;  Check for results. Quit if results present
"RTN","LRHYF1",76,0)
 ;
"RTN","LRHYF1",77,0)
 ;
"RTN","LRHYF1",78,0)
PAST ;
"RTN","LRHYF1",79,0)
 K LRHYDUZ
"RTN","LRHYF1",80,0)
 ; look at Micro And CH subscripted tests
"RTN","LRHYF1",81,0)
 I $D(^LR(LRDFN,"CH",LRIDT)) S LRSS="CH"
"RTN","LRHYF1",82,0)
 E  S LRSS="MI"
"RTN","LRHYF1",83,0)
 ;
"RTN","LRHYF1",84,0)
 ;  run review option here and show it there has been a previous 
"RTN","LRHYF1",85,0)
 ;  updating of this accession
"RTN","LRHYF1",86,0)
 I $G(LRKUNKE)'=1 I $D(^XUSEC("LRLAB",DUZ)) D EDIT^LRHYF2
"RTN","LRHYF1",87,0)
 K LRARIVE
"RTN","LRHYF1",88,0)
 ;
"RTN","LRHYF1",89,0)
 ;
"RTN","LRHYF1",90,0)
 W !
"RTN","LRHYF1",91,0)
 ;  WE need an event to stop non-LRLAB key holders from entering
"RTN","LRHYF1",92,0)
 ;  LAB ARRIVAL TIME
"RTN","LRHYF1",93,0)
BACK G:'$D(^XUSEC("LRLAB",DUZ)) DRAW
"RTN","LRHYF1",94,0)
 G DRAW
"RTN","LRHYF1",95,0)
 K %DT
"RTN","LRHYF1",96,0)
 D NOW^%DTC
"RTN","LRHYF1",97,0)
 S %DT="AERSZ"
"RTN","LRHYF1",98,0)
 D ^%DT
"RTN","LRHYF1",99,0)
 I Y=-1 S LREND=1 QUIT
"RTN","LRHYF1",100,0)
 I $D(DTOUT)!($D(DUOUT)) S LREND=1 QUIT
"RTN","LRHYF1",101,0)
 D NOW^%DTC
"RTN","LRHYF1",102,0)
 I Y>% W !!,"Can't accept future times!" W *7 G BACK
"RTN","LRHYF1",103,0)
 S LRARIVE=Y I +LRARIVE'>0 S LRARIVE=$P(^LRO(68,LRAA,1,LRAD,1,LRAN,3),U,3)
"RTN","LRHYF1",104,0)
 ;
"RTN","LRHYF1",105,0)
SET ;
"RTN","LRHYF1",106,0)
 S $P(^LRO(69,LRDAT,1,LRSN,3),U)=$G(LRARIVE)
"RTN","LRHYF1",107,0)
 ;
"RTN","LRHYF1",108,0)
 S $P(^LRO(68,LRAA,1,LRAD,1,LRAN,3),U,3)=$G(LRARIVE)
"RTN","LRHYF1",109,0)
 S $P(^LR(LRDFN,"MI",LRIDT,0),U,10)=$G(LRARIVE)
"RTN","LRHYF1",110,0)
 I $G(LRARIVE) S ^LRO(68,LRAA,1,LRAD,1,"E",LRARIVE,LRAN)=""
"RTN","LRHYF1",111,0)
 ;
"RTN","LRHYF1",112,0)
 ;
"RTN","LRHYF1",113,0)
DRAW ;
"RTN","LRHYF1",114,0)
 QUIT
"RTN","LRHYF1",115,0)
THERE ;
"RTN","LRHYF1",116,0)
 W !
"RTN","LRHYF1",117,0)
 K %DT
"RTN","LRHYF1",118,0)
 D NOW^%DTC
"RTN","LRHYF1",119,0)
 S %DT="AESRZ"
"RTN","LRHYF1",120,0)
 S %DT("A")="Please enter updated DRAW/COLLECTION TIME: "
"RTN","LRHYF1",121,0)
 ;
"RTN","LRHYF1",122,0)
 ; Only default if lrlab owner
"RTN","LRHYF1",123,0)
 I +LRDRAW7>0 S LRDRAW7=$$Y2K^LRX(LRDRAW7)
"RTN","LRHYF1",124,0)
 E  S LRDRAW7=$$Y2K^LRX($P(^LRO(68,LRAA,1,LRAD,1,LRAN,3),U))
"RTN","LRHYF1",125,0)
 I $D(^XUSEC("LRLAB",DUZ)) S %DT("B")=$P(LRDRAW7,"@")_"@"_$E($P(LRDRAW7,"@",2),1,5)
"RTN","LRHYF1",126,0)
 ;
"RTN","LRHYF1",127,0)
 D ^%DT
"RTN","LRHYF1",128,0)
 I X="" G DRAW
"RTN","LRHYF1",129,0)
 I $D(DTOUT)!($D(DUOUT)) S LREND=1 QUIT
"RTN","LRHYF1",130,0)
 I Y=-1 S LRUP="YES"
"RTN","LRHYF1",131,0)
 E  S LRUP="NO"
"RTN","LRHYF1",132,0)
 S LRDRAW=Y I +LRDRAW'>0 S LRDRAW=LRDRAW7
"RTN","LRHYF1",133,0)
 S $P(^LRO(68,LRAA,1,LRAD,1,LRAN,3),U)=LRDRAW
"RTN","LRHYF1",134,0)
 ;
"RTN","LRHYF1",135,0)
 ;
"RTN","LRHYF1",136,0)
 I $D(^XUSEC("LRLAB",DUZ)) G TIC
"RTN","LRHYF1",137,0)
 ;
"RTN","LRHYF1",138,0)
GUY ;  COLLECTOR DEMOGRAPHICS stuff this into LR...99 COMMENT FIELD.
"RTN","LRHYF1",139,0)
 S LRHYNISH=$P(^VA(200,DUZ,0),U,2)
"RTN","LRHYF1",140,0)
 I '$D(^XUSEC("LRLAB",DUZ)) S LRPON=$P($G(^VA(200,DUZ,0)),U)
"RTN","LRHYF1",141,0)
 W !!!
"RTN","LRHYF1",142,0)
 ;
"RTN","LRHYF1",143,0)
 D
"RTN","LRHYF1",144,0)
 .  D SCRNON^LRHYUTL
"RTN","LRHYF1",145,0)
 .  W IOBON
"RTN","LRHYF1",146,0)
 .  W IORVON
"RTN","LRHYF1",147,0)
 .  W IODHLT,LRHYNISH
"RTN","LRHYF1",148,0)
 .  W !
"RTN","LRHYF1",149,0)
 .  W IODHLB,LRHYNISH
"RTN","LRHYF1",150,0)
 .  W !!
"RTN","LRHYF1",151,0)
 .  W IORVOFF
"RTN","LRHYF1",152,0)
 .  W IOBOFF
"RTN","LRHYF1",153,0)
 .  D SCRNOFF^LRHYUTL
"RTN","LRHYF1",154,0)
 ;
"RTN","LRHYF1",155,0)
 W !!,"Your initials have been captured." D
"RTN","LRHYF1",156,0)
 .  S DIR(0)="Y" S DIR("B")="YES"
"RTN","LRHYF1",157,0)
 .  S DIR("A")="Is this correct?"
"RTN","LRHYF1",158,0)
 .  D ^DIR
"RTN","LRHYF1",159,0)
 .  I $D(DTOUT)!($D(DUOUT)) QUIT
"RTN","LRHYF1",160,0)
 .  ;
"RTN","LRHYF1",161,0)
 .  I Y S LRHYDUZ=LRPON
"RTN","LRHYF1",162,0)
 .  Q:Y>0
"RTN","LRHYF1",163,0)
 .  S DIC("A")="Enter collector here."
"RTN","LRHYF1",164,0)
 .  S DIC="^VA(200,"
"RTN","LRHYF1",165,0)
 .  S DIC(0)="AEMQZ"
"RTN","LRHYF1",166,0)
 .  D ^DIC
"RTN","LRHYF1",167,0)
 .  I +Y>0 S LRHYDUZ=$P(Y(0),U) S LRPON=$P(^VA(200,DUZ,0),U)
"RTN","LRHYF1",168,0)
 ;
"RTN","LRHYF1",169,0)
 ; This global serves as an interim solution until lab files can
"RTN","LRHYF1",170,0)
 ; be updated
"RTN","LRHYF1",171,0)
TIC ;
"RTN","LRHYF1",172,0)
 S LRARIVE=$G(LRARIVE,$P(^LRO(68,LRAA,1,LRAD,1,LRAN,3),U,3))
"RTN","LRHYF2")
0^15^B1996292^n/a
"RTN","LRHYF2",1,0)
LRHYF2 ;DALOI/HOAK - LAB ARRIVAL AND DRAW TIME UPDATER ;12/10/10 6:00pm
"RTN","LRHYF2",2,0)
 ;;5.2;LAB SERVICE;**405**;Sep 27, 1994;Build 93
"RTN","LRHYF2",3,0)
 ;
"RTN","LRHYF2",4,0)
PAT ;
"RTN","LRHYF2",5,0)
 ;
"RTN","LRHYF2",6,0)
 K LRHNV
"RTN","LRHYF2",7,0)
 S LREND=0
"RTN","LRHYF2",8,0)
 S DIC="^DPT("
"RTN","LRHYF2",9,0)
 S DIC(0)="AEMQZ"
"RTN","LRHYF2",10,0)
 D ^DIC
"RTN","LRHYF2",11,0)
 S DFN=+Y
"RTN","LRHYF2",12,0)
 S LRDFN=$G(^DPT(DFN,"LR"))
"RTN","LRHYF2",13,0)
 D ^VADPT,INP^VADPT
"RTN","LRHYF2",14,0)
 ;
"RTN","LRHYF2",15,0)
 QUIT
"RTN","LRHYF2",16,0)
 ;
"RTN","LRHYF2",17,0)
SINGLE ;
"RTN","LRHYF2",18,0)
 ; This block calls up the testing demogs
"RTN","LRHYF2",19,0)
 ;
"RTN","LRHYF2",20,0)
 K LRAA,LRAN,LRTEXH,LRPHLEB,LRAD,LRN0,LRHNODE,LR0NODE,LRACC
"RTN","LRHYF2",21,0)
 W !!
"RTN","LRHYF2",22,0)
 S LRACC=""
"RTN","LRHYF2",23,0)
 K LRHN0 D ^LRHYU4
"RTN","LRHYF2",24,0)
 I LRAN<1 QUIT
"RTN","LRHYF2",25,0)
JOEIN ;
"RTN","LRHYF2",26,0)
 I '$D(^LRO(68,LRAA,1,LRAD,1,LRAN,0)) W !,"Doesn't exist." G SINGLE
"RTN","LRHYF2",27,0)
 S LRUNC=1
"RTN","LRHYF2",28,0)
 S LRDAT=+$P(^LRO(68,LRAA,1,LRAD,1,LRAN,0),U,4),LRSN=+$P(^(0),U,5)
"RTN","LRHYF2",29,0)
 D LST1^LRHYLS1 ;URG^LRX,TESTS
"RTN","LRHYF2",30,0)
 S LRTEST=$O(^LRO(68,LRAA,1,LRAD,1,LRAN,4,0))
"RTN","LRHYF2",31,0)
 S LRURG=$P($G(^LRO(68,LRAA,1,LRAD,1,LRAN,4,LRTEST,0)),U,2)
"RTN","LRHYF2",32,0)
 W !,$S($D(^LAB(62.05,+LRURG,0)):$P(^(0),U),1:"")," "
"RTN","LRHYF2",33,0)
 D EDIT
"RTN","LRHYF2",34,0)
 I $G(LREND) W !,"Please start over..." K LREND,LRIDTNEW
"RTN","LRHYF2",35,0)
 G SINGLE
"RTN","LRHYF2",36,0)
 ;
"RTN","LRHYF2",37,0)
 ;
"RTN","LRHYF2",38,0)
 QUIT
"RTN","LRHYF2",39,0)
 ;
"RTN","LRHYF2",40,0)
 ;
"RTN","LRHYF2",41,0)
EDIT ;
"RTN","LRHYF2",42,0)
 D D1^LRHYBC1 QUIT
"RTN","LRHYF4")
0^16^B53704668^n/a
"RTN","LRHYF4",1,0)
LRHYF4 ;DALOI/HOAK - PHLEBOTOMY TAT ;12/10/10 6:00pm
"RTN","LRHYF4",2,0)
 ;;5.2;LAB SERVICE;**405**;Sep 27, 1994;Build 93
"RTN","LRHYF4",3,0)
 ;
"RTN","LRHYF4",4,0)
 ; Reference to ^DIC supported by DBIA #916.
"RTN","LRHYF4",5,0)
START ;
"RTN","LRHYF4",6,0)
 ;
"RTN","LRHYF4",7,0)
G ;
"RTN","LRHYF4",8,0)
 K ^TMP("LRHYMEDTAT",$J)
"RTN","LRHYF4",9,0)
 ;
"RTN","LRHYF4",10,0)
 K ^TMP("LRHYCOLLECTOR",$J)
"RTN","LRHYF4",11,0)
 ;
"RTN","LRHYF4",12,0)
 K ^TMP("LRHYTATDALLAS",$J)
"RTN","LRHYF4",13,0)
 K ^TMP("LRHYMEDTAT",$J)
"RTN","LRHYF4",14,0)
 K LRHYTECH1
"RTN","LRHYF4",15,0)
 K %DT
"RTN","LRHYF4",16,0)
 S %DT="AET"
"RTN","LRHYF4",17,0)
 S %DT("A")="Please enter date and time to start search: "
"RTN","LRHYF4",18,0)
 D ^%DT
"RTN","LRHYF4",19,0)
 Q:Y=-1
"RTN","LRHYF4",20,0)
 S LRSDT=Y
"RTN","LRHYF4",21,0)
 S LRODT=$P(LRSDT,".")
"RTN","LRHYF4",22,0)
 S %DT("A")="Please enter date and time to end search: "
"RTN","LRHYF4",23,0)
 D ^%DT
"RTN","LRHYF4",24,0)
 Q:Y=-1
"RTN","LRHYF4",25,0)
 S LREDT=Y
"RTN","LRHYF4",26,0)
 D DEVICE
"RTN","LRHYF4",27,0)
 K ^TMP("LRHYMEDTAT",$J),^TMP("LRHYMEDFINAL",$J)
"RTN","LRHYF4",28,0)
 K ^TMP("LRHYTATDALLAS",$J)
"RTN","LRHYF4",29,0)
 K ^TMP("LRHYCOLLECTOR",$J)
"RTN","LRHYF4",30,0)
 QUIT
"RTN","LRHYF4",31,0)
PAT ;
"RTN","LRHYF4",32,0)
 S LREND=0
"RTN","LRHYF4",33,0)
 S DIC="^DPT("
"RTN","LRHYF4",34,0)
 S DIC(0)="AEMQZ"
"RTN","LRHYF4",35,0)
 D ^DIC
"RTN","LRHYF4",36,0)
 S DFN=+Y
"RTN","LRHYF4",37,0)
 S LRDFN=$G(^DPT(DFN,"LR"))
"RTN","LRHYF4",38,0)
 D ^VADPT,INP^VADPT
"RTN","LRHYF4",39,0)
 ;
"RTN","LRHYF4",40,0)
 QUIT
"RTN","LRHYF4",41,0)
 ;
"RTN","LRHYF4",42,0)
LRO69 ;
"RTN","LRHYF4",43,0)
Q ;
"RTN","LRHYF4",44,0)
 ;
"RTN","LRHYF4",45,0)
 U IO
"RTN","LRHYF4",46,0)
 S LREND=0
"RTN","LRHYF4",47,0)
 S LRSTAR=0
"RTN","LRHYF4",48,0)
 D HEAD
"RTN","LRHYF4",49,0)
 S LRSN=0
"RTN","LRHYF4",50,0)
 S LRSTOP=0
"RTN","LRHYF4",51,0)
 S LRDRAW1=LRODT
"RTN","LRHYF4",52,0)
 F  S LRDRAW1=$O(^LRHY(69.87,"COLT",LRDRAW1)) Q:+LRDRAW1'>0!(LRDRAW1>LREDT)!(LRSTOP)  D
"RTN","LRHYF4",53,0)
 .  S LRUID=""
"RTN","LRHYF4",54,0)
 .  F  S LRUID=$O(^LRHY(69.87,"COLT",LRDRAW1,LRUID)) Q:LRUID=""  D
"RTN","LRHYF4",55,0)
 ..  S LRUID=$G(^LRHY(69.87,LRUID,0))
"RTN","LRHYF4",56,0)
 .. Q:'$O(^LRO(68,"C",LRUID,0))
"RTN","LRHYF4",57,0)
 ..  S LRAA=$O(^LRO(68,"C",LRUID,0))
"RTN","LRHYF4",58,0)
 ..  S LRAD=$O(^LRO(68,"C",LRUID,LRAA,0))
"RTN","LRHYF4",59,0)
 ..  S LRAN=$O(^LRO(68,"C",LRUID,LRAA,LRAD,0))
"RTN","LRHYF4",60,0)
 ..  D IN
"RTN","LRHYF4",61,0)
 D DISP
"RTN","LRHYF4",62,0)
 QUIT
"RTN","LRHYF4",63,0)
IN ;
"RTN","LRHYF4",64,0)
 ; GET UID
"RTN","LRHYF4",65,0)
 ; GET IEN IN 69.87
"RTN","LRHYF4",66,0)
 S LRIEN=$O(^LRHY(69.87,"B",LRUID,0)) Q:'LRIEN
"RTN","LRHYF4",67,0)
 D
"RTN","LRHYF4",68,0)
 .  K LRARIVE
"RTN","LRHYF4",69,0)
 .  S LREND=0
"RTN","LRHYF4",70,0)
 .  S LRSN=$P(^LRO(68,LRAA,1,LRAD,1,LRAN,0),U,5)
"RTN","LRHYF4",71,0)
 .  S LRACCTM=$P(^LRHY(69.87,LRIEN,8),U)
"RTN","LRHYF4",72,0)
 .  S LRARIVE=$P(^LRHY(69.87,LRIEN,10),U)
"RTN","LRHYF4",73,0)
 .  S LRTKX=$G(^LRHY(69.87,LRIEN,6))
"RTN","LRHYF4",74,0)
 .  K LRNCOL
"RTN","LRHYF4",75,0)
 .  S LRACCTM=$P(^TMP("LRHYHOW1",$J,LRUID),U)
"RTN","LRHYF4",76,0)
 .  S LR3D=$P(LRDRAW1,".",2)
"RTN","LRHYF4",77,0)
 .  I $L(LR3D)'>3 S LR3D=LR3D_"0"
"RTN","LRHYF4",78,0)
 .  S LR3D=$E(LR3D,1,2)*60+$E(LR3D,3,4)
"RTN","LRHYF4",79,0)
 .  S LR3T=$P(LRACCTM,".",2)
"RTN","LRHYF4",80,0)
 .  I $L(LR3T)'>3 S LR3T=LR3T_"0"
"RTN","LRHYF4",81,0)
 .  S LR3T=$E(LR3T,1,2)*60+$E(LR3T,3,4)
"RTN","LRHYF4",82,0)
 .  S LRTAT=(LR3D-LR3T)
"RTN","LRHYF4",83,0)
 .  S LRDRAW=$E($P(LRDRAW1,".",2),1,2)_":"_$E($P(LRDRAW1,".",2),3,4)
"RTN","LRHYF4",84,0)
 .  S LRARIVE=$E($P(LRACCTM,".",2),1,2)_":"_$E($P(LRACCTM,".",2),3,4)
"RTN","LRHYF4",85,0)
 .  K LRDFN
"RTN","LRHYF4",86,0)
 .  S LRDFN=+^LRO(68,LRAA,1,LRAD,1,LRAN,0)
"RTN","LRHYF4",87,0)
 .  K LRDPF D PT^LRX
"RTN","LRHYF4",88,0)
 .  S LRSSN=$P(SSN,"-",3)
"RTN","LRHYF4",89,0)
 .  S LRAC1=$E($P(^LRO(68,LRAA,0),U),1,2)_" "_$E(LRAD,4,7)_" "_LRAN
"RTN","LRHYF4",90,0)
 .  S LRAANAME=$P(^LRO(68,LRAA,0),U)
"RTN","LRHYF4",91,0)
 .  ;  check specimen not urine
"RTN","LRHYF4",92,0)
 .  S LRLLOC=$P(^LRO(68,LRAA,1,LRAD,1,LRAN,0),U,7)
"RTN","LRHYF4",93,0)
 .  S LRSC0=$P(^LRO(68,LRAA,1,LRAD,1,LRAN,0),U,13)
"RTN","LRHYF4",94,0)
 .  I $P($G(LRNCOL),U,4) S ^TMP("LRHYCOLLECTOR",$J,LRSN,$P(LRNCOL,U,4))=""
"RTN","LRHYF4",95,0)
 .  K LRHYTECH
"RTN","LRHYF4",96,0)
 .  S LRHYTECH=$P(^TMP("LRHYHOW1",$J,LRUID),U,11)
"RTN","LRHYF4",97,0)
 .  S LRHYTECH=$G(LRTKX)
"RTN","LRHYF4",98,0)
 .  I LRHYTECH S ^TMP("LRHYCOLLECTOR",$J,LRSN,LRHYTECH)=""
"RTN","LRHYF4",99,0)
 .  S LRSTAR=0
"RTN","LRHYF4",100,0)
 .  S ^TMP("LRHYTATDALLAS",$J,$E(LRDRAW,1,2),LRSN)=LRDRAW_U_PNM_U_LRSSN_U
"RTN","LRHYF4",101,0)
 .  S ^TMP("LRHYTATDALLAS",$J,$E(LRDRAW,1,2),LRSN)=LRDRAW_U_PNM_U_LRSSN_U_LRARIVE_U_LRTAT_U_LRAC1_U_$G(LRSTAR)_U_$G(LRLLOC)
"RTN","LRHYF4",102,0)
 ;
"RTN","LRHYF4",103,0)
 QUIT
"RTN","LRHYF4",104,0)
 ;
"RTN","LRHYF4",105,0)
DISP ;
"RTN","LRHYF4",106,0)
 S LRTOTAL=0
"RTN","LRHYF4",107,0)
 S LRHYCT=0
"RTN","LRHYF4",108,0)
 U IO
"RTN","LRHYF4",109,0)
 S LRD=0
"RTN","LRHYF4",110,0)
 S LR7MORE=0
"RTN","LRHYF4",111,0)
 S LR7LESS=0
"RTN","LRHYF4",112,0)
 S LR700=0
"RTN","LRHYF4",113,0)
 F  S LRD=$O(^TMP("LRHYTATDALLAS",$J,LRD)) Q:+LRD'>0  D
"RTN","LRHYF4",114,0)
 .  S LRSN=0
"RTN","LRHYF4",115,0)
 .  F  S LRSN=$O(^TMP("LRHYTATDALLAS",$J,LRD,LRSN)) Q:+LRSN'>0  S LRN=^(LRSN) D
"RTN","LRHYF4",116,0)
 ..  S LRDRAW=+LRN
"RTN","LRHYF4",117,0)
 ..  S LRDRAW=$P(LRN,U)
"RTN","LRHYF4",118,0)
 ..  S PNM=$P(LRN,U,2)
"RTN","LRHYF4",119,0)
 ..  S LRSSN=$P(LRN,U,3)
"RTN","LRHYF4",120,0)
 ..  S LRARIVE=$P(LRN,U,4)
"RTN","LRHYF4",121,0)
 ..  S LRTAT=$P(LRN,U,5)
"RTN","LRHYF4",122,0)
 ..  I LRTAT>7 S LR7MORE=LR7MORE+1
"RTN","LRHYF4",123,0)
 ..  I LRTAT<7 S LR7LESS=LR7LESS+1
"RTN","LRHYF4",124,0)
 ..  I LRTAT=7 S LR700=LR700+1
"RTN","LRHYF4",125,0)
 ..  S LRAC1=$P(LRN,U,6)
"RTN","LRHYF4",126,0)
 ..  D CHK Q:LRSTOP
"RTN","LRHYF4",127,0)
 ..  W !,+$E(LRD,1,2),?5,$E(PNM,1,15)," ",LRSSN,?27,"BLD",?32,LRARIVE,?40,LRDRAW,?47,LRTAT
"RTN","LRHYF4",128,0)
 ..  W ?52,$O(^TMP("LRHYCOLLECTOR",$J,LRSN,0))
"RTN","LRHYF4",129,0)
 ..  I $P(LRN,U,7)=1 W "*"
"RTN","LRHYF4",130,0)
 ..  W ?59,LRAC1 ;accession
"RTN","LRHYF4",131,0)
 ..  W ?72,$E($P(LRN,U,8),1,8) ;clinic
"RTN","LRHYF4",132,0)
 ..  S LRHYCT=LRHYCT+1 S LRTOTAL=LRTOTAL+LRTAT
"RTN","LRHYF4",133,0)
 ..  S ^TMP("LRHYMEDTAT",$J,LRSN)=LRTAT
"RTN","LRHYF4",134,0)
 Q:'LRHYCT
"RTN","LRHYF4",135,0)
 W !!,?10,"Mean TAT: "
"RTN","LRHYF4",136,0)
 W ?35,$P(LRTOTAL/LRHYCT,".")_"."_$E($P(LRTOTAL/LRHYCT,".",2),1,1),?41," Minutes"
"RTN","LRHYF4",137,0)
 D MEDIAN W ?41," Minutes"
"RTN","LRHYF4",138,0)
 W !,?10,"Total Time: ",?35,LRTOTAL,?41," Minutes"
"RTN","LRHYF4",139,0)
 W !,?10,"Total Patients Drawn: ",?35,LRHYCT,!
"RTN","LRHYF4",140,0)
 W !,?15,"TAT > 7 minutes: ",LR7MORE
"RTN","LRHYF4",141,0)
 W !,?15,"TAT < 7 minutes: ",LR7LESS
"RTN","LRHYF4",142,0)
 W !,?15,"TAT = 7 minutes: ",LR700
"RTN","LRHYF4",143,0)
 I LRHYCT=0 S LRHYCT=1
"RTN","LRHYF4",144,0)
 W !,?5,"Collectors: "
"RTN","LRHYF4",145,0)
 S LRN5=0
"RTN","LRHYF4",146,0)
 F  S LRN5=$O(^TMP("LRHYCOLLECTOR",$J,LRN5)) Q:+LRN5'>0  D
"RTN","LRHYF4",147,0)
 .  S LRHYTECH=0
"RTN","LRHYF4",148,0)
 .  F  S LRHYTECH=$O(^TMP("LRHYCOLLECTOR",$J,LRN5,LRHYTECH)) Q:+LRHYTECH'>0  D
"RTN","LRHYF4",149,0)
 ..  S LRHYTECH1(LRHYTECH,LRN5)=""
"RTN","LRHYF4",150,0)
 S LRHYTECH=0
"RTN","LRHYF4",151,0)
 F  S LRHYTECH=$O(LRHYTECH1(LRHYTECH)) Q:+LRHYTECH'>0  D
"RTN","LRHYF4",152,0)
 .  S LRHYCTC=0 S LRT0=0
"RTN","LRHYF4",153,0)
 .  F  S LRT0=$O(LRHYTECH1(LRHYTECH,LRT0)) Q:+LRT0'>0  D
"RTN","LRHYF4",154,0)
 ..  S LRHYCTC=LRHYCTC+1
"RTN","LRHYF4",155,0)
 .  W !,?10,$P(^VA(200,LRHYTECH,0),U)
"RTN","LRHYF4",156,0)
 .  W ?40,LRHYCTC,?45," Drawn"
"RTN","LRHYF4",157,0)
 K DIR I IOST["C-" S DIR(0)="E" D ^DIR
"RTN","LRHYF4",158,0)
 K DIR
"RTN","LRHYF4",159,0)
 D ^%ZISC
"RTN","LRHYF4",160,0)
 QUIT
"RTN","LRHYF4",161,0)
MEDIAN ;
"RTN","LRHYF4",162,0)
 S LRSTUCK=0
"RTN","LRHYF4",163,0)
 K ^TMP("LRHYMEDFINAL",$J)
"RTN","LRHYF4",164,0)
 K LRTATN
"RTN","LRHYF4",165,0)
 S LRHYCT3=1
"RTN","LRHYF4",166,0)
BAK S LRX=0 S LRKIL=0 S LRNONONO=0 S LRM3=0
"RTN","LRHYF4",167,0)
 I $D(^TMP("LRHYMEDFINAL",$J)) D
"RTN","LRHYF4",168,0)
 .  I '$D(^TMP("LRHYMEDFINAL",$J,LRHYCT3)) S LRSTUCK=LRSTUCK+1
"RTN","LRHYF4",169,0)
STUCK I $G(LRSTUCK)>2 K ^TMP("LRHYMEDTAT",$J,LRDUP) S LRSTUCK=0
"RTN","LRHYF4",170,0)
 I '$D(^TMP("LRHYMEDTAT",$J)) G DONE QUIT
"RTN","LRHYF4",171,0)
 S LRHYCT3=LRHYCT3+1
"RTN","LRHYF4",172,0)
 S LRM1=$O(^TMP("LRHYMEDTAT",$J,LRX)) S (LRX,LRDUP)=LRM1
"RTN","LRHYF4",173,0)
 S LRM1=$G(^TMP("LRHYMEDTAT",$J,LRM1))
"RTN","LRHYF4",174,0)
TIC F  S LRX=$O(^TMP("LRHYMEDTAT",$J,LRX)) Q:+LRX'>0  S LRM2=^(LRX) D
"RTN","LRHYF4",175,0)
 .  I LRM2=LRM1 S LRKIL=LRX S LRNOT=0 D
"RTN","LRHYF4",176,0)
 ..  F LRY=1:1:LRHYCT3 Q:'$D(^TMP("LRHYMEDFINAL",$J,LRY))  D
"RTN","LRHYF4",177,0)
 ...  I LRM1>+$O(^TMP("LRHYMEDFINAL",$J,LRY,0)) S LRNOT=1
"RTN","LRHYF4",178,0)
 ...  I 'LRNOT  D
"RTN","LRHYF4",179,0)
 ....  K ^TMP("LRHYMEDTAT",$J,LRDUP) S LRKIL=LRX
"RTN","LRHYF4",180,0)
 .  I LRM2>LRM1 S LRKIL=LRX S LRM1=LRM2
"RTN","LRHYF4",181,0)
 Q:'$G(LRX)
"RTN","LRHYF4",182,0)
 I $G(LRNOT)=1 S LRX=LRX+.05 S LRNOT=0 G TIC
"RTN","LRHYF4",183,0)
 I LRKIL S ^TMP("LRHYMEDFINAL",$J,LRHYCT3,^TMP("LRHYMEDTAT",$J,LRKIL))=""
"RTN","LRHYF4",184,0)
 I LRKIL K ^TMP("LRHYMEDTAT",$J,LRKIL)
"RTN","LRHYF4",185,0)
 K ^TMP("LRHYMEDTAT",$J,LRX) G BAK
"RTN","LRHYF4",186,0)
 I +$O(^TMP("LRHYMEDTAT",$J,0)) G BAK
"RTN","LRHYF4",187,0)
DONE ;
"RTN","LRHYF4",188,0)
 S LRHYCT3=0
"RTN","LRHYF4",189,0)
 S LRX=0
"RTN","LRHYF4",190,0)
 F  S LRX=$O(^TMP("LRHYMEDFINAL",$J,LRX)) Q:+LRX'>0  D
"RTN","LRHYF4",191,0)
 .  S LRHYCT3=LRHYCT3+1
"RTN","LRHYF4",192,0)
 .  S LRYTAT=$O(^TMP("LRHYMEDFINAL",$J,LRX,0))
"RTN","LRHYF4",193,0)
 .  S LRTATN(LRHYCT3)=LRYTAT
"RTN","LRHYF4",194,0)
 S LRX=LRHYCT3/2
"RTN","LRHYF4",195,0)
 I LRX[.5 S LRX1=$P(LRX,".") Q:'LRX1  S LRX2=LRX1+1 D
"RTN","LRHYF4",196,0)
 .  S LRX3=(LRTATN(LRX1)+LRTATN(LRX2))/2
"RTN","LRHYF4",197,0)
 E  S LRX3=LRTATN(LRX)
"RTN","LRHYF4",198,0)
 W !,?10,"Median TAT:",?35,LRX3
"RTN","LRHYF4",199,0)
 ;
"RTN","LRHYF4",200,0)
 QUIT
"RTN","LRHYF4",201,0)
HEAD ;
"RTN","LRHYF4",202,0)
 S LRSTOP=0
"RTN","LRHYF4",203,0)
 W @IOF
"RTN","LRHYF4",204,0)
 W "Date:",$$CJ^XLFSTR("PATIENT WAIT TIME",IOM)
"RTN","LRHYF4",205,0)
 W !,"Time",?5,"Patient Name",?27,"Type",?32,"Arrived"
"RTN","LRHYF4",206,0)
 W ?40,"Drawn",?47,"TAT",?52,"TECH",?60,"ACCN"
"RTN","LRHYF4",207,0)
 W ?72,"Clinic"
"RTN","LRHYF4",208,0)
 QUIT
"RTN","LRHYF4",209,0)
CHK ;
"RTN","LRHYF4",210,0)
 Q:LRSTOP
"RTN","LRHYF4",211,0)
 S LRLINE=(IOSL-$Y)
"RTN","LRHYF4",212,0)
 I $E(IOST,1,2)["P-" D  QUIT
"RTN","LRHYF4",213,0)
 .  I LRLINE<7 D HEAD QUIT
"RTN","LRHYF4",214,0)
 ;
"RTN","LRHYF4",215,0)
 I LRLINE<2 D
"RTN","LRHYF4",216,0)
 .  Q:$E(IOST,1,2)'["C-"
"RTN","LRHYF4",217,0)
 .  K DIR S DIR(0)="E" D ^DIR
"RTN","LRHYF4",218,0)
 .  I $D(DUOUT)!($D(DIRUT)) S LRSTOP=1 Q
"RTN","LRHYF4",219,0)
 .  D HEAD
"RTN","LRHYF4",220,0)
 QUIT
"RTN","LRHYF4",221,0)
DEVICE ;
"RTN","LRHYF4",222,0)
 S ZTRTN="Q^LRHYF4"
"RTN","LRHYF4",223,0)
 ;
"RTN","LRHYF4",224,0)
 D IO^LRWU
"RTN","LRHYF4",225,0)
 ;
"RTN","LRHYF4",226,0)
 QUIT
"RTN","LRHYF4",227,0)
 QUIT
"RTN","LRHYLRX")
0^17^B1258345^n/a
"RTN","LRHYLRX",1,0)
LRHYLRX ;DALOI/HOAK - Playing inside the BOX ;8/28/2005
"RTN","LRHYLRX",2,0)
 ;;5.2;LAB SERVICE;**405**;Sep 27, 1994;Build 93
"RTN","LRHYLRX",3,0)
 ;
"RTN","LRHYLRX",4,0)
 ;
"RTN","LRHYLRX",5,0)
 W @IOF F V=2:2:20 S XX="TXT"_V D @XX D LRBOX(10,V,V,60,TXT)
"RTN","LRHYLRX",6,0)
 Q
"RTN","LRHYLRX",7,0)
 ;
"RTN","LRHYLRX",8,0)
 ;
"RTN","LRHYLRX",9,0)
LRBOX(X,Y,SIDE,LRHYHZ,TXT) ;This sub routine will draw a box on a VT100 terminal
"RTN","LRHYLRX",10,0)
 N LRHYI
"RTN","LRHYLRX",11,0)
 K DX,DY
"RTN","LRHYLRX",12,0)
 ;X and Y are the 1st coord.
"RTN","LRHYLRX",13,0)
 ;SIDE is the length vertical leg
"RTN","LRHYLRX",14,0)
 ;LRHYHZ is the length of the horozontal leg
"RTN","LRHYLRX",15,0)
 ;TXT is what you put in the box
"RTN","LRHYLRX",16,0)
 D GSET^%ZISS W IOG1
"RTN","LRHYLRX",17,0)
 S DY=Y,DX=X D XY
"RTN","LRHYLRX",18,0)
 W IOTLC
"RTN","LRHYLRX",19,0)
 F LRHYI=1:1:LRHYHZ W IOHL
"RTN","LRHYLRX",20,0)
 W IOTRC
"RTN","LRHYLRX",21,0)
 S DY=Y+1,DX=X D XY F LRHYI=1:1:SIDE W IOVL S DY=DY+1 D XY
"RTN","LRHYLRX",22,0)
 S DY=Y+1,DX=LRHYHZ+X+1 D XY F LRHYI=1:1:SIDE W IOVL S DY=DY+1 D XY
"RTN","LRHYLRX",23,0)
 S DY=Y+SIDE+1,DX=X D XY
"RTN","LRHYLRX",24,0)
 W IOBLC F LRHYI=2:1:LRHYHZ+1 W IOHL
"RTN","LRHYLRX",25,0)
 W IOBRC
"RTN","LRHYLRX",26,0)
 W IOG0 D GKILL^%ZISS
"RTN","LRHYLRX",27,0)
 Q
"RTN","LRHYLRX",28,0)
XY ;
"RTN","LRHYLRX",29,0)
 X IOXY
"RTN","LRHYLRX",30,0)
 Q
"RTN","LRHYLRX",31,0)
LRGLIN ;
"RTN","LRHYLRX",32,0)
 N LRHYHZ
"RTN","LRHYLRX",33,0)
 D GSET^%ZISS W IOG1
"RTN","LRHYLRX",34,0)
 F LRHYHZ=1:1:79 W IOHL
"RTN","LRHYLRX",35,0)
 W !,IOG0 D GKILL^%ZISS
"RTN","LRHYLRX",36,0)
 Q
"RTN","LRHYLS1")
0^18^B9947241^n/a
"RTN","LRHYLS1",1,0)
LRHYLS1 ;DALOI/HOAK - DISPLAY ORDERS 9/27/2005 ;10/15/10 11:25am
"RTN","LRHYLS1",2,0)
 ;;5.2;LAB SERVICE;**405**;Sep 27, 1994;Build 93
"RTN","LRHYLS1",3,0)
 ;
"RTN","LRHYLS1",4,0)
LST1 ;
"RTN","LRHYLS1",5,0)
 Q:$G(LRKUNKE)=1
"RTN","LRHYLS1",6,0)
 D CHKPAGE
"RTN","LRHYLS1",7,0)
 Q:$G(LRSTOP)=1
"RTN","LRHYLS1",8,0)
 S LRDX=^LRO(68,LRAA,1,LRAD,1,LRAN,0),LRCE=$S($D(^(.1)):^(.1),1:""),LRACC=$S($D(^(.2)):^(.2),1:"")
"RTN","LRHYLS1",9,0)
 Q:'$D(^LR(+LRDX,0))#2
"RTN","LRHYLS1",10,0)
 S LRDPF=$P(^LR(+LRDX,0),U,2),DFN=$P(^(0),U,3)
"RTN","LRHYLS1",11,0)
 D PT^LRX
"RTN","LRHYLS1",12,0)
 S (LRDLA,LRDLC,LRACO)=""
"RTN","LRHYLS1",13,0)
 I $D(^LRO(68,LRAA,1,LRAD,1,LRAN,3)) S Y=^(3),LRDLA=$P(Y,U,3),LRACO=$P(Y,U,6),Y=$P(Y,U) D
"RTN","LRHYLS1",14,0)
 . D:Y DD^LRX S LRDLC=Y,Y=LRDLA D:Y DD^LRX S LRDLA=Y
"RTN","LRHYLS1",15,0)
 S Y=$P(LRDX,U,4) D:Y DD^LRX S LRDTO=Y
"RTN","LRHYLS1",16,0)
 ; Patient:_______________ SSN:_________ DOB:________ PROVIDER:
"RTN","LRHYLS1",17,0)
 S LN=$G(LN)+4
"RTN","LRHYLS1",18,0)
 D CHKPAGE
"RTN","LRHYLS1",19,0)
 Q:$G(LRSTOP)
"RTN","LRHYLS1",20,0)
 W !,"UID: ",?11,$G(^LRO(68,LRAA,1,LRAD,1,LRAN,.3))
"RTN","LRHYLS1",21,0)
 W !,"ACCESSION: ",$E(^LRO(68,LRAA,0),1,4)," ",$E(LRAD,4,7)," ",LRAN
"RTN","LRHYLS1",22,0)
 W !,"ORDER #: ",?11,LRCE
"RTN","LRHYLS1",23,0)
 K LRHOWDT S LRHOWDT=$O(^LRO(69,"C",LRCE,0))
"RTN","LRHYLS1",24,0)
 S LRUID=$P(^LRO(68,LRAA,1,LRAD,1,LRAN,.3),U)
"RTN","LRHYLS1",25,0)
 K LRHN0
"RTN","LRHYLS1",26,0)
 S LRHN0=$G(^TMP("LRHYHOW1",$J,LRHOWDT,LRUID))
"RTN","LRHYLS1",27,0)
 D DASH^LRX
"RTN","LRHYLS1",28,0)
 D BUILD^LRHYT2
"RTN","LRHYLS1",29,0)
 W "Patient: ",$E(PNM,1,12)
"RTN","LRHYLS1",30,0)
 W ?22,"SSN: ",$P(SSN,"-",3)
"RTN","LRHYLS1",31,0)
 W ?33,"DOB: ",$$DTF^LRAFUNC1(DOB)
"RTN","LRHYLS1",32,0)
 S LRPRAC=+$P(LRDX,"^",8)
"RTN","LRHYLS1",33,0)
 W ?50,"PROVIDER: ",$S($D(^VA(200,LRPRAC,0)):$P(^(0),"^"),1:LRPRAC)
"RTN","LRHYLS1",34,0)
 D DASH^LRX
"RTN","LRHYLS1",35,0)
 QUIT
"RTN","LRHYLS1",36,0)
 S LN=$G(LN)+6
"RTN","LRHYLS1",37,0)
 D CHKPAGE
"RTN","LRHYLS1",38,0)
 Q:$G(LRSTOP)=1
"RTN","LRHYLS1",39,0)
 N PRAC,PR D PRAC^LR7OMERG(LRAA,LRAD,LRAN,.PRAC) I $O(PRAC(0)) S PR=0 F  S PR=$O(PRAC(PR)) Q:PR<1  I $D(^VA(200,PR,0)) W !?16,$P(^(0),"^")
"RTN","LRHYLS1",40,0)
 S X1=+$P(LRDX,U,4),X2=+$P(LRDX,U,5)
"RTN","LRHYLS1",41,0)
 I $D(^LRO(69,X1,1,X2,6)) D
"RTN","LRHYLS1",42,0)
 . W !,"  Order Comment:" S LN=LN+1
"RTN","LRHYLS1",43,0)
 . S LRHYI=0
"RTN","LRHYLS1",44,0)
 .  S LRNX0=$G(^LRO(69,X1,1,X2,0))
"RTN","LRHYLS1",45,0)
 . F  S LRHYI=$O(^LRO(69,X1,1,X2,6,LRHYI)) Q:LRHYI<1  I LRHYI>1 W !?11,^(LRHYI,0) S LN=LN+1 D CHKPAGE Q:$G(LRSTOP)
"RTN","LRHYLS1",46,0)
TSTCOM ;
"RTN","LRHYLS1",47,0)
 Q:$G(LRSTOP)
"RTN","LRHYLS1",48,0)
 S LRHYI=0
"RTN","LRHYLS1",49,0)
 F  S LRHYI=$O(^LRO(69,X1,1,X2,2,LRHYI)) Q:LRHYI<1  S X=^(LRHYI,0) I $P(X,"^",11) D
"RTN","LRHYLS1",50,0)
 . W !,"  CANCELLED TEST: ",$S($D(^LAB(60,+X,0)):$P(^(0),"^"),1:"UNKNOWN")
"RTN","LRHYLS1",51,0)
 . N LRURG S LRURG=+$P(X,U,2)
"RTN","LRHYLS1",52,0)
 . I LRURG=1!(LRURG=51) D FLASH
"RTN","LRHYLS1",53,0)
 . I LRURG=51 D FLASH
"RTN","LRHYLS1",54,0)
 . E  W " "_$E($S($D(^LAB(62.05,LRURG,0)):$P(^(0),U),1:"ROUTINE"),1,15)
"RTN","LRHYLS1",55,0)
 . W " by: "_$P(^VA(200,$P(X,"^",11),0),"^")
"RTN","LRHYLS1",56,0)
 . S LRHYI(2)=0 F  S LRHYI(2)=$O(^LRO(69,X1,1,X2,2,LRHYI,1.1,LRHYI(2))) Q:LRHYI(2)<1  I $D(^(LRHYI(2),0)) W !?3,": "_^(0) D CHKPAGE Q:$G(LRSTOP)
"RTN","LRHYLS1",57,0)
 I $L(LRACO) W !,"  Accession Comment: ",LRACO S LN=LN+1
"RTN","LRHYLS1",58,0)
 W:$L($P(LRDX,U,6,7))>1 !
"RTN","LRHYLS1",59,0)
 Q
"RTN","LRHYLS1",60,0)
FLASH ;
"RTN","LRHYLS1",61,0)
 I $G(LRURG)=1!(LRURG=51) D SCRNON^LRHYUTL W IOBON
"RTN","LRHYLS1",62,0)
 ;
"RTN","LRHYLS1",63,0)
 W ?20,$S($D(^LAB(62.05,+LRURG,0)):$P(^(0),U),1:"")," "
"RTN","LRHYLS1",64,0)
 ;
"RTN","LRHYLS1",65,0)
 I $G(LRURG)=1 W IOBOFF D SCRNOFF^LRHYUTL
"RTN","LRHYLS1",66,0)
 ;
"RTN","LRHYLS1",67,0)
 QUIT
"RTN","LRHYLS1",68,0)
CHKPAGE ;
"RTN","LRHYLS1",69,0)
 Q:$G(LRSTOP)!($D(ZTQUEUED))!($E(IOST,1,2)'="C-")
"RTN","LRHYLS1",70,0)
 Q:$G(LN)<(IOSL-2)
"RTN","LRHYLS1",71,0)
 K DIR
"RTN","LRHYLS1",72,0)
 S DIR(0)="E"
"RTN","LRHYLS1",73,0)
 D ^DIR
"RTN","LRHYLS1",74,0)
 I $D(DUOUT)!($D(DIRUT)) S LRSTOP=1 Q
"RTN","LRHYLS1",75,0)
 S LREND=$G(LRSTOP)
"RTN","LRHYLS1",76,0)
 S LN=1
"RTN","LRHYLS1",77,0)
 W !
"RTN","LRHYLS1",78,0)
 Q
"RTN","LRHYLS1",79,0)
LEDI ; print LEDI information
"RTN","LRHYLS1",80,0)
 D LEDI^LRWRKLS1
"RTN","LRHYLS1",81,0)
 Q
"RTN","LRHYPH0")
0^19^B38997897^n/a
"RTN","LRHYPH0",1,0)
LRHYPH0 ;DALOI/HOAK - HOWDY ORDER NUMBER SELECTOR PRIME ;8/28/2005
"RTN","LRHYPH0",2,0)
 ;;5.2;LAB SERVICE;**405**;Sep 27, 1994;Build 93
"RTN","LRHYPH0",3,0)
 ;
"RTN","LRHYPH0",4,0)
 ;
"RTN","LRHYPH0",5,0)
 K LRORIFN,LRNATURE,LREND,LRORDRR
"RTN","LRHYPH0",6,0)
 S LRLWC="WC"
"RTN","LRHYPH0",7,0)
 D ^LRPARAM
"RTN","LRHYPH0",8,0)
 I $G(LREND) S LREND=0 Q
"RTN","LRHYPH0",9,0)
L5 ;
"RTN","LRHYPH0",10,0)
NEXT ;
"RTN","LRHYPH0",11,0)
 K DIR
"RTN","LRHYPH0",12,0)
 I $D(LROESTAT) D:$P(LRPARAM,U,14) ^LRCAPV I $G(LREND) K LRLONG,LRPANEL Q
"RTN","LRHYPH0",13,0)
 S (LRODT,X,DT)=$$DT^XLFDT(),LRODT0=$$FMTE^XLFDT(DT,5)
"RTN","LRHYPH0",14,0)
 I $D(^LAB(69.9,1,"RO")),+$H'=+$P(^("RO"),U) D
"RTN","LRHYPH0",15,0)
 . W $C(7),!,"ROLLOVER ",$S($P(^("RO"),U,2):"IS RUNNING.",1:"HAS NOT RUN.")," ACCESSIONING SHOULDN'T BE DONE NOW.",$C(7),!
"RTN","LRHYPH0",16,0)
 . S DIR("A")="  Are you sure you want to continue",DIR(0)="Y",DIR("B")="No"
"RTN","LRHYPH0",17,0)
 I $T D ^DIR G END:$D(DIRUT) I Y'=1 W !,"OK, try later." Q
"RTN","LRHYPH0",18,0)
 S X="T-7",%DT="" D ^%DT S LRTM7=+Y
"RTN","LRHYPH0",19,0)
 K DIC,LRSND,LRSN
"RTN","LRHYPH0",20,0)
 W !!,"Select Order number: " R LRORD:DTIME W ! Q:LRORD["^"!(LRORD[".")!($D(LRLONG)&(LRORD=""))
"RTN","LRHYPH0",21,0)
PAST ; HOWDY IN HERE
"RTN","LRHYPH0",22,0)
 W @IOF S M9=0 G QUICK^LROE1:LRORD=""
"RTN","LRHYPH0",23,0)
 S:LRORD?.N LRORD=+LRORD IF LRORD'?.N D QMSG QUIT
"RTN","LRHYPH0",24,0)
 I '$D(^LRO(69,"C",LRORD)) W !!?10,"No order exist with that number ",$C(7),! QUIT
"RTN","LRHYPH0",25,0)
 S (LRCHK,LRNONE)=1,(M9,LRODT)=0
"RTN","LRHYPH0",26,0)
 F  S LRODT=+$O(^LRO(69,"C",LRORD,LRODT)) Q:LRODT<1  D
"RTN","LRHYPH0",27,0)
 . S DA=0 F  S DA=$O(^LRO(69,"C",LRORD,LRODT,DA)) Q:DA<1  S LRCHK=LRCHK-1 S:LRNONE'=2 LRNONE=0 D LROE2
"RTN","LRHYPH0",28,0)
 I LRNONE=2 W !,"The order has already been",$S(LRCHK<1:" partially",1:"")," accessioned." H 1
"RTN","LRHYPH0",29,0)
 I LRNONE=1 W !,"No order exists with that number." H 1 QUIT
"RTN","LRHYPH0",30,0)
 I '$$GOT(LRORD,LRODT) QUIT
"RTN","LRHYPH0",31,0)
 K DIR S DIR("A")="Is this the correct order",DIR(0)="Y"
"RTN","LRHYPH0",32,0)
 S DIR("B")="Yes"
"RTN","LRHYPH0",33,0)
 K DIR S Y=1
"RTN","LRHYPH0",34,0)
 I $D(DIRUT)!(Y'=1) K LRSN QUIT
"RTN","LRHYPH0",35,0)
 L +^LRO(69,"C",LRORD):$G(DILOCKTM,3)
"RTN","LRHYPH0",36,0)
 I '$T W !?5,"Someone else is editing this Order",!!,$C(7) QUIT
"RTN","LRHYPH0",37,0)
 K %DT
"RTN","LRHYPH0",38,0)
 S LRSTATUS="",%DT("B")=""
"RTN","LRHYPH0",39,0)
 D TIME K %DT
"RTN","LRHYPH0",40,0)
 D:$G(LRCDT)<1 UNL69 QUIT:LRCDT<1
"RTN","LRHYPH0",41,0)
 S LRTIM=+LRCDT
"RTN","LRHYPH0",42,0)
 S LRUN=$P(LRCDT,U,2) K LRCDT,LRSN
"RTN","LRHYPH0",43,0)
MORE ;
"RTN","LRHYPH0",44,0)
 S M9=0
"RTN","LRHYPH0",45,0)
 S (LRODT,LRSND)=0
"RTN","LRHYPH0",46,0)
 F  S LRODT=$O(^LRO(69,"C",LRORD,LRODT)) Q:LRODT<1  D
"RTN","LRHYPH0",47,0)
 . S LRSND=0
"RTN","LRHYPH0",48,0)
 . F  S LRSND=$O(^LRO(69,"C",LRORD,LRODT,LRSND)) Q:LRSND<1  D
"RTN","LRHYPH0",49,0)
 . . S LRSN(LRSND)=LRSND,LRSN=LRSND
"RTN","LRHYPH0",50,0)
 . . K LRAA D Q15^LRHYPH2 K LRSN
"RTN","LRHYPH0",51,0)
 D TASK,UNL69
"RTN","LRHYPH0",52,0)
 QUIT
"RTN","LRHYPH0",53,0)
 ;
"RTN","LRHYPH0",54,0)
 ;
"RTN","LRHYPH0",55,0)
LROE2 ;
"RTN","LRHYPH0",56,0)
 I $D(^LRO(69,LRODT,1,DA,1)),$P(^(1),U,4)="" S LRNONE=2,LRCHK=LRCHK+1
"RTN","LRHYPH0",57,0)
 K LRSN
"RTN","LRHYPH0",58,0)
 S (LRSN,LRSN(DA))=+DA
"RTN","LRHYPH0",59,0)
 I '$D(^LRO(69,LRODT,1,LRSN,0)) Q
"RTN","LRHYPH0",60,0)
 S M9=$G(M9)+1,LR3X=^LRO(69,LRODT,1,LRSN,0),LRDFN=+LR3X,LRDPF=$P(^LR(LRDFN,0),U,2),DFN=$P(^(0),U,3) D PT^LRX
"RTN","LRHYPH0",61,0)
 Q
"RTN","LRHYPH0",62,0)
 ;
"RTN","LRHYPH0",63,0)
 ;
"RTN","LRHYPH0",64,0)
QMSG W !,"Enter the order entry number assigned when the test was ordered."
"RTN","LRHYPH0",65,0)
 W:'$D(LRLONG) !,"If the test has not been ordered, type the RETURN key to order the test."
"RTN","LRHYPH0",66,0)
 W !,"To exit, type the ""^"" key and RETURN key."
"RTN","LRHYPH0",67,0)
 Q
"RTN","LRHYPH0",68,0)
 ;
"RTN","LRHYPH0",69,0)
 ;
"RTN","LRHYPH0",70,0)
YN R X:DTIME W ! S:'$T DTOUT=1 Q:X=""!(X["N")!(X["Y")
"RTN","LRHYPH0",71,0)
 W !,"Answer 'Y' or 'N': " G YN
"RTN","LRHYPH0",72,0)
 ;
"RTN","LRHYPH0",73,0)
 ;
"RTN","LRHYPH0",74,0)
EN ;
"RTN","LRHYPH0",75,0)
LROEN S LRNCWL=1
"RTN","LRHYPH0",76,0)
 D LROE,END K LRNCWL
"RTN","LRHYPH0",77,0)
 Q
"RTN","LRHYPH0",78,0)
 ;
"RTN","LRHYPH0",79,0)
LROE ;
"RTN","LRHYPH0",80,0)
 QUIT
"RTN","LRHYPH0",81,0)
 ;
"RTN","LRHYPH0",82,0)
EN01 ; ENTER ORDER # THEN ENTER DATA
"RTN","LRHYPH0",83,0)
STAT ;
"RTN","LRHYPH0",84,0)
 D ^LRPARAM
"RTN","LRHYPH0",85,0)
 I '$D(LRLABKY) W !!?10,"You do not have the proper security Keys",! Q
"RTN","LRHYPH0",86,0)
 ;
"RTN","LRHYPH0",87,0)
 ; Select peforming laboratory
"RTN","LRHYPH0",88,0)
 S X=$$SELPL^LRVERA(DUZ(2))
"RTN","LRHYPH0",89,0)
 I X<1 D END Q
"RTN","LRHYPH0",90,0)
 I X'=DUZ(2) N LRPL S LRPL=X
"RTN","LRHYPH0",91,0)
 ;
"RTN","LRHYPH0",92,0)
 S LRLONG="",LRPANEL=0,LROESTAT=""
"RTN","LRHYPH0",93,0)
 S %H=$H-60 D YMD^LRX S LRTM60=9999999-X
"RTN","LRHYPH0",94,0)
 D LROE K LRTM60,LRLONG,LREND,LROESTAT
"RTN","LRHYPH0",95,0)
 D END
"RTN","LRHYPH0",96,0)
 Q
"RTN","LRHYPH0",97,0)
 ;
"RTN","LRHYPH0",98,0)
 ;
"RTN","LRHYPH0",99,0)
TIME ;from LROE1, LRORD1
"RTN","LRHYPH0",100,0)
 D NOW^%DTC S LRCDT=% QUIT  ;STUFFED FOR HOWDY
"RTN","LRHYPH0",101,0)
 S %DT="SET" W !,"Collection Date@Time: ",$S($D(%DT("B")):%DT("B"),1:"NOW"),"//" R X:DTIME W ! I '$T!(X="^") S LRCDT=-1 Q
"RTN","LRHYPH0",102,0)
 S:X="" X=$S($D(%DT("B")):%DT("B"),1:"N")
"RTN","LRHYPH0",103,0)
 W:X["?" !!,"You may enter ""T@U"" or just ""U"", for Today at Unknown time",!!
"RTN","LRHYPH0",104,0)
 I X["@U",$P(X,"@U",2)="" S X=$P(X,"@U",1) D ^%DT G TIME:Y<1 S LRCDT=+Y_"^1" Q
"RTN","LRHYPH0",105,0)
 S:X="U" LRCDT=DT_"^1"
"RTN","LRHYPH0",106,0)
 I X'="U" D ^%DT D:X'["?" TIME1 G TIME:X["?" S LRCDT=+Y_"^" G TIME:Y'["."
"RTN","LRHYPH0",107,0)
 Q
"RTN","LRHYPH0",108,0)
 ;
"RTN","LRHYPH0",109,0)
TIME1 S X1=X,Y1=Y D TIME2 S X=X1,Y=Y1 K X1,Y1
"RTN","LRHYPH0",110,0)
 Q
"RTN","LRHYPH0",111,0)
 ;
"RTN","LRHYPH0",112,0)
TIME2 S X="N",%DT="ST" D ^%DT Q:Y1'>Y  F  W !,"You have specified a collection time in the future.  Are you sure" S %=2 D YN^DICN Q:%  W !,"Answer 'Y'es or 'N'o."
"RTN","LRHYPH0",113,0)
 S:%'=1 X="?" S X1=X
"RTN","LRHYPH0",114,0)
 Q
"RTN","LRHYPH0",115,0)
 ;
"RTN","LRHYPH0",116,0)
 ;
"RTN","LRHYPH0",117,0)
TASK ;
"RTN","LRHYPH0",118,0)
 ; If traditional Howdy is used this is where labels print-control passes to GT549
"RTN","LRHYPH0",119,0)
 ; If alternative Howdy is used label printing is delayed.
"RTN","LRHYPH0",120,0)
 I $G(^%ZIS(1,LRDEV,0))'["NUL" G T549
"RTN","LRHYPH0",121,0)
 N LRAD S LRAD=0
"RTN","LRHYPH0",122,0)
 N LRX,LRY
"RTN","LRHYPH0",123,0)
 D NOW^%DTC
"RTN","LRHYPH0",124,0)
 S LR3T=%
"RTN","LRHYPH0",125,0)
 S LRX=0
"RTN","LRHYPH0",126,0)
 F  S LRX=$O(LRLBL(LRX)) Q:+LRX'>0  D
"RTN","LRHYPH0",127,0)
 .  S LRY=0
"RTN","LRHYPH0",128,0)
 .  F  S LRY=$O(LRLBL(LRX,LRY)) Q:+LRY'>0  D
"RTN","LRHYPH0",129,0)
 ..  I $P(^LRO(68,LRX,0),U,3)="M" S LRAD=$E(DT,1,5)_"00"
"RTN","LRHYPH0",130,0)
 ..  I $P(^LRO(68,LRX,0),U,3)="Y" S LRAD=$E(DT,1,3)_"0000"
"RTN","LRHYPH0",131,0)
 ..  I '$G(LRAD) S LRAD=DT
"RTN","LRHYPH0",132,0)
 ..  S LRUID=$P($G(^LRO(68,LRX,1,LRAD,1,LRY,.3)),U) I $L(LRUID)<10 D
"RTN","LRHYPH0",133,0)
 ...  S $P(LRLBL(LRX,LRY),U,7)=LRORD
"RTN","LRHYPH0",134,0)
 ...  S LRUID=$P($G(^LRO(68,LRX,1,LRAD,1,LRY,.3)),U)
"RTN","LRHYPH0",135,0)
 ..  S ^XTMP("LRHY LABELS",LRDFN,LR3T,LRUID)=LRLBL(LRX,LRY)
"RTN","LRHYPH0",136,0)
 ..  K LRAD
"RTN","LRHYPH0",137,0)
 I $G(^%ZIS(1,LRDEV,0))["NUL" QUIT
"RTN","LRHYPH0",138,0)
 ;
"RTN","LRHYPH0",139,0)
T549 ; ADDED FOR PPOC APPROACH
"RTN","LRHYPH0",140,0)
 S LRCE=LRORD
"RTN","LRHYPH0",141,0)
 S LRX=0
"RTN","LRHYPH0",142,0)
 F  S LRX=$O(LRLBL(LRX)) Q:+LRX'>0  D
"RTN","LRHYPH0",143,0)
 .  S LRY=0
"RTN","LRHYPH0",144,0)
 .  F  S LRY=$O(LRLBL(LRX,LRY)) Q:+LRY'>0  D
"RTN","LRHYPH0",145,0)
 ..  S $P(LRLBL(LRX,LRY),U,7)=LRCE
"RTN","LRHYPH0",146,0)
 S ZTSAVE("L*")=""
"RTN","LRHYPH0",147,0)
 I $D(LRLABLIO) S ZTRTN="ENT^LRLABLD",ZTDTH=$H,ZTDESC="LAB LABELS",ZTIO=LRLABLIO,ZTSAVE("LRLBL(")="" S:$D(ZTQUEUED) ZTREQ="@" D ^%ZTLOAD
"RTN","LRHYPH0",148,0)
 K LRLBL
"RTN","LRHYPH0",149,0)
 I $D(LRCSQ),$P($G(^LRO(68,+LRAA,0)),U,16) D STD^LRCAPV
"RTN","LRHYPH0",150,0)
 D STOP^LRCAPV K LRCOM,LRSPCDSC,LRCCOM,LRTCOM
"RTN","LRHYPH0",151,0)
 Q
"RTN","LRHYPH0",152,0)
 ;
"RTN","LRHYPH0",153,0)
 ;
"RTN","LRHYPH0",154,0)
END K DIR,DIRUT,LRHYGOT
"RTN","LRHYPH0",155,0)
 D ^LRORDK,LROEND^LRORDK,STOP^LRCAPV
"RTN","LRHYPH0",156,0)
 Q
"RTN","LRHYPH0",157,0)
 ;
"RTN","LRHYPH0",158,0)
 ;
"RTN","LRHYPH0",159,0)
GOT(ORD,ODT) ;See if all tests have been canceled
"RTN","LRHYPH0",160,0)
 N LRHYI,SN,ODT
"RTN","LRHYPH0",161,0)
 S (LRHYGOT,ODT,SN)=0
"RTN","LRHYPH0",162,0)
 F  S ODT=$O(^LRO(69,"C",ORD,ODT)) Q:ODT<1  D
"RTN","LRHYPH0",163,0)
 . S SN=0 F  S SN=$O(^LRO(69,"C",ORD,ODT,SN)) Q:SN<1!(LRHYGOT)  D
"RTN","LRHYPH0",164,0)
 . . Q:'$D(^LRO(69,ODT,1,SN,0))
"RTN","LRHYPH0",165,0)
 . . S LRHYI=0 F  S LRHYI=$O(^LRO(69,ODT,1,SN,2,LRHYI)) Q:LRHYI<1  I $D(^(LRHYI,0)),'$P(^(0),"^",11) S LRHYGOT=1 Q
"RTN","LRHYPH0",166,0)
 Q LRHYGOT
"RTN","LRHYPH0",167,0)
 ;
"RTN","LRHYPH0",168,0)
 ;
"RTN","LRHYPH0",169,0)
UNL69 ;
"RTN","LRHYPH0",170,0)
 L -^LRO(69,"C",+$G(LRORD))
"RTN","LRHYPH0",171,0)
 Q
"RTN","LRHYPH0",172,0)
BCE ;
"RTN","LRHYPH0",173,0)
 S LRCE=$G(LRORD)
"RTN","LRHYPH0",174,0)
 Q:'$D(LRLABLIO)
"RTN","LRHYPH0",175,0)
 S ZTSAVE("L*")=""
"RTN","LRHYPH0",176,0)
 S ZTRTN="ENT^LRLABLD",ZTDTH=$H,ZTDESC="LAB LABELS"
"RTN","LRHYPH0",177,0)
 S ZTIO=LRLABLIO
"RTN","LRHYPH0",178,0)
 S LRDEV=LRLABLIO
"RTN","LRHYPH0",179,0)
 S IO=LRDEV S ZTSAVE("IO*")=""
"RTN","LRHYPH0",180,0)
 S ZTIO=$P(^%ZIS(1,+LRDEV,0),U)
"RTN","LRHYPH0",181,0)
 D ^%ZTLOAD
"RTN","LRHYPH0",182,0)
 K LRLBL
"RTN","LRHYPH0",183,0)
 I $D(LRCSQ),$P($G(^LRO(68,+LRAA,0)),U,16) D STD^LRCAPV
"RTN","LRHYPH0",184,0)
 D STOP^LRCAPV K LRCOM,LRSPCDSC,LRCCOM,LRTCOM
"RTN","LRHYPH2")
0^20^B12074115^n/a
"RTN","LRHYPH2",1,0)
LRHYPH2 ;DALOI/HOAK - HOWDY ORDER NUMBER SELECTION ;12/10/10 6:00pm
"RTN","LRHYPH2",2,0)
 ;;5.2;LAB SERVICE;**405**;Sep 27, 1994;Build 93
"RTN","LRHYPH2",3,0)
 ;
"RTN","LRHYPH2",4,0)
 ; Reference to ^ORCSAVE2 supported by DBIA #2747.
"RTN","LRHYPH2",5,0)
 ;
"RTN","LRHYPH2",6,0)
 ;
"RTN","LRHYPH2",7,0)
Q15 ;
"RTN","LRHYPH2",8,0)
 ;
"RTN","LRHYPH2",9,0)
 I $G(LRBUTZ) K LRBUTZ G BUT
"RTN","LRHYPH2",10,0)
 Q:$D(LRSTOPZ(LRORD))
"RTN","LRHYPH2",11,0)
 ;
"RTN","LRHYPH2",12,0)
BUT ;
"RTN","LRHYPH2",13,0)
 I $D(^TMP("LRHYDY",$J,"KILL",LRODT,LRSN,1)) S LRSTOPZ(LRORD)="" D LOG^LRHY0 QUIT
"RTN","LRHYPH2",14,0)
 ;
"RTN","LRHYPH2",15,0)
 Q:'$D(^LRO(69,LRODT,1,LRSN,0))
"RTN","LRHYPH2",16,0)
 I M9>1 D LRSPEC^LROE1 S S1=$S($D(^LAB(61,+LRSPEC,0)):$P(^(0),U),1:"") D
"RTN","LRHYPH2",17,0)
 .  S S2=$P(^LAB(62,LRSAMP,0),U),S4=$P(^(0),U,3)
"RTN","LRHYPH2",18,0)
 .  S S3=S1_$S(S1'=S2:"  "_S2,1:"")
"RTN","LRHYPH2",19,0)
 .  K S1,S2,S3,S4 S %=2
"RTN","LRHYPH2",20,0)
 S DA=DT,LRDFN=+^LRO(69,LRODT,1,LRSN,0),LRDPF=+$P(^LR(LRDFN,0),U,2)
"RTN","LRHYPH2",21,0)
 ; MODIFIED FOR VERSION 8 10/31
"RTN","LRHYPH2",22,0)
 I $D(LRSND),$P(^LRO(69,LRODT,1,LRSN,0),U,4)="LC",$D(^(1)) S LRLLOC=$P(^(0),U,7),LROLLOC=$P(^(0),U,9),LRNT=$S($D(LRNT):LRNT,$D(LRTIM):LRTIM,$D(LRCDT):+LRCDT,1:"") D P15^LRPHITEM G PH
"RTN","LRHYPH2",23,0)
 I $D(LRSND) N LRHYCOMB S LRHYCOMB=$P($G(^LRO(69,LRODT,1,LRSN,1)),U,7) D
"RTN","LRHYPH2",24,0)
 .  S DIE="^LRO(69,"_LRODT_",1,",DA(1)=LRODT,DA=LRSN,DR="10////"_LRTIM D ^DIE
"RTN","LRHYPH2",25,0)
 .  S DIE="^LRO(69,"_LRODT_",1,",DA(1)=LRODT,DA=LRSN,DR="12////"_DUZ D ^DIE
"RTN","LRHYPH2",26,0)
 .  S DIE="^LRO(69,"_LRODT_",1,",DA(1)=LRODT,DA=LRSN,DR="13////"_LRSTATUS D ^DIE
"RTN","LRHYPH2",27,0)
PH G Q16:LRORD D ORDER^LROW2 G Q16A
"RTN","LRHYPH2",28,0)
Q16 S J=0 D CHECK^LROW2 I J D BAD^LROW2
"RTN","LRHYPH2",29,0)
Q16A I $D(LRLONG),$D(LRSND) S LRSN=LRSND,^TMP("LRHYDY",$J,"LROE",$J,"LRORD")=LRORD_U_LRODT_U_LRTIM_U_PNM_U_SSN
"RTN","LRHYPH2",30,0)
 K DR S LRTSTS=0
"RTN","LRHYPH2",31,0)
 S LRSN=0 F  S LRSN=$O(LRSN(LRSN)) Q:'LRSN  D Q17
"RTN","LRHYPH2",32,0)
 I $D(LRLONG),$D(LRSND) S LRSN=LRSND D LROE^LRFAST S X=^TMP("LRHYDY",$J,"LROE",$J,"LRORD"),LRORD=+X,LRODT=$P(X,"^",2),LRTIM=$P(X,"^",3),LRLONG="",PNM=$P(X,"^",4),SSN=$P(X,"^",5)
"RTN","LRHYPH2",33,0)
 Q
"RTN","LRHYPH2",34,0)
Q17 ;
"RTN","LRHYPH2",35,0)
 I $D(LRHYCS33(LRODT,LRSN)) I $D(^LRHY(69.86,LRHYSITE,4,"B",LRHYCS33(LRODT,LRSN))) K LRHYCS33(LRODT,LRSN) QUIT
"RTN","LRHYPH2",36,0)
 S LRHYDJOB=$O(^TMP("LRHYDY",0))
"RTN","LRHYPH2",37,0)
 S I=$O(^LRO(69,LRODT,1,LRSN,6,0)),J=$O(^(1)) S:'$D(IOM) IOM=80 K LRSPCDSC S:J LRSPCDSC=^(J,0) S:I DA=LRSN,DA(1)=LRODT,DR=6,DIC="^LRO(69,"_LRODT_",1," D EN^DIQ:I D LRSPEC^LROE1
"RTN","LRHYPH2",38,0)
 ;
"RTN","LRHYPH2",39,0)
 Q:$D(^TMP("LRHYDY",$J,"KILL",LRODT,LRSN))
"RTN","LRHYPH2",40,0)
 S LRLABLIO=LRDEV S ZTIO=LRDEV
"RTN","LRHYPH2",41,0)
 D ^LRHYBL1
"RTN","LRHYPH2",42,0)
 I $G(LRLABSTP)'="" S LRLABLIO=$P(^%ZIS(1,LRDEV,0),U)_";"_LRLABSTP
"RTN","LRHYPH2",43,0)
 ; get around comments on Howdy screen
"RTN","LRHYPH2",44,0)
 Q:$D(^TMP("LRHYDY",$J,"KILL",LRODT,LRSN))
"RTN","LRHYPH2",45,0)
 S DTIME=.5
"RTN","LRHYPH2",46,0)
 ;
"RTN","LRHYPH2",47,0)
 S LRQUIET=1
"RTN","LRHYPH2",48,0)
 Q:$D(LROLT1(LRODT,LRSN))
"RTN","LRHYPH2",49,0)
 K LRCCOM,X,LRCCOMX,LRCCOM0
"RTN","LRHYPH2",50,0)
 ; The call to OLD^LRORDST hands off the accessioning process and
"RTN","LRHYPH2",51,0)
 ; updating of lab files
"RTN","LRHYPH2",52,0)
 ;
"RTN","LRHYPH2",53,0)
 S LR33ORD=LRORD
"RTN","LRHYPH2",54,0)
 K LRORD
"RTN","LRHYPH2",55,0)
 D OLD^LRORDST
"RTN","LRHYPH2",56,0)
 S LRORD=LR33ORD
"RTN","LRHYPH2",57,0)
 I $G(LRUID)'="" D NOW^%DTC S ^TMP("LRHYHOW1",$J,LRUID)=%_U_DUZ
"RTN","LRHYPH2",58,0)
 S DTIME=$$DTIME^XUP(DUZ)
"RTN","LRHYPH2",59,0)
 D D1^LRHYU
"RTN","LRHYPH2",60,0)
 ;
"RTN","LRHYPH2",61,0)
 S ^LRO(69,"AA",+$G(^LRO(69,LRODT,1,LRSN,.1)),LRODT_"|"_LRSN)=""
"RTN","LRHYPH2",62,0)
 S LRORIEN=$P($G(^LRO(69,LRODT,1,LRSN,0)),U,11)
"RTN","LRHYPH2",63,0)
 I $G(LRORIEN) D
"RTN","LRHYPH2",64,0)
 .  D STATUS^ORCSAVE2(LRORIEN,6)
"RTN","LRHYPH2",65,0)
 Q:$G(LRNOTEST)  D
"RTN","LRHYPH2",66,0)
 .  K DA,DR S DIE="^LRO(69,"_LRODT_",1,",DA(1)=LRODT,DA=LRSN,DR="12////"_DUZ D ^DIE
"RTN","LRHYPH2",67,0)
 .  K DA,DR S DIE="^LRO(69,"_LRODT_",1,",DA(1)=LRODT,DA=LRSN,DR="13////C" D ^DIE
"RTN","LRHYPH2",68,0)
 Q
"RTN","LRHYPL")
0^21^B9505821^n/a
"RTN","LRHYPL",1,0)
LRHYPL ;DALOI/HOAK - LAB PHLEB AND COLLECTION TIME UPDATER ;4/13/1999
"RTN","LRHYPL",2,0)
 ;;5.2;LAB SERVICE;**405**;Sep 27, 1994;Build 93
"RTN","LRHYPL",3,0)
 ;
"RTN","LRHYPL",4,0)
 ; Reference to ^DIC supported by DBIA #916
"RTN","LRHYPL",5,0)
 ;
"RTN","LRHYPL",6,0)
 ;
"RTN","LRHYPL",7,0)
 ; This routine will be used to capture the phlebotomist and the
"RTN","LRHYPL",8,0)
 ; specimen collection time.
"RTN","LRHYPL",9,0)
 ;
"RTN","LRHYPL",10,0)
 ; The barcoded specimen tubes will be waunded.
"RTN","LRHYPL",11,0)
 ; The phlebotomist ID will then be waunded.
"RTN","LRHYPL",12,0)
 ;
"RTN","LRHYPL",13,0)
CONTROL ;
"RTN","LRHYPL",14,0)
 K DIC,LRHYTECH,LRHYDUZ,LRPHLEB,LRRECVR
"RTN","LRHYPL",15,0)
 K DIR,DIC,DIE,LRARIVE,LRDRAW
"RTN","LRHYPL",16,0)
 K DIC,LRHYTECH,LRHYDUZ,LRPHLEB
"RTN","LRHYPL",17,0)
 K DIR,DIC,DIE,LRARIVE,LRDRAW
"RTN","LRHYPL",18,0)
 S LRPL=1
"RTN","LRHYPL",19,0)
 S LREND=0
"RTN","LRHYPL",20,0)
 D TECH
"RTN","LRHYPL",21,0)
 S LRCNTX=0
"RTN","LRHYPL",22,0)
 I U[X D END QUIT
"RTN","LRHYPL",23,0)
 Q:X=""  D SINGLE
"RTN","LRHYPL",24,0)
 K LRPL
"RTN","LRHYPL",25,0)
 G CONTROL
"RTN","LRHYPL",26,0)
 QUIT
"RTN","LRHYPL",27,0)
FINDER ; Get the phlebotomist
"RTN","LRHYPL",28,0)
 S DIC="^VA(200,"
"RTN","LRHYPL",29,0)
 S DIC(0)="AEMQZ"
"RTN","LRHYPL",30,0)
 S DIC("A")="Please enter employee number: "
"RTN","LRHYPL",31,0)
 D ^DIC
"RTN","LRHYPL",32,0)
 QUIT
"RTN","LRHYPL",33,0)
TECH ; Get the phlebotomist
"RTN","LRHYPL",34,0)
 K DIC,LRHYTECH,LRHYDUZ,LRPHLEB,LRRECVR
"RTN","LRHYPL",35,0)
 K DIR,DIC,DIE,LRARIVE,LRDRAW
"RTN","LRHYPL",36,0)
 W @IOF
"RTN","LRHYPL",37,0)
 ;
"RTN","LRHYPL",38,0)
 X ^%ZOSF("EOFF")
"RTN","LRHYPL",39,0)
 D NINE^LRHYU
"RTN","LRHYPL",40,0)
 X ^%ZOSF("EON")
"RTN","LRHYPL",41,0)
 I U[X QUIT
"RTN","LRHYPL",42,0)
 I $L(X)'=9 K DIC,LRHYTECH,LRHYDUZ,LRPHLEB,LRRECV G TECH
"RTN","LRHYPL",43,0)
 ;
"RTN","LRHYPL",44,0)
 ;
"RTN","LRHYPL",45,0)
 ;
"RTN","LRHYPL",46,0)
 K DIC,LRHYTECH,LRHYDUZ
"RTN","LRHYPL",47,0)
 K Y
"RTN","LRHYPL",48,0)
 S DIC=200
"RTN","LRHYPL",49,0)
 S DIC(0)="MQZ"
"RTN","LRHYPL",50,0)
 D ^DIC
"RTN","LRHYPL",51,0)
 W Y
"RTN","LRHYPL",52,0)
 ;
"RTN","LRHYPL",53,0)
 I U[X QUIT
"RTN","LRHYPL",54,0)
 I Y<0 G CONTROL
"RTN","LRHYPL",55,0)
 S (LRHYDUZ,LRHYTECH,LRPHLEB,LRRECVR)=+Y
"RTN","LRHYPL",56,0)
 S LRHYDUZ=$P($G(^VA(200,LRHYDUZ,0)),U)
"RTN","LRHYPL",57,0)
 QUIT
"RTN","LRHYPL",58,0)
 ;
"RTN","LRHYPL",59,0)
TIME ;
"RTN","LRHYPL",60,0)
 ;
"RTN","LRHYPL",61,0)
 ;
"RTN","LRHYPL",62,0)
 ;
"RTN","LRHYPL",63,0)
 S LREND=0
"RTN","LRHYPL",64,0)
 S DIC="^DPT("
"RTN","LRHYPL",65,0)
 S DIC(0)="AEMQZ"
"RTN","LRHYPL",66,0)
 D ^DIC
"RTN","LRHYPL",67,0)
 S DFN=+Y
"RTN","LRHYPL",68,0)
 S LRDFN=$G(^DPT(DFN,"LR"))
"RTN","LRHYPL",69,0)
 D ^VADPT,INP^VADPT
"RTN","LRHYPL",70,0)
 ;
"RTN","LRHYPL",71,0)
 QUIT
"RTN","LRHYPL",72,0)
 ;
"RTN","LRHYPL",73,0)
SINGLE ;
"RTN","LRHYPL",74,0)
 S LRCNTX=LRCNTX+1
"RTN","LRHYPL",75,0)
 ; This block calls up the testing demographics.
"RTN","LRHYPL",76,0)
 ;  LRHYD123 IS LRUID
"RTN","LRHYPL",77,0)
 W !!,"RECORDING UID: ",LRCNTX
"RTN","LRHYPL",78,0)
 S LRACC=""
"RTN","LRHYPL",79,0)
 ;
"RTN","LRHYPL",80,0)
 ;
"RTN","LRHYPL",81,0)
 K LRHYD123
"RTN","LRHYPL",82,0)
 ;
"RTN","LRHYPL",83,0)
 K LRHN0,LRHNODE,LRN0,LR0NODE,LRPHLEB
"RTN","LRHYPL",84,0)
 D ^LRHYU4
"RTN","LRHYPL",85,0)
 I LRAN<1 QUIT
"RTN","LRHYPL",86,0)
 ;
"RTN","LRHYPL",87,0)
 I '$D(^LRO(68,LRAA,1,LRAD,1,LRAN,0)) W !,"Doesn't exist." G SINGLE
"RTN","LRHYPL",88,0)
 S LRUNC=1
"RTN","LRHYPL",89,0)
 S LRORDT1=$P(^LRO(68,LRAA,1,LRAD,1,LRAN,0),U,4)
"RTN","LRHYPL",90,0)
 S LRHYD123=$G(^LRO(68,LRAA,1,LRAD,1,LRAN,.3))
"RTN","LRHYPL",91,0)
 ;  mdofied by Hoak per Joe for prior to free t-4
"RTN","LRHYPL",92,0)
 D NOW^%DTC
"RTN","LRHYPL",93,0)
 S LRDRAW=%
"RTN","LRHYPL",94,0)
 S LRSN=$P(^LRO(68,LRAA,1,LRAD,1,LRAN,0),U,5)
"RTN","LRHYPL",95,0)
 I '$G(LRDAT) S LRDAT=$P(^LRO(68,LRAA,1,LRAD,1,LRAN,0),U,4)
"RTN","LRHYPL",96,0)
 ;
"RTN","LRHYPL",97,0)
 ;
"RTN","LRHYPL",98,0)
 S $P(^TMP("LRHYHOW1",$J,LRHYD123),U,3)=%
"RTN","LRHYPL",99,0)
 S $P(^TMP("LRHYHOW1",$J,LRHYD123),U,11)=LRHYTECH
"RTN","LRHYPL",100,0)
 S $P(^TMP("LRHYHOW1",$J,LRHYD123),U,12)=%
"RTN","LRHYPL",101,0)
 S $P(^TMP("LRHYHOW1",$J,LRHYD123),U,13)=$G(LRHYTECH)
"RTN","LRHYPL",102,0)
 S $P(^TMP("LRHYHOW1",$J,LRHYD123),U,14)=$G(%)
"RTN","LRHYPL",103,0)
 S $P(^TMP("LRHYHOW1",$J,LRHYD123),U,9)="PL"
"RTN","LRHYPL",104,0)
 ;
"RTN","LRHYPL",105,0)
 I '^TMP("LRHYHOW1",$J,LRHYD123) S ^(LRHYD123)=$G(LRDRAW)
"RTN","LRHYPL",106,0)
 ; USE NEW SPECIMEN DEMOGRAPHICS FILE #69.87
"RTN","LRHYPL",107,0)
 D SETFILE^LRHYBC1
"RTN","LRHYPL",108,0)
 H 2
"RTN","LRHYPL",109,0)
 K LRAN,LRHYD123,LRAN,LRAA,LRADT,LRDRAW
"RTN","LRHYPL",110,0)
 G SINGLE
"RTN","LRHYPL",111,0)
 QUIT
"RTN","LRHYPL",112,0)
END ;
"RTN","LRHYPL",113,0)
 K %,LRDAT,LRAN,LRAD,LRAA,LRDFN,LRDRAW,LRHYTECH,LRHYDUZ
"RTN","LRHYPL",114,0)
 ;
"RTN","LRHYPOST")
0^22^B856379^n/a
"RTN","LRHYPOST",1,0)
LRHYPOST ;DALOI/HOAK - UNIVERSAL EDITOR 12/01/1999 ;12/13/10 11:24am
"RTN","LRHYPOST",2,0)
 ;;5.2;LAB SERVICE;**405**;Sep 27, 1994;Build 93
"RTN","LRHYPOST",3,0)
 ;
"RTN","LRHYPOST",4,0)
PROX ;
"RTN","LRHYPOST",5,0)
 ; This block sets the Howdy Bot user in the New Person file.
"RTN","LRHYPOST",6,0)
 D CREATE^XUSAP("HOWDY,BOT","l","LRHY HOWDY BOT","LRHY HOWDY BOT")
"RTN","LRHYPOST",7,0)
 ;
"RTN","LRHYPOST",8,0)
POST ; KIDS Post install for LR*5.2*405
"RTN","LRHYPOST",9,0)
 ;
"RTN","LRHYPOST",10,0)
 N XQA,XQAMSG,MSG
"RTN","LRHYPOST",11,0)
 S XQAMSG="Installation of patch LR*5.2*405"
"RTN","LRHYPOST",12,0)
 S XQAMSG=XQAMSG_" completed on "_$$HTE^XLFDT($H)
"RTN","LRHYPOST",13,0)
 S XQA("G.LMI")=""
"RTN","LRHYPOST",14,0)
 D SETUP^XQALERT
"RTN","LRHYPOST",15,0)
 ;
"RTN","LRHYPOST",16,0)
 S MSG="Sending install completion alert to mail group G.LMI"
"RTN","LRHYPOST",17,0)
 D BMES^XPDUTL($$CJ^XLFSTR(MSG,80)) K MSG
"RTN","LRHYPOST",18,0)
 ;
"RTN","LRHYPOST",19,0)
 ;
"RTN","LRHYPOST",20,0)
 QUIT
"RTN","LRHYT1")
0^23^B12777188^n/a
"RTN","LRHYT1",1,0)
LRHYT1 ;DALOI/HOAK - LAB PHLEB AND COLLECTION TIME UPDATER ;4/13/1999
"RTN","LRHYT1",2,0)
 ;;5.2;LAB SERVICE;**405**;Sep 27, 1994;Build 93
"RTN","LRHYT1",3,0)
 ;
"RTN","LRHYT1",4,0)
 ; Reference to ^DIC supported by DBIA #916.
"RTN","LRHYT1",5,0)
 ;
"RTN","LRHYT1",6,0)
 ; This routine will be used to capture the phlebotomist and the
"RTN","LRHYT1",7,0)
 ; specimen collection time.
"RTN","LRHYT1",8,0)
 ;
"RTN","LRHYT1",9,0)
 ; The barcoded specimen tubes will be waunded.
"RTN","LRHYT1",10,0)
 ; The phlebotomist ID will then be waunded.
"RTN","LRHYT1",11,0)
 ;
"RTN","LRHYT1",12,0)
 ; MODIFIED BY HOAK 6/30/2000 FOR RCEV OPTION
"RTN","LRHYT1",13,0)
CONTROL ;
"RTN","LRHYT1",14,0)
 K LRAA,LRAD,LRAN,LRBLOOD,LRARIVE,LRBLOOD,LRCE,LRDAT,LRDFN,LRIDT
"RTN","LRHYT1",15,0)
 K LRDLA,LRDLC,LRDPF,LRDRAW,LRDT0,LRDTO,LRHYDUZ,LRHYNISH,LRPRAC
"RTN","LRHYT1",16,0)
 K LRSN,LRTEST,LRURG,PNM,SSN,VAIN,VADM
"RTN","LRHYT1",17,0)
 W @IOF
"RTN","LRHYT1",18,0)
 W !,$$CJ^XLFSTR("Barcode Specimen Processor",IOM)
"RTN","LRHYT1",19,0)
 ;
"RTN","LRHYT1",20,0)
 ;
"RTN","LRHYT1",21,0)
 K DIR,DIC,DIE,LRARIVE,LRDRAW
"RTN","LRHYT1",22,0)
 S LREND=0
"RTN","LRHYT1",23,0)
 D TECH
"RTN","LRHYT1",24,0)
 I U[X D END QUIT
"RTN","LRHYT1",25,0)
 Q:X=""  D SINGLE
"RTN","LRHYT1",26,0)
 G CONTROL
"RTN","LRHYT1",27,0)
 QUIT
"RTN","LRHYT1",28,0)
FINDER ;
"RTN","LRHYT1",29,0)
 S DIC="^VA(200,"
"RTN","LRHYT1",30,0)
 S DIC(0)="AEMQZ"
"RTN","LRHYT1",31,0)
 S DIC("A")="Please enter employee number: "
"RTN","LRHYT1",32,0)
 D ^DIC
"RTN","LRHYT1",33,0)
 QUIT
"RTN","LRHYT1",34,0)
TECH ;
"RTN","LRHYT1",35,0)
 W !!,"Please swipe your ID badge: " D NINE^LRHYU
"RTN","LRHYT1",36,0)
 I U[X QUIT
"RTN","LRHYT1",37,0)
 I $L(X)'=9 G TECH
"RTN","LRHYT1",38,0)
 ;
"RTN","LRHYT1",39,0)
 ;
"RTN","LRHYT1",40,0)
 ;
"RTN","LRHYT1",41,0)
 K DIC,LRHYTECH
"RTN","LRHYT1",42,0)
 K Y
"RTN","LRHYT1",43,0)
 S DIC=200
"RTN","LRHYT1",44,0)
 S DIC(0)="MQZ"
"RTN","LRHYT1",45,0)
 D ^DIC
"RTN","LRHYT1",46,0)
 W Y
"RTN","LRHYT1",47,0)
 ;
"RTN","LRHYT1",48,0)
 I U[X QUIT
"RTN","LRHYT1",49,0)
 I Y<0 G CONTROL
"RTN","LRHYT1",50,0)
 S (LRHYDUZ,LRHYTECH)=+Y
"RTN","LRHYT1",51,0)
 S LRHYDUZ=$P($G(^VA(200,LRHYDUZ,0)),U)
"RTN","LRHYT1",52,0)
 QUIT
"RTN","LRHYT1",53,0)
 ;
"RTN","LRHYT1",54,0)
TIME ;
"RTN","LRHYT1",55,0)
 ;
"RTN","LRHYT1",56,0)
 ;
"RTN","LRHYT1",57,0)
 ;
"RTN","LRHYT1",58,0)
 S LREND=0
"RTN","LRHYT1",59,0)
 S DIC="^DPT("
"RTN","LRHYT1",60,0)
 S DIC(0)="AEMQZ"
"RTN","LRHYT1",61,0)
 D ^DIC
"RTN","LRHYT1",62,0)
 S DFN=+Y
"RTN","LRHYT1",63,0)
 S LRDFN=$G(^DPT(DFN,"LR"))
"RTN","LRHYT1",64,0)
 D ^VADPT,INP^VADPT
"RTN","LRHYT1",65,0)
 ;
"RTN","LRHYT1",66,0)
 QUIT
"RTN","LRHYT1",67,0)
 ;
"RTN","LRHYT1",68,0)
SINGLE ;
"RTN","LRHYT1",69,0)
 ; This block calls up the testing demographics.
"RTN","LRHYT1",70,0)
 ;
"RTN","LRHYT1",71,0)
 W !!
"RTN","LRHYT1",72,0)
 S LRACC=""
"RTN","LRHYT1",73,0)
 ;
"RTN","LRHYT1",74,0)
 ;
"RTN","LRHYT1",75,0)
 D ^LRHYU4 ; ask for accession ir uid
"RTN","LRHYT1",76,0)
 I LRAN<1 QUIT
"RTN","LRHYT1",77,0)
 D NOW^%DTC
"RTN","LRHYT1",78,0)
 S LRUID=$P(^LRO(68,LRAA,1,LRAD,1,LRAN,.3),U)
"RTN","LRHYT1",79,0)
 S LRCE=+^LRO(68,LRAA,1,LRAD,1,LRAN,.1)
"RTN","LRHYT1",80,0)
 S LRORDT1=$P(^LRO(68,LRAA,1,LRAD,1,LRAN,0),U,4)
"RTN","LRHYT1",81,0)
 S ^TMP("LRHYHOW1",$J,LRORDT1,LRUID)=U_LRHYTECH_U_%
"RTN","LRHYT1",82,0)
 S $P(^TMP("LRHYHOW1",$J,LRORDT1,LRUID),U,9)="RCEV"
"RTN","LRHYT1",83,0)
 I LRAN<1 QUIT
"RTN","LRHYT1",84,0)
 I $G(LRCE) D BUILD^LRHYT2
"RTN","LRHYT1",85,0)
 E  K LRCENO S LRCENO=1 S LRCE=+^LRO(68,LRAA,1,LRAD,1,LRAN,.1) D BUILD^LRHYT2
"RTN","LRHYT1",86,0)
 I $G(LRCENO)=1 K LRCE
"RTN","LRHYT1",87,0)
 ;
"RTN","LRHYT1",88,0)
 I '$D(^LRO(68,LRAA,1,LRAD,1,LRAN,0)) W !,"Doesn't exist." G SINGLE
"RTN","LRHYT1",89,0)
 ; construct orders file entry
"RTN","LRHYT1",90,0)
 K LRKUNKE
"RTN","LRHYT1",91,0)
 S LR3ODT=$P(^LRO(68,LRAA,1,LRAD,1,LRAN,0),U,4)
"RTN","LRHYT1",92,0)
 S LR3SN=$P(^LRO(68,LRAA,1,LRAD,1,LRAN,0),U,5)
"RTN","LRHYT1",93,0)
 ;
"RTN","LRHYT1",94,0)
 S LRTEST=0
"RTN","LRHYT1",95,0)
 K DIR S DIR(0)="E" D ^DIR K DIR
"RTN","LRHYT1",96,0)
 ;
"RTN","LRHYT1",97,0)
 S LRUNC=1
"RTN","LRHYT1",98,0)
 S LRDAT=+$P(^LRO(68,LRAA,1,LRAD,1,LRAN,0),U,4),LRSN=+$P(^(0),U,5)
"RTN","LRHYT1",99,0)
 W @IOF
"RTN","LRHYT1",100,0)
 ;
"RTN","LRHYT1",101,0)
 ;  Adding urgency to the display
"RTN","LRHYT1",102,0)
 S LRTEST=$O(^LRO(68,LRAA,1,LRAD,1,LRAN,4,0))
"RTN","LRHYT1",103,0)
 S LRURG=$P($G(^LRO(68,LRAA,1,LRAD,1,LRAN,4,LRTEST,0)),U,2)
"RTN","LRHYT1",104,0)
 ;
"RTN","LRHYT1",105,0)
 ; Blink urgency if MED-EMERGE
"RTN","LRHYT1",106,0)
 W !,$S($D(^LAB(62.05,+LRURG,0)):$P(^(0),U),1:"")," "
"RTN","LRHYT1",107,0)
 ;
"RTN","LRHYT1",108,0)
 D EDIT
"RTN","LRHYT1",109,0)
 ;
"RTN","LRHYT1",110,0)
 ;
"RTN","LRHYT1",111,0)
 I $G(LREND) W !,"Please start over..." K LREND,LRIDTNEW
"RTN","LRHYT1",112,0)
 D END
"RTN","LRHYT1",113,0)
 ;
"RTN","LRHYT1",114,0)
 QUIT
"RTN","LRHYT1",115,0)
 ;
"RTN","LRHYT1",116,0)
LEFTOVER ;
"RTN","LRHYT1",117,0)
 QUIT
"RTN","LRHYT1",118,0)
 ;
"RTN","LRHYT1",119,0)
END ;
"RTN","LRHYT1",120,0)
 K LRAA,LRAD,LRAN,LRBLOOD,LRARIVE,LRBLOOD,LRCE,LRDAT,LRDFN,LRIDT
"RTN","LRHYT1",121,0)
 K LRDLA,LRDLC,LRDPF,LRDRAW,LRDT0,LRDTO,LRHYDUZ,LRHYNISH,LRPRAC
"RTN","LRHYT1",122,0)
 K LRSN,LRTEST,LRURG,PNM,SSN,VAIN,VADM
"RTN","LRHYT1",123,0)
 QUIT
"RTN","LRHYT1",124,0)
 ;
"RTN","LRHYT1",125,0)
EDIT ;
"RTN","LRHYT1",126,0)
 S LRDFN=$P(^LRO(68,LRAA,1,LRAD,1,LRAN,0),U)
"RTN","LRHYT1",127,0)
 S LRIDT=$P(^LRO(68,LRAA,1,LRAD,1,LRAN,3),U,5) ; old LRIDT
"RTN","LRHYT1",128,0)
CHECK ;
"RTN","LRHYT1",129,0)
 QUIT
"RTN","LRHYT2")
0^24^B3165610^n/a
"RTN","LRHYT2",1,0)
LRHYT2 ;DALOI/HOAK - RCEV CHECK FOR ALL SCANNED ;9/17/2000
"RTN","LRHYT2",2,0)
 ;;5.2;LAB SERVICE;**405**;Sep 27, 1994;Build 93
"RTN","LRHYT2",3,0)
 ;
"RTN","LRHYT2",4,0)
BUILD ;
"RTN","LRHYT2",5,0)
 K ^TMP("LRHY3TST",$J)
"RTN","LRHYT2",6,0)
 ; build a tmp global for all tests on order
"RTN","LRHYT2",7,0)
 W !,"All tests on this order:"
"RTN","LRHYT2",8,0)
 N LR3DT,LR3SN,LR3TST,LRIEN
"RTN","LRHYT2",9,0)
 S LR3DT=0
"RTN","LRHYT2",10,0)
 F  S LR3DT=$O(^LRO(69,"C",LRCE,LR3DT)) Q:+LR3DT'>0  D
"RTN","LRHYT2",11,0)
 .  S LR3SN=0
"RTN","LRHYT2",12,0)
 .  F  S LR3SN=$O(^LRO(69,"C",LRCE,LR3DT,LR3SN)) Q:+LR3SN'>0  D
"RTN","LRHYT2",13,0)
 ..  S LR3TST=0 S LRIEN=0
"RTN","LRHYT2",14,0)
 ..  S LR3NX0=$G(^LRO(69,LR3DT,1,LR3SN,0))
"RTN","LRHYT2",15,0)
 ..  F  S LR3TST=$O(^LRO(69,LR3DT,1,LR3SN,2,"B",LR3TST)) Q:+LR3TST'>0  D
"RTN","LRHYT2",16,0)
 ...  S LRIEN=0 S LRIEN=$O(^LRO(69,LR3DT,1,LR3SN,2,"B",LR3TST,0))
"RTN","LRHYT2",17,0)
 ...  K LRNPEED
"RTN","LRHYT2",18,0)
 ...  I $D(^LRO(69,LR3DT,1,LR3SN,2,LRIEN,1.1)) D
"RTN","LRHYT2",19,0)
 ....  S LRNPEED=$G(^LRO(69,LR3DT,1,LR3SN,2,LRIEN,1.1,1,0))
"RTN","LRHYT2",20,0)
 ...  S ^TMP("LRHY3TST",$J,LRCE,LR3TST)=""
"RTN","LRHYT2",21,0)
 ...  ;
"RTN","LRHYT2",22,0)
 ...  S LRACC6="" N LRAD,LRAN,LRAA,LRN  D ACCN
"RTN","LRHYT2",23,0)
 ...  S LRURGNCY=+$P(^LRO(69,LR3DT,1,LR3SN,2,LRIEN,0),U,2)
"RTN","LRHYT2",24,0)
 ...  I LRURGNCY S LRURGNCY=$P(^LAB(62.05,LRURGNCY,0),U)
"RTN","LRHYT2",25,0)
 ...  W !,$E($G(LRACC6),1,14),?15,$P($G(^LAB(60,LR3TST,0)),U)
"RTN","LRHYT2",26,0)
 ...  W ?40,$G(LRURGNCY)
"RTN","LRHYT2",27,0)
 ...  I $G(LRNPEED)'="" W !,?20,$G(LRNPEED)
"RTN","LRHYT2",28,0)
 W ! F LRHYI=1:1:79 W "-"
"RTN","LRHYT2",29,0)
 W !
"RTN","LRHYT2",30,0)
 ;
"RTN","LRHYT2",31,0)
 QUIT
"RTN","LRHYT2",32,0)
REMOVE ;
"RTN","LRHYT2",33,0)
 ;
"RTN","LRHYT2",34,0)
 ;
"RTN","LRHYT2",35,0)
 QUIT
"RTN","LRHYT2",36,0)
ACCN ;
"RTN","LRHYT2",37,0)
 S LRN=$G(^LRO(69,LR3DT,1,LR3SN,2,LRIEN,0))
"RTN","LRHYT2",38,0)
 Q:'LRN
"RTN","LRHYT2",39,0)
 S LRAD=$P(LRN,U,3)
"RTN","LRHYT2",40,0)
 I 'LRAD S LRACC="--" QUIT
"RTN","LRHYT2",41,0)
 S LRAA=$P(LRN,U,4) S LRAN=$P(LRN,U,5)
"RTN","LRHYT2",42,0)
 S LRACC6=$E($P(^LRO(68,LRAA,0),U,11),1,2)_" "_$E(LRAD,4,7)_" "_LRAN
"RTN","LRHYT2",43,0)
 QUIT
"RTN","LRHYU")
0^25^B3762458^n/a
"RTN","LRHYU",1,0)
LRHYU ;DALOI/HOAK - HOWDY UTILITY CALLS 08/28/2005 ;12/1/10 11:29am
"RTN","LRHYU",2,0)
 ;;5.2;LAB SERVICE;**405**;Sep 27, 1994;Build 93
"RTN","LRHYU",3,0)
 ; 
"RTN","LRHYU",4,0)
 ; Reference to DUZ^XUP supported by DBIA #4129
"RTN","LRHYU",5,0)
 ;
"RTN","LRHYU",6,0)
 ; This routine is looking for anomilies related to the specimen
"RTN","LRHYU",7,0)
DUP ; from LRHYPH2 are there any duplicate tests
"RTN","LRHYU",8,0)
 S LRDUPT=0
"RTN","LRHYU",9,0)
 Q:+LRSN'>0  D
"RTN","LRHYU",10,0)
 .  S LRHT1=0
"RTN","LRHYU",11,0)
 .  F  S LRHT1=$O(^LRO(69,LRODT,1,LRSN,2,"B",LRHT1)) Q:+LRHT1'>0  D
"RTN","LRHYU",12,0)
 ..  I $D(^TMP("LRHYDY",$J,"LRHYDY",$J,LRDFN,LRORD,LRHT1)) S LRDUPT=1 QUIT
"RTN","LRHYU",13,0)
 QUIT
"RTN","LRHYU",14,0)
EDIT ;
"RTN","LRHYU",15,0)
 ; Enable editing of Howdy site file
"RTN","LRHYU",16,0)
 S (DIB,DIE)=69.86 D EN^DIB
"RTN","LRHYU",17,0)
 QUIT
"RTN","LRHYU",18,0)
D1 ;
"RTN","LRHYU",19,0)
 ; Check for specimen containing tests not to be accessioned.
"RTN","LRHYU",20,0)
 S LRHT1=0
"RTN","LRHYU",21,0)
 F  S LRHT1=$O(^LRO(69,LRODT,1,LRSN,2,"B",LRHT1)) Q:+LRHT1'>0  D
"RTN","LRHYU",22,0)
 .  S ^TMP("LRHYDY",$J,"LRHYDY",$J,LRDFN,LRORD,LRHT1)=""
"RTN","LRHYU",23,0)
 QUIT
"RTN","LRHYU",24,0)
NINE ;
"RTN","LRHYU",25,0)
 S DIR(0)="FUO^9:9"
"RTN","LRHYU",26,0)
 S DIR("A")="Please scan your ID badge"
"RTN","LRHYU",27,0)
 D ^DIR
"RTN","LRHYU",28,0)
 QUIT
"RTN","LRHYU",29,0)
XTMP ;
"RTN","LRHYU",30,0)
 N X,X1,X2
"RTN","LRHYU",31,0)
 S X1=DT,X2=365 D C^%DTC
"RTN","LRHYU",32,0)
 ;   ^XTMP(namespaced- subscript,0)=purge date^create date^optional 
"RTN","LRHYU",33,0)
 S ^XTMP("LRHY LABELS",0)=X_U_DT
"RTN","LRHYU",34,0)
 K ^TMP("LRHYDY",$J)
"RTN","LRHYU",35,0)
 K ^TMP("LRHYHOW1",$J)
"RTN","LRHYU",36,0)
 K ^TMP("LRHY ASH",$J)
"RTN","LRHYU",37,0)
 K ^TMP("LRHY3TST",$J)
"RTN","LRHYU",38,0)
 QUIT
"RTN","LRHYU",39,0)
USER ;
"RTN","LRHYU",40,0)
 I '$G(LRHYSITE) S DIC=69.86,DIC(0)="AEMQZ" D ^DIC S LRHYSITE=+Y
"RTN","LRHYU",41,0)
 I '$G(LRHYSITE) W !,"SITE NOT SELECTED" H 2 QUIT
"RTN","LRHYU",42,0)
 K LRHYUSER S LRHYUSER=DUZ
"RTN","LRHYU",43,0)
 IF '$D(^LRHY(69.86,LRHYSITE,56)) W !,"NO HOWDY USER DEFINED. PERSON SIGNED ON WILL BE USED." QUIT
"RTN","LRHYU",44,0)
 IF $D(^LRHY(69.86,LRHYSITE,56)) N LRX S LRX=$G(^LRHY(69.86,LRHYSITE,56))
"RTN","LRHYU",45,0)
 IF $G(LRX) D DUZ^XUP(LRX)
"RTN","LRHYU",46,0)
 W !,$P(^VA(200,DUZ,0),U)," IS THE HOWDY USER."
"RTN","LRHYU",47,0)
 QUIT
"RTN","LRHYU",48,0)
BAKUSER ;
"RTN","LRHYU",49,0)
 QUIT
"RTN","LRHYU",50,0)
 IF $G(LRHYUSER) D DUZ^XUP(LRHYUSER)
"RTN","LRHYU",51,0)
 K LRHYUSER
"RTN","LRHYU4")
0^26^B116774^n/a
"RTN","LRHYU4",1,0)
LRHYU4 ;DALOI/HOAK - GET THE LAB UID ;08/28/2005
"RTN","LRHYU4",2,0)
 ;;5.2;LAB SERVICE;**405**;Sep 27, 1994;Build 93
"RTN","LRHYU4",3,0)
 ;
"RTN","LRHYU4",4,0)
 ; Reference to ^DIC supported by DBIA #916.
"RTN","LRHYU4",5,0)
 ;
"RTN","LRHYU4",6,0)
 ; Get the accession number or order number or universal ID
"RTN","LRHYU4",7,0)
 ;
"RTN","LRHYU4",8,0)
AA ;
"RTN","LRHYU4",9,0)
 ;
"RTN","LRHYU4",10,0)
 I $G(LRORDSIZ) S LRORDSIZ=$L(LRORDSIZ)
"RTN","LRHYU4",11,0)
 S LRACC="" D ^LRWU4
"RTN","LRHYU4",12,0)
 QUIT
"RTN","LRHYU5")
0^27^B83020^n/a
"RTN","LRHYU5",1,0)
LRHYU5 ;DALOI/HOAK - HOWDY UTILITY CALLS ;12/10/10 5:59pm
"RTN","LRHYU5",2,0)
 ;;5.2;LAB SERVICE;**405**;Sep 27, 1994;Build 93
"RTN","LRHYU5",3,0)
 ;
"RTN","LRHYU5",4,0)
 ; Reference to ^DIC supported by DBIA #916.
"RTN","LRHYU5",5,0)
 ;
"RTN","LRHYU5",6,0)
 ; Get the accession number or order number or universal ID
"RTN","LRHYU5",7,0)
 ;
"RTN","LRHYU5",8,0)
AA W !,"Scan label UID bar code: "
"RTN","LRHYU5",9,0)
 ;
"RTN","LRHYU5",10,0)
 D ^LRHYU4
"RTN","LRHYU5",11,0)
 QUIT
"RTN","LRHYUTL")
0^28^B160482^n/a
"RTN","LRHYUTL",1,0)
LRHYUTL ;DALOI/HOAK - UNIVERSAL UTILITY ;08/31/2005
"RTN","LRHYUTL",2,0)
 ;;5.2;LAB SERVICE;**405**;Sep 27, 1994;Build 93
"RTN","LRHYUTL",3,0)
 ;
"RTN","LRHYUTL",4,0)
 ; This routine is used to enhance display processes for Vista.
"RTN","LRHYUTL",5,0)
 ;
"RTN","LRHYUTL",6,0)
 ;
"RTN","LRHYUTL",7,0)
GRAFON ;
"RTN","LRHYUTL",8,0)
 D GSET^%ZISS
"RTN","LRHYUTL",9,0)
 QUIT
"RTN","LRHYUTL",10,0)
GRAFOFF ;
"RTN","LRHYUTL",11,0)
 W IOG0 D GKILL^%ZISS
"RTN","LRHYUTL",12,0)
 QUIT
"RTN","LRHYUTL",13,0)
SCRNON ;
"RTN","LRHYUTL",14,0)
 N X,Y
"RTN","LRHYUTL",15,0)
 D ENS^%ZISS
"RTN","LRHYUTL",16,0)
 QUIT
"RTN","LRHYUTL",17,0)
SCRNOFF ;
"RTN","LRHYUTL",18,0)
 N X,Y
"RTN","LRHYUTL",19,0)
 D KILL^%ZISS
"RTN","LRHYUTL",20,0)
 ;
"RTN","LRHYUTL",21,0)
 QUIT
"SEC","^DIC",69.86,69.86,0,"AUDIT")

"SEC","^DIC",69.86,69.86,0,"DD")

"SEC","^DIC",69.86,69.86,0,"DEL")

"SEC","^DIC",69.86,69.86,0,"LAYGO")

"SEC","^DIC",69.86,69.86,0,"RD")

"SEC","^DIC",69.86,69.86,0,"WR")

"SEC","^DIC",69.87,69.87,0,"AUDIT")

"SEC","^DIC",69.87,69.87,0,"DD")

"SEC","^DIC",69.87,69.87,0,"DEL")

"SEC","^DIC",69.87,69.87,0,"LAYGO")

"SEC","^DIC",69.87,69.87,0,"RD")

"SEC","^DIC",69.87,69.87,0,"WR")

"VER")
8.0^22.0
"^DD",69.86,69.86,0)
FIELD^^54^20
"^DD",69.86,69.86,0,"DDA")
N
"^DD",69.86,69.86,0,"DT")
3111009
"^DD",69.86,69.86,0,"IX","B",69.86,.01)

"^DD",69.86,69.86,0,"NM","HOWDY SITE FILE")

"^DD",69.86,69.86,0,"VRPK")
LR
"^DD",69.86,69.86,.01,0)
NAME^RF^^0;1^K:$L(X)>30!(X?.N)!($L(X)<3)!'(X'?1P.E) X
"^DD",69.86,69.86,.01,1,0)
^.1
"^DD",69.86,69.86,.01,1,1,0)
69.86^B
"^DD",69.86,69.86,.01,1,1,1)
S ^LRHY(69.86,"B",$E(X,1,30),DA)=""
"^DD",69.86,69.86,.01,1,1,2)
K ^LRHY(69.86,"B",$E(X,1,30),DA)
"^DD",69.86,69.86,.01,3)
NAME MUST BE 3-30 CHARACTERS, NOT NUMERIC OR STARTING WITH PUNCTUATION
"^DD",69.86,69.86,2,0)
LAB TEST (TO EXCLUDE)^69.862P^^2;0
"^DD",69.86,69.86,4,0)
COLLECTION SAMPLE (TO EXCLUDE)^69.864P^^4;0
"^DD",69.86,69.86,6,0)
SITE SPECIMEN (TO EXCLUDE)^69.861P^^6;0
"^DD",69.86,69.86,8,0)
COLLECTION TYPES (TO EXCLUDE)^69.868S^^8;0
"^DD",69.86,69.86,10,0)
LABEL PRINTERS^69.863P^^10;0
"^DD",69.86,69.86,11,0)
ORDER LABEL ROUTINE^F^^11;1^K:$L(X)>8!($L(X)<3) X
"^DD",69.86,69.86,11,3)
Answer must be 3-8 characters in length.
"^DD",69.86,69.86,11,21,0)
^^1^1^3110204^
"^DD",69.86,69.86,11,21,1,0)
The name of the routine to print order labels.
"^DD",69.86,69.86,11,"DT")
3110204
"^DD",69.86,69.86,16,0)
EXCLUDE CLINICS^69.8616P^^16;0
"^DD",69.86,69.86,18,0)
CHECK FOR FUTURE ORDERS (DAYS)^F^^18;1^K:$L(X)>3!($L(X)<1) X
"^DD",69.86,69.86,18,3)
Answer must be 1-3 characters in length.
"^DD",69.86,69.86,18,21,0)
^^1^1^3110204^
"^DD",69.86,69.86,18,21,1,0)
The number of days Howdy searches for orders in the future.
"^DD",69.86,69.86,18,"DT")
3110204
"^DD",69.86,69.86,20,0)
CHECK FOR PAST ORDERS (DAYS)^F^^20;1^K:$L(X)>3!($L(X)<1) X
"^DD",69.86,69.86,20,3)
Answer must be 1-3 characters in length.
"^DD",69.86,69.86,20,21,0)
^^1^1^3110204^
"^DD",69.86,69.86,20,21,1,0)
The number of days Howdy searches for orders in the past
"^DD",69.86,69.86,20,"DT")
3110204
"^DD",69.86,69.86,25,0)
ORDER LABEL TESTS^69.8625P^^25;0
"^DD",69.86,69.86,30,0)
EXCLUDE URGENCY^69.867P^^30;0
"^DD",69.86,69.86,32,0)
GREETING^69.8632^^32;0
"^DD",69.86,69.86,40,0)
WELCOME TO^F^^40;1^K:$L(X)>80!($L(X)<1) X
"^DD",69.86,69.86,40,3)
Answer must be 1-80 characters in length.
"^DD",69.86,69.86,40,21,0)
^^1^1^3110204^
"^DD",69.86,69.86,40,21,1,0)
Welcome statement.
"^DD",69.86,69.86,40,"DT")
3110204
"^DD",69.86,69.86,42,0)
YOUR HOST IS^F^^42;1^K:$L(X)>80!($L(X)<1) X
"^DD",69.86,69.86,42,3)
Answer must be 1-80 characters in length.
"^DD",69.86,69.86,42,21,0)
^^1^1^3110204^
"^DD",69.86,69.86,42,21,1,0)
Name of the host. (Chief P&LM)
"^DD",69.86,69.86,42,"DT")
3110204
"^DD",69.86,69.86,44,0)
HOST TITLE^F^^44;1^K:$L(X)>80!($L(X)<1) X
"^DD",69.86,69.86,44,3)
Answer must be 1-80 characters in length.
"^DD",69.86,69.86,44,21,0)
^^1^1^3110204^
"^DD",69.86,69.86,44,21,1,0)
Title of the Host
"^DD",69.86,69.86,44,"DT")
3110204
"^DD",69.86,69.86,45,0)
SPACER LABEL PRINTER^69.8645P^^45;0
"^DD",69.86,69.86,52,0)
DELETE SAME DAY DUPLICATES^S^Y:YES;N:NO;^52;1^Q
"^DD",69.86,69.86,52,21,0)
^.001^1^1^3111009^^
"^DD",69.86,69.86,52,21,1,0)
Used to delete duplicate lab tests from the same day.
"^DD",69.86,69.86,52,"DT")
3111009
"^DD",69.86,69.86,54,0)
BINGO BOARD DEVICE^69.8654P^^54;0
"^DD",69.86,69.86,56,0)
HOWDY BOT^P200'^VA(200,^56;1^Q
"^DD",69.86,69.86,56,21,0)
^^1^1^3110206^
"^DD",69.86,69.86,56,21,1,0)
Used to run Howdy as a non human user.
"^DD",69.86,69.86,56,"DT")
3110206
"^DD",69.86,69.861,0)
SITE SPECIMEN (TO EXCLUDE) SUB-FIELD^^.01^1
"^DD",69.86,69.861,0,"DT")
3110204
"^DD",69.86,69.861,0,"IX","B",69.861,.01)

"^DD",69.86,69.861,0,"NM","SITE SPECIMEN (TO EXCLUDE)")

"^DD",69.86,69.861,0,"UP")
69.86
"^DD",69.86,69.861,.01,0)
SITE SPECIMEN (TO EXCLUDE)^MP61'^LAB(61,^0;1^Q
"^DD",69.86,69.861,.01,1,0)
^.1
"^DD",69.86,69.861,.01,1,1,0)
69.861^B
"^DD",69.86,69.861,.01,1,1,1)
S ^LRHY(69.86,DA(1),6,"B",$E(X,1,30),DA)=""
"^DD",69.86,69.861,.01,1,1,2)
K ^LRHY(69.86,DA(1),6,"B",$E(X,1,30),DA)
"^DD",69.86,69.861,.01,21,0)
^^1^1^3110204^
"^DD",69.86,69.861,.01,21,1,0)
Site specimens to be excluded when Howdy runs.
"^DD",69.86,69.861,.01,"DT")
3110204
"^DD",69.86,69.8616,0)
EXCLUDE CLINICS SUB-FIELD^^.01^1
"^DD",69.86,69.8616,0,"DT")
3110204
"^DD",69.86,69.8616,0,"IX","B",69.8616,.01)

"^DD",69.86,69.8616,0,"NM","EXCLUDE CLINICS")

"^DD",69.86,69.8616,0,"UP")
69.86
"^DD",69.86,69.8616,.01,0)
EXCLUDE CLINICS^MP44'^SC(^0;1^Q
"^DD",69.86,69.8616,.01,1,0)
^.1
"^DD",69.86,69.8616,.01,1,1,0)
69.8616^B
"^DD",69.86,69.8616,.01,1,1,1)
S ^LRHY(69.86,DA(1),16,"B",$E(X,1,30),DA)=""
"^DD",69.86,69.8616,.01,1,1,2)
K ^LRHY(69.86,DA(1),16,"B",$E(X,1,30),DA)
"^DD",69.86,69.8616,.01,21,0)
^^7^7^3111013^
"^DD",69.86,69.8616,.01,21,1,0)
This field allows you to exclude the accessioning of orders from those 
"^DD",69.86,69.8616,.01,21,2,0)
specialty clinics unless the collection date is for Today (multiple 
"^DD",69.86,69.8616,.01,21,3,0)
clinics allowed).
"^DD",69.86,69.8616,.01,21,4,0)
 
"^DD",69.86,69.8616,.01,21,5,0)
Note: If the order is for today for the "excluded" clinic, the order will 
"^DD",69.86,69.8616,.01,21,6,0)
accession. If there is an order put in for TOMORROW, and you run the 
"^DD",69.86,69.8616,.01,21,7,0)
program, it will ignore that order.
"^DD",69.86,69.8616,.01,"DT")
3110204
"^DD",69.86,69.862,0)
LAB TEST (TO EXCLUDE) SUB-FIELD^^.01^1
"^DD",69.86,69.862,0,"DT")
3110204
"^DD",69.86,69.862,0,"IX","B",69.862,.01)

"^DD",69.86,69.862,0,"NM","LAB TEST (TO EXCLUDE)")

"^DD",69.86,69.862,0,"UP")
69.86
"^DD",69.86,69.862,.01,0)
LAB TEST (TO EXCLUDE)^MP60'^LAB(60,^0;1^Q
"^DD",69.86,69.862,.01,1,0)
^.1
"^DD",69.86,69.862,.01,1,1,0)
69.862^B
"^DD",69.86,69.862,.01,1,1,1)
S ^LRHY(69.86,DA(1),2,"B",$E(X,1,30),DA)=""
"^DD",69.86,69.862,.01,1,1,2)
K ^LRHY(69.86,DA(1),2,"B",$E(X,1,30),DA)
"^DD",69.86,69.862,.01,21,0)
^^1^1^3110204^
"^DD",69.86,69.862,.01,21,1,0)
Lab test that should be excluded when Howdy runs.
"^DD",69.86,69.862,.01,"DT")
3110204
"^DD",69.86,69.8625,0)
ORDER LABEL TESTS SUB-FIELD^^.01^1
"^DD",69.86,69.8625,0,"DT")
3110204
"^DD",69.86,69.8625,0,"IX","B",69.8625,.01)

"^DD",69.86,69.8625,0,"NM","ORDER LABEL TESTS")

"^DD",69.86,69.8625,0,"UP")
69.86
"^DD",69.86,69.8625,.01,0)
ORDER LABEL TESTS^MP60'^LAB(60,^0;1^Q
"^DD",69.86,69.8625,.01,1,0)
^.1
"^DD",69.86,69.8625,.01,1,1,0)
69.8625^B
"^DD",69.86,69.8625,.01,1,1,1)
S ^LRHY(69.86,DA(1),25,"B",$E(X,1,30),DA)=""
"^DD",69.86,69.8625,.01,1,1,2)
K ^LRHY(69.86,DA(1),25,"B",$E(X,1,30),DA)
"^DD",69.86,69.8625,.01,21,0)
^^1^1^3110204^
"^DD",69.86,69.8625,.01,21,1,0)
The test which will print order labels.
"^DD",69.86,69.8625,.01,"DT")
3110204
"^DD",69.86,69.863,0)
LABEL PRINTERS SUB-FIELD^^.01^1
"^DD",69.86,69.863,0,"DT")
3110204
"^DD",69.86,69.863,0,"IX","B",69.863,.01)

"^DD",69.86,69.863,0,"NM","LABEL PRINTERS")

"^DD",69.86,69.863,0,"UP")
69.86
"^DD",69.86,69.863,.01,0)
LABEL PRINTERS^MP3.5'^%ZIS(1,^0;1^Q
"^DD",69.86,69.863,.01,1,0)
^.1
"^DD",69.86,69.863,.01,1,1,0)
69.863^B
"^DD",69.86,69.863,.01,1,1,1)
S ^LRHY(69.86,DA(1),10,"B",$E(X,1,30),DA)=""
"^DD",69.86,69.863,.01,1,1,2)
K ^LRHY(69.86,DA(1),10,"B",$E(X,1,30),DA)
"^DD",69.86,69.863,.01,21,0)
^^1^1^3110204^
"^DD",69.86,69.863,.01,21,1,0)
Label printers used with Howdy.
"^DD",69.86,69.863,.01,"DT")
3110204
"^DD",69.86,69.8632,0)
GREETING SUB-FIELD^^.01^1
"^DD",69.86,69.8632,0,"DT")
3110204
"^DD",69.86,69.8632,0,"NM","GREETING")

"^DD",69.86,69.8632,0,"UP")
69.86
"^DD",69.86,69.8632,.01,0)
GREETING^Wx^^0;1^Q
"^DD",69.86,69.8632,.01,21,0)
^^1^1^3110204^
"^DD",69.86,69.8632,.01,21,1,0)
The greeting displayed to the Veteran.
"^DD",69.86,69.8632,.01,"DT")
3110204
"^DD",69.86,69.864,0)
COLLECTION SAMPLE (TO EXCLUDE) SUB-FIELD^^.01^1
"^DD",69.86,69.864,0,"DT")
3110204
"^DD",69.86,69.864,0,"IX","B",69.864,.01)

"^DD",69.86,69.864,0,"NM","COLLECTION SAMPLE (TO EXCLUDE)")

"^DD",69.86,69.864,0,"UP")
69.86
"^DD",69.86,69.864,.01,0)
COLLECTION SAMPLE (TO EXCLUDE)^MP62'^LAB(62,^0;1^Q
"^DD",69.86,69.864,.01,1,0)
^.1
"^DD",69.86,69.864,.01,1,1,0)
69.864^B
"^DD",69.86,69.864,.01,1,1,1)
S ^LRHY(69.86,DA(1),4,"B",$E(X,1,30),DA)=""
"^DD",69.86,69.864,.01,1,1,2)
K ^LRHY(69.86,DA(1),4,"B",$E(X,1,30),DA)
"^DD",69.86,69.864,.01,21,0)
^.001^1^1^3110204^^
"^DD",69.86,69.864,.01,21,1,0)
Collection sample to be excluded when Howdy runs.
"^DD",69.86,69.864,.01,"DT")
3110204
"^DD",69.86,69.8645,0)
SPACER LABEL PRINTER SUB-FIELD^^.01^1
"^DD",69.86,69.8645,0,"DT")
3110209
"^DD",69.86,69.8645,0,"IX","B",69.8645,.01)

"^DD",69.86,69.8645,0,"NM","SPACER LABEL PRINTER")

"^DD",69.86,69.8645,0,"UP")
69.86
"^DD",69.86,69.8645,.01,0)
SPACER LABEL PRINTER^MP3.5'^%ZIS(1,^0;1^Q
"^DD",69.86,69.8645,.01,1,0)
^.1
"^DD",69.86,69.8645,.01,1,1,0)
69.8645^B
"^DD",69.86,69.8645,.01,1,1,1)
S ^LRHY(69.86,DA(1),45,"B",$E(X,1,30),DA)=""
"^DD",69.86,69.8645,.01,1,1,2)
K ^LRHY(69.86,DA(1),45,"B",$E(X,1,30),DA)
"^DD",69.86,69.8645,.01,21,0)
^^1^1^3110209^
"^DD",69.86,69.8645,.01,21,1,0)
Used for the name of the printer that is used to print a spacer label.
"^DD",69.86,69.8645,.01,"DT")
3110209
"^DD",69.86,69.8654,0)
BINGO BOARD DEVICE SUB-FIELD^^.01^1
"^DD",69.86,69.8654,0,"DT")
3110209
"^DD",69.86,69.8654,0,"IX","B",69.8654,.01)

"^DD",69.86,69.8654,0,"NM","BINGO BOARD DEVICE")

"^DD",69.86,69.8654,0,"UP")
69.86
"^DD",69.86,69.8654,.01,0)
BINGO BOARD DEVICE^MP3.5^%ZIS(1,^0;1^Q
"^DD",69.86,69.8654,.01,1,0)
^.1
"^DD",69.86,69.8654,.01,1,1,0)
69.8654^B
"^DD",69.86,69.8654,.01,1,1,1)
S ^LRHY(69.86,DA(1),54,"B",$E(X,1,30),DA)=""
"^DD",69.86,69.8654,.01,1,1,2)
K ^LRHY(69.86,DA(1),54,"B",$E(X,1,30),DA)
"^DD",69.86,69.8654,.01,21,0)
^^1^1^3110209^
"^DD",69.86,69.8654,.01,21,1,0)
This is the bingo board device.
"^DD",69.86,69.8654,.01,"DT")
3110209
"^DD",69.86,69.867,0)
EXCLUDE URGENCY SUB-FIELD^^.01^1
"^DD",69.86,69.867,0,"DT")
3110204
"^DD",69.86,69.867,0,"IX","B",69.867,.01)

"^DD",69.86,69.867,0,"NM","EXCLUDE URGENCY")

"^DD",69.86,69.867,0,"UP")
69.86
"^DD",69.86,69.867,.01,0)
EXCLUDE URGENCY^MP62.05'^LAB(62.05,^0;1^Q
"^DD",69.86,69.867,.01,1,0)
^.1
"^DD",69.86,69.867,.01,1,1,0)
69.867^B
"^DD",69.86,69.867,.01,1,1,1)
S ^LRHY(69.86,DA(1),30,"B",$E(X,1,30),DA)=""
"^DD",69.86,69.867,.01,1,1,2)
K ^LRHY(69.86,DA(1),30,"B",$E(X,1,30),DA)
"^DD",69.86,69.867,.01,21,0)
^.001^1^1^3110204^^
"^DD",69.86,69.867,.01,21,1,0)
Urgencies that will be excluded when Howdy runs.
"^DD",69.86,69.867,.01,"DT")
3110204
"^DD",69.86,69.868,0)
COLLECTION TYPES (TO EXCLUDE) SUB-FIELD^^.01^1
"^DD",69.86,69.868,0,"DT")
3110427
"^DD",69.86,69.868,0,"IX","B",69.868,.01)

"^DD",69.86,69.868,0,"NM","COLLECTION TYPES (TO EXCLUDE)")

"^DD",69.86,69.868,0,"UP")
69.86
"^DD",69.86,69.868,.01,0)
COLLECTION TYPES (TO EXCLUDE)^MS^LC:LAB COLLECTION;WC:WARD COLLECTION;SP:SEND PATIENT TO THE LAB;IC:IMMEDIATE COLLECT;^0;1^Q
"^DD",69.86,69.868,.01,1,0)
^.1
"^DD",69.86,69.868,.01,1,1,0)
69.868^B
"^DD",69.86,69.868,.01,1,1,1)
S ^LRHY(69.86,DA(1),8,"B",$E(X,1,30),DA)=""
"^DD",69.86,69.868,.01,1,1,2)
K ^LRHY(69.86,DA(1),8,"B",$E(X,1,30),DA)
"^DD",69.86,69.868,.01,21,0)
^.001^1^1^3110427^^^^
"^DD",69.86,69.868,.01,21,1,0)
Collection types to be excluded when Howdy runs.
"^DD",69.86,69.868,.01,"DT")
3110427
"^DD",69.87,69.87,0)
FIELD^^12^7
"^DD",69.87,69.87,0,"DDA")
N
"^DD",69.87,69.87,0,"DT")
3100114
"^DD",69.87,69.87,0,"IX","ARIV",69.87,10)

"^DD",69.87,69.87,0,"IX","B",69.87,.01)

"^DD",69.87,69.87,0,"IX","COLT",69.87,8)

"^DD",69.87,69.87,0,"IX","LT",69.87,4)

"^DD",69.87,69.87,0,"IX","SCAN",69.87,2)

"^DD",69.87,69.87,0,"IX","TECH",69.87,6)

"^DD",69.87,69.87,0,"NM","HOWDY SPECIMEN TIMES BY UID")

"^DD",69.87,69.87,0,"VRPK")
LR
"^DD",69.87,69.87,.01,0)
SPECIMEN UID^RF^^0;1^K:$L(X)>10!($L(X)<10) X
"^DD",69.87,69.87,.01,1,0)
^.1
"^DD",69.87,69.87,.01,1,1,0)
69.87^B
"^DD",69.87,69.87,.01,1,1,1)
S ^LRHY(69.87,"B",$E(X,1,30),DA)=""
"^DD",69.87,69.87,.01,1,1,2)
K ^LRHY(69.87,"B",$E(X,1,30),DA)
"^DD",69.87,69.87,.01,3)
Answer must be 10 characters in length.
"^DD",69.87,69.87,.01,21,0)
^^1^1^3101109^
"^DD",69.87,69.87,.01,21,1,0)
This field contains the universal identification number (UID).
"^DD",69.87,69.87,.01,"DT")
3101109
"^DD",69.87,69.87,2,0)
INITIAL SCAN TIME^D^^2;1^S %DT="ET" D ^%DT S X=Y K:Y<1 X
"^DD",69.87,69.87,2,1,0)
^.1
"^DD",69.87,69.87,2,1,1,0)
69.87^SCAN
"^DD",69.87,69.87,2,1,1,1)
S ^LRHY(69.87,"SCAN",$E(X,1,30),DA)=""
"^DD",69.87,69.87,2,1,1,2)
K ^LRHY(69.87,"SCAN",$E(X,1,30),DA)
"^DD",69.87,69.87,2,1,1,"%D",0)
^^1^1^3090301^
"^DD",69.87,69.87,2,1,1,"%D",1,0)
xref the initial scan field
"^DD",69.87,69.87,2,1,1,"DT")
3090301
"^DD",69.87,69.87,2,21,0)
^^2^2^3101109^
"^DD",69.87,69.87,2,21,1,0)
This field contains the date and time a patient scans their VIC at the
"^DD",69.87,69.87,2,21,2,0)
Howdy station.
"^DD",69.87,69.87,2,"DT")
3101109
"^DD",69.87,69.87,4,0)
TIME LABELS PRINTED^D^^4;1^S %DT="ET" D ^%DT S X=Y K:Y<1 X
"^DD",69.87,69.87,4,1,0)
^.1
"^DD",69.87,69.87,4,1,1,0)
69.87^LT
"^DD",69.87,69.87,4,1,1,1)
S ^LRHY(69.87,"LT",$E(X,1,30),DA)=""
"^DD",69.87,69.87,4,1,1,2)
K ^LRHY(69.87,"LT",$E(X,1,30),DA)
"^DD",69.87,69.87,4,1,1,"%D",0)
^.101^1^1^3100728^^^
"^DD",69.87,69.87,4,1,1,"%D",1,0)
This xref is the time the labels were printed
"^DD",69.87,69.87,4,1,1,"DT")
3090301
"^DD",69.87,69.87,4,21,0)
^.001^1^1^3100728^^^
"^DD",69.87,69.87,4,21,1,0)
This field contains the date and time the Phlebotomist prints the specimen labels.
"^DD",69.87,69.87,4,"DT")
3090301
"^DD",69.87,69.87,6,0)
COLLECTOR^P200'^VA(200,^6;1^Q
"^DD",69.87,69.87,6,1,0)
^.1
"^DD",69.87,69.87,6,1,1,0)
69.87^TECH
"^DD",69.87,69.87,6,1,1,1)
S ^LRHY(69.87,"TECH",$E(X,1,30),DA)=""
"^DD",69.87,69.87,6,1,1,2)
K ^LRHY(69.87,"TECH",$E(X,1,30),DA)
"^DD",69.87,69.87,6,1,1,"%D",0)
^^1^1^3090325^
"^DD",69.87,69.87,6,1,1,"%D",1,0)
This is the Phlebotomist who signed in.
"^DD",69.87,69.87,6,1,1,"DT")
3090325
"^DD",69.87,69.87,6,21,0)
^^2^2^3101109^
"^DD",69.87,69.87,6,21,1,0)
This field contains the name of the person who collects the specimen.  
"^DD",69.87,69.87,6,21,2,0)
Usually, this is the person who scanned their ID badge.
"^DD",69.87,69.87,6,"DT")
3101109
"^DD",69.87,69.87,8,0)
COLLECTION TIME^D^^8;1^S %DT="ET" D ^%DT S X=Y K:Y<1 X
"^DD",69.87,69.87,8,1,0)
^.1
"^DD",69.87,69.87,8,1,1,0)
69.87^COLT
"^DD",69.87,69.87,8,1,1,1)
S ^LRHY(69.87,"COLT",$E(X,1,30),DA)=""
"^DD",69.87,69.87,8,1,1,2)
K ^LRHY(69.87,"COLT",$E(X,1,30),DA)
"^DD",69.87,69.87,8,1,1,"%D",0)
^^1^1^3090301^
"^DD",69.87,69.87,8,1,1,"%D",1,0)
This xref if is for the specimen collection time
"^DD",69.87,69.87,8,1,1,"DT")
3090301
"^DD",69.87,69.87,8,21,0)
^.001^1^1^3090301^^
"^DD",69.87,69.87,8,21,1,0)
This field contains the time the specimen was collected.
"^DD",69.87,69.87,8,"DT")
3090301
"^DD",69.87,69.87,10,0)
LAB ARRIVAL TIME^D^^10;1^S %DT="ET" D ^%DT S X=Y K:Y<1 X
"^DD",69.87,69.87,10,1,0)
^.1
"^DD",69.87,69.87,10,1,1,0)
69.87^ARIV
"^DD",69.87,69.87,10,1,1,1)
S ^LRHY(69.87,"ARIV",$E(X,1,30),DA)=""
"^DD",69.87,69.87,10,1,1,2)
K ^LRHY(69.87,"ARIV",$E(X,1,30),DA)
"^DD",69.87,69.87,10,1,1,"%D",0)
^^1^1^3090301^
"^DD",69.87,69.87,10,1,1,"%D",1,0)
This xref is for the lab arrival time
"^DD",69.87,69.87,10,1,1,"DT")
3090301
"^DD",69.87,69.87,10,21,0)
^^1^1^3101109^
"^DD",69.87,69.87,10,21,1,0)
This field contains the time the specimen arrived in the lab.
"^DD",69.87,69.87,10,"DT")
3101109
"^DD",69.87,69.87,12,0)
RECEIVER^F^^12;1^K:$L(X)>99!($L(X)<1) X
"^DD",69.87,69.87,12,3)
Answer must be 1-99 characters in length.
"^DD",69.87,69.87,12,21,0)
^^2^2^3101109^
"^DD",69.87,69.87,12,21,1,0)
This field contains the name of the person who received the specimen in 
"^DD",69.87,69.87,12,21,2,0)
the lab.
"^DD",69.87,69.87,12,"DT")
3101109
"^DIC",69.86,69.86,0)
HOWDY SITE FILE^69.86
"^DIC",69.86,69.86,0,"GL")
^LRHY(69.86,
"^DIC",69.86,69.86,"%",0)
^1.005^^0
"^DIC",69.86,"B","HOWDY SITE FILE",69.86)

"^DIC",69.87,69.87,0)
HOWDY SPECIMEN TIMES BY UID^69.87
"^DIC",69.87,69.87,0,"GL")
^LRHY(69.87,
"^DIC",69.87,69.87,"%",0)
^1.005^^0
"^DIC",69.87,69.87,"%D",0)
^^1^1^3100727^
"^DIC",69.87,69.87,"%D",1,0)
This file is used to capture and retain the specimen demographics.
"^DIC",69.87,"B","HOWDY SPECIMEN TIMES BY UID",69.87)

"BLD",8688,6)
^325
**END**
**END**
