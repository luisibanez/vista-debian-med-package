Released DG*5.3*870 SEQ #763
Extracted from mail message
**KIDS**:DG*5.3*870^

**INSTALL NAME**
DG*5.3*870
"BLD",9389,0)
DG*5.3*870^REGISTRATION^0^3130502^y
"BLD",9389,1,0)
^^4^4^3130502^
"BLD",9389,1,1,0)
Patch DG*5.3*870 modifies 2 Registration routines to accommodate the new  
"BLD",9389,1,2,0)
International Classification of Disease Tenth Revision (ICD10) code 
"BLD",9389,1,3,0)
structure.  The ICD10 new code structure is being expanded and allowing 
"BLD",9389,1,4,0)
for letters and numbers to be used.
"BLD",9389,4,0)
^9.64PA^^
"BLD",9389,6.3)
5
"BLD",9389,"KRN",0)
^9.67PA^779.2^20
"BLD",9389,"KRN",.4,0)
.4
"BLD",9389,"KRN",.401,0)
.401
"BLD",9389,"KRN",.402,0)
.402
"BLD",9389,"KRN",.403,0)
.403
"BLD",9389,"KRN",.5,0)
.5
"BLD",9389,"KRN",.84,0)
.84
"BLD",9389,"KRN",3.6,0)
3.6
"BLD",9389,"KRN",3.8,0)
3.8
"BLD",9389,"KRN",9.2,0)
9.2
"BLD",9389,"KRN",9.8,0)
9.8
"BLD",9389,"KRN",9.8,"NM",0)
^9.68A^2^2
"BLD",9389,"KRN",9.8,"NM",1,0)
DGPTAE04^^0^B9485293
"BLD",9389,"KRN",9.8,"NM",2,0)
DGPT60PR^^0^B4626791
"BLD",9389,"KRN",9.8,"NM","B","DGPT60PR",2)

"BLD",9389,"KRN",9.8,"NM","B","DGPTAE04",1)

"BLD",9389,"KRN",19,0)
19
"BLD",9389,"KRN",19.1,0)
19.1
"BLD",9389,"KRN",101,0)
101
"BLD",9389,"KRN",409.61,0)
409.61
"BLD",9389,"KRN",771,0)
771
"BLD",9389,"KRN",779.2,0)
779.2
"BLD",9389,"KRN",870,0)
870
"BLD",9389,"KRN",8989.51,0)
8989.51
"BLD",9389,"KRN",8989.52,0)
8989.52
"BLD",9389,"KRN",8994,0)
8994
"BLD",9389,"KRN","B",.4,.4)

"BLD",9389,"KRN","B",.401,.401)

"BLD",9389,"KRN","B",.402,.402)

"BLD",9389,"KRN","B",.403,.403)

"BLD",9389,"KRN","B",.5,.5)

"BLD",9389,"KRN","B",.84,.84)

"BLD",9389,"KRN","B",3.6,3.6)

"BLD",9389,"KRN","B",3.8,3.8)

"BLD",9389,"KRN","B",9.2,9.2)

"BLD",9389,"KRN","B",9.8,9.8)

"BLD",9389,"KRN","B",19,19)

"BLD",9389,"KRN","B",19.1,19.1)

"BLD",9389,"KRN","B",101,101)

"BLD",9389,"KRN","B",409.61,409.61)

"BLD",9389,"KRN","B",771,771)

"BLD",9389,"KRN","B",779.2,779.2)

"BLD",9389,"KRN","B",870,870)

"BLD",9389,"KRN","B",8989.51,8989.51)

"BLD",9389,"KRN","B",8989.52,8989.52)

"BLD",9389,"KRN","B",8994,8994)

"BLD",9389,"QDEF")
^^^^^^^^^^YES
"BLD",9389,"QUES",0)
^9.62^^
"BLD",9389,"REQB",0)
^9.611^1^1
"BLD",9389,"REQB",1,0)
DG*5.3*744^2
"BLD",9389,"REQB","B","DG*5.3*744",1)

"MBREQ")
0
"PKG",5,-1)
1^1
"PKG",5,0)
REGISTRATION^DG^PATIENT REGISTRATION, ADMISSION, DISCHARGE, EMBOSSER 
"PKG",5,20,0)
^9.402P^^
"PKG",5,22,0)
^9.49I^1^1
"PKG",5,22,1,0)
5.3^2930813
"PKG",5,22,1,"PAH",1,0)
870^3130502
"PKG",5,22,1,"PAH",1,1,0)
^^4^4^3130502
"PKG",5,22,1,"PAH",1,1,1,0)
Patch DG*5.3*870 modifies 2 Registration routines to accommodate the new  
"PKG",5,22,1,"PAH",1,1,2,0)
International Classification of Disease Tenth Revision (ICD10) code 
"PKG",5,22,1,"PAH",1,1,3,0)
structure.  The ICD10 new code structure is being expanded and allowing 
"PKG",5,22,1,"PAH",1,1,4,0)
for letters and numbers to be used.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
2
"RTN","DGPT60PR")
0^2^B4626791^B4451733
"RTN","DGPT60PR",1,0)
DGPT60PR ;ALB/MTC/ADL - Edit procedure codes.  In ICD0 Procedures, current, gender ok ; 5/2/13 10:05am
"RTN","DGPT60PR",2,0)
 ;;5.3;Registration;**510,870**;Aug 13, 1993;Build 5
"RTN","DGPT60PR",3,0)
 ;;ADL;Update for CSV project;;Mar. 24, 2003
"RTN","DGPT60PR",4,0)
 ;
"RTN","DGPT60PR",5,0)
EN ;
"RTN","DGPT60PR",6,0)
LOOP ;
"RTN","DGPT60PR",7,0)
 S DGPTPRFL=0
"RTN","DGPT60PR",8,0)
 F DGPTL3=1:1:5 S DGPTERC=0 D CHKPRC I DGPTERC D ERR
"RTN","DGPT60PR",9,0)
EXIT ;
"RTN","DGPT60PR",10,0)
 K DGPTOP,DGPTOP1,DGPTL3,DGPTL4,DGPTPP,DGPTPRFL,X,X1,X2
"RTN","DGPT60PR",11,0)
 Q
"RTN","DGPT60PR",12,0)
CHKPRC ;
"RTN","DGPT60PR",13,0)
 S DGPTERC=0,DGPTOP=(@("DGPTPC"_DGPTL3)),DGPTOP=$P(DGPTOP," ",1) Q:DGPTOP=""
"RTN","DGPT60PR",14,0)
 S DGPTERC=604+DGPTL3
"RTN","DGPT60PR",15,0)
 ;changing xref to BA and allowing for change in ICD10 codes Patch870
"RTN","DGPT60PR",16,0)
 F DGPTL4=1:1:$L(DGPTOP) S DGPTOP1=$E(DGPTOP,1,DGPTL4)_"."_$E(DGPTOP,DGPTL4+1,$L(DGPTOP)) I $D(^ICD0("BA",(DGPTOP1_" "))) S DGPTERC=0 D GEN Q
"RTN","DGPT60PR",17,0)
 Q
"RTN","DGPT60PR",18,0)
GEN ;
"RTN","DGPT60PR",19,0)
 ;changing xref to BA and allowing for change in ICD10 codes patch 870
"RTN","DGPT60PR",20,0)
 S DGPTPP=$O(^ICD0("BA",(DGPTOP1_" "),0)) I DGPTPP="" S DGPTERC=604+DGPTL3 Q
"RTN","DGPT60PR",21,0)
 S DGPTTMP=$$ICDOP^ICDCODE(DGPTPP,$S($G(DGPTPDTS)'="":DGPTPDTS,1:DT))  ;use date of procedure if defined, else today
"RTN","DGPT60PR",22,0)
 I DGPTTMP<1!('$P(DGPTTMP,U,10)) S DGPTERC=604+DGPTL3 Q
"RTN","DGPT60PR",23,0)
 I $P(DGPTTMP,U,11)]""&(DGPTGEN'=$P(DGPTTMP,U,11)) S DGPTERC=651 Q
"RTN","DGPT60PR",24,0)
CURR ;
"RTN","DGPT60PR",25,0)
 S DGPTTMP=$$ICDOP^ICDCODE(DGPTPP,$S($G(DGPTPDTS)'="":DGPTPDTS,1:DT))  ;use date of procedure if defined, else today
"RTN","DGPT60PR",26,0)
 I ($P(DGPTTMP,U,10)=0)&($E(DGPTPDTS,1,7)>$P(DGPTTMP,U,12)) S DGPTERC=604+DGPTL3 Q
"RTN","DGPT60PR",27,0)
SAVE ;
"RTN","DGPT60PR",28,0)
 S @("DGPTPC"_DGPTL3)=DGPTOP1
"RTN","DGPT60PR",29,0)
ARRAY ;
"RTN","DGPT60PR",30,0)
 S DGPTPRAR(DGPTPDTS)=$S($D(DGPTPRAR(DGPTPDTS)):DGPTPRAR(DGPTPDTS)_U_DGPTPP,1:DGPTPP_U)
"RTN","DGPT60PR",31,0)
 Q
"RTN","DGPT60PR",32,0)
ERR ;
"RTN","DGPT60PR",33,0)
 D WRTERR^DGPTAE(DGPTERC,NODE,SEQ)
"RTN","DGPT60PR",34,0)
 Q
"RTN","DGPT60PR",35,0)
 ;
"RTN","DGPTAE04")
0^1^B9485293^B9304291
"RTN","DGPTAE04",1,0)
DGPTAE04 ;ALB/MTC/ADL - 401 Edit Checks Cont ; 5/2/13 10:03am
"RTN","DGPTAE04",2,0)
 ;;5.3;Registration;**510,744,870**;Aug 13, 1993;Build 5
"RTN","DGPTAE04",3,0)
 ;;ADL;Updated for CSV Project;;Mar 24, 2003
"RTN","DGPTAE04",4,0)
 ;
"RTN","DGPTAE04",5,0)
TRAN ;-- verify transplant status
"RTN","DGPTAE04",6,0)
 I " 12"'[DGPT40PT S DGPTERC=417
"RTN","DGPTAE04",7,0)
 Q
"RTN","DGPTAE04",8,0)
 ;
"RTN","DGPTAE04",9,0)
CHIEF ;
"RTN","DGPTAE04",10,0)
 N FLAG,I
"RTN","DGPTAE04",11,0)
 Q:"VMN"[DGPTSCS
"RTN","DGPTAE04",12,0)
 I "1234567"'[DGPTSCS S DGPTERC=407 Q
"RTN","DGPTAE04",13,0)
 S FLAG=1 F I=10,11,30,40,42 I DGPTSTTY["^"_I_"^" S FLAG=0 Q
"RTN","DGPTAE04",14,0)
 S:FLAG DGPTERC=407
"RTN","DGPTAE04",15,0)
 Q
"RTN","DGPTAE04",16,0)
FAST ;
"RTN","DGPTAE04",17,0)
 N FLAG,I
"RTN","DGPTAE04",18,0)
 Q:DGPTSFA=" "
"RTN","DGPTAE04",19,0)
 S FLAG=0 F I=20:1:26 I DGPTSTTY["^"_I_"^" S FLAG=1,DGPTSFA=" " Q
"RTN","DGPTAE04",20,0)
 I FLAG Q
"RTN","DGPTAE04",21,0)
 I "12345678"'[DGPTSFA S DGPTERC=408 Q
"RTN","DGPTAE04",22,0)
 Q
"RTN","DGPTAE04",23,0)
ANES ;
"RTN","DGPTAE04",24,0)
 N FLAG,I
"RTN","DGPTAE04",25,0)
 Q:DGPTSAT=" "
"RTN","DGPTAE04",26,0)
 S FLAG=0 F I=20:1:26 I DGPTSTTY["^"_I_"^" S FLAG=1,DGPTSAT=" " Q
"RTN","DGPTAE04",27,0)
 I FLAG Q
"RTN","DGPTAE04",28,0)
 I "0123456789RX"'[DGPTSAT S DGPTERC=409 Q
"RTN","DGPTAE04",29,0)
 S DGPTERC=409 F I=10,11,30,40,42 I DGPTSTTY["^"_I_"^" S DGPTERC=0 Q
"RTN","DGPTAE04",30,0)
 Q
"RTN","DGPTAE04",31,0)
 ;
"RTN","DGPTAE04",32,0)
FIRST ;-- Edit surgeries - present in ICD0 OPERATIONS, current, gender ok
"RTN","DGPTAE04",33,0)
 ;
"RTN","DGPTAE04",34,0)
 I (+DGPTSO1=1371)!(+DGPTSO1=39610)!(+DGPTSO1=39611)!(+DGPTSO1=39612) S DGPTERC=450 D ERR G:DGPTEDFL EXIT
"RTN","DGPTAE04",35,0)
LOOP ;
"RTN","DGPTAE04",36,0)
 F DGPTL3=1:1:5 S DGPTERC=0 D CHKOPC I DGPTERC D ERR G:DGPTEDFL EXIT
"RTN","DGPTAE04",37,0)
 Q
"RTN","DGPTAE04",38,0)
CHKOPC ;
"RTN","DGPTAE04",39,0)
 S DGPTOC=(@("DGPTSO"_DGPTL3)),DGPTOC=$P(DGPTOC," ",1) Q:DGPTOC=""
"RTN","DGPTAE04",40,0)
 S DGPTERC=410+DGPTL3
"RTN","DGPTAE04",41,0)
 S DGPTOC=$E(DGPTOC_"       ",1,2)_"."_$E(DGPTOC,3,7)
"RTN","DGPTAE04",42,0)
 ;changing xref to BA and allow changes for ICD10 codes Patch870
"RTN","DGPTAE04",43,0)
 I $D(^ICD0("BA",(DGPTOC_" "))) S DGPTERC=0 D GEN Q
"RTN","DGPTAE04",44,0)
 Q
"RTN","DGPTAE04",45,0)
GEN ;
"RTN","DGPTAE04",46,0)
 ;changing xref to BA for ICD10 codes patch 870
"RTN","DGPTAE04",47,0)
 S DGPTOPP=$O(^ICD0("BA",(DGPTOC_" "),0)) I DGPTOPP="" S DGPTERC=451 Q
"RTN","DGPTAE04",48,0)
 S DGPTTMP=$$ICDOP^ICDCODE(DGPTOPP,$S($G(DGPTSDD)'="":DGPTSDD,1:DT))  ;use date of surgery from rec if it exists, else today
"RTN","DGPTAE04",49,0)
 ; DG*744 - check against discharge date
"RTN","DGPTAE04",50,0)
 ;I DGPTTMP=-1!('$P(DGPTTMP,U,10)) S DGPTERC=451 Q
"RTN","DGPTAE04",51,0)
 I DGPTTMP=-1!('$P(DGPTTMP,U,10)) S DGPTERC=451 N DGPTDAT S DGPTDAT=+$G(^DGPT(PTF,70)) I DGPTDAT S DGPTTMP=$$ICDOP^ICDCODE(DGPTOPP,DGPTDAT) I $P(DGPTTMP,U,10)=1 S DGPTERC=0
"RTN","DGPTAE04",52,0)
 I DGPTERC=451 Q
"RTN","DGPTAE04",53,0)
 I $P(DGPTTMP,U,11)]""&(DGPTGEN'=$P(DGPTTMP,U,11)) S DGPTERC=451 Q
"RTN","DGPTAE04",54,0)
CURR ;
"RTN","DGPTAE04",55,0)
 S DGPTTMP=$$ICDOP^ICDCODE(DGPTOPP,$S($G(DGPTSDD)'="":DGPTSDD,1:DT))  ;use date of surgery from rec if it exists, else today
"RTN","DGPTAE04",56,0)
 I ($P(DGPTTMP,U,10)=0)&($P(DGPTSDD,1,7)>$P(DGPTTMP,U,12)) S DGPTERC=474+DGPTL3 Q
"RTN","DGPTAE04",57,0)
SAVE ;
"RTN","DGPTAE04",58,0)
 S @("DGPTSO"_DGPTL3)=DGPTOC
"RTN","DGPTAE04",59,0)
ARRAY ;
"RTN","DGPTAE04",60,0)
 S DGPTOPAR(DGPTSDD)=$S($D(DGPTOPAR(DGPTSDD)):DGPTOPAR(DGPTSDD)_U_DGPTOPP,1:DGPTOPP_U)
"RTN","DGPTAE04",61,0)
 Q
"RTN","DGPTAE04",62,0)
EXIT ;
"RTN","DGPTAE04",63,0)
 K DGPTL3,DGPTOC,DGPTOC1,DGPTOPP
"RTN","DGPTAE04",64,0)
 Q
"RTN","DGPTAE04",65,0)
ERR ;
"RTN","DGPTAE04",66,0)
 D WRTERR^DGPTAE(DGPTERC,NODE,SEQ)
"RTN","DGPTAE04",67,0)
 Q
"VER")
8.0^22.0
"BLD",9389,6)
^763
**END**
**END**
