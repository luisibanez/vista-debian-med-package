Released DG*5.3*832 SEQ #757
Extracted from mail message
**KIDS**:DG*5.3*832^

**INSTALL NAME**
DG*5.3*832
"BLD",8433,0)
DG*5.3*832^REGISTRATION^0^3120104^y
"BLD",8433,1,0)
^^7^7^3111118^
"BLD",8433,1,1,0)
1. Modify search to insure that Secondary Diagnosis Codes 10-13 in
"BLD",8433,1,2,0)
   Patient Treatment File (PTF) will be searched when running option
"BLD",8433,1,3,0)
   'Diagnostic Code PTF Record Search'.
"BLD",8433,1,4,0)
 
"BLD",8433,1,5,0)
2. XINDEX errors caused by $N(ext) command in cross reference triggers in
"BLD",8433,1,6,0)
   Patient Movement File (#405) which are in violation of SACC
"BLD",8433,1,7,0)
   (Standards & Conventions Committee) standards.
"BLD",8433,4,0)
^9.64PA^405^1
"BLD",8433,4,405,0)
405
"BLD",8433,4,405,2,0)
^9.641^405^1
"BLD",8433,4,405,2,405,0)
PATIENT MOVEMENT  (File-top level)
"BLD",8433,4,405,2,405,1,0)
^9.6411^.18^5
"BLD",8433,4,405,2,405,1,.01,0)
DATE/TIME
"BLD",8433,4,405,2,405,1,.04,0)
TYPE OF MOVEMENT
"BLD",8433,4,405,2,405,1,.06,0)
WARD LOCATION
"BLD",8433,4,405,2,405,1,.14,0)
ADMISSION/CHECK-IN MOVEMENT
"BLD",8433,4,405,2,405,1,.18,0)
MAS MOVEMENT TYPE
"BLD",8433,4,405,222)
y^n^p^^^^n^^n
"BLD",8433,4,405,224)

"BLD",8433,4,"APDD",405,405)

"BLD",8433,4,"APDD",405,405,.01)

"BLD",8433,4,"APDD",405,405,.04)

"BLD",8433,4,"APDD",405,405,.06)

"BLD",8433,4,"APDD",405,405,.14)

"BLD",8433,4,"APDD",405,405,.18)

"BLD",8433,4,"B",405,405)

"BLD",8433,6.3)
9
"BLD",8433,"ABPKG")
n
"BLD",8433,"INI")
EN^DG832P1
"BLD",8433,"INID")
^y^y
"BLD",8433,"INIT")
DG832P2
"BLD",8433,"KRN",0)
^9.67PA^779.2^20
"BLD",8433,"KRN",.4,0)
.4
"BLD",8433,"KRN",.401,0)
.401
"BLD",8433,"KRN",.402,0)
.402
"BLD",8433,"KRN",.403,0)
.403
"BLD",8433,"KRN",.5,0)
.5
"BLD",8433,"KRN",.84,0)
.84
"BLD",8433,"KRN",3.6,0)
3.6
"BLD",8433,"KRN",3.8,0)
3.8
"BLD",8433,"KRN",9.2,0)
9.2
"BLD",8433,"KRN",9.8,0)
9.8
"BLD",8433,"KRN",9.8,"NM",0)
^9.68A^5^3
"BLD",8433,"KRN",9.8,"NM",3,0)
DG832P1^^0^B612614
"BLD",8433,"KRN",9.8,"NM",4,0)
DG832P2^^0^B7011833
"BLD",8433,"KRN",9.8,"NM",5,0)
DGPTFIC^^0^B27049239
"BLD",8433,"KRN",9.8,"NM","B","DG832P1",3)

"BLD",8433,"KRN",9.8,"NM","B","DG832P2",4)

"BLD",8433,"KRN",9.8,"NM","B","DGPTFIC",5)

"BLD",8433,"KRN",19,0)
19
"BLD",8433,"KRN",19.1,0)
19.1
"BLD",8433,"KRN",101,0)
101
"BLD",8433,"KRN",409.61,0)
409.61
"BLD",8433,"KRN",771,0)
771
"BLD",8433,"KRN",779.2,0)
779.2
"BLD",8433,"KRN",870,0)
870
"BLD",8433,"KRN",8989.51,0)
8989.51
"BLD",8433,"KRN",8989.52,0)
8989.52
"BLD",8433,"KRN",8994,0)
8994
"BLD",8433,"KRN","B",.4,.4)

"BLD",8433,"KRN","B",.401,.401)

"BLD",8433,"KRN","B",.402,.402)

"BLD",8433,"KRN","B",.403,.403)

"BLD",8433,"KRN","B",.5,.5)

"BLD",8433,"KRN","B",.84,.84)

"BLD",8433,"KRN","B",3.6,3.6)

"BLD",8433,"KRN","B",3.8,3.8)

"BLD",8433,"KRN","B",9.2,9.2)

"BLD",8433,"KRN","B",9.8,9.8)

"BLD",8433,"KRN","B",19,19)

"BLD",8433,"KRN","B",19.1,19.1)

"BLD",8433,"KRN","B",101,101)

"BLD",8433,"KRN","B",409.61,409.61)

"BLD",8433,"KRN","B",771,771)

"BLD",8433,"KRN","B",779.2,779.2)

"BLD",8433,"KRN","B",870,870)

"BLD",8433,"KRN","B",8989.51,8989.51)

"BLD",8433,"KRN","B",8989.52,8989.52)

"BLD",8433,"KRN","B",8994,8994)

"BLD",8433,"QDEF")
^^^^^^^^^^YES
"BLD",8433,"QUES",0)
^9.62^^
"BLD",8433,"REQB",0)
^9.611^1^1
"BLD",8433,"REQB",1,0)
DG*5.3*744^2
"BLD",8433,"REQB","B","DG*5.3*744",1)

"FIA",405)
PATIENT MOVEMENT
"FIA",405,0)
^DGPM(
"FIA",405,0,0)
405ID
"FIA",405,0,1)
y^n^p^^^^n^^n
"FIA",405,0,10)

"FIA",405,0,11)

"FIA",405,0,"RLRO")

"FIA",405,0,"VR")
5.3^DG
"FIA",405,405)
1
"FIA",405,405,.01)

"FIA",405,405,.04)

"FIA",405,405,.06)

"FIA",405,405,.14)

"FIA",405,405,.18)

"INI")
EN^DG832P1
"INIT")
DG832P2
"MBREQ")
0
"PKG",5,-1)
1^1
"PKG",5,0)
REGISTRATION^DG^PATIENT REGISTRATION, ADMISSION, DISCHARGE, EMBOSSER 
"PKG",5,20,0)
^9.402P^^
"PKG",5,22,0)
^9.49I^1^1
"PKG",5,22,1,0)
5.3^2930813
"PKG",5,22,1,"PAH",1,0)
832^3120104
"PKG",5,22,1,"PAH",1,1,0)
^^7^7^3120104
"PKG",5,22,1,"PAH",1,1,1,0)
1. Modify search to insure that Secondary Diagnosis Codes 10-13 in
"PKG",5,22,1,"PAH",1,1,2,0)
   Patient Treatment File (PTF) will be searched when running option
"PKG",5,22,1,"PAH",1,1,3,0)
   'Diagnostic Code PTF Record Search'.
"PKG",5,22,1,"PAH",1,1,4,0)
 
"PKG",5,22,1,"PAH",1,1,5,0)
2. XINDEX errors caused by $N(ext) command in cross reference triggers in
"PKG",5,22,1,"PAH",1,1,6,0)
   Patient Movement File (#405) which are in violation of SACC
"PKG",5,22,1,"PAH",1,1,7,0)
   (Standards & Conventions Committee) standards.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
3
"RTN","DG832P1")
0^3^B612614^n/a
"RTN","DG832P1",1,0)
DG832P1 ;ALB/RGB - PRE-INSTALL DG*5.3*832 ; 6/24/10 12:17pm
"RTN","DG832P1",2,0)
 ;;5.3;Registration;**832**;Aug 13, 1993;Build 9
"RTN","DG832P1",3,0)
 Q
"RTN","DG832P1",4,0)
EN ;Pre install entry point
"RTN","DG832P1",5,0)
 N DGX,Y
"RTN","DG832P1",6,0)
 S DGX="DEL"
"RTN","DG832P1",7,0)
 S Y=$$NEWCP^XPDUTL(DGX,DGX_"^DG832P1")
"RTN","DG832P1",8,0)
 I 'Y D BMES^XPDUTL("ERROR creating "_DGX_" checkpoint.")
"RTN","DG832P1",9,0)
 Q
"RTN","DG832P1",10,0)
DEL ;Delete trigger on field=FLD, XREF#=XREF of file 405.
"RTN","DG832P1",11,0)
 N DGFILE,DGFIELD,DGREF,DGKEY
"RTN","DG832P1",12,0)
 S DGFILE=405
"RTN","DG832P1",13,0)
 F DGKEY=".01,5",".04,1,",".06,2",".14,3",".18,1" D
"RTN","DG832P1",14,0)
 . S DGFIELD=$P(DGKEY,","),DGREF=$P(DGKEY,",",2)
"RTN","DG832P1",15,0)
 . D DELIX^DDMOD(DGFILE,DGFIELD,DGREF)
"RTN","DG832P1",16,0)
 Q
"RTN","DG832P2")
0^4^B7011833^n/a
"RTN","DG832P2",1,0)
DG832P2 ;;ALB/RGB - POST-INSTALL DG*5.3*832 ; 6/24/10 6:42pm
"RTN","DG832P2",2,0)
 ;;5.3;Registration;**832**;Aug 13, 1993;Build 9
"RTN","DG832P2",3,0)
 ;;Check for updated X-REFS (Fields: .01,.04,.06,.14,.18) used in Input Templates
"RTN","DG832P2",4,0)
 ;;
"RTN","DG832P2",5,0)
 ; IA #2796 for use of calls to RGHLLOG in UPDBAI
"RTN","DG832P2",6,0)
POST ;Post init
"RTN","DG832P2",7,0)
 N DGFLD,DGMFLD,DGOUT,DGFILE
"RTN","DG832P2",8,0)
 D TEMPL
"RTN","DG832P2",9,0)
 Q
"RTN","DG832P2",10,0)
 ;
"RTN","DG832P2",11,0)
TEMPL ;Determine templates on the FILE file to be compiled.
"RTN","DG832P2",12,0)
 N GLOBAL,FIELD,NFIELD,FILE,CNT
"RTN","DG832P2",13,0)
 D BMES^XPDUTL("Beginning to compile templates on the PATIENT MOVEMENT (#405) file.")
"RTN","DG832P2",14,0)
 ;
"RTN","DG832P2",15,0)
 S NFIELD=".01,.04,.06,.14,.18",FILE=405,FIELD="",CNT=1
"RTN","DG832P2",16,0)
 F  S FIELD=$P(NFIELD,",",CNT) Q:FIELD=""  D LOOP(FIELD,FILE) S CNT=CNT+1
"RTN","DG832P2",17,0)
 W !!
"RTN","DG832P2",18,0)
 S (X,Y)=""
"RTN","DG832P2",19,0)
 D BMES^XPDUTL("The following routine namespace compiled:")
"RTN","DG832P2",20,0)
 F  S X=$O(CFIELD(X)) Q:X=""  S Y=$G(Y)+1 S PRINT(Y)=" "_X_"*"
"RTN","DG832P2",21,0)
 ;
"RTN","DG832P2",22,0)
 D MES^XPDUTL(.PRINT)
"RTN","DG832P2",23,0)
 K X,Y,PRINT,CFIELD
"RTN","DG832P2",24,0)
 Q
"RTN","DG832P2",25,0)
LOOP(FIELD,FILE) ;Compile templates.
"RTN","DG832P2",26,0)
 N GLOBAL,TEMPLATP,TEMPLATN,X,Y,DMAX,TYPE
"RTN","DG832P2",27,0)
 F GLOBAL="^DIE","^DIPT" D
"RTN","DG832P2",28,0)
 . S TYPE="Input" S:GLOBAL="^DIPT" TYPE="Print"
"RTN","DG832P2",29,0)
 . I $D(@GLOBAL@("AF",FILE,FIELD)) D
"RTN","DG832P2",30,0)
 .. S TEMPLATP=0
"RTN","DG832P2",31,0)
 .. F  S TEMPLATP=$O(@GLOBAL@("AF",FILE,FIELD,TEMPLATP)) Q:'TEMPLATP  DO
"RTN","DG832P2",32,0)
 ... S TEMPLATN=$P($G(@GLOBAL@(TEMPLATP,0)),"^",1)
"RTN","DG832P2",33,0)
 ... I TEMPLATN="" D BMES^XPDUTL("Could not compile template "_TEMPLATN_$C(13,10)_"Please review!") Q
"RTN","DG832P2",34,0)
 ... S X=$P($G(@GLOBAL@(TEMPLATP,"ROUOLD")),"^")
"RTN","DG832P2",35,0)
 ... I X=""&($D(@GLOBAL@(TEMPLATP,"ROU"))'=0) D BMES^XPDUTL("Could not find routine for template "_TEMPLATN_$C(13,10)_"Please review!") Q
"RTN","DG832P2",36,0)
 ... I X=""&($D(@GLOBAL@(TEMPLATP,"ROU"))=0) Q
"RTN","DG832P2",37,0)
 ... I $D(CFIELD(X)) Q  ;already compiled
"RTN","DG832P2",38,0)
 ... S CFIELD(X)="" ;  remember the template was compiled
"RTN","DG832P2",39,0)
 ... S Y=TEMPLATP ;  set up the call for FileMan
"RTN","DG832P2",40,0)
 ... S DMAX=$$ROUSIZE^DILF
"RTN","DG832P2",41,0)
 ... I GLOBAL="^DIE" D BMES^XPDUTL(" "),BMES^XPDUTL("   Compiling Input Templates") D EN^DIEZ Q
"RTN","DG832P2",42,0)
 ... I GLOBAL="^DIPT" D BMES^XPDUTL(" "),BMES^XPDUTL("   Compiling Print Templates") D EN^DIPZ Q
"RTN","DG832P2",43,0)
 Q
"RTN","DG832P2",44,0)
 ;
"RTN","DG832P2",45,0)
 ;
"RTN","DGPTFIC")
0^5^B27049239^B23609839
"RTN","DGPTFIC",1,0)
DGPTFIC ;ALB/JDS/ADL - PTF CODE SEARCH ; 26 JAN 87 @0800 [7/12/04 2:53pm]
"RTN","DGPTFIC",2,0)
 ;;5.3;Registration;**510,559,599,669,704,744,832**; Aug 13, 1993;Build 9
"RTN","DGPTFIC",3,0)
 ;;ADL;;Update for CSV Project;;Mar 25, 2003
"RTN","DGPTFIC",4,0)
 ;;Patch DG*5.3*832 notations are for additional checks to insure the
"RTN","DGPTFIC",5,0)
 ;;                 search includes looking at secondary diagnostic 
"RTN","DGPTFIC",6,0)
 ;;                 codes 10-13, in node ^DGPT(ien,71)
"RTN","DGPTFIC",7,0)
EN K DG1 S DIC="^ICD9("   ;;S DIC("S")="I $$ISVALID^ICDGTDRG(+Y,DGDAT,9)" G RANGE
"RTN","DGPTFIC",8,0)
   G RANGE
"RTN","DGPTFIC",9,0)
E9 K DIC S DHD=DHD_"  Diagnostic Code Search"
"RTN","DGPTFIC",10,0)
F9 S DIS(0)="I $D(^DGPT(D0,0)),$P(^(0),U,11)=1 S DG2=0,L=1,D1=+$O(^DGPT(D0,""M"",0)) X DIS(""0AAA""),DIS(""0BBB""),DIS(""0A"") I DG2 S ^UTILITY($J,""DG"",0)=""D""",DIS("0A")="F E=0:0 X DIS(""0AA"") S D1=$O(^DGPT(D0,""M"",D1)) Q:D1'>0"   ;;DG*832
"RTN","DGPTFIC",11,0)
 S DG9=$S('DGR:"I DG1[(U_$P(DG3,U,DGZD)_U)",1:"S DG=$$ICDDX^ICDCODE(+$P(DG3,U,DGZD),$$GETDATE^ICDGTDRG(D0)) S DG4=$S(+DG>0&($P(DG,U,10)):$P(DG,U,2),1:"""")_""!"" I DG4]DG1&(DG6]DG4)")
"RTN","DGPTFIC",12,0)
 S XAA="S DG2=DG2+1,^UTILITY($J,""DG"",D0,DG2)=$S(DGZD<11:DGZD-4,1:DGZD-5)_U_$P(DG3,U,10)_U_$P(DG3,U,DGZD)"
"RTN","DGPTFIC",13,0)
 S DIS("0AA")="I $D(^DGPT(D0,""M"",D1,0)) S DG3=^(0) F DGZD=5:1:15 "_DG9_" X XAA"
"RTN","DGPTFIC",14,0)
 S XAAA="S DG2=DG2+1,$P(^UTILITY($J,""DG"",D0,""A""),U,DGZD)=$P($$ICDDX^ICDCODE(+$P(DG3,U,DGZD),$$GETDATE^ICDGTDRG(D0)),U,2)"
"RTN","DGPTFIC",15,0)
 S XBBB="S DG2=DG2+1,$P(^UTILITY($J,""DG"",D0,""A""),U,DGZD+24)=$P($$ICDDX^ICDCODE(+$P(DG3,U,DGZD),$$GETDATE^ICDGTDRG(D0)),U,2)"  ;;DG*832
"RTN","DGPTFIC",16,0)
 S DIS("0AAA")="I $D(^DGPT(D0,70)) S DG3=^(70) F DGZD=10,16:1:24 "_DG9_" X XAAA"
"RTN","DGPTFIC",17,0)
 S DIS("0BBB")="I $D(^DGPT(D0,71)) S DG3=^(71) F DGZD=1:1:4 "_DG9_" X XBBB"   ;;DG*832
"RTN","DGPTFIC",18,0)
 S L=0
"RTN","DGPTFIC",19,0)
GO K DG9 W !,"Searching the PTF file  Select fields to sort by",! S DIC="^DGPT(",FLDS="[DGICD]",L=0 D EN1^DIP
"RTN","DGPTFIC",20,0)
Q K DIS,DGZD,DGZJ,DINS,DXS,DTOUT,DG4,DGR,DIP,DP,%,DGZJJ,DGZT,DG1,DHD,I,J,DG2,DG3,DG5,DG6,DG7,DG8,DG9,D0,DJ,DTOT,FLDS,L,PROMPT,Z,X,DIC,X1,Y,XAA,XAAA,XAAAA,XBBB Q
"RTN","DGPTFIC",21,0)
EN1 ;
"RTN","DGPTFIC",22,0)
 S DIC="^ICD0("   ;;S DIC("S")="I $$ISVALID^ICDGTDRG(+Y,DGDAT,0)" G RANGE
"RTN","DGPTFIC",23,0)
 G RANGE
"RTN","DGPTFIC",24,0)
E0 K DIC S DHD=DHD_" Surgical Code Search"
"RTN","DGPTFIC",25,0)
F0 S DIS(0)="I $D(^DGPT(D0,0)),$P(^(0),U,11)=1 S DG2=0,L=1 X:$D(^DGPT(D0,""P"")) DIS(""0AAAA"") S D1=+$O(^DGPT(D0,""S"",0)) X DIS(""0AAA"") X DIS(""0A"") I DG2 S ^UTILITY($J,""DG"",0)=""P"""
"RTN","DGPTFIC",26,0)
 S DIS("0A")="F E=0:0 X DIS(""0AA"") S D1=$O(^DGPT(D0,""S"",D1)) Q:D1'>0"
"RTN","DGPTFIC",27,0)
 S DG9=$S('DGR:"I DG1[(U_$P(DG3,U,DGZD)_U)",1:"S DG=$$ICDOP^ICDCODE(+$P(DG3,U,DGZD),$$GETDATE^ICDGTDRG(D0)) S DG4=$S(+DG>0&($P(DG,U,10)):$P(DG,U,2),1:"""")_""!"" I DG4]DG1&(DG6]DG4)")
"RTN","DGPTFIC",28,0)
 S XAA="S DG2=DG2+1,^UTILITY($J,""DG"",D0,DG2)=(DGZD-7)_U_$P(DG3,U,1)_U_$P(DG3,U,DGZD)"
"RTN","DGPTFIC",29,0)
 S DIS("0AA")="I $D(^DGPT(D0,""S"",D1,0)) S DG3=^(0) F DGZD=8:1:12 "_DG9_" X XAA"
"RTN","DGPTFIC",30,0)
 S XAAA="S DG2=DG2+1,^UTILITY($J,""DG"",D0,DG2)=DGZD_U_U_$P(DG3,U,DGZD)"
"RTN","DGPTFIC",31,0)
 S DIS("0AAA")="I $D(^DGPT(D0,""401P"")) S DG3=^(""401P"") F DGZD=1:1:5 "_DG9_" X XAAA"
"RTN","DGPTFIC",32,0)
 S XAAAA="S DG2=DG2+1,^UTILITY($J,""DG"",D0,DG2)=(DGZD-4)_U_$P(DG3,U,1)_U_$P(DG3,U,DGZD)"
"RTN","DGPTFIC",33,0)
 S DIS("0AAAA")="F D1=0:0 S D1=$O(^DGPT(D0,""P"",D1)) Q:D1'>0  I $D(^DGPT(D0,""P"",D1,0)) S DG3=^(0) F DGZD=5:1:9 "_DG9_" X XAAAA"
"RTN","DGPTFIC",34,0)
 S L=0
"RTN","DGPTFIC",35,0)
 G GO
"RTN","DGPTFIC",36,0)
 Q
"RTN","DGPTFIC",37,0)
OUT S DGZJ=$X,DG2=$S(DGZT["ICD":"^ICD9(",1:"^ICD0("),DIO=1
"RTN","DGPTFIC",38,0)
 F I=0:0 S I=$O(^UTILITY($J,"DG",D0,I)) Q:I'>0  S J=^(I),Y=$P($P(J,U,2),".",1) X ^DD("DD") W:I>1 !?DGZJ W DGZT_$P(J,U,1)_"  "_Y W ?DGZJ+23,$P(@(DG2_"$P(J,U,3)"_",0)"),U,1) I DG5 S DJ=$S($D(DJ):DJ,1:0)+1,DTOT=1
"RTN","DGPTFIC",39,0)
 Q:'$D(^UTILITY($J,"DG",D0,"A"))  S J=^("A") F I=10,16:1:28 S K=$P(J,U,I) I K]"" W !?DGZJ,$S(I=10:"PRINCIPAL DIAGNOSIS",1:"SECONDARY DIAG "_(I-15)),?DGZJ+23,K I DG5 S DJ=$S($D(DJ):DJ,1:0)+1,DTOT=1   ;;DG*832
"RTN","DGPTFIC",40,0)
 Q
"RTN","DGPTFIC",41,0)
DHD S PROMPT="Then search for: ",DIC("S")=$S($G(DIC("S"))="":"I DG1'[(U_+Y_U)",1:DIC("S")_"&(DG1'[(U_+Y_U))")
"RTN","DGPTFIC",42,0)
 I DG7="Diagnosis" F I=0:0 D ICDEN1^DGPTF5 Q:X=""  S X="`"_+Y D ^DIC Q:Y'>0  S DG1=DG1_+Y_U Q:$L(DG1)>235
"RTN","DGPTFIC",43,0)
 E  F I=0:0 D ^DIC Q:Y'>0  S DG1=DG1_+Y_U Q:$L(DG1)>235
"RTN","DGPTFIC",44,0)
 S DHD="" F I=2:1 S DHD=DHD_$S(I'=2:",  ",1:"")_$P(@(DIC_"$P(DG1,U,I)"_",0)"),U,1) Q:'$P(DG1,U,I+1)  I $L(DHD)>200 S DHD=DHD_"....." Q
"RTN","DGPTFIC",45,0)
C W !,"Total by PTF record or ICD count: P// " S Z="^PTF record^ICD count" R X:DTIME G Q:X=U!'$T X:X="" "S X=""P"" W X" D IN^DGHELP G H:%=-1 S DG5=$S(X="I":1,1:0) Q
"RTN","DGPTFIC",46,0)
H W !!,"The search may have more than 1 match per PTF record",!,"Type 'P' to total only PTF records",!,"Type 'I' to total all matches",! G C
"RTN","DGPTFIC",47,0)
H1 W !!,"Type 'R' to specify a range of codes",!,"     'E' to specify a series of codes to match exactly",!
"RTN","DGPTFIC",48,0)
RANGE S DIC(0)="AMEQZ" W !,"Search by Range or Exact match: E// " S Z="^RANGE^EXACT MATCH" R X:DTIME G Q:X=U!'$T X:X="" "S X=""E"" W X" D IN^DGHELP G H1:%=-1 S DGR=$S(X="R":1,1:0)
"RTN","DGPTFIC",49,0)
 S DG7=$S(DIC[9:"Diagnosis",1:"Surgical") G E:'DGR
"RTN","DGPTFIC",50,0)
 S DIC("A")="Start with "_DG7_" code: "
"RTN","DGPTFIC",51,0)
 ;I DG7="Diagnosis" S DIC(0)="XMQZ",PROMPT="Start with "_DG7_" code: " D ICDEN1^DGPTF5 Q:X=""  S X="`"_+Y D ^DIC G Q:Y'>0 S DG1=$P(Y(0),U,1)_" "
"RTN","DGPTFIC",52,0)
 ;E  S DIC("A")="Start with "_DG7_" code: " D ^DIC G Q:Y'>0 S DG1=$P(Y(0),U,1)_" "
"RTN","DGPTFIC",53,0)
 D ^DIC G Q:Y'>0 S DG1=$P(Y(0),U,1)_" "
"RTN","DGPTFIC",54,0)
F ;I DG7="Diagnosis" S PROMPT="Go to "_DG7_" code: " D ICDEN1^DGPTF5 Q:X=""  S X="`"_+Y D ^DIC G Q:Y'>0 S DG6=$P(Y(0),U,1)_"! " I DG6']DG1 W !,"Must be after start code",! G F
"RTN","DGPTFIC",55,0)
 ;E  S DIC("A")="Go to "_DG7_" code: " D ^DIC G Q:Y'>0 S DG6=$P(Y(0),U,1)_"! " I DG6']DG1 W !,"Must be after start code",! G F
"RTN","DGPTFIC",56,0)
 S DIC("A")="Go to "_DG7_" code: " D ^DIC G Q:Y'>0 S DG6=$P(Y(0),U,1)_"! " I DG6']DG1 W !,"Must be after start code",! G F
"RTN","DGPTFIC",57,0)
 S DHD=DG1_" to "_$P(DG6,"!",1)_" "_DG7_" Code Search" D C G Q:'$D(X),@("F"_$E(DIC,5))
"RTN","DGPTFIC",58,0)
 Q
"RTN","DGPTFIC",59,0)
E ;I DG7="Diagnosis" S DIC(0)="XMQZ",PROMPT="Enter "_DG7_" Code to search for: " D ICDEN1^DGPTF5 Q:X=""  S X="`"_+Y D ^DIC G Q:Y'>0 S DG1=U_+Y_U D DHD G Q:'$D(X),@("E"_$E(DIC,5))
"RTN","DGPTFIC",60,0)
 ;E  S PROMPT="Enter "_DG7_" Code to search for: " D ^DIC G Q:Y'>0 S DG1=U_+Y_U D DHD G Q:'$D(X),@("E"_$E(DIC,5))
"RTN","DGPTFIC",61,0)
 D ^DIC G Q:Y'>0 S DG1=U_+Y_U D DHD G Q:'$D(X),@("E"_$E(DIC,5))
"VER")
8.0^22.0
"^DD",405,405,.01,0)
DATE/TIME^RDX^^0;1^S %DT="EST" D ^%DT K %DT S X=Y K:Y<1 X I $D(X),'$D(DGPMT) W !?3,*7,"USE BED CONTROL MOVEMENT OPTIONS!" K X
"^DD",405,405,.01,.1)
MOVEMENT DATE/TIME
"^DD",405,405,.01,1,0)
^.1
"^DD",405,405,.01,1,1,0)
405^B
"^DD",405,405,.01,1,1,1)
S ^DGPM("B",$E(X,1,30),DA)=""
"^DD",405,405,.01,1,1,2)
K ^DGPM("B",$E(X,1,30),DA)
"^DD",405,405,.01,1,2,0)
405^AINP1^MUMPS
"^DD",405,405,.01,1,2,1)
S DGPMDDF=1 D ^DGPMDD1
"^DD",405,405,.01,1,2,2)
S DGPMDDF=1 D ^DGPMDD2
"^DD",405,405,.01,1,3,0)
^^TRIGGER^2^.351
"^DD",405,405,.01,1,3,1)
X ^DD(405,.01,1,3,1.3) I X S X=DIV X ^DD(405,.01,1,3,89.2) S X=$P(Y(101),U,1) S D0=I(0,0) S DIU=X K Y S X=DIV S X=DIV X ^DD(405,.01,1,3,1.4)
"^DD",405,405,.01,1,3,1.3)
K DIV S DIV=X,D0=DA,DIV(0)=D0 S Y(0)=X S Y(1)=$S($D(^DGPM(D0,0)):^(0),1:"") S X=$S('$D(^DG(405.2,+$P(Y(1),U,18),0)):"",1:$P(^(0),U,1))["DEATH"
"^DD",405,405,.01,1,3,1.4)
S DIH=$S($D(^DPT(DIV(0),.35)):^(.35),1:""),DIV=X I $D(^(0)) S $P(^(.35),U,1)=DIV,DIH=2,DIG=.351 D ^DICR
"^DD",405,405,.01,1,3,2)
Q
"^DD",405,405,.01,1,3,89.2)
S I(0,0)=$S($D(D0):D0,1:""),Y(1)=$S($D(^DGPM(D0,0)):^(0),1:""),D0=$P(Y(1),U,3) S:'$D(^DPT(+D0,0)) D0=-1 S DIV(0)=D0 S Y(101)=$S($D(^DPT(D0,.35)):^(.35),1:"")
"^DD",405,405,.01,1,3,"CREATE CONDITION")
MAS MOVEMENT TYPE["DEATH"
"^DD",405,405,.01,1,3,"CREATE VALUE")
DATE/TIME
"^DD",405,405,.01,1,3,"DELETE VALUE")
NO EFFECT
"^DD",405,405,.01,1,3,"FIELD")
PATIENT:DATE OF DEATH
"^DD",405,405,.01,1,4,0)
405^A22^MUMPS
"^DD",405,405,.01,1,4,1)
S:$P(^DGPM(DA,0),U,22)="" $P(^(0),U,22)=0
"^DD",405,405,.01,1,4,2)
Q
"^DD",405,405,.01,1,5,0)
^^TRIGGER^405^.24
"^DD",405,405,.01,1,5,1)
K DIV S DIV=X,D0=DA,DIV(0)=D0 S Y(0)=X S X=$S('$D(^DGPM(+$P(^DGPM(DA,0),U,24),0)):0,1:X'=+^(0)) I X S X=DIV S Y(1)=$S($D(^DGPM(D0,0)):^(0),1:"") S X=$P(Y(1),U,24),X=X S DIU=X K Y S X="" X ^DD(405,.01,1,5,1.4)
"^DD",405,405,.01,1,5,1.4)
S DIH=$G(^DGPM(DIV(0),0)),DIV=X S $P(^(0),U,24)=DIV,DIH=405,DIG=.24 D ^DICR
"^DD",405,405,.01,1,5,2)
Q
"^DD",405,405,.01,1,5,"CREATE CONDITION")
S X=$S('$D(^DGPM(+$P(^DGPM(DA,0),U,24),0)):0,1:X'=+^(0))
"^DD",405,405,.01,1,5,"CREATE VALUE")
@
"^DD",405,405,.01,1,5,"DELETE VALUE")
NO EFFECT
"^DD",405,405,.01,1,5,"DT")
3100617
"^DD",405,405,.01,1,5,"FIELD")
RELATED PHYSICAL MOVEMENT
"^DD",405,405,.01,1,6,0)
405^ADFN1^MUMPS
"^DD",405,405,.01,1,6,1)
S:$P(^DGPM(DA,0),U,3) ^DGPM("ADFN"_$P(^(0),U,3),X,DA)=""
"^DD",405,405,.01,1,6,2)
K:$P(^DGPM(DA,0),U,3) ^DGPM("ADFN"_$P(^(0),U,3),X,DA)
"^DD",405,405,.01,1,7,0)
405^AGL1^MUMPS
"^DD",405,405,.01,1,7,1)
S Y=$P(^DGPM(DA,0),U,2) I Y,Y'=4,Y'=5,X,X<DT S DGHNYT=$S(Y=1:$S($D(DGIDX):3,1:1),Y=2:$S($D(DGIDX):6,1:4),Y=3:$S($D(DGIDX):9,1:7),1:15) D ^DGPMGLC K DGIDX
"^DD",405,405,.01,1,7,2)
S Y=$P(^DGPM(DA,0),U,2) I Y,Y'=4,Y'=5,X,X<DT S DGHNYT=$S(Y=1:2,Y=2:5,Y=3:8,1:14) D ^DGPMGLC
"^DD",405,405,.01,1,7,"DT")
2930430
"^DD",405,405,.01,1,8,0)
405^AODS1^MUMPS
"^DD",405,405,.01,1,8,1)
I "^1^3^"[("^"_$P(^DGPM(DA,0),"^",2)_"^") S A1B2TAG="ADM" D ^A1B2XFR
"^DD",405,405,.01,1,8,2)
I "^1^3^"[("^"_$P(^DGPM(DA,0),"^",2)_"^") S A1B2TAG="ADM" D ^A1B2XFR
"^DD",405,405,.01,3)
Enter the date and time of this patient movement.
"^DD",405,405,.01,21,0)
^.001^3^3^3111229^^
"^DD",405,405,.01,21,1,0)
Enter in this field the date/time of the movement (admission, transfer,
"^DD",405,405,.01,21,2,0)
discharge, treating specialty transfer, lodger check-in, or lodger check-
"^DD",405,405,.01,21,3,0)
out).  Time must be included.
"^DD",405,405,.01,"AUDIT")

"^DD",405,405,.01,"DEL",1,0)
I '$D(DGPMT) W !?5,*7,"Use bed control movement options"
"^DD",405,405,.01,"DT")
3111229
"^DD",405,405,.04,0)
TYPE OF MOVEMENT^R*P405.1'X^DG(405.1,^0;4^S DIC("S")="I $D(DGPMT),($P(^(0),""^"",2)=DGPMT),$P(^(0),""^"",4) S DGER=0,DGPMTYP=$P(^(0),""^"",3) D:DGPMT<4!(DGPMT=6)!(DGPMT=5) @(""DICS^DGPMV3""_DGPMT) I 'DGER" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",405,405,.04,1,0)
^.1
"^DD",405,405,.04,1,1,0)
^^TRIGGER^405^.18
"^DD",405,405,.04,1,1,1)
K DIV S DIV=X,D0=DA,DIV(0)=D0 S Y(1)=$S($D(^DGPM(D0,0)):^(0),1:"") S X=$P(Y(1),U,18),X=X S DIU=X K Y S X=DIV S X=$S($D(^DG(405.1,X,0)):$P(^(0),"^",3),1:"") X ^DD(405,.04,1,1,1.4)
"^DD",405,405,.04,1,1,1.4)
S DIH=$G(^DGPM(DIV(0),0)),DIV=X S $P(^(0),U,18)=DIV,DIH=405,DIG=.18 D ^DICR
"^DD",405,405,.04,1,1,2)
K DIV S DIV=X,D0=DA,DIV(0)=D0 S Y(1)=$S($D(^DGPM(D0,0)):^(0),1:"") S X=$P(Y(1),U,18),X=X S DIU=X K Y S X="" S DIH=$G(^DGPM(DIV(0),0)),DIV=X S $P(^(0),U,18)=DIV,DIH=405,DIG=.18 D ^DICR
"^DD",405,405,.04,1,1,"CREATE VALUE")
S X=$S($D(^DG(405.1,X,0)):$P(^(0),"^",3),1:"")
"^DD",405,405,.04,1,1,"DELETE VALUE")
@
"^DD",405,405,.04,1,1,"DT")
3100617
"^DD",405,405,.04,1,1,"FIELD")
MAS MOVEMENT TYPE
"^DD",405,405,.04,3)
Enter the type of movement for this patient on the date/time entered.
"^DD",405,405,.04,12)
Transaction types must match and only allowable types can be chosen.
"^DD",405,405,.04,12.1)
S DIC("S")="I $D(DGPMT),($P(^(0),""^"",2)=DGPMT),$P(^(0),""^"",4) S DGER=0,DGPMTYP=$P(^(0),""^"",3) D:DGPMT<4!(DGPMT=6)!(DGPMT=5) @(""DICS^DGPMV3""_DGPMT) I 'DGER"
"^DD",405,405,.04,21,0)
^.001^5^5^3111229^^^^
"^DD",405,405,.04,21,1,0)
Choose the type of movement this patient had.  You will be selecting from
"^DD",405,405,.04,21,2,0)
active FACILITY MOVEMENT TYPES for which the TRANSACTION TYPE of this
"^DD",405,405,.04,21,3,0)
movement matches the TRANSACTION TYPE of the FACILITY MOVEMENT TYPE.  For
"^DD",405,405,.04,21,4,0)
example, if you are admitting a patient, you will only be able to select
"^DD",405,405,.04,21,5,0)
active admission types.
"^DD",405,405,.04,"AUDIT")

"^DD",405,405,.04,"DT")
3111229
"^DD",405,405,.06,0)
WARD LOCATION^R*P42'X^DIC(42,^0;6^S DIC("S")="I $S($D(^(""ORDER"")):^(""ORDER""),1:0)" D W^DGPMVDD I $D(X) D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X I $D(X) D WARD^DGPMVDD K:$D(DGOOS) X K DGOOS
"^DD",405,405,.06,1,0)
^.1
"^DD",405,405,.06,1,1,0)
405^CN^MUMPS
"^DD",405,405,.06,1,1,1)
S DGPMDDF=6,DGPMDDT=1 D ^DGPMDDCN
"^DD",405,405,.06,1,1,2)
S DGPMDDF=6,DGPMDDT=0 D ^DGPMDDCN
"^DD",405,405,.06,1,2,0)
^^TRIGGER^405^.07
"^DD",405,405,.06,1,2,1)
K DIV S DIV=X,D0=DA,DIV(0)=D0 S Y(1)=$S($D(^DGPM(D0,0)):^(0),1:"") S X=$P(Y(1),U,7),X=X S DIU=X K Y S X="" S DIH=$G(^DGPM(DIV(0),0)),DIV=X S $P(^(0),U,7)=DIV,DIH=405,DIG=.07 D ^DICR
"^DD",405,405,.06,1,2,2)
Q
"^DD",405,405,.06,1,2,"CREATE VALUE")
@
"^DD",405,405,.06,1,2,"DELETE VALUE")
NO EFFECT
"^DD",405,405,.06,1,2,"DT")
3100617
"^DD",405,405,.06,1,2,"FIELD")
ROOM-BED
"^DD",405,405,.06,1,3,0)
405^AGL6^MUMPS
"^DD",405,405,.06,1,3,1)
S Y=^DGPM(DA,0) I +Y,Y<DT S Y=$P(Y,U,2) I Y<3,$D(DGOWD) S DGHNYT=$S(Y=1:10,1:12) D ^DGPMGLC K DGIDX
"^DD",405,405,.06,1,3,2)
S Y=^DGPM(DA,0) I +Y,Y<DT,X'=$P(Y,U,6) S Y=$P(Y,U,2) I Y<3 S DGOWD=$S($D(^DIC(42,+X,0)):$P(^(0),U),1:"") K DGIDX
"^DD",405,405,.06,3)
Enter the ward on which the patient was placed.
"^DD",405,405,.06,12)
Don't allow an inactive ward or one not on bed census
"^DD",405,405,.06,12.1)
S DIC("S")="I $S($D(^(""ORDER"")):^(""ORDER""),1:0)" D W^DGPMVDD I $D(X)
"^DD",405,405,.06,21,0)
^^4^4^2901011^
"^DD",405,405,.06,21,1,0)
Enter in this field the WARD to which this patient is being admitted or
"^DD",405,405,.06,21,2,0)
transferred to.  Choose from ACTIVE entries in the WARD LOCATION file.
"^DD",405,405,.06,21,3,0)
This field will only be prompted for movements to WARDS at the home
"^DD",405,405,.06,21,4,0)
facility.
"^DD",405,405,.06,"DT")
3100617
"^DD",405,405,.14,0)
ADMISSION/CHECK-IN MOVEMENT^R*P405'XI^DGPM(^0;14^S DIC("S")="S DGZ=^DGPM(DA,0) I $D(DGPMT),($P(^DGPM(+Y,0),""^"",3)=$P(DGZ,""^"",3)),$P(DGZ,""^"",1)'<$P(^DGPM(+Y,0),""^"",1) K DGZ" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",405,405,.14,1,0)
^.1
"^DD",405,405,.14,1,1,0)
405^AINP14^MUMPS
"^DD",405,405,.14,1,1,1)
S DGPMDDF=14 D ^DGPMDD1
"^DD",405,405,.14,1,1,2)
S DGPMDDF=14 D ^DGPMDD2
"^DD",405,405,.14,1,2,0)
405^CA
"^DD",405,405,.14,1,2,1)
S ^DGPM("CA",$E(X,1,30),DA)=""
"^DD",405,405,.14,1,2,2)
K ^DGPM("CA",$E(X,1,30),DA)
"^DD",405,405,.14,1,3,0)
^^TRIGGER^405^.17
"^DD",405,405,.14,1,3,1)
K DIV S DIV=X,D0=DA,DIV(0)=D0 S Y(0)=X I "^3^5^"[("^"_$P(^DGPM(DA,0),"^",2)_"^") I X S X=DIV X ^DD(405,.14,1,3,89.2) S X=$P($G(^DGPM(+$P(Y(101),U,17),0)),U) S D0=I(0,0) S DIU=X K Y S X=DIV S X=DA X ^DD(405,.14,1,3,1.4)
"^DD",405,405,.14,1,3,1.4)
S DIH=$G(^DGPM(DIV(0),0)),DIV=X I $D(^(0)) S $P(^(0),U,17)=DIV,DIH=405,DIG=.17 D ^DICR
"^DD",405,405,.14,1,3,2)
K DIV S DIV=X,D0=DA,DIV(0)=D0 S Y(0)=X I "^3^5^"[("^"_$P(^DGPM(DA,0),"^",2)_"^") I X S X=DIV X ^DD(405,.14,1,3,89.2) S X=$P($G(^DGPM(+$P(Y(101),U,17),0)),U) S D0=I(0,0) S DIU=X K Y S X="" X ^DD(405,.14,1,3,2.4)
"^DD",405,405,.14,1,3,2.4)
S DIH=$G(^DGPM(DIV(0),0)),DIV=X I $D(^(0)) S $P(^(0),U,17)=DIV,DIH=405,DIG=.17 D ^DICR
"^DD",405,405,.14,1,3,89.2)
S I(0,0)=$G(D0),Y(1)=$S($D(^DGPM(D0,0)):^(0),1:""),D0=$P(Y(1),U,14) S:'D0!'$D(^DGPM(+D0,0)) D0=-1 S DIV(0)=D0 S Y(101)=$S($D(^DGPM(D0,0)):^(0),1:"")
"^DD",405,405,.14,1,3,"%D",0)
^^5^5^3100810^
"^DD",405,405,.14,1,3,"%D",1,0)
This trigger will automatically set the 17th piece of the admission or 
"^DD",405,405,.14,1,3,"%D",2,0)
check-in movement if a discharge or check-out movement is entered. The 
"^DD",405,405,.14,1,3,"%D",3,0)
17th piece is a pointer from the admission to the discharge movement, or, 
"^DD",405,405,.14,1,3,"%D",4,0)
in the case of lodgers, a pointer from the check-in movement to the 
"^DD",405,405,.14,1,3,"%D",5,0)
check- out movement.
"^DD",405,405,.14,1,3,"CREATE CONDITION")
I "^3^5^"[("^"_$P(^DGPM(DA,0),"^",2)_"^")
"^DD",405,405,.14,1,3,"CREATE VALUE")
S X=DA
"^DD",405,405,.14,1,3,"DELETE CONDITION")
I "^3^5^"[("^"_$P(^DGPM(DA,0),"^",2)_"^")
"^DD",405,405,.14,1,3,"DELETE VALUE")
@
"^DD",405,405,.14,1,3,"DT")
3100810
"^DD",405,405,.14,1,3,"FIELD")
ADMISSION/CHECK-IN:.17
"^DD",405,405,.14,3)
Enter the admission or check-in movement with which this movement is associated.
"^DD",405,405,.14,12)
Movement doesn't precede admission or check-in movement for same patient.
"^DD",405,405,.14,12.1)
S DIC("S")="S DGZ=^DGPM(DA,0) I $D(DGPMT),($P(^DGPM(+Y,0),""^"",3)=$P(DGZ,""^"",3)),$P(DGZ,""^"",1)'<$P(^DGPM(+Y,0),""^"",1) K DGZ"
"^DD",405,405,.14,21,0)
^.001^2^2^3100806^^^
"^DD",405,405,.14,21,1,0)
This field is a pointer to the admission or check-in lodger movement which
"^DD",405,405,.14,21,2,0)
is associated with the transaction being entered.
"^DD",405,405,.14,"DT")
3100810
"^DD",405,405,.18,0)
MAS MOVEMENT TYPE^RP405.2'^DG(405.2,^0;18^Q
"^DD",405,405,.18,1,0)
^.1
"^DD",405,405,.18,1,1,0)
^^TRIGGER^405^.05
"^DD",405,405,.18,1,1,1)
K DIV S DIV=X,D0=DA,DIV(0)=D0 S Y(0)=X I "MAS MOVEMENT TYPE"'="TRANSFER IN"&("MAS MOVEMENT TYPE"'="TRANSFER OUT") I X S X=DIV S Y(1)=$S($D(^DGPM(D0,0)):^(0),1:"") S X=$P(Y(1),U,5),X=X S DIU=X K Y S X="" X ^DD(405,.18,1,1,1.4)
"^DD",405,405,.18,1,1,1.4)
S DIH=$G(^DGPM(DIV(0),0)),DIV=X S $P(^(0),U,5)=DIV,DIH=405,DIG=.05 D ^DICR
"^DD",405,405,.18,1,1,2)
Q
"^DD",405,405,.18,1,1,"CREATE CONDITION")
I "MAS MOVEMENT TYPE"'="TRANSFER IN"&("MAS MOVEMENT TYPE"'="TRANSFER OUT")
"^DD",405,405,.18,1,1,"CREATE VALUE")
@
"^DD",405,405,.18,1,1,"DELETE VALUE")
NO EFFECT
"^DD",405,405,.18,1,1,"DT")
3100617
"^DD",405,405,.18,1,1,"FIELD")
TRANSFER FACILITY
"^DD",405,405,.18,1,2,0)
^^TRIGGER^2^.351
"^DD",405,405,.18,1,2,1)
K DIV S DIV=X,D0=DA,DIV(0)=D0 S Y(0)=X S X=$S('$D(^DG(405.2,+Y(0),0)):"",1:$P(^(0),U,1))["DEATH" I X S X=DIV X ^DD(405,.18,1,2,89.2) S X=$P(Y(101),U,1) S D0=I(0,0) S DIU=X K Y X ^DD(405,.18,1,2,1.1) X ^DD(405,.18,1,2,1.4)
"^DD",405,405,.18,1,2,1.1)
S X=DIV S Y(1)=$S($D(^DGPM(D0,0)):^(0),1:"") S X=$P(Y(1),U,1)
"^DD",405,405,.18,1,2,1.4)
S DIH=$S($D(^DPT(DIV(0),.35)):^(.35),1:""),DIV=X I $D(^(0)) S $P(^(.35),U,1)=DIV,DIH=2,DIG=.351 D ^DICR
"^DD",405,405,.18,1,2,2)
K DIV S DIV=X,D0=DA,DIV(0)=D0 S Y(0)=X S X=$S('$D(^DG(405.2,+X,0)):"",1:$P(^(0),U,1))["DEATH" I X S X=DIV X ^DD(405,.18,1,2,89.2) S X=$P(Y(101),U,1) S D0=I(0,0) S DIU=X K Y S X="" X ^DD(405,.18,1,2,2.4)
"^DD",405,405,.18,1,2,2.4)
S DIH=$S($D(^DPT(DIV(0),.35)):^(.35),1:""),DIV=X I $D(^(0)) S $P(^(.35),U,1)=DIV,DIH=2,DIG=.351 D ^DICR
"^DD",405,405,.18,1,2,89.2)
S I(0,0)=$S($D(D0):D0,1:""),Y(1)=$S($D(^DGPM(D0,0)):^(0),1:""),D0=$P(Y(1),U,3) S:'$D(^DPT(+D0,0)) D0=-1 S DIV(0)=D0 S Y(101)=$S($D(^DPT(D0,.35)):^(.35),1:"")
"^DD",405,405,.18,1,2,"CREATE CONDITION")
MAS MOVEMENT TYPE["DEATH"
"^DD",405,405,.18,1,2,"CREATE VALUE")
MOVEMENT DATE/TIME
"^DD",405,405,.18,1,2,"DELETE CONDITION")
OLD MAS MOVEMENT TYPE["DEATH"
"^DD",405,405,.18,1,2,"DELETE VALUE")
@
"^DD",405,405,.18,1,2,"FIELD")
.03:DATE OF DEATH
"^DD",405,405,.18,1,3,0)
405^AGL18^MUMPS
"^DD",405,405,.18,1,3,1)
S Y=^DGPM(DA,0) I +Y,Y<DT S Y=$P(Y,U,2) I Y<4,$D(DGOTY) S DGHNYT=11 D ^DGPMGLC K DGIDX
"^DD",405,405,.18,1,3,2)
S Y=^DGPM(DA,0) I +Y,Y<DT S Y=$P(Y,U,2) I Y<4 S DGOTY=$S($D(^DG(405.2,+X,0)):$P(^(0),U),1:"") K DGIDX
"^DD",405,405,.18,1,4,0)
405^AODS5^MUMPS
"^DD",405,405,.18,1,4,1)
I $P(^DGPM(DA,0),"^",2)=3 S A1B2TAG="ADM" D ^A1B2XFR
"^DD",405,405,.18,1,4,2)
I $P(^DGPM(DA,0),"^",2)=3 S A1B2TAG="ADM" D ^A1B2XFR
"^DD",405,405,.18,3)
A pointer to the MAS Movement Type file.  Created by the module.
"^DD",405,405,.18,5,1,0)
405^.04^1
"^DD",405,405,.18,9)
^
"^DD",405,405,.18,21,0)
^^6^6^2930712^^
"^DD",405,405,.18,21,1,0)
This field is internally set by the module.  When you enter a FACILITY
"^DD",405,405,.18,21,2,0)
MOVEMENT TYPE (field .04 of this file), this field will automatically be
"^DD",405,405,.18,21,3,0)
set to the internal number of the MAS-distributed movement type to which
"^DD",405,405,.18,21,4,0)
this FACILITY MOVEMENT TYPE points.  This internal number is used
"^DD",405,405,.18,21,5,0)
throughout the code of MAS and various other packages to determine the
"^DD",405,405,.18,21,6,0)
flow of processing that should occur.
"^DD",405,405,.18,"DT")
3100617
"BLD",8433,6)
^757
**END**
**END**
