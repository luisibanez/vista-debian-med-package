Released PRC*5.1*162 SEQ #145
Extracted from mail message
**KIDS**:PRC*5.1*162^

**INSTALL NAME**
PRC*5.1*162
"BLD",7072,0)
PRC*5.1*162^IFCAP^0^3120404^y
"BLD",7072,1,0)
^^3^3^3120402^
"BLD",7072,1,1,0)
VistA Fee Automation Enhancement
"BLD",7072,1,2,0)
 o modify PRCS58CC to conditionally skip the control point access check
"BLD",7072,1,3,0)
 o delete accounting technician options used to process 994 code sheets
"BLD",7072,4,0)
^9.64PA^^
"BLD",7072,6.3)
2
"BLD",7072,"KRN",0)
^9.67PA^779.2^20
"BLD",7072,"KRN",.4,0)
.4
"BLD",7072,"KRN",.401,0)
.401
"BLD",7072,"KRN",.402,0)
.402
"BLD",7072,"KRN",.403,0)
.403
"BLD",7072,"KRN",.5,0)
.5
"BLD",7072,"KRN",.84,0)
.84
"BLD",7072,"KRN",3.6,0)
3.6
"BLD",7072,"KRN",3.8,0)
3.8
"BLD",7072,"KRN",9.2,0)
9.2
"BLD",7072,"KRN",9.8,0)
9.8
"BLD",7072,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",7072,"KRN",9.8,"NM",1,0)
PRCS58CC^^0^B10643800
"BLD",7072,"KRN",9.8,"NM","B","PRCS58CC",1)

"BLD",7072,"KRN",19,0)
19
"BLD",7072,"KRN",19,"NM",0)
^9.68A^18^18
"BLD",7072,"KRN",19,"NM",1,0)
PRC FEE GECS BATCH^^1^
"BLD",7072,"KRN",19,"NM",2,0)
PRC FEE GECS BATCH EDIT^^1^
"BLD",7072,"KRN",19,"NM",3,0)
PRC FEE GECS BATCHES STATUS^^1^
"BLD",7072,"KRN",19,"NM",4,0)
PRC FEE GECS BATCHES WAITING T^^1^
"BLD",7072,"KRN",19,"NM",5,0)
PRC FEE GECS CODE EDIT^^1^
"BLD",7072,"KRN",19,"NM",6,0)
PRC FEE GECS CREATE^^1^
"BLD",7072,"KRN",19,"NM",7,0)
PRC FEE GECS DELETE^^1^
"BLD",7072,"KRN",19,"NM",8,0)
PRC FEE GECS KEYPUNCH^^1^
"BLD",7072,"KRN",19,"NM",9,0)
PRC FEE GECS MAIN MENU^^1^
"BLD",7072,"KRN",19,"NM",10,0)
PRC FEE GECS MAINTENANCE USER ^^1^
"BLD",7072,"KRN",19,"NM",11,0)
PRC FEE GECS PURGE^^1^
"BLD",7072,"KRN",19,"NM",12,0)
PRC FEE GECS READY FOR BATCHIN^^1^
"BLD",7072,"KRN",19,"NM",13,0)
PRC FEE GECS REBATCH^^1^
"BLD",7072,"KRN",19,"NM",14,0)
PRC FEE GECS REPORTS MENU^^1^
"BLD",7072,"KRN",19,"NM",15,0)
PRC FEE GECS RETRANSMIT^^1^
"BLD",7072,"KRN",19,"NM",16,0)
PRC FEE GECS REVIEW CODE SHEET^^1^
"BLD",7072,"KRN",19,"NM",17,0)
PRC FEE GECS TRANSMIT^^1^
"BLD",7072,"KRN",19,"NM",18,0)
PRC FEE GECS TRANSMIT USER^^1^
"BLD",7072,"KRN",19,"NM","B","PRC FEE GECS BATCH",1)

"BLD",7072,"KRN",19,"NM","B","PRC FEE GECS BATCH EDIT",2)

"BLD",7072,"KRN",19,"NM","B","PRC FEE GECS BATCHES STATUS",3)

"BLD",7072,"KRN",19,"NM","B","PRC FEE GECS BATCHES WAITING T",4)

"BLD",7072,"KRN",19,"NM","B","PRC FEE GECS CODE EDIT",5)

"BLD",7072,"KRN",19,"NM","B","PRC FEE GECS CREATE",6)

"BLD",7072,"KRN",19,"NM","B","PRC FEE GECS DELETE",7)

"BLD",7072,"KRN",19,"NM","B","PRC FEE GECS KEYPUNCH",8)

"BLD",7072,"KRN",19,"NM","B","PRC FEE GECS MAIN MENU",9)

"BLD",7072,"KRN",19,"NM","B","PRC FEE GECS MAINTENANCE USER ",10)

"BLD",7072,"KRN",19,"NM","B","PRC FEE GECS PURGE",11)

"BLD",7072,"KRN",19,"NM","B","PRC FEE GECS READY FOR BATCHIN",12)

"BLD",7072,"KRN",19,"NM","B","PRC FEE GECS REBATCH",13)

"BLD",7072,"KRN",19,"NM","B","PRC FEE GECS REPORTS MENU",14)

"BLD",7072,"KRN",19,"NM","B","PRC FEE GECS RETRANSMIT",15)

"BLD",7072,"KRN",19,"NM","B","PRC FEE GECS REVIEW CODE SHEET",16)

"BLD",7072,"KRN",19,"NM","B","PRC FEE GECS TRANSMIT",17)

"BLD",7072,"KRN",19,"NM","B","PRC FEE GECS TRANSMIT USER",18)

"BLD",7072,"KRN",19.1,0)
19.1
"BLD",7072,"KRN",101,0)
101
"BLD",7072,"KRN",409.61,0)
409.61
"BLD",7072,"KRN",771,0)
771
"BLD",7072,"KRN",779.2,0)
779.2
"BLD",7072,"KRN",870,0)
870
"BLD",7072,"KRN",8989.51,0)
8989.51
"BLD",7072,"KRN",8989.52,0)
8989.52
"BLD",7072,"KRN",8994,0)
8994
"BLD",7072,"KRN","B",.4,.4)

"BLD",7072,"KRN","B",.401,.401)

"BLD",7072,"KRN","B",.402,.402)

"BLD",7072,"KRN","B",.403,.403)

"BLD",7072,"KRN","B",.5,.5)

"BLD",7072,"KRN","B",.84,.84)

"BLD",7072,"KRN","B",3.6,3.6)

"BLD",7072,"KRN","B",3.8,3.8)

"BLD",7072,"KRN","B",9.2,9.2)

"BLD",7072,"KRN","B",9.8,9.8)

"BLD",7072,"KRN","B",19,19)

"BLD",7072,"KRN","B",19.1,19.1)

"BLD",7072,"KRN","B",101,101)

"BLD",7072,"KRN","B",409.61,409.61)

"BLD",7072,"KRN","B",771,771)

"BLD",7072,"KRN","B",779.2,779.2)

"BLD",7072,"KRN","B",870,870)

"BLD",7072,"KRN","B",8989.51,8989.51)

"BLD",7072,"KRN","B",8989.52,8989.52)

"BLD",7072,"KRN","B",8994,8994)

"BLD",7072,"QUES",0)
^9.62^^
"KRN",19,13126,-1)
1^1
"KRN",19,13126,0)
PRC FEE GECS BATCH
"KRN",19,13127,-1)
1^2
"KRN",19,13127,0)
PRC FEE GECS BATCH EDIT
"KRN",19,13128,-1)
1^3
"KRN",19,13128,0)
PRC FEE GECS BATCHES STATUS
"KRN",19,13129,-1)
1^4
"KRN",19,13129,0)
PRC FEE GECS BATCHES WAITING T
"KRN",19,13130,-1)
1^5
"KRN",19,13130,0)
PRC FEE GECS CODE EDIT
"KRN",19,13131,-1)
1^6
"KRN",19,13131,0)
PRC FEE GECS CREATE
"KRN",19,13132,-1)
1^7
"KRN",19,13132,0)
PRC FEE GECS DELETE
"KRN",19,13133,-1)
1^8
"KRN",19,13133,0)
PRC FEE GECS KEYPUNCH
"KRN",19,13134,-1)
1^9
"KRN",19,13134,0)
PRC FEE GECS MAIN MENU
"KRN",19,13135,-1)
1^10
"KRN",19,13135,0)
PRC FEE GECS MAINTENANCE USER 
"KRN",19,13136,-1)
1^11
"KRN",19,13136,0)
PRC FEE GECS PURGE
"KRN",19,13137,-1)
1^12
"KRN",19,13137,0)
PRC FEE GECS READY FOR BATCHIN
"KRN",19,13138,-1)
1^13
"KRN",19,13138,0)
PRC FEE GECS REBATCH
"KRN",19,13139,-1)
1^14
"KRN",19,13139,0)
PRC FEE GECS REPORTS MENU
"KRN",19,13140,-1)
1^15
"KRN",19,13140,0)
PRC FEE GECS RETRANSMIT
"KRN",19,13141,-1)
1^16
"KRN",19,13141,0)
PRC FEE GECS REVIEW CODE SHEET
"KRN",19,13142,-1)
1^17
"KRN",19,13142,0)
PRC FEE GECS TRANSMIT
"KRN",19,13143,-1)
1^18
"KRN",19,13143,0)
PRC FEE GECS TRANSMIT USER
"MBREQ")
0
"ORD",18,19)
19;18;;;OPT^XPDTA;OPTF1^XPDIA;OPTE1^XPDIA;OPTF2^XPDIA;;OPTDEL^XPDIA
"ORD",18,19,0)
OPTION
"PKG",455,-1)
1^1
"PKG",455,0)
IFCAP^PRC^IFCAP System Files
"PKG",455,20,0)
^9.402P^^
"PKG",455,22,0)
^9.49I^1^1
"PKG",455,22,1,0)
5.1^3001012^3001019^68
"PKG",455,22,1,"PAH",1,0)
162^3120404
"PKG",455,22,1,"PAH",1,1,0)
^^3^3^3120404
"PKG",455,22,1,"PAH",1,1,1,0)
VistA Fee Automation Enhancement
"PKG",455,22,1,"PAH",1,1,2,0)
 o modify PRCS58CC to conditionally skip the control point access check
"PKG",455,22,1,"PAH",1,1,3,0)
 o delete accounting technician options used to process 994 code sheets
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","PRCS58CC")
0^1^B10643800^B10360132
"RTN","PRCS58CC",1,0)
PRCS58CC ;WISC/CLH,PLT - UTILITY CALLS ; 10/13/93  2:19 PM
"RTN","PRCS58CC",2,0)
V ;;5.1;IFCAP;**162**;Oct 20, 2000;Build 2
"RTN","PRCS58CC",3,0)
 ;Per VHA Directive 2004-038, this routine should not be modified.
"RTN","PRCS58CC",4,0)
 ;Post payment and close out 1358 when close out flag set
"RTN","PRCS58CC",5,0)
 ;PRCSX=INT DAILY REF #^INTERNAL DATE/TIME^AMT OF PAYMENT^COMMENTS^COMPLETED FLAG^REFERENCE^SKIP FCP CHECK FLAG
"RTN","PRCS58CC",6,0)
 N X,X1,X2,DIC,PRCSDA,PRCSAMT,PRCSNADJ,AUDA,ABAL,BAL1,DA,DR,DIE,PRCSY,DLAYGO
"RTN","PRCS58CC",7,0)
 S Y=1 I '$D(PRCSX) S Y=0_U_$P($T(ER+0),";;",2) Q
"RTN","PRCS58CC",8,0)
 F I=1:1:3 I $P(PRCSX,U,I)="" S Y=0_U_$P($T(ER+1),";;",2)
"RTN","PRCS58CC",9,0)
 I 'Y K PRCSX Q
"RTN","PRCS58CC",10,0)
 S PRCSDA=+PRCSX,PRCSAMT=$P(PRCSX,U,3),PRCSY=$G(^PRC(424,PRCSDA,0)) I PRCSY="" S Y=0_U_$P($T(ER+2),";;",2) K PRCSX Q
"RTN","PRCS58CC",11,0)
 ; if 7th piece = 1, skip fund control point access check PRC*5.1*162
"RTN","PRCS58CC",12,0)
 I $P(PRCSX,U,7)'=1,'$D(^PRC(420,+$P(^PRC(424,PRCSDA,0),U),1,+$P(^PRC(442,+$P(PRCSY,U,2),0),U,3),1,DUZ,0)) S Y=0_U_$P($T(ER+4),";;",2) K PRCSX Q
"RTN","PRCS58CC",13,0)
 I $P(PRCSY,U,9)=1 S $P(PRCSX,U,5)=1
"RTN","PRCS58CC",14,0)
 I $P(PRCSY,U,3)'="AU" S Y=0_U_$P($T(ER+2),";;",2) K PRCSX Q
"RTN","PRCS58CC",15,0)
 I PRCSAMT<0,$P(PRCSY,U,5)-$P(PRCSY,U,12)>PRCSAMT S Y=0_U_$P($T(ER+6),";;",2) K PRCSX Q
"RTN","PRCS58CC",16,0)
 S Y=0 I $P(PRCSY,U,5)+0<PRCSAMT D  I Y S Y=0_U_$P($T(ER+Y),";;",2) K PRCSX Q
"RTN","PRCS58CC",17,0)
 . N DA,X,AMT,ABAL,DIFF,BAL,PRCADJ,BAL2,BAL1,AAMT,AUDA,AUDA0
"RTN","PRCS58CC",18,0)
 . S BAL=$$BAL^PRCH58($P(PRCSY,U,2)),ABAL=$P(PRCSY,U,5),DIFF=PRCSAMT-ABAL
"RTN","PRCS58CC",19,0)
 . I +BAL-$P(BAL,U,3)-DIFF<0 S Y=5 Q
"RTN","PRCS58CC",20,0)
 . S PRCADJ=0,AAMT=DIFF,AUDA=PRCSDA,AUDA0=PRCSY D ADJ^PRCEDRE0 I PRCADJ S Y=3 Q
"RTN","PRCS58CC",21,0)
 . S DA=AUDA,BAL2=$P($G(^PRC(424,DA,0)),U,12)+DIFF,BAL1=+DIFF,ABAL=ABAL+DIFF,DR=".05////^S X=ABAL;.12////^S X=BAL2",DIE="^PRC(424," D ^DIE
"RTN","PRCS58CC",22,0)
 . S PRCSY=^PRC(424,PRCSDA,0)
"RTN","PRCS58CC",23,0)
 . D BALUP^PRCH58($P(PRCSY,U,2),BAL1) S Y=0
"RTN","PRCS58CC",24,0)
 . QUIT
"RTN","PRCS58CC",25,0)
 S Y=1
"RTN","PRCS58CC",26,0)
 L +^PRC(424,PRCSDA):5 Q:$T=0  S X=$P(^PRC(424,PRCSDA,0),U,11)+1,$P(^(0),U,11)=X L -^PRC(424,PRCSDA)
"RTN","PRCS58CC",27,0)
 S X=$P(PRCSY,U)_"-"_X
"RTN","PRCS58CC",28,0)
 S DIC="^PRC(424.1,",DIC(0)="LX",DLAYGO=424.1 D FILE^DICN I Y<0 S Y=0_U_$P($T(ER+7),";;",2) K PRCSX Q
"RTN","PRCS58CC",29,0)
 S DA=+Y,DIE="^PRC(424.1,",DR=".02////^S X=PRCSDA;.03///^S X=-PRCSAMT;.04///^S X=""NOW"";.05////^S X=DUZ;.011///^S X=""P"""
"RTN","PRCS58CC",30,0)
 S:$P(PRCSX,U,4)]"" DR=DR_";1.1///^S X=$P(PRCSX,U,4);.08///^S X=$P(PRCSX,U,6)" S:$P(PRCSX,U,5)]"" DR=DR_";.07///^S X=$P(PRCSX,U,5)" D ^DIE
"RTN","PRCS58CC",31,0)
 S $P(^PRC(424,PRCSDA,0),U,5)=$P($G(^PRC(424,PRCSDA,0)),U,5)-PRCSAMT
"RTN","PRCS58CC",32,0)
 ;final/complete payment and mark authorization as COMPLETE
"RTN","PRCS58CC",33,0)
 I $P(PRCSX,U,5)]"" D
"RTN","PRCS58CC",34,0)
  .N AUDA,AAMT,BAL1,AUDA0 S AUDA=PRCSDA,AUDA0=PRCSY
"RTN","PRCS58CC",35,0)
  .S X=$G(^PRC(424,AUDA,0)),AAMT=-$P(X,U,5),BAL1=$P(X,U,12)+AAMT,PRCADJ=0 D ADJ^PRCEDRE0 Q:PRCADJ
"RTN","PRCS58CC",36,0)
  .S DA=AUDA,DR=".05////^S X=0;.12////^S X=BAL1;.09////^S X=1",DIE="^PRC(424," D ^DIE
"RTN","PRCS58CC",37,0)
  .D BALUP^PRCH58($P(PRCSY,U,2),AAMT)
"RTN","PRCS58CC",38,0)
  .Q
"RTN","PRCS58CC",39,0)
 S Y=1 K PRCSX Q
"RTN","PRCS58CC",40,0)
 ;
"RTN","PRCS58CC",41,0)
ER ;;No data string passed
"RTN","PRCS58CC",42,0)
 ;;Data element in string missing
"RTN","PRCS58CC",43,0)
 ;;Invalid Transaction or Transaction previously closed
"RTN","PRCS58CC",44,0)
 ;;Authorization amount can't be adjusted.
"RTN","PRCS58CC",45,0)
 ;;Unauthorized control point user
"RTN","PRCS58CC",46,0)
 ;;Insufficent obligation funds to adjust authorization to post bill
"RTN","PRCS58CC",47,0)
 ;;Credit bill amount will exceed total bill amount
"RTN","PRCS58CC",48,0)
 ;;Unable to create Authorization Line Item
"RTN","PRCS58CC",49,0)
 Q
"VER")
8.0^22.0
"BLD",7072,6)
^145
**END**
**END**
