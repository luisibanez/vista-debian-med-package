Released XT*7.3*127 SEQ #103
Extracted from mail message
**KIDS**:XT*7.3*127^

**INSTALL NAME**
XT*7.3*127
"BLD",1321,0)
XT*7.3*127^TOOLKIT^0^3101027^y
"BLD",1321,1,0)
^^3^3^3100811^
"BLD",1321,1,1,0)
Toolkit patch XT*7.3*127; Fix: 'Patches Due in the Next Seven Days', and
"BLD",1321,1,2,0)
'Last Routine Change Date Recorded' options. Please refer to the
"BLD",1321,1,3,0)
Description in Forum Patch Module for details.
"BLD",1321,4,0)
^9.64PA^^
"BLD",1321,6.3)
4
"BLD",1321,"KRN",0)
^9.67PA^9002226^21
"BLD",1321,"KRN",.4,0)
.4
"BLD",1321,"KRN",.401,0)
.401
"BLD",1321,"KRN",.402,0)
.402
"BLD",1321,"KRN",.403,0)
.403
"BLD",1321,"KRN",.5,0)
.5
"BLD",1321,"KRN",.84,0)
.84
"BLD",1321,"KRN",3.6,0)
3.6
"BLD",1321,"KRN",3.8,0)
3.8
"BLD",1321,"KRN",9.2,0)
9.2
"BLD",1321,"KRN",9.8,0)
9.8
"BLD",1321,"KRN",9.8,"NM",0)
^9.68A^3^3
"BLD",1321,"KRN",9.8,"NM",1,0)
XTVRC1^^0^B16389293
"BLD",1321,"KRN",9.8,"NM",2,0)
XTPMNEX7^^0^B12091523
"BLD",1321,"KRN",9.8,"NM",3,0)
XTVRC1A^^0^B27969042
"BLD",1321,"KRN",9.8,"NM","B","XTPMNEX7",2)

"BLD",1321,"KRN",9.8,"NM","B","XTVRC1",1)

"BLD",1321,"KRN",9.8,"NM","B","XTVRC1A",3)

"BLD",1321,"KRN",19,0)
19
"BLD",1321,"KRN",19.1,0)
19.1
"BLD",1321,"KRN",101,0)
101
"BLD",1321,"KRN",409.61,0)
409.61
"BLD",1321,"KRN",771,0)
771
"BLD",1321,"KRN",779.2,0)
779.2
"BLD",1321,"KRN",870,0)
870
"BLD",1321,"KRN",8989.51,0)
8989.51
"BLD",1321,"KRN",8989.52,0)
8989.52
"BLD",1321,"KRN",8994,0)
8994
"BLD",1321,"KRN",9002226,0)
9002226
"BLD",1321,"KRN","B",.4,.4)

"BLD",1321,"KRN","B",.401,.401)

"BLD",1321,"KRN","B",.402,.402)

"BLD",1321,"KRN","B",.403,.403)

"BLD",1321,"KRN","B",.5,.5)

"BLD",1321,"KRN","B",.84,.84)

"BLD",1321,"KRN","B",3.6,3.6)

"BLD",1321,"KRN","B",3.8,3.8)

"BLD",1321,"KRN","B",9.2,9.2)

"BLD",1321,"KRN","B",9.8,9.8)

"BLD",1321,"KRN","B",19,19)

"BLD",1321,"KRN","B",19.1,19.1)

"BLD",1321,"KRN","B",101,101)

"BLD",1321,"KRN","B",409.61,409.61)

"BLD",1321,"KRN","B",771,771)

"BLD",1321,"KRN","B",779.2,779.2)

"BLD",1321,"KRN","B",870,870)

"BLD",1321,"KRN","B",8989.51,8989.51)

"BLD",1321,"KRN","B",8989.52,8989.52)

"BLD",1321,"KRN","B",8994,8994)

"BLD",1321,"KRN","B",9002226,9002226)

"BLD",1321,"QDEF")
^^^^NO^^^^NO^^NO
"BLD",1321,"QUES",0)
^9.62^^
"BLD",1321,"REQB",0)
^9.611^1^1
"BLD",1321,"REQB",1,0)
XT*7.3*100^0
"BLD",1321,"REQB","B","XT*7.3*100",1)

"MBREQ")
0
"PKG",6,-1)
1^1
"PKG",6,0)
TOOLKIT^XT^PROGRAMMERS OPTIONS, MULTI. TERM LOOKUP^
"PKG",6,20,0)
^9.402P^^0
"PKG",6,22,0)
^9.49I^1^1
"PKG",6,22,1,0)
7.3^3040428^2970513^2
"PKG",6,22,1,"PAH",1,0)
127^3101027
"PKG",6,22,1,"PAH",1,1,0)
^^3^3^3101027
"PKG",6,22,1,"PAH",1,1,1,0)
Toolkit patch XT*7.3*127; Fix: 'Patches Due in the Next Seven Days', and
"PKG",6,22,1,"PAH",1,1,2,0)
'Last Routine Change Date Recorded' options. Please refer to the
"PKG",6,22,1,"PAH",1,1,3,0)
Description in Forum Patch Module for details.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
3
"RTN","XTPMNEX7")
0^2^B12091523^B12616723
"RTN","XTPMNEX7",1,0)
XTPMNEX7 ;OAK/BP - PATCHES DUE IN NEXT 7 DAYS ; 10/27/10
"RTN","XTPMNEX7",2,0)
 ;;7.3;TOOLKIT;**98,100,127**; Apr 25, 1995;Build 4
"RTN","XTPMNEX7",3,0)
 ;;Per VHA Directive 2004-038, this routine should not be modified.
"RTN","XTPMNEX7",4,0)
 ;
"RTN","XTPMNEX7",5,0)
RPT S XTBHDR="Patches Due Within Seven Days for "_^DD("SITE")
"RTN","XTPMNEX7",6,0)
 S XTBBDT=3010101,X="T+7",%DT="" D ^%DT S XTBEDT=Y
"RTN","XTPMNEX7",7,0)
 W @IOF,!,XTBHDR,!!! S %ZIS="MQ" D ^%ZIS G:POP EXIT
"RTN","XTPMNEX7",8,0)
 I $D(IO("Q")) S ZTIO=ION,ZTRTN="RPT1^XTPMNEX7",ZTDESC=XTBHDR,ZTSAVE("XTB*")="" D ^%ZTLOAD D HOME^%ZIS
"RTN","XTPMNEX7",9,0)
 I $D(ZTSK) W !,"Queued as task# ",ZTSK,!! H 2 G EXIT
"RTN","XTPMNEX7",10,0)
 ;
"RTN","XTPMNEX7",11,0)
RPT1 U IO K ^TMP($J) S XTBX="",(XTBCNT,XTBLN)=0
"RTN","XTPMNEX7",12,0)
 D PGBK ;page break for devices
"RTN","XTPMNEX7",13,0)
 S Y=DT X ^DD("DD") S XTBRUNDT=Y
"RTN","XTPMNEX7",14,0)
 F XTBX=XTBBDT:0 S XTBX=$O(^XPD(9.9,"D",XTBX)) Q:XTBX=""!(XTBX>XTBEDT)  DO
"RTN","XTPMNEX7",15,0)
 .F XTBDA=0:0 S XTBDA=$O(^XPD(9.9,"D",XTBX,XTBDA)) Q:XTBDA=""  DO
"RTN","XTPMNEX7",16,0)
 ..S XTBDTA=$G(^XPD(9.9,XTBDA,0)),XTBINST=$P(XTBDTA,U,8) Q:XTBDTA=""!(XTBINST="")  ; no data or no install name
"RTN","XTPMNEX7",17,0)
 ..Q:$P(XTBDTA,U,11)]""  ; non-kids install date
"RTN","XTPMNEX7",18,0)
 ..S XTBXX=$O(^XPD(9.7,"B",XTBINST,9999999999),-1) I $G(^XPD(9.7,+XTBXX,2))["TEST" S XTBXX=""
"RTN","XTPMNEX7",19,0)
 ..Q:$P($G(^XPD(9.7,+XTBXX,0)),U,9)=3  ; 3 = installed
"RTN","XTPMNEX7",20,0)
 ..D SET
"RTN","XTPMNEX7",21,0)
 S PG=0 D HDR S (XTBCPLDT,XTBPTNM,OLXTBCPL)=""
"RTN","XTPMNEX7",22,0)
 I '$D(^TMP($J)) W !!,?10,"Nothing to report",! G PREXIT
"RTN","XTPMNEX7",23,0)
 F  S XTBCPLDT=$O(^TMP($J,XTBCPLDT)) Q:XTBCPLDT=""  DO
"RTN","XTPMNEX7",24,0)
 .F  S XTBPTNM=$O(^TMP($J,XTBCPLDT,XTBPTNM)) Q:XTBPTNM=""  DO
"RTN","XTPMNEX7",25,0)
 ..F XTBLN=0:0 S XTBLN=$O(^TMP($J,XTBCPLDT,XTBPTNM,XTBLN)) Q:XTBLN=""  DO
"RTN","XTPMNEX7",26,0)
 ...S XTBDTA=^TMP($J,XTBCPLDT,XTBPTNM,XTBLN)
"RTN","XTPMNEX7",27,0)
 ...S XTBSUBJ=$P(XTBDTA,U),XTBPRIO=$P(XTBDTA,U,2),XTBRECPT=$P(XTBDTA,U,3)
"RTN","XTPMNEX7",28,0)
 ...I OLXTBCPL'=XTBCPLDT W !
"RTN","XTPMNEX7",29,0)
 ...S Y=XTBCPLDT X ^DD("DD") S XTBCPLD1=Y
"RTN","XTPMNEX7",30,0)
 ...W XTBCPLD1,?13,XTBPTNM,?27,XTBSUBJ,?55,XTBPRIO,?67,XTBRECPT,! S XTBCNT=XTBCNT+1
"RTN","XTPMNEX7",31,0)
 ...S OLXTBCPL=XTBCPLDT
"RTN","XTPMNEX7",32,0)
 ...X XTBUP
"RTN","XTPMNEX7",33,0)
 X XTBUP
"RTN","XTPMNEX7",34,0)
 ;
"RTN","XTPMNEX7",35,0)
PREXIT W !!,"Number of patches: ",XTBCNT,!
"RTN","XTPMNEX7",36,0)
 I $E(IOST,1,2)="C-" W !,"Press RETURN to end  " R ANS:DTIME I '$T Q
"RTN","XTPMNEX7",37,0)
 ;
"RTN","XTPMNEX7",38,0)
EXIT D ^%ZISC
"RTN","XTPMNEX7",39,0)
 K ^TMP($J),%ZIS,ANS,XTBANS,XTBCNT,XTBCPLDT,XTBDA,XTBINST,XTBLN,XTBPKG,XTBPRIO,XTBPTNM
"RTN","XTPMNEX7",40,0)
 K XTBRECPT,XTBRUNDT,XTBSUBJ,XTBX,XTBXX,XTBDTA,XTBHDR,OLXTBCPL,PG,XTBPKFLV,XTBPKPTR,POP,XTBPTCVR,X,X1
"RTN","XTPMNEX7",41,0)
 K Y,YY1,ZTDESC,ZTSK,ZTIO,ZTRTN,ZTSAVE,XTBCPLD1,%DT,XTBBDT,XTBEDT,XTBPSITE,XTBUP,IOP,XMY
"RTN","XTPMNEX7",42,0)
 Q
"RTN","XTPMNEX7",43,0)
 ;
"RTN","XTPMNEX7",44,0)
SET S XTBPTNM=$P(XTBDTA,U,1),XTBSUBJ=$E($P(XTBDTA,U,7),1,26)
"RTN","XTPMNEX7",45,0)
 S X=$P(XTBDTA,U,3),XTBPRIO=$S(X="m":"Mandatory",X="e":"Emergency",1:"Unknown")
"RTN","XTPMNEX7",46,0)
 S Y=$P(XTBDTA,U,2) X ^DD("DD") S XTBRECPT=Y
"RTN","XTPMNEX7",47,0)
 S XTBCPLDT=$P(XTBDTA,U,9) ; compliance date
"RTN","XTPMNEX7",48,0)
 S XTBLN=XTBLN+1,^TMP($J,XTBCPLDT,XTBPTNM,XTBLN)=XTBSUBJ_U_XTBPRIO_U_XTBRECPT
"RTN","XTPMNEX7",49,0)
 Q
"RTN","XTPMNEX7",50,0)
 ;
"RTN","XTPMNEX7",51,0)
HDR ;
"RTN","XTPMNEX7",52,0)
 S PG=PG+1
"RTN","XTPMNEX7",53,0)
 W !,XTBHDR," Page: ",PG,!,"Run date: ",XTBRUNDT,!!
"RTN","XTPMNEX7",54,0)
 W "Compliance",!,"Date",?13,"Patch #",?27,"Subject",?55,"Priority",?67,"Recpt Date",!
"RTN","XTPMNEX7",55,0)
 W "----------",?13,"-------",?27,"-------",?55,"--------",?67,"----- ----",!
"RTN","XTPMNEX7",56,0)
 Q
"RTN","XTPMNEX7",57,0)
 ;
"RTN","XTPMNEX7",58,0)
PAUSE W !,"Press RETURN to continue or '^' to exit: " R XTBANS:DTIME
"RTN","XTPMNEX7",59,0)
 I '$T S (XTBLN,XTBCPLDT,XTBPTNM)="ZZZZZ"
"RTN","XTPMNEX7",60,0)
 I XTBANS[U S (XTBLN,XTBCPLDT,XTBPTNM)="ZZZZZ"
"RTN","XTPMNEX7",61,0)
 Q
"RTN","XTPMNEX7",62,0)
 ;
"RTN","XTPMNEX7",63,0)
PGBK ;page break
"RTN","XTPMNEX7",64,0)
 S XTBUP="I $Y>(IOSL-3) W @IOF D HDR"
"RTN","XTPMNEX7",65,0)
 I $E(IOST,1,2)="C-" S XTBUP="I $Y>(IOSL-3) D PAUSE W @IOF D HDR"
"RTN","XTPMNEX7",66,0)
 Q
"RTN","XTVRC1")
0^1^B16389293^B15785750
"RTN","XTVRC1",1,0)
XTVRC1 ;ISCSF/JLI - SAVE AND COMPARE ROUTINES ;8/11/10
"RTN","XTVRC1",2,0)
 ;;7.3;TOOLKIT;**127**; Apr 25, 1995;Build 4
"RTN","XTVRC1",3,0)
 ;;Per VHA Directive 2004-038, this routine should not be modified.
"RTN","XTVRC1",4,0)
 K ^TMP($J)
"RTN","XTVRC1",5,0)
 K ^TMP($J) X ^%ZOSF("RSEL") G:$O(^UTILITY($J,""))="" KILL S %X="^UTILITY($J,",%Y="^TMP($J," D %XY^%RCR K ^UTILITY($J)
"RTN","XTVRC1",6,0)
ASK R !!?5,"Do you want to QUEUE this job? YES// ",X:DTIME W ! G:'$T!(X[U) KILL S:X="" X="Y" S X=$E(X) I "YyNn"'[X W $C(7),"  ??",!,"ANSWER 'YES' OR 'NO'",! G ASK
"RTN","XTVRC1",7,0)
 I "Yy"[X S ZTIO="",ZTRTN="DQ^XTVRC1",ZTDESC="XTVRC1-RECORD ROUTINE CHANGES",ZTSAVE("^TMP($J,")="" D ^%ZTLOAD K ZTIO,ZTRTN,ZTDESC,ZTSAVE,^TMP($J) G KILL
"RTN","XTVRC1",8,0)
DQ ;
"RTN","XTVRC1",9,0)
 S X="N",%DT="T" D ^%DT S XTVTIM=Y
"RTN","XTVRC1",10,0)
 S XTROU=0 F XTIROU=0:0 S XTROU=$O(^TMP($J,XTROU)) Q:XTROU=""  D LCHEK I L D LOOP
"RTN","XTVRC1",11,0)
KILL K XTVTIM,XTROU,XTIROU,XCNP,DIF,%,%DT,%Y,%GO,%H,%N,%UCN,DA,DLAYGO,I,J,L,X,Y,DIC,^TMP($J)
"RTN","XTVRC1",12,0)
 Q
"RTN","XTVRC1",13,0)
 ;
"RTN","XTVRC1",14,0)
LCHEK ;
"RTN","XTVRC1",15,0)
 S L=$L(XTROU) I L<6 S L=1 Q
"RTN","XTVRC1",16,0)
 S XX=$E(XTROU,L-3,L) I XX?1"INIT"!(XX?1"INIS")!(XX?1"INI"1N) S L=0 K XX Q
"RTN","XTVRC1",17,0)
 I XX?1"IN"2NU!(XX?1"I"1N2NU) S L=0 K XX Q
"RTN","XTVRC1",18,0)
 S XX=$E(XTROU,L-4,L) I XX?1"INI"2NU!(XX?1"IN"1N2NU)!(XX?1"INIT"2NU)!(XX?1"INI"1N2NU) S L=0 K XX Q
"RTN","XTVRC1",19,0)
 S L=1 K XX
"RTN","XTVRC1",20,0)
 Q
"RTN","XTVRC1",21,0)
 ;
"RTN","XTVRC1",22,0)
LOOP ;
"RTN","XTVRC1",23,0)
 N X S X=$G(XTROU) X ^%ZOSF("TEST") Q:'$T  ;p127 check routine if it isn't existed
"RTN","XTVRC1",24,0)
 I XTROU'?1(1A,1"%").7AN Q  ;p127 check routine name
"RTN","XTVRC1",25,0)
 K ^TMP($J,0) S X=XTROU,XCNP=0,DIF="^TMP($J,0," X ^%ZOSF("LOAD")
"RTN","XTVRC1",26,0)
 I '$D(^XTV(8991,"B",XTROU)) S X=""""_XTROU_"""",DIC(0)="XL",DIC=8991,DLAYGO=8991 D ^DIC Q:Y'>0
"RTN","XTVRC1",27,0)
 S DA=$O(^XTV(8991,"B",XTROU,0)) Q:DA'>0
"RTN","XTVRC1",28,0)
 S I=0 F J=0:0 S J=$O(^XTV(8991,DA,1,J)) Q:J'>0  S I=J
"RTN","XTVRC1",29,0)
 I I>0 D CHK I I=0 Q
"RTN","XTVRC1",30,0)
 S XTLL=I,X=XTVTIM,DIC="^XTV(8991,"_DA_",1,",DIC("P")=8991.01,DIC(0)="L",DLAYGO=8991,DA(1)=DA S:'$D(@(DIC_"0)")) @(DIC_"0)")="^8991.01" D ^DIC S DA=+Y Q:DA'>0
"RTN","XTVRC1",31,0)
 S DIC="^XTV(8991,"_DA(1)_",1,"_DA_",1,"
"RTN","XTVRC1",32,0)
 F I=0:0 S I=$O(^TMP($J,0,I)) Q:I'>0  S @(DIC_I_",0)")=^(I,0),K=I
"RTN","XTVRC1",33,0)
 S ^XTV(8991,DA(1),1,DA,1,0)="^8991.11^"_K_"^"_K
"RTN","XTVRC1",34,0)
 I XTLL>0 S I=XTLL D CHKA
"RTN","XTVRC1",35,0)
 K DA,DIC,I,J,XTJJ,XTJL,K,XTKK,L,XTL1,XTLL,M,P,V,X,Y
"RTN","XTVRC1",36,0)
 Q
"RTN","XTVRC1",37,0)
 ;
"RTN","XTVRC1",38,0)
CHK ;
"RTN","XTVRC1",39,0)
 S DIC="^XTV(8991,"_DA_",1,"_I_",1,"
"RTN","XTVRC1",40,0)
 F J=0:0 S J=$O(^TMP($J,0,J)) Q:J'>0  Q:'$D(@(DIC_J_",0)"))  Q:^(0)'=^TMP($J,0,J,0)
"RTN","XTVRC1",41,0)
 I J'>0 S I=0 Q
"RTN","XTVRC1",42,0)
 Q
"RTN","XTVRC1",43,0)
 ;
"RTN","XTVRC1",44,0)
CHKA ;
"RTN","XTVRC1",45,0)
 S DIC="^XTV(8991,"_DA(1)_",1,"_I_",1,"
"RTN","XTVRC1",46,0)
 S L=1 F J=0:0 S J=$O(^TMP($J,0,J)) Q:J'>0  Q:'$D(@(DIC_L_",0)"))  S M=0 S:^(0)'=^TMP($J,0,J,0) M=1 D:M CHK1 I 'M K @(DIC_L_",0)") S L=L+1
"RTN","XTVRC1",47,0)
 I J'>0 F J=0:0 Q:'$D(@(DIC_L_",0)"))  D LDEL
"RTN","XTVRC1",48,0)
 I J>0 F J=J-1:0 S J=$O(^TMP($J,0,J)) Q:J'>0  D JADD
"RTN","XTVRC1",49,0)
 S L=0 F J=0:0 S J=$O(^XTV(8991,DA,1,I,1,J)) Q:J'>0  S L(0)=J,L=L+1
"RTN","XTVRC1",50,0)
 I L>0 S ^XTV(8991,DA,1,I,1,0)="^8991.11^"_L(0)_"^"_L
"RTN","XTVRC1",51,0)
 Q
"RTN","XTVRC1",52,0)
 ;
"RTN","XTVRC1",53,0)
CHK1 ;
"RTN","XTVRC1",54,0)
 S XTDONE=0
"RTN","XTVRC1",55,0)
 F XTJJ=J:0 S XTJJ=$O(^TMP($J,0,XTJJ)) Q:XTJJ'>0  I ^(XTJJ,0)=@(DIC_L_",0)") D CHK2 Q
"RTN","XTVRC1",56,0)
 I 'XTDONE D LDEL S J=J-1
"RTN","XTVRC1",57,0)
 K XTDONE
"RTN","XTVRC1",58,0)
 Q
"RTN","XTVRC1",59,0)
 ;
"RTN","XTVRC1",60,0)
CHK2 ;
"RTN","XTVRC1",61,0)
 F XTLL=L+1:1 Q:'$D(@(DIC_XTLL_",0)"))!(XTDONE>2)  F XTJL=J:0 S XTJL=$O(^TMP($J,0,XTJL)) Q:XTJL'>0!(XTJL'<XTJJ)  S XTDONE=$S(^(XTJL,0)=@(DIC_XTLL_",0)"):XTDONE+1,1:0) I XTDONE D CHK3 Q:XTDONE>2  Q:'$D(@(DIC_XTLL_",0)"))
"RTN","XTVRC1",62,0)
 I 'XTDONE D JADD
"RTN","XTVRC1",63,0)
 S XTDONE='XTDONE
"RTN","XTVRC1",64,0)
 Q
"RTN","XTVRC1",65,0)
 ;
"RTN","XTVRC1",66,0)
CHK3 ;
"RTN","XTVRC1",67,0)
 F XTKK=0:0 S XTLL=XTLL+1,XTJL=XTJL+1 S XTDONE=$S('$D(^TMP($J,0,XTJL,0))!'$D(@(DIC_XTLL_",0)")):0,^TMP($J,0,XTJL,0)=@(DIC_XTLL_",0)"):XTDONE+1,1:0) Q:'XTDONE!(XTDONE>2)
"RTN","XTVRC1",68,0)
 Q
"RTN","XTVRC1",69,0)
 ;
"RTN","XTVRC1",70,0)
JADD ;
"RTN","XTVRC1",71,0)
 S XTLL=0 F XTJJ=0:0 S XTJJ=$O(@(DIC_L_",""INS"","_XTJJ_")")) Q:XTJJ'>0  S XTLL=XTJJ
"RTN","XTVRC1",72,0)
 S XTJJ=XTLL+1,@(DIC_L_",""INS"","_XTJJ_",0)")=^TMP($J,0,J,0)
"RTN","XTVRC1",73,0)
 S @(DIC_L_",""INS"",0)")="^8991.12^"_XTJJ_"^"_XTJJ
"RTN","XTVRC1",74,0)
 Q
"RTN","XTVRC1",75,0)
 ;
"RTN","XTVRC1",76,0)
LDEL ;
"RTN","XTVRC1",77,0)
 S @(DIC_L_",""DEL"")")=@(DIC_L_",0)") S @(DIC_L_",0)")="" S L=L+1
"RTN","XTVRC1",78,0)
 Q
"RTN","XTVRC1A")
0^3^B27969042^B27065348
"RTN","XTVRC1A",1,0)
XTVRC1A ;ISC-SF/JLI - SHOW SUMMARY OF ROUTINES MOST RECENTLY UPDATED ;10/27/10
"RTN","XTVRC1A",2,0)
 ;;7.3;TOOLKIT;**127**; Apr 25, 1995;Build 4
"RTN","XTVRC1A",3,0)
 ;;Per VHA Directive 2004-038, this routine should not be modified.
"RTN","XTVRC1A",4,0)
ENTRY W ! K ^TMP($J) X ^%ZOSF("RSEL") Q:$O(^UTILITY($J,""))=""  S %X="^UTILITY($J,",%Y="^TMP($J," D %XY^%RCR K ^UTILITY($J)
"RTN","XTVRC1A",5,0)
 S DIR(0)="D",DIR("A")="List CHANGES since DATE" D ^DIR K DIR S XTVRDAT=+Y G:Y'>0 ENTRY
"RTN","XTVRC1A",6,0)
 S %ZIS="QM" D ^%ZIS Q:POP  I IO'=IO(0) S ZTRTN="DQENT^XTVRC1A",ZTIO=ION,ZTSAVE("^TMP($J,")="",ZTSAVE("XTVRDAT")="",ZTDESC="XTVRC1A-IDENTIFY ROUTINES RECENTLY LOGGED AS CHANGED" D ^%ZTLOAD G EXIT
"RTN","XTVRC1A",7,0)
 ;
"RTN","XTVRC1A",8,0)
DQENT ;
"RTN","XTVRC1A",9,0)
 S X="N",%DT="T" D ^%DT S XTVTIM=Y
"RTN","XTVRC1A",10,0)
 W:'$D(ZTQUEUED) "Please wait..."
"RTN","XTVRC1A",11,0)
 S XTROU="" F DA=0:0 S XTROU=$O(^TMP($J,XTROU)) Q:XTROU=""  D
"RTN","XTVRC1A",12,0)
 . S DA=$O(^XTV(8991,"B",XTROU,0)) I DA'>0 D LCHEK^XTVRC1 Q:'L  D LOOP^XTVRC1 S DA=$O(^XTV(8991,"B",XTROU,0)) Q:DA'>0
"RTN","XTVRC1A",13,0)
 . S XTVDA=DA D LOOP^XTVRC1 S DA=XTVDA
"RTN","XTVRC1A",14,0)
 . D DOIT
"RTN","XTVRC1A",15,0)
FINISH U IO D OUTPUT D ^%ZISC
"RTN","XTVRC1A",16,0)
EXIT K %DT,%X,%Y,%ZIS,A,D,D1,DA,I,J,K,L,POP,X,X1,X11,X12,XS,XTROU,XTVDA,XTVRDAT,XTVRDATE,XTVTIM,XTVUT,Y,ZTDESC,ZTIO,ZTRTN,NAME,XTVR,Z,ZTSAVE
"RTN","XTVRC1A",17,0)
 Q
"RTN","XTVRC1A",18,0)
 ;
"RTN","XTVRC1A",19,0)
ALL ;
"RTN","XTVRC1A",20,0)
 S DIR(0)="D",DIR("A")="List CHANGES since DATE" D ^DIR K DIR S XTVRDAT=+Y G:Y'>0 EXIT
"RTN","XTVRC1A",21,0)
 W ! K ^TMP($J)
"RTN","XTVRC1A",22,0)
 S %ZIS="QM" D ^%ZIS Q:POP  I IO'=IO(0) S ZTRTN="DQALL^XTVRC1A",ZTSAVE("XTVRDAT")="",ZTIO=ION,ZTDESC="XTVRC1A-IDENTIFY ROUTINES RECENTLY LOGGED AS CHANGED" D ^%ZTLOAD G EXIT
"RTN","XTVRC1A",23,0)
 ;
"RTN","XTVRC1A",24,0)
DQALL ;
"RTN","XTVRC1A",25,0)
 K ^TMP($J)
"RTN","XTVRC1A",26,0)
 F DA=0:0 S DA=$O(^XTV(8991,DA)) Q:DA'>0  S XTROU=$P(^(DA,0),U) D DOIT W:'$D(ZTQUEUED) "."
"RTN","XTVRC1A",27,0)
 G FINISH
"RTN","XTVRC1A",28,0)
 Q
"RTN","XTVRC1A",29,0)
DOIT ;
"RTN","XTVRC1A",30,0)
 S K=0,X1=0,X11="",X12="",XS=" " F J=0:0 S J=$O(^XTV(8991,DA,1,J)) S:J'>0&(X1>0) ^TMP($J,XS,(9999999-X1),XTROU)=+X1,^(XTROU,1)=X11,^(2)=X12 Q:J'>0  D CHK S K=J
"RTN","XTVRC1A",31,0)
 Q
"RTN","XTVRC1A",32,0)
OUTPUT ;
"RTN","XTVRC1A",33,0)
 S XTVUT=0,D1=0,XTVRDATE=$E(XTVRDAT,4,5)_"/"_$E(XTVRDAT,6,7)_"/"_$E(XTVRDAT,2,3) W !!,"The following routines have been logged as NEW ROUTINES since ",XTVRDATE,!!
"RTN","XTVRC1A",34,0)
 S XTVR=0 F I=0:0 Q:XTVUT  S I=$O(^TMP($J," N",I)) Q:I'>0  S A="" F J=0:0 S A=$O(^TMP($J," N",I,A)) Q:A=""  S D=^(A),X11=^(A,1),X12=^(2) W:(D\1'=D1) ! S D1=D\1 D:A'=$P(X11," ") NAME D PRNT S XTVR=XTVR+1 Q:XTVUT
"RTN","XTVRC1A",35,0)
 Q:XTVUT
"RTN","XTVRC1A",36,0)
 W !!,$S(XTVR>0:XTVR,1:"No"),"  NEW routines were logged",!!,"The following routines have logged CHANGES since ",XTVRDATE,!!
"RTN","XTVRC1A",37,0)
 S XTVR=0 F I=0:0 Q:XTVUT  S I=$O(^TMP($J," ",I)) Q:I'>0  S A="" F J=0:0 S A=$O(^TMP($J," ",I,A)) Q:A=""  S D=^(A),X11=^(A,1),X12=^(2) Q:D<XTVRDAT  W:(D\1'=D1) ! S D1=D\1 D:A'=$P(X11," ") NAME D PRNT S XTVR=XTVR+1 Q:XTVUT
"RTN","XTVRC1A",38,0)
 Q:XTVUT
"RTN","XTVRC1A",39,0)
 W !!,$S(XTVR>0:XTVR,1:"No")," old routines were CHANGED",!!,"The following routines have NOT LOGGED CHANGES since ",XTVRDATE,!!
"RTN","XTVRC1A",40,0)
 S XTVR=0 F I=9999999-XTVRDAT:0 Q:XTVUT  S I=$O(^TMP($J," ",I)) Q:I'>0  S A="" F J=0:0 S A=$O(^TMP($J," ",I,A)) Q:A=""  S D=^(A),X11=^(A,1),X12=^(2) W:(D\1'=D1) ! S D1=D\1 D:A'=$P(X11," ") NAME D PRNT S XTVR=XTVR+1 Q:XTVUT
"RTN","XTVRC1A",41,0)
 Q:XTVUT
"RTN","XTVRC1A",42,0)
 W !!,$S(XTVR>0:XTVR,1:"No"),"  UNCHANGED routines were included",!!,"The following routines were previously LOGGED BUT NOT IN THE ACCOUNT",!,"Routines were searched for using 2 letter namespaces from routines",!,"originally specified.",!
"RTN","XTVRC1A",43,0)
 S NAME="" F  S NAME=$O(^TMP($J,NAME)) Q:NAME=""  S ^TMP($J," X",$E(NAME,1,2))=""
"RTN","XTVRC1A",44,0)
 S XTVR=0,NAME="" F  S NAME=$O(^TMP($J," X",NAME)) Q:NAME=""  D
"RTN","XTVRC1A",45,0)
 . I $D(^XTV(8991,"B",NAME)),'$D(^XTV($J,NAME)) S X=NAME X ^%ZOSF("TEST") I '$T S ^TMP($J," Y",NAME)=""
"RTN","XTVRC1A",46,0)
 . S X=NAME F  S X=$O(^XTV(8991,"B",X)) Q:X=""!($E(X,1,$L(NAME))'=NAME)  I '$D(^TMP($J,X)) X ^%ZOSF("TEST") I '$T S ^TMP($J," Y",X)=""
"RTN","XTVRC1A",47,0)
 S NAME="" F I=0:1 S NAME=$O(^TMP($J," Y",NAME)) Q:NAME=""  W:'(I#8) ! W ?((I#8)*10+1),NAME S XTVR=XTVR+1
"RTN","XTVRC1A",48,0)
 W !!,$S(XTVR>0:XTVR,1:"No"),"  DELETED routines identified using 2 letter namespaces input",!!
"RTN","XTVRC1A",49,0)
 Q
"RTN","XTVRC1A",50,0)
 ;
"RTN","XTVRC1A",51,0)
PRNT ;
"RTN","XTVRC1A",52,0)
 S D=D_$S(D'[".":".",1:"")_"0000" D:($Y+3>IOSL) PAGE Q:XTVUT  W !,A,?10,$E(D,4,5),"/",$E(D,6,7),"/",$E(D,2,3),"  ",$E(D,9,10),":",$E(D,11,12),"    ",$P(X11,";",3),?45," "_$P(X12,";",3,6)
"RTN","XTVRC1A",53,0)
 Q
"RTN","XTVRC1A",54,0)
 ;
"RTN","XTVRC1A",55,0)
CHK ;
"RTN","XTVRC1A",56,0)
 I J=1,+^XTV(8991,DA,1,J,0)'<XTVRDAT S XS=" N"
"RTN","XTVRC1A",57,0)
 S:$S('$D(^XTV(8991,DA,1,J,1,1,0)):0,^(0)="":0,1:1) X11=^(0) S:$S('$D(^XTV(8991,DA,1,J,1,2,0)):0,^(0)="":0,1:1) X12=^(0)
"RTN","XTVRC1A",58,0)
 I J>1,$O(^XTV(8991,DA,1,K,1,0))=2,$O(^(2))=3,$O(^(3))'>0,$O(^(2,0))="DEL",$O(^("DEL"))="",$O(^XTV(8991,DA,1,K,1,3,0))="INS",$O(^("INS",0))=1,$O(^(1))'>0 Q
"RTN","XTVRC1A",59,0)
 S X1=^XTV(8991,DA,1,J,0)
"RTN","XTVRC1A",60,0)
 Q
"RTN","XTVRC1A",61,0)
 ;
"RTN","XTVRC1A",62,0)
PAGE S XTVUT=0 I IOST["C-" R !?20,"Enter RETURN to continue... ",Z:DTIME I '$T!(Z[U) S XTVUT=1 Q
"RTN","XTVRC1A",63,0)
 W @IOF
"RTN","XTVRC1A",64,0)
 Q
"RTN","XTVRC1A",65,0)
 ;
"RTN","XTVRC1A",66,0)
NAME W !,A,?15,$P(X11," ")," is shown as name on first line"
"RTN","XTVRC1A",67,0)
 Q
"VER")
8.0^22.0
"BLD",1321,6)
^103
**END**
**END**
