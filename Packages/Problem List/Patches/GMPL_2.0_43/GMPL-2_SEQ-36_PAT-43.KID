Released GMPL*2*43 SEQ #36
Extracted from mail message
**KIDS**:GMPL*2.0*43^

**INSTALL NAME**
GMPL*2.0*43
"BLD",8439,0)
GMPL*2.0*43^PROBLEM LIST^0^3120921^y
"BLD",8439,1,0)
^^2^2^3120524^
"BLD",8439,1,1,0)
The description of this patch may be found in the National Patch Module 
"BLD",8439,1,2,0)
under GMPL*2.0*43.
"BLD",8439,4,0)
^9.64PA^^
"BLD",8439,6.3)
4
"BLD",8439,"KRN",0)
^9.67PA^779.2^20
"BLD",8439,"KRN",.4,0)
.4
"BLD",8439,"KRN",.401,0)
.401
"BLD",8439,"KRN",.402,0)
.402
"BLD",8439,"KRN",.403,0)
.403
"BLD",8439,"KRN",.5,0)
.5
"BLD",8439,"KRN",.84,0)
.84
"BLD",8439,"KRN",3.6,0)
3.6
"BLD",8439,"KRN",3.8,0)
3.8
"BLD",8439,"KRN",9.2,0)
9.2
"BLD",8439,"KRN",9.8,0)
9.8
"BLD",8439,"KRN",9.8,"NM",0)
^9.68A^4^4
"BLD",8439,"KRN",9.8,"NM",1,0)
GMPL1^^0^B27012106
"BLD",8439,"KRN",9.8,"NM",2,0)
GMPLCODE^^0^B11967458
"BLD",8439,"KRN",9.8,"NM",3,0)
GMPLEDT4^^0^B19794628
"BLD",8439,"KRN",9.8,"NM",4,0)
GMPLPXRM^^0^B11040861
"BLD",8439,"KRN",9.8,"NM","B","GMPL1",1)

"BLD",8439,"KRN",9.8,"NM","B","GMPLCODE",2)

"BLD",8439,"KRN",9.8,"NM","B","GMPLEDT4",3)

"BLD",8439,"KRN",9.8,"NM","B","GMPLPXRM",4)

"BLD",8439,"KRN",19,0)
19
"BLD",8439,"KRN",19.1,0)
19.1
"BLD",8439,"KRN",101,0)
101
"BLD",8439,"KRN",409.61,0)
409.61
"BLD",8439,"KRN",771,0)
771
"BLD",8439,"KRN",779.2,0)
779.2
"BLD",8439,"KRN",870,0)
870
"BLD",8439,"KRN",8989.51,0)
8989.51
"BLD",8439,"KRN",8989.52,0)
8989.52
"BLD",8439,"KRN",8994,0)
8994
"BLD",8439,"KRN","B",.4,.4)

"BLD",8439,"KRN","B",.401,.401)

"BLD",8439,"KRN","B",.402,.402)

"BLD",8439,"KRN","B",.403,.403)

"BLD",8439,"KRN","B",.5,.5)

"BLD",8439,"KRN","B",.84,.84)

"BLD",8439,"KRN","B",3.6,3.6)

"BLD",8439,"KRN","B",3.8,3.8)

"BLD",8439,"KRN","B",9.2,9.2)

"BLD",8439,"KRN","B",9.8,9.8)

"BLD",8439,"KRN","B",19,19)

"BLD",8439,"KRN","B",19.1,19.1)

"BLD",8439,"KRN","B",101,101)

"BLD",8439,"KRN","B",409.61,409.61)

"BLD",8439,"KRN","B",771,771)

"BLD",8439,"KRN","B",779.2,779.2)

"BLD",8439,"KRN","B",870,870)

"BLD",8439,"KRN","B",8989.51,8989.51)

"BLD",8439,"KRN","B",8989.52,8989.52)

"BLD",8439,"KRN","B",8994,8994)

"BLD",8439,"QDEF")
^^^^NO^^^^NO^^NO
"BLD",8439,"QUES",0)
^9.62^^
"BLD",8439,"REQB",0)
^9.611^2^2
"BLD",8439,"REQB",1,0)
GMPL*2.0*27^2
"BLD",8439,"REQB",2,0)
GMPL*2.0*28^2
"BLD",8439,"REQB","B","GMPL*2.0*27",1)

"BLD",8439,"REQB","B","GMPL*2.0*28",2)

"MBREQ")
0
"PKG",402,-1)
1^1
"PKG",402,0)
PROBLEM LIST^GMPL^Automated Patient Problem List
"PKG",402,20,0)
^9.402P^^
"PKG",402,22,0)
^9.49I^1^1
"PKG",402,22,1,0)
2.0^2940825^2941216
"PKG",402,22,1,"PAH",1,0)
43^3120921
"PKG",402,22,1,"PAH",1,1,0)
^^2^2^3120921
"PKG",402,22,1,"PAH",1,1,1,0)
The description of this patch may be found in the National Patch Module 
"PKG",402,22,1,"PAH",1,1,2,0)
under GMPL*2.0*43.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
4
"RTN","GMPL1")
0^1^B27012106^B26232725
"RTN","GMPL1",1,0)
GMPL1 ; SLC/MKB/AJB/TC -- Problem List actions ; 04/22/03 [5/24/12 9:35am]
"RTN","GMPL1",2,0)
 ;;2.0;Problem List;**3,20,28,43**;Aug 25, 1994;Build 4
"RTN","GMPL1",3,0)
 ; 10 MAR 2000 - MA - Added to the routine another user prompt
"RTN","GMPL1",4,0)
 ; to backup and refine Lexicon search if ICD code 799.9
"RTN","GMPL1",5,0)
ADD ;add new entry to list - Requires GMPDFN
"RTN","GMPL1",6,0)
 N GMPROB,GMPTERM,GMPICD,Y,DUP W !
"RTN","GMPL1",7,0)
 S GMPROB=$$TEXT^GMPLEDT4("") I GMPROB="^" S GMPQUIT=1 Q
"RTN","GMPL1",8,0)
 I 'GMPARAM("CLU")!('$D(GMPLUSER)&('$D(^XUSEC("GMPL ICD CODE",DUZ)))) S GMPTERM="",GMPICD="799.9" G ADD1
"RTN","GMPL1",9,0)
 F  D  Q:$D(GMPQUIT)!(+$G(Y))
"RTN","GMPL1",10,0)
 . D SEARCH^GMPLX(.GMPROB,.Y,"PROBLEM: ","1")
"RTN","GMPL1",11,0)
 . I +Y'>0 S GMPQUIT=1 Q
"RTN","GMPL1",12,0)
 . S DUP=$$DUPL^GMPLX(+GMPDFN,+Y,GMPROB)
"RTN","GMPL1",13,0)
 . I DUP,'$$DUPLOK^GMPLX(DUP) S (Y,GMPROB)=""
"RTN","GMPL1",14,0)
 . I +Y=1 D ICDMSG
"RTN","GMPL1",15,0)
 Q:$D(GMPQUIT)
"RTN","GMPL1",16,0)
 S GMPTERM=$S(+$G(Y)>1:Y,1:""),GMPICD=$G(Y(1))
"RTN","GMPL1",17,0)
 S:'$L(GMPICD) GMPICD="799.9"
"RTN","GMPL1",18,0)
ADD1 ; set up default values
"RTN","GMPL1",19,0)
 ; -- May enter here with GMPROB=text,GMPICD=code,GMPTERM=#^term
"RTN","GMPL1",20,0)
 ; added for Code Set Versioning (CSV)
"RTN","GMPL1",21,0)
 I '+$$STATCHK^ICDAPIU(GMPICD,DT) W !,GMPROB,!,"has an inactive code.  Please edit before adding." H 3 Q
"RTN","GMPL1",22,0)
 N OK,GMPI,GMPFLD K GMPLJUMP
"RTN","GMPL1",23,0)
 S GMPFLD(1.01)=GMPTERM,GMPFLD(.05)=U_GMPROB
"RTN","GMPL1",24,0)
 ;S GMPFLD(.01)=$O(^ICD9("AB",GMPICD_" ",0))_U_GMPICD
"RTN","GMPL1",25,0)
 S GMPFLD(.01)=$P($$CODEN^ICDCODE(GMPICD,80),"~")_U_GMPICD ; Replacing direct global read to ^ICD9
"RTN","GMPL1",26,0)
 S:'GMPFLD(.01)!($P(GMPFLD(.01),U)<0) GMPFLD(.01)=$$NOS^GMPLX ; cannot resolve code
"RTN","GMPL1",27,0)
 S (GMPFLD(1.04),GMPFLD(1.05))=$G(GMPROV),GMPFLD(1.03)=DUZ
"RTN","GMPL1",28,0)
 S GMPFLD(1.06)=$$SERVICE^GMPLX1(+GMPFLD(1.04)),GMPFLD(1.08)=$G(GMPCLIN)
"RTN","GMPL1",29,0)
 S (GMPFLD(.08),GMPFLD(1.09))=DT_U_$$EXTDT^GMPLX(DT)
"RTN","GMPL1",30,0)
 S GMPFLD(.12)="A^ACTIVE",GMPFLD(1.14)="",GMPFLD(10,0)=0
"RTN","GMPL1",31,0)
 S GMPFLD(1.02)=$S('$G(GMPARAM("VER")):"P",$D(GMPLUSER):"P",1:"T")
"RTN","GMPL1",32,0)
 S (GMPFLD(.13),GMPFLD(1.07))="" ; initialize dates
"RTN","GMPL1",33,0)
 S GMPFLD(1.1)=$S('GMPSC:"0^NO",1:""),GMPFLD(1.11)=$S('GMPAGTOR:"0^NO",1:"")
"RTN","GMPL1",34,0)
 S GMPFLD(1.12)=$S('GMPION:"0^NO",1:""),GMPFLD(1.13)=$S('GMPGULF:"0^NO",1:"")
"RTN","GMPL1",35,0)
ADD2 ; prompt for values
"RTN","GMPL1",36,0)
 D FLDS^GMPLEDT3 ; set GMPFLD("FLD") of editable fields
"RTN","GMPL1",37,0)
 F GMPI=2:1:7 D @(GMPFLD("FLD",GMPI)_"^GMPLEDT1") Q:$D(GMPQUIT)  K GMPLJUMP ; cannot ^-jump here
"RTN","GMPL1",38,0)
 Q:$D(GMPQUIT)
"RTN","GMPL1",39,0)
ADD3 ; Ok to save?
"RTN","GMPL1",40,0)
 S OK=$$ACCEPT^GMPLDIS1(.GMPFLD),GMPLJUMP=0 ; ok to save values?
"RTN","GMPL1",41,0)
 I OK="^" W !!?10,"< Nothing Saved !! >",! S GMPQUIT=1 H 1 Q
"RTN","GMPL1",42,0)
 I OK D  Q  ; ck DA for error?
"RTN","GMPL1",43,0)
 . N I W !!,"Saving ..." D NEW^GMPLSAVE
"RTN","GMPL1",44,0)
 . S I=$S(GMPLIST(0)'>0:1,GMPARAM("REV"):$O(GMPLIST(0))-.01,1:GMPLIST(0)+1)
"RTN","GMPL1",45,0)
 . S GMPLIST(I)=DA,GMPLIST("B",DA)=I,GMPLIST(0)=$G(GMPLIST(0))+1
"RTN","GMPL1",46,0)
 . W " done."
"RTN","GMPL1",47,0)
 ; Not ok -- edit values, ask again
"RTN","GMPL1",48,0)
 F GMPI=1:1:GMPFLD("FLD",0) D @(GMPFLD("FLD",GMPI)_"^GMPLEDT1") Q:$D(GMPQUIT)!($D(GMPSAVED))  I $G(GMPLJUMP) S GMPI=GMPLJUMP-1 S GMPLJUMP=0 ; reset GMPI to desired fld
"RTN","GMPL1",49,0)
 Q:$D(DTOUT)  K GMPQUIT,DUOUT G ADD3
"RTN","GMPL1",50,0)
 Q
"RTN","GMPL1",51,0)
 ;
"RTN","GMPL1",52,0)
 ; *********************************************************************
"RTN","GMPL1",53,0)
 ; *  GMPIFN expected for the following calls:
"RTN","GMPL1",54,0)
 ;
"RTN","GMPL1",55,0)
STATUS ; -- inactivate problem
"RTN","GMPL1",56,0)
 N DIE,DA,DR,X,Y,CHNGE,GMPFLD,PROMPT,DEFAULT
"RTN","GMPL1",57,0)
 S GMPFLD(.13)=$P($G(^AUPNPROB(GMPIFN,0)),U,13) ; Onset
"RTN","GMPL1",58,0)
 W !!,$$PROBTEXT^GMPLX(GMPIFN) D RESOLVED^GMPLEDT4 Q:$D(GMPQUIT)
"RTN","GMPL1",59,0)
 S PROMPT="COMMENT (<60 char): ",DEFAULT="" D EDNOTE^GMPLEDT4 Q:$D(GMPQUIT)
"RTN","GMPL1",60,0)
 W ! I Y'="" S GMPFLD(10,"NEW",1)=Y D NEWNOTE^GMPLSAVE W "."
"RTN","GMPL1",61,0)
 S DIE="^AUPNPROB(",DR=".12///I;1.07////"_$P($G(GMPFLD(1.07)),U)
"RTN","GMPL1",62,0)
 S DA=GMPIFN D ^DIE W "."
"RTN","GMPL1",63,0)
 S CHNGE=GMPIFN_"^.12^"_$$HTFM^XLFDT($H)_U_DUZ_"^A^I^^"_+$G(GMPROV)
"RTN","GMPL1",64,0)
 D AUDIT^GMPLX(CHNGE,"") W "." ; audit trail
"RTN","GMPL1",65,0)
 D DTMOD^GMPLX(GMPIFN) W "." ; update Dt Last Mod
"RTN","GMPL1",66,0)
 W "... inactivated!",!
"RTN","GMPL1",67,0)
 H 1 S GMPSAVED=1
"RTN","GMPL1",68,0)
 Q
"RTN","GMPL1",69,0)
 ;
"RTN","GMPL1",70,0)
NEWNOTE ; -- add a new comment
"RTN","GMPL1",71,0)
 N GMPFLD
"RTN","GMPL1",72,0)
 W !!,$$PROBTEXT^GMPLX(GMPIFN)
"RTN","GMPL1",73,0)
 I '$$CODESTS^GMPLX(GMPIFN,DT) W !,"is inactive.  Edit the problem before adding comments.",! H 2 Q
"RTN","GMPL1",74,0)
 D NOTE^GMPLEDT1 Q:$D(GMPQUIT)!($D(GMPFLD(10,"NEW"))'>9)
"RTN","GMPL1",75,0)
 D NEWNOTE^GMPLSAVE,DTMOD^GMPLX(GMPIFN)
"RTN","GMPL1",76,0)
 S GMPSAVED=1
"RTN","GMPL1",77,0)
 Q
"RTN","GMPL1",78,0)
 ;
"RTN","GMPL1",79,0)
DELETE ; -- delete a problem
"RTN","GMPL1",80,0)
 N PROMPT,DEFAULT,X,Y,CHNGE,GMPFLD
"RTN","GMPL1",81,0)
 W !!,$$PROBTEXT^GMPLX(GMPIFN)
"RTN","GMPL1",82,0)
 S PROMPT="REASON FOR REMOVAL: ",DEFAULT=""
"RTN","GMPL1",83,0)
 D EDNOTE^GMPLEDT4 Q:$D(GMPQUIT)  W !
"RTN","GMPL1",84,0)
 I Y'="" S GMPFLD(10,"NEW",1)=Y D NEWNOTE^GMPLSAVE W "."
"RTN","GMPL1",85,0)
 S CHNGE=GMPIFN_"^1.02^"_$$HTFM^XLFDT($H)_U_DUZ_"^P^H^Deleted^"_+$G(GMPROV)
"RTN","GMPL1",86,0)
 S $P(^AUPNPROB(GMPIFN,1),U,2)="H",GMPSAVED=1 W "."
"RTN","GMPL1",87,0)
 D AUDIT^GMPLX(CHNGE,""),DTMOD^GMPLX(GMPIFN) W "."
"RTN","GMPL1",88,0)
 W "... removed!",! H 1
"RTN","GMPL1",89,0)
 Q
"RTN","GMPL1",90,0)
 ;
"RTN","GMPL1",91,0)
VERIFY ; -- verify a transcribed problem, if parameter on
"RTN","GMPL1",92,0)
 N NOW,CHNGE S NOW=$$HTFM^XLFDT($H)
"RTN","GMPL1",93,0)
 W !!,$$PROBTEXT^GMPLX(GMPIFN),!
"RTN","GMPL1",94,0)
 I '$$CODESTS^GMPLX(GMPIFN,DT) W "has an inactive ICD9 code. Edit the problem before verification.",! H 2 Q
"RTN","GMPL1",95,0)
 I $P($G(^AUPNPROB(GMPIFN,1)),U,2)'="T" W "does not require verification.",! H 2 Q
"RTN","GMPL1",96,0)
 L +^AUPNPROB(GMPIFN,0):1 I '$T W $C(7),$$LOCKED^GMPLX,! H 2 Q
"RTN","GMPL1",97,0)
 S $P(^AUPNPROB(GMPIFN,1),U,2)="P",GMPSAVED=1 W "."
"RTN","GMPL1",98,0)
 S CHNGE=GMPIFN_"^1.02^"_NOW_U_DUZ_"^T^P^Verified^"_DUZ W "."
"RTN","GMPL1",99,0)
 D AUDIT^GMPLX(CHNGE,""),DTMOD^GMPLX(GMPIFN) W "."
"RTN","GMPL1",100,0)
 L -^AUPNPROB(GMPIFN,0) W " verified.",!
"RTN","GMPL1",101,0)
 Q
"RTN","GMPL1",102,0)
ICDMSG ; If Lexicon returns ICD code 799.9
"RTN","GMPL1",103,0)
 N DIR,DTOUT,DUOUT
"RTN","GMPL1",104,0)
 S DIR(0)="YAO"
"RTN","GMPL1",105,0)
 S DIR("A",1)="<< If you PROCEED WITH THIS NON SPECIFIC TERM, an ICD CODE OF 799.9 >>"
"RTN","GMPL1",106,0)
 S DIR("A",2)="<< OTHER UNKNOWN AND UNSPECIFIED CAUSE OF MORBIDITY OR MORTALITY    >>"
"RTN","GMPL1",107,0)
 S DIR("A",3)="<< will be assigned.  Adding more specificity to your diagnosis may >>"
"RTN","GMPL1",108,0)
 S DIR("A",4)="<< allow a more accurate ICD code.                                  >>"
"RTN","GMPL1",109,0)
 S DIR("A",5)=""
"RTN","GMPL1",110,0)
 S DIR("A")="Continue (YES/NO) ",DIR("B")="NO"
"RTN","GMPL1",111,0)
 S DIR("T")=DTIME
"RTN","GMPL1",112,0)
 D ^DIR
"RTN","GMPL1",113,0)
 I $D(DTOUT)!$D(DUOUT) S Y=0
"RTN","GMPL1",114,0)
 I +Y=0 S (GMPLY,GMPROB)=""
"RTN","GMPL1",115,0)
 Q
"RTN","GMPLCODE")
0^2^B11967458^B11198487
"RTN","GMPLCODE",1,0)
GMPLCODE ; SLC/MKB/AJB/TC -- Problem List ICD Code Utilities ;09/20/12  13:22
"RTN","GMPLCODE",2,0)
 ;;2.0;Problem List;**28,43**;Aug 25, 1994;Build 4
"RTN","GMPLCODE",3,0)
EN ; -- main entry point for GMPL CODE LIST
"RTN","GMPLCODE",4,0)
 K GMPLUSER
"RTN","GMPLCODE",5,0)
 D EN^VALM("GMPL CODE LIST")
"RTN","GMPLCODE",6,0)
 Q
"RTN","GMPLCODE",7,0)
 ;
"RTN","GMPLCODE",8,0)
INIT ; -- init variables and list array
"RTN","GMPLCODE",9,0)
 S GMPDFN=$$PAT^GMPLX1 I +GMPDFN'>0 K GMPDFN S VALMQUIT=1 Q
"RTN","GMPLCODE",10,0)
 S GMPVA=$S($G(DUZ("AG"))="V":1,1:0),GMPVAMC=+$G(DUZ(2))
"RTN","GMPLCODE",11,0)
 S (GMPSC,GMPAGTOR,GMPION,GMPGULF)=0 D:GMPVA VADPT^GMPLX1(+GMPDFN)
"RTN","GMPLCODE",12,0)
 S (GMPLVIEW("ACT"),GMPLVIEW("VIEW"))="",GMPLVIEW("PROV")=0
"RTN","GMPLCODE",13,0)
 S X=$G(^GMPL(125.99,1,0)),GMPARAM("VER")=+$P(X,U,2),GMPARAM("PRT")=+$P(X,U,3),GMPARAM("CLU")=+$P(X,U,4),GMPARAM("REV")=$S($P(X,U,5)="R":1,1:0) K X
"RTN","GMPLCODE",14,0)
 D GETPLIST^GMPLMGR1(.GMPLIST,.GMPTOTAL,.GMPLVIEW)
"RTN","GMPLCODE",15,0)
 D BUILD^GMPLMGR(.GMPLIST)
"RTN","GMPLCODE",16,0)
 S VALMSG=$$MSG^GMPLX
"RTN","GMPLCODE",17,0)
 Q
"RTN","GMPLCODE",18,0)
 ;
"RTN","GMPLCODE",19,0)
HELP ; -- help code
"RTN","GMPLCODE",20,0)
 N X
"RTN","GMPLCODE",21,0)
 W !!?4,"You may take a variety of actions from this prompt.  To update"
"RTN","GMPLCODE",22,0)
 W !?4,"the ICD Code assigned to a problem, you may choose to search"
"RTN","GMPLCODE",23,0)
 W !?4,"either the ICD Diagnosis file or the Clinical Lexicon for a"
"RTN","GMPLCODE",24,0)
 W !?4,"match; the code of the entry you select will be assigned to the"
"RTN","GMPLCODE",25,0)
 W !?4,"current problem in the list.  If you need more information on a"
"RTN","GMPLCODE",26,0)
 W !?4,"problem, select Detailed Display.  To see a listing of"
"RTN","GMPLCODE",27,0)
 W !?4,"actions that facilitate navigating the list, enter '??'."
"RTN","GMPLCODE",28,0)
 W !!,"Press <return> to continue ... " R X:DTIME
"RTN","GMPLCODE",29,0)
 S VALMSG=$$MSG^GMPLX,VALMBCK=$S(VALMCC:"",1:"R")
"RTN","GMPLCODE",30,0)
 Q
"RTN","GMPLCODE",31,0)
 ;
"RTN","GMPLCODE",32,0)
EDIT ; -- edit field .01
"RTN","GMPLCODE",33,0)
 N GMPLSEL,GMPLNO,GMPI,GMPIFN,GMPLNUM,GMPSAVED,GMPQUIT
"RTN","GMPLCODE",34,0)
 S VALMBCK=$S(VALMCC:"",1:"R")
"RTN","GMPLCODE",35,0)
 S GMPLSEL=$$SEL^GMPLX("code") G:GMPLSEL="^" EDQ
"RTN","GMPLCODE",36,0)
 S GMPLNO=$L(GMPLSEL,",")
"RTN","GMPLCODE",37,0)
 F GMPI=1:1:GMPLNO S GMPLNUM=$P(GMPLSEL,",",GMPI) I GMPLNUM D  Q:$D(GMPQUIT)
"RTN","GMPLCODE",38,0)
 . S GMPIFN=$P($G(^TMP("GMPLIDX",$J,+GMPLNUM)),U,2) Q:GMPIFN'>0
"RTN","GMPLCODE",39,0)
 . L +^AUPNPROB(GMPIFN,0):1 I '$T W $C(7),!!,$$LOCKED^GMPLX,! H 2 Q
"RTN","GMPLCODE",40,0)
 . D ICD(GMPLNUM,GMPIFN) L -^AUPNPROB(GMPIFN,0)
"RTN","GMPLCODE",41,0)
 S:$D(GMPSAVED) VALMBCK="R"
"RTN","GMPLCODE",42,0)
EDQ D KILL^GMPLX S VALMSG=$$MSG^GMPLX
"RTN","GMPLCODE",43,0)
 Q
"RTN","GMPLCODE",44,0)
 ;
"RTN","GMPLCODE",45,0)
ICD(NUM,IFN) ; -- search ICD Diagnosis file #80
"RTN","GMPLCODE",46,0)
 N X,Y,DIC,DIR,DTOUT,DUOUT,OLD,NEW,DA,DR,DIE,LCNT,CHNGE,GMPQUIT,GMPSAVED
"RTN","GMPLCODE",47,0)
 W !,IFN,!
"RTN","GMPLCODE",48,0)
 D FULL^VALM1 S VALMBCK="R" W !!
"RTN","GMPLCODE",49,0)
 ;S OLD=+$G(^AUPNPROB(IFN,0)),OLD=OLD_U_$P($G(^ICD9(OLD,0)),U)
"RTN","GMPLCODE",50,0)
 S OLD=+$G(^AUPNPROB(IFN,0)),OLD=OLD_U_$$CODEC^ICDCODE(OLD) ; Replacing direct global read to ^ICD9
"RTN","GMPLCODE",51,0)
 S DIR(0)="PAO^ICD9(:QEM",DIR("A")="Enter ICD CODE or DESCRIPTION: "
"RTN","GMPLCODE",52,0)
 S DIR("A",1)="Problem #"_NUM_": "_$$PROBTEXT^GMPLX(IFN)
"RTN","GMPLCODE",53,0)
 S DIR("?")="Enter a new code number or a brief free text description on which to search",DIR("B")=$P(OLD,U,2)
"RTN","GMPLCODE",54,0)
 ; Added for Code Set Versioning (CSV) - screen allows ONLY active codes
"RTN","GMPLCODE",55,0)
 S DIR("S")="I +($$STATCHK^ICDAPIU($$CODEC^ICDCODE(+($G(Y))),DT))>0"
"RTN","GMPLCODE",56,0)
 D ^DIR I $D(DTOUT)!($D(DUOUT)) S GMPQUIT=1 Q
"RTN","GMPLCODE",57,0)
 I X="@" Q:'$D(DIR("B"))  S:$$SURE^GMPLX Y=$$NOS^GMPLX
"RTN","GMPLCODE",58,0)
 I +Y>0,Y'=OLD D  S GMPSAVED=1
"RTN","GMPLCODE",59,0)
 . S NEW=Y,DIE="^AUPNPROB(",DA=IFN,DR=".01////"_+NEW D ^DIE
"RTN","GMPLCODE",60,0)
 . S CHNGE=IFN_"^.01^"_$$HTFM^XLFDT($H)_U_DUZ_U_+OLD_U_+NEW
"RTN","GMPLCODE",61,0)
 . D AUDIT^GMPLX(CHNGE,"")
"RTN","GMPLCODE",62,0)
 . S LCNT=+$G(^TMP("GMPLIDX",$J,NUM))
"RTN","GMPLCODE",63,0)
 . D FLDTEXT^VALM10(LCNT,"ICD",$P(NEW,U,2))
"RTN","GMPLCODE",64,0)
 D BUILD^GMPLMGR(.GMPLIST) S VALMBCK="R"
"RTN","GMPLCODE",65,0)
 Q
"RTN","GMPLEDT4")
0^3^B19794628^B18695691
"RTN","GMPLEDT4",1,0)
GMPLEDT4 ; SLC/MKB/TC -- Problem List Edit actions cont ;09/21/12  08:27
"RTN","GMPLEDT4",2,0)
 ;;2.0;Problem List;**5,43**;Aug 25, 1994;Build 4
"RTN","GMPLEDT4",3,0)
TERM ; edit field 1.01
"RTN","GMPLEDT4",4,0)
 N PROB,TERM,ICD,DUP,Y,DTOUT,GMPQUIT
"RTN","GMPLEDT4",5,0)
T1 W !,"PROBLEM: "_$P(GMPFLD(.05),U,2)_"//"
"RTN","GMPLEDT4",6,0)
 R PROB:DTIME S:'$T DTOUT=1 I $D(DTOUT)!(PROB="^") S GMPQUIT=1 Q
"RTN","GMPLEDT4",7,0)
 I PROB?1"^".E D JUMP^GMPLEDT3(PROB) Q:$D(GMPQUIT)!($G(GMPLJUMP))  K:$G(GMPIFN) GMPLJUMP G T1
"RTN","GMPLEDT4",8,0)
 Q:PROB=""  Q:PROB=$P(GMPFLD(.05),U,2)  ; no change
"RTN","GMPLEDT4",9,0)
 I PROB["?" D  G T1
"RTN","GMPLEDT4",10,0)
 . W !!?4,"Enter a description of this problem, up to 80 characters.",!
"RTN","GMPLEDT4",11,0)
 I PROB="@",'+$G(GMPIFN) D  S GMPQUIT=1 Q
"RTN","GMPLEDT4",12,0)
 .W !!?5,$C(7),$C(7),"This problem has not yet been saved."
"RTN","GMPLEDT4",13,0)
 .W !?5,"Enter <Q>uit and it will not be added to the list.",!!
"RTN","GMPLEDT4",14,0)
 .K DIR S DIR("A")="Press RETURN to redisplay the problem text"
"RTN","GMPLEDT4",15,0)
 .S DIR(0)="E" D ^DIR K DIR
"RTN","GMPLEDT4",16,0)
 I PROB="@" D DELETE^GMPLEDT2 S:VALMBCK="Q" GMPQUIT=1 Q:$D(GMPQUIT)  G T1
"RTN","GMPLEDT4",17,0)
T2 ; new text -- pass to look-up
"RTN","GMPLEDT4",18,0)
 I '$D(GMPLUSER)!($D(GMPLUSER)&('GMPARAM("CLU"))) S GMPFLD(1.01)="",GMPFLD(.05)=U_PROB Q
"RTN","GMPLEDT4",19,0)
 D SEARCH^GMPLX(.PROB,.Y,"PROBLEM: ","1") ; pass to CLU
"RTN","GMPLEDT4",20,0)
 S TERM=$G(Y),ICD=$G(Y(1)) I +TERM'>0 S GMPQUIT=1 Q
"RTN","GMPLEDT4",21,0)
 S DUP=$$DUPL^GMPLX(+GMPDFN,+TERM,PROB)
"RTN","GMPLEDT4",22,0)
 I DUP,'$$DUPLOK^GMPLX(DUP) W ! G T1
"RTN","GMPLEDT4",23,0)
 S GMPFLD(1.01)=$S(+TERM>1:TERM,1:""),GMPFLD(.05)=U_PROB
"RTN","GMPLEDT4",24,0)
 ;S GMPFLD(.01)=$S($L(ICD):$O(^ICD9("AB",ICD_" ",0))_U_ICD,1:"")
"RTN","GMPLEDT4",25,0)
 S GMPFLD(.01)=$S($L(ICD):$P($$CODEN^ICDCODE(ICD,80),"~")_U_ICD,1:"") ; Replacing direct global read to ^ICD9
"RTN","GMPLEDT4",26,0)
 S:'GMPFLD(.01)!($P(GMPFLD(.01),U)<0) GMPFLD(.01)=$$NOS^GMPLX
"RTN","GMPLEDT4",27,0)
 Q
"RTN","GMPLEDT4",28,0)
 ;
"RTN","GMPLEDT4",29,0)
TEXT(DFLT) ; Enter/edit provider narrative text (no lookup)
"RTN","GMPLEDT4",30,0)
 N DIR,X,Y,DTOUT
"RTN","GMPLEDT4",31,0)
 S DIR(0)="FAO^2:80",DIR("A")="PROBLEM: " S:$L(DFLT) DIR("B")=DFLT
"RTN","GMPLEDT4",32,0)
 S DIR("?")="Enter a description of this problem, up to 80 characters."
"RTN","GMPLEDT4",33,0)
 D ^DIR S:$D(DTOUT)!(X="^") Y="^" S:'$L(DFLT)&(X="") Y="^"
"RTN","GMPLEDT4",34,0)
 Q Y
"RTN","GMPLEDT4",35,0)
 ;
"RTN","GMPLEDT4",36,0)
NTES ; Edit existing note, display # in XQORNOD(0)
"RTN","GMPLEDT4",37,0)
 N NUM,NOTE,X,Y,PROMPT,DEFAULT,NT
"RTN","GMPLEDT4",38,0)
 S NT=$S(GMPVA:7,1:5) S:$D(^XUSEC("GMPL ICD CODE",DUZ)) NT=NT+1
"RTN","GMPLEDT4",39,0)
 S NUM=+$P(XQORNOD(0),U,3)-NT Q:NUM'>0
"RTN","GMPLEDT4",40,0)
 S NOTE=GMPFLD(10,NUM),DEFAULT=$P(NOTE,U,3)
"RTN","GMPLEDT4",41,0)
 S PROMPT="NOTE "_$$EXTDT^GMPLX($P(NOTE,U,5))_": "
"RTN","GMPLEDT4",42,0)
 D EDNOTE Q:$D(GMPQUIT)
"RTN","GMPLEDT4",43,0)
 S $P(GMPFLD(10,NUM),U,3)=Y
"RTN","GMPLEDT4",44,0)
 Q
"RTN","GMPLEDT4",45,0)
 ;
"RTN","GMPLEDT4",46,0)
EDNOTE ; Edit note text given PROMPT,DEFAULT (returns X,Y)
"RTN","GMPLEDT4",47,0)
 N DIR,DTOUT,GMPQUIT S DIR(0)="FAO^1:100",DIR("A")=PROMPT
"RTN","GMPLEDT4",48,0)
 S:$L(DEFAULT) DIR("B")=DEFAULT
"RTN","GMPLEDT4",49,0)
 S DIR("?",1)="Enter any text you wish appended to this problem, up to 60 characters"
"RTN","GMPLEDT4",50,0)
 S DIR("?")="in length.  You may append as many comments to a problem as you wish."
"RTN","GMPLEDT4",51,0)
ED1 D ^DIR I $D(DTOUT)!(Y="^") S GMPQUIT=1,Y="" Q
"RTN","GMPLEDT4",52,0)
 I Y?1"^".E D JUMP^GMPLEDT3(Y) Q:$D(GMPQUIT)!($G(GMPLJUMP))  K:$G(GMPIFN) GMPLJUMP G ED1
"RTN","GMPLEDT4",53,0)
 Q:Y=DEFAULT  I X="@" D  Q:$D(GMPQUIT)!(Y="")  G ED1
"RTN","GMPLEDT4",54,0)
 . N DIR,X,DTOUT,DUOUT S DIR(0)="YAO",DIR("B")="NO"
"RTN","GMPLEDT4",55,0)
 . S DIR("A")="   Are you sure you want to delete this comment? "
"RTN","GMPLEDT4",56,0)
 . S DIR("?")="   Enter YES to completely remove this comment from this patient's problem."
"RTN","GMPLEDT4",57,0)
 . W $C(7) D ^DIR I $D(DUOUT)!($D(DTOUT)) S GMPQUIT=1,Y="" Q
"RTN","GMPLEDT4",58,0)
 . S:Y Y=""
"RTN","GMPLEDT4",59,0)
 I $L(X)>60 W !!,"Text may not exceed 60 characters!",!,$C(7) S DIR("B")=$E(X,1,60) G ED1
"RTN","GMPLEDT4",60,0)
 S Y=X
"RTN","GMPLEDT4",61,0)
 Q
"RTN","GMPLEDT4",62,0)
 ;
"RTN","GMPLEDT4",63,0)
RESOLVED ; edit field 1.07
"RTN","GMPLEDT4",64,0)
 N X,Y,PROMPT,HELPMSG,DEFAULT,ONSET,GMPQUIT S ONSET=+$G(GMPFLD(.13))
"RTN","GMPLEDT4",65,0)
 S DEFAULT=$G(GMPFLD(1.07)),PROMPT="DATE RESOLVED: "
"RTN","GMPLEDT4",66,0)
 S HELPMSG="Enter the date this problem became resolved or inactive, as precisely as known."
"RTN","GMPLEDT4",67,0)
R1 D DATE^GMPLEDT2 Q:$D(GMPQUIT)!($G(GMPLJUMP))
"RTN","GMPLEDT4",68,0)
 I Y,ONSET,Y<ONSET W !!,"Date Resolved cannot be prior to the Date of Onset!",$C(7) G R1
"RTN","GMPLEDT4",69,0)
 S GMPFLD(1.07)=Y S:Y'="" GMPFLD(1.07)=GMPFLD(1.07)_U_$$EXTDT^GMPLX(Y)
"RTN","GMPLEDT4",70,0)
 Q
"RTN","GMPLEDT4",71,0)
 ;
"RTN","GMPLEDT4",72,0)
PRIORITY ; edit field 1.14
"RTN","GMPLEDT4",73,0)
 N DIR,X,Y,DTOUT,GMPQUIT
"RTN","GMPLEDT4",74,0)
 S DIR(0)="SAO^A:ACUTE;C:CHRONIC;",DIR("A")="  (A)cute or (C)hronic? "
"RTN","GMPLEDT4",75,0)
 S:$L($G(GMPFLD(1.14))) DIR("B")=$P(GMPFLD(1.14),U,2)
"RTN","GMPLEDT4",76,0)
 S DIR("?",1)="  You may further refine the status of this problem by designating it",DIR("?",2)="  as ACUTE or CHRONIC; problems marked as ACUTE will be flagged on the",DIR("?")="  list display with a '*'."
"RTN","GMPLEDT4",77,0)
PR1 D ^DIR I $D(DTOUT)!(Y="^") S GMPQUIT=1 Q
"RTN","GMPLEDT4",78,0)
 I Y?1"^".E D JUMP^GMPLEDT3(Y) Q:$D(GMPQUIT)!($G(GMPLJUMP))  K:$G(GMPIFN) GMPLJUMP G PR1
"RTN","GMPLEDT4",79,0)
 S:Y'="" Y=Y_U_$S(Y="A":"ACUTE",1:"CHRONIC")
"RTN","GMPLEDT4",80,0)
 S GMPFLD(1.14)=Y
"RTN","GMPLEDT4",81,0)
 Q
"RTN","GMPLPXRM")
0^4^B11040861^B10434009
"RTN","GMPLPXRM",1,0)
GMPLPXRM ; SLC/PKR/TC - Build Clinical Reminder indexes for AUPNPROB. ;02/27/2004 [5/29/12 9:20am]
"RTN","GMPLPXRM",2,0)
 ;;2.0;Problem List;**27,43**;Aug 25, 1994;Build 4
"RTN","GMPLPXRM",3,0)
 ;DBIA 4113 supports PXRMSXRM entry points. 
"RTN","GMPLPXRM",4,0)
 ;DBIA 4114 supports setting and killing ^PXRMINDX(9000011)
"RTN","GMPLPXRM",5,0)
 ;===============================================================
"RTN","GMPLPXRM",6,0)
INDEX ;Build the indexes for PROBLEM LIST.
"RTN","GMPLPXRM",7,0)
 N COND,DAS,DFN,DIFF,DLM,DONE,END,ENTRIES,ETEXT,GLOBAL,IND,NE,NERROR
"RTN","GMPLPXRM",8,0)
 N PRIO,PROB,START,STATUS,TEMP,TENP,TEXT
"RTN","GMPLPXRM",9,0)
 ;Don't leave any old stuff around.
"RTN","GMPLPXRM",10,0)
 ;DBIA 4114
"RTN","GMPLPXRM",11,0)
 K ^PXRMINDX(9000011)
"RTN","GMPLPXRM",12,0)
 S GLOBAL=$$GET1^DID(9000011,"","","GLOBAL NAME")
"RTN","GMPLPXRM",13,0)
 S ENTRIES=$P(^AUPNPROB(0),U,4)
"RTN","GMPLPXRM",14,0)
 S TENP=ENTRIES/10
"RTN","GMPLPXRM",15,0)
 S TENP=+$P(TENP,".",1)
"RTN","GMPLPXRM",16,0)
 I TENP<1 S TENP=1
"RTN","GMPLPXRM",17,0)
 D BMES^XPDUTL("Building indexes PROBLEM LIST")
"RTN","GMPLPXRM",18,0)
 S TEXT="There are "_ENTRIES_" entries to process."
"RTN","GMPLPXRM",19,0)
 D MES^XPDUTL(TEXT)
"RTN","GMPLPXRM",20,0)
 S START=$H
"RTN","GMPLPXRM",21,0)
 S (DAS,DONE,IND,NE,NERROR)=0
"RTN","GMPLPXRM",22,0)
 F  S DAS=$O(^AUPNPROB(DAS)) Q:DONE  D
"RTN","GMPLPXRM",23,0)
 . I +DAS=0 S DONE=1 Q
"RTN","GMPLPXRM",24,0)
 . I +DAS'=DAS D  Q
"RTN","GMPLPXRM",25,0)
 .. S DONE=1
"RTN","GMPLPXRM",26,0)
 .. S ETEXT="Bad ien: "_DAS_", cannot continue."
"RTN","GMPLPXRM",27,0)
 .. D ADDERROR^PXRMSXRM(GLOBAL,ETEXT,.NERROR)
"RTN","GMPLPXRM",28,0)
 . S IND=IND+1
"RTN","GMPLPXRM",29,0)
 . I IND#TENP=0 D
"RTN","GMPLPXRM",30,0)
 .. S TEXT="Processing entry "_IND
"RTN","GMPLPXRM",31,0)
 .. D MES^XPDUTL(TEXT)
"RTN","GMPLPXRM",32,0)
 . I IND#10000=0 W "."
"RTN","GMPLPXRM",33,0)
 . S TEMP=$G(^AUPNPROB(DAS,1))
"RTN","GMPLPXRM",34,0)
 . S COND=$P(TEMP,U,2)
"RTN","GMPLPXRM",35,0)
 .;Don't index Hidden problems.
"RTN","GMPLPXRM",36,0)
 . I COND="H" Q
"RTN","GMPLPXRM",37,0)
 . S PRIO=$P(TEMP,U,14)
"RTN","GMPLPXRM",38,0)
 .;If there is no priority set it to "U" for undefined.
"RTN","GMPLPXRM",39,0)
 . I PRIO="" S PRIO="U"
"RTN","GMPLPXRM",40,0)
 . S TEMP=^AUPNPROB(DAS,0)
"RTN","GMPLPXRM",41,0)
 . S PROB=$P(TEMP,U,1)
"RTN","GMPLPXRM",42,0)
 . I PROB="" D  Q
"RTN","GMPLPXRM",43,0)
 .. S ETEXT=DAS_" missing problem"
"RTN","GMPLPXRM",44,0)
 .. D ADDERROR^PXRMSXRM(GLOBAL,ETEXT,.NERROR)
"RTN","GMPLPXRM",45,0)
 . ;I '$D(^ICD9(PROB)) D  Q
"RTN","GMPLPXRM",46,0)
 . I $P($$CODEC^ICDCODE(PROB),U)<0 D  Q  ; Replacing direct global read to ^ICD9
"RTN","GMPLPXRM",47,0)
 .. S ETEXT=DAS_" invalid ICD9"
"RTN","GMPLPXRM",48,0)
 .. D ADDERROR^PXRMSXRM(GLOBAL,ETEXT,.NERROR)
"RTN","GMPLPXRM",49,0)
 . S DFN=$P(TEMP,U,2)
"RTN","GMPLPXRM",50,0)
 . I DFN="" D  Q
"RTN","GMPLPXRM",51,0)
 .. S ETEXT=DAS_" missing DFN"
"RTN","GMPLPXRM",52,0)
 .. D ADDERROR^PXRMSXRM(GLOBAL,ETEXT,.NERROR)
"RTN","GMPLPXRM",53,0)
 . S DLM=$P(TEMP,U,3)
"RTN","GMPLPXRM",54,0)
 . I DLM="" D  Q
"RTN","GMPLPXRM",55,0)
 .. S ETEXT=DAS_" missing date laste modified"
"RTN","GMPLPXRM",56,0)
 .. D ADDERROR^PXRMSXRM(GLOBAL,ETEXT,.NERROR)
"RTN","GMPLPXRM",57,0)
 . S STATUS=$P(TEMP,U,12)
"RTN","GMPLPXRM",58,0)
 . I STATUS="" D  Q
"RTN","GMPLPXRM",59,0)
 .. S ETEXT=DAS_" missing status"
"RTN","GMPLPXRM",60,0)
 .. D ADDERROR^PXRMSXRM(GLOBAL,ETEXT,.NERROR) Q
"RTN","GMPLPXRM",61,0)
 . S NE=NE+1
"RTN","GMPLPXRM",62,0)
 . S ^PXRMINDX(9000011,"ISPP",PROB,STATUS,PRIO,DFN,DLM,DAS)=""
"RTN","GMPLPXRM",63,0)
 . S ^PXRMINDX(9000011,"PSPI",DFN,STATUS,PRIO,PROB,DLM,DAS)=""
"RTN","GMPLPXRM",64,0)
 S END=$H
"RTN","GMPLPXRM",65,0)
 S TEXT=NE_" PROBLEM LIST results indexed."
"RTN","GMPLPXRM",66,0)
 D MES^XPDUTL(TEXT)
"RTN","GMPLPXRM",67,0)
 D DETIME^PXRMSXRM(START,END)
"RTN","GMPLPXRM",68,0)
 ;If there were errors send a message.
"RTN","GMPLPXRM",69,0)
 I NERROR>0 D ERRMSG^PXRMSXRM(NERROR,GLOBAL)
"RTN","GMPLPXRM",70,0)
 ;Send a MailMan message with the results.
"RTN","GMPLPXRM",71,0)
 D COMMSG^PXRMSXRM(GLOBAL,START,END,NE,NERROR)
"RTN","GMPLPXRM",72,0)
 S ^PXRMINDX(9000011,"GLOBAL NAME")=GLOBAL
"RTN","GMPLPXRM",73,0)
 S ^PXRMINDX(9000011,"BUILT BY")=DUZ
"RTN","GMPLPXRM",74,0)
 S ^PXRMINDX(9000011,"DATE BUILT")=$$NOW^XLFDT
"RTN","GMPLPXRM",75,0)
 Q
"RTN","GMPLPXRM",76,0)
 ;
"RTN","GMPLPXRM",77,0)
 ;===============================================================
"RTN","GMPLPXRM",78,0)
KPROB(X,DA) ;Delete index for Problem List.
"RTN","GMPLPXRM",79,0)
 N PRIO
"RTN","GMPLPXRM",80,0)
 S PRIO=$S(X(5)="":"U",1:X(5))
"RTN","GMPLPXRM",81,0)
 ;DBIA 4114
"RTN","GMPLPXRM",82,0)
 K ^PXRMINDX(9000011,"ISPP",X(1),X(4),PRIO,X(2),X(3),DA)
"RTN","GMPLPXRM",83,0)
 K ^PXRMINDX(9000011,"PSPI",X(2),X(4),PRIO,X(1),X(3),DA)
"RTN","GMPLPXRM",84,0)
 Q
"RTN","GMPLPXRM",85,0)
 ;
"RTN","GMPLPXRM",86,0)
 ;===============================================================
"RTN","GMPLPXRM",87,0)
SPROB(X,DA) ;Set index for Problem List.
"RTN","GMPLPXRM",88,0)
 ;X(1)=DIAGNOSIS, X(2)=DFN, X(3)=DATE LAST MODIFIED, X(4)=STATUS
"RTN","GMPLPXRM",89,0)
 ;X(5)=PRIORITY, X(6)=CONDITION
"RTN","GMPLPXRM",90,0)
 ;Don't index Hidden problems.
"RTN","GMPLPXRM",91,0)
 I X(6)="H" Q
"RTN","GMPLPXRM",92,0)
 N PRIO
"RTN","GMPLPXRM",93,0)
 S PRIO=$S(X(5)="":"U",1:X(5))
"RTN","GMPLPXRM",94,0)
 ;DBIA 4114
"RTN","GMPLPXRM",95,0)
 S ^PXRMINDX(9000011,"ISPP",X(1),X(4),PRIO,X(2),X(3),DA)=""
"RTN","GMPLPXRM",96,0)
 S ^PXRMINDX(9000011,"PSPI",X(2),X(4),PRIO,X(1),X(3),DA)=""
"RTN","GMPLPXRM",97,0)
 Q
"RTN","GMPLPXRM",98,0)
 ;
"VER")
8.0^22.0
"BLD",8439,6)
^36
**END**
**END**
