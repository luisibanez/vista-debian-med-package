Released XU*8*632 SEQ #501
Extracted from mail message
**KIDS**:XU*8.0*632^

**INSTALL NAME**
XU*8.0*632
"BLD",1502,0)
XU*8.0*632^KERNEL^0^3130529^y
"BLD",1502,1,0)
^^1^1^3130423^
"BLD",1502,1,1,0)
Please see description of patch XU*8*632 on FORUM.
"BLD",1502,4,0)
^9.64PA^^
"BLD",1502,6.3)
3
"BLD",1502,"KRN",0)
^9.67PA^9002226^22
"BLD",1502,"KRN",.4,0)
.4
"BLD",1502,"KRN",.401,0)
.401
"BLD",1502,"KRN",.402,0)
.402
"BLD",1502,"KRN",.403,0)
.403
"BLD",1502,"KRN",.5,0)
.5
"BLD",1502,"KRN",.84,0)
.84
"BLD",1502,"KRN",3.6,0)
3.6
"BLD",1502,"KRN",3.8,0)
3.8
"BLD",1502,"KRN",9.2,0)
9.2
"BLD",1502,"KRN",9.8,0)
9.8
"BLD",1502,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",1502,"KRN",9.8,"NM",1,0)
XQALERT^^0^B20471268
"BLD",1502,"KRN",9.8,"NM","B","XQALERT",1)

"BLD",1502,"KRN",19,0)
19
"BLD",1502,"KRN",19,"NM",0)
^9.68A^^
"BLD",1502,"KRN",19.1,0)
19.1
"BLD",1502,"KRN",101,0)
101
"BLD",1502,"KRN",409.61,0)
409.61
"BLD",1502,"KRN",771,0)
771
"BLD",1502,"KRN",779.2,0)
779.2
"BLD",1502,"KRN",870,0)
870
"BLD",1502,"KRN",8989.51,0)
8989.51
"BLD",1502,"KRN",8989.52,0)
8989.52
"BLD",1502,"KRN",8993,0)
8993
"BLD",1502,"KRN",8994,0)
8994
"BLD",1502,"KRN",9002226,0)
9002226
"BLD",1502,"KRN","B",.4,.4)

"BLD",1502,"KRN","B",.401,.401)

"BLD",1502,"KRN","B",.402,.402)

"BLD",1502,"KRN","B",.403,.403)

"BLD",1502,"KRN","B",.5,.5)

"BLD",1502,"KRN","B",.84,.84)

"BLD",1502,"KRN","B",3.6,3.6)

"BLD",1502,"KRN","B",3.8,3.8)

"BLD",1502,"KRN","B",9.2,9.2)

"BLD",1502,"KRN","B",9.8,9.8)

"BLD",1502,"KRN","B",19,19)

"BLD",1502,"KRN","B",19.1,19.1)

"BLD",1502,"KRN","B",101,101)

"BLD",1502,"KRN","B",409.61,409.61)

"BLD",1502,"KRN","B",771,771)

"BLD",1502,"KRN","B",779.2,779.2)

"BLD",1502,"KRN","B",870,870)

"BLD",1502,"KRN","B",8989.51,8989.51)

"BLD",1502,"KRN","B",8989.52,8989.52)

"BLD",1502,"KRN","B",8993,8993)

"BLD",1502,"KRN","B",8994,8994)

"BLD",1502,"KRN","B",9002226,9002226)

"BLD",1502,"QUES",0)
^9.62^^
"MBREQ")
0
"PKG",3,-1)
1^1
"PKG",3,0)
KERNEL^XU^SIGN-ON, SECURITY, MENU DRIVER, DEVICES, TASKMAN^
"PKG",3,20,0)
^9.402P^2^2
"PKG",3,20,1,0)
200^^XDRM200N
"PKG",3,20,1,1)

"PKG",3,20,2,0)
2^^RGDRM03
"PKG",3,20,2,1)

"PKG",3,20,"B",2,2)

"PKG",3,20,"B",200,1)

"PKG",3,22,0)
^9.49I^1^1
"PKG",3,22,1,0)
8.0^3090706^3090706^6
"PKG",3,22,1,"PAH",1,0)
632^3130529
"PKG",3,22,1,"PAH",1,1,0)
^^1^1^3130529
"PKG",3,22,1,"PAH",1,1,1,0)
Please see description of patch XU*8*632 on FORUM.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","XQALERT")
0^1^B20471268^B19925402
"RTN","XQALERT",1,0)
XQALERT ;ISF/JLI,ISD/HGW - ALERT HANDLER ;05/29/13  11:21
"RTN","XQALERT",2,0)
 ;;8.0;KERNEL;**1,65,125,173,285,366,513,602,632**;Jul 10, 1995;Build 3
"RTN","XQALERT",3,0)
 ;Per VA Directive 6402, this routine should not be modified.
"RTN","XQALERT",4,0)
 Q
"RTN","XQALERT",5,0)
 ;
"RTN","XQALERT",6,0)
SETUP ;SR.
"RTN","XQALERT",7,0)
 D SETUP^XQALSET
"RTN","XQALERT",8,0)
 Q
"RTN","XQALERT",9,0)
 ;
"RTN","XQALERT",10,0)
SETUP1() ;SR.
"RTN","XQALERT",11,0)
 N I S I=$$SETUP1^XQALSET()
"RTN","XQALERT",12,0)
 Q I
"RTN","XQALERT",13,0)
 ;
"RTN","XQALERT",14,0)
DISPLAY ;SR. Display recent new alerts
"RTN","XQALERT",15,0)
 ; ZEXCEPT: XQAUSER - global variable
"RTN","XQALERT",16,0)
 N X1,X2,XQACNT,XQJ
"RTN","XQALERT",17,0)
 I '$D(XQAUSER) S XQAUSER=DUZ
"RTN","XQALERT",18,0)
 I $$ACTVSURO^XQALSURO(XQAUSER)'>0 D RETURN^XQALSUR1(XQAUSER) ; P513
"RTN","XQALERT",19,0)
 Q:$O(^XTV(8992,DUZ,"XQA",0))'>0
"RTN","XQALERT",20,0)
 N X,XQI,XQX,XQX1,DIR,XQA,Y,XQON,XQOFF,XQ1ON,XQ1OFF,XQXDAT S XQX=0,XQX1=0,Y=1,DIR(0)="E" ; P285
"RTN","XQALERT",21,0)
 S XQACNT=0 D SORT
"RTN","XQALERT",22,0)
 F XQJ=0:0 D:XQX1&'(XQX1#20) ^DIR Q:'Y  S XQJ=$O(^TMP("XQ",$J,"XQA",XQJ)) Q:XQJ'>0  S XQI=^TMP("XQ",$J,"XQA",XQJ),XQX=XQX+1,X=$G(^XTV(8992,XQAUSER,"XQA",XQI,0)) I $P(X,U,4) D
"RTN","XQALERT",23,0)
 . N XQXXX,XQXX,XQXY
"RTN","XQALERT",24,0)
 . S XQXXX=X,(XQXX,XQXY)=0,XQXX=$P(X,U,2) I XQXX'="" S XQXX=$O(^XTV(8992.1,"B",$E(XQXX,1,50),0)) I XQXX>0 S XQXY=$O(^XTV(8992.1,XQXX,20,"B",XQAUSER,0)) I XQXY>0 S XQXDAT=$$NOW^XLFDT(),$P(^XTV(8992.1,XQXX,20,XQXY,0),U,2)=XQXDAT ; P173
"RTN","XQALERT",25,0)
 . S XQON="$C(0)",XQOFF="$C(0)"
"RTN","XQALERT",26,0)
 . I $$CHKCRIT^XQALSUR2(XQXXX) D:'$D(XQ1ON) SETREV S XQON=XQ1ON,XQOFF=XQ1OFF ; P513 modified to add use data from file 8992.3 for identifying critical alerts
"RTN","XQALERT",27,0)
 . S X=XQXXX W:XQX1=0 $C(7) W !,@XQON,$P(X,U,3),@XQOFF S XQX1=XQX1+1,$P(^XTV(8992,XQAUSER,"XQA",XQI,0),U,4)="" I $D(^(2)) S X1=^(2) D  ; P285
"RTN","XQALERT",28,0)
 . . S X2=$P(X1,U,3)
"RTN","XQALERT",29,0)
 . . W !?5,"*** FORWARDED BY: ",$P(^VA(200,+X1,0),U),"   Generated: " S X1=$P($P(X,U,2),";",3) W $$DAT8(X1,1)
"RTN","XQALERT",30,0)
 . . I X2'="" W !?5,X2
"RTN","XQALERT",31,0)
 . I $P(X,U,5)="D" S XQA=$P(X,U,2) K ^XTV(8992,XQAUSER,"XQA",XQI) D  S XQX=XQX-1 D:XQA'="" D
"RTN","XQALERT",32,0)
 . . I $G(XQXX)>0,$G(XQXY)>0 S $P(^XTV(8992.1,XQXX,20,XQXY,0),U,5)=XQXDAT
"RTN","XQALERT",33,0)
 . K XQXX,XQXY
"RTN","XQALERT",34,0)
 I XQX>0 W:XQX1=0 !!,"You have PENDING ALERTS" W !?10,"Enter  ""VA to jump to VIEW ALERTS option",! ; ISL-0898-51279
"RTN","XQALERT",35,0)
 W:XQX1>0 !
"RTN","XQALERT",36,0)
 K XQI,XQX,XQX1,DIR,XQA,Y
"RTN","XQALERT",37,0)
 Q
"RTN","XQALERT",38,0)
 ;
"RTN","XQALERT",39,0)
SORT ;SR. Sort alerts
"RTN","XQALERT",40,0)
 ; ZEXCEPT: XQAUSER,XQACNT - global variable
"RTN","XQALERT",41,0)
 N XQI,XQJ,XQX
"RTN","XQALERT",42,0)
 Q:$O(^XTV(8992,XQAUSER,"XQA",0))'>0
"RTN","XQALERT",43,0)
 K ^TMP("XQ",$J,"XQA")
"RTN","XQALERT",44,0)
 F XQI=9999999.999999:0 S XQI=$O(^XTV(8992,XQAUSER,"XQA",XQI),-1) Q:(XQI'>0)!(XQACNT>100)  D  ; P632 sort recent alerts
"RTN","XQALERT",45,0)
 . S XQX=^XTV(8992,XQAUSER,"XQA",XQI,0) ; zero node for the alert
"RTN","XQALERT",46,0)
 . S XQACNT=XQACNT+1
"RTN","XQALERT",47,0)
 . I $$CHKCRIT^XQALSUR2(XQX) D
"RTN","XQALERT",48,0)
 . . S XQJ=XQACNT ; critical alert
"RTN","XQALERT",49,0)
 . E  D
"RTN","XQALERT",50,0)
 . . S XQJ=500000+XQACNT ; normal alert
"RTN","XQALERT",51,0)
 . S ^TMP("XQ",$J,"XQA",XQJ)=XQI ; IEN of the alert
"RTN","XQALERT",52,0)
 Q
"RTN","XQALERT",53,0)
 ;
"RTN","XQALERT",54,0)
D ;
"RTN","XQALERT",55,0)
 ; ZEXCEPT: XQA
"RTN","XQALERT",56,0)
 K ^XTV(8992,"AXQA",XQA,DUZ),^XTV(8992,"AXQAN",$P(XQA,";"),DUZ)
"RTN","XQALERT",57,0)
 Q
"RTN","XQALERT",58,0)
 ;
"RTN","XQALERT",59,0)
DAT8(FMDAT,TFLG) ;
"RTN","XQALERT",60,0)
 N X
"RTN","XQALERT",61,0)
 S X=$E(FMDAT,4,5)_"/"_$E(FMDAT,6,7)_"/"_$E(FMDAT,2,3)
"RTN","XQALERT",62,0)
 I $G(TFLG)>0 S FMDAT=FMDAT_"0000000",X=X_" "_$E(FMDAT,9,10)_":"_$E(FMDAT,11,12)_":"_$E(FMDAT,13,14)
"RTN","XQALERT",63,0)
 Q X
"RTN","XQALERT",64,0)
 ;
"RTN","XQALERT",65,0)
DOIT ;OPT. Process Alerts [XQALERT]
"RTN","XQALERT",66,0)
 N XQALAST,XQALFWD,XQAUSER
"RTN","XQALERT",67,0)
 S XQAUSER=DUZ D DOIT^XQALERT1,COUNT^XQALDEL(0,XQAUSER)
"RTN","XQALERT",68,0)
 Q
"RTN","XQALERT",69,0)
 ;
"RTN","XQALERT",70,0)
DELETE ;
"RTN","XQALERT",71,0)
 D DELETE^XQALDEL
"RTN","XQALERT",72,0)
 Q
"RTN","XQALERT",73,0)
 ;
"RTN","XQALERT",74,0)
DELETEA ;
"RTN","XQALERT",75,0)
 D DELETEA^XQALDEL
"RTN","XQALERT",76,0)
 Q
"RTN","XQALERT",77,0)
 ;
"RTN","XQALERT",78,0)
OLDDEL ;OPT.
"RTN","XQALERT",79,0)
 D OLDDEL^XQALDEL
"RTN","XQALERT",80,0)
 Q
"RTN","XQALERT",81,0)
 ;
"RTN","XQALERT",82,0)
USERDEL ;OPT.
"RTN","XQALERT",83,0)
 D USERDEL^XQALDEL
"RTN","XQALERT",84,0)
 Q
"RTN","XQALERT",85,0)
 ;
"RTN","XQALERT",86,0)
USER(ROOT,XQAUSER,FRSTDATE,LASTDATE) ; Returns current alerts for the user in an array located under root
"RTN","XQALERT",87,0)
 I '$D(XQAUSER) S XQAUSER=DUZ
"RTN","XQALERT",88,0)
 I $$ACTVSURO^XQALSURO(XQAUSER)'>0 D RETURN^XQALSUR1(XQAUSER) ; P366
"RTN","XQALERT",89,0)
 D GETUSER^XQALDATA(ROOT,XQAUSER,$G(FRSTDATE),$G(LASTDATE))
"RTN","XQALERT",90,0)
 Q
"RTN","XQALERT",91,0)
 ;
"RTN","XQALERT",92,0)
PATIENT(ROOT,PATIENT,FRSTDATE,LASTDATE) ;
"RTN","XQALERT",93,0)
 I $G(PATIENT)'>0 Q
"RTN","XQALERT",94,0)
 D GETPAT^XQALDATA(ROOT,PATIENT,$G(FRSTDATE),$G(LASTDATE))
"RTN","XQALERT",95,0)
 Q
"RTN","XQALERT",96,0)
 ;
"RTN","XQALERT",97,0)
ACTION(ALERTID) ;
"RTN","XQALERT",98,0)
 D ACTION^XQALDOIT(ALERTID)
"RTN","XQALERT",99,0)
 Q
"RTN","XQALERT",100,0)
 ;
"RTN","XQALERT",101,0)
GETACT(ALERTID) ; Return to calling routine the information needed to act on the specified alert.
"RTN","XQALERT",102,0)
 ; On return the following variables are defined:
"RTN","XQALERT",103,0)
 ;  XQAID = the full alert id
"RTN","XQALERT",104,0)
 ;  XQADATA = Any data passed as XQADATA at the time the alert was generated
"RTN","XQALERT",105,0)
 ;  XQAROU  = Indicates routine to be run (includes tag if necessary)
"RTN","XQALERT",106,0)
 ;    This value may have three meanings
"RTN","XQALERT",107,0)
 ;      1.  A null value indicates no routine to be used (XQAOPT contains option name to be run)
"RTN","XQALERT",108,0)
 ;      2.  A value of ^<space>  indicates that the alert is information only (no routine or option action involved).
"RTN","XQALERT",109,0)
 ;      3.  The name of the routine as ^ROUTINE  or TAG^ROUTINE
"RTN","XQALERT",110,0)
 ;  XQAOPT  = Indicates the name of the option to be run if not null.
"RTN","XQALERT",111,0)
 ;
"RTN","XQALERT",112,0)
 ; ZEXCEPT: XQADATA,XQAID,XQAOPT,XQAROU
"RTN","XQALERT",113,0)
 N XQX,XQZ,XQAGETAC
"RTN","XQALERT",114,0)
 S XQAGETAC=1,XQX="",XQZ=""
"RTN","XQALERT",115,0)
 D ACTION^XQALDOIT(ALERTID)
"RTN","XQALERT",116,0)
 S XQAID=$P(XQX,U,2)
"RTN","XQALERT",117,0)
 S XQADATA=$S(XQZ'="":XQZ,1:$P(XQX,U,9,99))
"RTN","XQALERT",118,0)
 S XQAROU=$S($P(XQX,U,8)="":"",1:$P(XQX,U,7,8))
"RTN","XQALERT",119,0)
 S XQAOPT=$S($P(XQX,U,8)="":$P(XQX,U,7),1:"")
"RTN","XQALERT",120,0)
 Q
"RTN","XQALERT",121,0)
 ;
"RTN","XQALERT",122,0)
SETREV ; Set on (XQ1ON) and off (XQ1OFF) variables for Reverse video ; P285
"RTN","XQALERT",123,0)
 ; ZEXCEPT: IOST,XQ1OFF,XQ1ON - global variables
"RTN","XQALERT",124,0)
 N XQ1ON1,XQ1OFF1
"RTN","XQALERT",125,0)
 S XQ1ON="$C(0)",XQ1OFF="$C(0)" I IOST(0)>0 D
"RTN","XQALERT",126,0)
 . S XQ1ON1=$$GET1^DIQ(3.2,IOST(0)_",",14) I XQ1ON1'="" S XQ1ON=XQ1ON1
"RTN","XQALERT",127,0)
 . S XQ1OFF1=$$GET1^DIQ(3.2,IOST(0)_",",15) I XQ1OFF1'="" S XQ1OFF=XQ1OFF1
"RTN","XQALERT",128,0)
 . Q
"RTN","XQALERT",129,0)
 Q
"VER")
8.0^22.0
"BLD",1502,6)
^501
**END**
**END**
